{"version":3,"file":"Flowchart-a1dd416a.js","sources":["../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/utils/dom/position.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/directives/repeat-click/index.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/color-picker/src/props/alpha-slider.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/color-picker/src/utils/draggable.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/color-picker/src/composables/use-alpha-slider.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/color-picker/src/components/alpha-slider.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/color-picker/src/components/hue-slider.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/color-picker/src/color-picker.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/color-picker/src/utils/color.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/color-picker/src/components/predefine.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/color-picker/src/components/sv-panel.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/color-picker/src/color-picker2.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/color-picker/index.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/input-number/src/input-number.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/input-number/src/input-number2.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/input-number/index.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/slider/src/constants.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/slider/src/slider.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/slider/src/composables/use-lifecycle.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/slider/src/composables/use-marks.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/slider/src/composables/use-slide.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/slider/src/composables/use-slider-button.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/slider/src/composables/use-stops.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/slider/src/composables/use-watch.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/slider/src/button.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/slider/src/button2.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/slider/src/marker.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/slider/src/slider2.mjs","../../../node_modules/.pnpm/element-plus@2.3.14_vue@3.3.4/node_modules/element-plus/es/components/slider/index.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/attributes/calc.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/geometry.helpers.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/line.bearing.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/line.squaredLength.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/line.length.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/types.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/point.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/line.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/ellipse.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/rect.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/points.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/polyline.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/curve.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/extend.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/path.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/bezier.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/polygon.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/intersection.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/g/index.mjs","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_setup.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/restArguments.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isObject.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isNull.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isUndefined.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isBoolean.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isElement.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_tagTester.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isString.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isNumber.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isDate.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isRegExp.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isError.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isSymbol.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isArrayBuffer.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isFunction.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_hasObjectTag.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_stringTagBug.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isDataView.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isArray.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_has.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isArguments.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isFinite.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isNaN.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/constant.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_createSizePropertyCheck.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_shallowProperty.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_getByteLength.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_isBufferLike.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isTypedArray.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_getLength.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_collectNonEnumProps.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/keys.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isEmpty.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isMatch.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/underscore.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_toBufferView.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isEqual.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/allKeys.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_methodFingerprint.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isMap.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isWeakMap.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isSet.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/isWeakSet.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/values.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/pairs.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/invert.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/functions.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_createAssigner.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/extend.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/extendOwn.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/defaults.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_baseCreate.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/create.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/clone.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/tap.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/toPath.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_toPath.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_deepGet.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/get.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/has.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/identity.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/matcher.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/property.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_optimizeCb.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_baseIteratee.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/iteratee.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_cb.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/mapObject.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/noop.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/propertyOf.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/times.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/random.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/now.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_createEscaper.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_escapeMap.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/escape.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_unescapeMap.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/unescape.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/templateSettings.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/template.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/result.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/uniqueId.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/chain.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_executeBound.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/partial.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/bind.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_isArrayLike.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_flatten.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/bindAll.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/memoize.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/delay.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/defer.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/throttle.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/debounce.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/wrap.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/negate.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/compose.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/after.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/before.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/once.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/findKey.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_createPredicateIndexFinder.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/findIndex.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/findLastIndex.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/sortedIndex.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_createIndexFinder.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/indexOf.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/lastIndexOf.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/find.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/findWhere.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/each.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/map.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_createReduce.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/reduce.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/reduceRight.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/filter.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/reject.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/every.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/some.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/contains.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/invoke.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/pluck.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/where.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/max.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/min.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/toArray.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/sample.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/shuffle.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/sortBy.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_group.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/groupBy.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/indexBy.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/countBy.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/partition.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/size.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_keyInObj.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/pick.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/omit.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/initial.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/first.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/rest.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/last.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/compact.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/flatten.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/difference.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/without.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/uniq.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/union.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/intersection.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/unzip.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/zip.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/object.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/range.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/chunk.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/_chainResult.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/mixin.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/underscore-array-methods.js","../../../node_modules/.pnpm/underscore@1.13.6/node_modules/underscore/modules/index-default.js","../../../node_modules/.pnpm/jquery@3.6.4/node_modules/jquery/dist/jquery.js","../../../node_modules/.pnpm/backbone@1.4.1/node_modules/backbone/backbone.js","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/V/index.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/config/index.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/util/utilHelpers.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/util/util.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/util/cloneCells.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/attributes/props.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/attributes/index.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/Cell.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/util/wrappers.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/util/getRectPoint.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/layout/ports/port.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/layout/ports/portLabel.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/Link.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/ports.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/Element.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/Graph.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/mvc/View.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/PaperLayer.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/HighlighterView.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/CellView.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/ElementView.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/routers/normal.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/routers/oneSide.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/routers/orthogonal.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/routers/manhattan.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/routers/metro.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/routers/rightAngle.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/connectors/straight.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/connectors/jumpover.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/connectors/normal.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/connectors/rounded.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/connectors/smooth.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/connectors/curve.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/LinkView.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/highlighters/stroke.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/highlighters/mask.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/highlighters/opacity.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/highlighters/addClass.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/highlighters/list.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/linkAnchors/index.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/connectionPoints/index.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/anchors/index.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/Paper.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/ToolView.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/dia/ToolsView.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/env/index.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/shapes/basic.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/shapes/standard.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/shapes/devs.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/shapes/logic.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/shapes/chess.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/shapes/erd.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/shapes/fsa.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/shapes/org.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/shapes/pn.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/shapes/uml.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/linkTools/helpers.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/linkTools/Arrowhead.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/linkTools/Boundary.mjs","../../../node_modules/.pnpm/jointjs@3.7.5/node_modules/jointjs/src/elementTools/Control.mjs","../../../apps/mainapp/lib/shapes/link.ts","../../../apps/mainapp/lib/init.ts","../../../apps/mainapp/lib/eletools/index.ts","../../../apps/mainapp/lib/shapes/rect.ts","../../../apps/mainapp/lib/shapes/circle.ts","../../../apps/mainapp/lib/shapes/polygon.ts","../../../apps/mainapp/lib/shapes/path.ts","../../../apps/mainapp/views/diagraming/data/index.ts","../../../apps/mainapp/views/diagraming/service/utils.ts","../../../apps/mainapp/views/diagraming/service/cell-service.ts","../../../apps/mainapp/views/diagraming/service/creator-service.ts","../../../apps/mainapp/views/diagraming/service/listener-service.ts","../../../apps/mainapp/views/diagraming/components/FlowchartHeaderTools.vue","../../../apps/mainapp/views/diagraming/components/FlowchartFooterTools.vue","../../../../../../icons/flowchat/flow.svg","../../../../../../icons/flowchat/decision.svg","../../../../../../icons/flowchat/start-or-end.svg","../../../../../../icons/flowchat/document.svg","../../../../../../icons/flowchat/data.svg","../../../../../../icons/flowchat/child-flow.svg","../../../../../../icons/flowchat/extra-data.svg","../../../../../../icons/flowchat/inner-store.svg","../../../../../../icons/flowchat/queue-data.svg","../../../../../../icons/flowchat/database-1.svg","../../../../../../icons/flowchat/database-2.svg","../../../../../../icons/flowchat/manual-input.svg","../../../../../../icons/flowchat/card.svg","../../../../../../icons/flowchat/cassette.svg","../../../../../../icons/flowchat/display.svg","../../../../../../icons/flowchat/manual-operation.svg","../../../../../../icons/flowchat/prepare.svg","../../../../../../icons/flowchat/parallel-mode.svg","../../../../../../icons/flowchat/cycle-limit.svg","../../../../../../icons/flowchat/or.svg","../../../../../../icons/flowchat/calc-sum.svg","../../../../../../icons/flowchat/off-page-reference.svg","../../../../../../icons/flowchat/sorting.svg","../../../../../../icons/flowchat/merge.svg","../../../../../../icons/flowchat/on-page-reference.svg","../../../apps/mainapp/views/diagraming/Flowchart.vue"],"sourcesContent":["import '../browser.mjs';\nimport { isClient } from '@vueuse/core';\n\nconst isInContainer = (el, container) => {\n  if (!isClient || !el || !container)\n    return false;\n  const elRect = el.getBoundingClientRect();\n  let containerRect;\n  if (container instanceof Element) {\n    containerRect = container.getBoundingClientRect();\n  } else {\n    containerRect = {\n      top: 0,\n      right: window.innerWidth,\n      bottom: window.innerHeight,\n      left: 0\n    };\n  }\n  return elRect.top < containerRect.bottom && elRect.bottom > containerRect.top && elRect.right > containerRect.left && elRect.left < containerRect.right;\n};\nconst getOffsetTop = (el) => {\n  let offset = 0;\n  let parent = el;\n  while (parent) {\n    offset += parent.offsetTop;\n    parent = parent.offsetParent;\n  }\n  return offset;\n};\nconst getOffsetTopDistance = (el, containerEl) => {\n  return Math.abs(getOffsetTop(el) - getOffsetTop(containerEl));\n};\nconst getClientXY = (event) => {\n  let clientX;\n  let clientY;\n  if (event.type === \"touchend\") {\n    clientY = event.changedTouches[0].clientY;\n    clientX = event.changedTouches[0].clientX;\n  } else if (event.type.startsWith(\"touch\")) {\n    clientY = event.touches[0].clientY;\n    clientX = event.touches[0].clientX;\n  } else {\n    clientY = event.clientY;\n    clientX = event.clientX;\n  }\n  return {\n    clientX,\n    clientY\n  };\n};\n\nexport { getClientXY, getOffsetTop, getOffsetTopDistance, isInContainer };\n//# sourceMappingURL=position.mjs.map\n","import '../../utils/index.mjs';\nimport { isFunction } from '@vue/shared';\n\nconst REPEAT_INTERVAL = 100;\nconst REPEAT_DELAY = 600;\nconst vRepeatClick = {\n  beforeMount(el, binding) {\n    const value = binding.value;\n    const { interval = REPEAT_INTERVAL, delay = REPEAT_DELAY } = isFunction(value) ? {} : value;\n    let intervalId;\n    let delayId;\n    const handler = () => isFunction(value) ? value() : value.handler();\n    const clear = () => {\n      if (delayId) {\n        clearTimeout(delayId);\n        delayId = void 0;\n      }\n      if (intervalId) {\n        clearInterval(intervalId);\n        intervalId = void 0;\n      }\n    };\n    el.addEventListener(\"mousedown\", (evt) => {\n      if (evt.button !== 0)\n        return;\n      clear();\n      handler();\n      document.addEventListener(\"mouseup\", () => clear(), {\n        once: true\n      });\n      delayId = setTimeout(() => {\n        intervalId = setInterval(() => {\n          handler();\n        }, interval);\n      }, delay);\n    });\n  }\n};\n\nexport { REPEAT_DELAY, REPEAT_INTERVAL, vRepeatClick };\n//# sourceMappingURL=index.mjs.map\n","import '../../../../utils/index.mjs';\nimport { buildProps, definePropType } from '../../../../utils/vue/props/runtime.mjs';\n\nconst alphaSliderProps = buildProps({\n  color: {\n    type: definePropType(Object),\n    required: true\n  },\n  vertical: {\n    type: Boolean,\n    default: false\n  }\n});\n\nexport { alphaSliderProps };\n//# sourceMappingURL=alpha-slider.mjs.map\n","import '../../../../utils/index.mjs';\nimport { isClient } from '@vueuse/core';\n\nlet isDragging = false;\nfunction draggable(element, options) {\n  if (!isClient)\n    return;\n  const moveFn = function(event) {\n    var _a;\n    (_a = options.drag) == null ? void 0 : _a.call(options, event);\n  };\n  const upFn = function(event) {\n    var _a;\n    document.removeEventListener(\"mousemove\", moveFn);\n    document.removeEventListener(\"mouseup\", upFn);\n    document.removeEventListener(\"touchmove\", moveFn);\n    document.removeEventListener(\"touchend\", upFn);\n    document.onselectstart = null;\n    document.ondragstart = null;\n    isDragging = false;\n    (_a = options.end) == null ? void 0 : _a.call(options, event);\n  };\n  const downFn = function(event) {\n    var _a;\n    if (isDragging)\n      return;\n    event.preventDefault();\n    document.onselectstart = () => false;\n    document.ondragstart = () => false;\n    document.addEventListener(\"mousemove\", moveFn);\n    document.addEventListener(\"mouseup\", upFn);\n    document.addEventListener(\"touchmove\", moveFn);\n    document.addEventListener(\"touchend\", upFn);\n    isDragging = true;\n    (_a = options.start) == null ? void 0 : _a.call(options, event);\n  };\n  element.addEventListener(\"mousedown\", downFn);\n  element.addEventListener(\"touchstart\", downFn);\n}\n\nexport { draggable };\n//# sourceMappingURL=draggable.mjs.map\n","import { getCurrentInstance, shallowRef, ref, onMounted, watch, computed } from 'vue';\nimport '../../../../utils/index.mjs';\nimport '../../../../hooks/index.mjs';\nimport { draggable } from '../utils/draggable.mjs';\nimport { getClientXY } from '../../../../utils/dom/position.mjs';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\nimport { addUnit } from '../../../../utils/dom/style.mjs';\n\nconst useAlphaSlider = (props) => {\n  const instance = getCurrentInstance();\n  const thumb = shallowRef();\n  const bar = shallowRef();\n  function handleClick(event) {\n    const target = event.target;\n    if (target !== thumb.value) {\n      handleDrag(event);\n    }\n  }\n  function handleDrag(event) {\n    if (!bar.value || !thumb.value)\n      return;\n    const el = instance.vnode.el;\n    const rect = el.getBoundingClientRect();\n    const { clientX, clientY } = getClientXY(event);\n    if (!props.vertical) {\n      let left = clientX - rect.left;\n      left = Math.max(thumb.value.offsetWidth / 2, left);\n      left = Math.min(left, rect.width - thumb.value.offsetWidth / 2);\n      props.color.set(\"alpha\", Math.round((left - thumb.value.offsetWidth / 2) / (rect.width - thumb.value.offsetWidth) * 100));\n    } else {\n      let top = clientY - rect.top;\n      top = Math.max(thumb.value.offsetHeight / 2, top);\n      top = Math.min(top, rect.height - thumb.value.offsetHeight / 2);\n      props.color.set(\"alpha\", Math.round((top - thumb.value.offsetHeight / 2) / (rect.height - thumb.value.offsetHeight) * 100));\n    }\n  }\n  return {\n    thumb,\n    bar,\n    handleDrag,\n    handleClick\n  };\n};\nconst useAlphaSliderDOM = (props, {\n  bar,\n  thumb,\n  handleDrag\n}) => {\n  const instance = getCurrentInstance();\n  const ns = useNamespace(\"color-alpha-slider\");\n  const thumbLeft = ref(0);\n  const thumbTop = ref(0);\n  const background = ref();\n  function getThumbLeft() {\n    if (!thumb.value)\n      return 0;\n    if (props.vertical)\n      return 0;\n    const el = instance.vnode.el;\n    const alpha = props.color.get(\"alpha\");\n    if (!el)\n      return 0;\n    return Math.round(alpha * (el.offsetWidth - thumb.value.offsetWidth / 2) / 100);\n  }\n  function getThumbTop() {\n    if (!thumb.value)\n      return 0;\n    const el = instance.vnode.el;\n    if (!props.vertical)\n      return 0;\n    const alpha = props.color.get(\"alpha\");\n    if (!el)\n      return 0;\n    return Math.round(alpha * (el.offsetHeight - thumb.value.offsetHeight / 2) / 100);\n  }\n  function getBackground() {\n    if (props.color && props.color.value) {\n      const { r, g, b } = props.color.toRgb();\n      return `linear-gradient(to right, rgba(${r}, ${g}, ${b}, 0) 0%, rgba(${r}, ${g}, ${b}, 1) 100%)`;\n    }\n    return \"\";\n  }\n  function update() {\n    thumbLeft.value = getThumbLeft();\n    thumbTop.value = getThumbTop();\n    background.value = getBackground();\n  }\n  onMounted(() => {\n    if (!bar.value || !thumb.value)\n      return;\n    const dragConfig = {\n      drag: (event) => {\n        handleDrag(event);\n      },\n      end: (event) => {\n        handleDrag(event);\n      }\n    };\n    draggable(bar.value, dragConfig);\n    draggable(thumb.value, dragConfig);\n    update();\n  });\n  watch(() => props.color.get(\"alpha\"), () => update());\n  watch(() => props.color.value, () => update());\n  const rootKls = computed(() => [ns.b(), ns.is(\"vertical\", props.vertical)]);\n  const barKls = computed(() => ns.e(\"bar\"));\n  const thumbKls = computed(() => ns.e(\"thumb\"));\n  const barStyle = computed(() => ({ background: background.value }));\n  const thumbStyle = computed(() => ({\n    left: addUnit(thumbLeft.value),\n    top: addUnit(thumbTop.value)\n  }));\n  return { rootKls, barKls, barStyle, thumbKls, thumbStyle, update };\n};\n\nexport { useAlphaSlider, useAlphaSliderDOM };\n//# sourceMappingURL=use-alpha-slider.mjs.map\n","import { defineComponent, openBlock, createElementBlock, normalizeClass, unref, createElementVNode, normalizeStyle } from 'vue';\nimport { alphaSliderProps } from '../props/alpha-slider.mjs';\nimport { useAlphaSlider, useAlphaSliderDOM } from '../composables/use-alpha-slider.mjs';\nimport _export_sfc from '../../../../_virtual/plugin-vue_export-helper.mjs';\n\nconst COMPONENT_NAME = \"ElColorAlphaSlider\";\nconst __default__ = defineComponent({\n  name: COMPONENT_NAME\n});\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  ...__default__,\n  props: alphaSliderProps,\n  setup(__props, { expose }) {\n    const props = __props;\n    const { bar, thumb, handleDrag, handleClick } = useAlphaSlider(props);\n    const { rootKls, barKls, barStyle, thumbKls, thumbStyle, update } = useAlphaSliderDOM(props, {\n      bar,\n      thumb,\n      handleDrag\n    });\n    expose({\n      update,\n      bar,\n      thumb\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: normalizeClass(unref(rootKls))\n      }, [\n        createElementVNode(\"div\", {\n          ref_key: \"bar\",\n          ref: bar,\n          class: normalizeClass(unref(barKls)),\n          style: normalizeStyle(unref(barStyle)),\n          onClick: _cache[0] || (_cache[0] = (...args) => unref(handleClick) && unref(handleClick)(...args))\n        }, null, 6),\n        createElementVNode(\"div\", {\n          ref_key: \"thumb\",\n          ref: thumb,\n          class: normalizeClass(unref(thumbKls)),\n          style: normalizeStyle(unref(thumbStyle))\n        }, null, 6)\n      ], 2);\n    };\n  }\n});\nvar AlphaSlider = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue\"]]);\n\nexport { AlphaSlider as default };\n//# sourceMappingURL=alpha-slider.mjs.map\n","import { defineComponent, getCurrentInstance, ref, computed, watch, onMounted, openBlock, createElementBlock, normalizeClass, createElementVNode, normalizeStyle } from 'vue';\nimport '../../../../utils/index.mjs';\nimport '../../../../hooks/index.mjs';\nimport { draggable } from '../utils/draggable.mjs';\nimport _export_sfc from '../../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\nimport { getClientXY } from '../../../../utils/dom/position.mjs';\n\nconst _sfc_main = defineComponent({\n  name: \"ElColorHueSlider\",\n  props: {\n    color: {\n      type: Object,\n      required: true\n    },\n    vertical: Boolean\n  },\n  setup(props) {\n    const ns = useNamespace(\"color-hue-slider\");\n    const instance = getCurrentInstance();\n    const thumb = ref();\n    const bar = ref();\n    const thumbLeft = ref(0);\n    const thumbTop = ref(0);\n    const hueValue = computed(() => {\n      return props.color.get(\"hue\");\n    });\n    watch(() => hueValue.value, () => {\n      update();\n    });\n    function handleClick(event) {\n      const target = event.target;\n      if (target !== thumb.value) {\n        handleDrag(event);\n      }\n    }\n    function handleDrag(event) {\n      if (!bar.value || !thumb.value)\n        return;\n      const el = instance.vnode.el;\n      const rect = el.getBoundingClientRect();\n      const { clientX, clientY } = getClientXY(event);\n      let hue;\n      if (!props.vertical) {\n        let left = clientX - rect.left;\n        left = Math.min(left, rect.width - thumb.value.offsetWidth / 2);\n        left = Math.max(thumb.value.offsetWidth / 2, left);\n        hue = Math.round((left - thumb.value.offsetWidth / 2) / (rect.width - thumb.value.offsetWidth) * 360);\n      } else {\n        let top = clientY - rect.top;\n        top = Math.min(top, rect.height - thumb.value.offsetHeight / 2);\n        top = Math.max(thumb.value.offsetHeight / 2, top);\n        hue = Math.round((top - thumb.value.offsetHeight / 2) / (rect.height - thumb.value.offsetHeight) * 360);\n      }\n      props.color.set(\"hue\", hue);\n    }\n    function getThumbLeft() {\n      if (!thumb.value)\n        return 0;\n      const el = instance.vnode.el;\n      if (props.vertical)\n        return 0;\n      const hue = props.color.get(\"hue\");\n      if (!el)\n        return 0;\n      return Math.round(hue * (el.offsetWidth - thumb.value.offsetWidth / 2) / 360);\n    }\n    function getThumbTop() {\n      if (!thumb.value)\n        return 0;\n      const el = instance.vnode.el;\n      if (!props.vertical)\n        return 0;\n      const hue = props.color.get(\"hue\");\n      if (!el)\n        return 0;\n      return Math.round(hue * (el.offsetHeight - thumb.value.offsetHeight / 2) / 360);\n    }\n    function update() {\n      thumbLeft.value = getThumbLeft();\n      thumbTop.value = getThumbTop();\n    }\n    onMounted(() => {\n      if (!bar.value || !thumb.value)\n        return;\n      const dragConfig = {\n        drag: (event) => {\n          handleDrag(event);\n        },\n        end: (event) => {\n          handleDrag(event);\n        }\n      };\n      draggable(bar.value, dragConfig);\n      draggable(thumb.value, dragConfig);\n      update();\n    });\n    return {\n      bar,\n      thumb,\n      thumbLeft,\n      thumbTop,\n      hueValue,\n      handleClick,\n      update,\n      ns\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass([_ctx.ns.b(), _ctx.ns.is(\"vertical\", _ctx.vertical)])\n  }, [\n    createElementVNode(\"div\", {\n      ref: \"bar\",\n      class: normalizeClass(_ctx.ns.e(\"bar\")),\n      onClick: _cache[0] || (_cache[0] = (...args) => _ctx.handleClick && _ctx.handleClick(...args))\n    }, null, 2),\n    createElementVNode(\"div\", {\n      ref: \"thumb\",\n      class: normalizeClass(_ctx.ns.e(\"thumb\")),\n      style: normalizeStyle({\n        left: _ctx.thumbLeft + \"px\",\n        top: _ctx.thumbTop + \"px\"\n      })\n    }, null, 6)\n  ], 2);\n}\nvar HueSlider = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue\"]]);\n\nexport { HueSlider as default };\n//# sourceMappingURL=hue-slider.mjs.map\n","import { isNil } from 'lodash-unified';\nimport '../../../utils/index.mjs';\nimport '../../../hooks/index.mjs';\nimport '../../../constants/index.mjs';\nimport { buildProps, definePropType } from '../../../utils/vue/props/runtime.mjs';\nimport { useSizeProp } from '../../../hooks/use-size/index.mjs';\nimport { UPDATE_MODEL_EVENT, CHANGE_EVENT } from '../../../constants/event.mjs';\nimport { isString } from '@vue/shared';\n\nconst colorPickerProps = buildProps({\n  modelValue: String,\n  id: String,\n  showAlpha: Boolean,\n  colorFormat: String,\n  disabled: Boolean,\n  size: useSizeProp,\n  popperClass: {\n    type: String,\n    default: \"\"\n  },\n  label: {\n    type: String,\n    default: void 0\n  },\n  tabindex: {\n    type: [String, Number],\n    default: 0\n  },\n  predefine: {\n    type: definePropType(Array)\n  },\n  validateEvent: {\n    type: Boolean,\n    default: true\n  }\n});\nconst colorPickerEmits = {\n  [UPDATE_MODEL_EVENT]: (val) => isString(val) || isNil(val),\n  [CHANGE_EVENT]: (val) => isString(val) || isNil(val),\n  activeChange: (val) => isString(val) || isNil(val)\n};\nconst colorPickerContextKey = Symbol(\"colorPickerContextKey\");\n\nexport { colorPickerContextKey, colorPickerEmits, colorPickerProps };\n//# sourceMappingURL=color-picker.mjs.map\n","import '../../../../utils/index.mjs';\nimport { hasOwn } from '@vue/shared';\n\nconst hsv2hsl = function(hue, sat, val) {\n  return [\n    hue,\n    sat * val / ((hue = (2 - sat) * val) < 1 ? hue : 2 - hue) || 0,\n    hue / 2\n  ];\n};\nconst isOnePointZero = function(n) {\n  return typeof n === \"string\" && n.includes(\".\") && Number.parseFloat(n) === 1;\n};\nconst isPercentage = function(n) {\n  return typeof n === \"string\" && n.includes(\"%\");\n};\nconst bound01 = function(value, max) {\n  if (isOnePointZero(value))\n    value = \"100%\";\n  const processPercent = isPercentage(value);\n  value = Math.min(max, Math.max(0, Number.parseFloat(`${value}`)));\n  if (processPercent) {\n    value = Number.parseInt(`${value * max}`, 10) / 100;\n  }\n  if (Math.abs(value - max) < 1e-6) {\n    return 1;\n  }\n  return value % max / Number.parseFloat(max);\n};\nconst INT_HEX_MAP = {\n  10: \"A\",\n  11: \"B\",\n  12: \"C\",\n  13: \"D\",\n  14: \"E\",\n  15: \"F\"\n};\nconst hexOne = (value) => {\n  value = Math.min(Math.round(value), 255);\n  const high = Math.floor(value / 16);\n  const low = value % 16;\n  return `${INT_HEX_MAP[high] || high}${INT_HEX_MAP[low] || low}`;\n};\nconst toHex = function({ r, g, b }) {\n  if (Number.isNaN(+r) || Number.isNaN(+g) || Number.isNaN(+b))\n    return \"\";\n  return `#${hexOne(r)}${hexOne(g)}${hexOne(b)}`;\n};\nconst HEX_INT_MAP = {\n  A: 10,\n  B: 11,\n  C: 12,\n  D: 13,\n  E: 14,\n  F: 15\n};\nconst parseHexChannel = function(hex) {\n  if (hex.length === 2) {\n    return (HEX_INT_MAP[hex[0].toUpperCase()] || +hex[0]) * 16 + (HEX_INT_MAP[hex[1].toUpperCase()] || +hex[1]);\n  }\n  return HEX_INT_MAP[hex[1].toUpperCase()] || +hex[1];\n};\nconst hsl2hsv = function(hue, sat, light) {\n  sat = sat / 100;\n  light = light / 100;\n  let smin = sat;\n  const lmin = Math.max(light, 0.01);\n  light *= 2;\n  sat *= light <= 1 ? light : 2 - light;\n  smin *= lmin <= 1 ? lmin : 2 - lmin;\n  const v = (light + sat) / 2;\n  const sv = light === 0 ? 2 * smin / (lmin + smin) : 2 * sat / (light + sat);\n  return {\n    h: hue,\n    s: sv * 100,\n    v: v * 100\n  };\n};\nconst rgb2hsv = (r, g, b) => {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  let h;\n  const v = max;\n  const d = max - min;\n  const s = max === 0 ? 0 : d / max;\n  if (max === min) {\n    h = 0;\n  } else {\n    switch (max) {\n      case r: {\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      }\n      case g: {\n        h = (b - r) / d + 2;\n        break;\n      }\n      case b: {\n        h = (r - g) / d + 4;\n        break;\n      }\n    }\n    h /= 6;\n  }\n  return { h: h * 360, s: s * 100, v: v * 100 };\n};\nconst hsv2rgb = function(h, s, v) {\n  h = bound01(h, 360) * 6;\n  s = bound01(s, 100);\n  v = bound01(v, 100);\n  const i = Math.floor(h);\n  const f = h - i;\n  const p = v * (1 - s);\n  const q = v * (1 - f * s);\n  const t = v * (1 - (1 - f) * s);\n  const mod = i % 6;\n  const r = [v, q, p, p, t, v][mod];\n  const g = [t, v, v, q, p, p][mod];\n  const b = [p, p, t, v, v, q][mod];\n  return {\n    r: Math.round(r * 255),\n    g: Math.round(g * 255),\n    b: Math.round(b * 255)\n  };\n};\nclass Color {\n  constructor(options = {}) {\n    this._hue = 0;\n    this._saturation = 100;\n    this._value = 100;\n    this._alpha = 100;\n    this.enableAlpha = false;\n    this.format = \"hex\";\n    this.value = \"\";\n    for (const option in options) {\n      if (hasOwn(options, option)) {\n        this[option] = options[option];\n      }\n    }\n    if (options.value) {\n      this.fromString(options.value);\n    } else {\n      this.doOnChange();\n    }\n  }\n  set(prop, value) {\n    if (arguments.length === 1 && typeof prop === \"object\") {\n      for (const p in prop) {\n        if (hasOwn(prop, p)) {\n          this.set(p, prop[p]);\n        }\n      }\n      return;\n    }\n    ;\n    this[`_${prop}`] = value;\n    this.doOnChange();\n  }\n  get(prop) {\n    if (prop === \"alpha\") {\n      return Math.floor(this[`_${prop}`]);\n    }\n    return this[`_${prop}`];\n  }\n  toRgb() {\n    return hsv2rgb(this._hue, this._saturation, this._value);\n  }\n  fromString(value) {\n    if (!value) {\n      this._hue = 0;\n      this._saturation = 100;\n      this._value = 100;\n      this.doOnChange();\n      return;\n    }\n    const fromHSV = (h, s, v) => {\n      this._hue = Math.max(0, Math.min(360, h));\n      this._saturation = Math.max(0, Math.min(100, s));\n      this._value = Math.max(0, Math.min(100, v));\n      this.doOnChange();\n    };\n    if (value.includes(\"hsl\")) {\n      const parts = value.replace(/hsla|hsl|\\(|\\)/gm, \"\").split(/\\s|,/g).filter((val) => val !== \"\").map((val, index) => index > 2 ? Number.parseFloat(val) : Number.parseInt(val, 10));\n      if (parts.length === 4) {\n        this._alpha = Number.parseFloat(parts[3]) * 100;\n      } else if (parts.length === 3) {\n        this._alpha = 100;\n      }\n      if (parts.length >= 3) {\n        const { h, s, v } = hsl2hsv(parts[0], parts[1], parts[2]);\n        fromHSV(h, s, v);\n      }\n    } else if (value.includes(\"hsv\")) {\n      const parts = value.replace(/hsva|hsv|\\(|\\)/gm, \"\").split(/\\s|,/g).filter((val) => val !== \"\").map((val, index) => index > 2 ? Number.parseFloat(val) : Number.parseInt(val, 10));\n      if (parts.length === 4) {\n        this._alpha = Number.parseFloat(parts[3]) * 100;\n      } else if (parts.length === 3) {\n        this._alpha = 100;\n      }\n      if (parts.length >= 3) {\n        fromHSV(parts[0], parts[1], parts[2]);\n      }\n    } else if (value.includes(\"rgb\")) {\n      const parts = value.replace(/rgba|rgb|\\(|\\)/gm, \"\").split(/\\s|,/g).filter((val) => val !== \"\").map((val, index) => index > 2 ? Number.parseFloat(val) : Number.parseInt(val, 10));\n      if (parts.length === 4) {\n        this._alpha = Number.parseFloat(parts[3]) * 100;\n      } else if (parts.length === 3) {\n        this._alpha = 100;\n      }\n      if (parts.length >= 3) {\n        const { h, s, v } = rgb2hsv(parts[0], parts[1], parts[2]);\n        fromHSV(h, s, v);\n      }\n    } else if (value.includes(\"#\")) {\n      const hex = value.replace(\"#\", \"\").trim();\n      if (!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(hex))\n        return;\n      let r, g, b;\n      if (hex.length === 3) {\n        r = parseHexChannel(hex[0] + hex[0]);\n        g = parseHexChannel(hex[1] + hex[1]);\n        b = parseHexChannel(hex[2] + hex[2]);\n      } else if (hex.length === 6 || hex.length === 8) {\n        r = parseHexChannel(hex.slice(0, 2));\n        g = parseHexChannel(hex.slice(2, 4));\n        b = parseHexChannel(hex.slice(4, 6));\n      }\n      if (hex.length === 8) {\n        this._alpha = parseHexChannel(hex.slice(6)) / 255 * 100;\n      } else if (hex.length === 3 || hex.length === 6) {\n        this._alpha = 100;\n      }\n      const { h, s, v } = rgb2hsv(r, g, b);\n      fromHSV(h, s, v);\n    }\n  }\n  compare(color) {\n    return Math.abs(color._hue - this._hue) < 2 && Math.abs(color._saturation - this._saturation) < 1 && Math.abs(color._value - this._value) < 1 && Math.abs(color._alpha - this._alpha) < 1;\n  }\n  doOnChange() {\n    const { _hue, _saturation, _value, _alpha, format } = this;\n    if (this.enableAlpha) {\n      switch (format) {\n        case \"hsl\": {\n          const hsl = hsv2hsl(_hue, _saturation / 100, _value / 100);\n          this.value = `hsla(${_hue}, ${Math.round(hsl[1] * 100)}%, ${Math.round(hsl[2] * 100)}%, ${this.get(\"alpha\") / 100})`;\n          break;\n        }\n        case \"hsv\": {\n          this.value = `hsva(${_hue}, ${Math.round(_saturation)}%, ${Math.round(_value)}%, ${this.get(\"alpha\") / 100})`;\n          break;\n        }\n        case \"hex\": {\n          this.value = `${toHex(hsv2rgb(_hue, _saturation, _value))}${hexOne(_alpha * 255 / 100)}`;\n          break;\n        }\n        default: {\n          const { r, g, b } = hsv2rgb(_hue, _saturation, _value);\n          this.value = `rgba(${r}, ${g}, ${b}, ${this.get(\"alpha\") / 100})`;\n        }\n      }\n    } else {\n      switch (format) {\n        case \"hsl\": {\n          const hsl = hsv2hsl(_hue, _saturation / 100, _value / 100);\n          this.value = `hsl(${_hue}, ${Math.round(hsl[1] * 100)}%, ${Math.round(hsl[2] * 100)}%)`;\n          break;\n        }\n        case \"hsv\": {\n          this.value = `hsv(${_hue}, ${Math.round(_saturation)}%, ${Math.round(_value)}%)`;\n          break;\n        }\n        case \"rgb\": {\n          const { r, g, b } = hsv2rgb(_hue, _saturation, _value);\n          this.value = `rgb(${r}, ${g}, ${b})`;\n          break;\n        }\n        default: {\n          this.value = toHex(hsv2rgb(_hue, _saturation, _value));\n        }\n      }\n    }\n  }\n}\n\nexport { Color as default };\n//# sourceMappingURL=color.mjs.map\n","import { defineComponent, inject, ref, watch, watchEffect, openBlock, createElementBlock, normalizeClass, createElementVNode, Fragment, renderList, normalizeStyle } from 'vue';\nimport '../../../../hooks/index.mjs';\nimport { colorPickerContextKey } from '../color-picker.mjs';\nimport Color from '../utils/color.mjs';\nimport _export_sfc from '../../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\n\nconst _sfc_main = defineComponent({\n  props: {\n    colors: {\n      type: Array,\n      required: true\n    },\n    color: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const ns = useNamespace(\"color-predefine\");\n    const { currentColor } = inject(colorPickerContextKey);\n    const rgbaColors = ref(parseColors(props.colors, props.color));\n    watch(() => currentColor.value, (val) => {\n      const color = new Color();\n      color.fromString(val);\n      rgbaColors.value.forEach((item) => {\n        item.selected = color.compare(item);\n      });\n    });\n    watchEffect(() => {\n      rgbaColors.value = parseColors(props.colors, props.color);\n    });\n    function handleSelect(index) {\n      props.color.fromString(props.colors[index]);\n    }\n    function parseColors(colors, color) {\n      return colors.map((value) => {\n        const c = new Color();\n        c.enableAlpha = true;\n        c.format = \"rgba\";\n        c.fromString(value);\n        c.selected = c.value === color.value;\n        return c;\n      });\n    }\n    return {\n      rgbaColors,\n      handleSelect,\n      ns\n    };\n  }\n});\nconst _hoisted_1 = [\"onClick\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass(_ctx.ns.b())\n  }, [\n    createElementVNode(\"div\", {\n      class: normalizeClass(_ctx.ns.e(\"colors\"))\n    }, [\n      (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.rgbaColors, (item, index) => {\n        return openBlock(), createElementBlock(\"div\", {\n          key: _ctx.colors[index],\n          class: normalizeClass([\n            _ctx.ns.e(\"color-selector\"),\n            _ctx.ns.is(\"alpha\", item._alpha < 100),\n            { selected: item.selected }\n          ]),\n          onClick: ($event) => _ctx.handleSelect(index)\n        }, [\n          createElementVNode(\"div\", {\n            style: normalizeStyle({ backgroundColor: item.value })\n          }, null, 4)\n        ], 10, _hoisted_1);\n      }), 128))\n    ], 2)\n  ], 2);\n}\nvar Predefine = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue\"]]);\n\nexport { Predefine as default };\n//# sourceMappingURL=predefine.mjs.map\n","import { defineComponent, getCurrentInstance, ref, computed, watch, onMounted, createElementVNode, openBlock, createElementBlock, normalizeClass, normalizeStyle } from 'vue';\nimport '../../../../utils/index.mjs';\nimport '../../../../hooks/index.mjs';\nimport { draggable } from '../utils/draggable.mjs';\nimport _export_sfc from '../../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\nimport { getClientXY } from '../../../../utils/dom/position.mjs';\n\nconst _sfc_main = defineComponent({\n  name: \"ElSlPanel\",\n  props: {\n    color: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const ns = useNamespace(\"color-svpanel\");\n    const instance = getCurrentInstance();\n    const cursorTop = ref(0);\n    const cursorLeft = ref(0);\n    const background = ref(\"hsl(0, 100%, 50%)\");\n    const colorValue = computed(() => {\n      const hue = props.color.get(\"hue\");\n      const value = props.color.get(\"value\");\n      return { hue, value };\n    });\n    function update() {\n      const saturation = props.color.get(\"saturation\");\n      const value = props.color.get(\"value\");\n      const el = instance.vnode.el;\n      const { clientWidth: width, clientHeight: height } = el;\n      cursorLeft.value = saturation * width / 100;\n      cursorTop.value = (100 - value) * height / 100;\n      background.value = `hsl(${props.color.get(\"hue\")}, 100%, 50%)`;\n    }\n    function handleDrag(event) {\n      const el = instance.vnode.el;\n      const rect = el.getBoundingClientRect();\n      const { clientX, clientY } = getClientXY(event);\n      let left = clientX - rect.left;\n      let top = clientY - rect.top;\n      left = Math.max(0, left);\n      left = Math.min(left, rect.width);\n      top = Math.max(0, top);\n      top = Math.min(top, rect.height);\n      cursorLeft.value = left;\n      cursorTop.value = top;\n      props.color.set({\n        saturation: left / rect.width * 100,\n        value: 100 - top / rect.height * 100\n      });\n    }\n    watch(() => colorValue.value, () => {\n      update();\n    });\n    onMounted(() => {\n      draggable(instance.vnode.el, {\n        drag: (event) => {\n          handleDrag(event);\n        },\n        end: (event) => {\n          handleDrag(event);\n        }\n      });\n      update();\n    });\n    return {\n      cursorTop,\n      cursorLeft,\n      background,\n      colorValue,\n      handleDrag,\n      update,\n      ns\n    };\n  }\n});\nconst _hoisted_1 = /* @__PURE__ */ createElementVNode(\"div\", null, null, -1);\nconst _hoisted_2 = [\n  _hoisted_1\n];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass(_ctx.ns.b()),\n    style: normalizeStyle({\n      backgroundColor: _ctx.background\n    })\n  }, [\n    createElementVNode(\"div\", {\n      class: normalizeClass(_ctx.ns.e(\"white\"))\n    }, null, 2),\n    createElementVNode(\"div\", {\n      class: normalizeClass(_ctx.ns.e(\"black\"))\n    }, null, 2),\n    createElementVNode(\"div\", {\n      class: normalizeClass(_ctx.ns.e(\"cursor\")),\n      style: normalizeStyle({\n        top: _ctx.cursorTop + \"px\",\n        left: _ctx.cursorLeft + \"px\"\n      })\n    }, _hoisted_2, 6)\n  ], 6);\n}\nvar SvPanel = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue\"]]);\n\nexport { SvPanel as default };\n//# sourceMappingURL=sv-panel.mjs.map\n","import { defineComponent, ref, reactive, computed, nextTick, onMounted, watch, provide, openBlock, createBlock, unref, withCtx, withDirectives, createElementBlock, createElementVNode, normalizeClass, createVNode, createCommentVNode, withKeys, createTextVNode, toDisplayString, normalizeStyle, vShow } from 'vue';\nimport { debounce } from 'lodash-unified';\nimport { ElButton } from '../../button/index.mjs';\nimport { ElIcon } from '../../icon/index.mjs';\nimport '../../../directives/index.mjs';\nimport { ElTooltip } from '../../tooltip/index.mjs';\nimport { ElInput } from '../../input/index.mjs';\nimport '../../form/index.mjs';\nimport '../../../hooks/index.mjs';\nimport '../../../constants/index.mjs';\nimport '../../../utils/index.mjs';\nimport { ArrowDown, Close } from '@element-plus/icons-vue';\nimport AlphaSlider from './components/alpha-slider.mjs';\nimport HueSlider from './components/hue-slider.mjs';\nimport Predefine from './components/predefine.mjs';\nimport SvPanel from './components/sv-panel.mjs';\nimport Color from './utils/color.mjs';\nimport { colorPickerProps, colorPickerEmits, colorPickerContextKey } from './color-picker.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useLocale } from '../../../hooks/use-locale/index.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useFormItem, useFormItemInputId } from '../../form/src/hooks/use-form-item.mjs';\nimport { useFormSize, useFormDisabled } from '../../form/src/hooks/use-form-common-props.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../constants/event.mjs';\nimport { debugWarn } from '../../../utils/error.mjs';\nimport ClickOutside from '../../../directives/click-outside/index.mjs';\n\nconst _hoisted_1 = [\"id\", \"aria-label\", \"aria-labelledby\", \"aria-description\", \"tabindex\", \"onKeydown\"];\nconst __default__ = defineComponent({\n  name: \"ElColorPicker\"\n});\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  ...__default__,\n  props: colorPickerProps,\n  emits: colorPickerEmits,\n  setup(__props, { expose, emit }) {\n    const props = __props;\n    const { t } = useLocale();\n    const ns = useNamespace(\"color\");\n    const { formItem } = useFormItem();\n    const colorSize = useFormSize();\n    const colorDisabled = useFormDisabled();\n    const { inputId: buttonId, isLabeledByFormItem } = useFormItemInputId(props, {\n      formItemContext: formItem\n    });\n    const hue = ref();\n    const sv = ref();\n    const alpha = ref();\n    const popper = ref();\n    let shouldActiveChange = true;\n    const color = reactive(new Color({\n      enableAlpha: props.showAlpha,\n      format: props.colorFormat || \"\",\n      value: props.modelValue\n    }));\n    const showPicker = ref(false);\n    const showPanelColor = ref(false);\n    const customInput = ref(\"\");\n    const displayedColor = computed(() => {\n      if (!props.modelValue && !showPanelColor.value) {\n        return \"transparent\";\n      }\n      return displayedRgb(color, props.showAlpha);\n    });\n    const currentColor = computed(() => {\n      return !props.modelValue && !showPanelColor.value ? \"\" : color.value;\n    });\n    const buttonAriaLabel = computed(() => {\n      return !isLabeledByFormItem.value ? props.label || t(\"el.colorpicker.defaultLabel\") : void 0;\n    });\n    const buttonAriaLabelledby = computed(() => {\n      return isLabeledByFormItem.value ? formItem == null ? void 0 : formItem.labelId : void 0;\n    });\n    const btnKls = computed(() => {\n      return [\n        ns.b(\"picker\"),\n        ns.is(\"disabled\", colorDisabled.value),\n        ns.bm(\"picker\", colorSize.value)\n      ];\n    });\n    function displayedRgb(color2, showAlpha) {\n      if (!(color2 instanceof Color)) {\n        throw new TypeError(\"color should be instance of _color Class\");\n      }\n      const { r, g, b } = color2.toRgb();\n      return showAlpha ? `rgba(${r}, ${g}, ${b}, ${color2.get(\"alpha\") / 100})` : `rgb(${r}, ${g}, ${b})`;\n    }\n    function setShowPicker(value) {\n      showPicker.value = value;\n    }\n    const debounceSetShowPicker = debounce(setShowPicker, 100);\n    function show() {\n      if (colorDisabled.value)\n        return;\n      setShowPicker(true);\n    }\n    function hide() {\n      debounceSetShowPicker(false);\n      resetColor();\n    }\n    function resetColor() {\n      nextTick(() => {\n        if (props.modelValue) {\n          color.fromString(props.modelValue);\n        } else {\n          color.value = \"\";\n          nextTick(() => {\n            showPanelColor.value = false;\n          });\n        }\n      });\n    }\n    function handleTrigger() {\n      if (colorDisabled.value)\n        return;\n      debounceSetShowPicker(!showPicker.value);\n    }\n    function handleConfirm() {\n      color.fromString(customInput.value);\n    }\n    function confirmValue() {\n      const value = color.value;\n      emit(UPDATE_MODEL_EVENT, value);\n      emit(\"change\", value);\n      if (props.validateEvent) {\n        formItem == null ? void 0 : formItem.validate(\"change\").catch((err) => debugWarn(err));\n      }\n      debounceSetShowPicker(false);\n      nextTick(() => {\n        const newColor = new Color({\n          enableAlpha: props.showAlpha,\n          format: props.colorFormat || \"\",\n          value: props.modelValue\n        });\n        if (!color.compare(newColor)) {\n          resetColor();\n        }\n      });\n    }\n    function clear() {\n      debounceSetShowPicker(false);\n      emit(UPDATE_MODEL_EVENT, null);\n      emit(\"change\", null);\n      if (props.modelValue !== null && props.validateEvent) {\n        formItem == null ? void 0 : formItem.validate(\"change\").catch((err) => debugWarn(err));\n      }\n      resetColor();\n    }\n    onMounted(() => {\n      if (props.modelValue) {\n        customInput.value = currentColor.value;\n      }\n    });\n    watch(() => props.modelValue, (newVal) => {\n      if (!newVal) {\n        showPanelColor.value = false;\n      } else if (newVal && newVal !== color.value) {\n        shouldActiveChange = false;\n        color.fromString(newVal);\n      }\n    });\n    watch(() => currentColor.value, (val) => {\n      customInput.value = val;\n      shouldActiveChange && emit(\"activeChange\", val);\n      shouldActiveChange = true;\n    });\n    watch(() => color.value, () => {\n      if (!props.modelValue && !showPanelColor.value) {\n        showPanelColor.value = true;\n      }\n    });\n    watch(() => showPicker.value, () => {\n      nextTick(() => {\n        var _a, _b, _c;\n        (_a = hue.value) == null ? void 0 : _a.update();\n        (_b = sv.value) == null ? void 0 : _b.update();\n        (_c = alpha.value) == null ? void 0 : _c.update();\n      });\n    });\n    provide(colorPickerContextKey, {\n      currentColor\n    });\n    expose({\n      color,\n      show,\n      hide\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(unref(ElTooltip), {\n        ref_key: \"popper\",\n        ref: popper,\n        visible: showPicker.value,\n        \"show-arrow\": false,\n        \"fallback-placements\": [\"bottom\", \"top\", \"right\", \"left\"],\n        offset: 0,\n        \"gpu-acceleration\": false,\n        \"popper-class\": [unref(ns).be(\"picker\", \"panel\"), unref(ns).b(\"dropdown\"), _ctx.popperClass],\n        \"stop-popper-mouse-event\": false,\n        effect: \"light\",\n        trigger: \"click\",\n        transition: `${unref(ns).namespace.value}-zoom-in-top`,\n        persistent: \"\"\n      }, {\n        content: withCtx(() => [\n          withDirectives((openBlock(), createElementBlock(\"div\", null, [\n            createElementVNode(\"div\", {\n              class: normalizeClass(unref(ns).be(\"dropdown\", \"main-wrapper\"))\n            }, [\n              createVNode(HueSlider, {\n                ref_key: \"hue\",\n                ref: hue,\n                class: \"hue-slider\",\n                color: unref(color),\n                vertical: \"\"\n              }, null, 8, [\"color\"]),\n              createVNode(SvPanel, {\n                ref_key: \"sv\",\n                ref: sv,\n                color: unref(color)\n              }, null, 8, [\"color\"])\n            ], 2),\n            _ctx.showAlpha ? (openBlock(), createBlock(AlphaSlider, {\n              key: 0,\n              ref_key: \"alpha\",\n              ref: alpha,\n              color: unref(color)\n            }, null, 8, [\"color\"])) : createCommentVNode(\"v-if\", true),\n            _ctx.predefine ? (openBlock(), createBlock(Predefine, {\n              key: 1,\n              ref: \"predefine\",\n              color: unref(color),\n              colors: _ctx.predefine\n            }, null, 8, [\"color\", \"colors\"])) : createCommentVNode(\"v-if\", true),\n            createElementVNode(\"div\", {\n              class: normalizeClass(unref(ns).be(\"dropdown\", \"btns\"))\n            }, [\n              createElementVNode(\"span\", {\n                class: normalizeClass(unref(ns).be(\"dropdown\", \"value\"))\n              }, [\n                createVNode(unref(ElInput), {\n                  modelValue: customInput.value,\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => customInput.value = $event),\n                  \"validate-event\": false,\n                  size: \"small\",\n                  onKeyup: withKeys(handleConfirm, [\"enter\"]),\n                  onBlur: handleConfirm\n                }, null, 8, [\"modelValue\", \"onKeyup\"])\n              ], 2),\n              createVNode(unref(ElButton), {\n                class: normalizeClass(unref(ns).be(\"dropdown\", \"link-btn\")),\n                text: \"\",\n                size: \"small\",\n                onClick: clear\n              }, {\n                default: withCtx(() => [\n                  createTextVNode(toDisplayString(unref(t)(\"el.colorpicker.clear\")), 1)\n                ]),\n                _: 1\n              }, 8, [\"class\"]),\n              createVNode(unref(ElButton), {\n                plain: \"\",\n                size: \"small\",\n                class: normalizeClass(unref(ns).be(\"dropdown\", \"btn\")),\n                onClick: confirmValue\n              }, {\n                default: withCtx(() => [\n                  createTextVNode(toDisplayString(unref(t)(\"el.colorpicker.confirm\")), 1)\n                ]),\n                _: 1\n              }, 8, [\"class\"])\n            ], 2)\n          ])), [\n            [unref(ClickOutside), hide]\n          ])\n        ]),\n        default: withCtx(() => [\n          createElementVNode(\"div\", {\n            id: unref(buttonId),\n            class: normalizeClass(unref(btnKls)),\n            role: \"button\",\n            \"aria-label\": unref(buttonAriaLabel),\n            \"aria-labelledby\": unref(buttonAriaLabelledby),\n            \"aria-description\": unref(t)(\"el.colorpicker.description\", { color: _ctx.modelValue || \"\" }),\n            tabindex: _ctx.tabindex,\n            onKeydown: withKeys(handleTrigger, [\"enter\"])\n          }, [\n            unref(colorDisabled) ? (openBlock(), createElementBlock(\"div\", {\n              key: 0,\n              class: normalizeClass(unref(ns).be(\"picker\", \"mask\"))\n            }, null, 2)) : createCommentVNode(\"v-if\", true),\n            createElementVNode(\"div\", {\n              class: normalizeClass(unref(ns).be(\"picker\", \"trigger\")),\n              onClick: handleTrigger\n            }, [\n              createElementVNode(\"span\", {\n                class: normalizeClass([unref(ns).be(\"picker\", \"color\"), unref(ns).is(\"alpha\", _ctx.showAlpha)])\n              }, [\n                createElementVNode(\"span\", {\n                  class: normalizeClass(unref(ns).be(\"picker\", \"color-inner\")),\n                  style: normalizeStyle({\n                    backgroundColor: unref(displayedColor)\n                  })\n                }, [\n                  withDirectives(createVNode(unref(ElIcon), {\n                    class: normalizeClass([unref(ns).be(\"picker\", \"icon\"), unref(ns).is(\"icon-arrow-down\")])\n                  }, {\n                    default: withCtx(() => [\n                      createVNode(unref(ArrowDown))\n                    ]),\n                    _: 1\n                  }, 8, [\"class\"]), [\n                    [vShow, _ctx.modelValue || showPanelColor.value]\n                  ]),\n                  withDirectives(createVNode(unref(ElIcon), {\n                    class: normalizeClass([unref(ns).be(\"picker\", \"empty\"), unref(ns).is(\"icon-close\")])\n                  }, {\n                    default: withCtx(() => [\n                      createVNode(unref(Close))\n                    ]),\n                    _: 1\n                  }, 8, [\"class\"]), [\n                    [vShow, !_ctx.modelValue && !showPanelColor.value]\n                  ])\n                ], 6)\n              ], 2)\n            ], 2)\n          ], 42, _hoisted_1)\n        ]),\n        _: 1\n      }, 8, [\"visible\", \"popper-class\", \"transition\"]);\n    };\n  }\n});\nvar ColorPicker = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue\"]]);\n\nexport { ColorPicker as default };\n//# sourceMappingURL=color-picker2.mjs.map\n","import '../../utils/index.mjs';\nimport ColorPicker from './src/color-picker2.mjs';\nexport { colorPickerContextKey, colorPickerEmits, colorPickerProps } from './src/color-picker.mjs';\nimport { withInstall } from '../../utils/vue/install.mjs';\n\nconst ElColorPicker = withInstall(ColorPicker);\n\nexport { ElColorPicker, ElColorPicker as default };\n//# sourceMappingURL=index.mjs.map\n","import { isNil } from 'lodash-unified';\nimport '../../../hooks/index.mjs';\nimport '../../../utils/index.mjs';\nimport '../../../constants/index.mjs';\nimport { buildProps } from '../../../utils/vue/props/runtime.mjs';\nimport { useSizeProp } from '../../../hooks/use-size/index.mjs';\nimport { isNumber } from '../../../utils/types.mjs';\nimport { CHANGE_EVENT, INPUT_EVENT, UPDATE_MODEL_EVENT } from '../../../constants/event.mjs';\n\nconst inputNumberProps = buildProps({\n  id: {\n    type: String,\n    default: void 0\n  },\n  step: {\n    type: Number,\n    default: 1\n  },\n  stepStrictly: Boolean,\n  max: {\n    type: Number,\n    default: Number.POSITIVE_INFINITY\n  },\n  min: {\n    type: Number,\n    default: Number.NEGATIVE_INFINITY\n  },\n  modelValue: Number,\n  readonly: Boolean,\n  disabled: Boolean,\n  size: useSizeProp,\n  controls: {\n    type: Boolean,\n    default: true\n  },\n  controlsPosition: {\n    type: String,\n    default: \"\",\n    values: [\"\", \"right\"]\n  },\n  valueOnClear: {\n    type: [String, Number, null],\n    validator: (val) => val === null || isNumber(val) || [\"min\", \"max\"].includes(val),\n    default: null\n  },\n  name: String,\n  label: String,\n  placeholder: String,\n  precision: {\n    type: Number,\n    validator: (val) => val >= 0 && val === Number.parseInt(`${val}`, 10)\n  },\n  validateEvent: {\n    type: Boolean,\n    default: true\n  }\n});\nconst inputNumberEmits = {\n  [CHANGE_EVENT]: (cur, prev) => prev !== cur,\n  blur: (e) => e instanceof FocusEvent,\n  focus: (e) => e instanceof FocusEvent,\n  [INPUT_EVENT]: (val) => isNumber(val) || isNil(val),\n  [UPDATE_MODEL_EVENT]: (val) => isNumber(val) || isNil(val)\n};\n\nexport { inputNumberEmits, inputNumberProps };\n//# sourceMappingURL=input-number.mjs.map\n","import { defineComponent, ref, reactive, computed, watch, onMounted, onUpdated, openBlock, createElementBlock, normalizeClass, unref, withModifiers, withDirectives, withKeys, createVNode, withCtx, createBlock, createCommentVNode } from 'vue';\nimport { isNil } from 'lodash-unified';\nimport { ElInput } from '../../input/index.mjs';\nimport { ElIcon } from '../../icon/index.mjs';\nimport '../../form/index.mjs';\nimport '../../../directives/index.mjs';\nimport '../../../hooks/index.mjs';\nimport '../../../utils/index.mjs';\nimport { ArrowDown, Minus, ArrowUp, Plus } from '@element-plus/icons-vue';\nimport '../../../constants/index.mjs';\nimport { inputNumberProps, inputNumberEmits } from './input-number.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useLocale } from '../../../hooks/use-locale/index.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useFormItem } from '../../form/src/hooks/use-form-item.mjs';\nimport { isNumber, isUndefined } from '../../../utils/types.mjs';\nimport { debugWarn, throwError } from '../../../utils/error.mjs';\nimport { useFormSize, useFormDisabled } from '../../form/src/hooks/use-form-common-props.mjs';\nimport { INPUT_EVENT, UPDATE_MODEL_EVENT, CHANGE_EVENT } from '../../../constants/event.mjs';\nimport { isString } from '@vue/shared';\nimport { vRepeatClick } from '../../../directives/repeat-click/index.mjs';\n\nconst _hoisted_1 = [\"aria-label\", \"onKeydown\"];\nconst _hoisted_2 = [\"aria-label\", \"onKeydown\"];\nconst __default__ = defineComponent({\n  name: \"ElInputNumber\"\n});\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  ...__default__,\n  props: inputNumberProps,\n  emits: inputNumberEmits,\n  setup(__props, { expose, emit }) {\n    const props = __props;\n    const { t } = useLocale();\n    const ns = useNamespace(\"input-number\");\n    const input = ref();\n    const data = reactive({\n      currentValue: props.modelValue,\n      userInput: null\n    });\n    const { formItem } = useFormItem();\n    const minDisabled = computed(() => isNumber(props.modelValue) && props.modelValue <= props.min);\n    const maxDisabled = computed(() => isNumber(props.modelValue) && props.modelValue >= props.max);\n    const numPrecision = computed(() => {\n      const stepPrecision = getPrecision(props.step);\n      if (!isUndefined(props.precision)) {\n        if (stepPrecision > props.precision) {\n          debugWarn(\"InputNumber\", \"precision should not be less than the decimal places of step\");\n        }\n        return props.precision;\n      } else {\n        return Math.max(getPrecision(props.modelValue), stepPrecision);\n      }\n    });\n    const controlsAtRight = computed(() => {\n      return props.controls && props.controlsPosition === \"right\";\n    });\n    const inputNumberSize = useFormSize();\n    const inputNumberDisabled = useFormDisabled();\n    const displayValue = computed(() => {\n      if (data.userInput !== null) {\n        return data.userInput;\n      }\n      let currentValue = data.currentValue;\n      if (isNil(currentValue))\n        return \"\";\n      if (isNumber(currentValue)) {\n        if (Number.isNaN(currentValue))\n          return \"\";\n        if (!isUndefined(props.precision)) {\n          currentValue = currentValue.toFixed(props.precision);\n        }\n      }\n      return currentValue;\n    });\n    const toPrecision = (num, pre) => {\n      if (isUndefined(pre))\n        pre = numPrecision.value;\n      if (pre === 0)\n        return Math.round(num);\n      let snum = String(num);\n      const pointPos = snum.indexOf(\".\");\n      if (pointPos === -1)\n        return num;\n      const nums = snum.replace(\".\", \"\").split(\"\");\n      const datum = nums[pointPos + pre];\n      if (!datum)\n        return num;\n      const length = snum.length;\n      if (snum.charAt(length - 1) === \"5\") {\n        snum = `${snum.slice(0, Math.max(0, length - 1))}6`;\n      }\n      return Number.parseFloat(Number(snum).toFixed(pre));\n    };\n    const getPrecision = (value) => {\n      if (isNil(value))\n        return 0;\n      const valueString = value.toString();\n      const dotPosition = valueString.indexOf(\".\");\n      let precision = 0;\n      if (dotPosition !== -1) {\n        precision = valueString.length - dotPosition - 1;\n      }\n      return precision;\n    };\n    const ensurePrecision = (val, coefficient = 1) => {\n      if (!isNumber(val))\n        return data.currentValue;\n      return toPrecision(val + props.step * coefficient);\n    };\n    const increase = () => {\n      if (props.readonly || inputNumberDisabled.value || maxDisabled.value)\n        return;\n      const value = Number(displayValue.value) || 0;\n      const newVal = ensurePrecision(value);\n      setCurrentValue(newVal);\n      emit(INPUT_EVENT, data.currentValue);\n    };\n    const decrease = () => {\n      if (props.readonly || inputNumberDisabled.value || minDisabled.value)\n        return;\n      const value = Number(displayValue.value) || 0;\n      const newVal = ensurePrecision(value, -1);\n      setCurrentValue(newVal);\n      emit(INPUT_EVENT, data.currentValue);\n    };\n    const verifyValue = (value, update) => {\n      const { max, min, step, precision, stepStrictly, valueOnClear } = props;\n      if (max < min) {\n        throwError(\"InputNumber\", \"min should not be greater than max.\");\n      }\n      let newVal = Number(value);\n      if (isNil(value) || Number.isNaN(newVal)) {\n        return null;\n      }\n      if (value === \"\") {\n        if (valueOnClear === null) {\n          return null;\n        }\n        newVal = isString(valueOnClear) ? { min, max }[valueOnClear] : valueOnClear;\n      }\n      if (stepStrictly) {\n        newVal = toPrecision(Math.round(newVal / step) * step, precision);\n      }\n      if (!isUndefined(precision)) {\n        newVal = toPrecision(newVal, precision);\n      }\n      if (newVal > max || newVal < min) {\n        newVal = newVal > max ? max : min;\n        update && emit(UPDATE_MODEL_EVENT, newVal);\n      }\n      return newVal;\n    };\n    const setCurrentValue = (value, emitChange = true) => {\n      var _a;\n      const oldVal = data.currentValue;\n      const newVal = verifyValue(value);\n      if (!emitChange) {\n        emit(UPDATE_MODEL_EVENT, newVal);\n        return;\n      }\n      if (oldVal === newVal)\n        return;\n      data.userInput = null;\n      emit(UPDATE_MODEL_EVENT, newVal);\n      emit(CHANGE_EVENT, newVal, oldVal);\n      if (props.validateEvent) {\n        (_a = formItem == null ? void 0 : formItem.validate) == null ? void 0 : _a.call(formItem, \"change\").catch((err) => debugWarn(err));\n      }\n      data.currentValue = newVal;\n    };\n    const handleInput = (value) => {\n      data.userInput = value;\n      const newVal = value === \"\" ? null : Number(value);\n      emit(INPUT_EVENT, newVal);\n      setCurrentValue(newVal, false);\n    };\n    const handleInputChange = (value) => {\n      const newVal = value !== \"\" ? Number(value) : \"\";\n      if (isNumber(newVal) && !Number.isNaN(newVal) || value === \"\") {\n        setCurrentValue(newVal);\n      }\n      data.userInput = null;\n    };\n    const focus = () => {\n      var _a, _b;\n      (_b = (_a = input.value) == null ? void 0 : _a.focus) == null ? void 0 : _b.call(_a);\n    };\n    const blur = () => {\n      var _a, _b;\n      (_b = (_a = input.value) == null ? void 0 : _a.blur) == null ? void 0 : _b.call(_a);\n    };\n    const handleFocus = (event) => {\n      emit(\"focus\", event);\n    };\n    const handleBlur = (event) => {\n      var _a;\n      emit(\"blur\", event);\n      if (props.validateEvent) {\n        (_a = formItem == null ? void 0 : formItem.validate) == null ? void 0 : _a.call(formItem, \"blur\").catch((err) => debugWarn(err));\n      }\n    };\n    watch(() => props.modelValue, (value) => {\n      const userInput = verifyValue(data.userInput);\n      const newValue = verifyValue(value, true);\n      if (!isNumber(userInput) && (!userInput || userInput !== newValue)) {\n        data.currentValue = newValue;\n        data.userInput = null;\n      }\n    }, { immediate: true });\n    onMounted(() => {\n      var _a;\n      const { min, max, modelValue } = props;\n      const innerInput = (_a = input.value) == null ? void 0 : _a.input;\n      innerInput.setAttribute(\"role\", \"spinbutton\");\n      if (Number.isFinite(max)) {\n        innerInput.setAttribute(\"aria-valuemax\", String(max));\n      } else {\n        innerInput.removeAttribute(\"aria-valuemax\");\n      }\n      if (Number.isFinite(min)) {\n        innerInput.setAttribute(\"aria-valuemin\", String(min));\n      } else {\n        innerInput.removeAttribute(\"aria-valuemin\");\n      }\n      innerInput.setAttribute(\"aria-valuenow\", data.currentValue || data.currentValue === 0 ? String(data.currentValue) : \"\");\n      innerInput.setAttribute(\"aria-disabled\", String(inputNumberDisabled.value));\n      if (!isNumber(modelValue) && modelValue != null) {\n        let val = Number(modelValue);\n        if (Number.isNaN(val)) {\n          val = null;\n        }\n        emit(UPDATE_MODEL_EVENT, val);\n      }\n    });\n    onUpdated(() => {\n      var _a, _b;\n      const innerInput = (_a = input.value) == null ? void 0 : _a.input;\n      innerInput == null ? void 0 : innerInput.setAttribute(\"aria-valuenow\", `${(_b = data.currentValue) != null ? _b : \"\"}`);\n    });\n    expose({\n      focus,\n      blur\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: normalizeClass([\n          unref(ns).b(),\n          unref(ns).m(unref(inputNumberSize)),\n          unref(ns).is(\"disabled\", unref(inputNumberDisabled)),\n          unref(ns).is(\"without-controls\", !_ctx.controls),\n          unref(ns).is(\"controls-right\", unref(controlsAtRight))\n        ]),\n        onDragstart: _cache[1] || (_cache[1] = withModifiers(() => {\n        }, [\"prevent\"]))\n      }, [\n        _ctx.controls ? withDirectives((openBlock(), createElementBlock(\"span\", {\n          key: 0,\n          role: \"button\",\n          \"aria-label\": unref(t)(\"el.inputNumber.decrease\"),\n          class: normalizeClass([unref(ns).e(\"decrease\"), unref(ns).is(\"disabled\", unref(minDisabled))]),\n          onKeydown: withKeys(decrease, [\"enter\"])\n        }, [\n          createVNode(unref(ElIcon), null, {\n            default: withCtx(() => [\n              unref(controlsAtRight) ? (openBlock(), createBlock(unref(ArrowDown), { key: 0 })) : (openBlock(), createBlock(unref(Minus), { key: 1 }))\n            ]),\n            _: 1\n          })\n        ], 42, _hoisted_1)), [\n          [unref(vRepeatClick), decrease]\n        ]) : createCommentVNode(\"v-if\", true),\n        _ctx.controls ? withDirectives((openBlock(), createElementBlock(\"span\", {\n          key: 1,\n          role: \"button\",\n          \"aria-label\": unref(t)(\"el.inputNumber.increase\"),\n          class: normalizeClass([unref(ns).e(\"increase\"), unref(ns).is(\"disabled\", unref(maxDisabled))]),\n          onKeydown: withKeys(increase, [\"enter\"])\n        }, [\n          createVNode(unref(ElIcon), null, {\n            default: withCtx(() => [\n              unref(controlsAtRight) ? (openBlock(), createBlock(unref(ArrowUp), { key: 0 })) : (openBlock(), createBlock(unref(Plus), { key: 1 }))\n            ]),\n            _: 1\n          })\n        ], 42, _hoisted_2)), [\n          [unref(vRepeatClick), increase]\n        ]) : createCommentVNode(\"v-if\", true),\n        createVNode(unref(ElInput), {\n          id: _ctx.id,\n          ref_key: \"input\",\n          ref: input,\n          type: \"number\",\n          step: _ctx.step,\n          \"model-value\": unref(displayValue),\n          placeholder: _ctx.placeholder,\n          readonly: _ctx.readonly,\n          disabled: unref(inputNumberDisabled),\n          size: unref(inputNumberSize),\n          max: _ctx.max,\n          min: _ctx.min,\n          name: _ctx.name,\n          label: _ctx.label,\n          \"validate-event\": false,\n          onWheel: _cache[0] || (_cache[0] = withModifiers(() => {\n          }, [\"prevent\"])),\n          onKeydown: [\n            withKeys(withModifiers(increase, [\"prevent\"]), [\"up\"]),\n            withKeys(withModifiers(decrease, [\"prevent\"]), [\"down\"])\n          ],\n          onBlur: handleBlur,\n          onFocus: handleFocus,\n          onInput: handleInput,\n          onChange: handleInputChange\n        }, null, 8, [\"id\", \"step\", \"model-value\", \"placeholder\", \"readonly\", \"disabled\", \"size\", \"max\", \"min\", \"name\", \"label\", \"onKeydown\"])\n      ], 34);\n    };\n  }\n});\nvar InputNumber = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue\"]]);\n\nexport { InputNumber as default };\n//# sourceMappingURL=input-number2.mjs.map\n","import '../../utils/index.mjs';\nimport InputNumber from './src/input-number2.mjs';\nexport { inputNumberEmits, inputNumberProps } from './src/input-number.mjs';\nimport { withInstall } from '../../utils/vue/install.mjs';\n\nconst ElInputNumber = withInstall(InputNumber);\n\nexport { ElInputNumber, ElInputNumber as default };\n//# sourceMappingURL=index.mjs.map\n","const sliderContextKey = Symbol(\"sliderContextKey\");\n\nexport { sliderContextKey };\n//# sourceMappingURL=constants.mjs.map\n","import { placements } from '@popperjs/core';\nimport '../../../utils/index.mjs';\nimport '../../../constants/index.mjs';\nimport '../../../hooks/index.mjs';\nimport { buildProps, definePropType } from '../../../utils/vue/props/runtime.mjs';\nimport { useSizeProp } from '../../../hooks/use-size/index.mjs';\nimport { isNumber } from '../../../utils/types.mjs';\nimport { isArray } from '@vue/shared';\nimport { UPDATE_MODEL_EVENT, INPUT_EVENT, CHANGE_EVENT } from '../../../constants/event.mjs';\n\nconst sliderProps = buildProps({\n  modelValue: {\n    type: definePropType([Number, Array]),\n    default: 0\n  },\n  id: {\n    type: String,\n    default: void 0\n  },\n  min: {\n    type: Number,\n    default: 0\n  },\n  max: {\n    type: Number,\n    default: 100\n  },\n  step: {\n    type: Number,\n    default: 1\n  },\n  showInput: Boolean,\n  showInputControls: {\n    type: Boolean,\n    default: true\n  },\n  size: useSizeProp,\n  inputSize: useSizeProp,\n  showStops: Boolean,\n  showTooltip: {\n    type: Boolean,\n    default: true\n  },\n  formatTooltip: {\n    type: definePropType(Function),\n    default: void 0\n  },\n  disabled: Boolean,\n  range: Boolean,\n  vertical: Boolean,\n  height: String,\n  debounce: {\n    type: Number,\n    default: 300\n  },\n  label: {\n    type: String,\n    default: void 0\n  },\n  rangeStartLabel: {\n    type: String,\n    default: void 0\n  },\n  rangeEndLabel: {\n    type: String,\n    default: void 0\n  },\n  formatValueText: {\n    type: definePropType(Function),\n    default: void 0\n  },\n  tooltipClass: {\n    type: String,\n    default: void 0\n  },\n  placement: {\n    type: String,\n    values: placements,\n    default: \"top\"\n  },\n  marks: {\n    type: definePropType(Object)\n  },\n  validateEvent: {\n    type: Boolean,\n    default: true\n  }\n});\nconst isValidValue = (value) => isNumber(value) || isArray(value) && value.every(isNumber);\nconst sliderEmits = {\n  [UPDATE_MODEL_EVENT]: isValidValue,\n  [INPUT_EVENT]: isValidValue,\n  [CHANGE_EVENT]: isValidValue\n};\n\nexport { sliderEmits, sliderProps };\n//# sourceMappingURL=slider.mjs.map\n","import { ref, onMounted, nextTick } from 'vue';\nimport { useEventListener } from '@vueuse/core';\n\nconst useLifecycle = (props, initData, resetSize) => {\n  const sliderWrapper = ref();\n  onMounted(async () => {\n    if (props.range) {\n      if (Array.isArray(props.modelValue)) {\n        initData.firstValue = Math.max(props.min, props.modelValue[0]);\n        initData.secondValue = Math.min(props.max, props.modelValue[1]);\n      } else {\n        initData.firstValue = props.min;\n        initData.secondValue = props.max;\n      }\n      initData.oldValue = [initData.firstValue, initData.secondValue];\n    } else {\n      if (typeof props.modelValue !== \"number\" || Number.isNaN(props.modelValue)) {\n        initData.firstValue = props.min;\n      } else {\n        initData.firstValue = Math.min(props.max, Math.max(props.min, props.modelValue));\n      }\n      initData.oldValue = initData.firstValue;\n    }\n    useEventListener(window, \"resize\", resetSize);\n    await nextTick();\n    resetSize();\n  });\n  return {\n    sliderWrapper\n  };\n};\n\nexport { useLifecycle };\n//# sourceMappingURL=use-lifecycle.mjs.map\n","import { computed } from 'vue';\n\nconst useMarks = (props) => {\n  return computed(() => {\n    if (!props.marks) {\n      return [];\n    }\n    const marksKeys = Object.keys(props.marks);\n    return marksKeys.map(Number.parseFloat).sort((a, b) => a - b).filter((point) => point <= props.max && point >= props.min).map((point) => ({\n      point,\n      position: (point - props.min) * 100 / (props.max - props.min),\n      mark: props.marks[point]\n    }));\n  });\n};\n\nexport { useMarks };\n//# sourceMappingURL=use-marks.mjs.map\n","import { shallowRef, ref, computed, nextTick } from 'vue';\nimport '../../../../constants/index.mjs';\nimport '../../../form/index.mjs';\nimport { useFormItem } from '../../../form/src/hooks/use-form-item.mjs';\nimport { UPDATE_MODEL_EVENT, INPUT_EVENT, CHANGE_EVENT } from '../../../../constants/event.mjs';\n\nconst useSlide = (props, initData, emit) => {\n  const { form: elForm, formItem: elFormItem } = useFormItem();\n  const slider = shallowRef();\n  const firstButton = ref();\n  const secondButton = ref();\n  const buttonRefs = {\n    firstButton,\n    secondButton\n  };\n  const sliderDisabled = computed(() => {\n    return props.disabled || (elForm == null ? void 0 : elForm.disabled) || false;\n  });\n  const minValue = computed(() => {\n    return Math.min(initData.firstValue, initData.secondValue);\n  });\n  const maxValue = computed(() => {\n    return Math.max(initData.firstValue, initData.secondValue);\n  });\n  const barSize = computed(() => {\n    return props.range ? `${100 * (maxValue.value - minValue.value) / (props.max - props.min)}%` : `${100 * (initData.firstValue - props.min) / (props.max - props.min)}%`;\n  });\n  const barStart = computed(() => {\n    return props.range ? `${100 * (minValue.value - props.min) / (props.max - props.min)}%` : \"0%\";\n  });\n  const runwayStyle = computed(() => {\n    return props.vertical ? { height: props.height } : {};\n  });\n  const barStyle = computed(() => {\n    return props.vertical ? {\n      height: barSize.value,\n      bottom: barStart.value\n    } : {\n      width: barSize.value,\n      left: barStart.value\n    };\n  });\n  const resetSize = () => {\n    if (slider.value) {\n      initData.sliderSize = slider.value[`client${props.vertical ? \"Height\" : \"Width\"}`];\n    }\n  };\n  const getButtonRefByPercent = (percent) => {\n    const targetValue = props.min + percent * (props.max - props.min) / 100;\n    if (!props.range) {\n      return firstButton;\n    }\n    let buttonRefName;\n    if (Math.abs(minValue.value - targetValue) < Math.abs(maxValue.value - targetValue)) {\n      buttonRefName = initData.firstValue < initData.secondValue ? \"firstButton\" : \"secondButton\";\n    } else {\n      buttonRefName = initData.firstValue > initData.secondValue ? \"firstButton\" : \"secondButton\";\n    }\n    return buttonRefs[buttonRefName];\n  };\n  const setPosition = (percent) => {\n    const buttonRef = getButtonRefByPercent(percent);\n    buttonRef.value.setPosition(percent);\n    return buttonRef;\n  };\n  const setFirstValue = (firstValue) => {\n    initData.firstValue = firstValue;\n    _emit(props.range ? [minValue.value, maxValue.value] : firstValue);\n  };\n  const setSecondValue = (secondValue) => {\n    initData.secondValue = secondValue;\n    if (props.range) {\n      _emit([minValue.value, maxValue.value]);\n    }\n  };\n  const _emit = (val) => {\n    emit(UPDATE_MODEL_EVENT, val);\n    emit(INPUT_EVENT, val);\n  };\n  const emitChange = async () => {\n    await nextTick();\n    emit(CHANGE_EVENT, props.range ? [minValue.value, maxValue.value] : props.modelValue);\n  };\n  const handleSliderPointerEvent = (event) => {\n    var _a, _b, _c, _d, _e, _f;\n    if (sliderDisabled.value || initData.dragging)\n      return;\n    resetSize();\n    let newPercent = 0;\n    if (props.vertical) {\n      const clientY = (_c = (_b = (_a = event.touches) == null ? void 0 : _a.item(0)) == null ? void 0 : _b.clientY) != null ? _c : event.clientY;\n      const sliderOffsetBottom = slider.value.getBoundingClientRect().bottom;\n      newPercent = (sliderOffsetBottom - clientY) / initData.sliderSize * 100;\n    } else {\n      const clientX = (_f = (_e = (_d = event.touches) == null ? void 0 : _d.item(0)) == null ? void 0 : _e.clientX) != null ? _f : event.clientX;\n      const sliderOffsetLeft = slider.value.getBoundingClientRect().left;\n      newPercent = (clientX - sliderOffsetLeft) / initData.sliderSize * 100;\n    }\n    if (newPercent < 0 || newPercent > 100)\n      return;\n    return setPosition(newPercent);\n  };\n  const onSliderWrapperPrevent = (event) => {\n    var _a, _b;\n    if (((_a = buttonRefs[\"firstButton\"].value) == null ? void 0 : _a.dragging) || ((_b = buttonRefs[\"secondButton\"].value) == null ? void 0 : _b.dragging)) {\n      event.preventDefault();\n    }\n  };\n  const onSliderDown = async (event) => {\n    const buttonRef = handleSliderPointerEvent(event);\n    if (buttonRef) {\n      await nextTick();\n      buttonRef.value.onButtonDown(event);\n    }\n  };\n  const onSliderClick = (event) => {\n    const buttonRef = handleSliderPointerEvent(event);\n    if (buttonRef) {\n      emitChange();\n    }\n  };\n  return {\n    elFormItem,\n    slider,\n    firstButton,\n    secondButton,\n    sliderDisabled,\n    minValue,\n    maxValue,\n    runwayStyle,\n    barStyle,\n    resetSize,\n    setPosition,\n    emitChange,\n    onSliderWrapperPrevent,\n    onSliderClick,\n    onSliderDown,\n    setFirstValue,\n    setSecondValue\n  };\n};\n\nexport { useSlide };\n//# sourceMappingURL=use-slide.mjs.map\n","import { ref, computed, inject, nextTick, watch } from 'vue';\nimport { debounce } from 'lodash-unified';\nimport '../../../../constants/index.mjs';\nimport { sliderContextKey } from '../constants.mjs';\nimport { EVENT_CODE } from '../../../../constants/aria.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../../constants/event.mjs';\n\nconst { left, down, right, up, home, end, pageUp, pageDown } = EVENT_CODE;\nconst useTooltip = (props, formatTooltip, showTooltip) => {\n  const tooltip = ref();\n  const tooltipVisible = ref(false);\n  const enableFormat = computed(() => {\n    return formatTooltip.value instanceof Function;\n  });\n  const formatValue = computed(() => {\n    return enableFormat.value && formatTooltip.value(props.modelValue) || props.modelValue;\n  });\n  const displayTooltip = debounce(() => {\n    showTooltip.value && (tooltipVisible.value = true);\n  }, 50);\n  const hideTooltip = debounce(() => {\n    showTooltip.value && (tooltipVisible.value = false);\n  }, 50);\n  return {\n    tooltip,\n    tooltipVisible,\n    formatValue,\n    displayTooltip,\n    hideTooltip\n  };\n};\nconst useSliderButton = (props, initData, emit) => {\n  const {\n    disabled,\n    min,\n    max,\n    step,\n    showTooltip,\n    precision,\n    sliderSize,\n    formatTooltip,\n    emitChange,\n    resetSize,\n    updateDragging\n  } = inject(sliderContextKey);\n  const { tooltip, tooltipVisible, formatValue, displayTooltip, hideTooltip } = useTooltip(props, formatTooltip, showTooltip);\n  const button = ref();\n  const currentPosition = computed(() => {\n    return `${(props.modelValue - min.value) / (max.value - min.value) * 100}%`;\n  });\n  const wrapperStyle = computed(() => {\n    return props.vertical ? { bottom: currentPosition.value } : { left: currentPosition.value };\n  });\n  const handleMouseEnter = () => {\n    initData.hovering = true;\n    displayTooltip();\n  };\n  const handleMouseLeave = () => {\n    initData.hovering = false;\n    if (!initData.dragging) {\n      hideTooltip();\n    }\n  };\n  const onButtonDown = (event) => {\n    if (disabled.value)\n      return;\n    event.preventDefault();\n    onDragStart(event);\n    window.addEventListener(\"mousemove\", onDragging);\n    window.addEventListener(\"touchmove\", onDragging);\n    window.addEventListener(\"mouseup\", onDragEnd);\n    window.addEventListener(\"touchend\", onDragEnd);\n    window.addEventListener(\"contextmenu\", onDragEnd);\n    button.value.focus();\n  };\n  const incrementPosition = (amount) => {\n    if (disabled.value)\n      return;\n    initData.newPosition = Number.parseFloat(currentPosition.value) + amount / (max.value - min.value) * 100;\n    setPosition(initData.newPosition);\n    emitChange();\n  };\n  const onLeftKeyDown = () => {\n    incrementPosition(-step.value);\n  };\n  const onRightKeyDown = () => {\n    incrementPosition(step.value);\n  };\n  const onPageDownKeyDown = () => {\n    incrementPosition(-step.value * 4);\n  };\n  const onPageUpKeyDown = () => {\n    incrementPosition(step.value * 4);\n  };\n  const onHomeKeyDown = () => {\n    if (disabled.value)\n      return;\n    setPosition(0);\n    emitChange();\n  };\n  const onEndKeyDown = () => {\n    if (disabled.value)\n      return;\n    setPosition(100);\n    emitChange();\n  };\n  const onKeyDown = (event) => {\n    let isPreventDefault = true;\n    if ([left, down].includes(event.key)) {\n      onLeftKeyDown();\n    } else if ([right, up].includes(event.key)) {\n      onRightKeyDown();\n    } else if (event.key === home) {\n      onHomeKeyDown();\n    } else if (event.key === end) {\n      onEndKeyDown();\n    } else if (event.key === pageDown) {\n      onPageDownKeyDown();\n    } else if (event.key === pageUp) {\n      onPageUpKeyDown();\n    } else {\n      isPreventDefault = false;\n    }\n    isPreventDefault && event.preventDefault();\n  };\n  const getClientXY = (event) => {\n    let clientX;\n    let clientY;\n    if (event.type.startsWith(\"touch\")) {\n      clientY = event.touches[0].clientY;\n      clientX = event.touches[0].clientX;\n    } else {\n      clientY = event.clientY;\n      clientX = event.clientX;\n    }\n    return {\n      clientX,\n      clientY\n    };\n  };\n  const onDragStart = (event) => {\n    initData.dragging = true;\n    initData.isClick = true;\n    const { clientX, clientY } = getClientXY(event);\n    if (props.vertical) {\n      initData.startY = clientY;\n    } else {\n      initData.startX = clientX;\n    }\n    initData.startPosition = Number.parseFloat(currentPosition.value);\n    initData.newPosition = initData.startPosition;\n  };\n  const onDragging = (event) => {\n    if (initData.dragging) {\n      initData.isClick = false;\n      displayTooltip();\n      resetSize();\n      let diff;\n      const { clientX, clientY } = getClientXY(event);\n      if (props.vertical) {\n        initData.currentY = clientY;\n        diff = (initData.startY - initData.currentY) / sliderSize.value * 100;\n      } else {\n        initData.currentX = clientX;\n        diff = (initData.currentX - initData.startX) / sliderSize.value * 100;\n      }\n      initData.newPosition = initData.startPosition + diff;\n      setPosition(initData.newPosition);\n    }\n  };\n  const onDragEnd = () => {\n    if (initData.dragging) {\n      setTimeout(() => {\n        initData.dragging = false;\n        if (!initData.hovering) {\n          hideTooltip();\n        }\n        if (!initData.isClick) {\n          setPosition(initData.newPosition);\n        }\n        emitChange();\n      }, 0);\n      window.removeEventListener(\"mousemove\", onDragging);\n      window.removeEventListener(\"touchmove\", onDragging);\n      window.removeEventListener(\"mouseup\", onDragEnd);\n      window.removeEventListener(\"touchend\", onDragEnd);\n      window.removeEventListener(\"contextmenu\", onDragEnd);\n    }\n  };\n  const setPosition = async (newPosition) => {\n    if (newPosition === null || Number.isNaN(+newPosition))\n      return;\n    if (newPosition < 0) {\n      newPosition = 0;\n    } else if (newPosition > 100) {\n      newPosition = 100;\n    }\n    const lengthPerStep = 100 / ((max.value - min.value) / step.value);\n    const steps = Math.round(newPosition / lengthPerStep);\n    let value = steps * lengthPerStep * (max.value - min.value) * 0.01 + min.value;\n    value = Number.parseFloat(value.toFixed(precision.value));\n    if (value !== props.modelValue) {\n      emit(UPDATE_MODEL_EVENT, value);\n    }\n    if (!initData.dragging && props.modelValue !== initData.oldValue) {\n      initData.oldValue = props.modelValue;\n    }\n    await nextTick();\n    initData.dragging && displayTooltip();\n    tooltip.value.updatePopper();\n  };\n  watch(() => initData.dragging, (val) => {\n    updateDragging(val);\n  });\n  return {\n    disabled,\n    button,\n    tooltip,\n    tooltipVisible,\n    showTooltip,\n    wrapperStyle,\n    formatValue,\n    handleMouseEnter,\n    handleMouseLeave,\n    onButtonDown,\n    onKeyDown,\n    setPosition\n  };\n};\n\nexport { useSliderButton };\n//# sourceMappingURL=use-slider-button.mjs.map\n","import { computed } from 'vue';\nimport '../../../../utils/index.mjs';\nimport { debugWarn } from '../../../../utils/error.mjs';\n\nconst useStops = (props, initData, minValue, maxValue) => {\n  const stops = computed(() => {\n    if (!props.showStops || props.min > props.max)\n      return [];\n    if (props.step === 0) {\n      debugWarn(\"ElSlider\", \"step should not be 0.\");\n      return [];\n    }\n    const stopCount = (props.max - props.min) / props.step;\n    const stepWidth = 100 * props.step / (props.max - props.min);\n    const result = Array.from({ length: stopCount - 1 }).map((_, index) => (index + 1) * stepWidth);\n    if (props.range) {\n      return result.filter((step) => {\n        return step < 100 * (minValue.value - props.min) / (props.max - props.min) || step > 100 * (maxValue.value - props.min) / (props.max - props.min);\n      });\n    } else {\n      return result.filter((step) => step > 100 * (initData.firstValue - props.min) / (props.max - props.min));\n    }\n  });\n  const getStopStyle = (position) => {\n    return props.vertical ? { bottom: `${position}%` } : { left: `${position}%` };\n  };\n  return {\n    stops,\n    getStopStyle\n  };\n};\n\nexport { useStops };\n//# sourceMappingURL=use-stops.mjs.map\n","import { watch } from 'vue';\nimport '../../../../constants/index.mjs';\nimport '../../../../utils/index.mjs';\nimport { UPDATE_MODEL_EVENT, INPUT_EVENT } from '../../../../constants/event.mjs';\nimport { throwError, debugWarn } from '../../../../utils/error.mjs';\n\nconst useWatch = (props, initData, minValue, maxValue, emit, elFormItem) => {\n  const _emit = (val) => {\n    emit(UPDATE_MODEL_EVENT, val);\n    emit(INPUT_EVENT, val);\n  };\n  const valueChanged = () => {\n    if (props.range) {\n      return ![minValue.value, maxValue.value].every((item, index) => item === initData.oldValue[index]);\n    } else {\n      return props.modelValue !== initData.oldValue;\n    }\n  };\n  const setValues = () => {\n    var _a, _b;\n    if (props.min > props.max) {\n      throwError(\"Slider\", \"min should not be greater than max.\");\n    }\n    const val = props.modelValue;\n    if (props.range && Array.isArray(val)) {\n      if (val[1] < props.min) {\n        _emit([props.min, props.min]);\n      } else if (val[0] > props.max) {\n        _emit([props.max, props.max]);\n      } else if (val[0] < props.min) {\n        _emit([props.min, val[1]]);\n      } else if (val[1] > props.max) {\n        _emit([val[0], props.max]);\n      } else {\n        initData.firstValue = val[0];\n        initData.secondValue = val[1];\n        if (valueChanged()) {\n          if (props.validateEvent) {\n            (_a = elFormItem == null ? void 0 : elFormItem.validate) == null ? void 0 : _a.call(elFormItem, \"change\").catch((err) => debugWarn(err));\n          }\n          initData.oldValue = val.slice();\n        }\n      }\n    } else if (!props.range && typeof val === \"number\" && !Number.isNaN(val)) {\n      if (val < props.min) {\n        _emit(props.min);\n      } else if (val > props.max) {\n        _emit(props.max);\n      } else {\n        initData.firstValue = val;\n        if (valueChanged()) {\n          if (props.validateEvent) {\n            (_b = elFormItem == null ? void 0 : elFormItem.validate) == null ? void 0 : _b.call(elFormItem, \"change\").catch((err) => debugWarn(err));\n          }\n          initData.oldValue = val;\n        }\n      }\n    }\n  };\n  setValues();\n  watch(() => initData.dragging, (val) => {\n    if (!val) {\n      setValues();\n    }\n  });\n  watch(() => props.modelValue, (val, oldVal) => {\n    if (initData.dragging || Array.isArray(val) && Array.isArray(oldVal) && val.every((item, index) => item === oldVal[index]) && initData.firstValue === val[0] && initData.secondValue === val[1]) {\n      return;\n    }\n    setValues();\n  }, {\n    deep: true\n  });\n  watch(() => [props.min, props.max], () => {\n    setValues();\n  });\n};\n\nexport { useWatch };\n//# sourceMappingURL=use-watch.mjs.map\n","import { placements } from '@popperjs/core';\nimport '../../../utils/index.mjs';\nimport '../../../constants/index.mjs';\nimport { buildProps } from '../../../utils/vue/props/runtime.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../constants/event.mjs';\nimport { isNumber } from '../../../utils/types.mjs';\n\nconst sliderButtonProps = buildProps({\n  modelValue: {\n    type: Number,\n    default: 0\n  },\n  vertical: Boolean,\n  tooltipClass: String,\n  placement: {\n    type: String,\n    values: placements,\n    default: \"top\"\n  }\n});\nconst sliderButtonEmits = {\n  [UPDATE_MODEL_EVENT]: (value) => isNumber(value)\n};\n\nexport { sliderButtonEmits, sliderButtonProps };\n//# sourceMappingURL=button.mjs.map\n","import { defineComponent, reactive, toRefs, openBlock, createElementBlock, normalizeClass, unref, normalizeStyle, createVNode, withCtx, createElementVNode, toDisplayString } from 'vue';\nimport { ElTooltip } from '../../tooltip/index.mjs';\nimport '../../../hooks/index.mjs';\nimport './composables/index.mjs';\nimport { sliderButtonProps, sliderButtonEmits } from './button.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useSliderButton } from './composables/use-slider-button.mjs';\n\nconst _hoisted_1 = [\"tabindex\"];\nconst __default__ = defineComponent({\n  name: \"ElSliderButton\"\n});\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  ...__default__,\n  props: sliderButtonProps,\n  emits: sliderButtonEmits,\n  setup(__props, { expose, emit }) {\n    const props = __props;\n    const ns = useNamespace(\"slider\");\n    const initData = reactive({\n      hovering: false,\n      dragging: false,\n      isClick: false,\n      startX: 0,\n      currentX: 0,\n      startY: 0,\n      currentY: 0,\n      startPosition: 0,\n      newPosition: 0,\n      oldValue: props.modelValue\n    });\n    const {\n      disabled,\n      button,\n      tooltip,\n      showTooltip,\n      tooltipVisible,\n      wrapperStyle,\n      formatValue,\n      handleMouseEnter,\n      handleMouseLeave,\n      onButtonDown,\n      onKeyDown,\n      setPosition\n    } = useSliderButton(props, initData, emit);\n    const { hovering, dragging } = toRefs(initData);\n    expose({\n      onButtonDown,\n      onKeyDown,\n      setPosition,\n      hovering,\n      dragging\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        ref_key: \"button\",\n        ref: button,\n        class: normalizeClass([unref(ns).e(\"button-wrapper\"), { hover: unref(hovering), dragging: unref(dragging) }]),\n        style: normalizeStyle(unref(wrapperStyle)),\n        tabindex: unref(disabled) ? -1 : 0,\n        onMouseenter: _cache[0] || (_cache[0] = (...args) => unref(handleMouseEnter) && unref(handleMouseEnter)(...args)),\n        onMouseleave: _cache[1] || (_cache[1] = (...args) => unref(handleMouseLeave) && unref(handleMouseLeave)(...args)),\n        onMousedown: _cache[2] || (_cache[2] = (...args) => unref(onButtonDown) && unref(onButtonDown)(...args)),\n        onTouchstart: _cache[3] || (_cache[3] = (...args) => unref(onButtonDown) && unref(onButtonDown)(...args)),\n        onFocus: _cache[4] || (_cache[4] = (...args) => unref(handleMouseEnter) && unref(handleMouseEnter)(...args)),\n        onBlur: _cache[5] || (_cache[5] = (...args) => unref(handleMouseLeave) && unref(handleMouseLeave)(...args)),\n        onKeydown: _cache[6] || (_cache[6] = (...args) => unref(onKeyDown) && unref(onKeyDown)(...args))\n      }, [\n        createVNode(unref(ElTooltip), {\n          ref_key: \"tooltip\",\n          ref: tooltip,\n          visible: unref(tooltipVisible),\n          placement: _ctx.placement,\n          \"fallback-placements\": [\"top\", \"bottom\", \"right\", \"left\"],\n          \"stop-popper-mouse-event\": false,\n          \"popper-class\": _ctx.tooltipClass,\n          disabled: !unref(showTooltip),\n          persistent: \"\"\n        }, {\n          content: withCtx(() => [\n            createElementVNode(\"span\", null, toDisplayString(unref(formatValue)), 1)\n          ]),\n          default: withCtx(() => [\n            createElementVNode(\"div\", {\n              class: normalizeClass([unref(ns).e(\"button\"), { hover: unref(hovering), dragging: unref(dragging) }])\n            }, null, 2)\n          ]),\n          _: 1\n        }, 8, [\"visible\", \"placement\", \"popper-class\", \"disabled\"])\n      ], 46, _hoisted_1);\n    };\n  }\n});\nvar SliderButton = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue\"]]);\n\nexport { SliderButton as default };\n//# sourceMappingURL=button2.mjs.map\n","import { defineComponent, computed, h } from 'vue';\nimport '../../../utils/index.mjs';\nimport '../../../hooks/index.mjs';\nimport { buildProps, definePropType } from '../../../utils/vue/props/runtime.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { isString } from '@vue/shared';\n\nconst sliderMarkerProps = buildProps({\n  mark: {\n    type: definePropType([String, Object]),\n    default: void 0\n  }\n});\nvar SliderMarker = defineComponent({\n  name: \"ElSliderMarker\",\n  props: sliderMarkerProps,\n  setup(props) {\n    const ns = useNamespace(\"slider\");\n    const label = computed(() => {\n      return isString(props.mark) ? props.mark : props.mark.label;\n    });\n    const style = computed(() => isString(props.mark) ? void 0 : props.mark.style);\n    return () => h(\"div\", {\n      class: ns.e(\"marks-text\"),\n      style: style.value\n    }, label.value);\n  }\n});\n\nexport { SliderMarker as default, sliderMarkerProps };\n//# sourceMappingURL=marker.mjs.map\n","import { defineComponent, reactive, computed, toRefs, provide, openBlock, createElementBlock, unref, normalizeClass, createElementVNode, normalizeStyle, createVNode, createBlock, createCommentVNode, Fragment, renderList } from 'vue';\nimport { ElInputNumber } from '../../input-number/index.mjs';\nimport '../../form/index.mjs';\nimport '../../../hooks/index.mjs';\nimport { sliderContextKey } from './constants.mjs';\nimport { sliderProps, sliderEmits } from './slider.mjs';\nimport SliderButton from './button2.mjs';\nimport SliderMarker from './marker.mjs';\nimport './composables/index.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useLocale } from '../../../hooks/use-locale/index.mjs';\nimport { useSlide } from './composables/use-slide.mjs';\nimport { useStops } from './composables/use-stops.mjs';\nimport { useFormItemInputId } from '../../form/src/hooks/use-form-item.mjs';\nimport { useFormSize } from '../../form/src/hooks/use-form-common-props.mjs';\nimport { useMarks } from './composables/use-marks.mjs';\nimport { useWatch } from './composables/use-watch.mjs';\nimport { useLifecycle } from './composables/use-lifecycle.mjs';\n\nconst _hoisted_1 = [\"id\", \"role\", \"aria-label\", \"aria-labelledby\"];\nconst _hoisted_2 = { key: 1 };\nconst __default__ = defineComponent({\n  name: \"ElSlider\"\n});\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  ...__default__,\n  props: sliderProps,\n  emits: sliderEmits,\n  setup(__props, { expose, emit }) {\n    const props = __props;\n    const ns = useNamespace(\"slider\");\n    const { t } = useLocale();\n    const initData = reactive({\n      firstValue: 0,\n      secondValue: 0,\n      oldValue: 0,\n      dragging: false,\n      sliderSize: 1\n    });\n    const {\n      elFormItem,\n      slider,\n      firstButton,\n      secondButton,\n      sliderDisabled,\n      minValue,\n      maxValue,\n      runwayStyle,\n      barStyle,\n      resetSize,\n      emitChange,\n      onSliderWrapperPrevent,\n      onSliderClick,\n      onSliderDown,\n      setFirstValue,\n      setSecondValue\n    } = useSlide(props, initData, emit);\n    const { stops, getStopStyle } = useStops(props, initData, minValue, maxValue);\n    const { inputId, isLabeledByFormItem } = useFormItemInputId(props, {\n      formItemContext: elFormItem\n    });\n    const sliderWrapperSize = useFormSize();\n    const sliderInputSize = computed(() => props.inputSize || sliderWrapperSize.value);\n    const groupLabel = computed(() => {\n      return props.label || t(\"el.slider.defaultLabel\", {\n        min: props.min,\n        max: props.max\n      });\n    });\n    const firstButtonLabel = computed(() => {\n      if (props.range) {\n        return props.rangeStartLabel || t(\"el.slider.defaultRangeStartLabel\");\n      } else {\n        return groupLabel.value;\n      }\n    });\n    const firstValueText = computed(() => {\n      return props.formatValueText ? props.formatValueText(firstValue.value) : `${firstValue.value}`;\n    });\n    const secondButtonLabel = computed(() => {\n      return props.rangeEndLabel || t(\"el.slider.defaultRangeEndLabel\");\n    });\n    const secondValueText = computed(() => {\n      return props.formatValueText ? props.formatValueText(secondValue.value) : `${secondValue.value}`;\n    });\n    const sliderKls = computed(() => [\n      ns.b(),\n      ns.m(sliderWrapperSize.value),\n      ns.is(\"vertical\", props.vertical),\n      { [ns.m(\"with-input\")]: props.showInput }\n    ]);\n    const markList = useMarks(props);\n    useWatch(props, initData, minValue, maxValue, emit, elFormItem);\n    const precision = computed(() => {\n      const precisions = [props.min, props.max, props.step].map((item) => {\n        const decimal = `${item}`.split(\".\")[1];\n        return decimal ? decimal.length : 0;\n      });\n      return Math.max.apply(null, precisions);\n    });\n    const { sliderWrapper } = useLifecycle(props, initData, resetSize);\n    const { firstValue, secondValue, sliderSize } = toRefs(initData);\n    const updateDragging = (val) => {\n      initData.dragging = val;\n    };\n    provide(sliderContextKey, {\n      ...toRefs(props),\n      sliderSize,\n      disabled: sliderDisabled,\n      precision,\n      emitChange,\n      resetSize,\n      updateDragging\n    });\n    expose({\n      onSliderClick\n    });\n    return (_ctx, _cache) => {\n      var _a, _b;\n      return openBlock(), createElementBlock(\"div\", {\n        id: _ctx.range ? unref(inputId) : void 0,\n        ref_key: \"sliderWrapper\",\n        ref: sliderWrapper,\n        class: normalizeClass(unref(sliderKls)),\n        role: _ctx.range ? \"group\" : void 0,\n        \"aria-label\": _ctx.range && !unref(isLabeledByFormItem) ? unref(groupLabel) : void 0,\n        \"aria-labelledby\": _ctx.range && unref(isLabeledByFormItem) ? (_a = unref(elFormItem)) == null ? void 0 : _a.labelId : void 0,\n        onTouchstart: _cache[2] || (_cache[2] = (...args) => unref(onSliderWrapperPrevent) && unref(onSliderWrapperPrevent)(...args)),\n        onTouchmove: _cache[3] || (_cache[3] = (...args) => unref(onSliderWrapperPrevent) && unref(onSliderWrapperPrevent)(...args))\n      }, [\n        createElementVNode(\"div\", {\n          ref_key: \"slider\",\n          ref: slider,\n          class: normalizeClass([\n            unref(ns).e(\"runway\"),\n            { \"show-input\": _ctx.showInput && !_ctx.range },\n            unref(ns).is(\"disabled\", unref(sliderDisabled))\n          ]),\n          style: normalizeStyle(unref(runwayStyle)),\n          onMousedown: _cache[0] || (_cache[0] = (...args) => unref(onSliderDown) && unref(onSliderDown)(...args)),\n          onTouchstart: _cache[1] || (_cache[1] = (...args) => unref(onSliderDown) && unref(onSliderDown)(...args))\n        }, [\n          createElementVNode(\"div\", {\n            class: normalizeClass(unref(ns).e(\"bar\")),\n            style: normalizeStyle(unref(barStyle))\n          }, null, 6),\n          createVNode(SliderButton, {\n            id: !_ctx.range ? unref(inputId) : void 0,\n            ref_key: \"firstButton\",\n            ref: firstButton,\n            \"model-value\": unref(firstValue),\n            vertical: _ctx.vertical,\n            \"tooltip-class\": _ctx.tooltipClass,\n            placement: _ctx.placement,\n            role: \"slider\",\n            \"aria-label\": _ctx.range || !unref(isLabeledByFormItem) ? unref(firstButtonLabel) : void 0,\n            \"aria-labelledby\": !_ctx.range && unref(isLabeledByFormItem) ? (_b = unref(elFormItem)) == null ? void 0 : _b.labelId : void 0,\n            \"aria-valuemin\": _ctx.min,\n            \"aria-valuemax\": _ctx.range ? unref(secondValue) : _ctx.max,\n            \"aria-valuenow\": unref(firstValue),\n            \"aria-valuetext\": unref(firstValueText),\n            \"aria-orientation\": _ctx.vertical ? \"vertical\" : \"horizontal\",\n            \"aria-disabled\": unref(sliderDisabled),\n            \"onUpdate:modelValue\": unref(setFirstValue)\n          }, null, 8, [\"id\", \"model-value\", \"vertical\", \"tooltip-class\", \"placement\", \"aria-label\", \"aria-labelledby\", \"aria-valuemin\", \"aria-valuemax\", \"aria-valuenow\", \"aria-valuetext\", \"aria-orientation\", \"aria-disabled\", \"onUpdate:modelValue\"]),\n          _ctx.range ? (openBlock(), createBlock(SliderButton, {\n            key: 0,\n            ref_key: \"secondButton\",\n            ref: secondButton,\n            \"model-value\": unref(secondValue),\n            vertical: _ctx.vertical,\n            \"tooltip-class\": _ctx.tooltipClass,\n            placement: _ctx.placement,\n            role: \"slider\",\n            \"aria-label\": unref(secondButtonLabel),\n            \"aria-valuemin\": unref(firstValue),\n            \"aria-valuemax\": _ctx.max,\n            \"aria-valuenow\": unref(secondValue),\n            \"aria-valuetext\": unref(secondValueText),\n            \"aria-orientation\": _ctx.vertical ? \"vertical\" : \"horizontal\",\n            \"aria-disabled\": unref(sliderDisabled),\n            \"onUpdate:modelValue\": unref(setSecondValue)\n          }, null, 8, [\"model-value\", \"vertical\", \"tooltip-class\", \"placement\", \"aria-label\", \"aria-valuemin\", \"aria-valuemax\", \"aria-valuenow\", \"aria-valuetext\", \"aria-orientation\", \"aria-disabled\", \"onUpdate:modelValue\"])) : createCommentVNode(\"v-if\", true),\n          _ctx.showStops ? (openBlock(), createElementBlock(\"div\", _hoisted_2, [\n            (openBlock(true), createElementBlock(Fragment, null, renderList(unref(stops), (item, key) => {\n              return openBlock(), createElementBlock(\"div\", {\n                key,\n                class: normalizeClass(unref(ns).e(\"stop\")),\n                style: normalizeStyle(unref(getStopStyle)(item))\n              }, null, 6);\n            }), 128))\n          ])) : createCommentVNode(\"v-if\", true),\n          unref(markList).length > 0 ? (openBlock(), createElementBlock(Fragment, { key: 2 }, [\n            createElementVNode(\"div\", null, [\n              (openBlock(true), createElementBlock(Fragment, null, renderList(unref(markList), (item, key) => {\n                return openBlock(), createElementBlock(\"div\", {\n                  key,\n                  style: normalizeStyle(unref(getStopStyle)(item.position)),\n                  class: normalizeClass([unref(ns).e(\"stop\"), unref(ns).e(\"marks-stop\")])\n                }, null, 6);\n              }), 128))\n            ]),\n            createElementVNode(\"div\", {\n              class: normalizeClass(unref(ns).e(\"marks\"))\n            }, [\n              (openBlock(true), createElementBlock(Fragment, null, renderList(unref(markList), (item, key) => {\n                return openBlock(), createBlock(unref(SliderMarker), {\n                  key,\n                  mark: item.mark,\n                  style: normalizeStyle(unref(getStopStyle)(item.position))\n                }, null, 8, [\"mark\", \"style\"]);\n              }), 128))\n            ], 2)\n          ], 64)) : createCommentVNode(\"v-if\", true)\n        ], 38),\n        _ctx.showInput && !_ctx.range ? (openBlock(), createBlock(unref(ElInputNumber), {\n          key: 0,\n          ref: \"input\",\n          \"model-value\": unref(firstValue),\n          class: normalizeClass(unref(ns).e(\"input\")),\n          step: _ctx.step,\n          disabled: unref(sliderDisabled),\n          controls: _ctx.showInputControls,\n          min: _ctx.min,\n          max: _ctx.max,\n          debounce: _ctx.debounce,\n          size: unref(sliderInputSize),\n          \"onUpdate:modelValue\": unref(setFirstValue),\n          onChange: unref(emitChange)\n        }, null, 8, [\"model-value\", \"class\", \"step\", \"disabled\", \"controls\", \"min\", \"max\", \"debounce\", \"size\", \"onUpdate:modelValue\", \"onChange\"])) : createCommentVNode(\"v-if\", true)\n      ], 42, _hoisted_1);\n    };\n  }\n});\nvar Slider = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue\"]]);\n\nexport { Slider as default };\n//# sourceMappingURL=slider2.mjs.map\n","import '../../utils/index.mjs';\nimport Slider from './src/slider2.mjs';\nexport { sliderEmits, sliderProps } from './src/slider.mjs';\nexport { sliderContextKey } from './src/constants.mjs';\nimport { withInstall } from '../../utils/vue/install.mjs';\n\nconst ElSlider = withInstall(Slider);\n\nexport { ElSlider, ElSlider as default };\n//# sourceMappingURL=index.mjs.map\n","const props = {\n    x: 'x',\n    y: 'y',\n    width: 'w',\n    height: 'h',\n    minimum: 's',\n    maximum: 'l',\n    diagonal: 'd'\n};\nconst propsList = Object.keys(props).map(key => props[key]).join('');\nconst numberPattern = '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?';\nconst findSpacesRegex = /\\s/g;\nconst parseExpressionRegExp = new RegExp(`^(${numberPattern}\\\\*)?([${propsList}])(/${numberPattern})?([-+]{1,2}${numberPattern})?$`, 'g');\n\nfunction throwInvalid(expression) {\n    throw new Error(`Invalid calc() expression: ${expression}`);\n}\n\nexport function evalCalcExpression(expression, bbox) {\n    const match = parseExpressionRegExp.exec(expression.replace(findSpacesRegex, ''));\n    if (!match) throwInvalid(expression);\n    parseExpressionRegExp.lastIndex = 0; // reset regex results for the next run\n    const [,multiply, property, divide, add] = match;\n    const { x, y, width, height } = bbox;\n    let value = 0;\n    switch (property) {\n        case props.width: {\n            value = width;\n            break;\n        }\n        case props.height: {\n            value = height;\n            break;\n        }\n        case props.x: {\n            value = x;\n            break;\n        }\n        case props.y: {\n            value = y;\n            break;\n        }\n        case props.minimum: {\n            value = Math.min(height, width);\n            break;\n        }\n        case props.maximum: {\n            value = Math.max(height, width);\n            break;\n        }\n        case props.diagonal: {\n            value = Math.sqrt((height * height) + (width * width));\n            break;\n        }\n    }\n    if (multiply) {\n        // e.g \"2*\"\n        value *= parseFloat(multiply);\n    }\n    if (divide) {\n        // e.g \"/2\"\n        value /= parseFloat(divide.slice(1));\n    }\n    if (add) {\n        value += evalAddExpression(add);\n    }\n    return value;\n}\n\nfunction evalAddExpression(addExpression) {\n    if (!addExpression) return 0;\n    const [sign] = addExpression;\n    switch (sign) {\n        case '+': {\n            return parseFloat(addExpression.substr(1));\n        }\n        case '-': {\n            return -parseFloat(addExpression.substr(1));\n        }\n    }\n    return parseFloat(addExpression);\n}\n\nexport function isCalcAttribute(value) {\n    return typeof value === 'string' && value.includes('calc');\n}\n\nconst calcStart = 'calc(';\nconst calcStartOffset = calcStart.length;\n\nexport function evalCalcAttribute(attributeValue, refBBox) {\n    let value = attributeValue;\n    let startSearchIndex = 0;\n    do {\n        let calcIndex = value.indexOf(calcStart, startSearchIndex);\n        if (calcIndex === -1) return value;\n        let calcEndIndex = calcIndex + calcStartOffset;\n        let brackets = 1;\n        findClosingBracket: do {\n            switch (value[calcEndIndex]) {\n                case '(': {\n                    brackets++;\n                    break;\n                }\n                case ')': {\n                    brackets--;\n                    if (brackets === 0) break findClosingBracket;\n                    break;\n                }\n                case undefined: {\n                    // Could not find the closing bracket.\n                    throwInvalid(value);\n                }\n            }\n            calcEndIndex++;\n        } while (true);\n        // Get the calc() expression without nested calcs (recursion)\n        let expression = value.slice(calcIndex + calcStartOffset, calcEndIndex);\n        if (isCalcAttribute(expression)) {\n            expression = evalCalcAttribute(expression, refBBox);\n        }\n        // Eval the calc() expression without nested calcs.\n        const calcValue = String(evalCalcExpression(expression, refBBox));\n        // Replace the calc() expression and continue search\n        value = value.slice(0, calcIndex) + calcValue + value.slice(calcEndIndex + 1);\n        startSearchIndex = calcIndex + calcValue.length;\n    } while (true);\n}\n","// Declare shorthands to the most used math functions.\nconst {\n    round,\n    floor,\n    PI\n} = Math;\n\nexport const scale = {\n\n    // Return the `value` from the `domain` interval scaled to the `range` interval.\n    linear: function(domain, range, value) {\n\n        var domainSpan = domain[1] - domain[0];\n        var rangeSpan = range[1] - range[0];\n        return (((value - domain[0]) / domainSpan) * rangeSpan + range[0]) || 0;\n    }\n};\n\nexport const normalizeAngle = function(angle) {\n\n    return (angle % 360) + (angle < 0 ? 360 : 0);\n};\n\nexport const snapToGrid = function(value, gridSize) {\n\n    return gridSize * round(value / gridSize);\n};\n\nexport const toDeg = function(rad) {\n\n    return (180 * rad / PI) % 360;\n};\n\nexport const toRad = function(deg, over360) {\n\n    over360 = over360 || false;\n    deg = over360 ? deg : (deg % 360);\n    return deg * PI / 180;\n};\n\n// Return a random integer from the interval [min,max], inclusive.\nexport const random = function(min, max) {\n\n    if (max === undefined) {\n        // use first argument as max, min is 0\n        max = (min === undefined) ? 1 : min;\n        min = 0;\n\n    } else if (max < min) {\n        // switch max and min\n        const temp = min;\n        min = max;\n        max = temp;\n    }\n\n    return floor((Math.random() * (max - min + 1)) + min);\n};\n\n","// @return the bearing (cardinal direction) of the line. For example N, W, or SE.\n// @returns {String} One of the following bearings : NE, E, SE, S, SW, W, NW, N.\nimport { toDeg, toRad } from './geometry.helpers.mjs';\n\nconst {\n    cos,\n    sin,\n    atan2\n} = Math;\n\nexport const bearing = function(p, q) {\n\n    var lat1 = toRad(p.y);\n    var lat2 = toRad(q.y);\n    var lon1 = p.x;\n    var lon2 = q.x;\n    var dLon = toRad(lon2 - lon1);\n    var y = sin(dLon) * cos(lat2);\n    var x = cos(lat1) * sin(lat2) - sin(lat1) * cos(lat2) * cos(dLon);\n    var brng = toDeg(atan2(y, x));\n\n    var bearings = ['NE', 'E', 'SE', 'S', 'SW', 'W', 'NW', 'N'];\n\n    var index = brng - 22.5;\n    if (index < 0)\n        index += 360;\n    index = parseInt(index / 45);\n\n    return bearings[index];\n};\n","// @return {integer} length without sqrt\n// @note for applications where the exact length is not necessary (e.g. compare only)\nexport const squaredLength = function(start, end) {\n\n    var x0 = start.x;\n    var y0 = start.y;\n    var x1 = end.x;\n    var y1 = end.y;\n    return (x0 -= x1) * x0 + (y0 -= y1) * y0;\n};\n","import { squaredLength } from './line.squaredLength.mjs';\n\nexport const length = function(start, end) {\n    return Math.sqrt(squaredLength(start, end));\n};\n","export const types = {\n    Point: 1,\n    Line: 2,\n    Ellipse: 3,\n    Rect: 4,\n    Polyline: 5,\n    Polygon: 6,\n    Curve: 7,\n    Path: 8\n};\n","/*\n    Point is the most basic object consisting of x/y coordinate.\n\n    Possible instantiations are:\n    * `Point(10, 20)`\n    * `new Point(10, 20)`\n    * `Point('10 20')`\n    * `Point(Point(10, 20))`\n*/\nimport { normalizeAngle, random, snapToGrid, toDeg, toRad } from './geometry.helpers.mjs';\nimport { bearing } from './line.bearing.mjs';\nimport { squaredLength } from './line.squaredLength.mjs';\nimport { length } from './line.length.mjs';\nimport { types } from './types.mjs';\n\nconst {\n    abs,\n    cos,\n    sin,\n    sqrt,\n    min,\n    max,\n    atan2,\n    round,\n    pow,\n    PI\n} = Math;\n\nexport const Point = function(x, y) {\n\n    if (!(this instanceof Point)) {\n        return new Point(x, y);\n    }\n\n    if (typeof x === 'string') {\n        var xy = x.split(x.indexOf('@') === -1 ? ' ' : '@');\n        x = parseFloat(xy[0]);\n        y = parseFloat(xy[1]);\n\n    } else if (Object(x) === x) {\n        y = x.y;\n        x = x.x;\n    }\n\n    this.x = x === undefined ? 0 : x;\n    this.y = y === undefined ? 0 : y;\n};\n\n// Alternative constructor, from polar coordinates.\n// @param {number} Distance.\n// @param {number} Angle in radians.\n// @param {point} [optional] Origin.\nPoint.fromPolar = function(distance, angle, origin) {\n\n    origin = new Point(origin);\n    var x = abs(distance * cos(angle));\n    var y = abs(distance * sin(angle));\n    var deg = normalizeAngle(toDeg(angle));\n\n    if (deg < 90) {\n        y = -y;\n\n    } else if (deg < 180) {\n        x = -x;\n        y = -y;\n\n    } else if (deg < 270) {\n        x = -x;\n    }\n\n    return new Point(origin.x + x, origin.y + y);\n};\n\n// Create a point with random coordinates that fall into the range `[x1, x2]` and `[y1, y2]`.\nPoint.random = function(x1, x2, y1, y2) {\n\n    return new Point(random(x1, x2), random(y1, y2));\n};\n\nPoint.prototype = {\n\n    type: types.Point,\n\n    chooseClosest: function(points) {\n\n        var n = points.length;\n        if (n === 1) return new Point(points[0]);\n        var closest = null;\n        var minSqrDistance = Infinity;\n        for (var i = 0; i < n; i++) {\n            var p = new Point(points[i]);\n            var sqrDistance = this.squaredDistance(p);\n            if (sqrDistance < minSqrDistance) {\n                closest = p;\n                minSqrDistance = sqrDistance;\n            }\n        }\n        return closest;\n    },\n\n    // If point lies outside rectangle `r`, return the nearest point on the boundary of rect `r`,\n    // otherwise return point itself.\n    // (see Squeak Smalltalk, Point>>adhereTo:)\n    adhereToRect: function(r) {\n\n        if (r.containsPoint(this)) {\n            return this;\n        }\n\n        this.x = min(max(this.x, r.x), r.x + r.width);\n        this.y = min(max(this.y, r.y), r.y + r.height);\n        return this;\n    },\n\n    // Compute the angle between vector from me to p1 and the vector from me to p2.\n    // ordering of points p1 and p2 is important!\n    // theta function's angle convention:\n    // returns angles between 0 and 180 when the angle is counterclockwise\n    // returns angles between 180 and 360 to convert clockwise angles into counterclockwise ones\n    // returns NaN if any of the points p1, p2 is coincident with this point\n    angleBetween: function(p1, p2) {\n\n        var angleBetween = (this.equals(p1) || this.equals(p2)) ? NaN : (this.theta(p2) - this.theta(p1));\n\n        if (angleBetween < 0) {\n            angleBetween += 360; // correction to keep angleBetween between 0 and 360\n        }\n\n        return angleBetween;\n    },\n\n    // Return the bearing between me and the given point.\n    bearing: function(point) {\n        return bearing(this, point);\n    },\n\n    // Returns change in angle from my previous position (-dx, -dy) to my new position\n    // relative to ref point.\n    changeInAngle: function(dx, dy, ref) {\n\n        // Revert the translation and measure the change in angle around x-axis.\n        return this.clone().offset(-dx, -dy).theta(ref) - this.theta(ref);\n    },\n\n    clone: function() {\n\n        return new Point(this);\n    },\n\n    // Returns the cross product of this point relative to two other points\n    // this point is the common point\n    // point p1 lies on the first vector, point p2 lies on the second vector\n    // watch out for the ordering of points p1 and p2!\n    // positive result indicates a clockwise (\"right\") turn from first to second vector\n    // negative result indicates a counterclockwise (\"left\") turn from first to second vector\n    // zero indicates that the first and second vector are collinear\n    // note that the above directions are reversed from the usual answer on the Internet\n    // that is because we are in a left-handed coord system (because the y-axis points downward)\n    cross: function(p1, p2) {\n\n        return (p1 && p2) ? (((p2.x - this.x) * (p1.y - this.y)) - ((p2.y - this.y) * (p1.x - this.x))) : NaN;\n    },\n\n    difference: function(dx, dy) {\n\n        if ((Object(dx) === dx)) {\n            dy = dx.y;\n            dx = dx.x;\n        }\n\n        return new Point(this.x - (dx || 0), this.y - (dy || 0));\n    },\n\n    // Returns distance between me and point `p`.\n    distance: function(p) {\n        return length(this, p);\n    },\n\n    // Returns the dot product of this point with given other point\n    dot: function(p) {\n\n        return p ? (this.x * p.x + this.y * p.y) : NaN;\n    },\n\n    equals: function(p) {\n\n        return !!p &&\n            this.x === p.x &&\n            this.y === p.y;\n    },\n\n    // Linear interpolation\n    lerp: function(p, t) {\n\n        var x = this.x;\n        var y = this.y;\n        return new Point((1 - t) * x + t * p.x, (1 - t) * y + t * p.y);\n    },\n\n    magnitude: function() {\n\n        return sqrt((this.x * this.x) + (this.y * this.y)) || 0.01;\n    },\n\n    // Returns a manhattan (taxi-cab) distance between me and point `p`.\n    manhattanDistance: function(p) {\n\n        return abs(p.x - this.x) + abs(p.y - this.y);\n    },\n\n    // Move point on line starting from ref ending at me by\n    // distance distance.\n    move: function(ref, distance) {\n\n        var theta = toRad((new Point(ref)).theta(this));\n        var offset = this.offset(cos(theta) * distance, -sin(theta) * distance);\n        return offset;\n    },\n\n    // Scales x and y such that the distance between the point and the origin (0,0) is equal to the given length.\n    normalize: function(length) {\n\n        var scale = (length || 1) / this.magnitude();\n        return this.scale(scale, scale);\n    },\n\n    // Offset me by the specified amount.\n    offset: function(dx, dy) {\n\n        if ((Object(dx) === dx)) {\n            dy = dx.y;\n            dx = dx.x;\n        }\n\n        this.x += dx || 0;\n        this.y += dy || 0;\n        return this;\n    },\n\n    // Returns a point that is the reflection of me with\n    // the center of inversion in ref point.\n    reflection: function(ref) {\n\n        return (new Point(ref)).move(this, this.distance(ref));\n    },\n\n    // Rotate point by angle around origin.\n    // Angle is flipped because this is a left-handed coord system (y-axis points downward).\n    rotate: function(origin, angle) {\n\n        if (angle === 0) return this;\n\n        origin = origin || new Point(0, 0);\n\n        angle = toRad(normalizeAngle(-angle));\n        var cosAngle = cos(angle);\n        var sinAngle = sin(angle);\n\n        var x = (cosAngle * (this.x - origin.x)) - (sinAngle * (this.y - origin.y)) + origin.x;\n        var y = (sinAngle * (this.x - origin.x)) + (cosAngle * (this.y - origin.y)) + origin.y;\n\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    round: function(precision) {\n\n        let f = 1; // case 0\n        if (precision) {\n            switch (precision) {\n                case 1: f = 10; break;\n                case 2: f = 100; break;\n                case 3: f = 1000; break;\n                default: f = pow(10, precision); break;\n            }\n        }\n\n        this.x = round(this.x * f) / f;\n        this.y = round(this.y * f) / f;\n        return this;\n    },\n\n    // Scale point with origin.\n    scale: function(sx, sy, origin) {\n\n        origin = (origin && new Point(origin)) || new Point(0, 0);\n        this.x = origin.x + sx * (this.x - origin.x);\n        this.y = origin.y + sy * (this.y - origin.y);\n        return this;\n    },\n\n    snapToGrid: function(gx, gy) {\n\n        this.x = snapToGrid(this.x, gx);\n        this.y = snapToGrid(this.y, gy || gx);\n        return this;\n    },\n\n    squaredDistance: function(p) {\n        return squaredLength(this, p);\n    },\n\n    // Compute the angle between me and `p` and the x axis.\n    // (cartesian-to-polar coordinates conversion)\n    // Return theta angle in degrees.\n    theta: function(p) {\n\n        p = new Point(p);\n\n        // Invert the y-axis.\n        var y = -(p.y - this.y);\n        var x = p.x - this.x;\n        var rad = atan2(y, x); // defined for all 0 corner cases\n\n        // Correction for III. and IV. quadrant.\n        if (rad < 0) {\n            rad = 2 * PI + rad;\n        }\n\n        return 180 * rad / PI;\n    },\n\n    toJSON: function() {\n\n        return { x: this.x, y: this.y };\n    },\n\n    // Converts rectangular to polar coordinates.\n    // An origin can be specified, otherwise it's 0@0.\n    toPolar: function(o) {\n\n        o = (o && new Point(o)) || new Point(0, 0);\n        var x = this.x;\n        var y = this.y;\n        this.x = sqrt((x - o.x) * (x - o.x) + (y - o.y) * (y - o.y)); // r\n        this.y = toRad(o.theta(new Point(x, y)));\n        return this;\n    },\n\n    toString: function() {\n\n        return this.x + '@' + this.y;\n    },\n\n    serialize: function() {\n\n        return this.x + ',' + this.y;\n    },\n\n    update: function(x, y) {\n\n        if ((Object(x) === x)) {\n            y = x.y;\n            x = x.x;\n        }\n\n        this.x = x || 0;\n        this.y = y || 0;\n        return this;\n    },\n\n    // Compute the angle between the vector from 0,0 to me and the vector from 0,0 to p.\n    // Returns NaN if p is at 0,0.\n    vectorAngle: function(p) {\n\n        var zero = new Point(0, 0);\n        return zero.angleBetween(this, p);\n    }\n};\n\nPoint.prototype.translate = Point.prototype.offset;\n\n// For backwards compatibility:\nexport const point = Point;\n","import { Point } from './point.mjs';\nimport { Rect } from './rect.mjs';\nimport { bearing } from './line.bearing.mjs';\nimport { squaredLength } from './line.squaredLength.mjs';\nimport { length } from './line.length.mjs';\nimport { types } from './types.mjs';\n\nconst {\n    max,\n    min\n} = Math;\n\nexport const Line = function(p1, p2) {\n\n    if (!(this instanceof Line)) {\n        return new Line(p1, p2);\n    }\n\n    if (p1 instanceof Line) {\n        return new Line(p1.start, p1.end);\n    }\n\n    this.start = new Point(p1);\n    this.end = new Point(p2);\n};\n\nLine.prototype = {\n\n    type: types.Line,\n\n    // @returns the angle of incline of the line.\n    angle: function() {\n\n        var horizontalPoint = new Point(this.start.x + 1, this.start.y);\n        return this.start.angleBetween(this.end, horizontalPoint);\n    },\n\n    bbox: function() {\n\n        var left = min(this.start.x, this.end.x);\n        var top = min(this.start.y, this.end.y);\n        var right = max(this.start.x, this.end.x);\n        var bottom = max(this.start.y, this.end.y);\n\n        return new Rect(left, top, (right - left), (bottom - top));\n    },\n\n    // @return the bearing (cardinal direction) of the line. For example N, W, or SE.\n    // @returns {String} One of the following bearings : NE, E, SE, S, SW, W, NW, N.\n    bearing: function() {\n        return bearing(this.start, this.end);\n    },\n\n    clone: function() {\n\n        return new Line(this.start, this.end);\n    },\n\n    // @return {point} the closest point on the line to point `p`\n    closestPoint: function(p) {\n\n        return this.pointAt(this.closestPointNormalizedLength(p));\n    },\n\n    closestPointLength: function(p) {\n\n        return this.closestPointNormalizedLength(p) * this.length();\n    },\n\n    // @return {number} the normalized length of the closest point on the line to point `p`\n    closestPointNormalizedLength: function(p) {\n\n        var product = this.vector().dot((new Line(this.start, p)).vector());\n        var cpNormalizedLength = min(1, max(0, product / this.squaredLength()));\n\n        // cpNormalizedLength returns `NaN` if this line has zero length\n        // we can work with that - if `NaN`, return 0\n        if (cpNormalizedLength !== cpNormalizedLength) return 0; // condition evaluates to `true` if and only if cpNormalizedLength is `NaN`\n        // (`NaN` is the only value that is not equal to itself)\n\n        return cpNormalizedLength;\n    },\n\n    closestPointTangent: function(p) {\n\n        return this.tangentAt(this.closestPointNormalizedLength(p));\n    },\n\n    // Returns `true` if the point lies on the line.\n    containsPoint: function(p) {\n\n        var start = this.start;\n        var end = this.end;\n\n        if (start.cross(p, end) !== 0) return false;\n        // else: cross product of 0 indicates that this line and the vector to `p` are collinear\n\n        var length = this.length();\n        if ((new Line(start, p)).length() > length) return false;\n        if ((new Line(p, end)).length() > length) return false;\n        // else: `p` lies between start and end of the line\n\n        return true;\n    },\n\n    // Divides the line into two at requested `ratio` between 0 and 1.\n    divideAt: function(ratio) {\n\n        var dividerPoint = this.pointAt(ratio);\n\n        // return array with two lines\n        return [\n            new Line(this.start, dividerPoint),\n            new Line(dividerPoint, this.end)\n        ];\n    },\n\n    // Divides the line into two at requested `length`.\n    divideAtLength: function(length) {\n\n        var dividerPoint = this.pointAtLength(length);\n\n        // return array with two new lines\n        return [\n            new Line(this.start, dividerPoint),\n            new Line(dividerPoint, this.end)\n        ];\n    },\n\n    equals: function(l) {\n\n        return !!l &&\n            this.start.x === l.start.x &&\n            this.start.y === l.start.y &&\n            this.end.x === l.end.x &&\n            this.end.y === l.end.y;\n    },\n\n    // @return {point} Point where I'm intersecting a line.\n    // @return [point] Points where I'm intersecting a rectangle.\n    // @see Squeak Smalltalk, LineSegment>>intersectionWith:\n    intersect: function(shape, opt) {\n\n        if (shape && shape.intersectionWithLine) {\n            var intersection = shape.intersectionWithLine(this, opt);\n\n            // Backwards compatibility\n            if (intersection && (shape instanceof Line)) {\n                intersection = intersection[0];\n            }\n\n            return intersection;\n        }\n\n        return null;\n    },\n\n    intersectionWithLine: function(line) {\n\n        var pt1Dir = new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n        var pt2Dir = new Point(line.end.x - line.start.x, line.end.y - line.start.y);\n        var det = (pt1Dir.x * pt2Dir.y) - (pt1Dir.y * pt2Dir.x);\n        var deltaPt = new Point(line.start.x - this.start.x, line.start.y - this.start.y);\n        var alpha = (deltaPt.x * pt2Dir.y) - (deltaPt.y * pt2Dir.x);\n        var beta = (deltaPt.x * pt1Dir.y) - (deltaPt.y * pt1Dir.x);\n\n        if (det === 0 || alpha * det < 0 || beta * det < 0) {\n            // No intersection found.\n            return null;\n        }\n\n        if (det > 0) {\n            if (alpha > det || beta > det) {\n                return null;\n            }\n\n        } else {\n            if (alpha < det || beta < det) {\n                return null;\n            }\n        }\n\n        return [new Point(\n            this.start.x + (alpha * pt1Dir.x / det),\n            this.start.y + (alpha * pt1Dir.y / det)\n        )];\n    },\n\n    isDifferentiable: function() {\n\n        return !this.start.equals(this.end);\n    },\n\n    // @return {double} length of the line\n    length: function() {\n        return length(this.start, this.end);\n    },\n\n    // @return {point} my midpoint\n    midpoint: function() {\n\n        return new Point(\n            (this.start.x + this.end.x) / 2,\n            (this.start.y + this.end.y) / 2\n        );\n    },\n\n    parallel: function(distance) {\n        const l = this.clone();\n        if (!this.isDifferentiable()) return l;\n        const { start, end } = l;\n        const eRef = start.clone().rotate(end, 270);\n        const sRef = end.clone().rotate(start, 90);\n        start.move(sRef, distance);\n        end.move(eRef, distance);\n        return l;\n    },\n\n    // @return {point} my point at 't' <0,1>\n    pointAt: function(t) {\n\n        var start = this.start;\n        var end = this.end;\n\n        if (t <= 0) return start.clone();\n        if (t >= 1) return end.clone();\n\n        return start.lerp(end, t);\n    },\n\n    pointAtLength: function(length) {\n\n        var start = this.start;\n        var end = this.end;\n\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false; // negative lengths mean start calculation from end point\n            length = -length; // absolute value\n        }\n\n        var lineLength = this.length();\n        if (length >= lineLength) return (fromStart ? end.clone() : start.clone());\n\n        return this.pointAt((fromStart ? (length) : (lineLength - length)) / lineLength);\n    },\n\n    // @return {number} the offset of the point `p` from the line. + if the point `p` is on the right side of the line, - if on the left and 0 if on the line.\n    pointOffset: function(p) {\n\n        // Find the sign of the determinant of vectors (start,end), where p is the query point.\n        p = new Point(p);\n        var start = this.start;\n        var end = this.end;\n        var determinant = ((end.x - start.x) * (p.y - start.y) - (end.y - start.y) * (p.x - start.x));\n\n        return determinant / this.length();\n    },\n\n    rotate: function(origin, angle) {\n\n        this.start.rotate(origin, angle);\n        this.end.rotate(origin, angle);\n        return this;\n    },\n\n    round: function(precision) {\n\n        this.start.round(precision);\n        this.end.round(precision);\n        return this;\n    },\n\n    scale: function(sx, sy, origin) {\n\n        this.start.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    },\n\n    // @return {number} scale the line so that it has the requested length\n    setLength: function(length) {\n\n        var currentLength = this.length();\n        if (!currentLength) return this;\n\n        var scaleFactor = length / currentLength;\n        return this.scale(scaleFactor, scaleFactor, this.start);\n    },\n\n    // @return {integer} length without sqrt\n    // @note for applications where the exact length is not necessary (e.g. compare only)\n    squaredLength: function() {\n        return squaredLength(this.start, this.end);\n    },\n\n    tangentAt: function(t) {\n\n        if (!this.isDifferentiable()) return null;\n\n        var start = this.start;\n        var end = this.end;\n\n        var tangentStart = this.pointAt(t); // constrains `t` between 0 and 1\n\n        var tangentLine = new Line(start, end);\n        tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y); // move so that tangent line starts at the point requested\n\n        return tangentLine;\n    },\n\n    tangentAtLength: function(length) {\n\n        if (!this.isDifferentiable()) return null;\n\n        var start = this.start;\n        var end = this.end;\n\n        var tangentStart = this.pointAtLength(length);\n\n        var tangentLine = new Line(start, end);\n        tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y); // move so that tangent line starts at the point requested\n\n        return tangentLine;\n    },\n\n    toString: function() {\n\n        return this.start.toString() + ' ' + this.end.toString();\n    },\n\n    serialize: function() {\n\n        return this.start.serialize() + ' ' + this.end.serialize();\n    },\n\n    translate: function(tx, ty) {\n\n        this.start.translate(tx, ty);\n        this.end.translate(tx, ty);\n        return this;\n    },\n\n    // @return vector {point} of the line\n    vector: function() {\n\n        return new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n    }\n};\n\n// For backwards compatibility:\nLine.prototype.intersection = Line.prototype.intersect;\n\n\n// For backwards compatibility:\nexport const line = Line;\n","import { Rect } from './rect.mjs';\nimport { Point } from './point.mjs';\nimport { types } from './types.mjs';\n\nconst {\n    sqrt,\n    round,\n    pow\n} = Math;\n\nexport const Ellipse = function(c, a, b) {\n\n    if (!(this instanceof Ellipse)) {\n        return new Ellipse(c, a, b);\n    }\n\n    if (c instanceof Ellipse) {\n        return new Ellipse(new Point(c.x, c.y), c.a, c.b);\n    }\n\n    c = new Point(c);\n    this.x = c.x;\n    this.y = c.y;\n    this.a = a;\n    this.b = b;\n};\n\nEllipse.fromRect = function(rect) {\n\n    rect = new Rect(rect);\n    return new Ellipse(rect.center(), rect.width / 2, rect.height / 2);\n};\n\nEllipse.prototype = {\n\n    type: types.Ellipse,\n\n    bbox: function() {\n\n        return new Rect(this.x - this.a, this.y - this.b, 2 * this.a, 2 * this.b);\n    },\n\n    /**\n     * @returns {g.Point}\n     */\n    center: function() {\n\n        return new Point(this.x, this.y);\n    },\n\n    clone: function() {\n\n        return new Ellipse(this);\n    },\n\n    /**\n     * @param {g.Point} p\n     * @returns {boolean}\n     */\n    containsPoint: function(p) {\n\n        return this.normalizedDistance(p) <= 1;\n    },\n\n    equals: function(ellipse) {\n\n        return !!ellipse &&\n            ellipse.x === this.x &&\n            ellipse.y === this.y &&\n            ellipse.a === this.a &&\n            ellipse.b === this.b;\n    },\n\n    // inflate by dx and dy\n    // @param dx {delta_x} representing additional size to x\n    // @param dy {delta_y} representing additional size to y -\n    // dy param is not required -> in that case y is sized by dx\n    inflate: function(dx, dy) {\n        if (dx === undefined) {\n            dx = 0;\n        }\n\n        if (dy === undefined) {\n            dy = dx;\n        }\n\n        this.a += 2 * dx;\n        this.b += 2 * dy;\n\n        return this;\n    },\n\n    intersectionWithLine: function(line) {\n\n        var intersections = [];\n        var a1 = line.start;\n        var a2 = line.end;\n        var rx = this.a;\n        var ry = this.b;\n        var dir = line.vector();\n        var diff = a1.difference(new Point(this));\n        var mDir = new Point(dir.x / (rx * rx), dir.y / (ry * ry));\n        var mDiff = new Point(diff.x / (rx * rx), diff.y / (ry * ry));\n\n        var a = dir.dot(mDir);\n        var b = dir.dot(mDiff);\n        var c = diff.dot(mDiff) - 1.0;\n        var d = b * b - a * c;\n\n        if (d < 0) {\n            return null;\n        } else if (d > 0) {\n            var root = sqrt(d);\n            var ta = (-b - root) / a;\n            var tb = (-b + root) / a;\n\n            if ((ta < 0 || 1 < ta) && (tb < 0 || 1 < tb)) {\n                // if ((ta < 0 && tb < 0) || (ta > 1 && tb > 1)) outside else inside\n                return null;\n            } else {\n                if (0 <= ta && ta <= 1) intersections.push(a1.lerp(a2, ta));\n                if (0 <= tb && tb <= 1) intersections.push(a1.lerp(a2, tb));\n            }\n        } else {\n            var t = -b / a;\n            if (0 <= t && t <= 1) {\n                intersections.push(a1.lerp(a2, t));\n            } else {\n                // outside\n                return null;\n            }\n        }\n\n        return intersections;\n    },\n\n    // Find point on me where line from my center to\n    // point p intersects my boundary.\n    // @param {number} angle If angle is specified, intersection with rotated ellipse is computed.\n    intersectionWithLineFromCenterToPoint: function(p, angle) {\n\n        p = new Point(p);\n\n        if (angle) p.rotate(new Point(this.x, this.y), angle);\n\n        var dx = p.x - this.x;\n        var dy = p.y - this.y;\n        var result;\n\n        if (dx === 0) {\n            result = this.bbox().pointNearestToPoint(p);\n            if (angle) return result.rotate(new Point(this.x, this.y), -angle);\n            return result;\n        }\n\n        var m = dy / dx;\n        var mSquared = m * m;\n        var aSquared = this.a * this.a;\n        var bSquared = this.b * this.b;\n\n        var x = sqrt(1 / ((1 / aSquared) + (mSquared / bSquared)));\n        x = dx < 0 ? -x : x;\n\n        var y = m * x;\n        result = new Point(this.x + x, this.y + y);\n\n        if (angle) return result.rotate(new Point(this.x, this.y), -angle);\n        return result;\n    },\n\n    /**\n     * @param {g.Point} point\n     * @returns {number} result < 1 - inside ellipse, result == 1 - on ellipse boundary, result > 1 - outside\n     */\n    normalizedDistance: function(point) {\n\n        var x0 = point.x;\n        var y0 = point.y;\n        var a = this.a;\n        var b = this.b;\n        var x = this.x;\n        var y = this.y;\n\n        return ((x0 - x) * (x0 - x)) / (a * a) + ((y0 - y) * (y0 - y)) / (b * b);\n    },\n\n    round: function(precision) {\n\n        let f = 1; // case 0\n        if (precision) {\n            switch (precision) {\n                case 1: f = 10; break;\n                case 2: f = 100; break;\n                case 3: f = 1000; break;\n                default: f = pow(10, precision); break;\n            }\n        }\n\n        this.x = round(this.x * f) / f;\n        this.y = round(this.y * f) / f;\n        this.a = round(this.a * f) / f;\n        this.b = round(this.b * f) / f;\n        return this;\n    },\n\n    /** Compute angle between tangent and x axis\n     * @param {g.Point} p Point of tangency, it has to be on ellipse boundaries.\n     * @returns {number} angle between tangent and x axis\n     */\n    tangentTheta: function(p) {\n\n        var refPointDelta = 30;\n        var x0 = p.x;\n        var y0 = p.y;\n        var a = this.a;\n        var b = this.b;\n        var center = this.bbox().center();\n        var m = center.x;\n        var n = center.y;\n\n        var q1 = x0 > center.x + a / 2;\n        var q3 = x0 < center.x - a / 2;\n\n        var y, x;\n        if (q1 || q3) {\n            y = x0 > center.x ? y0 - refPointDelta : y0 + refPointDelta;\n            x = (a * a / (x0 - m)) - (a * a * (y0 - n) * (y - n)) / (b * b * (x0 - m)) + m;\n\n        } else {\n            x = y0 > center.y ? x0 + refPointDelta : x0 - refPointDelta;\n            y = (b * b / (y0 - n)) - (b * b * (x0 - m) * (x - m)) / (a * a * (y0 - n)) + n;\n        }\n\n        return (new Point(x, y)).theta(p);\n\n    },\n\n    toString: function() {\n\n        return (new Point(this.x, this.y)).toString() + ' ' + this.a + ' ' + this.b;\n    }\n};\n\n// For backwards compatibility:\nexport const ellipse = Ellipse;\n","import { toRad } from './geometry.helpers.mjs';\nimport { Line } from './line.mjs';\nimport { Point } from './point.mjs';\nimport { Ellipse } from './ellipse.mjs';\nimport { types } from './types.mjs';\n\nconst {\n    abs,\n    cos,\n    sin,\n    min,\n    max,\n    round,\n    pow\n} = Math;\n\nexport const Rect = function(x, y, w, h) {\n\n    if (!(this instanceof Rect)) {\n        return new Rect(x, y, w, h);\n    }\n\n    if ((Object(x) === x)) {\n        y = x.y;\n        w = x.width;\n        h = x.height;\n        x = x.x;\n    }\n\n    this.x = x === undefined ? 0 : x;\n    this.y = y === undefined ? 0 : y;\n    this.width = w === undefined ? 0 : w;\n    this.height = h === undefined ? 0 : h;\n};\n\nRect.fromEllipse = function(e) {\n\n    e = new Ellipse(e);\n    return new Rect(e.x - e.a, e.y - e.b, 2 * e.a, 2 * e.b);\n};\n\nRect.fromPointUnion = function(...points) {\n\n    if (points.length === 0) return null;\n\n    const p = new Point();\n    let minX, minY, maxX, maxY;\n    minX = minY = Infinity;\n    maxX = maxY = -Infinity;\n\n    for (let i = 0; i < points.length; i++) {\n        p.update(points[i]);\n        const x = p.x;\n        const y = p.y;\n\n        if (x < minX) minX = x;\n        if (x > maxX) maxX = x;\n        if (y < minY) minY = y;\n        if (y > maxY) maxY = y;\n    }\n\n    return new Rect(minX, minY, maxX - minX, maxY - minY);\n};\n\nRect.fromRectUnion = function(...rects) {\n\n    if (rects.length === 0) return null;\n\n    const r = new Rect();\n    let minX, minY, maxX, maxY;\n    minX = minY = Infinity;\n    maxX = maxY = -Infinity;\n\n    for (let i = 0; i < rects.length; i++) {\n        r.update(rects[i]);\n        const x = r.x;\n        const y = r.y;\n        const mX = x + r.width;\n        const mY = y + r.height;\n\n        if (x < minX) minX = x;\n        if (mX > maxX) maxX = mX;\n        if (y < minY) minY = y;\n        if (mY > maxY) maxY = mY;\n    }\n\n    return new Rect(minX, minY, maxX - minX, maxY - minY);\n};\n\nRect.prototype = {\n\n    type: types.Rect,\n\n    // Find my bounding box when I'm rotated with the center of rotation in the center of me.\n    // @return r {rectangle} representing a bounding box\n    bbox: function(angle) {\n        return this.clone().rotateAroundCenter(angle);\n    },\n\n    rotateAroundCenter: function(angle) {\n        if (!angle) return this;\n        const { width, height } = this;\n        const theta = toRad(angle);\n        const st = abs(sin(theta));\n        const ct = abs(cos(theta));\n        const w = width * ct + height * st;\n        const h = width * st + height * ct;\n        this.x += (width - w) / 2;\n        this.y += (height - h) / 2;\n        this.width = w;\n        this.height = h;\n        return this;\n    },\n\n    bottomLeft: function() {\n\n        return new Point(this.x, this.y + this.height);\n    },\n\n    bottomLine: function() {\n\n        return new Line(this.bottomLeft(), this.bottomRight());\n    },\n\n    bottomMiddle: function() {\n\n        return new Point(this.x + this.width / 2, this.y + this.height);\n    },\n\n    center: function() {\n\n        return new Point(this.x + this.width / 2, this.y + this.height / 2);\n    },\n\n    clone: function() {\n\n        return new Rect(this);\n    },\n\n    // @return {bool} true if point p is inside me.\n    containsPoint: function(p) {\n        p = new Point(p);\n        return p.x >= this.x && p.x <= this.x + this.width && p.y >= this.y && p.y <= this.y + this.height;\n    },\n\n    // @return {bool} true if rectangle `r` is inside me.\n    containsRect: function(r) {\n\n        var r0 = new Rect(this).normalize();\n        var r1 = new Rect(r).normalize();\n        var w0 = r0.width;\n        var h0 = r0.height;\n        var w1 = r1.width;\n        var h1 = r1.height;\n\n        if (!w0 || !h0 || !w1 || !h1) {\n            // At least one of the dimensions is 0\n            return false;\n        }\n\n        var x0 = r0.x;\n        var y0 = r0.y;\n        var x1 = r1.x;\n        var y1 = r1.y;\n\n        w1 += x1;\n        w0 += x0;\n        h1 += y1;\n        h0 += y0;\n\n        return x0 <= x1 && w1 <= w0 && y0 <= y1 && h1 <= h0;\n    },\n\n    corner: function() {\n\n        return new Point(this.x + this.width, this.y + this.height);\n    },\n\n    // @return {boolean} true if rectangles are equal.\n    equals: function(r) {\n\n        var mr = (new Rect(this)).normalize();\n        var nr = (new Rect(r)).normalize();\n        return mr.x === nr.x && mr.y === nr.y && mr.width === nr.width && mr.height === nr.height;\n    },\n\n    // inflate by dx and dy, recompute origin [x, y]\n    // @param dx {delta_x} representing additional size to x\n    // @param dy {delta_y} representing additional size to y -\n    // dy param is not required -> in that case y is sized by dx\n    inflate: function(dx, dy) {\n\n        if (dx === undefined) {\n            dx = 0;\n        }\n\n        if (dy === undefined) {\n            dy = dx;\n        }\n\n        this.x -= dx;\n        this.y -= dy;\n        this.width += 2 * dx;\n        this.height += 2 * dy;\n\n        return this;\n    },\n\n    // @return {rect} if rectangles intersect, {null} if not.\n    intersect: function(r) {\n\n        var myOrigin = this.origin();\n        var myCorner = this.corner();\n        var rOrigin = r.origin();\n        var rCorner = r.corner();\n\n        // No intersection found\n        if (rCorner.x <= myOrigin.x ||\n            rCorner.y <= myOrigin.y ||\n            rOrigin.x >= myCorner.x ||\n            rOrigin.y >= myCorner.y) return null;\n\n        var x = max(myOrigin.x, rOrigin.x);\n        var y = max(myOrigin.y, rOrigin.y);\n\n        return new Rect(x, y, min(myCorner.x, rCorner.x) - x, min(myCorner.y, rCorner.y) - y);\n    },\n\n    intersectionWithLine: function(line) {\n\n        var r = this;\n        var rectLines = [r.topLine(), r.rightLine(), r.bottomLine(), r.leftLine()];\n        var points = [];\n        var dedupeArr = [];\n        var pt, i;\n\n        var n = rectLines.length;\n        for (i = 0; i < n; i++) {\n\n            pt = line.intersect(rectLines[i]);\n            if (pt !== null && dedupeArr.indexOf(pt.toString()) < 0) {\n                points.push(pt);\n                dedupeArr.push(pt.toString());\n            }\n        }\n\n        return points.length > 0 ? points : null;\n    },\n\n    // Find point on my boundary where line starting\n    // from my center ending in point p intersects me.\n    // @param {number} angle If angle is specified, intersection with rotated rectangle is computed.\n    intersectionWithLineFromCenterToPoint: function(p, angle) {\n\n        p = new Point(p);\n        var center = new Point(this.x + this.width / 2, this.y + this.height / 2);\n        var result;\n\n        if (angle) p.rotate(center, angle);\n\n        // (clockwise, starting from the top side)\n        var sides = [\n            this.topLine(),\n            this.rightLine(),\n            this.bottomLine(),\n            this.leftLine()\n        ];\n        var connector = new Line(center, p);\n\n        for (var i = sides.length - 1; i >= 0; --i) {\n            var intersection = sides[i].intersection(connector);\n            if (intersection !== null) {\n                result = intersection;\n                break;\n            }\n        }\n        if (result && angle) result.rotate(center, -angle);\n        return result;\n    },\n\n    leftLine: function() {\n\n        return new Line(this.topLeft(), this.bottomLeft());\n    },\n\n    leftMiddle: function() {\n\n        return new Point(this.x, this.y + this.height / 2);\n    },\n\n    maxRectScaleToFit: function(rect, origin) {\n\n        rect = new Rect(rect);\n        origin || (origin = rect.center());\n\n        var sx1, sx2, sx3, sx4, sy1, sy2, sy3, sy4;\n        var ox = origin.x;\n        var oy = origin.y;\n\n        // Here we find the maximal possible scale for all corner points (for x and y axis) of the rectangle,\n        // so when the scale is applied the point is still inside the rectangle.\n\n        sx1 = sx2 = sx3 = sx4 = sy1 = sy2 = sy3 = sy4 = Infinity;\n\n        // Top Left\n        var p1 = rect.topLeft();\n        if (p1.x < ox) {\n            sx1 = (this.x - ox) / (p1.x - ox);\n        }\n        if (p1.y < oy) {\n            sy1 = (this.y - oy) / (p1.y - oy);\n        }\n        // Bottom Right\n        var p2 = rect.bottomRight();\n        if (p2.x > ox) {\n            sx2 = (this.x + this.width - ox) / (p2.x - ox);\n        }\n        if (p2.y > oy) {\n            sy2 = (this.y + this.height - oy) / (p2.y - oy);\n        }\n        // Top Right\n        var p3 = rect.topRight();\n        if (p3.x > ox) {\n            sx3 = (this.x + this.width - ox) / (p3.x - ox);\n        }\n        if (p3.y < oy) {\n            sy3 = (this.y - oy) / (p3.y - oy);\n        }\n        // Bottom Left\n        var p4 = rect.bottomLeft();\n        if (p4.x < ox) {\n            sx4 = (this.x - ox) / (p4.x - ox);\n        }\n        if (p4.y > oy) {\n            sy4 = (this.y + this.height - oy) / (p4.y - oy);\n        }\n\n        return {\n            sx: min(sx1, sx2, sx3, sx4),\n            sy: min(sy1, sy2, sy3, sy4)\n        };\n    },\n\n    maxRectUniformScaleToFit: function(rect, origin) {\n\n        var scale = this.maxRectScaleToFit(rect, origin);\n        return min(scale.sx, scale.sy);\n    },\n\n    // Move and expand me.\n    // @param r {rectangle} representing deltas\n    moveAndExpand: function(r) {\n\n        this.x += r.x || 0;\n        this.y += r.y || 0;\n        this.width += r.width || 0;\n        this.height += r.height || 0;\n        return this;\n    },\n\n    // Normalize the rectangle; i.e., make it so that it has a non-negative width and height.\n    // If width < 0 the function swaps the left and right corners,\n    // and it swaps the top and bottom corners if height < 0\n    // like in http://qt-project.org/doc/qt-4.8/qrectf.html#normalized\n    normalize: function() {\n\n        var newx = this.x;\n        var newy = this.y;\n        var newwidth = this.width;\n        var newheight = this.height;\n        if (this.width < 0) {\n            newx = this.x + this.width;\n            newwidth = -this.width;\n        }\n        if (this.height < 0) {\n            newy = this.y + this.height;\n            newheight = -this.height;\n        }\n        this.x = newx;\n        this.y = newy;\n        this.width = newwidth;\n        this.height = newheight;\n        return this;\n    },\n\n    // Offset me by the specified amount.\n    offset: function(dx, dy) {\n\n        // pretend that this is a point and call offset()\n        // rewrites x and y according to dx and dy\n        return Point.prototype.offset.call(this, dx, dy);\n    },\n\n    origin: function() {\n\n        return new Point(this.x, this.y);\n    },\n\n    // @return {point} a point on my boundary nearest to the given point.\n    // @see Squeak Smalltalk, Rectangle>>pointNearestTo:\n    pointNearestToPoint: function(point) {\n\n        point = new Point(point);\n        if (this.containsPoint(point)) {\n            var side = this.sideNearestToPoint(point);\n            switch (side) {\n                case 'right':\n                    return new Point(this.x + this.width, point.y);\n                case 'left':\n                    return new Point(this.x, point.y);\n                case 'bottom':\n                    return new Point(point.x, this.y + this.height);\n                case 'top':\n                    return new Point(point.x, this.y);\n            }\n        }\n        return point.adhereToRect(this);\n    },\n\n    rightLine: function() {\n\n        return new Line(this.topRight(), this.bottomRight());\n    },\n\n    rightMiddle: function() {\n\n        return new Point(this.x + this.width, this.y + this.height / 2);\n    },\n\n    round: function(precision) {\n\n        let f = 1; // case 0\n        if (precision) {\n            switch (precision) {\n                case 1: f = 10; break;\n                case 2: f = 100; break;\n                case 3: f = 1000; break;\n                default: f = pow(10, precision); break;\n            }\n        }\n\n        this.x = round(this.x * f) / f;\n        this.y = round(this.y * f) / f;\n        this.width = round(this.width * f) / f;\n        this.height = round(this.height * f) / f;\n        return this;\n    },\n\n    // Scale rectangle with origin.\n    scale: function(sx, sy, origin) {\n\n        origin = this.origin().scale(sx, sy, origin);\n        this.x = origin.x;\n        this.y = origin.y;\n        this.width *= sx;\n        this.height *= sy;\n        return this;\n    },\n\n    // @return {string} (left|right|top|bottom) side which is nearest to point\n    // @see Squeak Smalltalk, Rectangle>>sideNearestTo:\n    sideNearestToPoint: function(point) {\n\n        point = new Point(point);\n        var distToLeft = point.x - this.x;\n        var distToRight = (this.x + this.width) - point.x;\n        var distToTop = point.y - this.y;\n        var distToBottom = (this.y + this.height) - point.y;\n        var closest = distToLeft;\n        var side = 'left';\n\n        if (distToRight < closest) {\n            closest = distToRight;\n            side = 'right';\n        }\n        if (distToTop < closest) {\n            closest = distToTop;\n            side = 'top';\n        }\n        if (distToBottom < closest) {\n            // closest = distToBottom;\n            side = 'bottom';\n        }\n        return side;\n    },\n\n    snapToGrid: function(gx, gy) {\n\n        var origin = this.origin().snapToGrid(gx, gy);\n        var corner = this.corner().snapToGrid(gx, gy);\n        this.x = origin.x;\n        this.y = origin.y;\n        this.width = corner.x - origin.x;\n        this.height = corner.y - origin.y;\n        return this;\n    },\n\n    toJSON: function() {\n\n        return { x: this.x, y: this.y, width: this.width, height: this.height };\n    },\n\n    topLine: function() {\n\n        return new Line(this.topLeft(), this.topRight());\n    },\n\n    topMiddle: function() {\n\n        return new Point(this.x + this.width / 2, this.y);\n    },\n\n    topRight: function() {\n\n        return new Point(this.x + this.width, this.y);\n    },\n\n    toString: function() {\n\n        return this.origin().toString() + ' ' + this.corner().toString();\n    },\n\n    // @return {rect} representing the union of both rectangles.\n    union: function(rect) {\n\n        return Rect.fromRectUnion(this, rect);\n    },\n\n    update: function(x, y, w, h) {\n\n        if ((Object(x) === x)) {\n            y = x.y;\n            w = x.width;\n            h = x.height;\n            x = x.x;\n        }\n\n        this.x = x || 0;\n        this.y = y || 0;\n        this.width = w || 0;\n        this.height = h || 0;\n        return this;\n    }\n};\n\nRect.prototype.bottomRight = Rect.prototype.corner;\n\nRect.prototype.topLeft = Rect.prototype.origin;\n\nRect.prototype.translate = Rect.prototype.offset;\n\n// For backwards compatibility:\nexport const rect = Rect;\n","export function parsePoints(svgString) {\n\n    // Step 1: Discard surrounding spaces\n    const trimmedString = svgString.trim();\n    if (trimmedString === '') return [];\n\n    const points = [];\n\n    // Step 2: Split at commas (+ their surrounding spaces) or at multiple spaces\n    // ReDoS mitigation: Have an anchor at the beginning of each alternation\n    // Note: This doesn't simplify double (or more) commas - causes empty coords\n    // This regex is used by `split()`, so it doesn't need to use /g\n    const coords = trimmedString.split(/\\b\\s*,\\s*|,\\s*|\\s+/);\n\n    const numCoords = coords.length;\n    for (let i = 0; i < numCoords; i += 2) {\n        // Step 3: Convert each coord to number\n        // Note: If the coord cannot be converted to a number, it will be `NaN`\n        // Note: If the coord is empty (\"\", e.g. from \",,\" input), it will be `0`\n        // Note: If we end up with an odd number of coords, the last point's second coord will be `NaN`\n        points.push({ x: +coords[i], y: +coords[i + 1] });\n    }\n    return points;\n}\n\nexport function clonePoints(points) {\n    const numPoints = points.length;\n    if (numPoints === 0) return [];\n    const newPoints = [];\n    for (let i = 0; i < numPoints; i++) {\n        const point = points[i].clone();\n        newPoints.push(point);\n    }\n    return newPoints;\n}\n\n// Returns a convex-hull polyline from this polyline.\n// Implements the Graham scan (https://en.wikipedia.org/wiki/Graham_scan).\n// Output polyline starts at the first element of the original polyline that is on the hull, then continues clockwise.\n// Minimal polyline is found (only vertices of the hull are reported, no collinear points).\nexport function convexHull(points) {\n\n    const { abs } = Math;\n\n    var i;\n    var n;\n\n    var numPoints = points.length;\n    if (numPoints === 0) return []; // if points array is empty\n\n    // step 1: find the starting point - point with the lowest y (if equality, highest x)\n    var startPoint;\n    for (i = 0; i < numPoints; i++) {\n        if (startPoint === undefined) {\n            // if this is the first point we see, set it as start point\n            startPoint = points[i];\n\n        } else if (points[i].y < startPoint.y) {\n            // start point should have lowest y from all points\n            startPoint = points[i];\n\n        } else if ((points[i].y === startPoint.y) && (points[i].x > startPoint.x)) {\n            // if two points have the lowest y, choose the one that has highest x\n            // there are no points to the right of startPoint - no ambiguity about theta 0\n            // if there are several coincident start point candidates, first one is reported\n            startPoint = points[i];\n        }\n    }\n\n    // step 2: sort the list of points\n    // sorting by angle between line from startPoint to point and the x-axis (theta)\n\n    // step 2a: create the point records = [point, originalIndex, angle]\n    var sortedPointRecords = [];\n    for (i = 0; i < numPoints; i++) {\n\n        var angle = startPoint.theta(points[i]);\n        if (angle === 0) {\n            angle = 360; // give highest angle to start point\n            // the start point will end up at end of sorted list\n            // the start point will end up at beginning of hull points list\n        }\n\n        var entry = [points[i], i, angle];\n        sortedPointRecords.push(entry);\n    }\n\n    // step 2b: sort the list in place\n    sortedPointRecords.sort(function(record1, record2) {\n        // returning a negative number here sorts record1 before record2\n        // if first angle is smaller than second, first angle should come before second\n\n        var sortOutput = record1[2] - record2[2];  // negative if first angle smaller\n        if (sortOutput === 0) {\n            // if the two angles are equal, sort by originalIndex\n            sortOutput = record2[1] - record1[1]; // negative if first index larger\n            // coincident points will be sorted in reverse-numerical order\n            // so the coincident points with lower original index will be considered first\n        }\n\n        return sortOutput;\n    });\n\n    // step 2c: duplicate start record from the top of the stack to the bottom of the stack\n    if (sortedPointRecords.length > 2) {\n        var startPointRecord = sortedPointRecords[sortedPointRecords.length - 1];\n        sortedPointRecords.unshift(startPointRecord);\n    }\n\n    // step 3a: go through sorted points in order and find those with right turns\n    // we want to get our results in clockwise order\n    var insidePoints = {}; // dictionary of points with left turns - cannot be on the hull\n    var hullPointRecords = []; // stack of records with right turns - hull point candidates\n\n    var currentPointRecord;\n    var currentPoint;\n    var lastHullPointRecord;\n    var lastHullPoint;\n    var secondLastHullPointRecord;\n    var secondLastHullPoint;\n    while (sortedPointRecords.length !== 0) {\n\n        currentPointRecord = sortedPointRecords.pop();\n        currentPoint = currentPointRecord[0];\n\n        // check if point has already been discarded\n        // keys for insidePoints are stored in the form 'point.x@point.y@@originalIndex'\n        if (insidePoints.hasOwnProperty(currentPointRecord[0] + '@@' + currentPointRecord[1])) {\n            // this point had an incorrect turn at some previous iteration of this loop\n            // this disqualifies it from possibly being on the hull\n            continue;\n        }\n\n        var correctTurnFound = false;\n        while (!correctTurnFound) {\n\n            if (hullPointRecords.length < 2) {\n                // not enough points for comparison, just add current point\n                hullPointRecords.push(currentPointRecord);\n                correctTurnFound = true;\n\n            } else {\n                lastHullPointRecord = hullPointRecords.pop();\n                lastHullPoint = lastHullPointRecord[0];\n                secondLastHullPointRecord = hullPointRecords.pop();\n                secondLastHullPoint = secondLastHullPointRecord[0];\n\n                var crossProduct = secondLastHullPoint.cross(lastHullPoint, currentPoint);\n\n                if (crossProduct < 0) {\n                    // found a right turn\n                    hullPointRecords.push(secondLastHullPointRecord);\n                    hullPointRecords.push(lastHullPointRecord);\n                    hullPointRecords.push(currentPointRecord);\n                    correctTurnFound = true;\n\n                } else if (crossProduct === 0) {\n                    // the three points are collinear\n                    // three options:\n                    // there may be a 180 or 0 degree angle at lastHullPoint\n                    // or two of the three points are coincident\n                    var THRESHOLD = 1e-10; // we have to take rounding errors into account\n                    var angleBetween = lastHullPoint.angleBetween(secondLastHullPoint, currentPoint);\n                    if (abs(angleBetween - 180) < THRESHOLD) { // rounding around 180 to 180\n                        // if the cross product is 0 because the angle is 180 degrees\n                        // discard last hull point (add to insidePoints)\n                        //insidePoints.unshift(lastHullPoint);\n                        insidePoints[lastHullPointRecord[0] + '@@' + lastHullPointRecord[1]] = lastHullPoint;\n                        // reenter second-to-last hull point (will be last at next iter)\n                        hullPointRecords.push(secondLastHullPointRecord);\n                        // do not do anything with current point\n                        // correct turn not found\n\n                    } else if (lastHullPoint.equals(currentPoint) || secondLastHullPoint.equals(lastHullPoint)) {\n                        // if the cross product is 0 because two points are the same\n                        // discard last hull point (add to insidePoints)\n                        //insidePoints.unshift(lastHullPoint);\n                        insidePoints[lastHullPointRecord[0] + '@@' + lastHullPointRecord[1]] = lastHullPoint;\n                        // reenter second-to-last hull point (will be last at next iter)\n                        hullPointRecords.push(secondLastHullPointRecord);\n                        // do not do anything with current point\n                        // correct turn not found\n\n                    } else if (abs(((angleBetween + 1) % 360) - 1) < THRESHOLD) { // rounding around 0 and 360 to 0\n                        // if the cross product is 0 because the angle is 0 degrees\n                        // remove last hull point from hull BUT do not discard it\n                        // reenter second-to-last hull point (will be last at next iter)\n                        hullPointRecords.push(secondLastHullPointRecord);\n                        // put last hull point back into the sorted point records list\n                        sortedPointRecords.push(lastHullPointRecord);\n                        // we are switching the order of the 0deg and 180deg points\n                        // correct turn not found\n                    }\n\n                } else {\n                    // found a left turn\n                    // discard last hull point (add to insidePoints)\n                    //insidePoints.unshift(lastHullPoint);\n                    insidePoints[lastHullPointRecord[0] + '@@' + lastHullPointRecord[1]] = lastHullPoint;\n                    // reenter second-to-last hull point (will be last at next iter of loop)\n                    hullPointRecords.push(secondLastHullPointRecord);\n                    // do not do anything with current point\n                    // correct turn not found\n                }\n            }\n        }\n    }\n    // at this point, hullPointRecords contains the output points in clockwise order\n    // the points start with lowest-y,highest-x startPoint, and end at the same point\n\n    // step 3b: remove duplicated startPointRecord from the end of the array\n    if (hullPointRecords.length > 2) {\n        hullPointRecords.pop();\n    }\n\n    // step 4: find the lowest originalIndex record and put it at the beginning of hull\n    var lowestHullIndex; // the lowest originalIndex on the hull\n    var indexOfLowestHullIndexRecord = -1; // the index of the record with lowestHullIndex\n    n = hullPointRecords.length;\n    for (i = 0; i < n; i++) {\n\n        var currentHullIndex = hullPointRecords[i][1];\n\n        if (lowestHullIndex === undefined || currentHullIndex < lowestHullIndex) {\n            lowestHullIndex = currentHullIndex;\n            indexOfLowestHullIndexRecord = i;\n        }\n    }\n\n    var hullPointRecordsReordered = [];\n    if (indexOfLowestHullIndexRecord > 0) {\n        var newFirstChunk = hullPointRecords.slice(indexOfLowestHullIndexRecord);\n        var newSecondChunk = hullPointRecords.slice(0, indexOfLowestHullIndexRecord);\n        hullPointRecordsReordered = newFirstChunk.concat(newSecondChunk);\n\n    } else {\n        hullPointRecordsReordered = hullPointRecords;\n    }\n\n    var hullPoints = [];\n    n = hullPointRecordsReordered.length;\n    for (i = 0; i < n; i++) {\n        hullPoints.push(hullPointRecordsReordered[i][0]);\n    }\n\n    return hullPoints;\n}\n","import { Rect } from './rect.mjs';\nimport { Point } from './point.mjs';\nimport { Line } from './line.mjs';\nimport { types } from './types.mjs';\nimport { clonePoints, parsePoints, convexHull } from './points.mjs';\n\n\nexport const Polyline = function(points) {\n\n    if (!(this instanceof Polyline)) {\n        return new Polyline(points);\n    }\n\n    if (typeof points === 'string') {\n        return new Polyline.parse(points);\n    }\n\n    this.points = (Array.isArray(points) ? points.map(Point) : []);\n};\n\nPolyline.parse = function(svgString) {\n    return new Polyline(parsePoints(svgString));\n};\n\nPolyline.fromRect = function(rect) {\n    return new Polyline([\n        rect.topLeft(),\n        rect.topRight(),\n        rect.bottomRight(),\n        rect.bottomLeft(),\n        rect.topLeft(),\n    ]);\n};\n\nPolyline.prototype = {\n\n    type: types.Polyline,\n\n    bbox: function() {\n\n        var x1 = Infinity;\n        var x2 = -Infinity;\n        var y1 = Infinity;\n        var y2 = -Infinity;\n\n        var points = this.points;\n        var numPoints = points.length;\n        if (numPoints === 0) return null; // if points array is empty\n\n        for (var i = 0; i < numPoints; i++) {\n\n            var point = points[i];\n            var x = point.x;\n            var y = point.y;\n\n            if (x < x1) x1 = x;\n            if (x > x2) x2 = x;\n            if (y < y1) y1 = y;\n            if (y > y2) y2 = y;\n        }\n\n        return new Rect(x1, y1, x2 - x1, y2 - y1);\n    },\n\n    clone: function() {\n        return new Polyline(clonePoints(this.points));\n    },\n\n    closestPoint: function(p) {\n\n        var cpLength = this.closestPointLength(p);\n\n        return this.pointAtLength(cpLength);\n    },\n\n    closestPointLength: function(p) {\n\n        var points = this.lengthPoints();\n        var numPoints = points.length;\n        if (numPoints === 0) return 0; // if points array is empty\n        if (numPoints === 1) return 0; // if there is only one point\n\n        var cpLength;\n        var minSqrDistance = Infinity;\n        var length = 0;\n        var n = numPoints - 1;\n        for (var i = 0; i < n; i++) {\n\n            var line = new Line(points[i], points[i + 1]);\n            var lineLength = line.length();\n\n            var cpNormalizedLength = line.closestPointNormalizedLength(p);\n            var cp = line.pointAt(cpNormalizedLength);\n\n            var sqrDistance = cp.squaredDistance(p);\n            if (sqrDistance < minSqrDistance) {\n                minSqrDistance = sqrDistance;\n                cpLength = length + (cpNormalizedLength * lineLength);\n            }\n\n            length += lineLength;\n        }\n\n        return cpLength;\n    },\n\n    closestPointNormalizedLength: function(p) {\n\n        var cpLength = this.closestPointLength(p);\n        if (cpLength === 0) return 0; // shortcut\n\n        var length = this.length();\n        if (length === 0) return 0; // prevents division by zero\n\n        return cpLength / length;\n    },\n\n    closestPointTangent: function(p) {\n\n        var cpLength = this.closestPointLength(p);\n\n        return this.tangentAtLength(cpLength);\n    },\n\n    // Returns `true` if the area surrounded by the polyline contains the point `p`.\n    // Implements the even-odd SVG algorithm (self-intersections are \"outside\").\n    // (Uses horizontal rays to the right of `p` to look for intersections.)\n    // Closes open polylines (always imagines a final closing segment).\n    containsPoint: function(p) {\n\n        var points = this.points;\n        var numPoints = points.length;\n        if (numPoints === 0) return false; // shortcut (this polyline has no points)\n\n        var x = p.x;\n        var y = p.y;\n\n        // initialize a final closing segment by creating one from last-first points on polyline\n        var startIndex = numPoints - 1; // start of current polyline segment\n        var endIndex = 0; // end of current polyline segment\n        var numIntersections = 0;\n        var segment = new Line();\n        var ray = new Line();\n        var rayEnd = new Point();\n        for (; endIndex < numPoints; endIndex++) {\n            var start = points[startIndex];\n            var end = points[endIndex];\n            if (p.equals(start)) return true; // shortcut (`p` is a point on polyline)\n            // current polyline segment\n            segment.start = start;\n            segment.end = end;\n            if (segment.containsPoint(p)) return true; // shortcut (`p` lies on a polyline segment)\n\n            // do we have an intersection?\n            if (((y <= start.y) && (y > end.y)) || ((y > start.y) && (y <= end.y))) {\n                // this conditional branch IS NOT entered when `segment` is collinear/coincident with `ray`\n                // (when `y === start.y === end.y`)\n                // this conditional branch IS entered when `segment` touches `ray` at only one point\n                // (e.g. when `y === start.y !== end.y`)\n                // since this branch is entered again for the following segment, the two touches cancel out\n\n                var xDifference = (((start.x - x) > (end.x - x)) ? (start.x - x) : (end.x - x));\n                if (xDifference >= 0) {\n                    // segment lies at least partially to the right of `p`\n                    rayEnd.x = x + xDifference;\n                    rayEnd.y = y; // right\n                    ray.start = p;\n                    ray.end = rayEnd;\n                    if (segment.intersect(ray)) {\n                        // an intersection was detected to the right of `p`\n                        numIntersections++;\n                    }\n                } // else: `segment` lies completely to the left of `p` (i.e. no intersection to the right)\n            }\n\n            // move to check the next polyline segment\n            startIndex = endIndex;\n        }\n\n        // returns `true` for odd numbers of intersections (even-odd algorithm)\n        return ((numIntersections % 2) === 1);\n    },\n\n    close: function() {\n        const { start, end, points } = this;\n        if (start && end && !start.equals(end)) {\n            points.push(start.clone());\n        }\n        return this;\n    },\n\n    lengthPoints: function() {\n        return this.points;\n    },\n\n    convexHull: function() {\n        return new Polyline(convexHull(this.points));\n    },\n\n    // Checks whether two polylines are exactly the same.\n    // If `p` is undefined or null, returns false.\n    equals: function(p) {\n\n        if (!p) return false;\n\n        var points = this.points;\n        var otherPoints = p.points;\n\n        var numPoints = points.length;\n        if (otherPoints.length !== numPoints) return false; // if the two polylines have different number of points, they cannot be equal\n\n        for (var i = 0; i < numPoints; i++) {\n\n            var point = points[i];\n            var otherPoint = p.points[i];\n\n            // as soon as an inequality is found in points, return false\n            if (!point.equals(otherPoint)) return false;\n        }\n\n        // if no inequality found in points, return true\n        return true;\n    },\n\n    intersectionWithLine: function(l) {\n        var line = new Line(l);\n        var intersections = [];\n        var points = this.lengthPoints();\n        var l2 = new Line();\n        for (var i = 0, n = points.length - 1; i < n; i++) {\n            l2.start = points[i];\n            l2.end = points[i + 1];\n            var int = line.intersectionWithLine(l2);\n            if (int) intersections.push(int[0]);\n        }\n        return (intersections.length > 0) ? intersections : null;\n    },\n\n    isDifferentiable: function() {\n\n        var points = this.points;\n        var numPoints = points.length;\n        if (numPoints === 0) return false;\n\n        var line = new Line();\n        var n = numPoints - 1;\n        for (var i = 0; i < n; i++) {\n            line.start = points[i];\n            line.end = points[i + 1];\n            // as soon as a differentiable line is found between two points, return true\n            if (line.isDifferentiable()) return true;\n        }\n\n        // if no differentiable line is found between pairs of points, return false\n        return false;\n    },\n\n    length: function() {\n\n        var points = this.lengthPoints();\n        var numPoints = points.length;\n        if (numPoints === 0) return 0; // if points array is empty\n\n        var length = 0;\n        var n = numPoints - 1;\n        for (var i = 0; i < n; i++) {\n            length += points[i].distance(points[i + 1]);\n        }\n\n        return length;\n    },\n\n    pointAt: function(ratio) {\n\n        var points = this.lengthPoints();\n        var numPoints = points.length;\n        if (numPoints === 0) return null; // if points array is empty\n        if (numPoints === 1) return points[0].clone(); // if there is only one point\n\n        if (ratio <= 0) return points[0].clone();\n        if (ratio >= 1) return points[numPoints - 1].clone();\n\n        var polylineLength = this.length();\n        var length = polylineLength * ratio;\n\n        return this.pointAtLength(length);\n    },\n\n    pointAtLength: function(length) {\n\n        var points = this.lengthPoints();\n        var numPoints = points.length;\n        if (numPoints === 0) return null; // if points array is empty\n        if (numPoints === 1) return points[0].clone(); // if there is only one point\n\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false; // negative lengths mean start calculation from end point\n            length = -length; // absolute value\n        }\n\n        var l = 0;\n        var n = numPoints - 1;\n        for (var i = 0; i < n; i++) {\n            var index = (fromStart ? i : (n - 1 - i));\n\n            var a = points[index];\n            var b = points[index + 1];\n            var line = new Line(a, b);\n            var d = a.distance(b);\n\n            if (length <= (l + d)) {\n                return line.pointAtLength((fromStart ? 1 : -1) * (length - l));\n            }\n\n            l += d;\n        }\n\n        // if length requested is higher than the length of the polyline, return last endpoint\n        var lastPoint = (fromStart ? points[numPoints - 1] : points[0]);\n        return lastPoint.clone();\n    },\n\n    round: function(precision) {\n\n        var points = this.points;\n        var numPoints = points.length;\n\n        for (var i = 0; i < numPoints; i++) {\n            points[i].round(precision);\n        }\n\n        return this;\n    },\n\n    scale: function(sx, sy, origin) {\n\n        var points = this.points;\n        var numPoints = points.length;\n\n        for (var i = 0; i < numPoints; i++) {\n            points[i].scale(sx, sy, origin);\n        }\n\n        return this;\n    },\n\n    simplify: function(opt = {}) {\n\n        const points = this.points;\n        if (points.length < 3) return this; // we need at least 3 points\n\n        // TODO: we may also accept startIndex and endIndex to specify where to start and end simplification\n        const threshold = opt.threshold || 0; // = max distance of middle point from chord to be simplified\n\n        // start at the beginning of the polyline and go forward\n        let currentIndex = 0;\n        // we need at least one intermediate point (3 points) in every iteration\n        // as soon as that stops being true, we know we reached the end of the polyline\n        while (points[currentIndex + 2]) {\n            const firstIndex = currentIndex;\n            const middleIndex = (currentIndex + 1);\n            const lastIndex = (currentIndex + 2);\n\n            const firstPoint = points[firstIndex];\n            const middlePoint = points[middleIndex];\n            const lastPoint = points[lastIndex];\n\n            const chord = new Line(firstPoint, lastPoint); // = connection between first and last point\n            const closestPoint = chord.closestPoint(middlePoint); // = closest point on chord from middle point\n            const closestPointDistance = closestPoint.distance(middlePoint);\n            if (closestPointDistance <= threshold) {\n                // middle point is close enough to the chord = simplify\n                // 1) remove middle point:\n                points.splice(middleIndex, 1);\n                // 2) in next iteration, investigate the newly-created triplet of points\n                //    - do not change `currentIndex`\n                //    = (first point stays, point after removed point becomes middle point)\n            } else {\n                // middle point is far from the chord\n                // 1) preserve middle point\n                // 2) in next iteration, move `currentIndex` by one step:\n                currentIndex += 1;\n                //    = (point after first point becomes first point)\n            }\n        }\n\n        // `points` array was modified in-place\n        return this;\n    },\n\n    tangentAt: function(ratio) {\n\n        var points = this.lengthPoints();\n        var numPoints = points.length;\n        if (numPoints === 0) return null; // if points array is empty\n        if (numPoints === 1) return null; // if there is only one point\n\n        if (ratio < 0) ratio = 0;\n        if (ratio > 1) ratio = 1;\n\n        var polylineLength = this.length();\n        var length = polylineLength * ratio;\n\n        return this.tangentAtLength(length);\n    },\n\n    tangentAtLength: function(length) {\n\n        var points = this.lengthPoints();\n        var numPoints = points.length;\n        if (numPoints === 0) return null; // if points array is empty\n        if (numPoints === 1) return null; // if there is only one point\n\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false; // negative lengths mean start calculation from end point\n            length = -length; // absolute value\n        }\n\n        var lastValidLine; // differentiable (with a tangent)\n        var l = 0; // length so far\n        var n = numPoints - 1;\n        for (var i = 0; i < n; i++) {\n            var index = (fromStart ? i : (n - 1 - i));\n\n            var a = points[index];\n            var b = points[index + 1];\n            var line = new Line(a, b);\n            var d = a.distance(b);\n\n            if (line.isDifferentiable()) { // has a tangent line (line length is not 0)\n                if (length <= (l + d)) {\n                    return line.tangentAtLength((fromStart ? 1 : -1) * (length - l));\n                }\n\n                lastValidLine = line;\n            }\n\n            l += d;\n        }\n\n        // if length requested is higher than the length of the polyline, return last valid endpoint\n        if (lastValidLine) {\n            var ratio = (fromStart ? 1 : 0);\n            return lastValidLine.tangentAt(ratio);\n        }\n\n        // if no valid line, return null\n        return null;\n    },\n\n    toString: function() {\n\n        return this.points + '';\n    },\n\n    translate: function(tx, ty) {\n\n        var points = this.points;\n        var numPoints = points.length;\n\n        for (var i = 0; i < numPoints; i++) {\n            points[i].translate(tx, ty);\n        }\n\n        return this;\n    },\n\n    // Return svgString that can be used to recreate this line.\n    serialize: function() {\n\n        var points = this.points;\n        var numPoints = points.length;\n        if (numPoints === 0) return ''; // if points array is empty\n\n        var output = '';\n        for (var i = 0; i < numPoints; i++) {\n\n            var point = points[i];\n            output += point.x + ',' + point.y + ' ';\n        }\n\n        return output.trim();\n    }\n};\n\nObject.defineProperty(Polyline.prototype, 'start', {\n    // Getter for the first point of the polyline.\n\n    configurable: true,\n\n    enumerable: true,\n\n    get: function() {\n\n        var points = this.points;\n        var numPoints = points.length;\n        if (numPoints === 0) return null; // if points array is empty\n\n        return this.points[0];\n    },\n});\n\nObject.defineProperty(Polyline.prototype, 'end', {\n    // Getter for the last point of the polyline.\n\n    configurable: true,\n\n    enumerable: true,\n\n    get: function() {\n\n        var points = this.points;\n        var numPoints = points.length;\n        if (numPoints === 0) return null; // if points array is empty\n\n        return this.points[numPoints - 1];\n    },\n});\n","import { Point } from './point.mjs';\nimport { Rect } from './rect.mjs';\nimport { Line } from './line.mjs';\nimport { Polyline } from './polyline.mjs';\nimport { types } from './types.mjs';\n\nconst {\n    abs,\n    sqrt,\n    min,\n    max,\n    pow\n} = Math;\n\nexport const Curve = function(p1, p2, p3, p4) {\n\n    if (!(this instanceof Curve)) {\n        return new Curve(p1, p2, p3, p4);\n    }\n\n    if (p1 instanceof Curve) {\n        return new Curve(p1.start, p1.controlPoint1, p1.controlPoint2, p1.end);\n    }\n\n    this.start = new Point(p1);\n    this.controlPoint1 = new Point(p2);\n    this.controlPoint2 = new Point(p3);\n    this.end = new Point(p4);\n};\n\n// Curve passing through points.\n// Ported from C# implementation by Oleg V. Polikarpotchkin and Peter Lee (http://www.codeproject.com/KB/graphics/BezierSpline.aspx).\n// @param {array} points Array of points through which the smooth line will go.\n// @return {array} curves.\nCurve.throughPoints = (function() {\n\n    // Get open-ended Bezier Spline Control Points.\n    // @param knots Input Knot Bezier spline points (At least two points!).\n    // @param firstControlPoints Output First Control points. Array of knots.length - 1 length.\n    // @param secondControlPoints Output Second Control points. Array of knots.length - 1 length.\n    function getCurveControlPoints(knots) {\n\n        var firstControlPoints = [];\n        var secondControlPoints = [];\n        var n = knots.length - 1;\n        var i;\n\n        // Special case: Bezier curve should be a straight line.\n        if (n == 1) {\n            // 3P1 = 2P0 + P3\n            firstControlPoints[0] = new Point(\n                (2 * knots[0].x + knots[1].x) / 3,\n                (2 * knots[0].y + knots[1].y) / 3\n            );\n\n            // P2 = 2P1  P0\n            secondControlPoints[0] = new Point(\n                2 * firstControlPoints[0].x - knots[0].x,\n                2 * firstControlPoints[0].y - knots[0].y\n            );\n\n            return [firstControlPoints, secondControlPoints];\n        }\n\n        // Calculate first Bezier control points.\n        // Right hand side vector.\n        var rhs = [];\n\n        // Set right hand side X values.\n        for (i = 1; i < n - 1; i++) {\n            rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;\n        }\n\n        rhs[0] = knots[0].x + 2 * knots[1].x;\n        rhs[n - 1] = (8 * knots[n - 1].x + knots[n].x) / 2.0;\n\n        // Get first control points X-values.\n        var x = getFirstControlPoints(rhs);\n\n        // Set right hand side Y values.\n        for (i = 1; i < n - 1; ++i) {\n            rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;\n        }\n\n        rhs[0] = knots[0].y + 2 * knots[1].y;\n        rhs[n - 1] = (8 * knots[n - 1].y + knots[n].y) / 2.0;\n\n        // Get first control points Y-values.\n        var y = getFirstControlPoints(rhs);\n\n        // Fill output arrays.\n        for (i = 0; i < n; i++) {\n            // First control point.\n            firstControlPoints.push(new Point(x[i], y[i]));\n\n            // Second control point.\n            if (i < n - 1) {\n                secondControlPoints.push(new Point(\n                    2 * knots [i + 1].x - x[i + 1],\n                    2 * knots[i + 1].y - y[i + 1]\n                ));\n\n            } else {\n                secondControlPoints.push(new Point(\n                    (knots[n].x + x[n - 1]) / 2,\n                    (knots[n].y + y[n - 1]) / 2\n                ));\n            }\n        }\n\n        return [firstControlPoints, secondControlPoints];\n    }\n\n    // Solves a tridiagonal system for one of coordinates (x or y) of first Bezier control points.\n    // @param rhs Right hand side vector.\n    // @return Solution vector.\n    function getFirstControlPoints(rhs) {\n\n        var n = rhs.length;\n        // `x` is a solution vector.\n        var x = [];\n        var tmp = [];\n        var b = 2.0;\n\n        x[0] = rhs[0] / b;\n\n        // Decomposition and forward substitution.\n        for (var i = 1; i < n; i++) {\n            tmp[i] = 1 / b;\n            b = (i < n - 1 ? 4.0 : 3.5) - tmp[i];\n            x[i] = (rhs[i] - x[i - 1]) / b;\n        }\n\n        for (i = 1; i < n; i++) {\n            // Backsubstitution.\n            x[n - i - 1] -= tmp[n - i] * x[n - i];\n        }\n\n        return x;\n    }\n\n    return function(points) {\n\n        if (!points || (Array.isArray(points) && points.length < 2)) {\n            throw new Error('At least 2 points are required');\n        }\n\n        var controlPoints = getCurveControlPoints(points);\n\n        var curves = [];\n        var n = controlPoints[0].length;\n        for (var i = 0; i < n; i++) {\n\n            var controlPoint1 = new Point(controlPoints[0][i].x, controlPoints[0][i].y);\n            var controlPoint2 = new Point(controlPoints[1][i].x, controlPoints[1][i].y);\n\n            curves.push(new Curve(points[i], controlPoint1, controlPoint2, points[i + 1]));\n        }\n\n        return curves;\n    };\n})();\n\nCurve.prototype = {\n\n    type: types.Curve,\n\n    // Returns a bbox that tightly envelops the curve.\n    bbox: function() {\n\n        var start = this.start;\n        var controlPoint1 = this.controlPoint1;\n        var controlPoint2 = this.controlPoint2;\n        var end = this.end;\n\n        var x0 = start.x;\n        var y0 = start.y;\n        var x1 = controlPoint1.x;\n        var y1 = controlPoint1.y;\n        var x2 = controlPoint2.x;\n        var y2 = controlPoint2.y;\n        var x3 = end.x;\n        var y3 = end.y;\n\n        var points = new Array(); // local extremes\n        var tvalues = new Array(); // t values of local extremes\n        var bounds = [new Array(), new Array()];\n\n        var a, b, c, t;\n        var t1, t2;\n        var b2ac, sqrtb2ac;\n\n        for (var i = 0; i < 2; ++i) {\n\n            if (i === 0) {\n                b = 6 * x0 - 12 * x1 + 6 * x2;\n                a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n                c = 3 * x1 - 3 * x0;\n\n            } else {\n                b = 6 * y0 - 12 * y1 + 6 * y2;\n                a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n                c = 3 * y1 - 3 * y0;\n            }\n\n            if (abs(a) < 1e-12) { // Numerical robustness\n                if (abs(b) < 1e-12) { // Numerical robustness\n                    continue;\n                }\n\n                t = -c / b;\n                if ((0 < t) && (t < 1)) tvalues.push(t);\n\n                continue;\n            }\n\n            b2ac = b * b - 4 * c * a;\n            sqrtb2ac = sqrt(b2ac);\n\n            if (b2ac < 0) continue;\n\n            t1 = (-b + sqrtb2ac) / (2 * a);\n            if ((0 < t1) && (t1 < 1)) tvalues.push(t1);\n\n            t2 = (-b - sqrtb2ac) / (2 * a);\n            if ((0 < t2) && (t2 < 1)) tvalues.push(t2);\n        }\n\n        var j = tvalues.length;\n        var jlen = j;\n        var mt;\n        var x, y;\n\n        while (j--) {\n            t = tvalues[j];\n            mt = 1 - t;\n\n            x = (mt * mt * mt * x0) + (3 * mt * mt * t * x1) + (3 * mt * t * t * x2) + (t * t * t * x3);\n            bounds[0][j] = x;\n\n            y = (mt * mt * mt * y0) + (3 * mt * mt * t * y1) + (3 * mt * t * t * y2) + (t * t * t * y3);\n            bounds[1][j] = y;\n\n            points[j] = { X: x, Y: y };\n        }\n\n        tvalues[jlen] = 0;\n        tvalues[jlen + 1] = 1;\n\n        points[jlen] = { X: x0, Y: y0 };\n        points[jlen + 1] = { X: x3, Y: y3 };\n\n        bounds[0][jlen] = x0;\n        bounds[1][jlen] = y0;\n\n        bounds[0][jlen + 1] = x3;\n        bounds[1][jlen + 1] = y3;\n\n        tvalues.length = jlen + 2;\n        bounds[0].length = jlen + 2;\n        bounds[1].length = jlen + 2;\n        points.length = jlen + 2;\n\n        var left = min.apply(null, bounds[0]);\n        var top = min.apply(null, bounds[1]);\n        var right = max.apply(null, bounds[0]);\n        var bottom = max.apply(null, bounds[1]);\n\n        return new Rect(left, top, (right - left), (bottom - top));\n    },\n\n    clone: function() {\n\n        return new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    },\n\n    // Returns the point on the curve closest to point `p`\n    closestPoint: function(p, opt) {\n\n        return this.pointAtT(this.closestPointT(p, opt));\n    },\n\n    closestPointLength: function(p, opt) {\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var subdivisions = (opt.subdivisions === undefined) ? this.getSubdivisions({ precision: precision }) : opt.subdivisions;\n        var localOpt = { precision: precision, subdivisions: subdivisions };\n\n        return this.lengthAtT(this.closestPointT(p, localOpt), localOpt);\n    },\n\n    closestPointNormalizedLength: function(p, opt) {\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var subdivisions = (opt.subdivisions === undefined) ? this.getSubdivisions({ precision: precision }) : opt.subdivisions;\n        var localOpt = { precision: precision, subdivisions: subdivisions };\n\n        var cpLength = this.closestPointLength(p, localOpt);\n        if (!cpLength) return 0;\n\n        var length = this.length(localOpt);\n        if (length === 0) return 0;\n\n        return cpLength / length;\n    },\n\n    // Returns `t` of the point on the curve closest to point `p`\n    closestPointT: function(p, opt) {\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var subdivisions = (opt.subdivisions === undefined) ? this.getSubdivisions({ precision: precision }) : opt.subdivisions;\n        // does not use localOpt\n\n        // identify the subdivision that contains the point:\n        var investigatedSubdivision;\n        var investigatedSubdivisionStartT; // assume that subdivisions are evenly spaced\n        var investigatedSubdivisionEndT;\n        var distFromStart; // distance of point from start of baseline\n        var distFromEnd; // distance of point from end of baseline\n        var chordLength; // distance between start and end of the subdivision\n        var minSumDist; // lowest observed sum of the two distances\n        var n = subdivisions.length;\n        var subdivisionSize = (n ? (1 / n) : 0);\n        for (var i = 0; i < n; i++) {\n\n            var currentSubdivision = subdivisions[i];\n\n            var startDist = currentSubdivision.start.distance(p);\n            var endDist = currentSubdivision.end.distance(p);\n            var sumDist = startDist + endDist;\n\n            // check that the point is closest to current subdivision and not any other\n            if (!minSumDist || (sumDist < minSumDist)) {\n                investigatedSubdivision = currentSubdivision;\n\n                investigatedSubdivisionStartT = i * subdivisionSize;\n                investigatedSubdivisionEndT = (i + 1) * subdivisionSize;\n\n                distFromStart = startDist;\n                distFromEnd = endDist;\n\n                chordLength = currentSubdivision.start.distance(currentSubdivision.end);\n\n                minSumDist = sumDist;\n            }\n        }\n\n        var precisionRatio = pow(10, -precision);\n\n        // recursively divide investigated subdivision:\n        // until distance between baselinePoint and closest path endpoint is within 10^(-precision)\n        // then return the closest endpoint of that final subdivision\n        while (true) {\n\n            // check if we have reached at least one required observed precision\n            // - calculated as: the difference in distances from point to start and end divided by the distance\n            // - note that this function is not monotonic = it doesn't converge stably but has \"teeth\"\n            // - the function decreases while one of the endpoints is fixed but \"jumps\" whenever we switch\n            // - this criterion works well for points lying far away from the curve\n            var startPrecisionRatio = (distFromStart ? (abs(distFromStart - distFromEnd) / distFromStart) : 0);\n            var endPrecisionRatio = (distFromEnd ? (abs(distFromStart - distFromEnd) / distFromEnd) : 0);\n            var hasRequiredPrecision = ((startPrecisionRatio < precisionRatio) || (endPrecisionRatio < precisionRatio));\n\n            // check if we have reached at least one required minimal distance\n            // - calculated as: the subdivision chord length multiplied by precisionRatio\n            // - calculation is relative so it will work for arbitrarily large/small curves and their subdivisions\n            // - this is a backup criterion that works well for points lying \"almost at\" the curve\n            var hasMinimalStartDistance = (distFromStart ? (distFromStart < (chordLength * precisionRatio)) : true);\n            var hasMinimalEndDistance = (distFromEnd ? (distFromEnd < (chordLength * precisionRatio)) : true);\n            var hasMinimalDistance = (hasMinimalStartDistance || hasMinimalEndDistance);\n\n            // do we stop now?\n            if (hasRequiredPrecision || hasMinimalDistance) {\n                return ((distFromStart <= distFromEnd) ? investigatedSubdivisionStartT : investigatedSubdivisionEndT);\n            }\n\n            // otherwise, set up for next iteration\n            var divided = investigatedSubdivision.divide(0.5);\n            subdivisionSize /= 2;\n\n            var startDist1 = divided[0].start.distance(p);\n            var endDist1 = divided[0].end.distance(p);\n            var sumDist1 = startDist1 + endDist1;\n\n            var startDist2 = divided[1].start.distance(p);\n            var endDist2 = divided[1].end.distance(p);\n            var sumDist2 = startDist2 + endDist2;\n\n            if (sumDist1 <= sumDist2) {\n                investigatedSubdivision = divided[0];\n\n                investigatedSubdivisionEndT -= subdivisionSize; // subdivisionSize was already halved\n\n                distFromStart = startDist1;\n                distFromEnd = endDist1;\n\n            } else {\n                investigatedSubdivision = divided[1];\n\n                investigatedSubdivisionStartT += subdivisionSize; // subdivisionSize was already halved\n\n                distFromStart = startDist2;\n                distFromEnd = endDist2;\n            }\n        }\n    },\n\n    closestPointTangent: function(p, opt) {\n\n        return this.tangentAtT(this.closestPointT(p, opt));\n    },\n\n    // Returns `true` if the area surrounded by the curve contains the point `p`.\n    // Implements the even-odd algorithm (self-intersections are \"outside\").\n    // Closes open curves (always imagines a closing segment).\n    // Precision may be adjusted by passing an `opt` object.\n    containsPoint: function(p, opt) {\n\n        var polyline = this.toPolyline(opt);\n        return polyline.containsPoint(p);\n    },\n\n    // Divides the curve into two at requested `ratio` between 0 and 1 with precision better than `opt.precision`; optionally using `opt.subdivisions` provided.\n    // For a function that uses `t`, use Curve.divideAtT().\n    divideAt: function(ratio, opt) {\n\n        if (ratio <= 0) return this.divideAtT(0);\n        if (ratio >= 1) return this.divideAtT(1);\n\n        var t = this.tAt(ratio, opt);\n\n        return this.divideAtT(t);\n    },\n\n    // Divides the curve into two at requested `length` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n    divideAtLength: function(length, opt) {\n\n        var t = this.tAtLength(length, opt);\n\n        return this.divideAtT(t);\n    },\n\n    // Divides the curve into two at point defined by `t` between 0 and 1.\n    // Using de Casteljau's algorithm (http://math.stackexchange.com/a/317867).\n    // Additional resource: https://pomax.github.io/bezierinfo/#decasteljau\n    divideAtT: function(t) {\n\n        var start = this.start;\n        var controlPoint1 = this.controlPoint1;\n        var controlPoint2 = this.controlPoint2;\n        var end = this.end;\n\n        // shortcuts for `t` values that are out of range\n        if (t <= 0) {\n            return [\n                new Curve(start, start, start, start),\n                new Curve(start, controlPoint1, controlPoint2, end)\n            ];\n        }\n\n        if (t >= 1) {\n            return [\n                new Curve(start, controlPoint1, controlPoint2, end),\n                new Curve(end, end, end, end)\n            ];\n        }\n\n        var dividerPoints = this.getSkeletonPoints(t);\n\n        var startControl1 = dividerPoints.startControlPoint1;\n        var startControl2 = dividerPoints.startControlPoint2;\n        var divider = dividerPoints.divider;\n        var dividerControl1 = dividerPoints.dividerControlPoint1;\n        var dividerControl2 = dividerPoints.dividerControlPoint2;\n\n        // return array with two new curves\n        return [\n            new Curve(start, startControl1, startControl2, divider),\n            new Curve(divider, dividerControl1, dividerControl2, end)\n        ];\n    },\n\n    // Returns the distance between the curve's start and end points.\n    endpointDistance: function() {\n\n        return this.start.distance(this.end);\n    },\n\n    // Checks whether two curves are exactly the same.\n    equals: function(c) {\n\n        return !!c &&\n            this.start.x === c.start.x &&\n            this.start.y === c.start.y &&\n            this.controlPoint1.x === c.controlPoint1.x &&\n            this.controlPoint1.y === c.controlPoint1.y &&\n            this.controlPoint2.x === c.controlPoint2.x &&\n            this.controlPoint2.y === c.controlPoint2.y &&\n            this.end.x === c.end.x &&\n            this.end.y === c.end.y;\n    },\n\n    // Returns five helper points necessary for curve division.\n    getSkeletonPoints: function(t) {\n\n        var start = this.start;\n        var control1 = this.controlPoint1;\n        var control2 = this.controlPoint2;\n        var end = this.end;\n\n        // shortcuts for `t` values that are out of range\n        if (t <= 0) {\n            return {\n                startControlPoint1: start.clone(),\n                startControlPoint2: start.clone(),\n                divider: start.clone(),\n                dividerControlPoint1: control1.clone(),\n                dividerControlPoint2: control2.clone()\n            };\n        }\n\n        if (t >= 1) {\n            return {\n                startControlPoint1: control1.clone(),\n                startControlPoint2: control2.clone(),\n                divider: end.clone(),\n                dividerControlPoint1: end.clone(),\n                dividerControlPoint2: end.clone()\n            };\n        }\n\n        var midpoint1 = (new Line(start, control1)).pointAt(t);\n        var midpoint2 = (new Line(control1, control2)).pointAt(t);\n        var midpoint3 = (new Line(control2, end)).pointAt(t);\n\n        var subControl1 = (new Line(midpoint1, midpoint2)).pointAt(t);\n        var subControl2 = (new Line(midpoint2, midpoint3)).pointAt(t);\n\n        var divider = (new Line(subControl1, subControl2)).pointAt(t);\n\n        var output = {\n            startControlPoint1: midpoint1,\n            startControlPoint2: subControl1,\n            divider: divider,\n            dividerControlPoint1: subControl2,\n            dividerControlPoint2: midpoint3\n        };\n\n        return output;\n    },\n\n    // Returns a list of curves whose flattened length is better than `opt.precision`.\n    // That is, observed difference in length between recursions is less than 10^(-3) = 0.001 = 0.1%\n    // (Observed difference is not real precision, but close enough as long as special cases are covered)\n    // As a rule of thumb, increasing `precision` by 1 requires 2 more iterations (= levels of division operations)\n    // - Precision 0 (endpointDistance) - 0 iterations => total of 2^0 - 1 = 0 operations (1 subdivision)\n    // - Precision 1 (<10% error) - 2 iterations => total of 2^2 - 1 = 3 operations (4 subdivisions)\n    // - Precision 2 (<1% error) - 4 iterations => total of 2^4 - 1 = 15 operations requires 4 division operations on all elements (15 operations total) (16 subdivisions)\n    // - Precision 3 (<0.1% error) - 6 iterations => total of 2^6 - 1 = 63 operations - acceptable when drawing (64 subdivisions)\n    // - Precision 4 (<0.01% error) - 8 iterations => total of 2^8 - 1 = 255 operations - high resolution, can be used to interpolate `t` (256 subdivisions)\n    // (Variation of 1 recursion worse or better is possible depending on the curve, doubling/halving the number of operations accordingly)\n    getSubdivisions: function(opt) {\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        // not using opt.subdivisions\n        // not using localOpt\n\n        var start = this.start;\n        var control1 = this.controlPoint1;\n        var control2 = this.controlPoint2;\n        var end = this.end;\n\n        var subdivisions = [new Curve(start, control1, control2, end)];\n        if (precision === 0) return subdivisions;\n\n        // special case #1: point-like curves\n        // - no need to calculate subdivisions, they would all be identical\n        var isPoint = !this.isDifferentiable();\n        if (isPoint) return subdivisions;\n\n        var previousLength = this.endpointDistance();\n\n        var precisionRatio = pow(10, -precision);\n\n        // special case #2: sine-like curves may have the same observed length in iteration 0 and 1 - skip iteration 1\n        // - not a problem for further iterations because cubic curves cannot have more than two local extrema\n        // - (i.e. cubic curves cannot intersect the baseline more than once)\n        // - therefore starting from iteration = 2 ensures that subsequent iterations do not produce sampling with equal length\n        // - (unless it's a straight-line curve, see below)\n        var minIterations = 2; // = 2*1\n\n        // special case #3: straight-line curves have the same observed length in all iterations\n        // - this causes observed precision ratio to always be 0 (= lower than `precisionRatio`, which is our exit condition)\n        // - we enforce the expected number of iterations = 2 * precision\n        var isLine = ((control1.cross(start, end) === 0) && (control2.cross(start, end) === 0));\n        if (isLine) {\n            minIterations = (2 * precision);\n        }\n\n        // recursively divide curve at `t = 0.5`\n        // until we reach `minIterations`\n        // and until the difference between observed length at subsequent iterations is lower than `precision`\n        var iteration = 0;\n        while (true) {\n            iteration += 1;\n\n            // divide all subdivisions\n            var newSubdivisions = [];\n            var numSubdivisions = subdivisions.length;\n            for (var i = 0; i < numSubdivisions; i++) {\n\n                var currentSubdivision = subdivisions[i];\n                var divided = currentSubdivision.divide(0.5); // dividing at t = 0.5 (not at middle length!)\n                newSubdivisions.push(divided[0], divided[1]);\n            }\n\n            // measure new length\n            var length = 0;\n            var numNewSubdivisions = newSubdivisions.length;\n            for (var j = 0; j < numNewSubdivisions; j++) {\n\n                var currentNewSubdivision = newSubdivisions[j];\n                length += currentNewSubdivision.endpointDistance();\n            }\n\n            // check if we have reached minimum number of iterations\n            if (iteration >= minIterations) {\n\n                // check if we have reached required observed precision\n                var observedPrecisionRatio = ((length !== 0) ? ((length - previousLength) / length) : 0);\n                if (observedPrecisionRatio < precisionRatio) {\n                    return newSubdivisions;\n                }\n            }\n\n            // otherwise, set up for next iteration\n            subdivisions = newSubdivisions;\n            previousLength = length;\n        }\n    },\n\n    isDifferentiable: function() {\n\n        var start = this.start;\n        var control1 = this.controlPoint1;\n        var control2 = this.controlPoint2;\n        var end = this.end;\n\n        return !(start.equals(control1) && control1.equals(control2) && control2.equals(end));\n    },\n\n    // Returns flattened length of the curve with precision better than `opt.precision`; or using `opt.subdivisions` provided.\n    length: function(opt) {\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision; // opt.precision only used in getSubdivisions() call\n        var subdivisions = (opt.subdivisions === undefined) ? this.getSubdivisions({ precision: precision }) : opt.subdivisions;\n        // not using localOpt\n\n        var length = 0;\n        var n = subdivisions.length;\n        for (var i = 0; i < n; i++) {\n\n            var currentSubdivision = subdivisions[i];\n            length += currentSubdivision.endpointDistance();\n        }\n\n        return length;\n    },\n\n    // Returns distance along the curve up to `t` with precision better than requested `opt.precision`. (Not using `opt.subdivisions`.)\n    lengthAtT: function(t, opt) {\n\n        if (t <= 0) return 0;\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        // not using opt.subdivisions\n        // not using localOpt\n\n        var subCurve = this.divide(t)[0];\n        var subCurveLength = subCurve.length({ precision: precision });\n\n        return subCurveLength;\n    },\n\n    // Returns point at requested `ratio` between 0 and 1 with precision better than `opt.precision`; optionally using `opt.subdivisions` provided.\n    // Mirrors Line.pointAt() function.\n    // For a function that tracks `t`, use Curve.pointAtT().\n    pointAt: function(ratio, opt) {\n\n        if (ratio <= 0) return this.start.clone();\n        if (ratio >= 1) return this.end.clone();\n\n        var t = this.tAt(ratio, opt);\n\n        return this.pointAtT(t);\n    },\n\n    // Returns point at requested `length` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n    pointAtLength: function(length, opt) {\n\n        var t = this.tAtLength(length, opt);\n\n        return this.pointAtT(t);\n    },\n\n    // Returns the point at provided `t` between 0 and 1.\n    // `t` does not track distance along curve as it does in Line objects.\n    // Non-linear relationship, speeds up and slows down as curve warps!\n    // For linear length-based solution, use Curve.pointAt().\n    pointAtT: function(t) {\n\n        if (t <= 0) return this.start.clone();\n        if (t >= 1) return this.end.clone();\n\n        return this.getSkeletonPoints(t).divider;\n    },\n\n    // Default precision\n    PRECISION: 3,\n\n    round: function(precision) {\n\n        this.start.round(precision);\n        this.controlPoint1.round(precision);\n        this.controlPoint2.round(precision);\n        this.end.round(precision);\n        return this;\n    },\n\n    scale: function(sx, sy, origin) {\n\n        this.start.scale(sx, sy, origin);\n        this.controlPoint1.scale(sx, sy, origin);\n        this.controlPoint2.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    },\n\n    // Returns a tangent line at requested `ratio` with precision better than requested `opt.precision`; or using `opt.subdivisions` provided.\n    tangentAt: function(ratio, opt) {\n\n        if (!this.isDifferentiable()) return null;\n\n        if (ratio < 0) ratio = 0;\n        else if (ratio > 1) ratio = 1;\n\n        var t = this.tAt(ratio, opt);\n\n        return this.tangentAtT(t);\n    },\n\n    // Returns a tangent line at requested `length` with precision better than requested `opt.precision`; or using `opt.subdivisions` provided.\n    tangentAtLength: function(length, opt) {\n\n        if (!this.isDifferentiable()) return null;\n\n        var t = this.tAtLength(length, opt);\n\n        return this.tangentAtT(t);\n    },\n\n    // Returns a tangent line at requested `t`.\n    tangentAtT: function(t) {\n\n        if (!this.isDifferentiable()) return null;\n\n        if (t < 0) t = 0;\n        else if (t > 1) t = 1;\n\n        var skeletonPoints = this.getSkeletonPoints(t);\n\n        var p1 = skeletonPoints.startControlPoint2;\n        var p2 = skeletonPoints.dividerControlPoint1;\n\n        var tangentStart = skeletonPoints.divider;\n\n        var tangentLine = new Line(p1, p2);\n        tangentLine.translate(tangentStart.x - p1.x, tangentStart.y - p1.y); // move so that tangent line starts at the point requested\n\n        return tangentLine;\n    },\n\n    // Returns `t` at requested `ratio` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n    tAt: function(ratio, opt) {\n\n        if (ratio <= 0) return 0;\n        if (ratio >= 1) return 1;\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var subdivisions = (opt.subdivisions === undefined) ? this.getSubdivisions({ precision: precision }) : opt.subdivisions;\n        var localOpt = { precision: precision, subdivisions: subdivisions };\n\n        var curveLength = this.length(localOpt);\n        var length = curveLength * ratio;\n\n        return this.tAtLength(length, localOpt);\n    },\n\n    // Returns `t` at requested `length` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n    // Uses `precision` to approximate length within `precision` (always underestimates)\n    // Then uses a binary search to find the `t` of a subdivision endpoint that is close (within `precision`) to the `length`, if the curve was as long as approximated\n    // As a rule of thumb, increasing `precision` by 1 causes the algorithm to go 2^(precision - 1) deeper\n    // - Precision 0 (chooses one of the two endpoints) - 0 levels\n    // - Precision 1 (chooses one of 5 points, <10% error) - 1 level\n    // - Precision 2 (<1% error) - 3 levels\n    // - Precision 3 (<0.1% error) - 7 levels\n    // - Precision 4 (<0.01% error) - 15 levels\n    tAtLength: function(length, opt) {\n\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false; // negative lengths mean start calculation from end point\n            length = -length; // absolute value\n        }\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var subdivisions = (opt.subdivisions === undefined) ? this.getSubdivisions({ precision: precision }) : opt.subdivisions;\n        var localOpt = { precision: precision, subdivisions: subdivisions };\n\n        // identify the subdivision that contains the point at requested `length`:\n        var investigatedSubdivision;\n        var investigatedSubdivisionStartT; // assume that subdivisions are evenly spaced\n        var investigatedSubdivisionEndT;\n        //var baseline; // straightened version of subdivision to investigate\n        //var baselinePoint; // point on the baseline that is the requested distance away from start\n        var baselinePointDistFromStart; // distance of baselinePoint from start of baseline\n        var baselinePointDistFromEnd; // distance of baselinePoint from end of baseline\n        var l = 0; // length so far\n        var n = subdivisions.length;\n        var subdivisionSize = 1 / n;\n        for (var i = 0; i < n; i++) {\n            var index = (fromStart ? i : (n - 1 - i));\n\n            var currentSubdivision = subdivisions[i];\n            var d = currentSubdivision.endpointDistance(); // length of current subdivision\n\n            if (length <= (l + d)) {\n                investigatedSubdivision = currentSubdivision;\n\n                investigatedSubdivisionStartT = index * subdivisionSize;\n                investigatedSubdivisionEndT = (index + 1) * subdivisionSize;\n\n                baselinePointDistFromStart = (fromStart ? (length - l) : ((d + l) - length));\n                baselinePointDistFromEnd = (fromStart ? ((d + l) - length) : (length - l));\n\n                break;\n            }\n\n            l += d;\n        }\n\n        if (!investigatedSubdivision) return (fromStart ? 1 : 0); // length requested is out of range - return maximum t\n        // note that precision affects what length is recorded\n        // (imprecise measurements underestimate length by up to 10^(-precision) of the precise length)\n        // e.g. at precision 1, the length may be underestimated by up to 10% and cause this function to return 1\n\n        var curveLength = this.length(localOpt);\n\n        var precisionRatio = pow(10, -precision);\n\n        // recursively divide investigated subdivision:\n        // until distance between baselinePoint and closest path endpoint is within 10^(-precision)\n        // then return the closest endpoint of that final subdivision\n        while (true) {\n\n            // check if we have reached required observed precision\n            var observedPrecisionRatio;\n\n            observedPrecisionRatio = ((curveLength !== 0) ? (baselinePointDistFromStart / curveLength) : 0);\n            if (observedPrecisionRatio < precisionRatio) return investigatedSubdivisionStartT;\n            observedPrecisionRatio = ((curveLength !== 0) ? (baselinePointDistFromEnd / curveLength) : 0);\n            if (observedPrecisionRatio < precisionRatio) return investigatedSubdivisionEndT;\n\n            // otherwise, set up for next iteration\n            var newBaselinePointDistFromStart;\n            var newBaselinePointDistFromEnd;\n\n            var divided = investigatedSubdivision.divide(0.5);\n            subdivisionSize /= 2;\n\n            var baseline1Length = divided[0].endpointDistance();\n            var baseline2Length = divided[1].endpointDistance();\n\n            if (baselinePointDistFromStart <= baseline1Length) { // point at requested length is inside divided[0]\n                investigatedSubdivision = divided[0];\n\n                investigatedSubdivisionEndT -= subdivisionSize; // sudivisionSize was already halved\n\n                newBaselinePointDistFromStart = baselinePointDistFromStart;\n                newBaselinePointDistFromEnd = baseline1Length - newBaselinePointDistFromStart;\n\n            } else { // point at requested length is inside divided[1]\n                investigatedSubdivision = divided[1];\n\n                investigatedSubdivisionStartT += subdivisionSize; // subdivisionSize was already halved\n\n                newBaselinePointDistFromStart = baselinePointDistFromStart - baseline1Length;\n                newBaselinePointDistFromEnd = baseline2Length - newBaselinePointDistFromStart;\n            }\n\n            baselinePointDistFromStart = newBaselinePointDistFromStart;\n            baselinePointDistFromEnd = newBaselinePointDistFromEnd;\n        }\n    },\n\n    // Returns an array of points that represents the curve when flattened, up to `opt.precision`; or using `opt.subdivisions` provided.\n    // Flattened length is no more than 10^(-precision) away from real curve length.\n    toPoints: function(opt) {\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision; // opt.precision only used in getSubdivisions() call\n        var subdivisions = (opt.subdivisions === undefined) ? this.getSubdivisions({ precision: precision }) : opt.subdivisions;\n        // not using localOpt\n\n        var points = [subdivisions[0].start.clone()];\n        var n = subdivisions.length;\n        for (var i = 0; i < n; i++) {\n\n            var currentSubdivision = subdivisions[i];\n            points.push(currentSubdivision.end.clone());\n        }\n\n        return points;\n    },\n\n    // Returns a polyline that represents the curve when flattened, up to `opt.precision`; or using `opt.subdivisions` provided.\n    // Flattened length is no more than 10^(-precision) away from real curve length.\n    toPolyline: function(opt) {\n\n        return new Polyline(this.toPoints(opt));\n    },\n\n    toString: function() {\n\n        return this.start + ' ' + this.controlPoint1 + ' ' + this.controlPoint2 + ' ' + this.end;\n    },\n\n    translate: function(tx, ty) {\n\n        this.start.translate(tx, ty);\n        this.controlPoint1.translate(tx, ty);\n        this.controlPoint2.translate(tx, ty);\n        this.end.translate(tx, ty);\n        return this;\n    }\n};\n\nCurve.prototype.divide = Curve.prototype.divideAtT;\n","// Local helper function.\n// Add properties from arguments on top of properties from `obj`.\n// This allows for rudimentary inheritance.\n// - The `obj` argument acts as parent.\n// - This function creates a new object that inherits all `obj` properties and adds/replaces those that are present in arguments.\n// - A high-level example: calling `extend(Vehicle, Car)` would be akin to declaring `class Car extends Vehicle`.\nexport function extend(obj) {\n    // In JavaScript, the combination of a constructor function (e.g. `g.Line = function(...) {...}`) and prototype (e.g. `g.Line.prototype = {...}) is akin to a C++ class.\n    // - When inheritance is not necessary, we can leave it at that. (This would be akin to calling extend with only `obj`.)\n    // - But, what if we wanted the `g.Line` quasiclass to inherit from another quasiclass (let's call it `g.GeometryObject`) in JavaScript?\n    // - First, realize that both of those quasiclasses would still have their own separate constructor function.\n    // - So what we are actually saying is that we want the `g.Line` prototype to inherit from `g.GeometryObject` prototype.\n    // - This method provides a way to do exactly that.\n    // - It copies parent prototype's properties, then adds extra ones from child prototype/overrides parent prototype properties with child prototype properties.\n    // - Therefore, to continue with the example above:\n    //   - `g.Line.prototype = extend(g.GeometryObject.prototype, linePrototype)`\n    //   - Where `linePrototype` is a properties object that looks just like `g.Line.prototype` does right now.\n    //   - Then, `g.Line` would allow the programmer to access to all methods currently in `g.Line.Prototype`, plus any non-overridden methods from `g.GeometryObject.prototype`.\n    //   - In that aspect, `g.GeometryObject` would then act like the parent of `g.Line`.\n    // - Multiple inheritance is also possible, if multiple arguments are provided.\n    // - What if we wanted to add another level of abstraction between `g.GeometryObject` and `g.Line` (let's call it `g.LinearObject`)?\n    //   - `g.Line.prototype = extend(g.GeometryObject.prototype, g.LinearObject.prototype, linePrototype)`\n    //   - The ancestors are applied in order of appearance.\n    //   - That means that `g.Line` would have inherited from `g.LinearObject` that would have inherited from `g.GeometryObject`.\n    //   - Any number of ancestors may be provided.\n    // - Note that neither `obj` nor any of the arguments need to actually be prototypes of any JavaScript quasiclass, that was just a simplified explanation.\n    // - We can create a new object composed from the properties of any number of other objects (since they do not have a constructor, we can think of those as interfaces).\n    //   - `extend({ a: 1, b: 2 }, { b: 10, c: 20 }, { c: 100, d: 200 })` gives `{ a: 1, b: 10, c: 100, d: 200 }`.\n    //   - Basically, with this function, we can emulate the `extends` keyword as well as the `implements` keyword.\n    // - Therefore, both of the following are valid:\n    //   - `Lineto.prototype = extend(Line.prototype, segmentPrototype, linetoPrototype)`\n    //   - `Moveto.prototype = extend(segmentPrototype, movetoPrototype)`\n\n    var i;\n    var n;\n\n    var args = [];\n    n = arguments.length;\n    for (i = 1; i < n; i++) { // skip over obj\n        args.push(arguments[i]);\n    }\n\n    if (!obj) throw new Error('Missing a parent object.');\n    var child = Object.create(obj);\n\n    n = args.length;\n    for (i = 0; i < n; i++) {\n\n        var src = args[i];\n\n        var inheritedProperty;\n        var key;\n        for (key in src) {\n\n            if (src.hasOwnProperty(key)) {\n                delete child[key]; // delete property inherited from parent\n                inheritedProperty = Object.getOwnPropertyDescriptor(src, key); // get new definition of property from src\n                Object.defineProperty(child, key, inheritedProperty); // re-add property with new definition (includes getter/setter methods)\n            }\n        }\n    }\n\n    return child;\n}\n","// Accepts path data string, array of segments, array of Curves and/or Lines, or a Polyline.\n// Path created is not guaranteed to be a valid (serializable) path (might not start with an M).\nimport { Polyline } from './polyline.mjs';\nimport { Rect } from './rect.mjs';\nimport { Point } from './point.mjs';\nimport { Line } from './line.mjs';\nimport { Curve } from './curve.mjs';\nimport { types } from './types.mjs';\nimport { extend } from './extend.mjs';\nexport const Path = function(arg) {\n\n    if (!(this instanceof Path)) {\n        return new Path(arg);\n    }\n\n    if (typeof arg === 'string') { // create from a path data string\n        return new Path.parse(arg);\n    }\n\n    this.segments = [];\n\n    var i;\n    var n;\n\n    if (!arg) {\n        // don't do anything\n\n    } else if (Array.isArray(arg) && arg.length !== 0) { // if arg is a non-empty array\n        // flatten one level deep\n        // so we can chain arbitrary Path.createSegment results\n        arg = arg.reduce(function(acc, val) {\n            return acc.concat(val);\n        }, []);\n\n        n = arg.length;\n        if (arg[0].isSegment) { // create from an array of segments\n            for (i = 0; i < n; i++) {\n\n                var segment = arg[i];\n\n                this.appendSegment(segment);\n            }\n\n        } else { // create from an array of Curves and/or Lines\n            var previousObj = null;\n            for (i = 0; i < n; i++) {\n\n                var obj = arg[i];\n\n                if (!((obj instanceof Line) || (obj instanceof Curve))) {\n                    throw new Error('Cannot construct a path segment from the provided object.');\n                }\n\n                if (i === 0) this.appendSegment(Path.createSegment('M', obj.start));\n\n                // if objects do not link up, moveto segments are inserted to cover the gaps\n                if (previousObj && !previousObj.end.equals(obj.start)) this.appendSegment(Path.createSegment('M', obj.start));\n\n                if (obj instanceof Line) {\n                    this.appendSegment(Path.createSegment('L', obj.end));\n\n                } else if (obj instanceof Curve) {\n                    this.appendSegment(Path.createSegment('C', obj.controlPoint1, obj.controlPoint2, obj.end));\n                }\n\n                previousObj = obj;\n            }\n        }\n\n    } else if (arg.isSegment) { // create from a single segment\n        this.appendSegment(arg);\n\n    } else if (arg instanceof Line) { // create from a single Line\n        this.appendSegment(Path.createSegment('M', arg.start));\n        this.appendSegment(Path.createSegment('L', arg.end));\n\n    } else if (arg instanceof Curve) { // create from a single Curve\n        this.appendSegment(Path.createSegment('M', arg.start));\n        this.appendSegment(Path.createSegment('C', arg.controlPoint1, arg.controlPoint2, arg.end));\n\n    } else if (arg instanceof Polyline) { // create from a Polyline\n        if (!(arg.points && (arg.points.length !== 0))) return; // if Polyline has no points, leave Path empty\n\n        n = arg.points.length;\n        for (i = 0; i < n; i++) {\n\n            var point = arg.points[i];\n\n            if (i === 0) this.appendSegment(Path.createSegment('M', point));\n            else this.appendSegment(Path.createSegment('L', point));\n        }\n\n    } else { // unknown object\n        throw new Error('Cannot construct a path from the provided object.');\n    }\n};\n\n// More permissive than V.normalizePathData and Path.prototype.serialize.\n// Allows path data strings that do not start with a Moveto command (unlike SVG specification).\n// Does not require spaces between elements; commas are allowed, separators may be omitted when unambiguous (e.g. 'ZM10,10', 'L1.6.8', 'M100-200').\n// Allows for command argument chaining.\n// Throws an error if wrong number of arguments is provided with a command.\n// Throws an error if an unrecognized path command is provided (according to Path.segmentTypes). Only a subset of SVG commands is currently supported (L, C, M, Z).\nPath.parse = function(pathData) {\n\n    if (!pathData) return new Path();\n\n    var path = new Path();\n\n    var commandRe = /(?:[a-zA-Z] *)(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)? *,? *)|(?:-?\\.\\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\\d|-|\\.)/g;\n    var commands = pathData.match(commandRe);\n\n    var numCommands = commands.length;\n    for (var i = 0; i < numCommands; i++) {\n\n        var command = commands[i];\n        var argRe = /(?:[a-zA-Z])|(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))|(?:(?:-?\\.\\d+))/g;\n        var args = command.match(argRe);\n\n        var segment = Path.createSegment.apply(this, args); // args = [type, coordinate1, coordinate2...]\n        path.appendSegment(segment);\n    }\n\n    return path;\n};\n\n// Create a segment or an array of segments.\n// Accepts unlimited points/coords arguments after `type`.\nPath.createSegment = function(type) {\n\n    if (!type) throw new Error('Type must be provided.');\n\n    var segmentConstructor = Path.segmentTypes[type];\n    if (!segmentConstructor) throw new Error(type + ' is not a recognized path segment type.');\n\n    var args = [];\n    var n = arguments.length;\n    for (var i = 1; i < n; i++) { // do not add first element (`type`) to args array\n        args.push(arguments[i]);\n    }\n\n    return applyToNew(segmentConstructor, args);\n};\n\nPath.prototype = {\n\n    type: types.Path,\n\n    // Accepts one segment or an array of segments as argument.\n    // Throws an error if argument is not a segment or an array of segments.\n    appendSegment: function(arg) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        // works even if path has no segments\n\n        var currentSegment;\n\n        var previousSegment = ((numSegments !== 0) ? segments[numSegments - 1] : null); // if we are appending to an empty path, previousSegment is null\n        var nextSegment = null;\n\n        if (!Array.isArray(arg)) { // arg is a segment\n            if (!arg || !arg.isSegment) throw new Error('Segment required.');\n\n            currentSegment = this.prepareSegment(arg, previousSegment, nextSegment);\n            segments.push(currentSegment);\n\n        } else { // arg is an array of segments\n            // flatten one level deep\n            // so we can chain arbitrary Path.createSegment results\n            arg = arg.reduce(function(acc, val) {\n                return acc.concat(val);\n            }, []);\n\n            if (!arg[0].isSegment) throw new Error('Segments required.');\n\n            var n = arg.length;\n            for (var i = 0; i < n; i++) {\n\n                var currentArg = arg[i];\n                currentSegment = this.prepareSegment(currentArg, previousSegment, nextSegment);\n                segments.push(currentSegment);\n                previousSegment = currentSegment;\n            }\n        }\n    },\n\n    // Returns the bbox of the path.\n    // If path has no segments, returns null.\n    // If path has only invisible segments, returns bbox of the end point of last segment.\n    bbox: function() {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        var bbox;\n        for (var i = 0; i < numSegments; i++) {\n\n            var segment = segments[i];\n            if (segment.isVisible) {\n                var segmentBBox = segment.bbox();\n                bbox = bbox ? bbox.union(segmentBBox) : segmentBBox;\n            }\n        }\n\n        if (bbox) return bbox;\n\n        // if the path has only invisible elements, return end point of last segment\n        var lastSegment = segments[numSegments - 1];\n        return new Rect(lastSegment.end.x, lastSegment.end.y, 0, 0);\n    },\n\n    // Returns a new path that is a clone of this path.\n    clone: function() {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        // works even if path has no segments\n\n        var path = new Path();\n        for (var i = 0; i < numSegments; i++) {\n\n            var segment = segments[i].clone();\n            path.appendSegment(segment);\n        }\n\n        return path;\n    },\n\n    closestPoint: function(p, opt) {\n\n        var t = this.closestPointT(p, opt);\n        if (!t) return null;\n\n        return this.pointAtT(t);\n    },\n\n    closestPointLength: function(p, opt) {\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        var localOpt = { precision: precision, segmentSubdivisions: segmentSubdivisions };\n\n        var t = this.closestPointT(p, localOpt);\n        if (!t) return 0;\n\n        return this.lengthAtT(t, localOpt);\n    },\n\n    closestPointNormalizedLength: function(p, opt) {\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        var localOpt = { precision: precision, segmentSubdivisions: segmentSubdivisions };\n\n        var cpLength = this.closestPointLength(p, localOpt);\n        if (cpLength === 0) return 0; // shortcut\n\n        var length = this.length(localOpt);\n        if (length === 0) return 0; // prevents division by zero\n\n        return cpLength / length;\n    },\n\n    // Private function.\n    closestPointT: function(p, opt) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        // not using localOpt\n\n        var closestPointT;\n        var minSquaredDistance = Infinity;\n        for (var i = 0; i < numSegments; i++) {\n\n            var segment = segments[i];\n            var subdivisions = segmentSubdivisions[i];\n\n            if (segment.isVisible) {\n                var segmentClosestPointT = segment.closestPointT(p, {\n                    precision: precision,\n                    subdivisions: subdivisions\n                });\n                var segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n                var squaredDistance = (new Line(segmentClosestPoint, p)).squaredLength();\n\n                if (squaredDistance < minSquaredDistance) {\n                    closestPointT = { segmentIndex: i, value: segmentClosestPointT };\n                    minSquaredDistance = squaredDistance;\n                }\n            }\n        }\n\n        if (closestPointT) return closestPointT;\n\n        // if no visible segment, return end of last segment\n        return { segmentIndex: numSegments - 1, value: 1 };\n    },\n\n    closestPointTangent: function(p, opt) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        // not using localOpt\n\n        var closestPointTangent;\n        var minSquaredDistance = Infinity;\n        for (var i = 0; i < numSegments; i++) {\n\n            var segment = segments[i];\n            var subdivisions = segmentSubdivisions[i];\n\n            if (segment.isDifferentiable()) {\n                var segmentClosestPointT = segment.closestPointT(p, {\n                    precision: precision,\n                    subdivisions: subdivisions\n                });\n                var segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n                var squaredDistance = (new Line(segmentClosestPoint, p)).squaredLength();\n\n                if (squaredDistance < minSquaredDistance) {\n                    closestPointTangent = segment.tangentAtT(segmentClosestPointT);\n                    minSquaredDistance = squaredDistance;\n                }\n            }\n        }\n\n        if (closestPointTangent) return closestPointTangent;\n\n        // if no valid segment, return null\n        return null;\n    },\n\n    // Returns `true` if the area surrounded by the path contains the point `p`.\n    // Implements the even-odd algorithm (self-intersections are \"outside\").\n    // Closes open paths (always imagines a final closing segment).\n    // Precision may be adjusted by passing an `opt` object.\n    containsPoint: function(p, opt) {\n\n        var polylines = this.toPolylines(opt);\n        if (!polylines) return false; // shortcut (this path has no polylines)\n\n        var numPolylines = polylines.length;\n\n        // how many component polylines does `p` lie within?\n        var numIntersections = 0;\n        for (var i = 0; i < numPolylines; i++) {\n            var polyline = polylines[i];\n            if (polyline.containsPoint(p)) {\n                // `p` lies within this polyline\n                numIntersections++;\n            }\n        }\n\n        // returns `true` for odd numbers of intersections (even-odd algorithm)\n        return ((numIntersections % 2) === 1);\n    },\n\n    // Divides the path into two at requested `ratio` between 0 and 1 with precision better than `opt.precision`; optionally using `opt.subdivisions` provided.\n    divideAt: function(ratio, opt) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        if (ratio < 0) ratio = 0;\n        if (ratio > 1) ratio = 1;\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        var localOpt = { precision: precision, segmentSubdivisions: segmentSubdivisions };\n\n        var pathLength = this.length(localOpt);\n        var length = pathLength * ratio;\n\n        return this.divideAtLength(length, localOpt);\n    },\n\n    // Divides the path into two at requested `length` with precision better than requested `opt.precision`; optionally using `opt.subdivisions` provided.\n    divideAtLength: function(length, opt) {\n\n        var numSegments = this.segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false; // negative lengths mean start calculation from end point\n            length = -length; // absolute value\n        }\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        // not using localOpt\n\n        var i;\n        var segment;\n\n        // identify the segment to divide:\n\n        var l = 0; // length so far\n        var divided;\n        var dividedSegmentIndex;\n        var lastValidSegment; // visible AND differentiable\n        var lastValidSegmentIndex;\n        var t;\n        for (i = 0; i < numSegments; i++) {\n            var index = (fromStart ? i : (numSegments - 1 - i));\n\n            segment = this.getSegment(index);\n            var subdivisions = segmentSubdivisions[index];\n            var d = segment.length({ precision: precision, subdivisions: subdivisions });\n\n            if (segment.isDifferentiable()) { // segment is not just a point\n                lastValidSegment = segment;\n                lastValidSegmentIndex = index;\n\n                if (length <= (l + d)) {\n                    dividedSegmentIndex = index;\n                    divided = segment.divideAtLength(((fromStart ? 1 : -1) * (length - l)), {\n                        precision: precision,\n                        subdivisions: subdivisions\n                    });\n                    break;\n                }\n            }\n\n            l += d;\n        }\n\n        if (!lastValidSegment) { // no valid segment found\n            return null;\n        }\n\n        // else: the path contains at least one valid segment\n\n        if (!divided) { // the desired length is greater than the length of the path\n            dividedSegmentIndex = lastValidSegmentIndex;\n            t = (fromStart ? 1 : 0);\n            divided = lastValidSegment.divideAtT(t);\n        }\n\n        // create a copy of this path and replace the identified segment with its two divided parts:\n\n        var pathCopy = this.clone();\n        pathCopy.replaceSegment(dividedSegmentIndex, divided);\n\n        var divisionStartIndex = dividedSegmentIndex;\n        var divisionMidIndex = dividedSegmentIndex + 1;\n        var divisionEndIndex = dividedSegmentIndex + 2;\n\n        // do not insert the part if it looks like a point\n        if (!divided[0].isDifferentiable()) {\n            pathCopy.removeSegment(divisionStartIndex);\n            divisionMidIndex -= 1;\n            divisionEndIndex -= 1;\n        }\n\n        // insert a Moveto segment to ensure secondPath will be valid:\n        var movetoEnd = pathCopy.getSegment(divisionMidIndex).start;\n        pathCopy.insertSegment(divisionMidIndex, Path.createSegment('M', movetoEnd));\n        divisionEndIndex += 1;\n\n        // do not insert the part if it looks like a point\n        if (!divided[1].isDifferentiable()) {\n            pathCopy.removeSegment(divisionEndIndex - 1);\n            divisionEndIndex -= 1;\n        }\n\n        // ensure that Closepath segments in secondPath will be assigned correct subpathStartSegment:\n\n        var secondPathSegmentIndexConversion = divisionEndIndex - divisionStartIndex - 1;\n        for (i = divisionEndIndex; i < pathCopy.segments.length; i++) {\n\n            var originalSegment = this.getSegment(i - secondPathSegmentIndexConversion);\n            segment = pathCopy.getSegment(i);\n\n            if ((segment.type === 'Z') && !originalSegment.subpathStartSegment.end.equals(segment.subpathStartSegment.end)) {\n                // pathCopy segment's subpathStartSegment is different from original segment's one\n                // convert this Closepath segment to a Lineto and replace it in pathCopy\n                var convertedSegment = Path.createSegment('L', originalSegment.end);\n                pathCopy.replaceSegment(i, convertedSegment);\n            }\n        }\n\n        // distribute pathCopy segments into two paths and return those:\n\n        var firstPath = new Path(pathCopy.segments.slice(0, divisionMidIndex));\n        var secondPath = new Path(pathCopy.segments.slice(divisionMidIndex));\n\n        return [firstPath, secondPath];\n    },\n\n    // Checks whether two paths are exactly the same.\n    // If `p` is undefined or null, returns false.\n    equals: function(p) {\n\n        if (!p) return false;\n\n        var segments = this.segments;\n        var otherSegments = p.segments;\n\n        var numSegments = segments.length;\n        if (otherSegments.length !== numSegments) return false; // if the two paths have different number of segments, they cannot be equal\n\n        for (var i = 0; i < numSegments; i++) {\n\n            var segment = segments[i];\n            var otherSegment = otherSegments[i];\n\n            // as soon as an inequality is found in segments, return false\n            if ((segment.type !== otherSegment.type) || (!segment.equals(otherSegment))) return false;\n        }\n\n        // if no inequality found in segments, return true\n        return true;\n    },\n\n    // Accepts negative indices.\n    // Throws an error if path has no segments.\n    // Throws an error if index is out of range.\n    getSegment: function(index) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) throw new Error('Path has no segments.');\n\n        if (index < 0) index = numSegments + index; // convert negative indices to positive\n        if (index >= numSegments || index < 0) throw new Error('Index out of range.');\n\n        return segments[index];\n    },\n\n    // Returns an array of segment subdivisions, with precision better than requested `opt.precision`.\n    getSegmentSubdivisions: function(opt) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        // works even if path has no segments\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        // not using opt.segmentSubdivisions\n        // not using localOpt\n\n        var segmentSubdivisions = [];\n        for (var i = 0; i < numSegments; i++) {\n\n            var segment = segments[i];\n            var subdivisions = segment.getSubdivisions({ precision: precision });\n            segmentSubdivisions.push(subdivisions);\n        }\n\n        return segmentSubdivisions;\n    },\n\n    // Returns an array of subpaths of this path.\n    // Invalid paths are validated first.\n    // Returns `[]` if path has no segments.\n    getSubpaths: function() {\n\n        const validatedPath = this.clone().validate();\n\n        const segments = validatedPath.segments;\n        const numSegments = segments.length;\n\n        const subpaths = [];\n        for (let i = 0; i < numSegments; i++) {\n\n            const segment = segments[i];\n            if (segment.isSubpathStart) {\n                // we encountered a subpath start segment\n                // create a new path for segment, and push it to list of subpaths\n                subpaths.push(new Path(segment));\n\n            } else {\n                // append current segment to the last subpath\n                subpaths[subpaths.length - 1].appendSegment(segment);\n            }\n        }\n\n        return subpaths;\n    },\n\n    // Insert `arg` at given `index`.\n    // `index = 0` means insert at the beginning.\n    // `index = segments.length` means insert at the end.\n    // Accepts negative indices, from `-1` to `-(segments.length + 1)`.\n    // Accepts one segment or an array of segments as argument.\n    // Throws an error if index is out of range.\n    // Throws an error if argument is not a segment or an array of segments.\n    insertSegment: function(index, arg) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        // works even if path has no segments\n\n        // note that these are incremented compared to getSegments()\n        // we can insert after last element (note that this changes the meaning of index -1)\n        if (index < 0) index = numSegments + index + 1; // convert negative indices to positive\n        if (index > numSegments || index < 0) throw new Error('Index out of range.');\n\n        var currentSegment;\n\n        var previousSegment = null;\n        var nextSegment = null;\n\n        if (numSegments !== 0) {\n            if (index >= 1) {\n                previousSegment = segments[index - 1];\n                nextSegment = previousSegment.nextSegment; // if we are inserting at end, nextSegment is null\n\n            } else { // if index === 0\n                // previousSegment is null\n                nextSegment = segments[0];\n            }\n        }\n\n        if (!Array.isArray(arg)) {\n            if (!arg || !arg.isSegment) throw new Error('Segment required.');\n\n            currentSegment = this.prepareSegment(arg, previousSegment, nextSegment);\n            segments.splice(index, 0, currentSegment);\n\n        } else {\n            // flatten one level deep\n            // so we can chain arbitrary Path.createSegment results\n            arg = arg.reduce(function(acc, val) {\n                return acc.concat(val);\n            }, []);\n\n            if (!arg[0].isSegment) throw new Error('Segments required.');\n\n            var n = arg.length;\n            for (var i = 0; i < n; i++) {\n\n                var currentArg = arg[i];\n                currentSegment = this.prepareSegment(currentArg, previousSegment, nextSegment);\n                segments.splice((index + i), 0, currentSegment); // incrementing index to insert subsequent segments after inserted segments\n                previousSegment = currentSegment;\n            }\n        }\n    },\n\n    intersectionWithLine: function(line, opt) {\n\n        var intersection = null;\n        var polylines = this.toPolylines(opt);\n        if (!polylines) return null;\n        for (var i = 0, n = polylines.length; i < n; i++) {\n            var polyline = polylines[i];\n            var polylineIntersection = line.intersect(polyline);\n            if (polylineIntersection) {\n                intersection || (intersection = []);\n                if (Array.isArray(polylineIntersection)) {\n                    Array.prototype.push.apply(intersection, polylineIntersection);\n                } else {\n                    intersection.push(polylineIntersection);\n                }\n            }\n        }\n\n        return intersection;\n    },\n\n    isDifferentiable: function() {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n\n        for (var i = 0; i < numSegments; i++) {\n\n            var segment = segments[i];\n            // as soon as a differentiable segment is found in segments, return true\n            if (segment.isDifferentiable()) return true;\n        }\n\n        // if no differentiable segment is found in segments, return false\n        return false;\n    },\n\n    // Checks whether current path segments are valid.\n    // Note that d is allowed to be empty - should disable rendering of the path.\n    isValid: function() {\n\n        var segments = this.segments;\n        var isValid = (segments.length === 0) || (segments[0].type === 'M'); // either empty or first segment is a Moveto\n        return isValid;\n    },\n\n    // Returns length of the path, with precision better than requested `opt.precision`; or using `opt.segmentSubdivisions` provided.\n    // If path has no segments, returns 0.\n    length: function(opt) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return 0; // if segments is an empty array\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision; // opt.precision only used in getSegmentSubdivisions() call\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        // not using localOpt\n\n        var length = 0;\n        for (var i = 0; i < numSegments; i++) {\n\n            var segment = segments[i];\n            var subdivisions = segmentSubdivisions[i];\n            length += segment.length({ subdivisions: subdivisions });\n        }\n\n        return length;\n    },\n\n    // Private function.\n    lengthAtT: function(t, opt) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return 0; // if segments is an empty array\n\n        var segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0) return 0; // regardless of t.value\n\n        var tValue = t.value;\n        if (segmentIndex >= numSegments) {\n            segmentIndex = numSegments - 1;\n            tValue = 1;\n        } else if (tValue < 0) tValue = 0;\n        else if (tValue > 1) tValue = 1;\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        // not using localOpt\n\n        var subdivisions;\n        var length = 0;\n        for (var i = 0; i < segmentIndex; i++) {\n\n            var segment = segments[i];\n            subdivisions = segmentSubdivisions[i];\n            length += segment.length({ precisison: precision, subdivisions: subdivisions });\n        }\n\n        segment = segments[segmentIndex];\n        subdivisions = segmentSubdivisions[segmentIndex];\n        length += segment.lengthAtT(tValue, { precisison: precision, subdivisions: subdivisions });\n\n        return length;\n    },\n\n    // Returns point at requested `ratio` between 0 and 1, with precision better than requested `opt.precision`; optionally using `opt.segmentSubdivisions` provided.\n    pointAt: function(ratio, opt) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        if (ratio <= 0) return this.start.clone();\n        if (ratio >= 1) return this.end.clone();\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        var localOpt = { precision: precision, segmentSubdivisions: segmentSubdivisions };\n\n        var pathLength = this.length(localOpt);\n        var length = pathLength * ratio;\n\n        return this.pointAtLength(length, localOpt);\n    },\n\n    // Returns point at requested `length`, with precision better than requested `opt.precision`; optionally using `opt.segmentSubdivisions` provided.\n    // Accepts negative length.\n    pointAtLength: function(length, opt) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        if (length === 0) return this.start.clone();\n\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false; // negative lengths mean start calculation from end point\n            length = -length; // absolute value\n        }\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        // not using localOpt\n\n        var lastVisibleSegment;\n        var l = 0; // length so far\n        for (var i = 0; i < numSegments; i++) {\n            var index = (fromStart ? i : (numSegments - 1 - i));\n\n            var segment = segments[index];\n            var subdivisions = segmentSubdivisions[index];\n            var d = segment.length({ precision: precision, subdivisions: subdivisions });\n\n            if (segment.isVisible) {\n                if (length <= (l + d)) {\n                    return segment.pointAtLength(((fromStart ? 1 : -1) * (length - l)), {\n                        precision: precision,\n                        subdivisions: subdivisions\n                    });\n                }\n\n                lastVisibleSegment = segment;\n            }\n\n            l += d;\n        }\n\n        // if length requested is higher than the length of the path, return last visible segment endpoint\n        if (lastVisibleSegment) return (fromStart ? lastVisibleSegment.end : lastVisibleSegment.start);\n\n        // if no visible segment, return last segment end point (no matter if fromStart or no)\n        var lastSegment = segments[numSegments - 1];\n        return lastSegment.end.clone();\n    },\n\n    // Private function.\n    pointAtT: function(t) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        var segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0) return segments[0].pointAtT(0);\n        if (segmentIndex >= numSegments) return segments[numSegments - 1].pointAtT(1);\n\n        var tValue = t.value;\n        if (tValue < 0) tValue = 0;\n        else if (tValue > 1) tValue = 1;\n\n        return segments[segmentIndex].pointAtT(tValue);\n    },\n\n    // Default precision\n    PRECISION: 3,\n\n    // Helper method for adding segments.\n    prepareSegment: function(segment, previousSegment, nextSegment) {\n\n        // insert after previous segment and before previous segment's next segment\n        segment.previousSegment = previousSegment;\n        segment.nextSegment = nextSegment;\n        if (previousSegment) previousSegment.nextSegment = segment;\n        if (nextSegment) nextSegment.previousSegment = segment;\n\n        var updateSubpathStart = segment;\n        if (segment.isSubpathStart) {\n            segment.subpathStartSegment = segment; // assign self as subpath start segment\n            updateSubpathStart = nextSegment; // start updating from next segment\n        }\n\n        // assign previous segment's subpath start (or self if it is a subpath start) to subsequent segments\n        if (updateSubpathStart) this.updateSubpathStartSegment(updateSubpathStart);\n\n        return segment;\n    },\n\n    // Remove the segment at `index`.\n    // Accepts negative indices, from `-1` to `-segments.length`.\n    // Throws an error if path has no segments.\n    // Throws an error if index is out of range.\n    removeSegment: function(index) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) throw new Error('Path has no segments.');\n\n        if (index < 0) index = numSegments + index; // convert negative indices to positive\n        if (index >= numSegments || index < 0) throw new Error('Index out of range.');\n\n        var removedSegment = segments.splice(index, 1)[0];\n        var previousSegment = removedSegment.previousSegment;\n        var nextSegment = removedSegment.nextSegment;\n\n        // link the previous and next segments together (if present)\n        if (previousSegment) previousSegment.nextSegment = nextSegment; // may be null\n        if (nextSegment) nextSegment.previousSegment = previousSegment; // may be null\n\n        // if removed segment used to start a subpath, update all subsequent segments until another subpath start segment is reached\n        if (removedSegment.isSubpathStart && nextSegment) this.updateSubpathStartSegment(nextSegment);\n    },\n\n    // Replace the segment at `index` with `arg`.\n    // Accepts negative indices, from `-1` to `-segments.length`.\n    // Accepts one segment or an array of segments as argument.\n    // Throws an error if path has no segments.\n    // Throws an error if index is out of range.\n    // Throws an error if argument is not a segment or an array of segments.\n    replaceSegment: function(index, arg) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) throw new Error('Path has no segments.');\n\n        if (index < 0) index = numSegments + index; // convert negative indices to positive\n        if (index >= numSegments || index < 0) throw new Error('Index out of range.');\n\n        var currentSegment;\n\n        var replacedSegment = segments[index];\n        var previousSegment = replacedSegment.previousSegment;\n        var nextSegment = replacedSegment.nextSegment;\n\n        var updateSubpathStart = replacedSegment.isSubpathStart; // boolean: is an update of subpath starts necessary?\n\n        if (!Array.isArray(arg)) {\n            if (!arg || !arg.isSegment) throw new Error('Segment required.');\n\n            currentSegment = this.prepareSegment(arg, previousSegment, nextSegment);\n            segments.splice(index, 1, currentSegment); // directly replace\n\n            if (updateSubpathStart && currentSegment.isSubpathStart) updateSubpathStart = false; // already updated by `prepareSegment`\n\n        } else {\n            // flatten one level deep\n            // so we can chain arbitrary Path.createSegment results\n            arg = arg.reduce(function(acc, val) {\n                return acc.concat(val);\n            }, []);\n\n            if (!arg[0].isSegment) throw new Error('Segments required.');\n\n            segments.splice(index, 1);\n\n            var n = arg.length;\n            for (var i = 0; i < n; i++) {\n\n                var currentArg = arg[i];\n                currentSegment = this.prepareSegment(currentArg, previousSegment, nextSegment);\n                segments.splice((index + i), 0, currentSegment); // incrementing index to insert subsequent segments after inserted segments\n                previousSegment = currentSegment;\n\n                if (updateSubpathStart && currentSegment.isSubpathStart) updateSubpathStart = false; // already updated by `prepareSegment`\n            }\n        }\n\n        // if replaced segment used to start a subpath and no new subpath start was added, update all subsequent segments until another subpath start segment is reached\n        if (updateSubpathStart && nextSegment) this.updateSubpathStartSegment(nextSegment);\n    },\n\n    round: function(precision) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n\n        for (var i = 0; i < numSegments; i++) {\n\n            var segment = segments[i];\n            segment.round(precision);\n        }\n\n        return this;\n    },\n\n    scale: function(sx, sy, origin) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n\n        for (var i = 0; i < numSegments; i++) {\n\n            var segment = segments[i];\n            segment.scale(sx, sy, origin);\n        }\n\n        return this;\n    },\n\n    segmentAt: function(ratio, opt) {\n\n        var index = this.segmentIndexAt(ratio, opt);\n        if (!index) return null;\n\n        return this.getSegment(index);\n    },\n\n    // Accepts negative length.\n    segmentAtLength: function(length, opt) {\n\n        var index = this.segmentIndexAtLength(length, opt);\n        if (!index) return null;\n\n        return this.getSegment(index);\n    },\n\n    segmentIndexAt: function(ratio, opt) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        if (ratio < 0) ratio = 0;\n        if (ratio > 1) ratio = 1;\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        var localOpt = { precision: precision, segmentSubdivisions: segmentSubdivisions };\n\n        var pathLength = this.length(localOpt);\n        var length = pathLength * ratio;\n\n        return this.segmentIndexAtLength(length, localOpt);\n    },\n\n    // Accepts negative length.\n    segmentIndexAtLength: function(length, opt) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false; // negative lengths mean start calculation from end point\n            length = -length; // absolute value\n        }\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        // not using localOpt\n\n        var lastVisibleSegmentIndex = null;\n        var l = 0; // length so far\n        for (var i = 0; i < numSegments; i++) {\n            var index = (fromStart ? i : (numSegments - 1 - i));\n\n            var segment = segments[index];\n            var subdivisions = segmentSubdivisions[index];\n            var d = segment.length({ precision: precision, subdivisions: subdivisions });\n\n            if (segment.isVisible) {\n                if (length <= (l + d)) return index;\n                lastVisibleSegmentIndex = index;\n            }\n\n            l += d;\n        }\n\n        // if length requested is higher than the length of the path, return last visible segment index\n        // if no visible segment, return null\n        return lastVisibleSegmentIndex;\n    },\n\n    // Returns a string that can be used to reconstruct the path.\n    // Additional error checking compared to toString (must start with M segment).\n    serialize: function() {\n\n        if (!this.isValid()) throw new Error('Invalid path segments.');\n\n        return this.toString();\n    },\n\n    // Returns tangent line at requested `ratio` between 0 and 1, with precision better than requested `opt.precision`; optionally using `opt.segmentSubdivisions` provided.\n    tangentAt: function(ratio, opt) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        if (ratio < 0) ratio = 0;\n        if (ratio > 1) ratio = 1;\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        var localOpt = { precision: precision, segmentSubdivisions: segmentSubdivisions };\n\n        var pathLength = this.length(localOpt);\n        var length = pathLength * ratio;\n\n        return this.tangentAtLength(length, localOpt);\n    },\n\n    // Returns tangent line at requested `length`, with precision better than requested `opt.precision`; optionally using `opt.segmentSubdivisions` provided.\n    // Accepts negative length.\n    tangentAtLength: function(length, opt) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false; // negative lengths mean start calculation from end point\n            length = -length; // absolute value\n        }\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n        // not using localOpt\n\n        var lastValidSegment; // visible AND differentiable (with a tangent)\n        var l = 0; // length so far\n        for (var i = 0; i < numSegments; i++) {\n            var index = (fromStart ? i : (numSegments - 1 - i));\n\n            var segment = segments[index];\n            var subdivisions = segmentSubdivisions[index];\n            var d = segment.length({ precision: precision, subdivisions: subdivisions });\n\n            if (segment.isDifferentiable()) {\n                if (length <= (l + d)) {\n                    return segment.tangentAtLength(((fromStart ? 1 : -1) * (length - l)), {\n                        precision: precision,\n                        subdivisions: subdivisions\n                    });\n                }\n\n                lastValidSegment = segment;\n            }\n\n            l += d;\n        }\n\n        // if length requested is higher than the length of the path, return tangent of endpoint of last valid segment\n        if (lastValidSegment) {\n            var t = (fromStart ? 1 : 0);\n            return lastValidSegment.tangentAtT(t);\n        }\n\n        // if no valid segment, return null\n        return null;\n    },\n\n    // Private function.\n    tangentAtT: function(t) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        var segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0) return segments[0].tangentAtT(0);\n        if (segmentIndex >= numSegments) return segments[numSegments - 1].tangentAtT(1);\n\n        var tValue = t.value;\n        if (tValue < 0) tValue = 0;\n        else if (tValue > 1) tValue = 1;\n\n        return segments[segmentIndex].tangentAtT(tValue);\n    },\n\n    toPoints: function(opt) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null; // if segments is an empty array\n\n        opt = opt || {};\n        var precision = (opt.precision === undefined) ? this.PRECISION : opt.precision;\n        var segmentSubdivisions = (opt.segmentSubdivisions === undefined) ? this.getSegmentSubdivisions({ precision: precision }) : opt.segmentSubdivisions;\n\n        var points = [];\n        var partialPoints = [];\n        for (var i = 0; i < numSegments; i++) {\n            var segment = segments[i];\n            if (segment.isVisible) {\n                var currentSegmentSubdivisions = segmentSubdivisions[i];\n                if (currentSegmentSubdivisions.length > 0) {\n                    var subdivisionPoints = currentSegmentSubdivisions.map(function(curve) {\n                        return curve.start;\n                    });\n                    Array.prototype.push.apply(partialPoints, subdivisionPoints);\n                } else {\n                    partialPoints.push(segment.start);\n                }\n            } else if (partialPoints.length > 0) {\n                partialPoints.push(segments[i - 1].end);\n                points.push(partialPoints);\n                partialPoints = [];\n            }\n        }\n\n        if (partialPoints.length > 0) {\n            partialPoints.push(this.end);\n            points.push(partialPoints);\n        }\n        return points;\n    },\n\n    toPolylines: function(opt) {\n\n        var polylines = [];\n        var points = this.toPoints(opt);\n        if (!points) return null;\n        for (var i = 0, n = points.length; i < n; i++) {\n            polylines.push(new Polyline(points[i]));\n        }\n\n        return polylines;\n    },\n\n    toString: function() {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n\n        var pathData = '';\n        for (var i = 0; i < numSegments; i++) {\n\n            var segment = segments[i];\n            pathData += segment.serialize() + ' ';\n        }\n\n        return pathData.trim();\n    },\n\n    translate: function(tx, ty) {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n\n        for (var i = 0; i < numSegments; i++) {\n\n            var segment = segments[i];\n            segment.translate(tx, ty);\n        }\n\n        return this;\n    },\n\n    // Helper method for updating subpath start of segments, starting with the one provided.\n    updateSubpathStartSegment: function(segment) {\n\n        var previousSegment = segment.previousSegment; // may be null\n        while (segment && !segment.isSubpathStart) {\n\n            // assign previous segment's subpath start segment to this segment\n            if (previousSegment) segment.subpathStartSegment = previousSegment.subpathStartSegment; // may be null\n            else segment.subpathStartSegment = null; // if segment had no previous segment, assign null - creates an invalid path!\n\n            previousSegment = segment;\n            segment = segment.nextSegment; // move on to the segment after etc.\n        }\n    },\n\n    // If the path is not valid, insert M 0 0 at the beginning.\n    // Path with no segments is considered valid, so nothing is inserted.\n    validate: function() {\n\n        if (!this.isValid()) this.insertSegment(0, Path.createSegment('M', 0, 0));\n        return this;\n    }\n};\n\nObject.defineProperty(Path.prototype, 'start', {\n    // Getter for the first visible endpoint of the path.\n\n    configurable: true,\n\n    enumerable: true,\n\n    get: function() {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null;\n\n        for (var i = 0; i < numSegments; i++) {\n\n            var segment = segments[i];\n            if (segment.isVisible) return segment.start;\n        }\n\n        // if no visible segment, return last segment end point\n        return segments[numSegments - 1].end;\n    }\n});\n\nObject.defineProperty(Path.prototype, 'end', {\n    // Getter for the last visible endpoint of the path.\n\n    configurable: true,\n\n    enumerable: true,\n\n    get: function() {\n\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0) return null;\n\n        for (var i = numSegments - 1; i >= 0; i--) {\n\n            var segment = segments[i];\n            if (segment.isVisible) return segment.end;\n        }\n\n        // if no visible segment, return last segment end point\n        return segments[numSegments - 1].end;\n    }\n});\n\n\n// Local helper function.\n// Use an array of arguments to call a constructor (function called with `new`).\n// Adapted from https://stackoverflow.com/a/8843181/2263595\n// It is not necessary to use this function if the arguments can be passed separately (i.e. if the number of arguments is limited).\n// - If that is the case, use `new constructor(arg1, arg2)`, for example.\n// It is not necessary to use this function if the function that needs an array of arguments is not supposed to be used as a constructor.\n// - If that is the case, use `f.apply(thisArg, [arg1, arg2...])`, for example.\nfunction applyToNew(constructor, argsArray) {\n    // The `new` keyword can only be applied to functions that take a limited number of arguments.\n    // - We can fake that with .bind().\n    // - It calls a function (`constructor`, here) with the arguments that were provided to it - effectively transforming an unlimited number of arguments into limited.\n    // - So `new (constructor.bind(thisArg, arg1, arg2...))`\n    // - `thisArg` can be anything (e.g. null) because `new` keyword resets context to the constructor object.\n    // We need to pass in a variable number of arguments to the bind() call.\n    // - We can use .apply().\n    // - So `new (constructor.bind.apply(constructor, [thisArg, arg1, arg2...]))`\n    // - `thisArg` can still be anything because `new` overwrites it.\n    // Finally, to make sure that constructor.bind overwriting is not a problem, we switch to `Function.prototype.bind`.\n    // - So, the final version is `new (Function.prototype.bind.apply(constructor, [thisArg, arg1, arg2...]))`\n\n    // The function expects `argsArray[0]` to be `thisArg`.\n    // - This means that whatever is sent as the first element will be ignored.\n    // - The constructor will only see arguments starting from argsArray[1].\n    // - So, a new dummy element is inserted at the start of the array.\n    argsArray.unshift(null);\n\n    return new (Function.prototype.bind.apply(constructor, argsArray));\n}\n\n// Path segment interface:\nvar segmentPrototype = {\n\n    // virtual\n    bbox: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // virtual\n    clone: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // virtual\n    closestPoint: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // virtual\n    closestPointLength: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // virtual\n    closestPointNormalizedLength: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // Redirect calls to closestPointNormalizedLength() function if closestPointT() is not defined for segment.\n    closestPointT: function(p) {\n\n        if (this.closestPointNormalizedLength) return this.closestPointNormalizedLength(p);\n\n        throw new Error('Neither closestPointT() nor closestPointNormalizedLength() function is implemented.');\n    },\n\n    // virtual\n    closestPointTangent: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // virtual\n    divideAt: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // virtual\n    divideAtLength: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // Redirect calls to divideAt() function if divideAtT() is not defined for segment.\n    divideAtT: function(t) {\n\n        if (this.divideAt) return this.divideAt(t);\n\n        throw new Error('Neither divideAtT() nor divideAt() function is implemented.');\n    },\n\n    // virtual\n    equals: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // virtual\n    getSubdivisions: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // virtual\n    isDifferentiable: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    isSegment: true,\n\n    isSubpathStart: false, // true for Moveto segments\n\n    isVisible: true, // false for Moveto segments\n\n    // virtual\n    length: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // Return a fraction of result of length() function if lengthAtT() is not defined for segment.\n    lengthAtT: function(t) {\n\n        if (t <= 0) return 0;\n\n        var length = this.length();\n\n        if (t >= 1) return length;\n\n        return length * t;\n    },\n\n    nextSegment: null, // needed for subpath start segment updating\n\n    // virtual\n    pointAt: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // virtual\n    pointAtLength: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // Redirect calls to pointAt() function if pointAtT() is not defined for segment.\n    pointAtT: function(t) {\n\n        if (this.pointAt) return this.pointAt(t);\n\n        throw new Error('Neither pointAtT() nor pointAt() function is implemented.');\n    },\n\n    previousSegment: null, // needed to get segment start property\n\n    // virtual\n    round: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    subpathStartSegment: null, // needed to get Closepath segment end property\n\n    // virtual\n    scale: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // virtual\n    serialize: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // virtual\n    tangentAt: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // virtual\n    tangentAtLength: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // Redirect calls to tangentAt() function if tangentAtT() is not defined for segment.\n    tangentAtT: function(t) {\n\n        if (this.tangentAt) return this.tangentAt(t);\n\n        throw new Error('Neither tangentAtT() nor tangentAt() function is implemented.');\n    },\n\n    // virtual\n    toString: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    },\n\n    // virtual\n    translate: function() {\n\n        throw new Error('Declaration missing for virtual function.');\n    }\n};\n\n// usually directly assigned\n// getter for Closepath\nObject.defineProperty(segmentPrototype, 'end', {\n\n    configurable: true,\n\n    enumerable: true,\n\n    writable: true\n});\n\n// always a getter\n// always throws error for Moveto\nObject.defineProperty(segmentPrototype, 'start', {\n    // get a reference to the end point of previous segment\n\n    configurable: true,\n\n    enumerable: true,\n\n    get: function() {\n\n        if (!this.previousSegment) throw new Error('Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)');\n\n        return this.previousSegment.end;\n    }\n});\n\n// virtual\nObject.defineProperty(segmentPrototype, 'type', {\n\n    configurable: true,\n\n    enumerable: true,\n\n    get: function() {\n\n        throw new Error('Bad segment declaration. No type specified.');\n    }\n});\n\n// Path segment implementations:\nvar Lineto = function() {\n\n    var args = [];\n    var n = arguments.length;\n    for (var i = 0; i < n; i++) {\n        args.push(arguments[i]);\n    }\n\n    if (!(this instanceof Lineto)) { // switching context of `this` to Lineto when called without `new`\n        return applyToNew(Lineto, args);\n    }\n\n    if (n === 0) {\n        throw new Error('Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).');\n    }\n\n    var outputArray;\n\n    if (args[0] instanceof Line) { // lines provided\n        if (n === 1) {\n            this.end = args[0].end.clone();\n            return this;\n\n        } else {\n            throw new Error('Lineto constructor expects a line, 1 point, or 2 coordinates (' + n + ' lines provided).');\n        }\n\n    } else if (typeof args[0] === 'string' || typeof args[0] === 'number') { // coordinates provided\n        if (n === 2) {\n            this.end = new Point(+args[0], +args[1]);\n            return this;\n\n        } else if (n < 2) {\n            throw new Error('Lineto constructor expects a line, 1 point, or 2 coordinates (' + n + ' coordinates provided).');\n\n        } else { // this is a poly-line segment\n            var segmentCoords;\n            outputArray = [];\n            for (i = 0; i < n; i += 2) { // coords come in groups of two\n\n                segmentCoords = args.slice(i, i + 2); // will send one coord if args.length not divisible by 2\n                outputArray.push(applyToNew(Lineto, segmentCoords));\n            }\n            return outputArray;\n        }\n\n    } else { // points provided (needs to be last to also cover plain objects with x and y)\n        if (n === 1) {\n            this.end = new Point(args[0]);\n            return this;\n\n        } else { // this is a poly-line segment\n            var segmentPoint;\n            outputArray = [];\n            for (i = 0; i < n; i += 1) {\n\n                segmentPoint = args[i];\n                outputArray.push(new Lineto(segmentPoint));\n            }\n            return outputArray;\n        }\n    }\n};\n\nvar linetoPrototype = {\n\n    clone: function() {\n\n        return new Lineto(this.end);\n    },\n\n    divideAt: function(ratio) {\n\n        var line = new Line(this.start, this.end);\n        var divided = line.divideAt(ratio);\n        return [\n            new Lineto(divided[0]),\n            new Lineto(divided[1])\n        ];\n    },\n\n    divideAtLength: function(length) {\n\n        var line = new Line(this.start, this.end);\n        var divided = line.divideAtLength(length);\n        return [\n            new Lineto(divided[0]),\n            new Lineto(divided[1])\n        ];\n    },\n\n    getSubdivisions: function() {\n\n        return [];\n    },\n\n    isDifferentiable: function() {\n\n        if (!this.previousSegment) return false;\n\n        return !this.start.equals(this.end);\n    },\n\n    round: function(precision) {\n\n        this.end.round(precision);\n        return this;\n    },\n\n    scale: function(sx, sy, origin) {\n\n        this.end.scale(sx, sy, origin);\n        return this;\n    },\n\n    serialize: function() {\n\n        var end = this.end;\n        return this.type + ' ' + end.x + ' ' + end.y;\n    },\n\n    toString: function() {\n\n        return this.type + ' ' + this.start + ' ' + this.end;\n    },\n\n    translate: function(tx, ty) {\n\n        this.end.translate(tx, ty);\n        return this;\n    }\n};\n\nObject.defineProperty(linetoPrototype, 'type', {\n\n    configurable: true,\n\n    enumerable: true,\n\n    value: 'L'\n});\n\nLineto.prototype = extend(segmentPrototype, Line.prototype, linetoPrototype);\n\nvar Curveto = function() {\n\n    var args = [];\n    var n = arguments.length;\n    for (var i = 0; i < n; i++) {\n        args.push(arguments[i]);\n    }\n\n    if (!(this instanceof Curveto)) { // switching context of `this` to Curveto when called without `new`\n        return applyToNew(Curveto, args);\n    }\n\n    if (n === 0) {\n        throw new Error('Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).');\n    }\n\n    var outputArray;\n\n    if (args[0] instanceof Curve) { // curves provided\n        if (n === 1) {\n            this.controlPoint1 = args[0].controlPoint1.clone();\n            this.controlPoint2 = args[0].controlPoint2.clone();\n            this.end = args[0].end.clone();\n            return this;\n\n        } else {\n            throw new Error('Curveto constructor expects a curve, 3 points, or 6 coordinates (' + n + ' curves provided).');\n        }\n\n    } else if (typeof args[0] === 'string' || typeof args[0] === 'number') { // coordinates provided\n        if (n === 6) {\n            this.controlPoint1 = new Point(+args[0], +args[1]);\n            this.controlPoint2 = new Point(+args[2], +args[3]);\n            this.end = new Point(+args[4], +args[5]);\n            return this;\n\n        } else if (n < 6) {\n            throw new Error('Curveto constructor expects a curve, 3 points, or 6 coordinates (' + n + ' coordinates provided).');\n\n        } else { // this is a poly-bezier segment\n            var segmentCoords;\n            outputArray = [];\n            for (i = 0; i < n; i += 6) { // coords come in groups of six\n\n                segmentCoords = args.slice(i, i + 6); // will send fewer than six coords if args.length not divisible by 6\n                outputArray.push(applyToNew(Curveto, segmentCoords));\n            }\n            return outputArray;\n        }\n\n    } else { // points provided (needs to be last to also cover plain objects with x and y)\n        if (n === 3) {\n            this.controlPoint1 = new Point(args[0]);\n            this.controlPoint2 = new Point(args[1]);\n            this.end = new Point(args[2]);\n            return this;\n\n        } else if (n < 3) {\n            throw new Error('Curveto constructor expects a curve, 3 points, or 6 coordinates (' + n + ' points provided).');\n\n        } else { // this is a poly-bezier segment\n            var segmentPoints;\n            outputArray = [];\n            for (i = 0; i < n; i += 3) { // points come in groups of three\n\n                segmentPoints = args.slice(i, i + 3); // will send fewer than three points if args.length is not divisible by 3\n                outputArray.push(applyToNew(Curveto, segmentPoints));\n            }\n            return outputArray;\n        }\n    }\n};\n\nvar curvetoPrototype = {\n\n    clone: function() {\n\n        return new Curveto(this.controlPoint1, this.controlPoint2, this.end);\n    },\n\n    divideAt: function(ratio, opt) {\n\n        var curve = new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n        var divided = curve.divideAt(ratio, opt);\n        return [\n            new Curveto(divided[0]),\n            new Curveto(divided[1])\n        ];\n    },\n\n    divideAtLength: function(length, opt) {\n\n        var curve = new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n        var divided = curve.divideAtLength(length, opt);\n        return [\n            new Curveto(divided[0]),\n            new Curveto(divided[1])\n        ];\n    },\n\n    divideAtT: function(t) {\n\n        var curve = new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n        var divided = curve.divideAtT(t);\n        return [\n            new Curveto(divided[0]),\n            new Curveto(divided[1])\n        ];\n    },\n\n    isDifferentiable: function() {\n\n        if (!this.previousSegment) return false;\n\n        var start = this.start;\n        var control1 = this.controlPoint1;\n        var control2 = this.controlPoint2;\n        var end = this.end;\n\n        return !(start.equals(control1) && control1.equals(control2) && control2.equals(end));\n    },\n\n    round: function(precision) {\n\n        this.controlPoint1.round(precision);\n        this.controlPoint2.round(precision);\n        this.end.round(precision);\n        return this;\n    },\n\n    scale: function(sx, sy, origin) {\n\n        this.controlPoint1.scale(sx, sy, origin);\n        this.controlPoint2.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    },\n\n    serialize: function() {\n\n        var c1 = this.controlPoint1;\n        var c2 = this.controlPoint2;\n        var end = this.end;\n        return this.type + ' ' + c1.x + ' ' + c1.y + ' ' + c2.x + ' ' + c2.y + ' ' + end.x + ' ' + end.y;\n    },\n\n    toString: function() {\n\n        return this.type + ' ' + this.start + ' ' + this.controlPoint1 + ' ' + this.controlPoint2 + ' ' + this.end;\n    },\n\n    translate: function(tx, ty) {\n\n        this.controlPoint1.translate(tx, ty);\n        this.controlPoint2.translate(tx, ty);\n        this.end.translate(tx, ty);\n        return this;\n    }\n};\n\nObject.defineProperty(curvetoPrototype, 'type', {\n\n    configurable: true,\n\n    enumerable: true,\n\n    value: 'C'\n});\n\nCurveto.prototype = extend(segmentPrototype, Curve.prototype, curvetoPrototype);\n\nvar Moveto = function() {\n\n    var args = [];\n    var n = arguments.length;\n    for (var i = 0; i < n; i++) {\n        args.push(arguments[i]);\n    }\n\n    if (!(this instanceof Moveto)) { // switching context of `this` to Moveto when called without `new`\n        return applyToNew(Moveto, args);\n    }\n\n    if (n === 0) {\n        throw new Error('Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).');\n    }\n\n    var outputArray;\n\n    if (args[0] instanceof Line) { // lines provided\n        if (n === 1) {\n            this.end = args[0].end.clone();\n            return this;\n\n        } else {\n            throw new Error('Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (' + n + ' lines provided).');\n        }\n\n    } else if (args[0] instanceof Curve) { // curves provided\n        if (n === 1) {\n            this.end = args[0].end.clone();\n            return this;\n\n        } else {\n            throw new Error('Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (' + n + ' curves provided).');\n        }\n\n    } else if (typeof args[0] === 'string' || typeof args[0] === 'number') { // coordinates provided\n        if (n === 2) {\n            this.end = new Point(+args[0], +args[1]);\n            return this;\n\n        } else if (n < 2) {\n            throw new Error('Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (' + n + ' coordinates provided).');\n\n        } else { // this is a moveto-with-subsequent-poly-line segment\n            var segmentCoords;\n            outputArray = [];\n            for (i = 0; i < n; i += 2) { // coords come in groups of two\n\n                segmentCoords = args.slice(i, i + 2); // will send one coord if args.length not divisible by 2\n                if (i === 0) outputArray.push(applyToNew(Moveto, segmentCoords));\n                else outputArray.push(applyToNew(Lineto, segmentCoords));\n            }\n            return outputArray;\n        }\n\n    } else { // points provided (needs to be last to also cover plain objects with x and y)\n        if (n === 1) {\n            this.end = new Point(args[0]);\n            return this;\n\n        } else { // this is a moveto-with-subsequent-poly-line segment\n            var segmentPoint;\n            outputArray = [];\n            for (i = 0; i < n; i += 1) { // points come one by one\n\n                segmentPoint = args[i];\n                if (i === 0) outputArray.push(new Moveto(segmentPoint));\n                else outputArray.push(new Lineto(segmentPoint));\n            }\n            return outputArray;\n        }\n    }\n};\n\nvar movetoPrototype = {\n\n    bbox: function() {\n\n        return null;\n    },\n\n    clone: function() {\n\n        return new Moveto(this.end);\n    },\n\n    closestPoint: function() {\n\n        return this.end.clone();\n    },\n\n    closestPointNormalizedLength: function() {\n\n        return 0;\n    },\n\n    closestPointLength: function() {\n\n        return 0;\n    },\n\n    closestPointT: function() {\n\n        return 1;\n    },\n\n    closestPointTangent: function() {\n\n        return null;\n    },\n\n    divideAt: function() {\n\n        return [\n            this.clone(),\n            this.clone()\n        ];\n    },\n\n    divideAtLength: function() {\n\n        return [\n            this.clone(),\n            this.clone()\n        ];\n    },\n\n    equals: function(m) {\n\n        return this.end.equals(m.end);\n    },\n\n    getSubdivisions: function() {\n\n        return [];\n    },\n\n    isDifferentiable: function() {\n\n        return false;\n    },\n\n    isSubpathStart: true,\n\n    isVisible: false,\n\n    length: function() {\n\n        return 0;\n    },\n\n    lengthAtT: function() {\n\n        return 0;\n    },\n\n    pointAt: function() {\n\n        return this.end.clone();\n    },\n\n    pointAtLength: function() {\n\n        return this.end.clone();\n    },\n\n    pointAtT: function() {\n\n        return this.end.clone();\n    },\n\n    round: function(precision) {\n\n        this.end.round(precision);\n        return this;\n    },\n\n    scale: function(sx, sy, origin) {\n\n        this.end.scale(sx, sy, origin);\n        return this;\n    },\n\n    serialize: function() {\n\n        var end = this.end;\n        return this.type + ' ' + end.x + ' ' + end.y;\n    },\n\n    tangentAt: function() {\n\n        return null;\n    },\n\n    tangentAtLength: function() {\n\n        return null;\n    },\n\n    tangentAtT: function() {\n\n        return null;\n    },\n\n    toString: function() {\n\n        return this.type + ' ' + this.end;\n    },\n\n    translate: function(tx, ty) {\n\n        this.end.translate(tx, ty);\n        return this;\n    }\n};\n\nObject.defineProperty(movetoPrototype, 'start', {\n\n    configurable: true,\n\n    enumerable: true,\n\n    get: function() {\n\n        throw new Error('Illegal access. Moveto segments should not need a start property.');\n    }\n});\n\nObject.defineProperty(movetoPrototype, 'type', {\n\n    configurable: true,\n\n    enumerable: true,\n\n    value: 'M'\n});\n\nMoveto.prototype = extend(segmentPrototype, movetoPrototype); // does not inherit from any other geometry object\n\nvar Closepath = function() {\n\n    var args = [];\n    var n = arguments.length;\n    for (var i = 0; i < n; i++) {\n        args.push(arguments[i]);\n    }\n\n    if (!(this instanceof Closepath)) { // switching context of `this` to Closepath when called without `new`\n        return applyToNew(Closepath, args);\n    }\n\n    if (n > 0) {\n        throw new Error('Closepath constructor expects no arguments.');\n    }\n\n    return this;\n};\n\nvar closepathPrototype = {\n\n    clone: function() {\n\n        return new Closepath();\n    },\n\n    divideAt: function(ratio) {\n\n        var line = new Line(this.start, this.end);\n        var divided = line.divideAt(ratio);\n        return [\n            // if we didn't actually cut into the segment, first divided part can stay as Z\n            (divided[1].isDifferentiable() ? new Lineto(divided[0]) : this.clone()),\n            new Lineto(divided[1])\n        ];\n    },\n\n    divideAtLength: function(length) {\n\n        var line = new Line(this.start, this.end);\n        var divided = line.divideAtLength(length);\n        return [\n            // if we didn't actually cut into the segment, first divided part can stay as Z\n            (divided[1].isDifferentiable() ? new Lineto(divided[0]) : this.clone()),\n            new Lineto(divided[1])\n        ];\n    },\n\n    getSubdivisions: function() {\n\n        return [];\n    },\n\n    isDifferentiable: function() {\n\n        if (!this.previousSegment || !this.subpathStartSegment) return false;\n\n        return !this.start.equals(this.end);\n    },\n\n    round: function() {\n\n        return this;\n    },\n\n    scale: function() {\n\n        return this;\n    },\n\n    serialize: function() {\n\n        return this.type;\n    },\n\n    toString: function() {\n\n        return this.type + ' ' + this.start + ' ' + this.end;\n    },\n\n    translate: function() {\n\n        return this;\n    }\n};\n\nObject.defineProperty(closepathPrototype, 'end', {\n    // get a reference to the end point of subpath start segment\n\n    configurable: true,\n\n    enumerable: true,\n\n    get: function() {\n\n        if (!this.subpathStartSegment) throw new Error('Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)');\n\n        return this.subpathStartSegment.end;\n    }\n});\n\nObject.defineProperty(closepathPrototype, 'type', {\n\n    configurable: true,\n\n    enumerable: true,\n\n    value: 'Z'\n});\n\nClosepath.prototype = extend(segmentPrototype, Line.prototype, closepathPrototype);\n\nvar segmentTypes = Path.segmentTypes = {\n    L: Lineto,\n    C: Curveto,\n    M: Moveto,\n    Z: Closepath,\n    z: Closepath\n};\n\nPath.regexSupportedData = new RegExp('^[\\\\s\\\\d' + Object.keys(segmentTypes).join('') + ',.]*$');\n\nPath.isDataSupported = function(data) {\n\n    if (typeof data !== 'string') return false;\n    return this.regexSupportedData.test(data);\n};\n","import { Path } from './path.mjs';\nimport { Curve } from './curve.mjs';\nimport { Point } from './point.mjs';\n\nexport const bezier = {\n\n    // Cubic Bezier curve path through points.\n    // @deprecated\n    // @param {array} points Array of points through which the smooth line will go.\n    // @return {array} SVG Path commands as an array\n    curveThroughPoints: function(points) {\n\n        console.warn('deprecated');\n\n        return new Path(Curve.throughPoints(points)).serialize();\n    },\n\n    // Get open-ended Bezier Spline Control Points.\n    // @deprecated\n    // @param knots Input Knot Bezier spline points (At least two points!).\n    // @param firstControlPoints Output First Control points. Array of knots.length - 1 length.\n    // @param secondControlPoints Output Second Control points. Array of knots.length - 1 length.\n    getCurveControlPoints: function(knots) {\n\n        console.warn('deprecated');\n\n        var firstControlPoints = [];\n        var secondControlPoints = [];\n        var n = knots.length - 1;\n        var i;\n\n        // Special case: Bezier curve should be a straight line.\n        if (n == 1) {\n            // 3P1 = 2P0 + P3\n            firstControlPoints[0] = new Point(\n                (2 * knots[0].x + knots[1].x) / 3,\n                (2 * knots[0].y + knots[1].y) / 3\n            );\n\n            // P2 = 2P1  P0\n            secondControlPoints[0] = new Point(\n                2 * firstControlPoints[0].x - knots[0].x,\n                2 * firstControlPoints[0].y - knots[0].y\n            );\n\n            return [firstControlPoints, secondControlPoints];\n        }\n\n        // Calculate first Bezier control points.\n        // Right hand side vector.\n        var rhs = [];\n\n        // Set right hand side X values.\n        for (i = 1; i < n - 1; i++) {\n            rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;\n        }\n\n        rhs[0] = knots[0].x + 2 * knots[1].x;\n        rhs[n - 1] = (8 * knots[n - 1].x + knots[n].x) / 2.0;\n\n        // Get first control points X-values.\n        var x = this.getFirstControlPoints(rhs);\n\n        // Set right hand side Y values.\n        for (i = 1; i < n - 1; ++i) {\n            rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;\n        }\n\n        rhs[0] = knots[0].y + 2 * knots[1].y;\n        rhs[n - 1] = (8 * knots[n - 1].y + knots[n].y) / 2.0;\n\n        // Get first control points Y-values.\n        var y = this.getFirstControlPoints(rhs);\n\n        // Fill output arrays.\n        for (i = 0; i < n; i++) {\n            // First control point.\n            firstControlPoints.push(new Point(x[i], y[i]));\n\n            // Second control point.\n            if (i < n - 1) {\n                secondControlPoints.push(new Point(\n                    2 * knots [i + 1].x - x[i + 1],\n                    2 * knots[i + 1].y - y[i + 1]\n                ));\n\n            } else {\n                secondControlPoints.push(new Point(\n                    (knots[n].x + x[n - 1]) / 2,\n                    (knots[n].y + y[n - 1]) / 2)\n                );\n            }\n        }\n\n        return [firstControlPoints, secondControlPoints];\n    },\n\n    // Divide a Bezier curve into two at point defined by value 't' <0,1>.\n    // Using deCasteljau algorithm. http://math.stackexchange.com/a/317867\n    // @deprecated\n    // @param control points (start, control start, control end, end)\n    // @return a function that accepts t and returns 2 curves.\n    getCurveDivider: function(p0, p1, p2, p3) {\n\n        console.warn('deprecated');\n\n        var curve = new Curve(p0, p1, p2, p3);\n\n        return function divideCurve(t) {\n\n            var divided = curve.divide(t);\n\n            return [{\n                p0: divided[0].start,\n                p1: divided[0].controlPoint1,\n                p2: divided[0].controlPoint2,\n                p3: divided[0].end\n            }, {\n                p0: divided[1].start,\n                p1: divided[1].controlPoint1,\n                p2: divided[1].controlPoint2,\n                p3: divided[1].end\n            }];\n        };\n    },\n\n    // Solves a tridiagonal system for one of coordinates (x or y) of first Bezier control points.\n    // @deprecated\n    // @param rhs Right hand side vector.\n    // @return Solution vector.\n    getFirstControlPoints: function(rhs) {\n\n        console.warn('deprecated');\n\n        var n = rhs.length;\n        // `x` is a solution vector.\n        var x = [];\n        var tmp = [];\n        var b = 2.0;\n\n        x[0] = rhs[0] / b;\n\n        // Decomposition and forward substitution.\n        for (var i = 1; i < n; i++) {\n            tmp[i] = 1 / b;\n            b = (i < n - 1 ? 4.0 : 3.5) - tmp[i];\n            x[i] = (rhs[i] - x[i - 1]) / b;\n        }\n\n        for (i = 1; i < n; i++) {\n            // Backsubstitution.\n            x[n - i - 1] -= tmp[n - i] * x[n - i];\n        }\n\n        return x;\n    },\n\n    // Solves an inversion problem -- Given the (x, y) coordinates of a point which lies on\n    // a parametric curve x = x(t)/w(t), y = y(t)/w(t), nd the parameter value t\n    // which corresponds to that point.\n    // @deprecated\n    // @param control points (start, control start, control end, end)\n    // @return a function that accepts a point and returns t.\n    getInversionSolver: function(p0, p1, p2, p3) {\n\n        console.warn('deprecated');\n\n        var curve = new Curve(p0, p1, p2, p3);\n\n        return function solveInversion(p) {\n\n            return curve.closestPointT(p);\n        };\n    }\n};\n","import { Point } from './point.mjs';\nimport { Polyline } from './polyline.mjs';\nimport { extend } from './extend.mjs';\nimport { types } from './types.mjs';\nimport { clonePoints, parsePoints, convexHull } from './points.mjs';\n\nexport const Polygon = function(points) {\n\n    if (!(this instanceof Polygon)) {\n        return new Polygon(points);\n    }\n\n    if (typeof points === 'string') {\n        return new Polygon.parse(points);\n    }\n\n    this.points = (Array.isArray(points) ? points.map(Point) : []);\n};\n\nPolygon.parse = function(svgString) {\n    return new Polygon(parsePoints(svgString));\n};\n\nPolygon.fromRect = function(rect) {\n    return new Polygon([\n        rect.topLeft(),\n        rect.topRight(),\n        rect.bottomRight(),\n        rect.bottomLeft()\n    ]);\n};\n\nPolygon.prototype = extend(Polyline.prototype, {\n\n    type: types.Polygon,\n\n    clone: function() {\n        return new Polygon(clonePoints(this.points));\n    },\n\n    convexHull: function() {\n        return new Polygon(convexHull(this.points));\n    },\n\n    lengthPoints: function() {\n        const { start, end, points } = this;\n        if (points.length <= 1 || start.equals(end)) return points;\n        return [...points, start.clone()];\n    }\n\n});\n","import { Line } from './line.mjs';\nimport { Polygon } from './polygon.mjs';\nimport { Rect } from './rect.mjs';\nimport { types } from './types.mjs';\n\nexport function exists(shape1, shape2, shape1opt, shape2opt) {\n    switch (shape1.type) {\n        case types.Line: {\n            switch (shape2.type) {\n                case types.Line: {\n                    return lineWithLine(shape1, shape2);\n                }\n            }\n            break;\n        }\n        case types.Ellipse: {\n            switch (shape2.type) {\n                case types.Line: {\n                    return ellipseWithLine(shape1, shape2);\n                }\n                case types.Ellipse: {\n                    return ellipseWithEllipse(shape1, shape2);\n                }\n            }\n            break;\n        }\n        case types.Rect: {\n            switch (shape2.type) {\n                case types.Line: {\n                    return rectWithLine(shape1, shape2);\n                }\n                case types.Ellipse: {\n                    return rectWithEllipse(shape1, shape2);\n                }\n                case types.Rect: {\n                    return rectWithRect(shape1, shape2);\n                }\n            }\n            break;\n        }\n        case types.Polyline: {\n            switch (shape2.type) {\n                case types.Line: {\n                    return polylineWithLine(shape1, shape2);\n                }\n                case types.Ellipse: {\n                    return polylineWithEllipse(shape1, shape2);\n                }\n                case types.Rect: {\n                    return polylineWithRect(shape1, shape2);\n                }\n                case types.Polyline: {\n                    return polylineWithPolyline(shape1, shape2);\n                }\n            }\n            break;\n        }\n        case types.Polygon: {\n            switch (shape2.type) {\n                case types.Line: {\n                    return polygonWithLine(shape1, shape2);\n                }\n                case types.Ellipse: {\n                    return polygonWithEllipse(shape1, shape2);\n                }\n                case types.Rect: {\n                    return polygonWithRect(shape1, shape2);\n                }\n                case types.Polyline: {\n                    return polygonWithPolyline(shape1, shape2);\n                }\n                case types.Polygon: {\n                    return polygonWithPolygon(shape1, shape2);\n                }\n            }\n            break;\n        }\n        case types.Path: {\n            switch (shape2.type) {\n                case types.Line: {\n                    return pathWithLine(shape1, shape2, shape1opt);\n                }\n                case types.Ellipse: {\n                    return pathWithEllipse(shape1, shape2, shape1opt);\n                }\n                case types.Rect: {\n                    return pathWithRect(shape1, shape2, shape1opt);\n                }\n                case types.Polyline: {\n                    return pathWithPolyline(shape1, shape2, shape1opt);\n                }\n                case types.Polygon: {\n                    return pathWithPolygon(shape1, shape2, shape1opt);\n                }\n                case types.Path: {\n                    return pathWithPath(shape1, shape2, shape1opt, shape2opt);\n                }\n            }\n            break;\n        }\n    }\n    // None of the cases above\n    switch (shape2.type) {\n        case types.Ellipse:\n        case types.Rect:\n        case types.Polyline:\n        case types.Polygon:\n        case types.Path: {\n            return exists(shape2, shape1, shape2opt, shape1opt);\n        }\n        default: {\n            throw Error(`The intersection for ${shape1} and ${shape2} could not be found.`);\n        }\n    }\n}\n\n/* Line */\n\nexport function lineWithLine(line1, line2) {\n    const x1 = line1.start.x;\n    const y1 = line1.start.y;\n    const x2 = line1.end.x;\n    const y2 = line1.end.y;\n    const x3 = line2.start.x;\n    const y3 = line2.start.y;\n    const x4 = line2.end.x;\n    const y4 = line2.end.y;\n    const s1x = x2 - x1;\n    const s1y = y2 - y1;\n    const s2x = x4 - x3;\n    const s2y = y4 - y3;\n    const s3x = x1 - x3;\n    const s3y = y1 - y3;\n    const p = s1x * s2y - s2x * s1y;\n    const s = (s1x * s3y - s1y * s3x) / p;\n    const t = (s2x * s3y - s2y * s3x) / p;\n    return s >= 0 && s <= 1 && t >= 0 && t <= 1;\n}\n\n/* Ellipse */\n\nexport function ellipseWithLine(ellipse, line) {\n    const rex = ellipse.a;\n    const rey = ellipse.b;\n    const xe = ellipse.x;\n    const ye = ellipse.y;\n    const x1 = line.start.x - xe;\n    const x2 = line.end.x - xe;\n    const y1 = line.start.y - ye;\n    const y2 = line.end.y - ye;\n    const rex_2 = rex * rex;\n    const rey_2 = rey * rey;\n    const dx = x2 - x1;\n    const dy = y2 - y1;\n    const A = dx * dx / rex_2 + dy * dy / rey_2;\n    const B = 2 * x1 * dx / rex_2 + 2 * y1 * dy / rey_2;\n    const C = x1 * x1 / rex_2 + y1 * y1 / rey_2 - 1;\n    const D = B * B - 4 * A * C;\n    if (D === 0) {\n        const t = -B / 2 / A;\n        return t >= 0 && t <= 1;\n    } else if (D > 0) {\n        const sqrt = Math.sqrt(D);\n        const t1 = (-B + sqrt) / 2 / A;\n        const t2 = (-B - sqrt) / 2 / A;\n        return (t1 >= 0 && t1 <= 1) || (t2 >= 0 && t2 <= 1);\n    }\n    return false;\n}\n\nexport function ellipseWithEllipse(ellipse1, ellipse2) {\n    return _ellipsesIntersection(ellipse1, 0, ellipse2, 0);\n}\n\n/* Rect */\n\nexport function rectWithLine(rect, line) {\n    const { start, end } = line;\n    const { x, y, width, height } = rect;\n    if (\n        (start.x > x + width && end.x > x + width)\n        || (start.x < x && end.x < x)\n        || (start.y > y + height && end.y > y + height)\n        || (start.y < y && end.y < y)\n    ) {\n        return false;\n    }\n    if (rect.containsPoint(line.start) || rect.containsPoint(line.end)) {\n        return true;\n    }\n    return lineWithLine(rect.topLine(), line)\n        || lineWithLine(rect.rightLine(), line)\n        || lineWithLine(rect.bottomLine(), line)\n        || lineWithLine(rect.leftLine(), line);\n}\n\nexport function rectWithEllipse(rect, ellipse) {\n    if (!rectWithRect(rect, Rect.fromEllipse(ellipse))) return false;\n    return polygonWithEllipse(Polygon.fromRect(rect), ellipse);\n}\n\nexport function rectWithRect(rect1, rect2) {\n    return rect1.x < rect2.x + rect2.width\n        && rect1.x + rect1.width > rect2.x\n        && rect1.y < rect2.y + rect2.height\n        && rect1.y + rect1.height > rect2.y;\n}\n\n/* Polyline */\n\nexport function polylineWithLine(polyline, line) {\n    return _polylineWithLine(polyline, line, { interior: false });\n}\n\nexport function polylineWithEllipse(polyline, ellipse) {\n    return _polylineWithEllipse(polyline, ellipse, { interior: false });\n}\n\nexport function polylineWithRect(polyline, rect) {\n    return _polylineWithRect(polyline, rect, { interior: false });\n}\n\nexport function polylineWithPolyline(polyline1, polyline2) {\n    return _polylineWithPolyline(polyline1, polyline2, { interior: false });\n}\n\n/* Polygon */\n\nexport function polygonWithLine(polygon, line) {\n    return _polylineWithLine(polygon, line, { interior: true });\n}\n\nexport function polygonWithEllipse(polygon, ellipse) {\n    return _polylineWithEllipse(polygon, ellipse, { interior: true });\n}\n\nexport function polygonWithRect(polygon, rect) {\n    return _polylineWithRect(polygon, rect, { interior: true });\n}\n\nexport function polygonWithPolyline(polygon, polyline) {\n    return _polylineWithPolyline(polygon, polyline, { interior: true });\n}\n\nexport function polygonWithPolygon(polygon1, polygon2) {\n    return _polylineWithPolygon(polygon1, polygon2, { interior: true });\n}\n\n/* Path */\n\nexport function pathWithLine(path, line, pathOpt) {\n    return path.getSubpaths().some(subpath => {\n        const [polyline] = subpath.toPolylines(pathOpt);\n        const { type } = subpath.getSegment(-1);\n        if (type === 'Z') {\n            return polygonWithLine(polyline, line);\n        } else {\n            return polylineWithLine(polyline, line);\n        }\n    });\n}\n\nexport function pathWithEllipse(path, ellipse, pathOpt) {\n    return path.getSubpaths().some(subpath => {\n        const [polyline] = subpath.toPolylines(pathOpt);\n        const { type } = subpath.getSegment(-1);\n        if (type === 'Z') {\n            return polygonWithEllipse(polyline, ellipse);\n        } else {\n            return polylineWithEllipse(polyline, ellipse);\n        }\n    });\n}\n\nexport function pathWithRect(path, rect, pathOpt) {\n    return pathWithPolygon(path, Polygon.fromRect(rect), pathOpt);\n}\n\nexport function pathWithPolyline(path, polyline, pathOpt) {\n    return _pathWithPolyline(path, polyline, pathOpt, { interior: false });\n}\n\nexport function pathWithPolygon(path, polygon, pathOpt) {\n    return _pathWithPolyline(path, polygon, pathOpt, { interior: true });\n}\n\nexport function pathWithPath(path1, path2, pathOpt1, pathOpt2) {\n    return path1.getSubpaths().some(subpath => {\n        const [polyline1] = subpath.toPolylines(pathOpt1);\n        const { type } = subpath.getSegment(-1);\n        if (type === 'Z') {\n            return pathWithPolygon(path2, polyline1, pathOpt2);\n        } else {\n            return pathWithPolyline(path2, polyline1, pathOpt2);\n        }\n    });\n}\n\nfunction _polylineWithLine(polyline, line, opt = {}) {\n    const { interior = false } = opt;\n    let thisPoints;\n    if (interior) {\n        if (polyline.containsPoint(line.start)) {\n            // If any point of the polyline lies inside this polygon (interior = true)\n            // there is an intersection (we've chosen the start point)\n            return true;\n        }\n        const { start, end, points } = polyline;\n        thisPoints = end.equals(start) ? points : [...points, start];\n    } else {\n        thisPoints = polyline.points;\n    }\n    const { length } = thisPoints;\n    const segment = new Line();\n    for (let i = 0; i < length - 1; i++) {\n        segment.start = thisPoints[i];\n        segment.end = thisPoints[i + 1];\n        if (lineWithLine(line, segment)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction _polylineWithEllipse(polyline, ellipse, opt = {}) {\n    const { start, end, points } = polyline;\n    if (ellipse.containsPoint(start)) {\n        return true;\n    }\n    let thisPoints;\n    const { interior = false } = opt;\n    if (interior) {\n        if (polyline.containsPoint(ellipse.center())) {\n            // If any point of the ellipse lies inside this polygon (interior = true)\n            // there is an intersection (we've chosen the center point)\n            return true;\n        }\n        thisPoints = end.equals(start) ? points : [...points, start];\n    } else {\n        thisPoints = points;\n    }\n\n    const { length } = thisPoints;\n    const segment = new Line();\n    for (let i = 0; i < length - 1; i++) {\n        segment.start = thisPoints[i];\n        segment.end = thisPoints[i + 1];\n        if (ellipseWithLine(ellipse, segment)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction _polylineWithRect(polyline, rect, opt) {\n    const polygon = Polygon.fromRect(rect);\n    return _polylineWithPolygon(polyline, polygon, opt);\n}\n\nfunction _pathWithPolyline(path, polyline1, pathOpt, opt) {\n    return path.getSubpaths().some(subpath => {\n        const [polyline2] = subpath.toPolylines(pathOpt);\n        const { type } = subpath.getSegment(-1);\n        if (type === 'Z') {\n            return _polylineWithPolygon(polyline1, polyline2, opt);\n        } else {\n            return _polylineWithPolyline(polyline1, polyline2, opt);\n        }\n    });\n}\n\nfunction _polylineWithPolyline(polyline1, polyline2, opt = {}) {\n    const { interior = false } = opt;\n    let thisPolyline;\n    if (interior) {\n        const { start } = polyline2;\n        if (polyline1.containsPoint(start)) {\n            // If any point of the polyline lies inside this polygon (interior = true)\n            // there is an intersection (we've chosen the start point)\n            return true;\n        }\n        thisPolyline = polyline1.clone().close();\n    } else {\n        thisPolyline = polyline1;\n    }\n    const otherPoints = polyline2.points;\n    const { length } = otherPoints;\n    const segment = new Line();\n    for (let i = 0; i < length - 1; i++) {\n        segment.start = otherPoints[i];\n        segment.end = otherPoints[i + 1];\n        if (polylineWithLine(thisPolyline, segment)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction _polylineWithPolygon(polyline, polygon, opt) {\n    return polygon.containsPoint(polyline.start) || _polylineWithPolyline(polyline, polygon.clone().close(), opt);\n}\n\nfunction _ellipsesIntersection(e1, w1, e2, w2) {\n    const { cos, sin } = Math;\n    const sinW1 = sin(w1);\n    const cosW1 = cos(w1);\n    const sinW2 = sin(w2);\n    const cosW2 = cos(w2);\n    const sinW1s = sinW1 * sinW1;\n    const cosW1s = cosW1 * cosW1;\n    const sinCos1 = sinW1 * cosW1;\n    const sinW2s = sinW2 * sinW2;\n    const cosW2s = cosW2 * cosW2;\n    const sinCos2 = sinW2 * cosW2;\n    const a1s = e1.a * e1.a;\n    const b1s = e1.b * e1.b;\n    const a2s = e2.a * e2.a;\n    const b2s = e2.b * e2.b;\n    const A1 = a1s * sinW1s + b1s * cosW1s;\n    const A2 = a2s * sinW2s + b2s * cosW2s;\n    const B1 = a1s * cosW1s + b1s * sinW1s;\n    const B2 = a2s * cosW2s + b2s * sinW2s;\n    let C1 = 2 * (b1s - a1s) * sinCos1;\n    let C2 = 2 * (b2s - a2s) * sinCos2;\n    let D1 = (-2 * A1 * e1.x - C1 * e1.y);\n    let D2 = (-2 * A2 * e2.x - C2 * e2.y);\n    let E1 = (-C1 * e1.x - 2 * B1 * e1.y);\n    let E2 = (-C2 * e2.x - 2 * B2 * e2.y);\n    const F1 = A1 * e1.x * e1.x + B1 * e1.y * e1.y + C1 * e1.x * e1.y - a1s * b1s;\n    const F2 = A2 * e2.x * e2.x + B2 * e2.y * e2.y + C2 * e2.x * e2.y - a2s * b2s;\n\n    C1 = C1 / 2;\n    C2 = C2 / 2;\n    D1 = D1 / 2;\n    D2 = D2 / 2;\n    E1 = E1 / 2;\n    E2 = E2 / 2;\n\n    const l3 = det3([\n        [A1, C1, D1],\n        [C1, B1, E1],\n        [D1, E1, F1]\n    ]);\n    const l0 = det3([\n        [A2, C2, D2],\n        [C2, B2, E2],\n        [D2, E2, F2]\n    ]);\n    const l2 = 0.33333333 * (det3([\n        [A2, C1, D1],\n        [C2, B1, E1],\n        [D2, E1, F1]\n    ]) + det3([\n        [A1, C2, D1],\n        [C1, B2, E1],\n        [D1, E2, F1]\n    ]) + det3([\n        [A1, C1, D2],\n        [C1, B1, E2],\n        [D1, E1, F2]\n    ]));\n    const l1 = 0.33333333 * (det3([\n        [A1, C2, D2],\n        [C1, B2, E2],\n        [D1, E2, F2]\n    ]) + det3([\n        [A2, C1, D2],\n        [C2, B1, E2],\n        [D2, E1, F2]\n    ]) + det3([\n        [A2, C2, D1],\n        [C2, B2, E1],\n        [D2, E2, F1]\n    ]));\n\n    const delta1 = det2([\n        [l3, l2],\n        [l2, l1]\n    ]);\n    const delta2 = det2([\n        [l3, l1],\n        [l2, l0]\n    ]);\n    const delta3 = det2([\n        [l2, l1],\n        [l1, l0]\n    ]);\n\n    const dP = det2([\n        [2 * delta1, delta2],\n        [delta2, 2 * delta3]\n    ]);\n\n    if (dP > 0 && (l1 > 0 || l2 > 0)) {\n        return false;\n    }\n    return true;\n}\n\nfunction det2(m) {\n    return m[0][0] * m[1][1] - m[0][1] * m[1][0];\n}\n\nfunction det3(m) {\n    return m[0][0] * m[1][1] * m[2][2] -\n        m[0][0] * m[1][2] * m[2][1] -\n        m[0][1] * m[1][0] * m[2][2] +\n        m[0][1] * m[1][2] * m[2][0] +\n        m[0][2] * m[1][0] * m[2][1] -\n        m[0][2] * m[1][1] * m[2][0];\n}\n","// Geometry library.\n// -----------------\n\nexport * from './geometry.helpers.mjs';\nexport * from './bezier.mjs';\nexport * from './curve.mjs';\nexport * from './ellipse.mjs';\nexport * from './line.mjs';\nexport * from './path.mjs';\nexport * from './point.mjs';\nexport * from './polyline.mjs';\nexport * from './polygon.mjs';\nexport * from './rect.mjs';\nexport * from './types.mjs';\n\nimport * as _intersection from './intersection.mjs';\nexport const intersection = _intersection;\n","// Current version.\nexport var VERSION = '1.13.6';\n\n// Establish the root object, `window` (`self`) in the browser, `global`\n// on the server, or `this` in some virtual machines. We use `self`\n// instead of `window` for `WebWorker` support.\nexport var root = (typeof self == 'object' && self.self === self && self) ||\n          (typeof global == 'object' && global.global === global && global) ||\n          Function('return this')() ||\n          {};\n\n// Save bytes in the minified (but not gzipped) version:\nexport var ArrayProto = Array.prototype, ObjProto = Object.prototype;\nexport var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;\n\n// Create quick reference variables for speed access to core prototypes.\nexport var push = ArrayProto.push,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty;\n\n// Modern feature detection.\nexport var supportsArrayBuffer = typeof ArrayBuffer !== 'undefined',\n    supportsDataView = typeof DataView !== 'undefined';\n\n// All **ECMAScript 5+** native function implementations that we hope to use\n// are declared here.\nexport var nativeIsArray = Array.isArray,\n    nativeKeys = Object.keys,\n    nativeCreate = Object.create,\n    nativeIsView = supportsArrayBuffer && ArrayBuffer.isView;\n\n// Create references to these builtin functions because we override them.\nexport var _isNaN = isNaN,\n    _isFinite = isFinite;\n\n// Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\nexport var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\nexport var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n  'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n// The largest integer that can be represented exactly.\nexport var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n","// Some functions take a variable number of arguments, or a few expected\n// arguments at the beginning and then a variable number of values to operate\n// on. This helper accumulates all remaining arguments past the functions\n// argument length (or an explicit `startIndex`), into an array that becomes\n// the last argument. Similar to ES6s \"rest parameter\".\nexport default function restArguments(func, startIndex) {\n  startIndex = startIndex == null ? func.length - 1 : +startIndex;\n  return function() {\n    var length = Math.max(arguments.length - startIndex, 0),\n        rest = Array(length),\n        index = 0;\n    for (; index < length; index++) {\n      rest[index] = arguments[index + startIndex];\n    }\n    switch (startIndex) {\n      case 0: return func.call(this, rest);\n      case 1: return func.call(this, arguments[0], rest);\n      case 2: return func.call(this, arguments[0], arguments[1], rest);\n    }\n    var args = Array(startIndex + 1);\n    for (index = 0; index < startIndex; index++) {\n      args[index] = arguments[index];\n    }\n    args[startIndex] = rest;\n    return func.apply(this, args);\n  };\n}\n","// Is a given variable an object?\nexport default function isObject(obj) {\n  var type = typeof obj;\n  return type === 'function' || (type === 'object' && !!obj);\n}\n","// Is a given value equal to null?\nexport default function isNull(obj) {\n  return obj === null;\n}\n","// Is a given variable undefined?\nexport default function isUndefined(obj) {\n  return obj === void 0;\n}\n","import { toString } from './_setup.js';\n\n// Is a given value a boolean?\nexport default function isBoolean(obj) {\n  return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n}\n","// Is a given value a DOM element?\nexport default function isElement(obj) {\n  return !!(obj && obj.nodeType === 1);\n}\n","import { toString } from './_setup.js';\n\n// Internal function for creating a `toString`-based type tester.\nexport default function tagTester(name) {\n  var tag = '[object ' + name + ']';\n  return function(obj) {\n    return toString.call(obj) === tag;\n  };\n}\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('String');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Number');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Date');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('RegExp');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Error');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Symbol');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('ArrayBuffer');\n","import tagTester from './_tagTester.js';\nimport { root } from './_setup.js';\n\nvar isFunction = tagTester('Function');\n\n// Optimize `isFunction` if appropriate. Work around some `typeof` bugs in old\n// v8, IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).\nvar nodelist = root.document && root.document.childNodes;\nif (typeof /./ != 'function' && typeof Int8Array != 'object' && typeof nodelist != 'function') {\n  isFunction = function(obj) {\n    return typeof obj == 'function' || false;\n  };\n}\n\nexport default isFunction;\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('Object');\n","import { supportsDataView } from './_setup.js';\nimport hasObjectTag from './_hasObjectTag.js';\n\n// In IE 10 - Edge 13, `DataView` has string tag `'[object Object]'`.\n// In IE 11, the most common among them, this problem also applies to\n// `Map`, `WeakMap` and `Set`.\nexport var hasStringTagBug = (\n      supportsDataView && hasObjectTag(new DataView(new ArrayBuffer(8)))\n    ),\n    isIE11 = (typeof Map !== 'undefined' && hasObjectTag(new Map));\n","import tagTester from './_tagTester.js';\nimport isFunction from './isFunction.js';\nimport isArrayBuffer from './isArrayBuffer.js';\nimport { hasStringTagBug } from './_stringTagBug.js';\n\nvar isDataView = tagTester('DataView');\n\n// In IE 10 - Edge 13, we need a different heuristic\n// to determine whether an object is a `DataView`.\nfunction ie10IsDataView(obj) {\n  return obj != null && isFunction(obj.getInt8) && isArrayBuffer(obj.buffer);\n}\n\nexport default (hasStringTagBug ? ie10IsDataView : isDataView);\n","import { nativeIsArray } from './_setup.js';\nimport tagTester from './_tagTester.js';\n\n// Is a given value an array?\n// Delegates to ECMA5's native `Array.isArray`.\nexport default nativeIsArray || tagTester('Array');\n","import { hasOwnProperty } from './_setup.js';\n\n// Internal function to check whether `key` is an own property name of `obj`.\nexport default function has(obj, key) {\n  return obj != null && hasOwnProperty.call(obj, key);\n}\n","import tagTester from './_tagTester.js';\nimport has from './_has.js';\n\nvar isArguments = tagTester('Arguments');\n\n// Define a fallback version of the method in browsers (ahem, IE < 9), where\n// there isn't any inspectable \"Arguments\" type.\n(function() {\n  if (!isArguments(arguments)) {\n    isArguments = function(obj) {\n      return has(obj, 'callee');\n    };\n  }\n}());\n\nexport default isArguments;\n","import { _isFinite } from './_setup.js';\nimport isSymbol from './isSymbol.js';\n\n// Is a given object a finite number?\nexport default function isFinite(obj) {\n  return !isSymbol(obj) && _isFinite(obj) && !isNaN(parseFloat(obj));\n}\n","import { _isNaN } from './_setup.js';\nimport isNumber from './isNumber.js';\n\n// Is the given value `NaN`?\nexport default function isNaN(obj) {\n  return isNumber(obj) && _isNaN(obj);\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function constant(value) {\n  return function() {\n    return value;\n  };\n}\n","import { MAX_ARRAY_INDEX } from './_setup.js';\n\n// Common internal logic for `isArrayLike` and `isBufferLike`.\nexport default function createSizePropertyCheck(getSizeProperty) {\n  return function(collection) {\n    var sizeProperty = getSizeProperty(collection);\n    return typeof sizeProperty == 'number' && sizeProperty >= 0 && sizeProperty <= MAX_ARRAY_INDEX;\n  }\n}\n","// Internal helper to generate a function to obtain property `key` from `obj`.\nexport default function shallowProperty(key) {\n  return function(obj) {\n    return obj == null ? void 0 : obj[key];\n  };\n}\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `byteLength` property of an object.\nexport default shallowProperty('byteLength');\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getByteLength from './_getByteLength.js';\n\n// Internal helper to determine whether we should spend extensive checks against\n// `ArrayBuffer` et al.\nexport default createSizePropertyCheck(getByteLength);\n","import { supportsArrayBuffer, nativeIsView, toString } from './_setup.js';\nimport isDataView from './isDataView.js';\nimport constant from './constant.js';\nimport isBufferLike from './_isBufferLike.js';\n\n// Is a given value a typed array?\nvar typedArrayPattern = /\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;\nfunction isTypedArray(obj) {\n  // `ArrayBuffer.isView` is the most future-proof, so use it when available.\n  // Otherwise, fall back on the above regular expression.\n  return nativeIsView ? (nativeIsView(obj) && !isDataView(obj)) :\n                isBufferLike(obj) && typedArrayPattern.test(toString.call(obj));\n}\n\nexport default supportsArrayBuffer ? isTypedArray : constant(false);\n","import shallowProperty from './_shallowProperty.js';\n\n// Internal helper to obtain the `length` property of an object.\nexport default shallowProperty('length');\n","import { nonEnumerableProps, ObjProto } from './_setup.js';\nimport isFunction from './isFunction.js';\nimport has from './_has.js';\n\n// Internal helper to create a simple lookup structure.\n// `collectNonEnumProps` used to depend on `_.contains`, but this led to\n// circular imports. `emulatedSet` is a one-off solution that only works for\n// arrays of strings.\nfunction emulatedSet(keys) {\n  var hash = {};\n  for (var l = keys.length, i = 0; i < l; ++i) hash[keys[i]] = true;\n  return {\n    contains: function(key) { return hash[key] === true; },\n    push: function(key) {\n      hash[key] = true;\n      return keys.push(key);\n    }\n  };\n}\n\n// Internal helper. Checks `keys` for the presence of keys in IE < 9 that won't\n// be iterated by `for key in ...` and thus missed. Extends `keys` in place if\n// needed.\nexport default function collectNonEnumProps(obj, keys) {\n  keys = emulatedSet(keys);\n  var nonEnumIdx = nonEnumerableProps.length;\n  var constructor = obj.constructor;\n  var proto = (isFunction(constructor) && constructor.prototype) || ObjProto;\n\n  // Constructor is a special case.\n  var prop = 'constructor';\n  if (has(obj, prop) && !keys.contains(prop)) keys.push(prop);\n\n  while (nonEnumIdx--) {\n    prop = nonEnumerableProps[nonEnumIdx];\n    if (prop in obj && obj[prop] !== proto[prop] && !keys.contains(prop)) {\n      keys.push(prop);\n    }\n  }\n}\n","import isObject from './isObject.js';\nimport { nativeKeys, hasEnumBug } from './_setup.js';\nimport has from './_has.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve the names of an object's own properties.\n// Delegates to **ECMAScript 5**'s native `Object.keys`.\nexport default function keys(obj) {\n  if (!isObject(obj)) return [];\n  if (nativeKeys) return nativeKeys(obj);\n  var keys = [];\n  for (var key in obj) if (has(obj, key)) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isArray from './isArray.js';\nimport isString from './isString.js';\nimport isArguments from './isArguments.js';\nimport keys from './keys.js';\n\n// Is a given array, string, or object empty?\n// An \"empty\" object has no enumerable own-properties.\nexport default function isEmpty(obj) {\n  if (obj == null) return true;\n  // Skip the more expensive `toString`-based type checks if `obj` has no\n  // `.length`.\n  var length = getLength(obj);\n  if (typeof length == 'number' && (\n    isArray(obj) || isString(obj) || isArguments(obj)\n  )) return length === 0;\n  return getLength(keys(obj)) === 0;\n}\n","import keys from './keys.js';\n\n// Returns whether an object has a given set of `key:value` pairs.\nexport default function isMatch(object, attrs) {\n  var _keys = keys(attrs), length = _keys.length;\n  if (object == null) return !length;\n  var obj = Object(object);\n  for (var i = 0; i < length; i++) {\n    var key = _keys[i];\n    if (attrs[key] !== obj[key] || !(key in obj)) return false;\n  }\n  return true;\n}\n","import { VERSION } from './_setup.js';\n\n// If Underscore is called as a function, it returns a wrapped object that can\n// be used OO-style. This wrapper holds altered versions of all functions added\n// through `_.mixin`. Wrapped objects may be chained.\nexport default function _(obj) {\n  if (obj instanceof _) return obj;\n  if (!(this instanceof _)) return new _(obj);\n  this._wrapped = obj;\n}\n\n_.VERSION = VERSION;\n\n// Extracts the result from a wrapped and chained object.\n_.prototype.value = function() {\n  return this._wrapped;\n};\n\n// Provide unwrapping proxies for some methods used in engine operations\n// such as arithmetic and JSON stringification.\n_.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n\n_.prototype.toString = function() {\n  return String(this._wrapped);\n};\n","import getByteLength from './_getByteLength.js';\n\n// Internal function to wrap or shallow-copy an ArrayBuffer,\n// typed array or DataView to a new view, reusing the buffer.\nexport default function toBufferView(bufferSource) {\n  return new Uint8Array(\n    bufferSource.buffer || bufferSource,\n    bufferSource.byteOffset || 0,\n    getByteLength(bufferSource)\n  );\n}\n","import _ from './underscore.js';\nimport { toString, SymbolProto } from './_setup.js';\nimport getByteLength from './_getByteLength.js';\nimport isTypedArray from './isTypedArray.js';\nimport isFunction from './isFunction.js';\nimport { hasStringTagBug }  from './_stringTagBug.js';\nimport isDataView from './isDataView.js';\nimport keys from './keys.js';\nimport has from './_has.js';\nimport toBufferView from './_toBufferView.js';\n\n// We use this string twice, so give it a name for minification.\nvar tagDataView = '[object DataView]';\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction eq(a, b, aStack, bStack) {\n  // Identical objects are equal. `0 === -0`, but they aren't identical.\n  // See the [Harmony `egal` proposal](https://wiki.ecmascript.org/doku.php?id=harmony:egal).\n  if (a === b) return a !== 0 || 1 / a === 1 / b;\n  // `null` or `undefined` only equal to itself (strict comparison).\n  if (a == null || b == null) return false;\n  // `NaN`s are equivalent, but non-reflexive.\n  if (a !== a) return b !== b;\n  // Exhaust primitive checks\n  var type = typeof a;\n  if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;\n  return deepEq(a, b, aStack, bStack);\n}\n\n// Internal recursive comparison function for `_.isEqual`.\nfunction deepEq(a, b, aStack, bStack) {\n  // Unwrap any wrapped objects.\n  if (a instanceof _) a = a._wrapped;\n  if (b instanceof _) b = b._wrapped;\n  // Compare `[[Class]]` names.\n  var className = toString.call(a);\n  if (className !== toString.call(b)) return false;\n  // Work around a bug in IE 10 - Edge 13.\n  if (hasStringTagBug && className == '[object Object]' && isDataView(a)) {\n    if (!isDataView(b)) return false;\n    className = tagDataView;\n  }\n  switch (className) {\n    // These types are compared by value.\n    case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n    case '[object String]':\n      // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n      // equivalent to `new String(\"5\")`.\n      return '' + a === '' + b;\n    case '[object Number]':\n      // `NaN`s are equivalent, but non-reflexive.\n      // Object(NaN) is equivalent to NaN.\n      if (+a !== +a) return +b !== +b;\n      // An `egal` comparison is performed for other numeric values.\n      return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n    case '[object Date]':\n    case '[object Boolean]':\n      // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n      // millisecond representations. Note that invalid dates with millisecond representations\n      // of `NaN` are not equivalent.\n      return +a === +b;\n    case '[object Symbol]':\n      return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);\n    case '[object ArrayBuffer]':\n    case tagDataView:\n      // Coerce to typed array so we can fall through.\n      return deepEq(toBufferView(a), toBufferView(b), aStack, bStack);\n  }\n\n  var areArrays = className === '[object Array]';\n  if (!areArrays && isTypedArray(a)) {\n      var byteLength = getByteLength(a);\n      if (byteLength !== getByteLength(b)) return false;\n      if (a.buffer === b.buffer && a.byteOffset === b.byteOffset) return true;\n      areArrays = true;\n  }\n  if (!areArrays) {\n    if (typeof a != 'object' || typeof b != 'object') return false;\n\n    // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(isFunction(aCtor) && aCtor instanceof aCtor &&\n                             isFunction(bCtor) && bCtor instanceof bCtor)\n                        && ('constructor' in a && 'constructor' in b)) {\n      return false;\n    }\n  }\n  // Assume equality for cyclic structures. The algorithm for detecting cyclic\n  // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n\n  // Initializing stack of traversed objects.\n  // It's done here since we only need them for objects and arrays comparison.\n  aStack = aStack || [];\n  bStack = bStack || [];\n  var length = aStack.length;\n  while (length--) {\n    // Linear search. Performance is inversely proportional to the number of\n    // unique nested structures.\n    if (aStack[length] === a) return bStack[length] === b;\n  }\n\n  // Add the first object to the stack of traversed objects.\n  aStack.push(a);\n  bStack.push(b);\n\n  // Recursively compare objects and arrays.\n  if (areArrays) {\n    // Compare array lengths to determine if a deep comparison is necessary.\n    length = a.length;\n    if (length !== b.length) return false;\n    // Deep compare the contents, ignoring non-numeric properties.\n    while (length--) {\n      if (!eq(a[length], b[length], aStack, bStack)) return false;\n    }\n  } else {\n    // Deep compare objects.\n    var _keys = keys(a), key;\n    length = _keys.length;\n    // Ensure that both objects contain the same number of properties before comparing deep equality.\n    if (keys(b).length !== length) return false;\n    while (length--) {\n      // Deep compare each member\n      key = _keys[length];\n      if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n    }\n  }\n  // Remove the first object from the stack of traversed objects.\n  aStack.pop();\n  bStack.pop();\n  return true;\n}\n\n// Perform a deep comparison to check if two objects are equal.\nexport default function isEqual(a, b) {\n  return eq(a, b);\n}\n","import isObject from './isObject.js';\nimport { hasEnumBug } from './_setup.js';\nimport collectNonEnumProps from './_collectNonEnumProps.js';\n\n// Retrieve all the enumerable property names of an object.\nexport default function allKeys(obj) {\n  if (!isObject(obj)) return [];\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  // Ahem, IE < 9.\n  if (hasEnumBug) collectNonEnumProps(obj, keys);\n  return keys;\n}\n","import getLength from './_getLength.js';\nimport isFunction from './isFunction.js';\nimport allKeys from './allKeys.js';\n\n// Since the regular `Object.prototype.toString` type tests don't work for\n// some types in IE 11, we use a fingerprinting heuristic instead, based\n// on the methods. It's not great, but it's the best we got.\n// The fingerprint method lists are defined below.\nexport function ie11fingerprint(methods) {\n  var length = getLength(methods);\n  return function(obj) {\n    if (obj == null) return false;\n    // `Map`, `WeakMap` and `Set` have no enumerable keys.\n    var keys = allKeys(obj);\n    if (getLength(keys)) return false;\n    for (var i = 0; i < length; i++) {\n      if (!isFunction(obj[methods[i]])) return false;\n    }\n    // If we are testing against `WeakMap`, we need to ensure that\n    // `obj` doesn't have a `forEach` method in order to distinguish\n    // it from a regular `Map`.\n    return methods !== weakMapMethods || !isFunction(obj[forEachName]);\n  };\n}\n\n// In the interest of compact minification, we write\n// each string in the fingerprints only once.\nvar forEachName = 'forEach',\n    hasName = 'has',\n    commonInit = ['clear', 'delete'],\n    mapTail = ['get', hasName, 'set'];\n\n// `Map`, `WeakMap` and `Set` each have slightly different\n// combinations of the above sublists.\nexport var mapMethods = commonInit.concat(forEachName, mapTail),\n    weakMapMethods = commonInit.concat(mapTail),\n    setMethods = ['add'].concat(commonInit, forEachName, hasName);\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, mapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(mapMethods) : tagTester('Map');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, weakMapMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(weakMapMethods) : tagTester('WeakMap');\n","import tagTester from './_tagTester.js';\nimport { isIE11 } from './_stringTagBug.js';\nimport { ie11fingerprint, setMethods }  from './_methodFingerprint.js';\n\nexport default isIE11 ? ie11fingerprint(setMethods) : tagTester('Set');\n","import tagTester from './_tagTester.js';\n\nexport default tagTester('WeakSet');\n","import keys from './keys.js';\n\n// Retrieve the values of an object's properties.\nexport default function values(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var values = Array(length);\n  for (var i = 0; i < length; i++) {\n    values[i] = obj[_keys[i]];\n  }\n  return values;\n}\n","import keys from './keys.js';\n\n// Convert an object into a list of `[key, value]` pairs.\n// The opposite of `_.object` with one argument.\nexport default function pairs(obj) {\n  var _keys = keys(obj);\n  var length = _keys.length;\n  var pairs = Array(length);\n  for (var i = 0; i < length; i++) {\n    pairs[i] = [_keys[i], obj[_keys[i]]];\n  }\n  return pairs;\n}\n","import keys from './keys.js';\n\n// Invert the keys and values of an object. The values must be serializable.\nexport default function invert(obj) {\n  var result = {};\n  var _keys = keys(obj);\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    result[obj[_keys[i]]] = _keys[i];\n  }\n  return result;\n}\n","import isFunction from './isFunction.js';\n\n// Return a sorted list of the function names available on the object.\nexport default function functions(obj) {\n  var names = [];\n  for (var key in obj) {\n    if (isFunction(obj[key])) names.push(key);\n  }\n  return names.sort();\n}\n","// An internal function for creating assigner functions.\nexport default function createAssigner(keysFunc, defaults) {\n  return function(obj) {\n    var length = arguments.length;\n    if (defaults) obj = Object(obj);\n    if (length < 2 || obj == null) return obj;\n    for (var index = 1; index < length; index++) {\n      var source = arguments[index],\n          keys = keysFunc(source),\n          l = keys.length;\n      for (var i = 0; i < l; i++) {\n        var key = keys[i];\n        if (!defaults || obj[key] === void 0) obj[key] = source[key];\n      }\n    }\n    return obj;\n  };\n}\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Extend a given object with all the properties in passed-in object(s).\nexport default createAssigner(allKeys);\n","import createAssigner from './_createAssigner.js';\nimport keys from './keys.js';\n\n// Assigns a given object with all the own properties in the passed-in\n// object(s).\n// (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\nexport default createAssigner(keys);\n","import createAssigner from './_createAssigner.js';\nimport allKeys from './allKeys.js';\n\n// Fill in a given object with default properties.\nexport default createAssigner(allKeys, true);\n","import isObject from './isObject.js';\nimport { nativeCreate } from './_setup.js';\n\n// Create a naked function reference for surrogate-prototype-swapping.\nfunction ctor() {\n  return function(){};\n}\n\n// An internal function for creating a new object that inherits from another.\nexport default function baseCreate(prototype) {\n  if (!isObject(prototype)) return {};\n  if (nativeCreate) return nativeCreate(prototype);\n  var Ctor = ctor();\n  Ctor.prototype = prototype;\n  var result = new Ctor;\n  Ctor.prototype = null;\n  return result;\n}\n","import baseCreate from './_baseCreate.js';\nimport extendOwn from './extendOwn.js';\n\n// Creates an object that inherits from the given prototype object.\n// If additional properties are provided then they will be added to the\n// created object.\nexport default function create(prototype, props) {\n  var result = baseCreate(prototype);\n  if (props) extendOwn(result, props);\n  return result;\n}\n","import isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport extend from './extend.js';\n\n// Create a (shallow-cloned) duplicate of an object.\nexport default function clone(obj) {\n  if (!isObject(obj)) return obj;\n  return isArray(obj) ? obj.slice() : extend({}, obj);\n}\n","// Invokes `interceptor` with the `obj` and then returns `obj`.\n// The primary purpose of this method is to \"tap into\" a method chain, in\n// order to perform operations on intermediate results within the chain.\nexport default function tap(obj, interceptor) {\n  interceptor(obj);\n  return obj;\n}\n","import _ from './underscore.js';\nimport isArray from './isArray.js';\n\n// Normalize a (deep) property `path` to array.\n// Like `_.iteratee`, this function can be customized.\nexport default function toPath(path) {\n  return isArray(path) ? path : [path];\n}\n_.toPath = toPath;\n","import _ from './underscore.js';\nimport './toPath.js';\n\n// Internal wrapper for `_.toPath` to enable minification.\n// Similar to `cb` for `_.iteratee`.\nexport default function toPath(path) {\n  return _.toPath(path);\n}\n","// Internal function to obtain a nested property in `obj` along `path`.\nexport default function deepGet(obj, path) {\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    if (obj == null) return void 0;\n    obj = obj[path[i]];\n  }\n  return length ? obj : void 0;\n}\n","import toPath from './_toPath.js';\nimport deepGet from './_deepGet.js';\nimport isUndefined from './isUndefined.js';\n\n// Get the value of the (deep) property on `path` from `object`.\n// If any property in `path` does not exist or if the value is\n// `undefined`, return `defaultValue` instead.\n// The `path` is normalized through `_.toPath`.\nexport default function get(object, path, defaultValue) {\n  var value = deepGet(object, toPath(path));\n  return isUndefined(value) ? defaultValue : value;\n}\n","import _has from './_has.js';\nimport toPath from './_toPath.js';\n\n// Shortcut function for checking if an object has a given property directly on\n// itself (in other words, not on a prototype). Unlike the internal `has`\n// function, this public version can also traverse nested properties.\nexport default function has(obj, path) {\n  path = toPath(path);\n  var length = path.length;\n  for (var i = 0; i < length; i++) {\n    var key = path[i];\n    if (!_has(obj, key)) return false;\n    obj = obj[key];\n  }\n  return !!length;\n}\n","// Keep the identity function around for default iteratees.\nexport default function identity(value) {\n  return value;\n}\n","import extendOwn from './extendOwn.js';\nimport isMatch from './isMatch.js';\n\n// Returns a predicate for checking whether an object has a given set of\n// `key:value` pairs.\nexport default function matcher(attrs) {\n  attrs = extendOwn({}, attrs);\n  return function(obj) {\n    return isMatch(obj, attrs);\n  };\n}\n","import deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Creates a function that, when passed an object, will traverse that objects\n// properties down the given `path`, specified as an array of keys or indices.\nexport default function property(path) {\n  path = toPath(path);\n  return function(obj) {\n    return deepGet(obj, path);\n  };\n}\n","// Internal function that returns an efficient (for current engines) version\n// of the passed-in callback, to be repeatedly applied in other Underscore\n// functions.\nexport default function optimizeCb(func, context, argCount) {\n  if (context === void 0) return func;\n  switch (argCount == null ? 3 : argCount) {\n    case 1: return function(value) {\n      return func.call(context, value);\n    };\n    // The 2-argument case is omitted because were not using it.\n    case 3: return function(value, index, collection) {\n      return func.call(context, value, index, collection);\n    };\n    case 4: return function(accumulator, value, index, collection) {\n      return func.call(context, accumulator, value, index, collection);\n    };\n  }\n  return function() {\n    return func.apply(context, arguments);\n  };\n}\n","import identity from './identity.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isArray from './isArray.js';\nimport matcher from './matcher.js';\nimport property from './property.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// An internal function to generate callbacks that can be applied to each\n// element in a collection, returning the desired result  either `_.identity`,\n// an arbitrary callback, a property matcher, or a property accessor.\nexport default function baseIteratee(value, context, argCount) {\n  if (value == null) return identity;\n  if (isFunction(value)) return optimizeCb(value, context, argCount);\n  if (isObject(value) && !isArray(value)) return matcher(value);\n  return property(value);\n}\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\n\n// External wrapper for our callback generator. Users may customize\n// `_.iteratee` if they want additional predicate/iteratee shorthand styles.\n// This abstraction hides the internal-only `argCount` argument.\nexport default function iteratee(value, context) {\n  return baseIteratee(value, context, Infinity);\n}\n_.iteratee = iteratee;\n","import _ from './underscore.js';\nimport baseIteratee from './_baseIteratee.js';\nimport iteratee from './iteratee.js';\n\n// The function we call internally to generate a callback. It invokes\n// `_.iteratee` if overridden, otherwise `baseIteratee`.\nexport default function cb(value, context, argCount) {\n  if (_.iteratee !== iteratee) return _.iteratee(value, context);\n  return baseIteratee(value, context, argCount);\n}\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the results of applying the `iteratee` to each element of `obj`.\n// In contrast to `_.map` it returns an object.\nexport default function mapObject(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = keys(obj),\n      length = _keys.length,\n      results = {};\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys[index];\n    results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","// Predicate-generating function. Often useful outside of Underscore.\nexport default function noop(){}\n","import noop from './noop.js';\nimport get from './get.js';\n\n// Generates a function for a given object that returns a given property.\nexport default function propertyOf(obj) {\n  if (obj == null) return noop;\n  return function(path) {\n    return get(obj, path);\n  };\n}\n","import optimizeCb from './_optimizeCb.js';\n\n// Run a function **n** times.\nexport default function times(n, iteratee, context) {\n  var accum = Array(Math.max(0, n));\n  iteratee = optimizeCb(iteratee, context, 1);\n  for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n  return accum;\n}\n","// Return a random integer between `min` and `max` (inclusive).\nexport default function random(min, max) {\n  if (max == null) {\n    max = min;\n    min = 0;\n  }\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n","// A (possibly faster) way to get the current timestamp as an integer.\nexport default Date.now || function() {\n  return new Date().getTime();\n};\n","import keys from './keys.js';\n\n// Internal helper to generate functions for escaping and unescaping strings\n// to/from HTML interpolation.\nexport default function createEscaper(map) {\n  var escaper = function(match) {\n    return map[match];\n  };\n  // Regexes for identifying a key that needs to be escaped.\n  var source = '(?:' + keys(map).join('|') + ')';\n  var testRegexp = RegExp(source);\n  var replaceRegexp = RegExp(source, 'g');\n  return function(string) {\n    string = string == null ? '' : '' + string;\n    return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n  };\n}\n","// Internal list of HTML entities for escaping.\nexport default {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;'\n};\n","import createEscaper from './_createEscaper.js';\nimport escapeMap from './_escapeMap.js';\n\n// Function for escaping strings to HTML interpolation.\nexport default createEscaper(escapeMap);\n","import invert from './invert.js';\nimport escapeMap from './_escapeMap.js';\n\n// Internal list of HTML entities for unescaping.\nexport default invert(escapeMap);\n","import createEscaper from './_createEscaper.js';\nimport unescapeMap from './_unescapeMap.js';\n\n// Function for unescaping strings from HTML interpolation.\nexport default createEscaper(unescapeMap);\n","import _ from './underscore.js';\n\n// By default, Underscore uses ERB-style template delimiters. Change the\n// following template settings to use alternative delimiters.\nexport default _.templateSettings = {\n  evaluate: /<%([\\s\\S]+?)%>/g,\n  interpolate: /<%=([\\s\\S]+?)%>/g,\n  escape: /<%-([\\s\\S]+?)%>/g\n};\n","import defaults from './defaults.js';\nimport _ from './underscore.js';\nimport './templateSettings.js';\n\n// When customizing `_.templateSettings`, if you don't want to define an\n// interpolation, evaluation or escaping regex, we need one that is\n// guaranteed not to match.\nvar noMatch = /(.)^/;\n\n// Certain characters need to be escaped so that they can be put into a\n// string literal.\nvar escapes = {\n  \"'\": \"'\",\n  '\\\\': '\\\\',\n  '\\r': 'r',\n  '\\n': 'n',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\nvar escapeRegExp = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\nfunction escapeChar(match) {\n  return '\\\\' + escapes[match];\n}\n\n// In order to prevent third-party code injection through\n// `_.templateSettings.variable`, we test it against the following regular\n// expression. It is intentionally a bit more liberal than just matching valid\n// identifiers, but still prevents possible loopholes through defaults or\n// destructuring assignment.\nvar bareIdentifier = /^\\s*(\\w|\\$)+\\s*$/;\n\n// JavaScript micro-templating, similar to John Resig's implementation.\n// Underscore templating handles arbitrary delimiters, preserves whitespace,\n// and correctly escapes quotes within interpolated code.\n// NB: `oldSettings` only exists for backwards compatibility.\nexport default function template(text, settings, oldSettings) {\n  if (!settings && oldSettings) settings = oldSettings;\n  settings = defaults({}, settings, _.templateSettings);\n\n  // Combine delimiters into one regular expression via alternation.\n  var matcher = RegExp([\n    (settings.escape || noMatch).source,\n    (settings.interpolate || noMatch).source,\n    (settings.evaluate || noMatch).source\n  ].join('|') + '|$', 'g');\n\n  // Compile the template source, escaping string literals appropriately.\n  var index = 0;\n  var source = \"__p+='\";\n  text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n    source += text.slice(index, offset).replace(escapeRegExp, escapeChar);\n    index = offset + match.length;\n\n    if (escape) {\n      source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n    } else if (interpolate) {\n      source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n    } else if (evaluate) {\n      source += \"';\\n\" + evaluate + \"\\n__p+='\";\n    }\n\n    // Adobe VMs need the match returned to produce the correct offset.\n    return match;\n  });\n  source += \"';\\n\";\n\n  var argument = settings.variable;\n  if (argument) {\n    // Insure against third-party code injection. (CVE-2021-23358)\n    if (!bareIdentifier.test(argument)) throw new Error(\n      'variable is not a bare identifier: ' + argument\n    );\n  } else {\n    // If a variable is not specified, place data values in local scope.\n    source = 'with(obj||{}){\\n' + source + '}\\n';\n    argument = 'obj';\n  }\n\n  source = \"var __t,__p='',__j=Array.prototype.join,\" +\n    \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n    source + 'return __p;\\n';\n\n  var render;\n  try {\n    render = new Function(argument, '_', source);\n  } catch (e) {\n    e.source = source;\n    throw e;\n  }\n\n  var template = function(data) {\n    return render.call(this, data, _);\n  };\n\n  // Provide the compiled source as a convenience for precompilation.\n  template.source = 'function(' + argument + '){\\n' + source + '}';\n\n  return template;\n}\n","import isFunction from './isFunction.js';\nimport toPath from './_toPath.js';\n\n// Traverses the children of `obj` along `path`. If a child is a function, it\n// is invoked with its parent as context. Returns the value of the final\n// child, or `fallback` if any child is undefined.\nexport default function result(obj, path, fallback) {\n  path = toPath(path);\n  var length = path.length;\n  if (!length) {\n    return isFunction(fallback) ? fallback.call(obj) : fallback;\n  }\n  for (var i = 0; i < length; i++) {\n    var prop = obj == null ? void 0 : obj[path[i]];\n    if (prop === void 0) {\n      prop = fallback;\n      i = length; // Ensure we don't continue iterating.\n    }\n    obj = isFunction(prop) ? prop.call(obj) : prop;\n  }\n  return obj;\n}\n","// Generate a unique integer id (unique within the entire client session).\n// Useful for temporary DOM ids.\nvar idCounter = 0;\nexport default function uniqueId(prefix) {\n  var id = ++idCounter + '';\n  return prefix ? prefix + id : id;\n}\n","import _ from './underscore.js';\n\n// Start chaining a wrapped Underscore object.\nexport default function chain(obj) {\n  var instance = _(obj);\n  instance._chain = true;\n  return instance;\n}\n","import baseCreate from './_baseCreate.js';\nimport isObject from './isObject.js';\n\n// Internal function to execute `sourceFunc` bound to `context` with optional\n// `args`. Determines whether to execute a function as a constructor or as a\n// normal function.\nexport default function executeBound(sourceFunc, boundFunc, context, callingContext, args) {\n  if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n  var self = baseCreate(sourceFunc.prototype);\n  var result = sourceFunc.apply(self, args);\n  if (isObject(result)) return result;\n  return self;\n}\n","import restArguments from './restArguments.js';\nimport executeBound from './_executeBound.js';\nimport _ from './underscore.js';\n\n// Partially apply a function by creating a version that has had some of its\n// arguments pre-filled, without changing its dynamic `this` context. `_` acts\n// as a placeholder by default, allowing any combination of arguments to be\n// pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.\nvar partial = restArguments(function(func, boundArgs) {\n  var placeholder = partial.placeholder;\n  var bound = function() {\n    var position = 0, length = boundArgs.length;\n    var args = Array(length);\n    for (var i = 0; i < length; i++) {\n      args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];\n    }\n    while (position < arguments.length) args.push(arguments[position++]);\n    return executeBound(func, bound, this, this, args);\n  };\n  return bound;\n});\n\npartial.placeholder = _;\nexport default partial;\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport executeBound from './_executeBound.js';\n\n// Create a function bound to a given object (assigning `this`, and arguments,\n// optionally).\nexport default restArguments(function(func, context, args) {\n  if (!isFunction(func)) throw new TypeError('Bind must be called on a function');\n  var bound = restArguments(function(callArgs) {\n    return executeBound(func, bound, context, this, args.concat(callArgs));\n  });\n  return bound;\n});\n","import createSizePropertyCheck from './_createSizePropertyCheck.js';\nimport getLength from './_getLength.js';\n\n// Internal helper for collection methods to determine whether a collection\n// should be iterated as an array or as an object.\n// Related: https://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n// Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094\nexport default createSizePropertyCheck(getLength);\n","import getLength from './_getLength.js';\nimport isArrayLike from './_isArrayLike.js';\nimport isArray from './isArray.js';\nimport isArguments from './isArguments.js';\n\n// Internal implementation of a recursive `flatten` function.\nexport default function flatten(input, depth, strict, output) {\n  output = output || [];\n  if (!depth && depth !== 0) {\n    depth = Infinity;\n  } else if (depth <= 0) {\n    return output.concat(input);\n  }\n  var idx = output.length;\n  for (var i = 0, length = getLength(input); i < length; i++) {\n    var value = input[i];\n    if (isArrayLike(value) && (isArray(value) || isArguments(value))) {\n      // Flatten current level of array or arguments object.\n      if (depth > 1) {\n        flatten(value, depth - 1, strict, output);\n        idx = output.length;\n      } else {\n        var j = 0, len = value.length;\n        while (j < len) output[idx++] = value[j++];\n      }\n    } else if (!strict) {\n      output[idx++] = value;\n    }\n  }\n  return output;\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport bind from './bind.js';\n\n// Bind a number of an object's methods to that object. Remaining arguments\n// are the method names to be bound. Useful for ensuring that all callbacks\n// defined on an object belong to it.\nexport default restArguments(function(obj, keys) {\n  keys = flatten(keys, false, false);\n  var index = keys.length;\n  if (index < 1) throw new Error('bindAll must be passed function names');\n  while (index--) {\n    var key = keys[index];\n    obj[key] = bind(obj[key], obj);\n  }\n  return obj;\n});\n","import has from './_has.js';\n\n// Memoize an expensive function by storing its results.\nexport default function memoize(func, hasher) {\n  var memoize = function(key) {\n    var cache = memoize.cache;\n    var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n    if (!has(cache, address)) cache[address] = func.apply(this, arguments);\n    return cache[address];\n  };\n  memoize.cache = {};\n  return memoize;\n}\n","import restArguments from './restArguments.js';\n\n// Delays a function for the given number of milliseconds, and then calls\n// it with the arguments supplied.\nexport default restArguments(function(func, wait, args) {\n  return setTimeout(function() {\n    return func.apply(null, args);\n  }, wait);\n});\n","import partial from './partial.js';\nimport delay from './delay.js';\nimport _ from './underscore.js';\n\n// Defers a function, scheduling it to run after the current call stack has\n// cleared.\nexport default partial(delay, _, 1);\n","import now from './now.js';\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nexport default function throttle(func, wait, options) {\n  var timeout, context, args, result;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function() {\n    var _now = now();\n    if (!previous && options.leading === false) previous = _now;\n    var remaining = wait - (_now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = _now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function() {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n","import restArguments from './restArguments.js';\nimport now from './now.js';\n\n// When a sequence of calls of the returned function ends, the argument\n// function is triggered. The end of a sequence is defined by the `wait`\n// parameter. If `immediate` is passed, the argument function will be\n// triggered at the beginning of the sequence instead of at the end.\nexport default function debounce(func, wait, immediate) {\n  var timeout, previous, args, result, context;\n\n  var later = function() {\n    var passed = now() - previous;\n    if (wait > passed) {\n      timeout = setTimeout(later, wait - passed);\n    } else {\n      timeout = null;\n      if (!immediate) result = func.apply(context, args);\n      // This check is needed because `func` can recursively invoke `debounced`.\n      if (!timeout) args = context = null;\n    }\n  };\n\n  var debounced = restArguments(function(_args) {\n    context = this;\n    args = _args;\n    previous = now();\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n      if (immediate) result = func.apply(context, args);\n    }\n    return result;\n  });\n\n  debounced.cancel = function() {\n    clearTimeout(timeout);\n    timeout = args = context = null;\n  };\n\n  return debounced;\n}\n","import partial from './partial.js';\n\n// Returns the first function passed as an argument to the second,\n// allowing you to adjust arguments, run code before and after, and\n// conditionally execute the original function.\nexport default function wrap(func, wrapper) {\n  return partial(wrapper, func);\n}\n","// Returns a negated version of the passed-in predicate.\nexport default function negate(predicate) {\n  return function() {\n    return !predicate.apply(this, arguments);\n  };\n}\n","// Returns a function that is the composition of a list of functions, each\n// consuming the return value of the function that follows.\nexport default function compose() {\n  var args = arguments;\n  var start = args.length - 1;\n  return function() {\n    var i = start;\n    var result = args[start].apply(this, arguments);\n    while (i--) result = args[i].call(this, result);\n    return result;\n  };\n}\n","// Returns a function that will only be executed on and after the Nth call.\nexport default function after(times, func) {\n  return function() {\n    if (--times < 1) {\n      return func.apply(this, arguments);\n    }\n  };\n}\n","// Returns a function that will only be executed up to (but not including) the\n// Nth call.\nexport default function before(times, func) {\n  var memo;\n  return function() {\n    if (--times > 0) {\n      memo = func.apply(this, arguments);\n    }\n    if (times <= 1) func = null;\n    return memo;\n  };\n}\n","import partial from './partial.js';\nimport before from './before.js';\n\n// Returns a function that will be executed at most one time, no matter how\n// often you call it. Useful for lazy initialization.\nexport default partial(before, 2);\n","import cb from './_cb.js';\nimport keys from './keys.js';\n\n// Returns the first key on an object that passes a truth test.\nexport default function findKey(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = keys(obj), key;\n  for (var i = 0, length = _keys.length; i < length; i++) {\n    key = _keys[i];\n    if (predicate(obj[key], key, obj)) return key;\n  }\n}\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Internal function to generate `_.findIndex` and `_.findLastIndex`.\nexport default function createPredicateIndexFinder(dir) {\n  return function(array, predicate, context) {\n    predicate = cb(predicate, context);\n    var length = getLength(array);\n    var index = dir > 0 ? 0 : length - 1;\n    for (; index >= 0 && index < length; index += dir) {\n      if (predicate(array[index], index, array)) return index;\n    }\n    return -1;\n  };\n}\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the first index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(1);\n","import createPredicateIndexFinder from './_createPredicateIndexFinder.js';\n\n// Returns the last index on an array-like that passes a truth test.\nexport default createPredicateIndexFinder(-1);\n","import cb from './_cb.js';\nimport getLength from './_getLength.js';\n\n// Use a comparator function to figure out the smallest index at which\n// an object should be inserted so as to maintain order. Uses binary search.\nexport default function sortedIndex(array, obj, iteratee, context) {\n  iteratee = cb(iteratee, context, 1);\n  var value = iteratee(obj);\n  var low = 0, high = getLength(array);\n  while (low < high) {\n    var mid = Math.floor((low + high) / 2);\n    if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n  }\n  return low;\n}\n","import getLength from './_getLength.js';\nimport { slice } from './_setup.js';\nimport isNaN from './isNaN.js';\n\n// Internal function to generate the `_.indexOf` and `_.lastIndexOf` functions.\nexport default function createIndexFinder(dir, predicateFind, sortedIndex) {\n  return function(array, item, idx) {\n    var i = 0, length = getLength(array);\n    if (typeof idx == 'number') {\n      if (dir > 0) {\n        i = idx >= 0 ? idx : Math.max(idx + length, i);\n      } else {\n        length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;\n      }\n    } else if (sortedIndex && idx && length) {\n      idx = sortedIndex(array, item);\n      return array[idx] === item ? idx : -1;\n    }\n    if (item !== item) {\n      idx = predicateFind(slice.call(array, i, length), isNaN);\n      return idx >= 0 ? idx + i : -1;\n    }\n    for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {\n      if (array[idx] === item) return idx;\n    }\n    return -1;\n  };\n}\n","import sortedIndex from './sortedIndex.js';\nimport findIndex from './findIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the first occurrence of an item in an array,\n// or -1 if the item is not included in the array.\n// If the array is large and already in sort order, pass `true`\n// for **isSorted** to use binary search.\nexport default createIndexFinder(1, findIndex, sortedIndex);\n","import findLastIndex from './findLastIndex.js';\nimport createIndexFinder from './_createIndexFinder.js';\n\n// Return the position of the last occurrence of an item in an array,\n// or -1 if the item is not included in the array.\nexport default createIndexFinder(-1, findLastIndex);\n","import isArrayLike from './_isArrayLike.js';\nimport findIndex from './findIndex.js';\nimport findKey from './findKey.js';\n\n// Return the first value which passes a truth test.\nexport default function find(obj, predicate, context) {\n  var keyFinder = isArrayLike(obj) ? findIndex : findKey;\n  var key = keyFinder(obj, predicate, context);\n  if (key !== void 0 && key !== -1) return obj[key];\n}\n","import find from './find.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.find`: getting the first\n// object containing specific `key:value` pairs.\nexport default function findWhere(obj, attrs) {\n  return find(obj, matcher(attrs));\n}\n","import optimizeCb from './_optimizeCb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// The cornerstone for collection functions, an `each`\n// implementation, aka `forEach`.\n// Handles raw objects in addition to array-likes. Treats all\n// sparse array-likes as if they were dense.\nexport default function each(obj, iteratee, context) {\n  iteratee = optimizeCb(iteratee, context);\n  var i, length;\n  if (isArrayLike(obj)) {\n    for (i = 0, length = obj.length; i < length; i++) {\n      iteratee(obj[i], i, obj);\n    }\n  } else {\n    var _keys = keys(obj);\n    for (i = 0, length = _keys.length; i < length; i++) {\n      iteratee(obj[_keys[i]], _keys[i], obj);\n    }\n  }\n  return obj;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the results of applying the iteratee to each element.\nexport default function map(obj, iteratee, context) {\n  iteratee = cb(iteratee, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length,\n      results = Array(length);\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    results[index] = iteratee(obj[currentKey], currentKey, obj);\n  }\n  return results;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\nimport optimizeCb from './_optimizeCb.js';\n\n// Internal helper to create a reducing function, iterating left or right.\nexport default function createReduce(dir) {\n  // Wrap code that reassigns argument variables in a separate function than\n  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)\n  var reducer = function(obj, iteratee, memo, initial) {\n    var _keys = !isArrayLike(obj) && keys(obj),\n        length = (_keys || obj).length,\n        index = dir > 0 ? 0 : length - 1;\n    if (!initial) {\n      memo = obj[_keys ? _keys[index] : index];\n      index += dir;\n    }\n    for (; index >= 0 && index < length; index += dir) {\n      var currentKey = _keys ? _keys[index] : index;\n      memo = iteratee(memo, obj[currentKey], currentKey, obj);\n    }\n    return memo;\n  };\n\n  return function(obj, iteratee, memo, context) {\n    var initial = arguments.length >= 3;\n    return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);\n  };\n}\n","import createReduce from './_createReduce.js';\n\n// **Reduce** builds up a single result from a list of values, aka `inject`,\n// or `foldl`.\nexport default createReduce(1);\n","import createReduce from './_createReduce.js';\n\n// The right-associative version of reduce, also known as `foldr`.\nexport default createReduce(-1);\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// Return all the elements that pass a truth test.\nexport default function filter(obj, predicate, context) {\n  var results = [];\n  predicate = cb(predicate, context);\n  each(obj, function(value, index, list) {\n    if (predicate(value, index, list)) results.push(value);\n  });\n  return results;\n}\n","import filter from './filter.js';\nimport negate from './negate.js';\nimport cb from './_cb.js';\n\n// Return all the elements for which a truth test fails.\nexport default function reject(obj, predicate, context) {\n  return filter(obj, negate(cb(predicate)), context);\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine whether all of the elements pass a truth test.\nexport default function every(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (!predicate(obj[currentKey], currentKey, obj)) return false;\n  }\n  return true;\n}\n","import cb from './_cb.js';\nimport isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Determine if at least one element in the object passes a truth test.\nexport default function some(obj, predicate, context) {\n  predicate = cb(predicate, context);\n  var _keys = !isArrayLike(obj) && keys(obj),\n      length = (_keys || obj).length;\n  for (var index = 0; index < length; index++) {\n    var currentKey = _keys ? _keys[index] : index;\n    if (predicate(obj[currentKey], currentKey, obj)) return true;\n  }\n  return false;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport indexOf from './indexOf.js';\n\n// Determine if the array or object contains a given item (using `===`).\nexport default function contains(obj, item, fromIndex, guard) {\n  if (!isArrayLike(obj)) obj = values(obj);\n  if (typeof fromIndex != 'number' || guard) fromIndex = 0;\n  return indexOf(obj, item, fromIndex) >= 0;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport map from './map.js';\nimport deepGet from './_deepGet.js';\nimport toPath from './_toPath.js';\n\n// Invoke a method (with arguments) on every item in a collection.\nexport default restArguments(function(obj, path, args) {\n  var contextPath, func;\n  if (isFunction(path)) {\n    func = path;\n  } else {\n    path = toPath(path);\n    contextPath = path.slice(0, -1);\n    path = path[path.length - 1];\n  }\n  return map(obj, function(context) {\n    var method = func;\n    if (!method) {\n      if (contextPath && contextPath.length) {\n        context = deepGet(context, contextPath);\n      }\n      if (context == null) return void 0;\n      method = context[path];\n    }\n    return method == null ? method : method.apply(context, args);\n  });\n});\n","import map from './map.js';\nimport property from './property.js';\n\n// Convenience version of a common use case of `_.map`: fetching a property.\nexport default function pluck(obj, key) {\n  return map(obj, property(key));\n}\n","import filter from './filter.js';\nimport matcher from './matcher.js';\n\n// Convenience version of a common use case of `_.filter`: selecting only\n// objects containing specific `key:value` pairs.\nexport default function where(obj, attrs) {\n  return filter(obj, matcher(attrs));\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the maximum element (or element-based computation).\nexport default function max(obj, iteratee, context) {\n  var result = -Infinity, lastComputed = -Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value > result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed > lastComputed || (computed === -Infinity && result === -Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport cb from './_cb.js';\nimport each from './each.js';\n\n// Return the minimum element (or element-based computation).\nexport default function min(obj, iteratee, context) {\n  var result = Infinity, lastComputed = Infinity,\n      value, computed;\n  if (iteratee == null || (typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null)) {\n    obj = isArrayLike(obj) ? obj : values(obj);\n    for (var i = 0, length = obj.length; i < length; i++) {\n      value = obj[i];\n      if (value != null && value < result) {\n        result = value;\n      }\n    }\n  } else {\n    iteratee = cb(iteratee, context);\n    each(obj, function(v, index, list) {\n      computed = iteratee(v, index, list);\n      if (computed < lastComputed || (computed === Infinity && result === Infinity)) {\n        result = v;\n        lastComputed = computed;\n      }\n    });\n  }\n  return result;\n}\n","import isArray from './isArray.js';\nimport { slice } from './_setup.js';\nimport isString from './isString.js';\nimport isArrayLike from './_isArrayLike.js';\nimport map from './map.js';\nimport identity from './identity.js';\nimport values from './values.js';\n\n// Safely create a real, live array from anything iterable.\nvar reStrSymbol = /[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;\nexport default function toArray(obj) {\n  if (!obj) return [];\n  if (isArray(obj)) return slice.call(obj);\n  if (isString(obj)) {\n    // Keep surrogate pair characters together.\n    return obj.match(reStrSymbol);\n  }\n  if (isArrayLike(obj)) return map(obj, identity);\n  return values(obj);\n}\n","import isArrayLike from './_isArrayLike.js';\nimport values from './values.js';\nimport getLength from './_getLength.js';\nimport random from './random.js';\nimport toArray from './toArray.js';\n\n// Sample **n** random values from a collection using the modern version of the\n// [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/FisherYates_shuffle).\n// If **n** is not specified, returns a single random element.\n// The internal `guard` argument allows it to work with `_.map`.\nexport default function sample(obj, n, guard) {\n  if (n == null || guard) {\n    if (!isArrayLike(obj)) obj = values(obj);\n    return obj[random(obj.length - 1)];\n  }\n  var sample = toArray(obj);\n  var length = getLength(sample);\n  n = Math.max(Math.min(n, length), 0);\n  var last = length - 1;\n  for (var index = 0; index < n; index++) {\n    var rand = random(index, last);\n    var temp = sample[index];\n    sample[index] = sample[rand];\n    sample[rand] = temp;\n  }\n  return sample.slice(0, n);\n}\n","import sample from './sample.js';\n\n// Shuffle a collection.\nexport default function shuffle(obj) {\n  return sample(obj, Infinity);\n}\n","import cb from './_cb.js';\nimport pluck from './pluck.js';\nimport map from './map.js';\n\n// Sort the object's values by a criterion produced by an iteratee.\nexport default function sortBy(obj, iteratee, context) {\n  var index = 0;\n  iteratee = cb(iteratee, context);\n  return pluck(map(obj, function(value, key, list) {\n    return {\n      value: value,\n      index: index++,\n      criteria: iteratee(value, key, list)\n    };\n  }).sort(function(left, right) {\n    var a = left.criteria;\n    var b = right.criteria;\n    if (a !== b) {\n      if (a > b || a === void 0) return 1;\n      if (a < b || b === void 0) return -1;\n    }\n    return left.index - right.index;\n  }), 'value');\n}\n","import cb from './_cb.js';\nimport each from './each.js';\n\n// An internal function used for aggregate \"group by\" operations.\nexport default function group(behavior, partition) {\n  return function(obj, iteratee, context) {\n    var result = partition ? [[], []] : {};\n    iteratee = cb(iteratee, context);\n    each(obj, function(value, index) {\n      var key = iteratee(value, index, obj);\n      behavior(result, value, key);\n    });\n    return result;\n  };\n}\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Groups the object's values by a criterion. Pass either a string attribute\n// to group by, or a function that returns the criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key].push(value); else result[key] = [value];\n});\n","import group from './_group.js';\n\n// Indexes the object's values by a criterion, similar to `_.groupBy`, but for\n// when you know that your index values will be unique.\nexport default group(function(result, value, key) {\n  result[key] = value;\n});\n","import group from './_group.js';\nimport has from './_has.js';\n\n// Counts instances of an object that group by a certain criterion. Pass\n// either a string attribute to count by, or a function that returns the\n// criterion.\nexport default group(function(result, value, key) {\n  if (has(result, key)) result[key]++; else result[key] = 1;\n});\n","import group from './_group.js';\n\n// Split a collection into two arrays: one whose elements all pass the given\n// truth test, and one whose elements all do not pass the truth test.\nexport default group(function(result, value, pass) {\n  result[pass ? 0 : 1].push(value);\n}, true);\n","import isArrayLike from './_isArrayLike.js';\nimport keys from './keys.js';\n\n// Return the number of elements in a collection.\nexport default function size(obj) {\n  if (obj == null) return 0;\n  return isArrayLike(obj) ? obj.length : keys(obj).length;\n}\n","// Internal `_.pick` helper function to determine whether `key` is an enumerable\n// property name of `obj`.\nexport default function keyInObj(value, key, obj) {\n  return key in obj;\n}\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport optimizeCb from './_optimizeCb.js';\nimport allKeys from './allKeys.js';\nimport keyInObj from './_keyInObj.js';\nimport flatten from './_flatten.js';\n\n// Return a copy of the object only containing the allowed properties.\nexport default restArguments(function(obj, keys) {\n  var result = {}, iteratee = keys[0];\n  if (obj == null) return result;\n  if (isFunction(iteratee)) {\n    if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);\n    keys = allKeys(obj);\n  } else {\n    iteratee = keyInObj;\n    keys = flatten(keys, false, false);\n    obj = Object(obj);\n  }\n  for (var i = 0, length = keys.length; i < length; i++) {\n    var key = keys[i];\n    var value = obj[key];\n    if (iteratee(value, key, obj)) result[key] = value;\n  }\n  return result;\n});\n","import restArguments from './restArguments.js';\nimport isFunction from './isFunction.js';\nimport negate from './negate.js';\nimport map from './map.js';\nimport flatten from './_flatten.js';\nimport contains from './contains.js';\nimport pick from './pick.js';\n\n// Return a copy of the object without the disallowed properties.\nexport default restArguments(function(obj, keys) {\n  var iteratee = keys[0], context;\n  if (isFunction(iteratee)) {\n    iteratee = negate(iteratee);\n    if (keys.length > 1) context = keys[1];\n  } else {\n    keys = map(flatten(keys, false, false), String);\n    iteratee = function(value, key) {\n      return !contains(keys, key);\n    };\n  }\n  return pick(obj, iteratee, context);\n});\n","import { slice } from './_setup.js';\n\n// Returns everything but the last entry of the array. Especially useful on\n// the arguments object. Passing **n** will return all the values in\n// the array, excluding the last N.\nexport default function initial(array, n, guard) {\n  return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n}\n","import initial from './initial.js';\n\n// Get the first element of an array. Passing **n** will return the first N\n// values in the array. The **guard** check allows it to work with `_.map`.\nexport default function first(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[0];\n  return initial(array, array.length - n);\n}\n","import { slice } from './_setup.js';\n\n// Returns everything but the first entry of the `array`. Especially useful on\n// the `arguments` object. Passing an **n** will return the rest N values in the\n// `array`.\nexport default function rest(array, n, guard) {\n  return slice.call(array, n == null || guard ? 1 : n);\n}\n","import rest from './rest.js';\n\n// Get the last element of an array. Passing **n** will return the last N\n// values in the array.\nexport default function last(array, n, guard) {\n  if (array == null || array.length < 1) return n == null || guard ? void 0 : [];\n  if (n == null || guard) return array[array.length - 1];\n  return rest(array, Math.max(0, array.length - n));\n}\n","import filter from './filter.js';\n\n// Trim out all falsy values from an array.\nexport default function compact(array) {\n  return filter(array, Boolean);\n}\n","import _flatten from './_flatten.js';\n\n// Flatten out an array, either recursively (by default), or up to `depth`.\n// Passing `true` or `false` as `depth` means `1` or `Infinity`, respectively.\nexport default function flatten(array, depth) {\n  return _flatten(array, depth, false);\n}\n","import restArguments from './restArguments.js';\nimport flatten from './_flatten.js';\nimport filter from './filter.js';\nimport contains from './contains.js';\n\n// Take the difference between one array and a number of other arrays.\n// Only the elements present in just the first array will remain.\nexport default restArguments(function(array, rest) {\n  rest = flatten(rest, true, true);\n  return filter(array, function(value){\n    return !contains(rest, value);\n  });\n});\n","import restArguments from './restArguments.js';\nimport difference from './difference.js';\n\n// Return a version of the array that does not contain the specified value(s).\nexport default restArguments(function(array, otherArrays) {\n  return difference(array, otherArrays);\n});\n","import isBoolean from './isBoolean.js';\nimport cb from './_cb.js';\nimport getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce a duplicate-free version of the array. If the array has already\n// been sorted, you have the option of using a faster algorithm.\n// The faster algorithm will not work with an iteratee if the iteratee\n// is not a one-to-one function, so providing an iteratee will disable\n// the faster algorithm.\nexport default function uniq(array, isSorted, iteratee, context) {\n  if (!isBoolean(isSorted)) {\n    context = iteratee;\n    iteratee = isSorted;\n    isSorted = false;\n  }\n  if (iteratee != null) iteratee = cb(iteratee, context);\n  var result = [];\n  var seen = [];\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var value = array[i],\n        computed = iteratee ? iteratee(value, i, array) : value;\n    if (isSorted && !iteratee) {\n      if (!i || seen !== computed) result.push(value);\n      seen = computed;\n    } else if (iteratee) {\n      if (!contains(seen, computed)) {\n        seen.push(computed);\n        result.push(value);\n      }\n    } else if (!contains(result, value)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport uniq from './uniq.js';\nimport flatten from './_flatten.js';\n\n// Produce an array that contains the union: each distinct element from all of\n// the passed-in arrays.\nexport default restArguments(function(arrays) {\n  return uniq(flatten(arrays, true, true));\n});\n","import getLength from './_getLength.js';\nimport contains from './contains.js';\n\n// Produce an array that contains every item shared between all the\n// passed-in arrays.\nexport default function intersection(array) {\n  var result = [];\n  var argsLength = arguments.length;\n  for (var i = 0, length = getLength(array); i < length; i++) {\n    var item = array[i];\n    if (contains(result, item)) continue;\n    var j;\n    for (j = 1; j < argsLength; j++) {\n      if (!contains(arguments[j], item)) break;\n    }\n    if (j === argsLength) result.push(item);\n  }\n  return result;\n}\n","import max from './max.js';\nimport getLength from './_getLength.js';\nimport pluck from './pluck.js';\n\n// Complement of zip. Unzip accepts an array of arrays and groups\n// each array's elements on shared indices.\nexport default function unzip(array) {\n  var length = (array && max(array, getLength).length) || 0;\n  var result = Array(length);\n\n  for (var index = 0; index < length; index++) {\n    result[index] = pluck(array, index);\n  }\n  return result;\n}\n","import restArguments from './restArguments.js';\nimport unzip from './unzip.js';\n\n// Zip together multiple lists into a single array -- elements that share\n// an index go together.\nexport default restArguments(unzip);\n","import getLength  from './_getLength.js';\n\n// Converts lists into objects. Pass either a single array of `[key, value]`\n// pairs, or two parallel arrays of the same length -- one of keys, and one of\n// the corresponding values. Passing by pairs is the reverse of `_.pairs`.\nexport default function object(list, values) {\n  var result = {};\n  for (var i = 0, length = getLength(list); i < length; i++) {\n    if (values) {\n      result[list[i]] = values[i];\n    } else {\n      result[list[i][0]] = list[i][1];\n    }\n  }\n  return result;\n}\n","// Generate an integer Array containing an arithmetic progression. A port of\n// the native Python `range()` function. See\n// [the Python documentation](https://docs.python.org/library/functions.html#range).\nexport default function range(start, stop, step) {\n  if (stop == null) {\n    stop = start || 0;\n    start = 0;\n  }\n  if (!step) {\n    step = stop < start ? -1 : 1;\n  }\n\n  var length = Math.max(Math.ceil((stop - start) / step), 0);\n  var range = Array(length);\n\n  for (var idx = 0; idx < length; idx++, start += step) {\n    range[idx] = start;\n  }\n\n  return range;\n}\n","import { slice } from './_setup.js';\n\n// Chunk a single array into multiple arrays, each containing `count` or fewer\n// items.\nexport default function chunk(array, count) {\n  if (count == null || count < 1) return [];\n  var result = [];\n  var i = 0, length = array.length;\n  while (i < length) {\n    result.push(slice.call(array, i, i += count));\n  }\n  return result;\n}\n","import _ from './underscore.js';\n\n// Helper function to continue chaining intermediate results.\nexport default function chainResult(instance, obj) {\n  return instance._chain ? _(obj).chain() : obj;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport functions from './functions.js';\nimport { push } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add your own custom functions to the Underscore object.\nexport default function mixin(obj) {\n  each(functions(obj), function(name) {\n    var func = _[name] = obj[name];\n    _.prototype[name] = function() {\n      var args = [this._wrapped];\n      push.apply(args, arguments);\n      return chainResult(this, func.apply(_, args));\n    };\n  });\n  return _;\n}\n","import _ from './underscore.js';\nimport each from './each.js';\nimport { ArrayProto } from './_setup.js';\nimport chainResult from './_chainResult.js';\n\n// Add all mutator `Array` functions to the wrapper.\neach(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) {\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) {\n        delete obj[0];\n      }\n    }\n    return chainResult(this, obj);\n  };\n});\n\n// Add all accessor `Array` functions to the wrapper.\neach(['concat', 'join', 'slice'], function(name) {\n  var method = ArrayProto[name];\n  _.prototype[name] = function() {\n    var obj = this._wrapped;\n    if (obj != null) obj = method.apply(obj, arguments);\n    return chainResult(this, obj);\n  };\n});\n\nexport default _;\n","// Default Export\n// ==============\n// In this module, we mix our bundled exports into the `_` object and export\n// the result. This is analogous to setting `module.exports = _` in CommonJS.\n// Hence, this module is also the entry point of our UMD bundle and the package\n// entry point for CommonJS and AMD users. In other words, this is (the source\n// of) the module you are interfacing with when you do any of the following:\n//\n// ```js\n// // CommonJS\n// var _ = require('underscore');\n//\n// // AMD\n// define(['underscore'], function(_) {...});\n//\n// // UMD in the browser\n// // _ is available as a global variable\n// ```\nimport * as allExports from './index.js';\nimport { mixin } from './index.js';\n\n// Add all of the Underscore functions to the wrapper object.\nvar _ = mixin(allExports);\n// Legacy Node.js API.\n_._ = _;\n// Export the Underscore API.\nexport default _;\n","/*!\n * jQuery JavaScript Library v3.6.4\n * https://jquery.com/\n *\n * Includes Sizzle.js\n * https://sizzlejs.com/\n *\n * Copyright OpenJS Foundation and other contributors\n * Released under the MIT license\n * https://jquery.org/license\n *\n * Date: 2023-03-08T15:28Z\n */\n( function( global, factory ) {\n\n\t\"use strict\";\n\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\n\t\t// For CommonJS and CommonJS-like environments where a proper `window`\n\t\t// is present, execute the factory and get jQuery.\n\t\t// For environments that do not have a `window` with a `document`\n\t\t// (such as Node.js), expose a factory as module.exports.\n\t\t// This accentuates the need for the creation of a real `window`.\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\n\t\t// See ticket trac-14549 for more info.\n\t\tmodule.exports = global.document ?\n\t\t\tfactory( global, true ) :\n\t\t\tfunction( w ) {\n\t\t\t\tif ( !w.document ) {\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n\t\t\t\t}\n\t\t\t\treturn factory( w );\n\t\t\t};\n\t} else {\n\t\tfactory( global );\n\t}\n\n// Pass this if window is not defined yet\n} )( typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n\n// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1\n// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode\n// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common\n// enough that all such attempts are guarded in a try block.\n\"use strict\";\n\nvar arr = [];\n\nvar getProto = Object.getPrototypeOf;\n\nvar slice = arr.slice;\n\nvar flat = arr.flat ? function( array ) {\n\treturn arr.flat.call( array );\n} : function( array ) {\n\treturn arr.concat.apply( [], array );\n};\n\n\nvar push = arr.push;\n\nvar indexOf = arr.indexOf;\n\nvar class2type = {};\n\nvar toString = class2type.toString;\n\nvar hasOwn = class2type.hasOwnProperty;\n\nvar fnToString = hasOwn.toString;\n\nvar ObjectFunctionString = fnToString.call( Object );\n\nvar support = {};\n\nvar isFunction = function isFunction( obj ) {\n\n\t\t// Support: Chrome <=57, Firefox <=52\n\t\t// In some browsers, typeof returns \"function\" for HTML <object> elements\n\t\t// (i.e., `typeof document.createElement( \"object\" ) === \"function\"`).\n\t\t// We don't want to classify *any* DOM node as a function.\n\t\t// Support: QtWeb <=3.8.5, WebKit <=534.34, wkhtmltopdf tool <=0.12.5\n\t\t// Plus for old WebKit, typeof returns \"function\" for HTML collections\n\t\t// (e.g., `typeof document.getElementsByTagName(\"div\") === \"function\"`). (gh-4756)\n\t\treturn typeof obj === \"function\" && typeof obj.nodeType !== \"number\" &&\n\t\t\ttypeof obj.item !== \"function\";\n\t};\n\n\nvar isWindow = function isWindow( obj ) {\n\t\treturn obj != null && obj === obj.window;\n\t};\n\n\nvar document = window.document;\n\n\n\n\tvar preservedScriptAttributes = {\n\t\ttype: true,\n\t\tsrc: true,\n\t\tnonce: true,\n\t\tnoModule: true\n\t};\n\n\tfunction DOMEval( code, node, doc ) {\n\t\tdoc = doc || document;\n\n\t\tvar i, val,\n\t\t\tscript = doc.createElement( \"script\" );\n\n\t\tscript.text = code;\n\t\tif ( node ) {\n\t\t\tfor ( i in preservedScriptAttributes ) {\n\n\t\t\t\t// Support: Firefox 64+, Edge 18+\n\t\t\t\t// Some browsers don't support the \"nonce\" property on scripts.\n\t\t\t\t// On the other hand, just using `getAttribute` is not enough as\n\t\t\t\t// the `nonce` attribute is reset to an empty string whenever it\n\t\t\t\t// becomes browsing-context connected.\n\t\t\t\t// See https://github.com/whatwg/html/issues/2369\n\t\t\t\t// See https://html.spec.whatwg.org/#nonce-attributes\n\t\t\t\t// The `node.getAttribute` check was added for the sake of\n\t\t\t\t// `jQuery.globalEval` so that it can fake a nonce-containing node\n\t\t\t\t// via an object.\n\t\t\t\tval = node[ i ] || node.getAttribute && node.getAttribute( i );\n\t\t\t\tif ( val ) {\n\t\t\t\t\tscript.setAttribute( i, val );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdoc.head.appendChild( script ).parentNode.removeChild( script );\n\t}\n\n\nfunction toType( obj ) {\n\tif ( obj == null ) {\n\t\treturn obj + \"\";\n\t}\n\n\t// Support: Android <=2.3 only (functionish RegExp)\n\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\tclass2type[ toString.call( obj ) ] || \"object\" :\n\t\ttypeof obj;\n}\n/* global Symbol */\n// Defining this global in .eslintrc.json would create a danger of using the global\n// unguarded in another place, it seems safer to define global only for this module\n\n\n\nvar\n\tversion = \"3.6.4\",\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\t\treturn new jQuery.fn.init( selector, context );\n\t};\n\njQuery.fn = jQuery.prototype = {\n\n\t// The current version of jQuery being used\n\tjquery: version,\n\n\tconstructor: jQuery,\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\ttoArray: function() {\n\t\treturn slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\n\t\t// Return all the elements in a clean array\n\t\tif ( num == null ) {\n\t\t\treturn slice.call( this );\n\t\t}\n\n\t\t// Return just the one element from the set\n\t\treturn num < 0 ? this[ num + this.length ] : this[ num ];\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\teach: function( callback ) {\n\t\treturn jQuery.each( this, callback );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map( this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t} ) );\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teven: function() {\n\t\treturn this.pushStack( jQuery.grep( this, function( _elem, i ) {\n\t\t\treturn ( i + 1 ) % 2;\n\t\t} ) );\n\t},\n\n\todd: function() {\n\t\treturn this.pushStack( jQuery.grep( this, function( _elem, i ) {\n\t\t\treturn i % 2;\n\t\t} ) );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor();\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: push,\n\tsort: arr.sort,\n\tsplice: arr.splice\n};\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[ 0 ] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[ i ] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !isFunction( target ) ) {\n\t\ttarget = {};\n\t}\n\n\t// Extend jQuery itself if only one argument is passed\n\tif ( i === length ) {\n\t\ttarget = this;\n\t\ti--;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\n\t\t// Only deal with non-null/undefined values\n\t\tif ( ( options = arguments[ i ] ) != null ) {\n\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent Object.prototype pollution\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( name === \"__proto__\" || target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject( copy ) ||\n\t\t\t\t\t( copyIsArray = Array.isArray( copy ) ) ) ) {\n\t\t\t\t\tsrc = target[ name ];\n\n\t\t\t\t\t// Ensure proper type for the source value\n\t\t\t\t\tif ( copyIsArray && !Array.isArray( src ) ) {\n\t\t\t\t\t\tclone = [];\n\t\t\t\t\t} else if ( !copyIsArray && !jQuery.isPlainObject( src ) ) {\n\t\t\t\t\t\tclone = {};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src;\n\t\t\t\t\t}\n\t\t\t\t\tcopyIsArray = false;\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend( {\n\n\t// Unique for each copy of jQuery on the page\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// Assume jQuery is ready without the ready module\n\tisReady: true,\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\tnoop: function() {},\n\n\tisPlainObject: function( obj ) {\n\t\tvar proto, Ctor;\n\n\t\t// Detect obvious negatives\n\t\t// Use toString instead of jQuery.type to catch host objects\n\t\tif ( !obj || toString.call( obj ) !== \"[object Object]\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tproto = getProto( obj );\n\n\t\t// Objects with no prototype (e.g., `Object.create( null )`) are plain\n\t\tif ( !proto ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Objects with prototype are plain iff they were constructed by a global Object function\n\t\tCtor = hasOwn.call( proto, \"constructor\" ) && proto.constructor;\n\t\treturn typeof Ctor === \"function\" && fnToString.call( Ctor ) === ObjectFunctionString;\n\t},\n\n\tisEmptyObject: function( obj ) {\n\t\tvar name;\n\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t// Evaluates a script in a provided context; falls back to the global one\n\t// if not specified.\n\tglobalEval: function( code, options, doc ) {\n\t\tDOMEval( code, { nonce: options && options.nonce }, doc );\n\t},\n\n\teach: function( obj, callback ) {\n\t\tvar length, i = 0;\n\n\t\tif ( isArrayLike( obj ) ) {\n\t\t\tlength = obj.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( i in obj ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArrayLike( Object( arr ) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpush.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n\t},\n\n\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t// push.apply(_, arraylike) throws on ancient WebKit\n\tmerge: function( first, second ) {\n\t\tvar len = +second.length,\n\t\t\tj = 0,\n\t\t\ti = first.length;\n\n\t\tfor ( ; j < len; j++ ) {\n\t\t\tfirst[ i++ ] = second[ j ];\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, invert ) {\n\t\tvar callbackInverse,\n\t\t\tmatches = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tcallbackExpect = !invert;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\n\t\t\tif ( callbackInverse !== callbackExpect ) {\n\t\t\t\tmatches.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar length, value,\n\t\t\ti = 0,\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their new values\n\t\tif ( isArrayLike( elems ) ) {\n\t\t\tlength = elems.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn flat( ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport: support\n} );\n\nif ( typeof Symbol === \"function\" ) {\n\tjQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];\n}\n\n// Populate the class2type map\njQuery.each( \"Boolean Number String Function Array Date RegExp Object Error Symbol\".split( \" \" ),\n\tfunction( _i, name ) {\n\t\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n\t} );\n\nfunction isArrayLike( obj ) {\n\n\t// Support: real iOS 8.2 only (not reproducible in simulator)\n\t// `in` check used to prevent JIT error (gh-2145)\n\t// hasOwn isn't used here due to false negatives\n\t// regarding Nodelist length in IE\n\tvar length = !!obj && \"length\" in obj && obj.length,\n\t\ttype = toType( obj );\n\n\tif ( isFunction( obj ) || isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\treturn type === \"array\" || length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n}\nvar Sizzle =\n/*!\n * Sizzle CSS Selector Engine v2.3.10\n * https://sizzlejs.com/\n *\n * Copyright JS Foundation and other contributors\n * Released under the MIT license\n * https://js.foundation/\n *\n * Date: 2023-02-14\n */\n( function( window ) {\nvar i,\n\tsupport,\n\tExpr,\n\tgetText,\n\tisXML,\n\ttokenize,\n\tcompile,\n\tselect,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + 1 * new Date(),\n\tpreferredDoc = window.document,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tnonnativeSelectorCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\t// Instance methods\n\thasOwn = ( {} ).hasOwnProperty,\n\tarr = [],\n\tpop = arr.pop,\n\tpushNative = arr.push,\n\tpush = arr.push,\n\tslice = arr.slice,\n\n\t// Use a stripped-down indexOf as it's faster than native\n\t// https://jsperf.com/thor-indexof-vs-for/5\n\tindexOf = function( list, elem ) {\n\t\tvar i = 0,\n\t\t\tlen = list.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( list[ i ] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|\" +\n\t\t\"ismap|loop|multiple|open|readonly|required|scoped\",\n\n\t// Regular expressions\n\n\t// http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\n\t// https://www.w3.org/TR/css-syntax-3/#ident-token-diagram\n\tidentifier = \"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace +\n\t\t\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",\n\n\t// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace +\n\n\t\t// Operator (capture 2)\n\t\t\"*([*^$|!~]?=)\" + whitespace +\n\n\t\t// \"Attribute values must be CSS identifiers [capture 5]\n\t\t// or strings [capture 3 or capture 4]\"\n\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" +\n\t\twhitespace + \"*\\\\]\",\n\n\tpseudos = \":(\" + identifier + \")(?:\\\\((\" +\n\n\t\t// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n\t\t// 1. quoted (capture 3; capture 4 or capture 5)\n\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n\n\t\t// 2. simple (capture 6)\n\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n\n\t\t// 3. anything else (capture 2)\n\t\t\".*\" +\n\t\t\")\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" +\n\t\twhitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trleadingCombinator = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace +\n\t\t\"*\" ),\n\trdescend = new RegExp( whitespace + \"|>\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + identifier + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + identifier + \")\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + identifier + \"|[*])\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" +\n\t\t\twhitespace + \"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" +\n\t\t\twhitespace + \"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace +\n\t\t\t\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" + whitespace +\n\t\t\t\"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trhtml = /HTML$/i,\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\n\t// CSS escapes\n\t// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = new RegExp( \"\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace + \"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\", \"g\" ),\n\tfunescape = function( escape, nonHex ) {\n\t\tvar high = \"0x\" + escape.slice( 1 ) - 0x10000;\n\n\t\treturn nonHex ?\n\n\t\t\t// Strip the backslash prefix from a non-hex escape sequence\n\t\t\tnonHex :\n\n\t\t\t// Replace a hexadecimal escape sequence with the encoded Unicode code point\n\t\t\t// Support: IE <=11+\n\t\t\t// For values outside the Basic Multilingual Plane (BMP), manually construct a\n\t\t\t// surrogate pair\n\t\t\thigh < 0 ?\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t},\n\n\t// CSS string/identifier serialization\n\t// https://drafts.csswg.org/cssom/#common-serializing-idioms\n\trcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,\n\tfcssescape = function( ch, asCodePoint ) {\n\t\tif ( asCodePoint ) {\n\n\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n\t\t\tif ( ch === \"\\0\" ) {\n\t\t\t\treturn \"\\uFFFD\";\n\t\t\t}\n\n\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\n\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" +\n\t\t\t\tch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\n\t\t}\n\n\t\t// Other potentially-special ASCII characters get backslash-escaped\n\t\treturn \"\\\\\" + ch;\n\t},\n\n\t// Used for iframes\n\t// See setDocument()\n\t// Removing the function wrapper causes a \"Permission Denied\"\n\t// error in IE\n\tunloadHandler = function() {\n\t\tsetDocument();\n\t},\n\n\tinDisabledFieldset = addCombinator(\n\t\tfunction( elem ) {\n\t\t\treturn elem.disabled === true && elem.nodeName.toLowerCase() === \"fieldset\";\n\t\t},\n\t\t{ dir: \"parentNode\", next: \"legend\" }\n\t);\n\n// Optimize for push.apply( _, NodeList )\ntry {\n\tpush.apply(\n\t\t( arr = slice.call( preferredDoc.childNodes ) ),\n\t\tpreferredDoc.childNodes\n\t);\n\n\t// Support: Android<4.0\n\t// Detect silently failing push.apply\n\t// eslint-disable-next-line no-unused-expressions\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = { apply: arr.length ?\n\n\t\t// Leverage slice if possible\n\t\tfunction( target, els ) {\n\t\t\tpushNative.apply( target, slice.call( els ) );\n\t\t} :\n\n\t\t// Support: IE<9\n\t\t// Otherwise append directly\n\t\tfunction( target, els ) {\n\t\t\tvar j = target.length,\n\t\t\t\ti = 0;\n\n\t\t\t// Can't trust NodeList.length\n\t\t\twhile ( ( target[ j++ ] = els[ i++ ] ) ) {}\n\t\t\ttarget.length = j - 1;\n\t\t}\n\t};\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar m, i, elem, nid, match, groups, newSelector,\n\t\tnewContext = context && context.ownerDocument,\n\n\t\t// nodeType defaults to 9, since context defaults to document\n\t\tnodeType = context ? context.nodeType : 9;\n\n\tresults = results || [];\n\n\t// Return early from calls with invalid selector or context\n\tif ( typeof selector !== \"string\" || !selector ||\n\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n\n\t\treturn results;\n\t}\n\n\t// Try to shortcut find operations (as opposed to filters) in HTML documents\n\tif ( !seed ) {\n\t\tsetDocument( context );\n\t\tcontext = context || document;\n\n\t\tif ( documentIsHTML ) {\n\n\t\t\t// If the selector is sufficiently simple, try using a \"get*By*\" DOM method\n\t\t\t// (excepting DocumentFragment context, where the methods don't exist)\n\t\t\tif ( nodeType !== 11 && ( match = rquickExpr.exec( selector ) ) ) {\n\n\t\t\t\t// ID selector\n\t\t\t\tif ( ( m = match[ 1 ] ) ) {\n\n\t\t\t\t\t// Document context\n\t\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\t\tif ( ( elem = context.getElementById( m ) ) ) {\n\n\t\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t// Element context\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\tif ( newContext && ( elem = newContext.getElementById( m ) ) &&\n\t\t\t\t\t\t\tcontains( context, elem ) &&\n\t\t\t\t\t\t\telem.id === m ) {\n\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t// Type selector\n\t\t\t\t} else if ( match[ 2 ] ) {\n\t\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\t\treturn results;\n\n\t\t\t\t// Class selector\n\t\t\t\t} else if ( ( m = match[ 3 ] ) && support.getElementsByClassName &&\n\t\t\t\t\tcontext.getElementsByClassName ) {\n\n\t\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\t\treturn results;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Take advantage of querySelectorAll\n\t\t\tif ( support.qsa &&\n\t\t\t\t!nonnativeSelectorCache[ selector + \" \" ] &&\n\t\t\t\t( !rbuggyQSA || !rbuggyQSA.test( selector ) ) &&\n\n\t\t\t\t// Support: IE 8 only\n\t\t\t\t// Exclude object elements\n\t\t\t\t( nodeType !== 1 || context.nodeName.toLowerCase() !== \"object\" ) ) {\n\n\t\t\t\tnewSelector = selector;\n\t\t\t\tnewContext = context;\n\n\t\t\t\t// qSA considers elements outside a scoping root when evaluating child or\n\t\t\t\t// descendant combinators, which is not what we want.\n\t\t\t\t// In such cases, we work around the behavior by prefixing every selector in the\n\t\t\t\t// list with an ID selector referencing the scope context.\n\t\t\t\t// The technique has to be used as well when a leading combinator is used\n\t\t\t\t// as such selectors are not recognized by querySelectorAll.\n\t\t\t\t// Thanks to Andrew Dupont for this technique.\n\t\t\t\tif ( nodeType === 1 &&\n\t\t\t\t\t( rdescend.test( selector ) || rleadingCombinator.test( selector ) ) ) {\n\n\t\t\t\t\t// Expand context for sibling selectors\n\t\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) ||\n\t\t\t\t\t\tcontext;\n\n\t\t\t\t\t// We can use :scope instead of the ID hack if the browser\n\t\t\t\t\t// supports it & if we're not changing the context.\n\t\t\t\t\tif ( newContext !== context || !support.scope ) {\n\n\t\t\t\t\t\t// Capture the context ID, setting it first if necessary\n\t\t\t\t\t\tif ( ( nid = context.getAttribute( \"id\" ) ) ) {\n\t\t\t\t\t\t\tnid = nid.replace( rcssescape, fcssescape );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontext.setAttribute( \"id\", ( nid = expando ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prefix every selector in the list\n\t\t\t\t\tgroups = tokenize( selector );\n\t\t\t\t\ti = groups.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tgroups[ i ] = ( nid ? \"#\" + nid : \":scope\" ) + \" \" +\n\t\t\t\t\t\t\ttoSelector( groups[ i ] );\n\t\t\t\t\t}\n\t\t\t\t\tnewSelector = groups.join( \",\" );\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t);\n\t\t\t\t\treturn results;\n\t\t\t\t} catch ( qsaError ) {\n\t\t\t\t\tnonnativeSelectorCache( selector, true );\n\t\t\t\t} finally {\n\t\t\t\t\tif ( nid === expando ) {\n\t\t\t\t\t\tcontext.removeAttribute( \"id\" );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {function(string, object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn ( cache[ key + \" \" ] = value );\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created element and returns a boolean result\n */\nfunction assert( fn ) {\n\tvar el = document.createElement( \"fieldset\" );\n\n\ttry {\n\t\treturn !!fn( el );\n\t} catch ( e ) {\n\t\treturn false;\n\t} finally {\n\n\t\t// Remove from its parent by default\n\t\tif ( el.parentNode ) {\n\t\t\tel.parentNode.removeChild( el );\n\t\t}\n\n\t\t// release memory in IE\n\t\tel = null;\n\t}\n}\n\n/**\n * Adds the same handler for all of the specified attrs\n * @param {String} attrs Pipe-separated list of attributes\n * @param {Function} handler The method that will be applied\n */\nfunction addHandle( attrs, handler ) {\n\tvar arr = attrs.split( \"|\" ),\n\t\ti = arr.length;\n\n\twhile ( i-- ) {\n\t\tExpr.attrHandle[ arr[ i ] ] = handler;\n\t}\n}\n\n/**\n * Checks document order of two siblings\n * @param {Element} a\n * @param {Element} b\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n */\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\ta.sourceIndex - b.sourceIndex;\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( ( cur = cur.nextSibling ) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn ( name === \"input\" || name === \"button\" ) && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for :enabled/:disabled\n * @param {Boolean} disabled true for :disabled; false for :enabled\n */\nfunction createDisabledPseudo( disabled ) {\n\n\t// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable\n\treturn function( elem ) {\n\n\t\t// Only certain elements can match :enabled or :disabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled\n\t\tif ( \"form\" in elem ) {\n\n\t\t\t// Check for inherited disabledness on relevant non-disabled elements:\n\t\t\t// * listed form-associated elements in a disabled fieldset\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#category-listed\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled\n\t\t\t// * option elements in a disabled optgroup\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled\n\t\t\t// All such elements have a \"form\" property.\n\t\t\tif ( elem.parentNode && elem.disabled === false ) {\n\n\t\t\t\t// Option elements defer to a parent optgroup if present\n\t\t\t\tif ( \"label\" in elem ) {\n\t\t\t\t\tif ( \"label\" in elem.parentNode ) {\n\t\t\t\t\t\treturn elem.parentNode.disabled === disabled;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn elem.disabled === disabled;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Support: IE 6 - 11\n\t\t\t\t// Use the isDisabled shortcut property to check for disabled fieldset ancestors\n\t\t\t\treturn elem.isDisabled === disabled ||\n\n\t\t\t\t\t// Where there is no isDisabled, check manually\n\t\t\t\t\t/* jshint -W018 */\n\t\t\t\t\telem.isDisabled !== !disabled &&\n\t\t\t\t\tinDisabledFieldset( elem ) === disabled;\n\t\t\t}\n\n\t\t\treturn elem.disabled === disabled;\n\n\t\t// Try to winnow out elements that can't be disabled before trusting the disabled property.\n\t\t// Some victims get caught in our net (label, legend, menu, track), but it shouldn't\n\t\t// even exist on them, let alone have a boolean value.\n\t\t} else if ( \"label\" in elem ) {\n\t\t\treturn elem.disabled === disabled;\n\t\t}\n\n\t\t// Remaining elements are neither :enabled nor :disabled\n\t\treturn false;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction( function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction( function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ ( j = matchIndexes[ i ] ) ] ) {\n\t\t\t\t\tseed[ j ] = !( matches[ j ] = seed[ j ] );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t} );\n}\n\n/**\n * Checks a node for validity as a Sizzle context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n}\n\n// Expose support vars for convenience\nsupport = Sizzle.support = {};\n\n/**\n * Detects XML nodes\n * @param {Element|Object} elem An element or a document\n * @returns {Boolean} True iff elem is a non-HTML XML node\n */\nisXML = Sizzle.isXML = function( elem ) {\n\tvar namespace = elem && elem.namespaceURI,\n\t\tdocElem = elem && ( elem.ownerDocument || elem ).documentElement;\n\n\t// Support: IE <=8\n\t// Assume HTML when documentElement doesn't yet exist, such as inside loading iframes\n\t// https://bugs.jquery.com/ticket/4833\n\treturn !rhtml.test( namespace || docElem && docElem.nodeName || \"HTML\" );\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar hasCompare, subWindow,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// Return early if doc is invalid or already selected\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( doc == document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Update global variables\n\tdocument = doc;\n\tdocElem = document.documentElement;\n\tdocumentIsHTML = !isXML( document );\n\n\t// Support: IE 9 - 11+, Edge 12 - 18+\n\t// Accessing iframe documents after unload throws \"permission denied\" errors (jQuery #13936)\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( preferredDoc != document &&\n\t\t( subWindow = document.defaultView ) && subWindow.top !== subWindow ) {\n\n\t\t// Support: IE 11, Edge\n\t\tif ( subWindow.addEventListener ) {\n\t\t\tsubWindow.addEventListener( \"unload\", unloadHandler, false );\n\n\t\t// Support: IE 9 - 10 only\n\t\t} else if ( subWindow.attachEvent ) {\n\t\t\tsubWindow.attachEvent( \"onunload\", unloadHandler );\n\t\t}\n\t}\n\n\t// Support: IE 8 - 11+, Edge 12 - 18+, Chrome <=16 - 25 only, Firefox <=3.6 - 31 only,\n\t// Safari 4 - 5 only, Opera <=11.6 - 12.x only\n\t// IE/Edge & older browsers don't support the :scope pseudo-class.\n\t// Support: Safari 6.0 only\n\t// Safari 6.0 supports :scope but it's an alias of :root there.\n\tsupport.scope = assert( function( el ) {\n\t\tdocElem.appendChild( el ).appendChild( document.createElement( \"div\" ) );\n\t\treturn typeof el.querySelectorAll !== \"undefined\" &&\n\t\t\t!el.querySelectorAll( \":scope fieldset div\" ).length;\n\t} );\n\n\t// Support: Chrome 105 - 110+, Safari 15.4 - 16.3+\n\t// Make sure the the `:has()` argument is parsed unforgivingly.\n\t// We include `*` in the test to detect buggy implementations that are\n\t// _selectively_ forgiving (specifically when the list includes at least\n\t// one valid selector).\n\t// Note that we treat complete lack of support for `:has()` as if it were\n\t// spec-compliant support, which is fine because use of `:has()` in such\n\t// environments will fail in the qSA path and fall back to jQuery traversal\n\t// anyway.\n\tsupport.cssHas = assert( function() {\n\t\ttry {\n\t\t\tdocument.querySelector( \":has(*,:jqfake)\" );\n\t\t\treturn false;\n\t\t} catch ( e ) {\n\t\t\treturn true;\n\t\t}\n\t} );\n\n\t/* Attributes\n\t---------------------------------------------------------------------- */\n\n\t// Support: IE<8\n\t// Verify that getAttribute really returns attributes and not properties\n\t// (excepting IE8 booleans)\n\tsupport.attributes = assert( function( el ) {\n\t\tel.className = \"i\";\n\t\treturn !el.getAttribute( \"className\" );\n\t} );\n\n\t/* getElement(s)By*\n\t---------------------------------------------------------------------- */\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.getElementsByTagName = assert( function( el ) {\n\t\tel.appendChild( document.createComment( \"\" ) );\n\t\treturn !el.getElementsByTagName( \"*\" ).length;\n\t} );\n\n\t// Support: IE<9\n\tsupport.getElementsByClassName = rnative.test( document.getElementsByClassName );\n\n\t// Support: IE<10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programmatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert( function( el ) {\n\t\tdocElem.appendChild( el ).id = expando;\n\t\treturn !document.getElementsByName || !document.getElementsByName( expando ).length;\n\t} );\n\n\t// ID filter and find\n\tif ( support.getById ) {\n\t\tExpr.filter[ \"ID\" ] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute( \"id\" ) === attrId;\n\t\t\t};\n\t\t};\n\t\tExpr.find[ \"ID\" ] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar elem = context.getElementById( id );\n\t\t\t\treturn elem ? [ elem ] : [];\n\t\t\t}\n\t\t};\n\t} else {\n\t\tExpr.filter[ \"ID\" ] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" &&\n\t\t\t\t\telem.getAttributeNode( \"id\" );\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\n\t\t// Support: IE 6 - 7 only\n\t\t// getElementById is not reliable as a find shortcut\n\t\tExpr.find[ \"ID\" ] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar node, i, elems,\n\t\t\t\t\telem = context.getElementById( id );\n\n\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t// Verify the id attribute\n\t\t\t\t\tnode = elem.getAttributeNode( \"id\" );\n\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fall back on getElementsByName\n\t\t\t\t\telems = context.getElementsByName( id );\n\t\t\t\t\ti = 0;\n\t\t\t\t\twhile ( ( elem = elems[ i++ ] ) ) {\n\t\t\t\t\t\tnode = elem.getAttributeNode( \"id\" );\n\t\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn [];\n\t\t\t}\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[ \"TAG\" ] = support.getElementsByTagName ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\n\t\t\t// DocumentFragment nodes don't have gEBTN\n\t\t\t} else if ( support.qsa ) {\n\t\t\t\treturn context.querySelectorAll( tag );\n\t\t\t}\n\t\t} :\n\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\n\t\t\t\t// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( ( elem = results[ i++ ] ) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Class\n\tExpr.find[ \"CLASS\" ] = support.getElementsByClassName && function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21)\n\t// We allow this because of a bug in IE8/9 that throws an error\n\t// whenever `document.activeElement` is accessed on an iframe\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t// See https://bugs.jquery.com/ticket/13378\n\trbuggyQSA = [];\n\n\tif ( ( support.qsa = rnative.test( document.querySelectorAll ) ) ) {\n\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert( function( el ) {\n\n\t\t\tvar input;\n\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explicitly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// https://bugs.jquery.com/ticket/12359\n\t\t\tdocElem.appendChild( el ).innerHTML = \"<a id='\" + expando + \"'></a>\" +\n\t\t\t\t\"<select id='\" + expando + \"-\\r\\\\' msallowcapture=''>\" +\n\t\t\t\t\"<option selected=''></option></select>\";\n\n\t\t\t// Support: IE8, Opera 11-12.16\n\t\t\t// Nothing should be selected when empty strings follow ^= or $= or *=\n\t\t\t// The test attribute must be unknown in Opera but \"safe\" for WinRT\n\t\t\t// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\n\t\t\tif ( el.querySelectorAll( \"[msallowcapture^='']\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t// Boolean attributes and \"value\" are not treated correctly\n\t\t\tif ( !el.querySelectorAll( \"[selected]\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t}\n\n\t\t\t// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+\n\t\t\tif ( !el.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"~=\" );\n\t\t\t}\n\n\t\t\t// Support: IE 11+, Edge 15 - 18+\n\t\t\t// IE 11/Edge don't find elements on a `[name='']` query in some cases.\n\t\t\t// Adding a temporary attribute to the document before the selection works\n\t\t\t// around the issue.\n\t\t\t// Interestingly, IE 10 & older don't seem to have the issue.\n\t\t\tinput = document.createElement( \"input\" );\n\t\t\tinput.setAttribute( \"name\", \"\" );\n\t\t\tel.appendChild( input );\n\t\t\tif ( !el.querySelectorAll( \"[name='']\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*name\" + whitespace + \"*=\" +\n\t\t\t\t\twhitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !el.querySelectorAll( \":checked\" ).length ) {\n\t\t\t\trbuggyQSA.push( \":checked\" );\n\t\t\t}\n\n\t\t\t// Support: Safari 8+, iOS 8+\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=136851\n\t\t\t// In-page `selector#id sibling-combinator selector` fails\n\t\t\tif ( !el.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n\t\t\t\trbuggyQSA.push( \".#.+[+~]\" );\n\t\t\t}\n\n\t\t\t// Support: Firefox <=3.6 - 5 only\n\t\t\t// Old Firefox doesn't throw on a badly-escaped identifier.\n\t\t\tel.querySelectorAll( \"\\\\\\f\" );\n\t\t\trbuggyQSA.push( \"[\\\\r\\\\n\\\\f]\" );\n\t\t} );\n\n\t\tassert( function( el ) {\n\t\t\tel.innerHTML = \"<a href='' disabled='disabled'></a>\" +\n\t\t\t\t\"<select disabled='disabled'><option/></select>\";\n\n\t\t\t// Support: Windows 8 Native Apps\n\t\t\t// The type and name attributes are restricted during .innerHTML assignment\n\t\t\tvar input = document.createElement( \"input\" );\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\tel.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t\t// Support: IE8\n\t\t\t// Enforce case-sensitivity of name attribute\n\t\t\tif ( el.querySelectorAll( \"[name=d]\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( el.querySelectorAll( \":enabled\" ).length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Support: IE9-11+\n\t\t\t// IE's :disabled selector does not pick up the children of disabled fieldsets\n\t\t\tdocElem.appendChild( el ).disabled = true;\n\t\t\tif ( el.querySelectorAll( \":disabled\" ).length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Support: Opera 10 - 11 only\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tel.querySelectorAll( \"*,:x\" );\n\t\t\trbuggyQSA.push( \",.*:\" );\n\t\t} );\n\t}\n\n\tif ( ( support.matchesSelector = rnative.test( ( matches = docElem.matches ||\n\t\tdocElem.webkitMatchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector ) ) ) ) {\n\n\t\tassert( function( el ) {\n\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( el, \"*\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( el, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t} );\n\t}\n\n\tif ( !support.cssHas ) {\n\n\t\t// Support: Chrome 105 - 110+, Safari 15.4 - 16.3+\n\t\t// Our regular `try-catch` mechanism fails to detect natively-unsupported\n\t\t// pseudo-classes inside `:has()` (such as `:has(:contains(\"Foo\"))`)\n\t\t// in browsers that parse the `:has()` argument as a forgiving selector list.\n\t\t// https://drafts.csswg.org/selectors/#relational now requires the argument\n\t\t// to be parsed unforgivingly, but browsers have not yet fully adjusted.\n\t\trbuggyQSA.push( \":has\" );\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join( \"|\" ) );\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join( \"|\" ) );\n\n\t/* Contains\n\t---------------------------------------------------------------------- */\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\n\n\t// Element contains another\n\t// Purposefully self-exclusive\n\t// As in, an element does not contain itself\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n\t\tfunction( a, b ) {\n\n\t\t\t// Support: IE <9 only\n\t\t\t// IE doesn't have `contains` on `document` so we need to check for\n\t\t\t// `documentElement` presence.\n\t\t\t// We need to fall back to `a` when `documentElement` is missing\n\t\t\t// as `ownerDocument` of elements within `<template/>` may have\n\t\t\t// a null one - a default behavior of all modern browsers.\n\t\t\tvar adown = a.nodeType === 9 && a.documentElement || a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t) );\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( ( b = b.parentNode ) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\t// Document order sorting\n\tsortOrder = hasCompare ?\n\tfunction( a, b ) {\n\n\t\t// Flag for duplicate removal\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Sort on method existence if only one input has compareDocumentPosition\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\t// Calculate position if both inputs belong to the same document\n\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t// two documents; shallow comparisons work.\n\t\t// eslint-disable-next-line eqeqeq\n\t\tcompare = ( a.ownerDocument || a ) == ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t// Otherwise we know they are disconnected\n\t\t\t1;\n\n\t\t// Disconnected nodes\n\t\tif ( compare & 1 ||\n\t\t\t( !support.sortDetached && b.compareDocumentPosition( a ) === compare ) ) {\n\n\t\t\t// Choose the first element that is related to our preferred document\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\tif ( a == document || a.ownerDocument == preferredDoc &&\n\t\t\t\tcontains( preferredDoc, a ) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\tif ( b == document || b.ownerDocument == preferredDoc &&\n\t\t\t\tcontains( preferredDoc, b ) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\t// Maintain original order\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\tif ( !aup || !bup ) {\n\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t/* eslint-disable eqeqeq */\n\t\t\treturn a == document ? -1 :\n\t\t\t\tb == document ? 1 :\n\t\t\t\t/* eslint-enable eqeqeq */\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\tsortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( ( cur = cur.parentNode ) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( ( cur = cur.parentNode ) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[ i ] === bp[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[ i ], bp[ i ] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t/* eslint-disable eqeqeq */\n\t\t\tap[ i ] == preferredDoc ? -1 :\n\t\t\tbp[ i ] == preferredDoc ? 1 :\n\t\t\t/* eslint-enable eqeqeq */\n\t\t\t0;\n\t};\n\n\treturn document;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\tsetDocument( elem );\n\n\tif ( support.matchesSelector && documentIsHTML &&\n\t\t!nonnativeSelectorCache[ expr + \" \" ] &&\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\n\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t// fragment in IE 9\n\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch ( e ) {\n\t\t\tnonnativeSelectorCache( expr, true );\n\t\t}\n\t}\n\n\treturn Sizzle( expr, document, null, [ elem ] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\n\t// Set document vars if needed\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( ( context.ownerDocument || context ) != document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\n\t// Set document vars if needed\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( ( elem.ownerDocument || elem ) != document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\n\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\treturn val !== undefined ?\n\t\tval :\n\t\tsupport.attributes || !documentIsHTML ?\n\t\t\telem.getAttribute( name ) :\n\t\t\t( val = elem.getAttributeNode( name ) ) && val.specified ?\n\t\t\t\tval.value :\n\t\t\t\tnull;\n};\n\nSizzle.escape = function( sel ) {\n\treturn ( sel + \"\" ).replace( rcssescape, fcssescape );\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tsortInput = !support.sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( ( elem = results[ i++ ] ) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n};\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\n\t\t// If no nodeType, this is expected to be an array\n\t\twhile ( ( node = elem[ i++ ] ) ) {\n\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (jQuery #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[ 1 ] = match[ 1 ].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[ 3 ] = ( match[ 3 ] || match[ 4 ] ||\n\t\t\t\tmatch[ 5 ] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[ 2 ] === \"~=\" ) {\n\t\t\t\tmatch[ 3 ] = \" \" + match[ 3 ] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[ 1 ] = match[ 1 ].toLowerCase();\n\n\t\t\tif ( match[ 1 ].slice( 0, 3 ) === \"nth\" ) {\n\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[ 3 ] ) {\n\t\t\t\t\tSizzle.error( match[ 0 ] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[ 4 ] = +( match[ 4 ] ?\n\t\t\t\t\tmatch[ 5 ] + ( match[ 6 ] || 1 ) :\n\t\t\t\t\t2 * ( match[ 3 ] === \"even\" || match[ 3 ] === \"odd\" ) );\n\t\t\t\tmatch[ 5 ] = +( ( match[ 7 ] + match[ 8 ] ) || match[ 3 ] === \"odd\" );\n\n\t\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[ 3 ] ) {\n\t\t\t\tSizzle.error( match[ 0 ] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[ 6 ] && match[ 2 ];\n\n\t\t\tif ( matchExpr[ \"CHILD\" ].test( match[ 0 ] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[ 3 ] ) {\n\t\t\t\tmatch[ 2 ] = match[ 4 ] || match[ 5 ] || \"\";\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t( excess = tokenize( unquoted, true ) ) &&\n\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t( excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length ) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[ 0 ] = match[ 0 ].slice( 0, excess );\n\t\t\t\tmatch[ 2 ] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() {\n\t\t\t\t\treturn true;\n\t\t\t\t} :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t( pattern = new RegExp( \"(^|\" + whitespace +\n\t\t\t\t\t\")\" + className + \"(\" + whitespace + \"|$)\" ) ) && classCache(\n\t\t\t\t\t\tclassName, function( elem ) {\n\t\t\t\t\t\t\treturn pattern.test(\n\t\t\t\t\t\t\t\ttypeof elem.className === \"string\" && elem.className ||\n\t\t\t\t\t\t\t\ttypeof elem.getAttribute !== \"undefined\" &&\n\t\t\t\t\t\t\t\t\telem.getAttribute( \"class\" ) ||\n\t\t\t\t\t\t\t\t\"\"\n\t\t\t\t\t\t\t);\n\t\t\t\t} );\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\t/* eslint-disable max-len */\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t\t/* eslint-enable max-len */\n\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, _argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, _context, xml ) {\n\t\t\t\t\tvar cache, uniqueCache, outerCache, node, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType,\n\t\t\t\t\t\tdiff = false;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( ( node = node[ dir ] ) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) {\n\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\n\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\tnode = parent;\n\t\t\t\t\t\t\touterCache = node[ expando ] || ( node[ expando ] = {} );\n\n\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t( outerCache[ node.uniqueID ] = {} );\n\n\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\tdiff = nodeIndex && cache[ 2 ];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( ( node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t( diff = nodeIndex = 0 ) || start.pop() ) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t\tif ( useCache ) {\n\n\t\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\touterCache = node[ expando ] || ( node[ expando ] = {} );\n\n\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t( outerCache[ node.uniqueID ] = {} );\n\n\t\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\t\tdiff = nodeIndex;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// xml :nth-child(...)\n\t\t\t\t\t\t\t// or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t\tif ( diff === false ) {\n\n\t\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\t\twhile ( ( node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t\t( diff = nodeIndex = 0 ) || start.pop() ) ) {\n\n\t\t\t\t\t\t\t\t\tif ( ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) &&\n\t\t\t\t\t\t\t\t\t\t++diff ) {\n\n\t\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t\touterCache = node[ expando ] ||\n\t\t\t\t\t\t\t\t\t\t\t\t( node[ expando ] = {} );\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t\t\t\t( outerCache[ node.uniqueID ] = {} );\n\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction( function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf( seed, matched[ i ] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[ i ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t} ) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction( function( selector ) {\n\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction( function( seed, matches, _context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( ( elem = unmatched[ i ] ) ) {\n\t\t\t\t\t\t\tseed[ i ] = !( matches[ i ] = elem );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} ) :\n\t\t\t\tfunction( elem, _context, xml ) {\n\t\t\t\t\tinput[ 0 ] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\n\t\t\t\t\t// Don't keep the element (issue #299)\n\t\t\t\t\tinput[ 0 ] = null;\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t} ),\n\n\t\t\"has\": markFunction( function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t} ),\n\n\t\t\"contains\": markFunction( function( text ) {\n\t\t\ttext = text.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t} ),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\n\t\t\t// lang value must be a valid identifier\n\t\t\tif ( !ridentifier.test( lang || \"\" ) ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( ( elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute( \"xml:lang\" ) || elem.getAttribute( \"lang\" ) ) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( ( elem = elem.parentNode ) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t} ),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement &&\n\t\t\t\t( !document.hasFocus || document.hasFocus() ) &&\n\t\t\t\t!!( elem.type || elem.href || ~elem.tabIndex );\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": createDisabledPseudo( false ),\n\t\t\"disabled\": createDisabledPseudo( true ),\n\n\t\t\"checked\": function( elem ) {\n\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn ( nodeName === \"input\" && !!elem.checked ) ||\n\t\t\t\t( nodeName === \"option\" && !!elem.selected );\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\t// eslint-disable-next-line no-unused-expressions\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[ \"empty\" ]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\n\t\t\t\t// Support: IE <10 only\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n\t\t\t\t( ( attr = elem.getAttribute( \"type\" ) ) == null ||\n\t\t\t\t\tattr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo( function() {\n\t\t\treturn [ 0 ];\n\t\t} ),\n\n\t\t\"last\": createPositionalPseudo( function( _matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t} ),\n\n\t\t\"eq\": createPositionalPseudo( function( _matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t} ),\n\n\t\t\"even\": createPositionalPseudo( function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} ),\n\n\t\t\"odd\": createPositionalPseudo( function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} ),\n\n\t\t\"lt\": createPositionalPseudo( function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ?\n\t\t\t\targument + length :\n\t\t\t\targument > length ?\n\t\t\t\t\tlength :\n\t\t\t\t\targument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} ),\n\n\t\t\"gt\": createPositionalPseudo( function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} )\n\t}\n};\n\nExpr.pseudos[ \"nth\" ] = Expr.pseudos[ \"eq\" ];\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\ntokenize = Sizzle.tokenize = function( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || ( match = rcomma.exec( soFar ) ) ) {\n\t\t\tif ( match ) {\n\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[ 0 ].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( ( tokens = [] ) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( ( match = rleadingCombinator.exec( soFar ) ) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push( {\n\t\t\t\tvalue: matched,\n\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[ 0 ].replace( rtrim, \" \" )\n\t\t\t} );\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( ( match = matchExpr[ type ].exec( soFar ) ) && ( !preFilters[ type ] ||\n\t\t\t\t( match = preFilters[ type ]( match ) ) ) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push( {\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t} );\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n};\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[ i ].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tskip = combinator.next,\n\t\tkey = skip || dir,\n\t\tcheckNonElements = base && key === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, uniqueCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || ( elem[ expando ] = {} );\n\n\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\tuniqueCache = outerCache[ elem.uniqueID ] ||\n\t\t\t\t\t\t\t( outerCache[ elem.uniqueID ] = {} );\n\n\t\t\t\t\t\tif ( skip && skip === elem.nodeName.toLowerCase() ) {\n\t\t\t\t\t\t\telem = elem[ dir ] || elem;\n\t\t\t\t\t\t} else if ( ( oldCache = uniqueCache[ key ] ) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\n\t\t\t\t\t\t\treturn ( newCache[ 2 ] = oldCache[ 2 ] );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\n\t\t\t\t\t\t\tuniqueCache[ key ] = newCache;\n\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\n\t\t\t\t\t\t\tif ( ( newCache[ 2 ] = matcher( elem, context, xml ) ) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[ i ]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[ 0 ];\n}\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[ i ], results );\n\t}\n\treturn results;\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( ( elem = unmatched[ i ] ) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction( function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts(\n\t\t\t\tselector || \"*\",\n\t\t\t\tcontext.nodeType ? [ context ] : context,\n\t\t\t\t[]\n\t\t\t),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( ( elem = temp[ i ] ) ) {\n\t\t\t\t\tmatcherOut[ postMap[ i ] ] = !( matcherIn[ postMap[ i ] ] = elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( ( elem = matcherOut[ i ] ) ) {\n\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( ( matcherIn[ i ] = elem ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, ( matcherOut = [] ), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( ( elem = matcherOut[ i ] ) &&\n\t\t\t\t\t\t( temp = postFinder ? indexOf( seed, elem ) : preMap[ i ] ) > -1 ) {\n\n\t\t\t\t\t\tseed[ temp ] = !( results[ temp ] = elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t} );\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[ 0 ].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[ \" \" ],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\tvar ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t( checkContext = context ).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\n\t\t\t// Avoid hanging onto element (issue #299)\n\t\t\tcheckContext = null;\n\t\t\treturn ret;\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( ( matcher = Expr.relative[ tokens[ i ].type ] ) ) {\n\t\t\tmatchers = [ addCombinator( elementMatcher( matchers ), matcher ) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[ i ].type ].apply( null, tokens[ i ].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[ j ].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\n\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\ttokens\n\t\t\t\t\t\t.slice( 0, i - 1 )\n\t\t\t\t\t\t.concat( { value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" } )\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( ( tokens = tokens.slice( j ) ) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\n\t\t\t\t// We must always have either seed elements or outermost context\n\t\t\t\telems = seed || byElement && Expr.find[ \"TAG\" ]( \"*\", outermost ),\n\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = ( dirruns += contextBackup == null ? 1 : Math.random() || 0.1 ),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\n\t\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t\t// two documents; shallow comparisons work.\n\t\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\t\toutermostContext = context == document || context || outermost;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Support: IE<9, Safari\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\t\t\tfor ( ; i !== len && ( elem = elems[ i ] ) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\n\t\t\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t\t\t// two documents; shallow comparisons work.\n\t\t\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\t\t\tif ( !context && elem.ownerDocument != document ) {\n\t\t\t\t\t\tsetDocument( elem );\n\t\t\t\t\t\txml = !documentIsHTML;\n\t\t\t\t\t}\n\t\t\t\t\twhile ( ( matcher = elementMatchers[ j++ ] ) ) {\n\t\t\t\t\t\tif ( matcher( elem, context || document, xml ) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( ( elem = !matcher && elem ) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// `i` is now the count of elements visited above, and adding it to `matchedCount`\n\t\t\t// makes the latter nonnegative.\n\t\t\tmatchedCount += i;\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\t// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\n\t\t\t// equals `i`), unless we didn't visit _any_ elements in the above loop because we have\n\t\t\t// no element matchers and no seed.\n\t\t\t// Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\n\t\t\t// case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\n\t\t\t// numerically zero.\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( ( matcher = setMatchers[ j++ ] ) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !( unmatched[ i ] || setMatched[ i ] ) ) {\n\t\t\t\t\t\t\t\tsetMatched[ i ] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !match ) {\n\t\t\tmatch = tokenize( selector );\n\t\t}\n\t\ti = match.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( match[ i ] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache(\n\t\t\tselector,\n\t\t\tmatcherFromGroupMatchers( elementMatchers, setMatchers )\n\t\t);\n\n\t\t// Save selector and tokenization\n\t\tcached.selector = selector;\n\t}\n\treturn cached;\n};\n\n/**\n * A low-level selection function that works with Sizzle's compiled\n *  selector functions\n * @param {String|Function} selector A selector or a pre-compiled\n *  selector function built with Sizzle.compile\n * @param {Element} context\n * @param {Array} [results]\n * @param {Array} [seed] A set of elements to match against\n */\nselect = Sizzle.select = function( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tcompiled = typeof selector === \"function\" && selector,\n\t\tmatch = !seed && tokenize( ( selector = compiled.selector || selector ) );\n\n\tresults = results || [];\n\n\t// Try to minimize operations if there is only one selector in the list and no seed\n\t// (the latter of which guarantees us context)\n\tif ( match.length === 1 ) {\n\n\t\t// Reduce context if the leading compound selector is an ID\n\t\ttokens = match[ 0 ] = match[ 0 ].slice( 0 );\n\t\tif ( tokens.length > 2 && ( token = tokens[ 0 ] ).type === \"ID\" &&\n\t\t\tcontext.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[ 1 ].type ] ) {\n\n\t\t\tcontext = ( Expr.find[ \"ID\" ]( token.matches[ 0 ]\n\t\t\t\t.replace( runescape, funescape ), context ) || [] )[ 0 ];\n\t\t\tif ( !context ) {\n\t\t\t\treturn results;\n\n\t\t\t// Precompiled matchers will still verify ancestry, so step up a level\n\t\t\t} else if ( compiled ) {\n\t\t\t\tcontext = context.parentNode;\n\t\t\t}\n\n\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t}\n\n\t\t// Fetch a seed set for right-to-left matching\n\t\ti = matchExpr[ \"needsContext\" ].test( selector ) ? 0 : tokens.length;\n\t\twhile ( i-- ) {\n\t\t\ttoken = tokens[ i ];\n\n\t\t\t// Abort if we hit a combinator\n\t\t\tif ( Expr.relative[ ( type = token.type ) ] ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( ( find = Expr.find[ type ] ) ) {\n\n\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\tif ( ( seed = find(\n\t\t\t\t\ttoken.matches[ 0 ].replace( runescape, funescape ),\n\t\t\t\t\trsibling.test( tokens[ 0 ].type ) && testContext( context.parentNode ) ||\n\t\t\t\t\t\tcontext\n\t\t\t\t) ) ) {\n\n\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function if one is not provided\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\t( compiled || compile( selector, match ) )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\t!context || rsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n};\n\n// One-time assignments\n\n// Sort stability\nsupport.sortStable = expando.split( \"\" ).sort( sortOrder ).join( \"\" ) === expando;\n\n// Support: Chrome 14-35+\n// Always assume duplicates if they aren't passed to the comparison function\nsupport.detectDuplicates = !!hasDuplicate;\n\n// Initialize against the default document\nsetDocument();\n\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n// Detached nodes confoundingly follow *each other*\nsupport.sortDetached = assert( function( el ) {\n\n\t// Should return 1, but returns 4 (following)\n\treturn el.compareDocumentPosition( document.createElement( \"fieldset\" ) ) & 1;\n} );\n\n// Support: IE<8\n// Prevent attribute/property \"interpolation\"\n// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !assert( function( el ) {\n\tel.innerHTML = \"<a href='#'></a>\";\n\treturn el.firstChild.getAttribute( \"href\" ) === \"#\";\n} ) ) {\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\tif ( !isXML ) {\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t}\n\t} );\n}\n\n// Support: IE<9\n// Use defaultValue in place of getAttribute(\"value\")\nif ( !support.attributes || !assert( function( el ) {\n\tel.innerHTML = \"<input/>\";\n\tel.firstChild.setAttribute( \"value\", \"\" );\n\treturn el.firstChild.getAttribute( \"value\" ) === \"\";\n} ) ) {\n\taddHandle( \"value\", function( elem, _name, isXML ) {\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\treturn elem.defaultValue;\n\t\t}\n\t} );\n}\n\n// Support: IE<9\n// Use getAttributeNode to fetch booleans when getAttribute lies\nif ( !assert( function( el ) {\n\treturn el.getAttribute( \"disabled\" ) == null;\n} ) ) {\n\taddHandle( booleans, function( elem, name, isXML ) {\n\t\tvar val;\n\t\tif ( !isXML ) {\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n\t\t\t\t( val = elem.getAttributeNode( name ) ) && val.specified ?\n\t\t\t\t\tval.value :\n\t\t\t\t\tnull;\n\t\t}\n\t} );\n}\n\nreturn Sizzle;\n\n} )( window );\n\n\n\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\n\n// Deprecated\njQuery.expr[ \":\" ] = jQuery.expr.pseudos;\njQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\njQuery.escapeSelector = Sizzle.escape;\n\n\n\n\nvar dir = function( elem, dir, until ) {\n\tvar matched = [],\n\t\ttruncate = until !== undefined;\n\n\twhile ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {\n\t\tif ( elem.nodeType === 1 ) {\n\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatched.push( elem );\n\t\t}\n\t}\n\treturn matched;\n};\n\n\nvar siblings = function( n, elem ) {\n\tvar matched = [];\n\n\tfor ( ; n; n = n.nextSibling ) {\n\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\tmatched.push( n );\n\t\t}\n\t}\n\n\treturn matched;\n};\n\n\nvar rneedsContext = jQuery.expr.match.needsContext;\n\n\n\nfunction nodeName( elem, name ) {\n\n\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\n}\nvar rsingleTag = ( /^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i );\n\n\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, not ) {\n\tif ( isFunction( qualifier ) ) {\n\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t} );\n\t}\n\n\t// Single element\n\tif ( qualifier.nodeType ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) !== not;\n\t\t} );\n\t}\n\n\t// Arraylike of elements (jQuery, arguments, Array)\n\tif ( typeof qualifier !== \"string\" ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( indexOf.call( qualifier, elem ) > -1 ) !== not;\n\t\t} );\n\t}\n\n\t// Filtered directly for both simple and complex selectors\n\treturn jQuery.filter( qualifier, elements, not );\n}\n\njQuery.filter = function( expr, elems, not ) {\n\tvar elem = elems[ 0 ];\n\n\tif ( not ) {\n\t\texpr = \":not(\" + expr + \")\";\n\t}\n\n\tif ( elems.length === 1 && elem.nodeType === 1 ) {\n\t\treturn jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];\n\t}\n\n\treturn jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\treturn elem.nodeType === 1;\n\t} ) );\n};\n\njQuery.fn.extend( {\n\tfind: function( selector ) {\n\t\tvar i, ret,\n\t\t\tlen = this.length,\n\t\t\tself = this;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\treturn this.pushStack( jQuery( selector ).filter( function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} ) );\n\t\t}\n\n\t\tret = this.pushStack( [] );\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t}\n\n\t\treturn len > 1 ? jQuery.uniqueSort( ret ) : ret;\n\t},\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], false ) );\n\t},\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], true ) );\n\t},\n\tis: function( selector ) {\n\t\treturn !!winnow(\n\t\t\tthis,\n\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\tjQuery( selector ) :\n\t\t\t\tselector || [],\n\t\t\tfalse\n\t\t).length;\n\t}\n} );\n\n\n// Initialize a jQuery object\n\n\n// A central reference to the root jQuery(document)\nvar rootjQuery,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (trac-9521)\n\t// Strict HTML recognition (trac-11290: must start with <)\n\t// Shortcut simple #id case for speed\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/,\n\n\tinit = jQuery.fn.init = function( selector, context, root ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Method init() accepts an alternate rootjQuery\n\t\t// so migrate can support jQuery.sub (gh-2101)\n\t\troot = root || rootjQuery;\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector[ 0 ] === \"<\" &&\n\t\t\t\tselector[ selector.length - 1 ] === \">\" &&\n\t\t\t\tselector.length >= 3 ) {\n\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && ( match[ 1 ] || !context ) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[ 1 ] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[ 0 ] : context;\n\n\t\t\t\t\t// Option to run scripts is true for back-compat\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[ 1 ],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[ 2 ] );\n\n\t\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t\t// Inject the element directly into the jQuery object\n\t\t\t\t\t\tthis[ 0 ] = elem;\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || root ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis[ 0 ] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( isFunction( selector ) ) {\n\t\t\treturn root.ready !== undefined ?\n\t\t\t\troot.ready( selector ) :\n\n\t\t\t\t// Execute immediately if ready is not present\n\t\t\t\tselector( jQuery );\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\ninit.prototype = jQuery.fn;\n\n// Initialize central reference\nrootjQuery = jQuery( document );\n\n\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\n\n\t// Methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.fn.extend( {\n\thas: function( target ) {\n\t\tvar targets = jQuery( target, this ),\n\t\t\tl = targets.length;\n\n\t\treturn this.filter( function() {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[ i ] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tmatched = [],\n\t\t\ttargets = typeof selectors !== \"string\" && jQuery( selectors );\n\n\t\t// Positional selectors never match, since there's no _selection_ context\n\t\tif ( !rneedsContext.test( selectors ) ) {\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tfor ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {\n\n\t\t\t\t\t// Always skip document fragments\n\t\t\t\t\tif ( cur.nodeType < 11 && ( targets ?\n\t\t\t\t\t\ttargets.index( cur ) > -1 :\n\n\t\t\t\t\t\t// Don't pass non-elements to Sizzle\n\t\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\t\tjQuery.find.matchesSelector( cur, selectors ) ) ) {\n\n\t\t\t\t\t\tmatched.push( cur );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );\n\t},\n\n\t// Determine the position of an element within the set\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// Index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn indexOf.call( this,\n\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[ 0 ] : elem\n\t\t);\n\t},\n\n\tadd: function( selector, context ) {\n\t\treturn this.pushStack(\n\t\t\tjQuery.uniqueSort(\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n\t\t\t)\n\t\t);\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t}\n} );\n\nfunction sibling( cur, dir ) {\n\twhile ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}\n\treturn cur;\n}\n\njQuery.each( {\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, _i, until ) {\n\t\treturn dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, _i, until ) {\n\t\treturn dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, _i, until ) {\n\t\treturn dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn siblings( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn siblings( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n\t\tif ( elem.contentDocument != null &&\n\n\t\t\t// Support: IE 11+\n\t\t\t// <object> elements with no `data` attribute has an object\n\t\t\t// `contentDocument` with a `null` prototype.\n\t\t\tgetProto( elem.contentDocument ) ) {\n\n\t\t\treturn elem.contentDocument;\n\t\t}\n\n\t\t// Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only\n\t\t// Treat the template element as a regular one in browsers that\n\t\t// don't support it.\n\t\tif ( nodeName( elem, \"template\" ) ) {\n\t\t\telem = elem.content || elem;\n\t\t}\n\n\t\treturn jQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar matched = jQuery.map( this, fn, until );\n\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tmatched = jQuery.filter( selector, matched );\n\t\t}\n\n\t\tif ( this.length > 1 ) {\n\n\t\t\t// Remove duplicates\n\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\tjQuery.uniqueSort( matched );\n\t\t\t}\n\n\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\tmatched.reverse();\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched );\n\t};\n} );\nvar rnothtmlwhite = ( /[^\\x20\\t\\r\\n\\f]+/g );\n\n\n\n// Convert String-formatted options into Object-formatted ones\nfunction createOptions( options ) {\n\tvar object = {};\n\tjQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t} );\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\tcreateOptions( options ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Flag to know if list is currently firing\n\t\tfiring,\n\n\t\t// Last fire value for non-forgettable lists\n\t\tmemory,\n\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\n\t\t// Flag to prevent firing\n\t\tlocked,\n\n\t\t// Actual callback list\n\t\tlist = [],\n\n\t\t// Queue of execution data for repeatable lists\n\t\tqueue = [],\n\n\t\t// Index of currently firing callback (modified by add/remove as needed)\n\t\tfiringIndex = -1,\n\n\t\t// Fire callbacks\n\t\tfire = function() {\n\n\t\t\t// Enforce single-firing\n\t\t\tlocked = locked || options.once;\n\n\t\t\t// Execute callbacks for all pending executions,\n\t\t\t// respecting firingIndex overrides and runtime changes\n\t\t\tfired = firing = true;\n\t\t\tfor ( ; queue.length; firingIndex = -1 ) {\n\t\t\t\tmemory = queue.shift();\n\t\t\t\twhile ( ++firingIndex < list.length ) {\n\n\t\t\t\t\t// Run callback and check for early termination\n\t\t\t\t\tif ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&\n\t\t\t\t\t\toptions.stopOnFalse ) {\n\n\t\t\t\t\t\t// Jump to end and forget the data so .add doesn't re-fire\n\t\t\t\t\t\tfiringIndex = list.length;\n\t\t\t\t\t\tmemory = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Forget the data if we're done with it\n\t\t\tif ( !options.memory ) {\n\t\t\t\tmemory = false;\n\t\t\t}\n\n\t\t\tfiring = false;\n\n\t\t\t// Clean up if we're done firing for good\n\t\t\tif ( locked ) {\n\n\t\t\t\t// Keep an empty list if we have data for future add calls\n\t\t\t\tif ( memory ) {\n\t\t\t\t\tlist = [];\n\n\t\t\t\t// Otherwise, this object is spent\n\t\t\t\t} else {\n\t\t\t\t\tlist = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Actual Callbacks object\n\t\tself = {\n\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\n\t\t\t\t\t// If we have memory from a past run, we should fire after adding\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfiringIndex = list.length - 1;\n\t\t\t\t\t\tqueue.push( memory );\n\t\t\t\t\t}\n\n\t\t\t\t\t( function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tif ( isFunction( arg ) ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && toType( arg ) !== \"string\" ) {\n\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} )( arguments );\n\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\tvar index;\n\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\tlist.splice( index, 1 );\n\n\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ?\n\t\t\t\t\tjQuery.inArray( fn, list ) > -1 :\n\t\t\t\t\tlist.length > 0;\n\t\t\t},\n\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Disable .fire and .add\n\t\t\t// Abort any current/pending executions\n\t\t\t// Clear all callbacks and values\n\t\t\tdisable: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tlist = memory = \"\";\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\n\t\t\t// Disable .fire\n\t\t\t// Also disable .add unless we have memory (since it would have no effect)\n\t\t\t// Abort any pending executions\n\t\t\tlock: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tif ( !memory && !firing ) {\n\t\t\t\t\tlist = memory = \"\";\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tlocked: function() {\n\t\t\t\treturn !!locked;\n\t\t\t},\n\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\tif ( !locked ) {\n\t\t\t\t\targs = args || [];\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\tqueue.push( args );\n\t\t\t\t\tif ( !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n\nfunction Identity( v ) {\n\treturn v;\n}\nfunction Thrower( ex ) {\n\tthrow ex;\n}\n\nfunction adoptValue( value, resolve, reject, noValue ) {\n\tvar method;\n\n\ttry {\n\n\t\t// Check for promise aspect first to privilege synchronous behavior\n\t\tif ( value && isFunction( ( method = value.promise ) ) ) {\n\t\t\tmethod.call( value ).done( resolve ).fail( reject );\n\n\t\t// Other thenables\n\t\t} else if ( value && isFunction( ( method = value.then ) ) ) {\n\t\t\tmethod.call( value, resolve, reject );\n\n\t\t// Other non-thenables\n\t\t} else {\n\n\t\t\t// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:\n\t\t\t// * false: [ value ].slice( 0 ) => resolve( value )\n\t\t\t// * true: [ value ].slice( 1 ) => resolve()\n\t\t\tresolve.apply( undefined, [ value ].slice( noValue ) );\n\t\t}\n\n\t// For Promises/A+, convert exceptions into rejections\n\t// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in\n\t// Deferred#then to conditionally suppress rejection.\n\t} catch ( value ) {\n\n\t\t// Support: Android 4.0 only\n\t\t// Strict mode functions invoked without .call/.apply get global-object context\n\t\treject.apply( undefined, [ value ] );\n\t}\n}\n\njQuery.extend( {\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\n\t\t\t\t// action, add listener, callbacks,\n\t\t\t\t// ... .then handlers, argument index, [final state]\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks( \"memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"memory\" ), 2 ],\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 0, \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 1, \"rejected\" ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t\"catch\": function( fn ) {\n\t\t\t\t\treturn promise.then( null, fn );\n\t\t\t\t},\n\n\t\t\t\t// Keep pipe for back-compat\n\t\t\t\tpipe: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( _i, tuple ) {\n\n\t\t\t\t\t\t\t// Map tuples (progress, done, fail) to arguments (done, fail, progress)\n\t\t\t\t\t\t\tvar fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];\n\n\t\t\t\t\t\t\t// deferred.progress(function() { bind to newDefer or newDefer.notify })\n\t\t\t\t\t\t\t// deferred.done(function() { bind to newDefer or newDefer.resolve })\n\t\t\t\t\t\t\t// deferred.fail(function() { bind to newDefer or newDefer.reject })\n\t\t\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify )\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\n\t\t\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\t\t\t\tthen: function( onFulfilled, onRejected, onProgress ) {\n\t\t\t\t\tvar maxDepth = 0;\n\t\t\t\t\tfunction resolve( depth, deferred, handler, special ) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tvar that = this,\n\t\t\t\t\t\t\t\targs = arguments,\n\t\t\t\t\t\t\t\tmightThrow = function() {\n\t\t\t\t\t\t\t\t\tvar returned, then;\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.3\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-59\n\t\t\t\t\t\t\t\t\t// Ignore double-resolution attempts\n\t\t\t\t\t\t\t\t\tif ( depth < maxDepth ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturned = handler.apply( that, args );\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.1\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-48\n\t\t\t\t\t\t\t\t\tif ( returned === deferred.promise() ) {\n\t\t\t\t\t\t\t\t\t\tthrow new TypeError( \"Thenable self-resolution\" );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ sections 2.3.3.1, 3.5\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-54\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-75\n\t\t\t\t\t\t\t\t\t// Retrieve `then` only once\n\t\t\t\t\t\t\t\t\tthen = returned &&\n\n\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.4\n\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-64\n\t\t\t\t\t\t\t\t\t\t// Only check objects and functions for thenability\n\t\t\t\t\t\t\t\t\t\t( typeof returned === \"object\" ||\n\t\t\t\t\t\t\t\t\t\t\ttypeof returned === \"function\" ) &&\n\t\t\t\t\t\t\t\t\t\treturned.then;\n\n\t\t\t\t\t\t\t\t\t// Handle a returned thenable\n\t\t\t\t\t\t\t\t\tif ( isFunction( then ) ) {\n\n\t\t\t\t\t\t\t\t\t\t// Special processors (notify) just wait for resolution\n\t\t\t\t\t\t\t\t\t\tif ( special ) {\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special )\n\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t// Normal processors (resolve) also hook into progress\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t// ...and disregard older resolution values\n\t\t\t\t\t\t\t\t\t\t\tmaxDepth++;\n\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeferred.notifyWith )\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Handle all other returned values\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\tif ( handler !== Identity ) {\n\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\targs = [ returned ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Process the value(s)\n\t\t\t\t\t\t\t\t\t\t// Default process is resolve\n\t\t\t\t\t\t\t\t\t\t( special || deferred.resolveWith )( that, args );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t// Only normal processors (resolve) catch and reject exceptions\n\t\t\t\t\t\t\t\tprocess = special ?\n\t\t\t\t\t\t\t\t\tmightThrow :\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tmightThrow();\n\t\t\t\t\t\t\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( jQuery.Deferred.exceptionHook ) {\n\t\t\t\t\t\t\t\t\t\t\t\tjQuery.Deferred.exceptionHook( e,\n\t\t\t\t\t\t\t\t\t\t\t\t\tprocess.stackTrace );\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.4.1\n\t\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-61\n\t\t\t\t\t\t\t\t\t\t\t// Ignore post-resolution exceptions\n\t\t\t\t\t\t\t\t\t\t\tif ( depth + 1 >= maxDepth ) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\t\t\tif ( handler !== Thrower ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t\targs = [ e ];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tdeferred.rejectWith( that, args );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.1\n\t\t\t\t\t\t\t// https://promisesaplus.com/#point-57\n\t\t\t\t\t\t\t// Re-resolve promises immediately to dodge false rejection from\n\t\t\t\t\t\t\t// subsequent errors\n\t\t\t\t\t\t\tif ( depth ) {\n\t\t\t\t\t\t\t\tprocess();\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Call an optional hook to record the stack, in case of exception\n\t\t\t\t\t\t\t\t// since it's otherwise lost when execution goes async\n\t\t\t\t\t\t\t\tif ( jQuery.Deferred.getStackHook ) {\n\t\t\t\t\t\t\t\t\tprocess.stackTrace = jQuery.Deferred.getStackHook();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twindow.setTimeout( process );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\n\t\t\t\t\t\t// progress_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 0 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onProgress ) ?\n\t\t\t\t\t\t\t\t\tonProgress :\n\t\t\t\t\t\t\t\t\tIdentity,\n\t\t\t\t\t\t\t\tnewDefer.notifyWith\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// fulfilled_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 1 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onFulfilled ) ?\n\t\t\t\t\t\t\t\t\tonFulfilled :\n\t\t\t\t\t\t\t\t\tIdentity\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// rejected_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 2 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onRejected ) ?\n\t\t\t\t\t\t\t\t\tonRejected :\n\t\t\t\t\t\t\t\t\tThrower\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 5 ];\n\n\t\t\t// promise.progress = list.add\n\t\t\t// promise.done = list.add\n\t\t\t// promise.fail = list.add\n\t\t\tpromise[ tuple[ 1 ] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(\n\t\t\t\t\tfunction() {\n\n\t\t\t\t\t\t// state = \"resolved\" (i.e., fulfilled)\n\t\t\t\t\t\t// state = \"rejected\"\n\t\t\t\t\t\tstate = stateString;\n\t\t\t\t\t},\n\n\t\t\t\t\t// rejected_callbacks.disable\n\t\t\t\t\t// fulfilled_callbacks.disable\n\t\t\t\t\ttuples[ 3 - i ][ 2 ].disable,\n\n\t\t\t\t\t// rejected_handlers.disable\n\t\t\t\t\t// fulfilled_handlers.disable\n\t\t\t\t\ttuples[ 3 - i ][ 3 ].disable,\n\n\t\t\t\t\t// progress_callbacks.lock\n\t\t\t\t\ttuples[ 0 ][ 2 ].lock,\n\n\t\t\t\t\t// progress_handlers.lock\n\t\t\t\t\ttuples[ 0 ][ 3 ].lock\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// progress_handlers.fire\n\t\t\t// fulfilled_handlers.fire\n\t\t\t// rejected_handlers.fire\n\t\t\tlist.add( tuple[ 3 ].fire );\n\n\t\t\t// deferred.notify = function() { deferred.notifyWith(...) }\n\t\t\t// deferred.resolve = function() { deferred.resolveWith(...) }\n\t\t\t// deferred.reject = function() { deferred.rejectWith(...) }\n\t\t\tdeferred[ tuple[ 0 ] ] = function() {\n\t\t\t\tdeferred[ tuple[ 0 ] + \"With\" ]( this === deferred ? undefined : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\n\t\t\t// deferred.notifyWith = list.fireWith\n\t\t\t// deferred.resolveWith = list.fireWith\n\t\t\t// deferred.rejectWith = list.fireWith\n\t\t\tdeferred[ tuple[ 0 ] + \"With\" ] = list.fireWith;\n\t\t} );\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( singleValue ) {\n\t\tvar\n\n\t\t\t// count of uncompleted subordinates\n\t\t\tremaining = arguments.length,\n\n\t\t\t// count of unprocessed arguments\n\t\t\ti = remaining,\n\n\t\t\t// subordinate fulfillment data\n\t\t\tresolveContexts = Array( i ),\n\t\t\tresolveValues = slice.call( arguments ),\n\n\t\t\t// the primary Deferred\n\t\t\tprimary = jQuery.Deferred(),\n\n\t\t\t// subordinate callback factory\n\t\t\tupdateFunc = function( i ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tresolveContexts[ i ] = this;\n\t\t\t\t\tresolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n\t\t\t\t\tif ( !( --remaining ) ) {\n\t\t\t\t\t\tprimary.resolveWith( resolveContexts, resolveValues );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\n\t\t// Single- and empty arguments are adopted like Promise.resolve\n\t\tif ( remaining <= 1 ) {\n\t\t\tadoptValue( singleValue, primary.done( updateFunc( i ) ).resolve, primary.reject,\n\t\t\t\t!remaining );\n\n\t\t\t// Use .then() to unwrap secondary thenables (cf. gh-3000)\n\t\t\tif ( primary.state() === \"pending\" ||\n\t\t\t\tisFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {\n\n\t\t\t\treturn primary.then();\n\t\t\t}\n\t\t}\n\n\t\t// Multiple arguments are aggregated like Promise.all array elements\n\t\twhile ( i-- ) {\n\t\t\tadoptValue( resolveValues[ i ], updateFunc( i ), primary.reject );\n\t\t}\n\n\t\treturn primary.promise();\n\t}\n} );\n\n\n// These usually indicate a programmer mistake during development,\n// warn about them ASAP rather than swallowing them by default.\nvar rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;\n\njQuery.Deferred.exceptionHook = function( error, stack ) {\n\n\t// Support: IE 8 - 9 only\n\t// Console exists when dev tools are open, which can happen at any time\n\tif ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {\n\t\twindow.console.warn( \"jQuery.Deferred exception: \" + error.message, error.stack, stack );\n\t}\n};\n\n\n\n\njQuery.readyException = function( error ) {\n\twindow.setTimeout( function() {\n\t\tthrow error;\n\t} );\n};\n\n\n\n\n// The deferred used on DOM ready\nvar readyList = jQuery.Deferred();\n\njQuery.fn.ready = function( fn ) {\n\n\treadyList\n\t\t.then( fn )\n\n\t\t// Wrap jQuery.readyException in a function so that the lookup\n\t\t// happens at the time of error handling instead of callback\n\t\t// registration.\n\t\t.catch( function( error ) {\n\t\t\tjQuery.readyException( error );\n\t\t} );\n\n\treturn this;\n};\n\njQuery.extend( {\n\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See trac-6781\n\treadyWait: 1,\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\t}\n} );\n\njQuery.ready.then = readyList.then;\n\n// The ready event handler and self cleanup method\nfunction completed() {\n\tdocument.removeEventListener( \"DOMContentLoaded\", completed );\n\twindow.removeEventListener( \"load\", completed );\n\tjQuery.ready();\n}\n\n// Catch cases where $(document).ready() is called\n// after the browser event has already occurred.\n// Support: IE <=9 - 10 only\n// Older IE sometimes signals \"interactive\" too soon\nif ( document.readyState === \"complete\" ||\n\t( document.readyState !== \"loading\" && !document.documentElement.doScroll ) ) {\n\n\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\twindow.setTimeout( jQuery.ready );\n\n} else {\n\n\t// Use the handy event callback\n\tdocument.addEventListener( \"DOMContentLoaded\", completed );\n\n\t// A fallback to window.onload, that will always work\n\twindow.addEventListener( \"load\", completed );\n}\n\n\n\n\n// Multifunctional method to get and set values of a collection\n// The value/s can optionally be executed if it's a function\nvar access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\tvar i = 0,\n\t\tlen = elems.length,\n\t\tbulk = key == null;\n\n\t// Sets many values\n\tif ( toType( key ) === \"object\" ) {\n\t\tchainable = true;\n\t\tfor ( i in key ) {\n\t\t\taccess( elems, fn, i, key[ i ], true, emptyGet, raw );\n\t\t}\n\n\t// Sets one value\n\t} else if ( value !== undefined ) {\n\t\tchainable = true;\n\n\t\tif ( !isFunction( value ) ) {\n\t\t\traw = true;\n\t\t}\n\n\t\tif ( bulk ) {\n\n\t\t\t// Bulk operations run against the entire set\n\t\t\tif ( raw ) {\n\t\t\t\tfn.call( elems, value );\n\t\t\t\tfn = null;\n\n\t\t\t// ...except when executing function values\n\t\t\t} else {\n\t\t\t\tbulk = fn;\n\t\t\t\tfn = function( elem, _key, value ) {\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( fn ) {\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tfn(\n\t\t\t\t\telems[ i ], key, raw ?\n\t\t\t\t\t\tvalue :\n\t\t\t\t\t\tvalue.call( elems[ i ], i, fn( elems[ i ], key ) )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( chainable ) {\n\t\treturn elems;\n\t}\n\n\t// Gets\n\tif ( bulk ) {\n\t\treturn fn.call( elems );\n\t}\n\n\treturn len ? fn( elems[ 0 ], key ) : emptyGet;\n};\n\n\n// Matches dashed string for camelizing\nvar rmsPrefix = /^-ms-/,\n\trdashAlpha = /-([a-z])/g;\n\n// Used by camelCase as callback to replace()\nfunction fcamelCase( _all, letter ) {\n\treturn letter.toUpperCase();\n}\n\n// Convert dashed to camelCase; used by the css and data modules\n// Support: IE <=9 - 11, Edge 12 - 15\n// Microsoft forgot to hump their vendor prefix (trac-9572)\nfunction camelCase( string ) {\n\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n}\nvar acceptData = function( owner ) {\n\n\t// Accepts only:\n\t//  - Node\n\t//    - Node.ELEMENT_NODE\n\t//    - Node.DOCUMENT_NODE\n\t//  - Object\n\t//    - Any\n\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n};\n\n\n\n\nfunction Data() {\n\tthis.expando = jQuery.expando + Data.uid++;\n}\n\nData.uid = 1;\n\nData.prototype = {\n\n\tcache: function( owner ) {\n\n\t\t// Check if the owner object already has a cache\n\t\tvar value = owner[ this.expando ];\n\n\t\t// If not, create one\n\t\tif ( !value ) {\n\t\t\tvalue = {};\n\n\t\t\t// We can accept data for non-element nodes in modern browsers,\n\t\t\t// but we should not, see trac-8335.\n\t\t\t// Always return an empty object.\n\t\t\tif ( acceptData( owner ) ) {\n\n\t\t\t\t// If it is a node unlikely to be stringify-ed or looped over\n\t\t\t\t// use plain assignment\n\t\t\t\tif ( owner.nodeType ) {\n\t\t\t\t\towner[ this.expando ] = value;\n\n\t\t\t\t// Otherwise secure it in a non-enumerable property\n\t\t\t\t// configurable must be true to allow the property to be\n\t\t\t\t// deleted when data is removed\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty( owner, this.expando, {\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t},\n\tset: function( owner, data, value ) {\n\t\tvar prop,\n\t\t\tcache = this.cache( owner );\n\n\t\t// Handle: [ owner, key, value ] args\n\t\t// Always use camelCase key (gh-2257)\n\t\tif ( typeof data === \"string\" ) {\n\t\t\tcache[ camelCase( data ) ] = value;\n\n\t\t// Handle: [ owner, { properties } ] args\n\t\t} else {\n\n\t\t\t// Copy the properties one-by-one to the cache object\n\t\t\tfor ( prop in data ) {\n\t\t\t\tcache[ camelCase( prop ) ] = data[ prop ];\n\t\t\t}\n\t\t}\n\t\treturn cache;\n\t},\n\tget: function( owner, key ) {\n\t\treturn key === undefined ?\n\t\t\tthis.cache( owner ) :\n\n\t\t\t// Always use camelCase key (gh-2257)\n\t\t\towner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];\n\t},\n\taccess: function( owner, key, value ) {\n\n\t\t// In cases where either:\n\t\t//\n\t\t//   1. No key was specified\n\t\t//   2. A string key was specified, but no value provided\n\t\t//\n\t\t// Take the \"read\" path and allow the get method to determine\n\t\t// which value to return, respectively either:\n\t\t//\n\t\t//   1. The entire cache object\n\t\t//   2. The data stored at the key\n\t\t//\n\t\tif ( key === undefined ||\n\t\t\t\t( ( key && typeof key === \"string\" ) && value === undefined ) ) {\n\n\t\t\treturn this.get( owner, key );\n\t\t}\n\n\t\t// When the key is not a string, or both a key and value\n\t\t// are specified, set or extend (existing objects) with either:\n\t\t//\n\t\t//   1. An object of properties\n\t\t//   2. A key and value\n\t\t//\n\t\tthis.set( owner, key, value );\n\n\t\t// Since the \"set\" path can have two possible entry points\n\t\t// return the expected data based on which path was taken[*]\n\t\treturn value !== undefined ? value : key;\n\t},\n\tremove: function( owner, key ) {\n\t\tvar i,\n\t\t\tcache = owner[ this.expando ];\n\n\t\tif ( cache === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key !== undefined ) {\n\n\t\t\t// Support array or space separated string of keys\n\t\t\tif ( Array.isArray( key ) ) {\n\n\t\t\t\t// If key is an array of keys...\n\t\t\t\t// We always set camelCase keys, so remove that.\n\t\t\t\tkey = key.map( camelCase );\n\t\t\t} else {\n\t\t\t\tkey = camelCase( key );\n\n\t\t\t\t// If a key with the spaces exists, use it.\n\t\t\t\t// Otherwise, create an array by matching non-whitespace\n\t\t\t\tkey = key in cache ?\n\t\t\t\t\t[ key ] :\n\t\t\t\t\t( key.match( rnothtmlwhite ) || [] );\n\t\t\t}\n\n\t\t\ti = key.length;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tdelete cache[ key[ i ] ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if there's no more data\n\t\tif ( key === undefined || jQuery.isEmptyObject( cache ) ) {\n\n\t\t\t// Support: Chrome <=35 - 45\n\t\t\t// Webkit & Blink performance suffers when deleting properties\n\t\t\t// from DOM nodes, so set to undefined instead\n\t\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)\n\t\t\tif ( owner.nodeType ) {\n\t\t\t\towner[ this.expando ] = undefined;\n\t\t\t} else {\n\t\t\t\tdelete owner[ this.expando ];\n\t\t\t}\n\t\t}\n\t},\n\thasData: function( owner ) {\n\t\tvar cache = owner[ this.expando ];\n\t\treturn cache !== undefined && !jQuery.isEmptyObject( cache );\n\t}\n};\nvar dataPriv = new Data();\n\nvar dataUser = new Data();\n\n\n\n//\tImplementation Summary\n//\n//\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n//\t2. Improve the module's maintainability by reducing the storage\n//\t\tpaths to a single mechanism.\n//\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n//\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n//\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n//\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\n\trmultiDash = /[A-Z]/g;\n\nfunction getData( data ) {\n\tif ( data === \"true\" ) {\n\t\treturn true;\n\t}\n\n\tif ( data === \"false\" ) {\n\t\treturn false;\n\t}\n\n\tif ( data === \"null\" ) {\n\t\treturn null;\n\t}\n\n\t// Only convert to a number if it doesn't change the string\n\tif ( data === +data + \"\" ) {\n\t\treturn +data;\n\t}\n\n\tif ( rbrace.test( data ) ) {\n\t\treturn JSON.parse( data );\n\t}\n\n\treturn data;\n}\n\nfunction dataAttr( elem, key, data ) {\n\tvar name;\n\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\t\tname = \"data-\" + key.replace( rmultiDash, \"-$&\" ).toLowerCase();\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = getData( data );\n\t\t\t} catch ( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tdataUser.set( elem, key, data );\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\treturn data;\n}\n\njQuery.extend( {\n\thasData: function( elem ) {\n\t\treturn dataUser.hasData( elem ) || dataPriv.hasData( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn dataUser.access( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\tdataUser.remove( elem, name );\n\t},\n\n\t// TODO: Now that all calls to _data and _removeData have been replaced\n\t// with direct calls to dataPriv methods, these can be deprecated.\n\t_data: function( elem, name, data ) {\n\t\treturn dataPriv.access( elem, name, data );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\tdataPriv.remove( elem, name );\n\t}\n} );\n\njQuery.fn.extend( {\n\tdata: function( key, value ) {\n\t\tvar i, name, data,\n\t\t\telem = this[ 0 ],\n\t\t\tattrs = elem && elem.attributes;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = dataUser.get( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !dataPriv.get( elem, \"hasDataAttrs\" ) ) {\n\t\t\t\t\ti = attrs.length;\n\t\t\t\t\twhile ( i-- ) {\n\n\t\t\t\t\t\t// Support: IE 11 only\n\t\t\t\t\t\t// The attrs elements can be null (trac-14894)\n\t\t\t\t\t\tif ( attrs[ i ] ) {\n\t\t\t\t\t\t\tname = attrs[ i ].name;\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\t\tname = camelCase( name.slice( 5 ) );\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdataPriv.set( elem, \"hasDataAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tdataUser.set( this, key );\n\t\t\t} );\n\t\t}\n\n\t\treturn access( this, function( value ) {\n\t\t\tvar data;\n\n\t\t\t// The calling jQuery object (element matches) is not empty\n\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\n\t\t\t// `value` parameter was not undefined. An empty jQuery object\n\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\n\t\t\t// throw an exception if an attempt to read a data cache is made.\n\t\t\tif ( elem && value === undefined ) {\n\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// The key will always be camelCased in Data\n\t\t\t\tdata = dataUser.get( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to \"discover\" the data in\n\t\t\t\t// HTML5 custom data-* attrs\n\t\t\t\tdata = dataAttr( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// We tried really hard, but the data doesn't exist.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set the data...\n\t\t\tthis.each( function() {\n\n\t\t\t\t// We always store the camelCased key\n\t\t\t\tdataUser.set( this, key, value );\n\t\t\t} );\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each( function() {\n\t\t\tdataUser.remove( this, key );\n\t\t} );\n\t}\n} );\n\n\njQuery.extend( {\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = dataPriv.get( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || Array.isArray( data ) ) {\n\t\t\t\t\tqueue = dataPriv.access( elem, type, jQuery.makeArray( data ) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// Clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// Not public - generate a queueHooks object, or return the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn dataPriv.get( elem, key ) || dataPriv.access( elem, key, {\n\t\t\tempty: jQuery.Callbacks( \"once memory\" ).add( function() {\n\t\t\t\tdataPriv.remove( elem, [ type + \"queue\", key ] );\n\t\t\t} )\n\t\t} );\n\t}\n} );\n\njQuery.fn.extend( {\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[ 0 ], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each( function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// Ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[ 0 ] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t} );\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t} );\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile ( i-- ) {\n\t\t\ttmp = dataPriv.get( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n} );\nvar pnum = ( /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/ ).source;\n\nvar rcssNum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" );\n\n\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n\nvar documentElement = document.documentElement;\n\n\n\n\tvar isAttached = function( elem ) {\n\t\t\treturn jQuery.contains( elem.ownerDocument, elem );\n\t\t},\n\t\tcomposed = { composed: true };\n\n\t// Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only\n\t// Check attachment across shadow DOM boundaries when possible (gh-3504)\n\t// Support: iOS 10.0-10.2 only\n\t// Early iOS 10 versions support `attachShadow` but not `getRootNode`,\n\t// leading to errors. We need to check for `getRootNode`.\n\tif ( documentElement.getRootNode ) {\n\t\tisAttached = function( elem ) {\n\t\t\treturn jQuery.contains( elem.ownerDocument, elem ) ||\n\t\t\t\telem.getRootNode( composed ) === elem.ownerDocument;\n\t\t};\n\t}\nvar isHiddenWithinTree = function( elem, el ) {\n\n\t\t// isHiddenWithinTree might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\n\t\t// Inline style trumps all\n\t\treturn elem.style.display === \"none\" ||\n\t\t\telem.style.display === \"\" &&\n\n\t\t\t// Otherwise, check computed style\n\t\t\t// Support: Firefox <=43 - 45\n\t\t\t// Disconnected elements can have computed display: none, so first confirm that elem is\n\t\t\t// in the document.\n\t\t\tisAttached( elem ) &&\n\n\t\t\tjQuery.css( elem, \"display\" ) === \"none\";\n\t};\n\n\n\nfunction adjustCSS( elem, prop, valueParts, tween ) {\n\tvar adjusted, scale,\n\t\tmaxIterations = 20,\n\t\tcurrentValue = tween ?\n\t\t\tfunction() {\n\t\t\t\treturn tween.cur();\n\t\t\t} :\n\t\t\tfunction() {\n\t\t\t\treturn jQuery.css( elem, prop, \"\" );\n\t\t\t},\n\t\tinitial = currentValue(),\n\t\tunit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t// Starting value computation is required for potential unit mismatches\n\t\tinitialInUnit = elem.nodeType &&\n\t\t\t( jQuery.cssNumber[ prop ] || unit !== \"px\" && +initial ) &&\n\t\t\trcssNum.exec( jQuery.css( elem, prop ) );\n\n\tif ( initialInUnit && initialInUnit[ 3 ] !== unit ) {\n\n\t\t// Support: Firefox <=54\n\t\t// Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)\n\t\tinitial = initial / 2;\n\n\t\t// Trust units reported by jQuery.css\n\t\tunit = unit || initialInUnit[ 3 ];\n\n\t\t// Iteratively approximate from a nonzero starting point\n\t\tinitialInUnit = +initial || 1;\n\n\t\twhile ( maxIterations-- ) {\n\n\t\t\t// Evaluate and update our best guess (doubling guesses that zero out).\n\t\t\t// Finish if the scale equals or crosses 1 (making the old*new product non-positive).\n\t\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\t\t\tif ( ( 1 - scale ) * ( 1 - ( scale = currentValue() / initial || 0.5 ) ) <= 0 ) {\n\t\t\t\tmaxIterations = 0;\n\t\t\t}\n\t\t\tinitialInUnit = initialInUnit / scale;\n\n\t\t}\n\n\t\tinitialInUnit = initialInUnit * 2;\n\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\n\t\t// Make sure we update the tween properties later on\n\t\tvalueParts = valueParts || [];\n\t}\n\n\tif ( valueParts ) {\n\t\tinitialInUnit = +initialInUnit || +initial || 0;\n\n\t\t// Apply relative offset (+=/-=) if specified\n\t\tadjusted = valueParts[ 1 ] ?\n\t\t\tinitialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :\n\t\t\t+valueParts[ 2 ];\n\t\tif ( tween ) {\n\t\t\ttween.unit = unit;\n\t\t\ttween.start = initialInUnit;\n\t\t\ttween.end = adjusted;\n\t\t}\n\t}\n\treturn adjusted;\n}\n\n\nvar defaultDisplayMap = {};\n\nfunction getDefaultDisplay( elem ) {\n\tvar temp,\n\t\tdoc = elem.ownerDocument,\n\t\tnodeName = elem.nodeName,\n\t\tdisplay = defaultDisplayMap[ nodeName ];\n\n\tif ( display ) {\n\t\treturn display;\n\t}\n\n\ttemp = doc.body.appendChild( doc.createElement( nodeName ) );\n\tdisplay = jQuery.css( temp, \"display\" );\n\n\ttemp.parentNode.removeChild( temp );\n\n\tif ( display === \"none\" ) {\n\t\tdisplay = \"block\";\n\t}\n\tdefaultDisplayMap[ nodeName ] = display;\n\n\treturn display;\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\t// Determine new display value for elements that need to change\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\n\t\t\t// Since we force visibility upon cascade-hidden elements, an immediate (and slow)\n\t\t\t// check is required in this first loop unless we have a nonempty display value (either\n\t\t\t// inline or about-to-be-restored)\n\t\t\tif ( display === \"none\" ) {\n\t\t\t\tvalues[ index ] = dataPriv.get( elem, \"display\" ) || null;\n\t\t\t\tif ( !values[ index ] ) {\n\t\t\t\t\telem.style.display = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( elem.style.display === \"\" && isHiddenWithinTree( elem ) ) {\n\t\t\t\tvalues[ index ] = getDefaultDisplay( elem );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( display !== \"none\" ) {\n\t\t\t\tvalues[ index ] = \"none\";\n\n\t\t\t\t// Remember what we're overwriting\n\t\t\t\tdataPriv.set( elem, \"display\", display );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of the elements in a second loop to avoid constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\tif ( values[ index ] != null ) {\n\t\t\telements[ index ].style.display = values[ index ];\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.fn.extend( {\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tif ( typeof state === \"boolean\" ) {\n\t\t\treturn state ? this.show() : this.hide();\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tif ( isHiddenWithinTree( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t} );\n\t}\n} );\nvar rcheckableType = ( /^(?:checkbox|radio)$/i );\n\nvar rtagName = ( /<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i );\n\nvar rscriptType = ( /^$|^module$|\\/(?:java|ecma)script/i );\n\n\n\n( function() {\n\tvar fragment = document.createDocumentFragment(),\n\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\n\t\tinput = document.createElement( \"input\" );\n\n\t// Support: Android 4.0 - 4.3 only\n\t// Check state lost if the name is set (trac-11217)\n\t// Support: Windows Web Apps (WWA)\n\t// `name` and `type` must use .setAttribute for WWA (trac-14901)\n\tinput.setAttribute( \"type\", \"radio\" );\n\tinput.setAttribute( \"checked\", \"checked\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tdiv.appendChild( input );\n\n\t// Support: Android <=4.1 only\n\t// Older WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE <=11 only\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n\n\t// Support: IE <=9 only\n\t// IE <=9 replaces <option> tags with their contents when inserted outside of\n\t// the select element.\n\tdiv.innerHTML = \"<option></option>\";\n\tsupport.option = !!div.lastChild;\n} )();\n\n\n// We have to close these tags to support XHTML (trac-13200)\nvar wrapMap = {\n\n\t// XHTML parsers do not magically insert elements in the\n\t// same way that tag soup parsers do. So we cannot shorten\n\t// this by omitting <tbody> or other required elements.\n\tthead: [ 1, \"<table>\", \"</table>\" ],\n\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\n\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t_default: [ 0, \"\", \"\" ]\n};\n\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\n// Support: IE <=9 only\nif ( !support.option ) {\n\twrapMap.optgroup = wrapMap.option = [ 1, \"<select multiple='multiple'>\", \"</select>\" ];\n}\n\n\nfunction getAll( context, tag ) {\n\n\t// Support: IE <=9 - 11 only\n\t// Use typeof to avoid zero-argument method invocation on host objects (trac-15151)\n\tvar ret;\n\n\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\tret = context.getElementsByTagName( tag || \"*\" );\n\n\t} else if ( typeof context.querySelectorAll !== \"undefined\" ) {\n\t\tret = context.querySelectorAll( tag || \"*\" );\n\n\t} else {\n\t\tret = [];\n\t}\n\n\tif ( tag === undefined || tag && nodeName( context, tag ) ) {\n\t\treturn jQuery.merge( [ context ], ret );\n\t}\n\n\treturn ret;\n}\n\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar i = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\tdataPriv.set(\n\t\t\telems[ i ],\n\t\t\t\"globalEval\",\n\t\t\t!refElements || dataPriv.get( refElements[ i ], \"globalEval\" )\n\t\t);\n\t}\n}\n\n\nvar rhtml = /<|&#?\\w+;/;\n\nfunction buildFragment( elems, context, scripts, selection, ignored ) {\n\tvar elem, tmp, tag, wrap, attached, j,\n\t\tfragment = context.createDocumentFragment(),\n\t\tnodes = [],\n\t\ti = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\telem = elems[ i ];\n\n\t\tif ( elem || elem === 0 ) {\n\n\t\t\t// Add nodes directly\n\t\t\tif ( toType( elem ) === \"object\" ) {\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t// Convert non-html into a text node\n\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t// Convert html into DOM nodes\n\t\t\t} else {\n\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement( \"div\" ) );\n\n\t\t\t\t// Deserialize a standard representation\n\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\t\t\t\ttmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];\n\n\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\tj = wrap[ 0 ];\n\t\t\t\twhile ( j-- ) {\n\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t}\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t// Remember the top-level container\n\t\t\t\ttmp = fragment.firstChild;\n\n\t\t\t\t// Ensure the created nodes are orphaned (trac-12392)\n\t\t\t\ttmp.textContent = \"\";\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove wrapper from fragment\n\tfragment.textContent = \"\";\n\n\ti = 0;\n\twhile ( ( elem = nodes[ i++ ] ) ) {\n\n\t\t// Skip elements already in the context collection (trac-4087)\n\t\tif ( selection && jQuery.inArray( elem, selection ) > -1 ) {\n\t\t\tif ( ignored ) {\n\t\t\t\tignored.push( elem );\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tattached = isAttached( elem );\n\n\t\t// Append to fragment\n\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n\n\t\t// Preserve script evaluation history\n\t\tif ( attached ) {\n\t\t\tsetGlobalEval( tmp );\n\t\t}\n\n\t\t// Capture executables\n\t\tif ( scripts ) {\n\t\t\tj = 0;\n\t\t\twhile ( ( elem = tmp[ j++ ] ) ) {\n\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\tscripts.push( elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn fragment;\n}\n\n\nvar rtypenamespace = /^([^.]*)(?:\\.(.+)|)/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\n// Support: IE <=9 - 11+\n// focus() and blur() are asynchronous, except when they are no-op.\n// So expect focus to be synchronous when the element is already active,\n// and blur to be synchronous when the element is not already active.\n// (focus and blur are always synchronous in other supported browsers,\n// this just defines when we can count on it).\nfunction expectSync( elem, type ) {\n\treturn ( elem === safeActiveElement() ) === ( type === \"focus\" );\n}\n\n// Support: IE <=9 only\n// Accessing document.activeElement can throw unexpectedly\n// https://bugs.jquery.com/ticket/13393\nfunction safeActiveElement() {\n\ttry {\n\t\treturn document.activeElement;\n\t} catch ( err ) { }\n}\n\nfunction on( elem, types, selector, data, fn, one ) {\n\tvar origFn, type;\n\n\t// Types can be a map of types/handlers\n\tif ( typeof types === \"object\" ) {\n\n\t\t// ( types-Object, selector, data )\n\t\tif ( typeof selector !== \"string\" ) {\n\n\t\t\t// ( types-Object, data )\n\t\t\tdata = data || selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tfor ( type in types ) {\n\t\t\ton( elem, type, selector, data, types[ type ], one );\n\t\t}\n\t\treturn elem;\n\t}\n\n\tif ( data == null && fn == null ) {\n\n\t\t// ( types, fn )\n\t\tfn = selector;\n\t\tdata = selector = undefined;\n\t} else if ( fn == null ) {\n\t\tif ( typeof selector === \"string\" ) {\n\n\t\t\t// ( types, selector, fn )\n\t\t\tfn = data;\n\t\t\tdata = undefined;\n\t\t} else {\n\n\t\t\t// ( types, data, fn )\n\t\t\tfn = data;\n\t\t\tdata = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t}\n\tif ( fn === false ) {\n\t\tfn = returnFalse;\n\t} else if ( !fn ) {\n\t\treturn elem;\n\t}\n\n\tif ( one === 1 ) {\n\t\torigFn = fn;\n\t\tfn = function( event ) {\n\n\t\t\t// Can use an empty set, since event contains the info\n\t\t\tjQuery().off( event );\n\t\t\treturn origFn.apply( this, arguments );\n\t\t};\n\n\t\t// Use same guid so caller can remove using origFn\n\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t}\n\treturn elem.each( function() {\n\t\tjQuery.event.add( this, types, fn, data, selector );\n\t} );\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\n\t\tvar handleObjIn, eventHandle, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.get( elem );\n\n\t\t// Only attach events to objects that accept data\n\t\tif ( !acceptData( elem ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Ensure that invalid selectors throw exceptions at attach time\n\t\t// Evaluate against documentElement in case elem is a non-element node (e.g., document)\n\t\tif ( selector ) {\n\t\t\tjQuery.find.matchesSelector( documentElement, selector );\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !( events = elemData.events ) ) {\n\t\t\tevents = elemData.events = Object.create( null );\n\t\t}\n\t\tif ( !( eventHandle = elemData.handle ) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== \"undefined\" && jQuery.event.triggered !== e.type ?\n\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n\t\t\t};\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\tif ( !type ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend( {\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join( \".\" )\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !( handlers = events[ type ] ) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener if the special events handler returns false\n\t\t\t\tif ( !special.setup ||\n\t\t\t\t\tspecial.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\n\t\tvar j, origCount, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.hasData( elem ) && dataPriv.get( elem );\n\n\t\tif ( !elemData || !( events = elemData.events ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[ 2 ] &&\n\t\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector ||\n\t\t\t\t\t\tselector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown ||\n\t\t\t\t\tspecial.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove data and the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdataPriv.remove( elem, \"handle events\" );\n\t\t}\n\t},\n\n\tdispatch: function( nativeEvent ) {\n\n\t\tvar i, j, ret, matched, handleObj, handlerQueue,\n\t\t\targs = new Array( arguments.length ),\n\n\t\t\t// Make a writable jQuery.Event from the native event object\n\t\t\tevent = jQuery.event.fix( nativeEvent ),\n\n\t\t\thandlers = (\n\t\t\t\tdataPriv.get( this, \"events\" ) || Object.create( null )\n\t\t\t)[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[ 0 ] = event;\n\n\t\tfor ( i = 1; i < arguments.length; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( ( handleObj = matched.handlers[ j++ ] ) &&\n\t\t\t\t!event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// If the event is namespaced, then each handler is only invoked if it is\n\t\t\t\t// specially universal or its namespaces are a superset of the event's.\n\t\t\t\tif ( !event.rnamespace || handleObj.namespace === false ||\n\t\t\t\t\tevent.rnamespace.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||\n\t\t\t\t\t\thandleObj.handler ).apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( ( event.result = ret ) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar i, handleObj, sel, matchedHandlers, matchedSelectors,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Find delegate handlers\n\t\tif ( delegateCount &&\n\n\t\t\t// Support: IE <=9\n\t\t\t// Black-hole SVG <use> instance trees (trac-13180)\n\t\t\tcur.nodeType &&\n\n\t\t\t// Support: Firefox <=42\n\t\t\t// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n\t\t\t// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n\t\t\t// Support: IE 11 only\n\t\t\t// ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n\t\t\t!( event.type === \"click\" && event.button >= 1 ) ) {\n\n\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't check non-elements (trac-13208)\n\t\t\t\t// Don't process clicks on disabled elements (trac-6911, trac-8165, trac-11382, trac-11764)\n\t\t\t\tif ( cur.nodeType === 1 && !( event.type === \"click\" && cur.disabled === true ) ) {\n\t\t\t\t\tmatchedHandlers = [];\n\t\t\t\t\tmatchedSelectors = {};\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (trac-13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatchedSelectors[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) > -1 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] ) {\n\t\t\t\t\t\t\tmatchedHandlers.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matchedHandlers.length ) {\n\t\t\t\t\t\thandlerQueue.push( { elem: cur, handlers: matchedHandlers } );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tcur = this;\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\taddProp: function( name, hook ) {\n\t\tObject.defineProperty( jQuery.Event.prototype, name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\n\t\t\tget: isFunction( hook ) ?\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\treturn hook( this.originalEvent );\n\t\t\t\t\t}\n\t\t\t\t} :\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\treturn this.originalEvent[ name ];\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\tset: function( value ) {\n\t\t\t\tObject.defineProperty( this, name, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\twritable: true,\n\t\t\t\t\tvalue: value\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t},\n\n\tfix: function( originalEvent ) {\n\t\treturn originalEvent[ jQuery.expando ] ?\n\t\t\toriginalEvent :\n\t\t\tnew jQuery.Event( originalEvent );\n\t},\n\n\tspecial: {\n\t\tload: {\n\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tclick: {\n\n\t\t\t// Utilize native event to ensure correct state for checkable inputs\n\t\t\tsetup: function( data ) {\n\n\t\t\t\t// For mutual compressibility with _default, replace `this` access with a local var.\n\t\t\t\t// `|| data` is dead code meant only to preserve the variable through minification.\n\t\t\t\tvar el = this || data;\n\n\t\t\t\t// Claim the first handler\n\t\t\t\tif ( rcheckableType.test( el.type ) &&\n\t\t\t\t\tel.click && nodeName( el, \"input\" ) ) {\n\n\t\t\t\t\t// dataPriv.set( el, \"click\", ... )\n\t\t\t\t\tleverageNative( el, \"click\", returnTrue );\n\t\t\t\t}\n\n\t\t\t\t// Return false to allow normal processing in the caller\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\ttrigger: function( data ) {\n\n\t\t\t\t// For mutual compressibility with _default, replace `this` access with a local var.\n\t\t\t\t// `|| data` is dead code meant only to preserve the variable through minification.\n\t\t\t\tvar el = this || data;\n\n\t\t\t\t// Force setup before triggering a click\n\t\t\t\tif ( rcheckableType.test( el.type ) &&\n\t\t\t\t\tel.click && nodeName( el, \"input\" ) ) {\n\n\t\t\t\t\tleverageNative( el, \"click\" );\n\t\t\t\t}\n\n\t\t\t\t// Return non-false to allow normal event-path propagation\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// For cross-browser consistency, suppress native .click() on links\n\t\t\t// Also prevent it if we're currently inside a leveraged native-event stack\n\t\t\t_default: function( event ) {\n\t\t\t\tvar target = event.target;\n\t\t\t\treturn rcheckableType.test( target.type ) &&\n\t\t\t\t\ttarget.click && nodeName( target, \"input\" ) &&\n\t\t\t\t\tdataPriv.get( target, \"click\" ) ||\n\t\t\t\t\tnodeName( target, \"a\" );\n\t\t\t}\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Support: Firefox 20+\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Ensure the presence of an event listener that handles manually-triggered\n// synthetic events by interrupting progress until reinvoked in response to\n// *native* events that it fires directly, ensuring that state changes have\n// already occurred before other listeners are invoked.\nfunction leverageNative( el, type, expectSync ) {\n\n\t// Missing expectSync indicates a trigger call, which must force setup through jQuery.event.add\n\tif ( !expectSync ) {\n\t\tif ( dataPriv.get( el, type ) === undefined ) {\n\t\t\tjQuery.event.add( el, type, returnTrue );\n\t\t}\n\t\treturn;\n\t}\n\n\t// Register the controller as a special universal handler for all event namespaces\n\tdataPriv.set( el, type, false );\n\tjQuery.event.add( el, type, {\n\t\tnamespace: false,\n\t\thandler: function( event ) {\n\t\t\tvar notAsync, result,\n\t\t\t\tsaved = dataPriv.get( this, type );\n\n\t\t\tif ( ( event.isTrigger & 1 ) && this[ type ] ) {\n\n\t\t\t\t// Interrupt processing of the outer synthetic .trigger()ed event\n\t\t\t\t// Saved data should be false in such cases, but might be a leftover capture object\n\t\t\t\t// from an async native handler (gh-4350)\n\t\t\t\tif ( !saved.length ) {\n\n\t\t\t\t\t// Store arguments for use when handling the inner native event\n\t\t\t\t\t// There will always be at least one argument (an event object), so this array\n\t\t\t\t\t// will not be confused with a leftover capture object.\n\t\t\t\t\tsaved = slice.call( arguments );\n\t\t\t\t\tdataPriv.set( this, type, saved );\n\n\t\t\t\t\t// Trigger the native event and capture its result\n\t\t\t\t\t// Support: IE <=9 - 11+\n\t\t\t\t\t// focus() and blur() are asynchronous\n\t\t\t\t\tnotAsync = expectSync( this, type );\n\t\t\t\t\tthis[ type ]();\n\t\t\t\t\tresult = dataPriv.get( this, type );\n\t\t\t\t\tif ( saved !== result || notAsync ) {\n\t\t\t\t\t\tdataPriv.set( this, type, false );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult = {};\n\t\t\t\t\t}\n\t\t\t\t\tif ( saved !== result ) {\n\n\t\t\t\t\t\t// Cancel the outer synthetic event\n\t\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t// Support: Chrome 86+\n\t\t\t\t\t\t// In Chrome, if an element having a focusout handler is blurred by\n\t\t\t\t\t\t// clicking outside of it, it invokes the handler synchronously. If\n\t\t\t\t\t\t// that handler calls `.remove()` on the element, the data is cleared,\n\t\t\t\t\t\t// leaving `result` undefined. We need to guard against this.\n\t\t\t\t\t\treturn result && result.value;\n\t\t\t\t\t}\n\n\t\t\t\t// If this is an inner synthetic event for an event with a bubbling surrogate\n\t\t\t\t// (focus or blur), assume that the surrogate already propagated from triggering the\n\t\t\t\t// native event and prevent that from happening again here.\n\t\t\t\t// This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the\n\t\t\t\t// bubbling surrogate propagates *after* the non-bubbling base), but that seems\n\t\t\t\t// less bad than duplication.\n\t\t\t\t} else if ( ( jQuery.event.special[ type ] || {} ).delegateType ) {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t}\n\n\t\t\t// If this is a native event triggered above, everything is now in order\n\t\t\t// Fire an inner synthetic event with the original arguments\n\t\t\t} else if ( saved.length ) {\n\n\t\t\t\t// ...and capture the result\n\t\t\t\tdataPriv.set( this, type, {\n\t\t\t\t\tvalue: jQuery.event.trigger(\n\n\t\t\t\t\t\t// Support: IE <=9 - 11+\n\t\t\t\t\t\t// Extend with the prototype to reset the above stopImmediatePropagation()\n\t\t\t\t\t\tjQuery.extend( saved[ 0 ], jQuery.Event.prototype ),\n\t\t\t\t\t\tsaved.slice( 1 ),\n\t\t\t\t\t\tthis\n\t\t\t\t\t)\n\t\t\t\t} );\n\n\t\t\t\t// Abort handling of the native event\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t}\n\t\t}\n\t} );\n}\n\njQuery.removeEvent = function( elem, type, handle ) {\n\n\t// This \"if\" is needed for plain objects\n\tif ( elem.removeEventListener ) {\n\t\telem.removeEventListener( type, handle );\n\t}\n};\n\njQuery.Event = function( src, props ) {\n\n\t// Allow instantiation without the 'new' keyword\n\tif ( !( this instanceof jQuery.Event ) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n\t\t\t\tsrc.defaultPrevented === undefined &&\n\n\t\t\t\t// Support: Android <=2.3 only\n\t\t\t\tsrc.returnValue === false ?\n\t\t\treturnTrue :\n\t\t\treturnFalse;\n\n\t\t// Create target properties\n\t\t// Support: Safari <=6 - 7 only\n\t\t// Target should not be a text node (trac-504, trac-13143)\n\t\tthis.target = ( src.target && src.target.nodeType === 3 ) ?\n\t\t\tsrc.target.parentNode :\n\t\t\tsrc.target;\n\n\t\tthis.currentTarget = src.currentTarget;\n\t\tthis.relatedTarget = src.relatedTarget;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || Date.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tconstructor: jQuery.Event,\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\tisSimulated: false,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\tstopImmediatePropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Includes all common event props including KeyEvent and MouseEvent specific props\njQuery.each( {\n\taltKey: true,\n\tbubbles: true,\n\tcancelable: true,\n\tchangedTouches: true,\n\tctrlKey: true,\n\tdetail: true,\n\teventPhase: true,\n\tmetaKey: true,\n\tpageX: true,\n\tpageY: true,\n\tshiftKey: true,\n\tview: true,\n\t\"char\": true,\n\tcode: true,\n\tcharCode: true,\n\tkey: true,\n\tkeyCode: true,\n\tbutton: true,\n\tbuttons: true,\n\tclientX: true,\n\tclientY: true,\n\toffsetX: true,\n\toffsetY: true,\n\tpointerId: true,\n\tpointerType: true,\n\tscreenX: true,\n\tscreenY: true,\n\ttargetTouches: true,\n\ttoElement: true,\n\ttouches: true,\n\twhich: true\n}, jQuery.event.addProp );\n\njQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( type, delegateType ) {\n\tjQuery.event.special[ type ] = {\n\n\t\t// Utilize native event if possible so blur/focus sequence is correct\n\t\tsetup: function() {\n\n\t\t\t// Claim the first handler\n\t\t\t// dataPriv.set( this, \"focus\", ... )\n\t\t\t// dataPriv.set( this, \"blur\", ... )\n\t\t\tleverageNative( this, type, expectSync );\n\n\t\t\t// Return false to allow normal processing in the caller\n\t\t\treturn false;\n\t\t},\n\t\ttrigger: function() {\n\n\t\t\t// Force setup before trigger\n\t\t\tleverageNative( this, type );\n\n\t\t\t// Return non-false to allow normal event-path propagation\n\t\t\treturn true;\n\t\t},\n\n\t\t// Suppress native focus or blur if we're currently inside\n\t\t// a leveraged native-event stack\n\t\t_default: function( event ) {\n\t\t\treturn dataPriv.get( event.target, type );\n\t\t},\n\n\t\tdelegateType: delegateType\n\t};\n} );\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// so that event delegation works in jQuery.\n// Do the same for pointerenter/pointerleave and pointerover/pointerout\n//\n// Support: Safari 7 only\n// Safari sends mouseenter too often; see:\n// https://bugs.chromium.org/p/chromium/issues/detail?id=470258\n// for the description of the bug (it existed in older Chrome versions as well).\njQuery.each( {\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\",\n\tpointerenter: \"pointerover\",\n\tpointerleave: \"pointerout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mouseenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n} );\n\njQuery.fn.extend( {\n\n\ton: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn );\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ?\n\t\t\t\t\thandleObj.origType + \".\" + handleObj.namespace :\n\t\t\t\t\thandleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t} );\n\t}\n} );\n\n\nvar\n\n\t// Support: IE <=10 - 11, Edge 12 - 13 only\n\t// In IE/Edge using regex groups here causes severe slowdowns.\n\t// See https://connect.microsoft.com/IE/feedback/details/1736512/\n\trnoInnerhtml = /<script|<style|<link/i,\n\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\n\trcleanScript = /^\\s*<!\\[CDATA\\[|\\]\\]>\\s*$/g;\n\n// Prefer a tbody over its parent table for containing new rows\nfunction manipulationTarget( elem, content ) {\n\tif ( nodeName( elem, \"table\" ) &&\n\t\tnodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ) {\n\n\t\treturn jQuery( elem ).children( \"tbody\" )[ 0 ] || elem;\n\t}\n\n\treturn elem;\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\telem.type = ( elem.getAttribute( \"type\" ) !== null ) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tif ( ( elem.type || \"\" ).slice( 0, 5 ) === \"true/\" ) {\n\t\telem.type = elem.type.slice( 5 );\n\t} else {\n\t\telem.removeAttribute( \"type\" );\n\t}\n\n\treturn elem;\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\tvar i, l, type, pdataOld, udataOld, udataCur, events;\n\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\t// 1. Copy private data: events, handlers, etc.\n\tif ( dataPriv.hasData( src ) ) {\n\t\tpdataOld = dataPriv.get( src );\n\t\tevents = pdataOld.events;\n\n\t\tif ( events ) {\n\t\t\tdataPriv.remove( dest, \"handle events\" );\n\n\t\t\tfor ( type in events ) {\n\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// 2. Copy user data\n\tif ( dataUser.hasData( src ) ) {\n\t\tudataOld = dataUser.access( src );\n\t\tudataCur = jQuery.extend( {}, udataOld );\n\n\t\tdataUser.set( dest, udataCur );\n\t}\n}\n\n// Fix IE bugs, see support tests\nfunction fixInput( src, dest ) {\n\tvar nodeName = dest.nodeName.toLowerCase();\n\n\t// Fails to persist the checked state of a cloned checkbox or radio button.\n\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n\t\tdest.checked = src.checked;\n\n\t// Fails to return the selected option to the default selected state when cloning options\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\nfunction domManip( collection, args, callback, ignored ) {\n\n\t// Flatten any nested arrays\n\targs = flat( args );\n\n\tvar fragment, first, scripts, hasScripts, node, doc,\n\t\ti = 0,\n\t\tl = collection.length,\n\t\tiNoClone = l - 1,\n\t\tvalue = args[ 0 ],\n\t\tvalueIsFunction = isFunction( value );\n\n\t// We can't cloneNode fragments that contain checked, in WebKit\n\tif ( valueIsFunction ||\n\t\t\t( l > 1 && typeof value === \"string\" &&\n\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n\t\treturn collection.each( function( index ) {\n\t\t\tvar self = collection.eq( index );\n\t\t\tif ( valueIsFunction ) {\n\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t}\n\t\t\tdomManip( self, args, callback, ignored );\n\t\t} );\n\t}\n\n\tif ( l ) {\n\t\tfragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );\n\t\tfirst = fragment.firstChild;\n\n\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\tfragment = first;\n\t\t}\n\n\t\t// Require either new content or an interest in ignored elements to invoke the callback\n\t\tif ( first || ignored ) {\n\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\thasScripts = scripts.length;\n\n\t\t\t// Use the original fragment for the last item\n\t\t\t// instead of the first because it can end up\n\t\t\t// being emptied incorrectly in certain situations (trac-8070).\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tnode = fragment;\n\n\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\tif ( hasScripts ) {\n\n\t\t\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcallback.call( collection[ i ], node, i );\n\t\t\t}\n\n\t\t\tif ( hasScripts ) {\n\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t// Reenable scripts\n\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t!dataPriv.access( node, \"globalEval\" ) &&\n\t\t\t\t\t\tjQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\tif ( node.src && ( node.type || \"\" ).toLowerCase()  !== \"module\" ) {\n\n\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\n\t\t\t\t\t\t\tif ( jQuery._evalUrl && !node.noModule ) {\n\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src, {\n\t\t\t\t\t\t\t\t\tnonce: node.nonce || node.getAttribute( \"nonce\" )\n\t\t\t\t\t\t\t\t}, doc );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Unwrap a CDATA section containing script contents. This shouldn't be\n\t\t\t\t\t\t\t// needed as in XML documents they're already not visible when\n\t\t\t\t\t\t\t// inspecting element contents and in HTML documents they have no\n\t\t\t\t\t\t\t// meaning but we're preserving that logic for backwards compatibility.\n\t\t\t\t\t\t\t// This will be removed completely in 4.0. See gh-4904.\n\t\t\t\t\t\t\tDOMEval( node.textContent.replace( rcleanScript, \"\" ), node, doc );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn collection;\n}\n\nfunction remove( elem, selector, keepData ) {\n\tvar node,\n\t\tnodes = selector ? jQuery.filter( selector, elem ) : elem,\n\t\ti = 0;\n\n\tfor ( ; ( node = nodes[ i ] ) != null; i++ ) {\n\t\tif ( !keepData && node.nodeType === 1 ) {\n\t\t\tjQuery.cleanData( getAll( node ) );\n\t\t}\n\n\t\tif ( node.parentNode ) {\n\t\t\tif ( keepData && isAttached( node ) ) {\n\t\t\t\tsetGlobalEval( getAll( node, \"script\" ) );\n\t\t\t}\n\t\t\tnode.parentNode.removeChild( node );\n\t\t}\n\t}\n\n\treturn elem;\n}\n\njQuery.extend( {\n\thtmlPrefilter: function( html ) {\n\t\treturn html;\n\t},\n\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar i, l, srcElements, destElements,\n\t\t\tclone = elem.cloneNode( true ),\n\t\t\tinPage = isAttached( elem );\n\n\t\t// Fix IE cloning issues\n\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tcleanData: function( elems ) {\n\t\tvar data, elem, type,\n\t\t\tspecial = jQuery.event.special,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {\n\t\t\tif ( acceptData( elem ) ) {\n\t\t\t\tif ( ( data = elem[ dataPriv.expando ] ) ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataPriv.expando ] = undefined;\n\t\t\t\t}\n\t\t\t\tif ( elem[ dataUser.expando ] ) {\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataUser.expando ] = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} );\n\njQuery.fn.extend( {\n\tdetach: function( selector ) {\n\t\treturn remove( this, selector, true );\n\t},\n\n\tremove: function( selector ) {\n\t\treturn remove( this, selector );\n\t},\n\n\ttext: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().each( function() {\n\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}, null, value, arguments.length );\n\t},\n\n\tappend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.appendChild( elem );\n\t\t\t}\n\t\t} );\n\t},\n\n\tprepend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t}\n\t\t} );\n\t},\n\n\tbefore: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t} );\n\t},\n\n\tafter: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t} );\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = this[ i ] ) != null; i++ ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\n\t\t\t\t// Prevent memory leaks\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\n\t\t\t\t// Remove any remaining nodes\n\t\t\t\telem.textContent = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map( function() {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t} );\n\t},\n\n\thtml: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n\t\t\t\treturn elem.innerHTML;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\tvalue = jQuery.htmlPrefilter( value );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\telem = this[ i ] || {};\n\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch ( e ) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function() {\n\t\tvar ignored = [];\n\n\t\t// Make the changes, replacing each non-ignored context element with the new content\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tvar parent = this.parentNode;\n\n\t\t\tif ( jQuery.inArray( this, ignored ) < 0 ) {\n\t\t\t\tjQuery.cleanData( getAll( this ) );\n\t\t\t\tif ( parent ) {\n\t\t\t\t\tparent.replaceChild( elem, this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Force callback invocation\n\t\t}, ignored );\n\t}\n} );\n\njQuery.each( {\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1,\n\t\t\ti = 0;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone( true );\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t// .get() because push.apply(_, arraylike) throws on ancient WebKit\n\t\t\tpush.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n} );\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n\nvar rcustomProp = /^--/;\n\n\nvar getStyles = function( elem ) {\n\n\t\t// Support: IE <=11 only, Firefox <=30 (trac-15098, trac-14150)\n\t\t// IE throws on elements created in popups\n\t\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n\t\tvar view = elem.ownerDocument.defaultView;\n\n\t\tif ( !view || !view.opener ) {\n\t\t\tview = window;\n\t\t}\n\n\t\treturn view.getComputedStyle( elem );\n\t};\n\nvar swap = function( elem, options, callback ) {\n\tvar ret, name,\n\t\told = {};\n\n\t// Remember the old values, and insert the new ones\n\tfor ( name in options ) {\n\t\told[ name ] = elem.style[ name ];\n\t\telem.style[ name ] = options[ name ];\n\t}\n\n\tret = callback.call( elem );\n\n\t// Revert the old values\n\tfor ( name in options ) {\n\t\telem.style[ name ] = old[ name ];\n\t}\n\n\treturn ret;\n};\n\n\nvar rboxStyle = new RegExp( cssExpand.join( \"|\" ), \"i\" );\n\nvar whitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\";\n\n\nvar rtrimCSS = new RegExp(\n\t\"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\",\n\t\"g\"\n);\n\n\n\n\n( function() {\n\n\t// Executing both pixelPosition & boxSizingReliable tests require only one layout\n\t// so they're executed at the same time to save the second computation.\n\tfunction computeStyleTests() {\n\n\t\t// This is a singleton, we need to execute it only once\n\t\tif ( !div ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.style.cssText = \"position:absolute;left:-11111px;width:60px;\" +\n\t\t\t\"margin-top:1px;padding:0;border:0\";\n\t\tdiv.style.cssText =\n\t\t\t\"position:relative;display:block;box-sizing:border-box;overflow:scroll;\" +\n\t\t\t\"margin:auto;border:1px;padding:1px;\" +\n\t\t\t\"width:60%;top:1%\";\n\t\tdocumentElement.appendChild( container ).appendChild( div );\n\n\t\tvar divStyle = window.getComputedStyle( div );\n\t\tpixelPositionVal = divStyle.top !== \"1%\";\n\n\t\t// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44\n\t\treliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;\n\n\t\t// Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3\n\t\t// Some styles come back with percentage values, even though they shouldn't\n\t\tdiv.style.right = \"60%\";\n\t\tpixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;\n\n\t\t// Support: IE 9 - 11 only\n\t\t// Detect misreporting of content dimensions for box-sizing:border-box elements\n\t\tboxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;\n\n\t\t// Support: IE 9 only\n\t\t// Detect overflow:scroll screwiness (gh-3699)\n\t\t// Support: Chrome <=64\n\t\t// Don't get tricked when zoom affects offsetWidth (gh-4029)\n\t\tdiv.style.position = \"absolute\";\n\t\tscrollboxSizeVal = roundPixelMeasures( div.offsetWidth / 3 ) === 12;\n\n\t\tdocumentElement.removeChild( container );\n\n\t\t// Nullify the div so it wouldn't be stored in the memory and\n\t\t// it will also be a sign that checks already performed\n\t\tdiv = null;\n\t}\n\n\tfunction roundPixelMeasures( measure ) {\n\t\treturn Math.round( parseFloat( measure ) );\n\t}\n\n\tvar pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,\n\t\treliableTrDimensionsVal, reliableMarginLeftVal,\n\t\tcontainer = document.createElement( \"div\" ),\n\t\tdiv = document.createElement( \"div\" );\n\n\t// Finish early in limited (non-browser) environments\n\tif ( !div.style ) {\n\t\treturn;\n\t}\n\n\t// Support: IE <=9 - 11 only\n\t// Style of cloned element affects source element cloned (trac-8908)\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\tjQuery.extend( support, {\n\t\tboxSizingReliable: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn boxSizingReliableVal;\n\t\t},\n\t\tpixelBoxStyles: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelBoxStylesVal;\n\t\t},\n\t\tpixelPosition: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelPositionVal;\n\t\t},\n\t\treliableMarginLeft: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn reliableMarginLeftVal;\n\t\t},\n\t\tscrollboxSize: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn scrollboxSizeVal;\n\t\t},\n\n\t\t// Support: IE 9 - 11+, Edge 15 - 18+\n\t\t// IE/Edge misreport `getComputedStyle` of table rows with width/height\n\t\t// set in CSS while `offset*` properties report correct values.\n\t\t// Behavior in IE 9 is more subtle than in newer versions & it passes\n\t\t// some versions of this test; make sure not to make it pass there!\n\t\t//\n\t\t// Support: Firefox 70+\n\t\t// Only Firefox includes border widths\n\t\t// in computed dimensions. (gh-4529)\n\t\treliableTrDimensions: function() {\n\t\t\tvar table, tr, trChild, trStyle;\n\t\t\tif ( reliableTrDimensionsVal == null ) {\n\t\t\t\ttable = document.createElement( \"table\" );\n\t\t\t\ttr = document.createElement( \"tr\" );\n\t\t\t\ttrChild = document.createElement( \"div\" );\n\n\t\t\t\ttable.style.cssText = \"position:absolute;left:-11111px;border-collapse:separate\";\n\t\t\t\ttr.style.cssText = \"border:1px solid\";\n\n\t\t\t\t// Support: Chrome 86+\n\t\t\t\t// Height set through cssText does not get applied.\n\t\t\t\t// Computed height then comes back as 0.\n\t\t\t\ttr.style.height = \"1px\";\n\t\t\t\ttrChild.style.height = \"9px\";\n\n\t\t\t\t// Support: Android 8 Chrome 86+\n\t\t\t\t// In our bodyBackground.html iframe,\n\t\t\t\t// display for all div elements is set to \"inline\",\n\t\t\t\t// which causes a problem only in Android 8 Chrome 86.\n\t\t\t\t// Ensuring the div is display: block\n\t\t\t\t// gets around this issue.\n\t\t\t\ttrChild.style.display = \"block\";\n\n\t\t\t\tdocumentElement\n\t\t\t\t\t.appendChild( table )\n\t\t\t\t\t.appendChild( tr )\n\t\t\t\t\t.appendChild( trChild );\n\n\t\t\t\ttrStyle = window.getComputedStyle( tr );\n\t\t\t\treliableTrDimensionsVal = ( parseInt( trStyle.height, 10 ) +\n\t\t\t\t\tparseInt( trStyle.borderTopWidth, 10 ) +\n\t\t\t\t\tparseInt( trStyle.borderBottomWidth, 10 ) ) === tr.offsetHeight;\n\n\t\t\t\tdocumentElement.removeChild( table );\n\t\t\t}\n\t\t\treturn reliableTrDimensionsVal;\n\t\t}\n\t} );\n} )();\n\n\nfunction curCSS( elem, name, computed ) {\n\tvar width, minWidth, maxWidth, ret,\n\t\tisCustomProp = rcustomProp.test( name ),\n\n\t\t// Support: Firefox 51+\n\t\t// Retrieving style before computed somehow\n\t\t// fixes an issue with getting wrong values\n\t\t// on detached elements\n\t\tstyle = elem.style;\n\n\tcomputed = computed || getStyles( elem );\n\n\t// getPropertyValue is needed for:\n\t//   .css('filter') (IE 9 only, trac-12537)\n\t//   .css('--customProperty) (gh-3144)\n\tif ( computed ) {\n\n\t\t// Support: IE <=9 - 11+\n\t\t// IE only supports `\"float\"` in `getPropertyValue`; in computed styles\n\t\t// it's only available as `\"cssFloat\"`. We no longer modify properties\n\t\t// sent to `.css()` apart from camelCasing, so we need to check both.\n\t\t// Normally, this would create difference in behavior: if\n\t\t// `getPropertyValue` returns an empty string, the value returned\n\t\t// by `.css()` would be `undefined`. This is usually the case for\n\t\t// disconnected elements. However, in IE even disconnected elements\n\t\t// with no styles return `\"none\"` for `getPropertyValue( \"float\" )`\n\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n\n\t\tif ( isCustomProp && ret ) {\n\n\t\t\t// Support: Firefox 105+, Chrome <=105+\n\t\t\t// Spec requires trimming whitespace for custom properties (gh-4926).\n\t\t\t// Firefox only trims leading whitespace. Chrome just collapses\n\t\t\t// both leading & trailing whitespace to a single space.\n\t\t\t//\n\t\t\t// Fall back to `undefined` if empty string returned.\n\t\t\t// This collapses a missing definition with property defined\n\t\t\t// and set to an empty string but there's no standard API\n\t\t\t// allowing us to differentiate them without a performance penalty\n\t\t\t// and returning `undefined` aligns with older jQuery.\n\t\t\t//\n\t\t\t// rtrimCSS treats U+000D CARRIAGE RETURN and U+000C FORM FEED\n\t\t\t// as whitespace while CSS does not, but this is not a problem\n\t\t\t// because CSS preprocessing replaces them with U+000A LINE FEED\n\t\t\t// (which *is* CSS whitespace)\n\t\t\t// https://www.w3.org/TR/css-syntax-3/#input-preprocessing\n\t\t\tret = ret.replace( rtrimCSS, \"$1\" ) || undefined;\n\t\t}\n\n\t\tif ( ret === \"\" && !isAttached( elem ) ) {\n\t\t\tret = jQuery.style( elem, name );\n\t\t}\n\n\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t// Android Browser returns percentage for some values,\n\t\t// but width seems to be reliably pixels.\n\t\t// This is against the CSSOM draft spec:\n\t\t// https://drafts.csswg.org/cssom/#resolved-values\n\t\tif ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\twidth = style.width;\n\t\t\tminWidth = style.minWidth;\n\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\tret = computed.width;\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.width = width;\n\t\t\tstyle.minWidth = minWidth;\n\t\t\tstyle.maxWidth = maxWidth;\n\t\t}\n\t}\n\n\treturn ret !== undefined ?\n\n\t\t// Support: IE <=9 - 11 only\n\t\t// IE returns zIndex value as an integer.\n\t\tret + \"\" :\n\t\tret;\n}\n\n\nfunction addGetHookIf( conditionFn, hookFn ) {\n\n\t// Define the hook, we'll check on the first run if it's really needed.\n\treturn {\n\t\tget: function() {\n\t\t\tif ( conditionFn() ) {\n\n\t\t\t\t// Hook not needed (or it's not possible to use it due\n\t\t\t\t// to missing dependency), remove it.\n\t\t\t\tdelete this.get;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\n\t\t\treturn ( this.get = hookFn ).apply( this, arguments );\n\t\t}\n\t};\n}\n\n\nvar cssPrefixes = [ \"Webkit\", \"Moz\", \"ms\" ],\n\temptyStyle = document.createElement( \"div\" ).style,\n\tvendorProps = {};\n\n// Return a vendor-prefixed property or undefined\nfunction vendorPropName( name ) {\n\n\t// Check for vendor prefixed names\n\tvar capName = name[ 0 ].toUpperCase() + name.slice( 1 ),\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in emptyStyle ) {\n\t\t\treturn name;\n\t\t}\n\t}\n}\n\n// Return a potentially-mapped jQuery.cssProps or vendor prefixed property\nfunction finalPropName( name ) {\n\tvar final = jQuery.cssProps[ name ] || vendorProps[ name ];\n\n\tif ( final ) {\n\t\treturn final;\n\t}\n\tif ( name in emptyStyle ) {\n\t\treturn name;\n\t}\n\treturn vendorProps[ name ] = vendorPropName( name ) || name;\n}\n\n\nvar\n\n\t// Swappable if display is none or starts with table\n\t// except \"table\", \"table-cell\", or \"table-caption\"\n\t// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: \"0\",\n\t\tfontWeight: \"400\"\n\t};\n\nfunction setPositiveNumber( _elem, value, subtract ) {\n\n\t// Any relative (+/-) values have already been\n\t// normalized at this point\n\tvar matches = rcssNum.exec( value );\n\treturn matches ?\n\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {\n\tvar i = dimension === \"width\" ? 1 : 0,\n\t\textra = 0,\n\t\tdelta = 0;\n\n\t// Adjustment may not be necessary\n\tif ( box === ( isBorderBox ? \"border\" : \"content\" ) ) {\n\t\treturn 0;\n\t}\n\n\tfor ( ; i < 4; i += 2 ) {\n\n\t\t// Both box models exclude margin\n\t\tif ( box === \"margin\" ) {\n\t\t\tdelta += jQuery.css( elem, box + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\t// If we get here with a content-box, we're seeking \"padding\" or \"border\" or \"margin\"\n\t\tif ( !isBorderBox ) {\n\n\t\t\t// Add padding\n\t\t\tdelta += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// For \"border\" or \"margin\", add border\n\t\t\tif ( box !== \"padding\" ) {\n\t\t\t\tdelta += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\n\t\t\t// But still keep track of it otherwise\n\t\t\t} else {\n\t\t\t\textra += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\n\t\t// If we get here with a border-box (content + padding + border), we're seeking \"content\" or\n\t\t// \"padding\" or \"margin\"\n\t\t} else {\n\n\t\t\t// For \"content\", subtract padding\n\t\t\tif ( box === \"content\" ) {\n\t\t\t\tdelta -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// For \"content\" or \"padding\", subtract border\n\t\t\tif ( box !== \"margin\" ) {\n\t\t\t\tdelta -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Account for positive content-box scroll gutter when requested by providing computedVal\n\tif ( !isBorderBox && computedVal >= 0 ) {\n\n\t\t// offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border\n\t\t// Assuming integer scroll gutter, subtract the rest and round down\n\t\tdelta += Math.max( 0, Math.ceil(\n\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n\t\t\tcomputedVal -\n\t\t\tdelta -\n\t\t\textra -\n\t\t\t0.5\n\n\t\t// If offsetWidth/offsetHeight is unknown, then we can't determine content-box scroll gutter\n\t\t// Use an explicit zero to avoid NaN (gh-3964)\n\t\t) ) || 0;\n\t}\n\n\treturn delta;\n}\n\nfunction getWidthOrHeight( elem, dimension, extra ) {\n\n\t// Start with computed style\n\tvar styles = getStyles( elem ),\n\n\t\t// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).\n\t\t// Fake content-box until we know it's needed to know the true value.\n\t\tboxSizingNeeded = !support.boxSizingReliable() || extra,\n\t\tisBorderBox = boxSizingNeeded &&\n\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\tvalueIsBorderBox = isBorderBox,\n\n\t\tval = curCSS( elem, dimension, styles ),\n\t\toffsetProp = \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 );\n\n\t// Support: Firefox <=54\n\t// Return a confounding non-pixel value or feign ignorance, as appropriate.\n\tif ( rnumnonpx.test( val ) ) {\n\t\tif ( !extra ) {\n\t\t\treturn val;\n\t\t}\n\t\tval = \"auto\";\n\t}\n\n\n\t// Support: IE 9 - 11 only\n\t// Use offsetWidth/offsetHeight for when box sizing is unreliable.\n\t// In those cases, the computed value can be trusted to be border-box.\n\tif ( ( !support.boxSizingReliable() && isBorderBox ||\n\n\t\t// Support: IE 10 - 11+, Edge 15 - 18+\n\t\t// IE/Edge misreport `getComputedStyle` of table rows with width/height\n\t\t// set in CSS while `offset*` properties report correct values.\n\t\t// Interestingly, in some cases IE 9 doesn't suffer from this issue.\n\t\t!support.reliableTrDimensions() && nodeName( elem, \"tr\" ) ||\n\n\t\t// Fall back to offsetWidth/offsetHeight when value is \"auto\"\n\t\t// This happens for inline elements with no explicit setting (gh-3571)\n\t\tval === \"auto\" ||\n\n\t\t// Support: Android <=4.1 - 4.3 only\n\t\t// Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)\n\t\t!parseFloat( val ) && jQuery.css( elem, \"display\", false, styles ) === \"inline\" ) &&\n\n\t\t// Make sure the element is visible & connected\n\t\telem.getClientRects().length ) {\n\n\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t\t// Where available, offsetWidth/offsetHeight approximate border box dimensions.\n\t\t// Where not available (e.g., SVG), assume unreliable box-sizing and interpret the\n\t\t// retrieved value as a content box dimension.\n\t\tvalueIsBorderBox = offsetProp in elem;\n\t\tif ( valueIsBorderBox ) {\n\t\t\tval = elem[ offsetProp ];\n\t\t}\n\t}\n\n\t// Normalize \"\" and auto\n\tval = parseFloat( val ) || 0;\n\n\t// Adjust for the element's box model\n\treturn ( val +\n\t\tboxModelAdjustment(\n\t\t\telem,\n\t\t\tdimension,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles,\n\n\t\t\t// Provide the current computed size to request scroll gutter calculation (gh-3589)\n\t\t\tval\n\t\t)\n\t) + \"px\";\n}\n\njQuery.extend( {\n\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber: {\n\t\t\"animationIterationCount\": true,\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"flexGrow\": true,\n\t\t\"flexShrink\": true,\n\t\t\"fontWeight\": true,\n\t\t\"gridArea\": true,\n\t\t\"gridColumn\": true,\n\t\t\"gridColumnEnd\": true,\n\t\t\"gridColumnStart\": true,\n\t\t\"gridRow\": true,\n\t\t\"gridRowEnd\": true,\n\t\t\"gridRowStart\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"order\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name ),\n\t\t\tstyle = elem.style;\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to query the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Gets hook for the prefixed version, then unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// Convert \"+=\" or \"-=\" to relative numbers (trac-7345)\n\t\t\tif ( type === \"string\" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {\n\t\t\t\tvalue = adjustCSS( elem, name, ret );\n\n\t\t\t\t// Fixes bug trac-9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that null and NaN values aren't set (trac-7116)\n\t\t\tif ( value == null || value !== value ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number was passed in, add the unit (except for certain CSS properties)\n\t\t\t// The isCustomProp check can be removed in jQuery 4.0 when we only auto-append\n\t\t\t// \"px\" to a few hardcoded values.\n\t\t\tif ( type === \"number\" && !isCustomProp ) {\n\t\t\t\tvalue += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? \"\" : \"px\" );\n\t\t\t}\n\n\t\t\t// background-* props affect original clone's values\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !( \"set\" in hooks ) ||\n\t\t\t\t( value = hooks.set( elem, value, extra ) ) !== undefined ) {\n\n\t\t\t\tif ( isCustomProp ) {\n\t\t\t\t\tstyle.setProperty( name, value );\n\t\t\t\t} else {\n\t\t\t\t\tstyle[ name ] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks &&\n\t\t\t\t( ret = hooks.get( elem, false, extra ) ) !== undefined ) {\n\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar val, num, hooks,\n\t\t\torigName = camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name );\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to modify the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Try prefixed name followed by the unprefixed name\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t// Convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Make numeric if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || isFinite( num ) ? num || 0 : val;\n\t\t}\n\n\t\treturn val;\n\t}\n} );\n\njQuery.each( [ \"height\", \"width\" ], function( _i, dimension ) {\n\tjQuery.cssHooks[ dimension ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\n\t\t\t\t// Certain elements can have dimension info if we invisibly show them\n\t\t\t\t// but it must have a current display style that would benefit\n\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) &&\n\n\t\t\t\t\t// Support: Safari 8+\n\t\t\t\t\t// Table columns in Safari have non-zero offsetWidth & zero\n\t\t\t\t\t// getBoundingClientRect().width unless display is changed.\n\t\t\t\t\t// Support: IE <=11 only\n\t\t\t\t\t// Running getBoundingClientRect on a disconnected node\n\t\t\t\t\t// in IE throws an error.\n\t\t\t\t\t( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?\n\t\t\t\t\tswap( elem, cssShow, function() {\n\t\t\t\t\t\treturn getWidthOrHeight( elem, dimension, extra );\n\t\t\t\t\t} ) :\n\t\t\t\t\tgetWidthOrHeight( elem, dimension, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar matches,\n\t\t\t\tstyles = getStyles( elem ),\n\n\t\t\t\t// Only read styles.position if the test has a chance to fail\n\t\t\t\t// to avoid forcing a reflow.\n\t\t\t\tscrollboxSizeBuggy = !support.scrollboxSize() &&\n\t\t\t\t\tstyles.position === \"absolute\",\n\n\t\t\t\t// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)\n\t\t\t\tboxSizingNeeded = scrollboxSizeBuggy || extra,\n\t\t\t\tisBorderBox = boxSizingNeeded &&\n\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\tsubtract = extra ?\n\t\t\t\t\tboxModelAdjustment(\n\t\t\t\t\t\telem,\n\t\t\t\t\t\tdimension,\n\t\t\t\t\t\textra,\n\t\t\t\t\t\tisBorderBox,\n\t\t\t\t\t\tstyles\n\t\t\t\t\t) :\n\t\t\t\t\t0;\n\n\t\t\t// Account for unreliable border-box dimensions by comparing offset* to computed and\n\t\t\t// faking a content-box to get border and padding (gh-3699)\n\t\t\tif ( isBorderBox && scrollboxSizeBuggy ) {\n\t\t\t\tsubtract -= Math.ceil(\n\t\t\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n\t\t\t\t\tparseFloat( styles[ dimension ] ) -\n\t\t\t\t\tboxModelAdjustment( elem, dimension, \"border\", false, styles ) -\n\t\t\t\t\t0.5\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Convert to pixels if value adjustment is needed\n\t\t\tif ( subtract && ( matches = rcssNum.exec( value ) ) &&\n\t\t\t\t( matches[ 3 ] || \"px\" ) !== \"px\" ) {\n\n\t\t\t\telem.style[ dimension ] = value;\n\t\t\t\tvalue = jQuery.css( elem, dimension );\n\t\t\t}\n\n\t\t\treturn setPositiveNumber( elem, value, subtract );\n\t\t}\n\t};\n} );\n\njQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\treturn ( parseFloat( curCSS( elem, \"marginLeft\" ) ) ||\n\t\t\t\telem.getBoundingClientRect().left -\n\t\t\t\t\tswap( elem, { marginLeft: 0 }, function() {\n\t\t\t\t\t\treturn elem.getBoundingClientRect().left;\n\t\t\t\t\t} )\n\t\t\t) + \"px\";\n\t\t}\n\t}\n);\n\n// These hooks are used by animate to expand properties\njQuery.each( {\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// Assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split( \" \" ) : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( prefix !== \"margin\" ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n} );\n\njQuery.fn.extend( {\n\tcss: function( name, value ) {\n\t\treturn access( this, function( elem, name, value ) {\n\t\t\tvar styles, len,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t}\n} );\n\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || jQuery.easing._default;\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\t// Use a property on the element directly when it is not a DOM element,\n\t\t\t// or when there is no matching style property that exists.\n\t\t\tif ( tween.elem.nodeType !== 1 ||\n\t\t\t\ttween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// Passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails.\n\t\t\t// Simple values such as \"10px\" are parsed to Float;\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as-is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\n\t\t\t// Use step hook for back compat.\n\t\t\t// Use cssHook if its there.\n\t\t\t// Use .style if available and use plain properties where available.\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.nodeType === 1 && (\n\t\t\t\tjQuery.cssHooks[ tween.prop ] ||\n\t\t\t\t\ttween.elem.style[ finalPropName( tween.prop ) ] != null ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Support: IE <=9 only\n// Panic based approach to setting things on disconnected nodes\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\n\t},\n\t_default: \"swing\"\n};\n\njQuery.fx = Tween.prototype.init;\n\n// Back compat <1.8 extension point\njQuery.fx.step = {};\n\n\n\n\nvar\n\tfxNow, inProgress,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trrun = /queueHooks$/;\n\nfunction schedule() {\n\tif ( inProgress ) {\n\t\tif ( document.hidden === false && window.requestAnimationFrame ) {\n\t\t\twindow.requestAnimationFrame( schedule );\n\t\t} else {\n\t\t\twindow.setTimeout( schedule, jQuery.fx.interval );\n\t\t}\n\n\t\tjQuery.fx.tick();\n\t}\n}\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\twindow.setTimeout( function() {\n\t\tfxNow = undefined;\n\t} );\n\treturn ( fxNow = Date.now() );\n}\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\ti = 0,\n\t\tattrs = { height: type };\n\n\t// If we include width, step value is 1 to do all cssExpand values,\n\t// otherwise step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth ? 1 : 0;\n\tfor ( ; i < 4; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\nfunction createTween( value, prop, animation ) {\n\tvar tween,\n\t\tcollection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ \"*\" ] ),\n\t\tindex = 0,\n\t\tlength = collection.length;\n\tfor ( ; index < length; index++ ) {\n\t\tif ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {\n\n\t\t\t// We're done with this property\n\t\t\treturn tween;\n\t\t}\n\t}\n}\n\nfunction defaultPrefilter( elem, props, opts ) {\n\tvar prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,\n\t\tisBox = \"width\" in props || \"height\" in props,\n\t\tanim = this,\n\t\torig = {},\n\t\tstyle = elem.style,\n\t\thidden = elem.nodeType && isHiddenWithinTree( elem ),\n\t\tdataShow = dataPriv.get( elem, \"fxshow\" );\n\n\t// Queue-skipping animations hijack the fx hooks\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always( function() {\n\n\t\t\t// Ensure the complete handler is called before this completes\n\t\t\tanim.always( function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\t// Detect show/hide animations\n\tfor ( prop in props ) {\n\t\tvalue = props[ prop ];\n\t\tif ( rfxtypes.test( value ) ) {\n\t\t\tdelete props[ prop ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t// Pretend to be hidden if this is a \"show\" and\n\t\t\t\t// there is still data from a stopped show/hide\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\thidden = true;\n\n\t\t\t\t// Ignore all other no-op show/hide data\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\t\t}\n\t}\n\n\t// Bail out if this is a no-op like .hide().hide()\n\tpropTween = !jQuery.isEmptyObject( props );\n\tif ( !propTween && jQuery.isEmptyObject( orig ) ) {\n\t\treturn;\n\t}\n\n\t// Restrict \"overflow\" and \"display\" styles during box animations\n\tif ( isBox && elem.nodeType === 1 ) {\n\n\t\t// Support: IE <=9 - 11, Edge 12 - 15\n\t\t// Record all 3 overflow attributes because IE does not infer the shorthand\n\t\t// from identically-valued overflowX and overflowY and Edge just mirrors\n\t\t// the overflowX value there.\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Identify a display type, preferring old show/hide data over the CSS cascade\n\t\trestoreDisplay = dataShow && dataShow.display;\n\t\tif ( restoreDisplay == null ) {\n\t\t\trestoreDisplay = dataPriv.get( elem, \"display\" );\n\t\t}\n\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\tif ( display === \"none\" ) {\n\t\t\tif ( restoreDisplay ) {\n\t\t\t\tdisplay = restoreDisplay;\n\t\t\t} else {\n\n\t\t\t\t// Get nonempty value(s) by temporarily forcing visibility\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t\trestoreDisplay = elem.style.display || restoreDisplay;\n\t\t\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\t\t\tshowHide( [ elem ] );\n\t\t\t}\n\t\t}\n\n\t\t// Animate inline elements as inline-block\n\t\tif ( display === \"inline\" || display === \"inline-block\" && restoreDisplay != null ) {\n\t\t\tif ( jQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\t\t// Restore the original display value at the end of pure show/hide animations\n\t\t\t\tif ( !propTween ) {\n\t\t\t\t\tanim.done( function() {\n\t\t\t\t\t\tstyle.display = restoreDisplay;\n\t\t\t\t\t} );\n\t\t\t\t\tif ( restoreDisplay == null ) {\n\t\t\t\t\t\tdisplay = style.display;\n\t\t\t\t\t\trestoreDisplay = display === \"none\" ? \"\" : display;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstyle.display = \"inline-block\";\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tanim.always( function() {\n\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t} );\n\t}\n\n\t// Implement show/hide animations\n\tpropTween = false;\n\tfor ( prop in orig ) {\n\n\t\t// General show/hide setup for this element animation\n\t\tif ( !propTween ) {\n\t\t\tif ( dataShow ) {\n\t\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\t\thidden = dataShow.hidden;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdataShow = dataPriv.access( elem, \"fxshow\", { display: restoreDisplay } );\n\t\t\t}\n\n\t\t\t// Store hidden/visible for toggle so `.stop().toggle()` \"reverses\"\n\t\t\tif ( toggle ) {\n\t\t\t\tdataShow.hidden = !hidden;\n\t\t\t}\n\n\t\t\t// Show elements before animating them\n\t\t\tif ( hidden ) {\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t}\n\n\t\t\t/* eslint-disable no-loop-func */\n\n\t\t\tanim.done( function() {\n\n\t\t\t\t/* eslint-enable no-loop-func */\n\n\t\t\t\t// The final step of a \"hide\" animation is actually hiding the element\n\t\t\t\tif ( !hidden ) {\n\t\t\t\t\tshowHide( [ elem ] );\n\t\t\t\t}\n\t\t\t\tdataPriv.remove( elem, \"fxshow\" );\n\t\t\t\tfor ( prop in orig ) {\n\t\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Per-property setup\n\t\tpropTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\t\tif ( !( prop in dataShow ) ) {\n\t\t\tdataShow[ prop ] = propTween.start;\n\t\t\tif ( hidden ) {\n\t\t\t\tpropTween.end = propTween.start;\n\t\t\t\tpropTween.start = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar index, name, easing, value, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( Array.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// Not quite $.extend, this won't overwrite existing keys.\n\t\t\t// Reusing 'index' because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = Animation.prefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\n\t\t\t// Don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t} ),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\n\t\t\t\t// Support: Android 2.3 only\n\t\t\t\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (trac-12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ] );\n\n\t\t\t// If there's more to do, yield\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t}\n\n\t\t\t// If this was an empty animation, synthesize a final progress notification\n\t\t\tif ( !length ) {\n\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t}\n\n\t\t\t// Resolve the animation and report its conclusion\n\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\treturn false;\n\t\t},\n\t\tanimation = deferred.promise( {\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, {\n\t\t\t\tspecialEasing: {},\n\t\t\t\teasing: jQuery.easing._default\n\t\t\t}, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\n\t\t\t\t\t// If we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// Resolve when we played the last frame; otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t} ),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length; index++ ) {\n\t\tresult = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\tif ( isFunction( result.stop ) ) {\n\t\t\t\tjQuery._queueHooks( animation.elem, animation.opts.queue ).stop =\n\t\t\t\t\tresult.stop.bind( result );\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tjQuery.map( props, createTween, animation );\n\n\tif ( isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\t// Attach callbacks from options\n\tanimation\n\t\t.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t} )\n\t);\n\n\treturn animation;\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweeners: {\n\t\t\"*\": [ function( prop, value ) {\n\t\t\tvar tween = this.createTween( prop, value );\n\t\t\tadjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );\n\t\t\treturn tween;\n\t\t} ]\n\t},\n\n\ttweener: function( props, callback ) {\n\t\tif ( isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.match( rnothtmlwhite );\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\tAnimation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];\n\t\t\tAnimation.tweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilters: [ defaultPrefilter ],\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tAnimation.prefilters.unshift( callback );\n\t\t} else {\n\t\t\tAnimation.prefilters.push( callback );\n\t\t}\n\t}\n} );\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tisFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !isFunction( easing ) && easing\n\t};\n\n\t// Go to the end state if fx are off\n\tif ( jQuery.fx.off ) {\n\t\topt.duration = 0;\n\n\t} else {\n\t\tif ( typeof opt.duration !== \"number\" ) {\n\t\t\tif ( opt.duration in jQuery.fx.speeds ) {\n\t\t\t\topt.duration = jQuery.fx.speeds[ opt.duration ];\n\n\t\t\t} else {\n\t\t\t\topt.duration = jQuery.fx.speeds._default;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.fn.extend( {\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// Show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHiddenWithinTree ).css( \"opacity\", 0 ).show()\n\n\t\t\t// Animate to the value specified\n\t\t\t.end().animate( { opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || dataPriv.get( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\n\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = dataPriv.get( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this &&\n\t\t\t\t\t( type == null || timers[ index ].queue === type ) ) {\n\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Start the next in the queue if the last step wasn't forced.\n\t\t\t// Timers currently will call their complete callbacks, which\n\t\t\t// will dequeue but only if they were gotoEnd.\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t} );\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tvar index,\n\t\t\t\tdata = dataPriv.get( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// Enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// Empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\thooks.stop.call( this, true );\n\t\t\t}\n\n\t\t\t// Look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t} );\n\t}\n} );\n\njQuery.each( [ \"toggle\", \"show\", \"hide\" ], function( _i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n} );\n\n// Generate shortcuts for custom animations\njQuery.each( {\n\tslideDown: genFx( \"show\" ),\n\tslideUp: genFx( \"hide\" ),\n\tslideToggle: genFx( \"toggle\" ),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n} );\n\njQuery.timers = [];\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ti = 0,\n\t\ttimers = jQuery.timers;\n\n\tfxNow = Date.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\n\t\t// Run the timer and safely remove it when done (allowing for external removal)\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tjQuery.timers.push( timer );\n\tjQuery.fx.start();\n};\n\njQuery.fx.interval = 13;\njQuery.fx.start = function() {\n\tif ( inProgress ) {\n\t\treturn;\n\t}\n\n\tinProgress = true;\n\tschedule();\n};\n\njQuery.fx.stop = function() {\n\tinProgress = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\n\t// Default speed\n\t_default: 400\n};\n\n\n// Based off of the plugin by Clint Helfers, with permission.\njQuery.fn.delay = function( time, type ) {\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\ttype = type || \"fx\";\n\n\treturn this.queue( type, function( next, hooks ) {\n\t\tvar timeout = window.setTimeout( next, time );\n\t\thooks.stop = function() {\n\t\t\twindow.clearTimeout( timeout );\n\t\t};\n\t} );\n};\n\n\n( function() {\n\tvar input = document.createElement( \"input\" ),\n\t\tselect = document.createElement( \"select\" ),\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\n\n\tinput.type = \"checkbox\";\n\n\t// Support: Android <=4.3 only\n\t// Default value for a checkbox should be \"on\"\n\tsupport.checkOn = input.value !== \"\";\n\n\t// Support: IE <=11 only\n\t// Must access selectedIndex to make default options select\n\tsupport.optSelected = opt.selected;\n\n\t// Support: IE <=11 only\n\t// An input loses its value after becoming a radio\n\tinput = document.createElement( \"input\" );\n\tinput.value = \"t\";\n\tinput.type = \"radio\";\n\tsupport.radioValue = input.value === \"t\";\n} )();\n\n\nvar boolHook,\n\tattrHandle = jQuery.expr.attrHandle;\n\njQuery.fn.extend( {\n\tattr: function( name, value ) {\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tattr: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set attributes on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === \"undefined\" ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\t// Attribute hooks are determined by the lowercase version\n\t\t// Grab necessary hook if one is defined\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\thooks = jQuery.attrHooks[ name.toLowerCase() ] ||\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\treturn value;\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\tret = jQuery.find.attr( elem, name );\n\n\t\t// Non-existent attributes return null, we normalize to undefined\n\t\treturn ret == null ? undefined : ret;\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n\t\t\t\t\tnodeName( elem, \"input\" ) ) {\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name,\n\t\t\ti = 0,\n\n\t\t\t// Attribute names can contain non-HTML whitespace characters\n\t\t\t// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n\t\t\tattrNames = value && value.match( rnothtmlwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( ( name = attrNames[ i++ ] ) ) {\n\t\t\t\telem.removeAttribute( name );\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Hooks for boolean attributes\nboolHook = {\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else {\n\t\t\telem.setAttribute( name, name );\n\t\t}\n\t\treturn name;\n\t}\n};\n\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( _i, name ) {\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n\n\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\tvar ret, handle,\n\t\t\tlowercaseName = name.toLowerCase();\n\n\t\tif ( !isXML ) {\n\n\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\n\t\t\thandle = attrHandle[ lowercaseName ];\n\t\t\tattrHandle[ lowercaseName ] = ret;\n\t\t\tret = getter( elem, name, isXML ) != null ?\n\t\t\t\tlowercaseName :\n\t\t\t\tnull;\n\t\t\tattrHandle[ lowercaseName ] = handle;\n\t\t}\n\t\treturn ret;\n\t};\n} );\n\n\n\n\nvar rfocusable = /^(?:input|select|textarea|button)$/i,\n\trclickable = /^(?:a|area)$/i;\n\njQuery.fn.extend( {\n\tprop: function( name, value ) {\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set properties on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\treturn ( elem[ name ] = value );\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\treturn elem[ name ];\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\t// Support: IE <=9 - 11 only\n\t\t\t\t// elem.tabIndex doesn't always return the\n\t\t\t\t// correct value when it hasn't been explicitly set\n\t\t\t\t// Use proper attribute retrieval (trac-12072)\n\t\t\t\tvar tabindex = jQuery.find.attr( elem, \"tabindex\" );\n\n\t\t\t\tif ( tabindex ) {\n\t\t\t\t\treturn parseInt( tabindex, 10 );\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\trfocusable.test( elem.nodeName ) ||\n\t\t\t\t\trclickable.test( elem.nodeName ) &&\n\t\t\t\t\telem.href\n\t\t\t\t) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t},\n\n\tpropFix: {\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\"\n\t}\n} );\n\n// Support: IE <=11 only\n// Accessing the selectedIndex property\n// forces the browser to respect setting selected\n// on the option\n// The getter ensures a default option is selected\n// when in an optgroup\n// eslint rule \"no-unused-expressions\" is disabled for this code\n// since it considers such accessions noop\nif ( !support.optSelected ) {\n\tjQuery.propHooks.selected = {\n\t\tget: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent && parent.parentNode ) {\n\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tset: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent ) {\n\t\t\t\tparent.selectedIndex;\n\n\t\t\t\tif ( parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\njQuery.each( [\n\t\"tabIndex\",\n\t\"readOnly\",\n\t\"maxLength\",\n\t\"cellSpacing\",\n\t\"cellPadding\",\n\t\"rowSpan\",\n\t\"colSpan\",\n\t\"useMap\",\n\t\"frameBorder\",\n\t\"contentEditable\"\n], function() {\n\tjQuery.propFix[ this.toLowerCase() ] = this;\n} );\n\n\n\n\n\t// Strip and collapse whitespace according to HTML spec\n\t// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace\n\tfunction stripAndCollapse( value ) {\n\t\tvar tokens = value.match( rnothtmlwhite ) || [];\n\t\treturn tokens.join( \" \" );\n\t}\n\n\nfunction getClass( elem ) {\n\treturn elem.getAttribute && elem.getAttribute( \"class\" ) || \"\";\n}\n\nfunction classesToArray( value ) {\n\tif ( Array.isArray( value ) ) {\n\t\treturn value;\n\t}\n\tif ( typeof value === \"string\" ) {\n\t\treturn value.match( rnothtmlwhite ) || [];\n\t}\n\treturn [];\n}\n\njQuery.fn.extend( {\n\taddClass: function( value ) {\n\t\tvar classNames, cur, curValue, className, i, finalValue;\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tclassNames = classesToArray( value );\n\n\t\tif ( classNames.length ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tcurValue = getClass( this );\n\t\t\t\tcur = this.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n\t\t\t\t\t\tclassName = classNames[ i ];\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + className + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += className + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\tthis.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classNames, cur, curValue, className, i, finalValue;\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( !arguments.length ) {\n\t\t\treturn this.attr( \"class\", \"\" );\n\t\t}\n\n\t\tclassNames = classesToArray( value );\n\n\t\tif ( classNames.length ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tcurValue = getClass( this );\n\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = this.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n\t\t\t\t\t\tclassName = classNames[ i ];\n\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + className + \" \" ) > -1 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + className + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\tthis.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar classNames, className, i, self,\n\t\t\ttype = typeof value,\n\t\t\tisValidValue = type === \"string\" || Array.isArray( value );\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).toggleClass(\n\t\t\t\t\tvalue.call( this, i, getClass( this ), stateVal ),\n\t\t\t\t\tstateVal\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\n\t\tif ( typeof stateVal === \"boolean\" && isValidValue ) {\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t}\n\n\t\tclassNames = classesToArray( value );\n\n\t\treturn this.each( function() {\n\t\t\tif ( isValidValue ) {\n\n\t\t\t\t// Toggle individual class names\n\t\t\t\tself = jQuery( this );\n\n\t\t\t\tfor ( i = 0; i < classNames.length; i++ ) {\n\t\t\t\t\tclassName = classNames[ i ];\n\n\t\t\t\t\t// Check each className given, space separated list\n\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( value === undefined || type === \"boolean\" ) {\n\t\t\t\tclassName = getClass( this );\n\t\t\t\tif ( className ) {\n\n\t\t\t\t\t// Store className if set\n\t\t\t\t\tdataPriv.set( this, \"__className__\", className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed `false`,\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tif ( this.setAttribute ) {\n\t\t\t\t\tthis.setAttribute( \"class\",\n\t\t\t\t\t\tclassName || value === false ?\n\t\t\t\t\t\t\t\"\" :\n\t\t\t\t\t\t\tdataPriv.get( this, \"__className__\" ) || \"\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className, elem,\n\t\t\ti = 0;\n\n\t\tclassName = \" \" + selector + \" \";\n\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\tif ( elem.nodeType === 1 &&\n\t\t\t\t( \" \" + stripAndCollapse( getClass( elem ) ) + \" \" ).indexOf( className ) > -1 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n} );\n\n\n\n\nvar rreturn = /\\r/g;\n\njQuery.fn.extend( {\n\tval: function( value ) {\n\t\tvar hooks, ret, valueIsFunction,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] ||\n\t\t\t\t\tjQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks &&\n\t\t\t\t\t\"get\" in hooks &&\n\t\t\t\t\t( ret = hooks.get( elem, \"value\" ) ) !== undefined\n\t\t\t\t) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\t// Handle most common string cases\n\t\t\t\tif ( typeof ret === \"string\" ) {\n\t\t\t\t\treturn ret.replace( rreturn, \"\" );\n\t\t\t\t}\n\n\t\t\t\t// Handle cases where value is null/undef or number\n\t\t\t\treturn ret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tvalueIsFunction = isFunction( value );\n\n\t\treturn this.each( function( i ) {\n\t\t\tvar val;\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( valueIsFunction ) {\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\n\t\t\t} else if ( Array.isArray( val ) ) {\n\t\t\t\tval = jQuery.map( val, function( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !( \"set\" in hooks ) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n\t\t\t\treturn val != null ?\n\t\t\t\t\tval :\n\n\t\t\t\t\t// Support: IE <=10 - 11 only\n\t\t\t\t\t// option.text throws exceptions (trac-14686, trac-14858)\n\t\t\t\t\t// Strip and collapse whitespace\n\t\t\t\t\t// https://html.spec.whatwg.org/#strip-and-collapse-whitespace\n\t\t\t\t\tstripAndCollapse( jQuery.text( elem ) );\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option, i,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\",\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length;\n\n\t\t\t\tif ( index < 0 ) {\n\t\t\t\t\ti = max;\n\n\t\t\t\t} else {\n\t\t\t\t\ti = one ? index : 0;\n\t\t\t\t}\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t// IE8-9 doesn't update selected after form reset (trac-2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t!option.disabled &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled ||\n\t\t\t\t\t\t\t\t!nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar optionSet, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\ti = options.length;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t/* eslint-disable no-cond-assign */\n\n\t\t\t\t\tif ( option.selected =\n\t\t\t\t\t\tjQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\toptionSet = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* eslint-enable no-cond-assign */\n\t\t\t\t}\n\n\t\t\t\t// Force browsers to behave consistently when non-matching value is set\n\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Radios and checkboxes getter/setter\njQuery.each( [ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = {\n\t\tset: function( elem, value ) {\n\t\t\tif ( Array.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );\n\t\t\t}\n\t\t}\n\t};\n\tif ( !support.checkOn ) {\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\treturn elem.getAttribute( \"value\" ) === null ? \"on\" : elem.value;\n\t\t};\n\t}\n} );\n\n\n\n\n// Return jQuery for attributes-only inclusion\n\n\nsupport.focusin = \"onfocusin\" in window;\n\n\nvar rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\n\tstopPropagationCallback = function( e ) {\n\t\te.stopPropagation();\n\t};\n\njQuery.extend( jQuery.event, {\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\n\t\tvar i, cur, tmp, bubbleType, ontype, handle, special, lastElement,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split( \".\" ) : [];\n\n\t\tcur = lastElement = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf( \".\" ) > -1 ) {\n\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split( \".\" );\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf( \":\" ) < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\tevent.namespace = namespaces.join( \".\" );\n\t\tevent.rnamespace = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (trac-9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (trac-9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === ( elem.ownerDocument || document ) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tlastElement = cur;\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( dataPriv.get( cur, \"events\" ) || Object.create( null ) )[ event.type ] &&\n\t\t\t\tdataPriv.get( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && handle.apply && acceptData( cur ) ) {\n\t\t\t\tevent.result = handle.apply( cur, data );\n\t\t\t\tif ( event.result === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( ( !special._default ||\n\t\t\t\tspecial._default.apply( eventPath.pop(), data ) === false ) &&\n\t\t\t\tacceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name as the event.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (trac-6170)\n\t\t\t\tif ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\n\t\t\t\t\tif ( event.isPropagationStopped() ) {\n\t\t\t\t\t\tlastElement.addEventListener( type, stopPropagationCallback );\n\t\t\t\t\t}\n\n\t\t\t\t\telem[ type ]();\n\n\t\t\t\t\tif ( event.isPropagationStopped() ) {\n\t\t\t\t\t\tlastElement.removeEventListener( type, stopPropagationCallback );\n\t\t\t\t\t}\n\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\t// Piggyback on a donor event to simulate a different one\n\t// Used only for `focus(in | out)` events\n\tsimulate: function( type, elem, event ) {\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tisSimulated: true\n\t\t\t}\n\t\t);\n\n\t\tjQuery.event.trigger( e, null, elem );\n\t}\n\n} );\n\njQuery.fn.extend( {\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t} );\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[ 0 ];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n} );\n\n\n// Support: Firefox <=44\n// Firefox doesn't have focus(in | out) events\n// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787\n//\n// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1\n// focus(in | out) events fire after focus & blur events,\n// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order\n// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857\nif ( !support.focusin ) {\n\tjQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler on the document while someone wants focusin/focusout\n\t\tvar handler = function( event ) {\n\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );\n\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\n\t\t\t\t// Handle: regular nodes (via `this.ownerDocument`), window\n\t\t\t\t// (via `this.document`) & document (via `this`).\n\t\t\t\tvar doc = this.ownerDocument || this.document || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix );\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t\tdataPriv.access( doc, fix, ( attaches || 0 ) + 1 );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tvar doc = this.ownerDocument || this.document || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix ) - 1;\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\n\t\t\t\t\tdataPriv.remove( doc, fix );\n\n\t\t\t\t} else {\n\t\t\t\t\tdataPriv.access( doc, fix, attaches );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t} );\n}\nvar location = window.location;\n\nvar nonce = { guid: Date.now() };\n\nvar rquery = ( /\\?/ );\n\n\n\n// Cross-browser xml parsing\njQuery.parseXML = function( data ) {\n\tvar xml, parserErrorElem;\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE throws on parseFromString with invalid input.\n\ttry {\n\t\txml = ( new window.DOMParser() ).parseFromString( data, \"text/xml\" );\n\t} catch ( e ) {}\n\n\tparserErrorElem = xml && xml.getElementsByTagName( \"parsererror\" )[ 0 ];\n\tif ( !xml || parserErrorElem ) {\n\t\tjQuery.error( \"Invalid XML: \" + (\n\t\t\tparserErrorElem ?\n\t\t\t\tjQuery.map( parserErrorElem.childNodes, function( el ) {\n\t\t\t\t\treturn el.textContent;\n\t\t\t\t} ).join( \"\\n\" ) :\n\t\t\t\tdata\n\t\t) );\n\t}\n\treturn xml;\n};\n\n\nvar\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( Array.isArray( obj ) ) {\n\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams(\n\t\t\t\t\tprefix + \"[\" + ( typeof v === \"object\" && v != null ? i : \"\" ) + \"]\",\n\t\t\t\t\tv,\n\t\t\t\t\ttraditional,\n\t\t\t\t\tadd\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t} else if ( !traditional && toType( obj ) === \"object\" ) {\n\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\n// Serialize an array of form elements or a set of\n// key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, valueOrFunction ) {\n\n\t\t\t// If value is a function, invoke it and use its return value\n\t\t\tvar value = isFunction( valueOrFunction ) ?\n\t\t\t\tvalueOrFunction() :\n\t\t\t\tvalueOrFunction;\n\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" +\n\t\t\t\tencodeURIComponent( value == null ? \"\" : value );\n\t\t};\n\n\tif ( a == null ) {\n\t\treturn \"\";\n\t}\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t} );\n\n\t} else {\n\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" );\n};\n\njQuery.fn.extend( {\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map( function() {\n\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t} ).filter( function() {\n\t\t\tvar type = this.type;\n\n\t\t\t// Use .is( \":disabled\" ) so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n\t\t} ).map( function( _i, elem ) {\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\tif ( val == null ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( Array.isArray( val ) ) {\n\t\t\t\treturn jQuery.map( val, function( val ) {\n\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t} ).get();\n\t}\n} );\n\n\nvar\n\tr20 = /%20/g,\n\trhash = /#.*$/,\n\trantiCache = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\n\n\t// trac-7653, trac-8125, trac-8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (trac-10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat( \"*\" ),\n\n\t// Anchor tag for parsing the document origin\n\toriginAnchor = document.createElement( \"a\" );\n\noriginAnchor.href = location.href;\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];\n\n\t\tif ( isFunction( func ) ) {\n\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( ( dataType = dataTypes[ i++ ] ) ) {\n\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[ 0 ] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" &&\n\t\t\t\t!seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t} );\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes trac-9887\nfunction ajaxExtend( target, src ) {\n\tvar key, deep,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\n/* Handles responses to an ajax request:\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\n\tvar ct, type, finalDataType, firstDataType,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes;\n\n\t// Remove auto dataType and get content-type in the process\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader( \"Content-Type\" );\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[ 0 ] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n/* Chain conversions given the request and the original response\n * Also sets the responseXXX fields on the jqXHR instance\n */\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\tvar conv2, current, conv, tmp, prev,\n\t\tconverters = {},\n\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice();\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\tcurrent = dataTypes.shift();\n\n\t// Convert to each sequential dataType\n\twhile ( current ) {\n\n\t\tif ( s.responseFields[ current ] ) {\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t}\n\n\t\t// Apply the dataFilter if provided\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t}\n\n\t\tprev = current;\n\t\tcurrent = dataTypes.shift();\n\n\t\tif ( current ) {\n\n\t\t\t// There's only work to do if current dataType is non-auto\n\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\tcurrent = prev;\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s.throws ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tstate: \"parsererror\",\n\t\t\t\t\t\t\t\terror: conv ? e : \"No conversion from \" + prev + \" to \" + current\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n\njQuery.extend( {\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: location.href,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( location.protocol ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /\\bxml\\b/,\n\t\t\thtml: /\\bhtml/,\n\t\t\tjson: /\\bjson\\b/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\",\n\t\t\tjson: \"responseJSON\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": JSON.parse,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar transport,\n\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\n\t\t\t// Response headers\n\t\t\tresponseHeadersString,\n\t\t\tresponseHeaders,\n\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\n\t\t\t// Url cleanup var\n\t\t\turlAnchor,\n\n\t\t\t// Request state (becomes false upon send and true upon completion)\n\t\t\tcompleted,\n\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\n\t\t\t// Loop variable\n\t\t\ti,\n\n\t\t\t// uncached part of the url\n\t\t\tuncached,\n\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context &&\n\t\t\t\t( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\tjQuery.event,\n\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks( \"once memory\" ),\n\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( completed ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( ( match = rheaders.exec( responseHeadersString ) ) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[ 1 ].toLowerCase() + \" \" ] =\n\t\t\t\t\t\t\t\t\t( responseHeaders[ match[ 1 ].toLowerCase() + \" \" ] || [] )\n\t\t\t\t\t\t\t\t\t\t.concat( match[ 2 ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() + \" \" ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match.join( \", \" );\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn completed ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\tname = requestHeadersNames[ name.toLowerCase() ] =\n\t\t\t\t\t\t\trequestHeadersNames[ name.toLowerCase() ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( completed ) {\n\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Lazy-add the new callbacks in a way that preserves old ones\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR );\n\n\t\t// Add protocol if not provided (prefilters might expect it)\n\t\t// Handle falsy url in the settings object (trac-10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || location.href ) + \"\" )\n\t\t\t.replace( rprotocol, location.protocol + \"//\" );\n\n\t\t// Alias method option to type as per ticket trac-12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = ( s.dataType || \"*\" ).toLowerCase().match( rnothtmlwhite ) || [ \"\" ];\n\n\t\t// A cross-domain request is in order when the origin doesn't match the current origin.\n\t\tif ( s.crossDomain == null ) {\n\t\t\turlAnchor = document.createElement( \"a\" );\n\n\t\t\t// Support: IE <=8 - 11, Edge 12 - 15\n\t\t\t// IE throws exception on accessing the href property if url is malformed,\n\t\t\t// e.g. http://example.com:80x/\n\t\t\ttry {\n\t\t\t\turlAnchor.href = s.url;\n\n\t\t\t\t// Support: IE <=8 - 11 only\n\t\t\t\t// Anchor's host property isn't correctly set when s.url is relative\n\t\t\t\turlAnchor.href = urlAnchor.href;\n\t\t\t\ts.crossDomain = originAnchor.protocol + \"//\" + originAnchor.host !==\n\t\t\t\t\turlAnchor.protocol + \"//\" + urlAnchor.host;\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// If there is an error parsing the URL, assume it is crossDomain,\n\t\t\t\t// it can be rejected by the transport if it is invalid\n\t\t\t\ts.crossDomain = true;\n\t\t\t}\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( completed ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (trac-15118)\n\t\tfireGlobals = jQuery.event && s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger( \"ajaxStart\" );\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\t// Remove hash to simplify url manipulation\n\t\tcacheURL = s.url.replace( rhash, \"\" );\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// Remember the hash so we can put it back\n\t\t\tuncached = s.url.slice( cacheURL.length );\n\n\t\t\t// If data is available and should be processed, append data to url\n\t\t\tif ( s.data && ( s.processData || typeof s.data === \"string\" ) ) {\n\t\t\t\tcacheURL += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data;\n\n\t\t\t\t// trac-9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add or update anti-cache param if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\tcacheURL = cacheURL.replace( rantiCache, \"$1\" );\n\t\t\t\tuncached = ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ( nonce.guid++ ) +\n\t\t\t\t\tuncached;\n\t\t\t}\n\n\t\t\t// Put hash and anti-cache on the URL that will be requested (gh-1732)\n\t\t\ts.url = cacheURL + uncached;\n\n\t\t// Change '%20' to '+' if this is encoded form body content (gh-2658)\n\t\t} else if ( s.data && s.processData &&\n\t\t\t( s.contentType || \"\" ).indexOf( \"application/x-www-form-urlencoded\" ) === 0 ) {\n\t\t\ts.data = s.data.replace( r20, \"+\" );\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[ 0 ] ] +\n\t\t\t\t\t( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend &&\n\t\t\t( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {\n\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// Aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tcompleteDeferred.add( s.complete );\n\t\tjqXHR.done( s.success );\n\t\tjqXHR.fail( s.error );\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\n\t\t\t// If request was aborted inside ajaxSend, stop there\n\t\t\tif ( completed ) {\n\t\t\t\treturn jqXHR;\n\t\t\t}\n\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = window.setTimeout( function() {\n\t\t\t\t\tjqXHR.abort( \"timeout\" );\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tcompleted = false;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// Rethrow post-completion exceptions\n\t\t\t\tif ( completed ) {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\n\t\t\t\t// Propagate others as results\n\t\t\t\tdone( -1, e );\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Ignore repeat invocations\n\t\t\tif ( completed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcompleted = true;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\twindow.clearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Determine if successful\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// Use a noop converter for missing script but not if jsonp\n\t\t\tif ( !isSuccess &&\n\t\t\t\tjQuery.inArray( \"script\", s.dataTypes ) > -1 &&\n\t\t\t\tjQuery.inArray( \"json\", s.dataTypes ) < 0 ) {\n\t\t\t\ts.converters[ \"text script\" ] = function() {};\n\t\t\t}\n\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( isSuccess ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"Last-Modified\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"etag\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\terror = response.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// Extract error from statusText and normalize for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger( \"ajaxStop\" );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t}\n} );\n\njQuery.each( [ \"get\", \"post\" ], function( _i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\n\t\t// Shift arguments if data argument was omitted\n\t\tif ( isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\t// The url can be an options object (which then must have .url)\n\t\treturn jQuery.ajax( jQuery.extend( {\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t}, jQuery.isPlainObject( url ) && url ) );\n\t};\n} );\n\njQuery.ajaxPrefilter( function( s ) {\n\tvar i;\n\tfor ( i in s.headers ) {\n\t\tif ( i.toLowerCase() === \"content-type\" ) {\n\t\t\ts.contentType = s.headers[ i ] || \"\";\n\t\t}\n\t}\n} );\n\n\njQuery._evalUrl = function( url, options, doc ) {\n\treturn jQuery.ajax( {\n\t\turl: url,\n\n\t\t// Make this explicit, since user can override this through ajaxSetup (trac-11264)\n\t\ttype: \"GET\",\n\t\tdataType: \"script\",\n\t\tcache: true,\n\t\tasync: false,\n\t\tglobal: false,\n\n\t\t// Only evaluate the response if it is successful (gh-4126)\n\t\t// dataFilter is not invoked for failure responses, so using it instead\n\t\t// of the default converter is kludgy but it works.\n\t\tconverters: {\n\t\t\t\"text script\": function() {}\n\t\t},\n\t\tdataFilter: function( response ) {\n\t\t\tjQuery.globalEval( response, options, doc );\n\t\t}\n\t} );\n};\n\n\njQuery.fn.extend( {\n\twrapAll: function( html ) {\n\t\tvar wrap;\n\n\t\tif ( this[ 0 ] ) {\n\t\t\tif ( isFunction( html ) ) {\n\t\t\t\thtml = html.call( this[ 0 ] );\n\t\t\t}\n\n\t\t\t// The elements to wrap the target around\n\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t}\n\n\t\t\twrap.map( function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstElementChild ) {\n\t\t\t\t\telem = elem.firstElementChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t} ).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( isFunction( html ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).wrapInner( html.call( this, i ) );\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t} );\n\t},\n\n\twrap: function( html ) {\n\t\tvar htmlIsFunction = isFunction( html );\n\n\t\treturn this.each( function( i ) {\n\t\t\tjQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );\n\t\t} );\n\t},\n\n\tunwrap: function( selector ) {\n\t\tthis.parent( selector ).not( \"body\" ).each( function() {\n\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t} );\n\t\treturn this;\n\t}\n} );\n\n\njQuery.expr.pseudos.hidden = function( elem ) {\n\treturn !jQuery.expr.pseudos.visible( elem );\n};\njQuery.expr.pseudos.visible = function( elem ) {\n\treturn !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );\n};\n\n\n\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch ( e ) {}\n};\n\nvar xhrSuccessStatus = {\n\n\t\t// File protocol always yields status code 0, assume 200\n\t\t0: 200,\n\n\t\t// Support: IE <=9 only\n\t\t// trac-1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport( function( options ) {\n\tvar callback, errorCallback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr();\n\n\t\t\t\txhr.open(\n\t\t\t\t\toptions.type,\n\t\t\t\t\toptions.url,\n\t\t\t\t\toptions.async,\n\t\t\t\t\toptions.username,\n\t\t\t\t\toptions.password\n\t\t\t\t);\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback = errorCallback = xhr.onload =\n\t\t\t\t\t\t\t\txhr.onerror = xhr.onabort = xhr.ontimeout =\n\t\t\t\t\t\t\t\t\txhr.onreadystatechange = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\n\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t// On a manual native abort, IE9 throws\n\t\t\t\t\t\t\t\t// errors on any property access that is not readyState\n\t\t\t\t\t\t\t\tif ( typeof xhr.status !== \"number\" ) {\n\t\t\t\t\t\t\t\t\tcomplete( 0, \"error\" );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcomplete(\n\n\t\t\t\t\t\t\t\t\t\t// File: protocol always yields status 0; see trac-8605, trac-14207\n\t\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\n\t\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t\t// IE9 has no XHR2 but throws on binary (trac-11426)\n\t\t\t\t\t\t\t\t\t// For XHR2 non-text, let the caller handle it (gh-2498)\n\t\t\t\t\t\t\t\t\t( xhr.responseType || \"text\" ) !== \"text\"  ||\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText !== \"string\" ?\n\t\t\t\t\t\t\t\t\t\t{ binary: xhr.response } :\n\t\t\t\t\t\t\t\t\t\t{ text: xhr.responseText },\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\terrorCallback = xhr.onerror = xhr.ontimeout = callback( \"error\" );\n\n\t\t\t\t// Support: IE 9 only\n\t\t\t\t// Use onreadystatechange to replace onabort\n\t\t\t\t// to handle uncaught aborts\n\t\t\t\tif ( xhr.onabort !== undefined ) {\n\t\t\t\t\txhr.onabort = errorCallback;\n\t\t\t\t} else {\n\t\t\t\t\txhr.onreadystatechange = function() {\n\n\t\t\t\t\t\t// Check readyState before timeout as it changes\n\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n\n\t\t\t\t\t\t\t// Allow onerror to be called first,\n\t\t\t\t\t\t\t// but that will not handle a native abort\n\t\t\t\t\t\t\t// Also, save errorCallback to a variable\n\t\t\t\t\t\t\t// as xhr.onerror cannot be accessed\n\t\t\t\t\t\t\twindow.setTimeout( function() {\n\t\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\t\terrorCallback();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = callback( \"abort\" );\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t// trac-14683: Only rethrow if this hasn't been notified as an error yet\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\n// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)\njQuery.ajaxPrefilter( function( s ) {\n\tif ( s.crossDomain ) {\n\t\ts.contents.script = false;\n\t}\n} );\n\n// Install script dataType\njQuery.ajaxSetup( {\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, \" +\n\t\t\t\"application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /\\b(?:java|ecma)script\\b/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n} );\n\n// Handle cache's special case and crossDomain\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t}\n} );\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function( s ) {\n\n\t// This transport only deals with cross domain or forced-by-attrs requests\n\tif ( s.crossDomain || s.scriptAttrs ) {\n\t\tvar script, callback;\n\t\treturn {\n\t\t\tsend: function( _, complete ) {\n\t\t\t\tscript = jQuery( \"<script>\" )\n\t\t\t\t\t.attr( s.scriptAttrs || {} )\n\t\t\t\t\t.prop( { charset: s.scriptCharset, src: s.url } )\n\t\t\t\t\t.on( \"load error\", callback = function( evt ) {\n\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t\tcallback = null;\n\t\t\t\t\t\tif ( evt ) {\n\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t// Use native DOM manipulation to avoid our domManip AJAX trickery\n\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n\t\t\t},\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup( {\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce.guid++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n} );\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" &&\n\t\t\t\t( s.contentType || \"\" )\n\t\t\t\t\t.indexOf( \"application/x-www-form-urlencoded\" ) === 0 &&\n\t\t\t\trjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[ \"script json\" ] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// Force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always( function() {\n\n\t\t\t// If previous value didn't exist - remove it\n\t\t\tif ( overwritten === undefined ) {\n\t\t\t\tjQuery( window ).removeProp( callbackName );\n\n\t\t\t// Otherwise restore preexisting value\n\t\t\t} else {\n\t\t\t\twindow[ callbackName ] = overwritten;\n\t\t\t}\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\n\t\t\t\t// Make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// Save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t} );\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n} );\n\n\n\n\n// Support: Safari 8 only\n// In Safari 8 documents created via document.implementation.createHTMLDocument\n// collapse sibling forms: the second one becomes a child of the first one.\n// Because of that, this security measure has to be disabled in Safari 8.\n// https://bugs.webkit.org/show_bug.cgi?id=137337\nsupport.createHTMLDocument = ( function() {\n\tvar body = document.implementation.createHTMLDocument( \"\" ).body;\n\tbody.innerHTML = \"<form></form><form></form>\";\n\treturn body.childNodes.length === 2;\n} )();\n\n\n// Argument \"data\" should be string of html\n// context (optional): If specified, the fragment will be created in this context,\n// defaults to document\n// keepScripts (optional): If true, will include scripts passed in the html string\njQuery.parseHTML = function( data, context, keepScripts ) {\n\tif ( typeof data !== \"string\" ) {\n\t\treturn [];\n\t}\n\tif ( typeof context === \"boolean\" ) {\n\t\tkeepScripts = context;\n\t\tcontext = false;\n\t}\n\n\tvar base, parsed, scripts;\n\n\tif ( !context ) {\n\n\t\t// Stop scripts or inline event handlers from being executed immediately\n\t\t// by using document.implementation\n\t\tif ( support.createHTMLDocument ) {\n\t\t\tcontext = document.implementation.createHTMLDocument( \"\" );\n\n\t\t\t// Set the base href for the created document\n\t\t\t// so any parsed elements with URLs\n\t\t\t// are based on the document's URL (gh-2965)\n\t\t\tbase = context.createElement( \"base\" );\n\t\t\tbase.href = document.location.href;\n\t\t\tcontext.head.appendChild( base );\n\t\t} else {\n\t\t\tcontext = document;\n\t\t}\n\t}\n\n\tparsed = rsingleTag.exec( data );\n\tscripts = !keepScripts && [];\n\n\t// Single tag\n\tif ( parsed ) {\n\t\treturn [ context.createElement( parsed[ 1 ] ) ];\n\t}\n\n\tparsed = buildFragment( [ data ], context, scripts );\n\n\tif ( scripts && scripts.length ) {\n\t\tjQuery( scripts ).remove();\n\t}\n\n\treturn jQuery.merge( [], parsed.childNodes );\n};\n\n\n/**\n * Load a url into a page\n */\njQuery.fn.load = function( url, params, callback ) {\n\tvar selector, type, response,\n\t\tself = this,\n\t\toff = url.indexOf( \" \" );\n\n\tif ( off > -1 ) {\n\t\tselector = stripAndCollapse( url.slice( off ) );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax( {\n\t\t\turl: url,\n\n\t\t\t// If \"type\" variable is undefined, then \"GET\" method will be used.\n\t\t\t// Make value of this field explicit since\n\t\t\t// user can override it through ajaxSetup method\n\t\t\ttype: type || \"GET\",\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t} ).done( function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery( \"<div>\" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t// If the request succeeds, this function gets \"data\", \"status\", \"jqXHR\"\n\t\t// but they are ignored because response was set above.\n\t\t// If it fails, this function gets \"jqXHR\", \"status\", \"error\"\n\t\t} ).always( callback && function( jqXHR, status ) {\n\t\t\tself.each( function() {\n\t\t\t\tcallback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t\t} );\n\t\t} );\n\t}\n\n\treturn this;\n};\n\n\n\n\njQuery.expr.pseudos.animated = function( elem ) {\n\treturn jQuery.grep( jQuery.timers, function( fn ) {\n\t\treturn elem === fn.elem;\n\t} ).length;\n};\n\n\n\n\njQuery.offset = {\n\tsetOffset: function( elem, options, i ) {\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\tcurElem = jQuery( elem ),\n\t\t\tprops = {};\n\n\t\t// Set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tcurOffset = curElem.offset();\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n\t\t\t( curCSSTop + curCSSLeft ).indexOf( \"auto\" ) > -1;\n\n\t\t// Need to be able to calculate position if either\n\t\t// top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( isFunction( options ) ) {\n\n\t\t\t// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)\n\t\t\toptions = options.call( elem, i, jQuery.extend( {}, curOffset ) );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\njQuery.fn.extend( {\n\n\t// offset() relates an element's border box to the document origin\n\toffset: function( options ) {\n\n\t\t// Preserve chaining for setter\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each( function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t} );\n\t\t}\n\n\t\tvar rect, win,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !elem ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return zeros for disconnected and hidden (display: none) elements (gh-2310)\n\t\t// Support: IE <=11 only\n\t\t// Running getBoundingClientRect on a\n\t\t// disconnected node in IE throws an error\n\t\tif ( !elem.getClientRects().length ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\t// Get document-relative position by adding viewport scroll to viewport-relative gBCR\n\t\trect = elem.getBoundingClientRect();\n\t\twin = elem.ownerDocument.defaultView;\n\t\treturn {\n\t\t\ttop: rect.top + win.pageYOffset,\n\t\t\tleft: rect.left + win.pageXOffset\n\t\t};\n\t},\n\n\t// position() relates an element's margin box to its offset parent's padding box\n\t// This corresponds to the behavior of CSS absolute positioning\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset, doc,\n\t\t\telem = this[ 0 ],\n\t\t\tparentOffset = { top: 0, left: 0 };\n\n\t\t// position:fixed elements are offset from the viewport, which itself always has zero offset\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\n\t\t\t// Assume position:fixed implies availability of getBoundingClientRect\n\t\t\toffset = elem.getBoundingClientRect();\n\n\t\t} else {\n\t\t\toffset = this.offset();\n\n\t\t\t// Account for the *real* offset parent, which can be the document or its root element\n\t\t\t// when a statically positioned element is identified\n\t\t\tdoc = elem.ownerDocument;\n\t\t\toffsetParent = elem.offsetParent || doc.documentElement;\n\t\t\twhile ( offsetParent &&\n\t\t\t\t( offsetParent === doc.body || offsetParent === doc.documentElement ) &&\n\t\t\t\tjQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\n\t\t\t\toffsetParent = offsetParent.parentNode;\n\t\t\t}\n\t\t\tif ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {\n\n\t\t\t\t// Incorporate borders into its offset, since they are outside its content origin\n\t\t\t\tparentOffset = jQuery( offsetParent ).offset();\n\t\t\t\tparentOffset.top += jQuery.css( offsetParent, \"borderTopWidth\", true );\n\t\t\t\tparentOffset.left += jQuery.css( offsetParent, \"borderLeftWidth\", true );\n\t\t\t}\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\treturn {\n\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t};\n\t},\n\n\t// This method will return documentElement in the following cases:\n\t// 1) For the element inside the iframe without offsetParent, this method will return\n\t//    documentElement of the parent window\n\t// 2) For the hidden or detached element\n\t// 3) For body or html element, i.e. in case of the html node - it will return itself\n\t//\n\t// but those exceptions were never presented as a real life use-cases\n\t// and might be considered as more preferable results.\n\t//\n\t// This logic, however, is not guaranteed and can change at any point in the future\n\toffsetParent: function() {\n\t\treturn this.map( function() {\n\t\t\tvar offsetParent = this.offsetParent;\n\n\t\t\twhile ( offsetParent && jQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\n\t\t\treturn offsetParent || documentElement;\n\t\t} );\n\t}\n} );\n\n// Create scrollLeft and scrollTop methods\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n\tvar top = \"pageYOffset\" === prop;\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn access( this, function( elem, method, val ) {\n\n\t\t\t// Coalesce documents and windows\n\t\t\tvar win;\n\t\t\tif ( isWindow( elem ) ) {\n\t\t\t\twin = elem;\n\t\t\t} else if ( elem.nodeType === 9 ) {\n\t\t\t\twin = elem.defaultView;\n\t\t\t}\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : win.pageXOffset,\n\t\t\t\t\ttop ? val : win.pageYOffset\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length );\n\t};\n} );\n\n// Support: Safari <=7 - 9.1, Chrome <=37 - 49\n// Add the top/left cssHooks using jQuery.fn.position\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347\n// getComputedStyle returns percent when specified for top/left/bottom/right;\n// rather than make the css module depend on the offset module, just check for it here\njQuery.each( [ \"top\", \"left\" ], function( _i, prop ) {\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n\t\tfunction( elem, computed ) {\n\t\t\tif ( computed ) {\n\t\t\t\tcomputed = curCSS( elem, prop );\n\n\t\t\t\t// If curCSS returns percentage, fallback to offset\n\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\tcomputed;\n\t\t\t}\n\t\t}\n\t);\n} );\n\n\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( {\n\t\tpadding: \"inner\" + name,\n\t\tcontent: type,\n\t\t\"\": \"outer\" + name\n\t}, function( defaultExtra, funcName ) {\n\n\t\t// Margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( isWindow( elem ) ) {\n\n\t\t\t\t\t// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)\n\t\t\t\t\treturn funcName.indexOf( \"outer\" ) === 0 ?\n\t\t\t\t\t\telem[ \"inner\" + name ] :\n\t\t\t\t\t\telem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t// whichever is greatest\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable );\n\t\t};\n\t} );\n} );\n\n\njQuery.each( [\n\t\"ajaxStart\",\n\t\"ajaxStop\",\n\t\"ajaxComplete\",\n\t\"ajaxError\",\n\t\"ajaxSuccess\",\n\t\"ajaxSend\"\n], function( _i, type ) {\n\tjQuery.fn[ type ] = function( fn ) {\n\t\treturn this.on( type, fn );\n\t};\n} );\n\n\n\n\njQuery.fn.extend( {\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ?\n\t\t\tthis.off( selector, \"**\" ) :\n\t\t\tthis.off( types, selector || \"**\", fn );\n\t},\n\n\thover: function( fnOver, fnOut ) {\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n\t}\n} );\n\njQuery.each(\n\t( \"blur focus focusin focusout resize scroll click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup contextmenu\" ).split( \" \" ),\n\tfunction( _i, name ) {\n\n\t\t// Handle event binding\n\t\tjQuery.fn[ name ] = function( data, fn ) {\n\t\t\treturn arguments.length > 0 ?\n\t\t\t\tthis.on( name, null, data, fn ) :\n\t\t\t\tthis.trigger( name );\n\t\t};\n\t}\n);\n\n\n\n\n// Support: Android <=4.0 only\n// Make sure we trim BOM and NBSP\n// Require that the \"whitespace run\" starts from a non-whitespace\n// to avoid O(N^2) behavior when the engine would try matching \"\\s+$\" at each space position.\nvar rtrim = /^[\\s\\uFEFF\\xA0]+|([^\\s\\uFEFF\\xA0])[\\s\\uFEFF\\xA0]+$/g;\n\n// Bind a function to a context, optionally partially applying any\n// arguments.\n// jQuery.proxy is deprecated to promote standards (specifically Function#bind)\n// However, it is not slated for removal any time soon\njQuery.proxy = function( fn, context ) {\n\tvar tmp, args, proxy;\n\n\tif ( typeof context === \"string\" ) {\n\t\ttmp = fn[ context ];\n\t\tcontext = fn;\n\t\tfn = tmp;\n\t}\n\n\t// Quick check to determine if target is callable, in the spec\n\t// this throws a TypeError, but we will just return undefined.\n\tif ( !isFunction( fn ) ) {\n\t\treturn undefined;\n\t}\n\n\t// Simulated bind\n\targs = slice.call( arguments, 2 );\n\tproxy = function() {\n\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n\t};\n\n\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\treturn proxy;\n};\n\njQuery.holdReady = function( hold ) {\n\tif ( hold ) {\n\t\tjQuery.readyWait++;\n\t} else {\n\t\tjQuery.ready( true );\n\t}\n};\njQuery.isArray = Array.isArray;\njQuery.parseJSON = JSON.parse;\njQuery.nodeName = nodeName;\njQuery.isFunction = isFunction;\njQuery.isWindow = isWindow;\njQuery.camelCase = camelCase;\njQuery.type = toType;\n\njQuery.now = Date.now;\n\njQuery.isNumeric = function( obj ) {\n\n\t// As of jQuery 3.0, isNumeric is limited to\n\t// strings and numbers (primitives or objects)\n\t// that can be coerced to finite numbers (gh-2662)\n\tvar type = jQuery.type( obj );\n\treturn ( type === \"number\" || type === \"string\" ) &&\n\n\t\t// parseFloat NaNs numeric-cast false positives (\"\")\n\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t\t// subtraction forces infinities to NaN\n\t\t!isNaN( obj - parseFloat( obj ) );\n};\n\njQuery.trim = function( text ) {\n\treturn text == null ?\n\t\t\"\" :\n\t\t( text + \"\" ).replace( rtrim, \"$1\" );\n};\n\n\n\n// Register as a named AMD module, since jQuery can be concatenated with other\n// files that may use define, but not via a proper concatenation script that\n// understands anonymous AMD modules. A named AMD is safest and most robust\n// way to register. Lowercase jquery is used because AMD module names are\n// derived from file names, and jQuery is normally delivered in a lowercase\n// file name. Do this after creating the global so that if an AMD module wants\n// to call noConflict to hide this version of jQuery, it will work.\n\n// Note that for maximum portability, libraries that are not jQuery should\n// declare themselves as anonymous modules, and avoid setting a global if an\n// AMD loader is present. jQuery is a special case. For more information, see\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\n\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine( \"jquery\", [], function() {\n\t\treturn jQuery;\n\t} );\n}\n\n\n\n\nvar\n\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$;\n\njQuery.noConflict = function( deep ) {\n\tif ( window.$ === jQuery ) {\n\t\twindow.$ = _$;\n\t}\n\n\tif ( deep && window.jQuery === jQuery ) {\n\t\twindow.jQuery = _jQuery;\n\t}\n\n\treturn jQuery;\n};\n\n// Expose jQuery and $ identifiers, even in AMD\n// (trac-7102#comment:10, https://github.com/jquery/jquery/pull/557)\n// and CommonJS for browser emulators (trac-13566)\nif ( typeof noGlobal === \"undefined\" ) {\n\twindow.jQuery = window.$ = jQuery;\n}\n\n\n\n\nreturn jQuery;\n} );\n","//     Backbone.js 1.4.1\n\n//     (c) 2010-2022 Jeremy Ashkenas and DocumentCloud\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n(function(factory) {\n\n  // Establish the root object, `window` (`self`) in the browser, or `global` on the server.\n  // We use `self` instead of `window` for `WebWorker` support.\n  var root = typeof self == 'object' && self.self === self && self ||\n            typeof global == 'object' && global.global === global && global;\n\n  // Set up Backbone appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Backbone.\n      root.Backbone = factory(root, exports, _, $);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('underscore'), $;\n    try { $ = require('jquery'); } catch (e) {}\n    factory(root, exports, _, $);\n\n  // Finally, as a browser global.\n  } else {\n    root.Backbone = factory(root, {}, root._, root.jQuery || root.Zepto || root.ender || root.$);\n  }\n\n})(function(root, Backbone, _, $) {\n\n  // Initial Setup\n  // -------------\n\n  // Save the previous value of the `Backbone` variable, so that it can be\n  // restored later on, if `noConflict` is used.\n  var previousBackbone = root.Backbone;\n\n  // Create a local reference to a common array method we'll want to use later.\n  var slice = Array.prototype.slice;\n\n  // Current version of the library. Keep in sync with `package.json`.\n  Backbone.VERSION = '1.4.1';\n\n  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns\n  // the `$` variable.\n  Backbone.$ = $;\n\n  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable\n  // to its previous owner. Returns a reference to this Backbone object.\n  Backbone.noConflict = function() {\n    root.Backbone = previousBackbone;\n    return this;\n  };\n\n  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n  // will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n  // set a `X-Http-Method-Override` header.\n  Backbone.emulateHTTP = false;\n\n  // Turn on `emulateJSON` to support legacy servers that can't deal with direct\n  // `application/json` requests ... this will encode the body as\n  // `application/x-www-form-urlencoded` instead and will send the model in a\n  // form param named `model`.\n  Backbone.emulateJSON = false;\n\n  // Backbone.Events\n  // ---------------\n\n  // A module that can be mixed in to *any object* in order to provide it with\n  // a custom event channel. You may bind a callback to an event with `on` or\n  // remove with `off`; `trigger`-ing an event fires all callbacks in\n  // succession.\n  //\n  //     var object = {};\n  //     _.extend(object, Backbone.Events);\n  //     object.on('expand', function(){ alert('expanded'); });\n  //     object.trigger('expand');\n  //\n  var Events = Backbone.Events = {};\n\n  // Regular expression used to split event strings.\n  var eventSplitter = /\\s+/;\n\n  // A private global variable to share between listeners and listenees.\n  var _listening;\n\n  // Iterates over the standard `event, callback` (as well as the fancy multiple\n  // space-separated events `\"change blur\", callback` and jQuery-style event\n  // maps `{event: callback}`).\n  var eventsApi = function(iteratee, events, name, callback, opts) {\n    var i = 0, names;\n    if (name && typeof name === 'object') {\n      // Handle event maps.\n      if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;\n      for (names = _.keys(name); i < names.length ; i++) {\n        events = eventsApi(iteratee, events, names[i], name[names[i]], opts);\n      }\n    } else if (name && eventSplitter.test(name)) {\n      // Handle space-separated event names by delegating them individually.\n      for (names = name.split(eventSplitter); i < names.length; i++) {\n        events = iteratee(events, names[i], callback, opts);\n      }\n    } else {\n      // Finally, standard events.\n      events = iteratee(events, name, callback, opts);\n    }\n    return events;\n  };\n\n  // Bind an event to a `callback` function. Passing `\"all\"` will bind\n  // the callback to all events fired.\n  Events.on = function(name, callback, context) {\n    this._events = eventsApi(onApi, this._events || {}, name, callback, {\n      context: context,\n      ctx: this,\n      listening: _listening\n    });\n\n    if (_listening) {\n      var listeners = this._listeners || (this._listeners = {});\n      listeners[_listening.id] = _listening;\n      // Allow the listening to use a counter, instead of tracking\n      // callbacks for library interop\n      _listening.interop = false;\n    }\n\n    return this;\n  };\n\n  // Inversion-of-control versions of `on`. Tell *this* object to listen to\n  // an event in another object... keeping track of what it's listening to\n  // for easier unbinding later.\n  Events.listenTo = function(obj, name, callback) {\n    if (!obj) return this;\n    var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n    var listeningTo = this._listeningTo || (this._listeningTo = {});\n    var listening = _listening = listeningTo[id];\n\n    // This object is not listening to any other events on `obj` yet.\n    // Setup the necessary references to track the listening callbacks.\n    if (!listening) {\n      this._listenId || (this._listenId = _.uniqueId('l'));\n      listening = _listening = listeningTo[id] = new Listening(this, obj);\n    }\n\n    // Bind callbacks on obj.\n    var error = tryCatchOn(obj, name, callback, this);\n    _listening = void 0;\n\n    if (error) throw error;\n    // If the target obj is not Backbone.Events, track events manually.\n    if (listening.interop) listening.on(name, callback);\n\n    return this;\n  };\n\n  // The reducing API that adds a callback to the `events` object.\n  var onApi = function(events, name, callback, options) {\n    if (callback) {\n      var handlers = events[name] || (events[name] = []);\n      var context = options.context, ctx = options.ctx, listening = options.listening;\n      if (listening) listening.count++;\n\n      handlers.push({callback: callback, context: context, ctx: context || ctx, listening: listening});\n    }\n    return events;\n  };\n\n  // An try-catch guarded #on function, to prevent poisoning the global\n  // `_listening` variable.\n  var tryCatchOn = function(obj, name, callback, context) {\n    try {\n      obj.on(name, callback, context);\n    } catch (e) {\n      return e;\n    }\n  };\n\n  // Remove one or many callbacks. If `context` is null, removes all\n  // callbacks with that function. If `callback` is null, removes all\n  // callbacks for the event. If `name` is null, removes all bound\n  // callbacks for all events.\n  Events.off = function(name, callback, context) {\n    if (!this._events) return this;\n    this._events = eventsApi(offApi, this._events, name, callback, {\n      context: context,\n      listeners: this._listeners\n    });\n\n    return this;\n  };\n\n  // Tell this object to stop listening to either specific events ... or\n  // to every object it's currently listening to.\n  Events.stopListening = function(obj, name, callback) {\n    var listeningTo = this._listeningTo;\n    if (!listeningTo) return this;\n\n    var ids = obj ? [obj._listenId] : _.keys(listeningTo);\n    for (var i = 0; i < ids.length; i++) {\n      var listening = listeningTo[ids[i]];\n\n      // If listening doesn't exist, this object is not currently\n      // listening to obj. Break out early.\n      if (!listening) break;\n\n      listening.obj.off(name, callback, this);\n      if (listening.interop) listening.off(name, callback);\n    }\n    if (_.isEmpty(listeningTo)) this._listeningTo = void 0;\n\n    return this;\n  };\n\n  // The reducing API that removes a callback from the `events` object.\n  var offApi = function(events, name, callback, options) {\n    if (!events) return;\n\n    var context = options.context, listeners = options.listeners;\n    var i = 0, names;\n\n    // Delete all event listeners and \"drop\" events.\n    if (!name && !context && !callback) {\n      for (names = _.keys(listeners); i < names.length; i++) {\n        listeners[names[i]].cleanup();\n      }\n      return;\n    }\n\n    names = name ? [name] : _.keys(events);\n    for (; i < names.length; i++) {\n      name = names[i];\n      var handlers = events[name];\n\n      // Bail out if there are no events stored.\n      if (!handlers) break;\n\n      // Find any remaining events.\n      var remaining = [];\n      for (var j = 0; j < handlers.length; j++) {\n        var handler = handlers[j];\n        if (\n          callback && callback !== handler.callback &&\n            callback !== handler.callback._callback ||\n              context && context !== handler.context\n        ) {\n          remaining.push(handler);\n        } else {\n          var listening = handler.listening;\n          if (listening) listening.off(name, callback);\n        }\n      }\n\n      // Replace events if there are any remaining.  Otherwise, clean up.\n      if (remaining.length) {\n        events[name] = remaining;\n      } else {\n        delete events[name];\n      }\n    }\n\n    return events;\n  };\n\n  // Bind an event to only be triggered a single time. After the first time\n  // the callback is invoked, its listener will be removed. If multiple events\n  // are passed in using the space-separated syntax, the handler will fire\n  // once for each event, not once for a combination of all events.\n  Events.once = function(name, callback, context) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, this.off.bind(this));\n    if (typeof name === 'string' && context == null) callback = void 0;\n    return this.on(events, callback, context);\n  };\n\n  // Inversion-of-control versions of `once`.\n  Events.listenToOnce = function(obj, name, callback) {\n    // Map the event into a `{event: once}` object.\n    var events = eventsApi(onceMap, {}, name, callback, this.stopListening.bind(this, obj));\n    return this.listenTo(obj, events);\n  };\n\n  // Reduces the event callbacks into a map of `{event: onceWrapper}`.\n  // `offer` unbinds the `onceWrapper` after it has been called.\n  var onceMap = function(map, name, callback, offer) {\n    if (callback) {\n      var once = map[name] = _.once(function() {\n        offer(name, once);\n        callback.apply(this, arguments);\n      });\n      once._callback = callback;\n    }\n    return map;\n  };\n\n  // Trigger one or many events, firing all bound callbacks. Callbacks are\n  // passed the same arguments as `trigger` is, apart from the event name\n  // (unless you're listening on `\"all\"`, which will cause your callback to\n  // receive the true name of the event as the first argument).\n  Events.trigger = function(name) {\n    if (!this._events) return this;\n\n    var length = Math.max(0, arguments.length - 1);\n    var args = Array(length);\n    for (var i = 0; i < length; i++) args[i] = arguments[i + 1];\n\n    eventsApi(triggerApi, this._events, name, void 0, args);\n    return this;\n  };\n\n  // Handles triggering the appropriate event callbacks.\n  var triggerApi = function(objEvents, name, callback, args) {\n    if (objEvents) {\n      var events = objEvents[name];\n      var allEvents = objEvents.all;\n      if (events && allEvents) allEvents = allEvents.slice();\n      if (events) triggerEvents(events, args);\n      if (allEvents) triggerEvents(allEvents, [name].concat(args));\n    }\n    return objEvents;\n  };\n\n  // A difficult-to-believe, but optimized internal dispatch function for\n  // triggering events. Tries to keep the usual cases speedy (most internal\n  // Backbone events have 3 arguments).\n  var triggerEvents = function(events, args) {\n    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n    switch (args.length) {\n      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\n    }\n  };\n\n  // A listening class that tracks and cleans up memory bindings\n  // when all callbacks have been offed.\n  var Listening = function(listener, obj) {\n    this.id = listener._listenId;\n    this.listener = listener;\n    this.obj = obj;\n    this.interop = true;\n    this.count = 0;\n    this._events = void 0;\n  };\n\n  Listening.prototype.on = Events.on;\n\n  // Offs a callback (or several).\n  // Uses an optimized counter if the listenee uses Backbone.Events.\n  // Otherwise, falls back to manual tracking to support events\n  // library interop.\n  Listening.prototype.off = function(name, callback) {\n    var cleanup;\n    if (this.interop) {\n      this._events = eventsApi(offApi, this._events, name, callback, {\n        context: void 0,\n        listeners: void 0\n      });\n      cleanup = !this._events;\n    } else {\n      this.count--;\n      cleanup = this.count === 0;\n    }\n    if (cleanup) this.cleanup();\n  };\n\n  // Cleans up memory bindings between the listener and the listenee.\n  Listening.prototype.cleanup = function() {\n    delete this.listener._listeningTo[this.obj._listenId];\n    if (!this.interop) delete this.obj._listeners[this.id];\n  };\n\n  // Aliases for backwards compatibility.\n  Events.bind   = Events.on;\n  Events.unbind = Events.off;\n\n  // Allow the `Backbone` object to serve as a global event bus, for folks who\n  // want global \"pubsub\" in a convenient place.\n  _.extend(Backbone, Events);\n\n  // Backbone.Model\n  // --------------\n\n  // Backbone **Models** are the basic data object in the framework --\n  // frequently representing a row in a table in a database on your server.\n  // A discrete chunk of data and a bunch of useful, related methods for\n  // performing computations and transformations on that data.\n\n  // Create a new model with the specified attributes. A client id (`cid`)\n  // is automatically generated and assigned for you.\n  var Model = Backbone.Model = function(attributes, options) {\n    var attrs = attributes || {};\n    options || (options = {});\n    this.preinitialize.apply(this, arguments);\n    this.cid = _.uniqueId(this.cidPrefix);\n    this.attributes = {};\n    if (options.collection) this.collection = options.collection;\n    if (options.parse) attrs = this.parse(attrs, options) || {};\n    var defaults = _.result(this, 'defaults');\n    attrs = _.defaults(_.extend({}, defaults, attrs), defaults);\n    this.set(attrs, options);\n    this.changed = {};\n    this.initialize.apply(this, arguments);\n  };\n\n  // Attach all inheritable methods to the Model prototype.\n  _.extend(Model.prototype, Events, {\n\n    // A hash of attributes whose current and previous value differ.\n    changed: null,\n\n    // The value returned during the last failed validation.\n    validationError: null,\n\n    // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n    // CouchDB users may want to set this to `\"_id\"`.\n    idAttribute: 'id',\n\n    // The prefix is used to create the client id which is used to identify models locally.\n    // You may want to override this if you're experiencing name clashes with model ids.\n    cidPrefix: 'c',\n\n    // preinitialize is an empty function by default. You can override it with a function\n    // or object.  preinitialize will run before any instantiation logic is run in the Model.\n    preinitialize: function(){},\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Return a copy of the model's `attributes` object.\n    toJSON: function(options) {\n      return _.clone(this.attributes);\n    },\n\n    // Proxy `Backbone.sync` by default -- but override this if you need\n    // custom syncing semantics for *this* particular model.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Get the value of an attribute.\n    get: function(attr) {\n      return this.attributes[attr];\n    },\n\n    // Get the HTML-escaped value of an attribute.\n    escape: function(attr) {\n      return _.escape(this.get(attr));\n    },\n\n    // Returns `true` if the attribute contains a value that is not null\n    // or undefined.\n    has: function(attr) {\n      return this.get(attr) != null;\n    },\n\n    // Special-cased proxy to underscore's `_.matches` method.\n    matches: function(attrs) {\n      return !!_.iteratee(attrs, this)(this.attributes);\n    },\n\n    // Set a hash of model attributes on the object, firing `\"change\"`. This is\n    // the core primitive operation of a model, updating the data and notifying\n    // anyone who needs to know about the change in state. The heart of the beast.\n    set: function(key, val, options) {\n      if (key == null) return this;\n\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options || (options = {});\n\n      // Run validation.\n      if (!this._validate(attrs, options)) return false;\n\n      // Extract attributes and options.\n      var unset      = options.unset;\n      var silent     = options.silent;\n      var changes    = [];\n      var changing   = this._changing;\n      this._changing = true;\n\n      if (!changing) {\n        this._previousAttributes = _.clone(this.attributes);\n        this.changed = {};\n      }\n\n      var current = this.attributes;\n      var changed = this.changed;\n      var prev    = this._previousAttributes;\n\n      // For each `set` attribute, update or delete the current value.\n      for (var attr in attrs) {\n        val = attrs[attr];\n        if (!_.isEqual(current[attr], val)) changes.push(attr);\n        if (!_.isEqual(prev[attr], val)) {\n          changed[attr] = val;\n        } else {\n          delete changed[attr];\n        }\n        unset ? delete current[attr] : current[attr] = val;\n      }\n\n      // Update the `id`.\n      if (this.idAttribute in attrs) {\n        var prevId = this.id;\n        this.id = this.get(this.idAttribute);\n        this.trigger('changeId', this, prevId, options);\n      }\n\n      // Trigger all relevant attribute changes.\n      if (!silent) {\n        if (changes.length) this._pending = options;\n        for (var i = 0; i < changes.length; i++) {\n          this.trigger('change:' + changes[i], this, current[changes[i]], options);\n        }\n      }\n\n      // You might be wondering why there's a `while` loop here. Changes can\n      // be recursively nested within `\"change\"` events.\n      if (changing) return this;\n      if (!silent) {\n        while (this._pending) {\n          options = this._pending;\n          this._pending = false;\n          this.trigger('change', this, options);\n        }\n      }\n      this._pending = false;\n      this._changing = false;\n      return this;\n    },\n\n    // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n    // if the attribute doesn't exist.\n    unset: function(attr, options) {\n      return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n    },\n\n    // Clear all attributes on the model, firing `\"change\"`.\n    clear: function(options) {\n      var attrs = {};\n      for (var key in this.attributes) attrs[key] = void 0;\n      return this.set(attrs, _.extend({}, options, {unset: true}));\n    },\n\n    // Determine if the model has changed since the last `\"change\"` event.\n    // If you specify an attribute name, determine if that attribute has changed.\n    hasChanged: function(attr) {\n      if (attr == null) return !_.isEmpty(this.changed);\n      return _.has(this.changed, attr);\n    },\n\n    // Return an object containing all the attributes that have changed, or\n    // false if there are no changed attributes. Useful for determining what\n    // parts of a view need to be updated and/or what attributes need to be\n    // persisted to the server. Unset attributes will be set to undefined.\n    // You can also pass an attributes object to diff against the model,\n    // determining if there *would be* a change.\n    changedAttributes: function(diff) {\n      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n      var old = this._changing ? this._previousAttributes : this.attributes;\n      var changed = {};\n      var hasChanged;\n      for (var attr in diff) {\n        var val = diff[attr];\n        if (_.isEqual(old[attr], val)) continue;\n        changed[attr] = val;\n        hasChanged = true;\n      }\n      return hasChanged ? changed : false;\n    },\n\n    // Get the previous value of an attribute, recorded at the time the last\n    // `\"change\"` event was fired.\n    previous: function(attr) {\n      if (attr == null || !this._previousAttributes) return null;\n      return this._previousAttributes[attr];\n    },\n\n    // Get all of the attributes of the model at the time of the previous\n    // `\"change\"` event.\n    previousAttributes: function() {\n      return _.clone(this._previousAttributes);\n    },\n\n    // Fetch the model from the server, merging the response with the model's\n    // local attributes. Any changed attributes will trigger a \"change\" event.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var model = this;\n      var success = options.success;\n      options.success = function(resp) {\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (!model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Set a hash of model attributes, and sync the model to the server.\n    // If the server returns an attributes hash that differs, the model's\n    // state will be `set` again.\n    save: function(key, val, options) {\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\n      var attrs;\n      if (key == null || typeof key === 'object') {\n        attrs = key;\n        options = val;\n      } else {\n        (attrs = {})[key] = val;\n      }\n\n      options = _.extend({validate: true, parse: true}, options);\n      var wait = options.wait;\n\n      // If we're not waiting and attributes exist, save acts as\n      // `set(attr).save(null, opts)` with validation. Otherwise, check if\n      // the model will be valid when the attributes, if any, are set.\n      if (attrs && !wait) {\n        if (!this.set(attrs, options)) return false;\n      } else if (!this._validate(attrs, options)) {\n        return false;\n      }\n\n      // After a successful server-side save, the client is (optionally)\n      // updated with the server-side state.\n      var model = this;\n      var success = options.success;\n      var attributes = this.attributes;\n      options.success = function(resp) {\n        // Ensure attributes are restored during synchronous saves.\n        model.attributes = attributes;\n        var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n        if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);\n        if (serverAttrs && !model.set(serverAttrs, options)) return false;\n        if (success) success.call(options.context, model, resp, options);\n        model.trigger('sync', model, resp, options);\n      };\n      wrapError(this, options);\n\n      // Set temporary attributes if `{wait: true}` to properly find new ids.\n      if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);\n\n      var method = this.isNew() ? 'create' : options.patch ? 'patch' : 'update';\n      if (method === 'patch' && !options.attrs) options.attrs = attrs;\n      var xhr = this.sync(method, this, options);\n\n      // Restore attributes.\n      this.attributes = attributes;\n\n      return xhr;\n    },\n\n    // Destroy this model on the server if it was already persisted.\n    // Optimistically removes the model from its collection, if it has one.\n    // If `wait: true` is passed, waits for the server to respond before removal.\n    destroy: function(options) {\n      options = options ? _.clone(options) : {};\n      var model = this;\n      var success = options.success;\n      var wait = options.wait;\n\n      var destroy = function() {\n        model.stopListening();\n        model.trigger('destroy', model, model.collection, options);\n      };\n\n      options.success = function(resp) {\n        if (wait) destroy();\n        if (success) success.call(options.context, model, resp, options);\n        if (!model.isNew()) model.trigger('sync', model, resp, options);\n      };\n\n      var xhr = false;\n      if (this.isNew()) {\n        _.defer(options.success);\n      } else {\n        wrapError(this, options);\n        xhr = this.sync('delete', this, options);\n      }\n      if (!wait) destroy();\n      return xhr;\n    },\n\n    // Default URL for the model's representation on the server -- if you're\n    // using Backbone's restful methods, override this to change the endpoint\n    // that will be called.\n    url: function() {\n      var base =\n        _.result(this, 'urlRoot') ||\n        _.result(this.collection, 'url') ||\n        urlError();\n      if (this.isNew()) return base;\n      var id = this.get(this.idAttribute);\n      return base.replace(/[^\\/]$/, '$&/') + encodeURIComponent(id);\n    },\n\n    // **parse** converts a response into the hash of attributes to be `set` on\n    // the model. The default implementation is just to pass the response along.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new model with identical attributes to this one.\n    clone: function() {\n      return new this.constructor(this.attributes);\n    },\n\n    // A model is new if it has never been saved to the server, and lacks an id.\n    isNew: function() {\n      return !this.has(this.idAttribute);\n    },\n\n    // Check if the model is currently in a valid state.\n    isValid: function(options) {\n      return this._validate({}, _.extend({}, options, {validate: true}));\n    },\n\n    // Run validation against the next complete set of model attributes,\n    // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n    _validate: function(attrs, options) {\n      if (!options.validate || !this.validate) return true;\n      attrs = _.extend({}, this.attributes, attrs);\n      var error = this.validationError = this.validate(attrs, options) || null;\n      if (!error) return true;\n      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\n      return false;\n    }\n\n  });\n\n  // Backbone.Collection\n  // -------------------\n\n  // If models tend to represent a single row of data, a Backbone Collection is\n  // more analogous to a table full of data ... or a small slice or page of that\n  // table, or a collection of rows that belong together for a particular reason\n  // -- all of the messages in this particular folder, all of the documents\n  // belonging to this particular author, and so on. Collections maintain\n  // indexes of their models, both in order, and for lookup by `id`.\n\n  // Create a new **Collection**, perhaps to contain a specific type of `model`.\n  // If a `comparator` is specified, the Collection will maintain\n  // its models in sort order, as they're added and removed.\n  var Collection = Backbone.Collection = function(models, options) {\n    options || (options = {});\n    this.preinitialize.apply(this, arguments);\n    if (options.model) this.model = options.model;\n    if (options.comparator !== void 0) this.comparator = options.comparator;\n    this._reset();\n    this.initialize.apply(this, arguments);\n    if (models) this.reset(models, _.extend({silent: true}, options));\n  };\n\n  // Default options for `Collection#set`.\n  var setOptions = {add: true, remove: true, merge: true};\n  var addOptions = {add: true, remove: false};\n\n  // Splices `insert` into `array` at index `at`.\n  var splice = function(array, insert, at) {\n    at = Math.min(Math.max(at, 0), array.length);\n    var tail = Array(array.length - at);\n    var length = insert.length;\n    var i;\n    for (i = 0; i < tail.length; i++) tail[i] = array[i + at];\n    for (i = 0; i < length; i++) array[i + at] = insert[i];\n    for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];\n  };\n\n  // Define the Collection's inheritable methods.\n  _.extend(Collection.prototype, Events, {\n\n    // The default model for a collection is just a **Backbone.Model**.\n    // This should be overridden in most cases.\n    model: Model,\n\n\n    // preinitialize is an empty function by default. You can override it with a function\n    // or object.  preinitialize will run before any instantiation logic is run in the Collection.\n    preinitialize: function(){},\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // The JSON representation of a Collection is an array of the\n    // models' attributes.\n    toJSON: function(options) {\n      return this.map(function(model) { return model.toJSON(options); });\n    },\n\n    // Proxy `Backbone.sync` by default.\n    sync: function() {\n      return Backbone.sync.apply(this, arguments);\n    },\n\n    // Add a model, or list of models to the set. `models` may be Backbone\n    // Models or raw JavaScript objects to be converted to Models, or any\n    // combination of the two.\n    add: function(models, options) {\n      return this.set(models, _.extend({merge: false}, options, addOptions));\n    },\n\n    // Remove a model, or a list of models from the set.\n    remove: function(models, options) {\n      options = _.extend({}, options);\n      var singular = !_.isArray(models);\n      models = singular ? [models] : models.slice();\n      var removed = this._removeModels(models, options);\n      if (!options.silent && removed.length) {\n        options.changes = {added: [], merged: [], removed: removed};\n        this.trigger('update', this, options);\n      }\n      return singular ? removed[0] : removed;\n    },\n\n    // Update a collection by `set`-ing a new list of models, adding new ones,\n    // removing models that are no longer present, and merging models that\n    // already exist in the collection, as necessary. Similar to **Model#set**,\n    // the core operation for updating the data contained by the collection.\n    set: function(models, options) {\n      if (models == null) return;\n\n      options = _.extend({}, setOptions, options);\n      if (options.parse && !this._isModel(models)) {\n        models = this.parse(models, options) || [];\n      }\n\n      var singular = !_.isArray(models);\n      models = singular ? [models] : models.slice();\n\n      var at = options.at;\n      if (at != null) at = +at;\n      if (at > this.length) at = this.length;\n      if (at < 0) at += this.length + 1;\n\n      var set = [];\n      var toAdd = [];\n      var toMerge = [];\n      var toRemove = [];\n      var modelMap = {};\n\n      var add = options.add;\n      var merge = options.merge;\n      var remove = options.remove;\n\n      var sort = false;\n      var sortable = this.comparator && at == null && options.sort !== false;\n      var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n\n      // Turn bare objects into model references, and prevent invalid models\n      // from being added.\n      var model, i;\n      for (i = 0; i < models.length; i++) {\n        model = models[i];\n\n        // If a duplicate is found, prevent it from being added and\n        // optionally merge it into the existing model.\n        var existing = this.get(model);\n        if (existing) {\n          if (merge && model !== existing) {\n            var attrs = this._isModel(model) ? model.attributes : model;\n            if (options.parse) attrs = existing.parse(attrs, options);\n            existing.set(attrs, options);\n            toMerge.push(existing);\n            if (sortable && !sort) sort = existing.hasChanged(sortAttr);\n          }\n          if (!modelMap[existing.cid]) {\n            modelMap[existing.cid] = true;\n            set.push(existing);\n          }\n          models[i] = existing;\n\n        // If this is a new, valid model, push it to the `toAdd` list.\n        } else if (add) {\n          model = models[i] = this._prepareModel(model, options);\n          if (model) {\n            toAdd.push(model);\n            this._addReference(model, options);\n            modelMap[model.cid] = true;\n            set.push(model);\n          }\n        }\n      }\n\n      // Remove stale models.\n      if (remove) {\n        for (i = 0; i < this.length; i++) {\n          model = this.models[i];\n          if (!modelMap[model.cid]) toRemove.push(model);\n        }\n        if (toRemove.length) this._removeModels(toRemove, options);\n      }\n\n      // See if sorting is needed, update `length` and splice in new models.\n      var orderChanged = false;\n      var replace = !sortable && add && remove;\n      if (set.length && replace) {\n        orderChanged = this.length !== set.length || _.some(this.models, function(m, index) {\n          return m !== set[index];\n        });\n        this.models.length = 0;\n        splice(this.models, set, 0);\n        this.length = this.models.length;\n      } else if (toAdd.length) {\n        if (sortable) sort = true;\n        splice(this.models, toAdd, at == null ? this.length : at);\n        this.length = this.models.length;\n      }\n\n      // Silently sort the collection if appropriate.\n      if (sort) this.sort({silent: true});\n\n      // Unless silenced, it's time to fire all appropriate add/sort/update events.\n      if (!options.silent) {\n        for (i = 0; i < toAdd.length; i++) {\n          if (at != null) options.index = at + i;\n          model = toAdd[i];\n          model.trigger('add', model, this, options);\n        }\n        if (sort || orderChanged) this.trigger('sort', this, options);\n        if (toAdd.length || toRemove.length || toMerge.length) {\n          options.changes = {\n            added: toAdd,\n            removed: toRemove,\n            merged: toMerge\n          };\n          this.trigger('update', this, options);\n        }\n      }\n\n      // Return the added (or merged) model (or models).\n      return singular ? models[0] : models;\n    },\n\n    // When you have more items than you want to add or remove individually,\n    // you can reset the entire set with a new list of models, without firing\n    // any granular `add` or `remove` events. Fires `reset` when finished.\n    // Useful for bulk operations and optimizations.\n    reset: function(models, options) {\n      options = options ? _.clone(options) : {};\n      for (var i = 0; i < this.models.length; i++) {\n        this._removeReference(this.models[i], options);\n      }\n      options.previousModels = this.models;\n      this._reset();\n      models = this.add(models, _.extend({silent: true}, options));\n      if (!options.silent) this.trigger('reset', this, options);\n      return models;\n    },\n\n    // Add a model to the end of the collection.\n    push: function(model, options) {\n      return this.add(model, _.extend({at: this.length}, options));\n    },\n\n    // Remove a model from the end of the collection.\n    pop: function(options) {\n      var model = this.at(this.length - 1);\n      return this.remove(model, options);\n    },\n\n    // Add a model to the beginning of the collection.\n    unshift: function(model, options) {\n      return this.add(model, _.extend({at: 0}, options));\n    },\n\n    // Remove a model from the beginning of the collection.\n    shift: function(options) {\n      var model = this.at(0);\n      return this.remove(model, options);\n    },\n\n    // Slice out a sub-array of models from the collection.\n    slice: function() {\n      return slice.apply(this.models, arguments);\n    },\n\n    // Get a model from the set by id, cid, model object with id or cid\n    // properties, or an attributes object that is transformed through modelId.\n    get: function(obj) {\n      if (obj == null) return void 0;\n      return this._byId[obj] ||\n        this._byId[this.modelId(this._isModel(obj) ? obj.attributes : obj, obj.idAttribute)] ||\n        obj.cid && this._byId[obj.cid];\n    },\n\n    // Returns `true` if the model is in the collection.\n    has: function(obj) {\n      return this.get(obj) != null;\n    },\n\n    // Get the model at the given index.\n    at: function(index) {\n      if (index < 0) index += this.length;\n      return this.models[index];\n    },\n\n    // Return models with matching attributes. Useful for simple cases of\n    // `filter`.\n    where: function(attrs, first) {\n      return this[first ? 'find' : 'filter'](attrs);\n    },\n\n    // Return the first model with matching attributes. Useful for simple cases\n    // of `find`.\n    findWhere: function(attrs) {\n      return this.where(attrs, true);\n    },\n\n    // Force the collection to re-sort itself. You don't need to call this under\n    // normal circumstances, as the set will maintain sort order as each item\n    // is added.\n    sort: function(options) {\n      var comparator = this.comparator;\n      if (!comparator) throw new Error('Cannot sort a set without a comparator');\n      options || (options = {});\n\n      var length = comparator.length;\n      if (_.isFunction(comparator)) comparator = comparator.bind(this);\n\n      // Run sort based on type of `comparator`.\n      if (length === 1 || _.isString(comparator)) {\n        this.models = this.sortBy(comparator);\n      } else {\n        this.models.sort(comparator);\n      }\n      if (!options.silent) this.trigger('sort', this, options);\n      return this;\n    },\n\n    // Pluck an attribute from each model in the collection.\n    pluck: function(attr) {\n      return this.map(attr + '');\n    },\n\n    // Fetch the default set of models for this collection, resetting the\n    // collection when they arrive. If `reset: true` is passed, the response\n    // data will be passed through the `reset` method instead of `set`.\n    fetch: function(options) {\n      options = _.extend({parse: true}, options);\n      var success = options.success;\n      var collection = this;\n      options.success = function(resp) {\n        var method = options.reset ? 'reset' : 'set';\n        collection[method](resp, options);\n        if (success) success.call(options.context, collection, resp, options);\n        collection.trigger('sync', collection, resp, options);\n      };\n      wrapError(this, options);\n      return this.sync('read', this, options);\n    },\n\n    // Create a new instance of a model in this collection. Add the model to the\n    // collection immediately, unless `wait: true` is passed, in which case we\n    // wait for the server to agree.\n    create: function(model, options) {\n      options = options ? _.clone(options) : {};\n      var wait = options.wait;\n      model = this._prepareModel(model, options);\n      if (!model) return false;\n      if (!wait) this.add(model, options);\n      var collection = this;\n      var success = options.success;\n      options.success = function(m, resp, callbackOpts) {\n        if (wait) collection.add(m, callbackOpts);\n        if (success) success.call(callbackOpts.context, m, resp, callbackOpts);\n      };\n      model.save(null, options);\n      return model;\n    },\n\n    // **parse** converts a response into a list of models to be added to the\n    // collection. The default implementation is just to pass it through.\n    parse: function(resp, options) {\n      return resp;\n    },\n\n    // Create a new collection with an identical list of models as this one.\n    clone: function() {\n      return new this.constructor(this.models, {\n        model: this.model,\n        comparator: this.comparator\n      });\n    },\n\n    // Define how to uniquely identify models in the collection.\n    modelId: function(attrs, idAttribute) {\n      return attrs[idAttribute || this.model.prototype.idAttribute || 'id'];\n    },\n\n    // Get an iterator of all models in this collection.\n    values: function() {\n      return new CollectionIterator(this, ITERATOR_VALUES);\n    },\n\n    // Get an iterator of all model IDs in this collection.\n    keys: function() {\n      return new CollectionIterator(this, ITERATOR_KEYS);\n    },\n\n    // Get an iterator of all [ID, model] tuples in this collection.\n    entries: function() {\n      return new CollectionIterator(this, ITERATOR_KEYSVALUES);\n    },\n\n    // Private method to reset all internal state. Called when the collection\n    // is first initialized or reset.\n    _reset: function() {\n      this.length = 0;\n      this.models = [];\n      this._byId  = {};\n    },\n\n    // Prepare a hash of attributes (or other model) to be added to this\n    // collection.\n    _prepareModel: function(attrs, options) {\n      if (this._isModel(attrs)) {\n        if (!attrs.collection) attrs.collection = this;\n        return attrs;\n      }\n      options = options ? _.clone(options) : {};\n      options.collection = this;\n\n      var model;\n      if (this.model.prototype) {\n        model = new this.model(attrs, options);\n      } else {\n        // ES class methods didn't have prototype\n        model = this.model(attrs, options);\n      }\n\n      if (!model.validationError) return model;\n      this.trigger('invalid', this, model.validationError, options);\n      return false;\n    },\n\n    // Internal method called by both remove and set.\n    _removeModels: function(models, options) {\n      var removed = [];\n      for (var i = 0; i < models.length; i++) {\n        var model = this.get(models[i]);\n        if (!model) continue;\n\n        var index = this.indexOf(model);\n        this.models.splice(index, 1);\n        this.length--;\n\n        // Remove references before triggering 'remove' event to prevent an\n        // infinite loop. #3693\n        delete this._byId[model.cid];\n        var id = this.modelId(model.attributes, model.idAttribute);\n        if (id != null) delete this._byId[id];\n\n        if (!options.silent) {\n          options.index = index;\n          model.trigger('remove', model, this, options);\n        }\n\n        removed.push(model);\n        this._removeReference(model, options);\n      }\n      return removed;\n    },\n\n    // Method for checking whether an object should be considered a model for\n    // the purposes of adding to the collection.\n    _isModel: function(model) {\n      return model instanceof Model;\n    },\n\n    // Internal method to create a model's ties to a collection.\n    _addReference: function(model, options) {\n      this._byId[model.cid] = model;\n      var id = this.modelId(model.attributes, model.idAttribute);\n      if (id != null) this._byId[id] = model;\n      model.on('all', this._onModelEvent, this);\n    },\n\n    // Internal method to sever a model's ties to a collection.\n    _removeReference: function(model, options) {\n      delete this._byId[model.cid];\n      var id = this.modelId(model.attributes, model.idAttribute);\n      if (id != null) delete this._byId[id];\n      if (this === model.collection) delete model.collection;\n      model.off('all', this._onModelEvent, this);\n    },\n\n    // Internal method called every time a model in the set fires an event.\n    // Sets need to update their indexes when models change ids. All other\n    // events simply proxy through. \"add\" and \"remove\" events that originate\n    // in other collections are ignored.\n    _onModelEvent: function(event, model, collection, options) {\n      if (model) {\n        if ((event === 'add' || event === 'remove') && collection !== this) return;\n        if (event === 'destroy') this.remove(model, options);\n        if (event === 'changeId') {\n          var prevId = this.modelId(model.previousAttributes(), model.idAttribute);\n          var id = this.modelId(model.attributes, model.idAttribute);\n          if (prevId != null) delete this._byId[prevId];\n          if (id != null) this._byId[id] = model;\n        }\n      }\n      this.trigger.apply(this, arguments);\n    }\n\n  });\n\n  // Defining an @@iterator method implements JavaScript's Iterable protocol.\n  // In modern ES2015 browsers, this value is found at Symbol.iterator.\n  /* global Symbol */\n  var $$iterator = typeof Symbol === 'function' && Symbol.iterator;\n  if ($$iterator) {\n    Collection.prototype[$$iterator] = Collection.prototype.values;\n  }\n\n  // CollectionIterator\n  // ------------------\n\n  // A CollectionIterator implements JavaScript's Iterator protocol, allowing the\n  // use of `for of` loops in modern browsers and interoperation between\n  // Backbone.Collection and other JavaScript functions and third-party libraries\n  // which can operate on Iterables.\n  var CollectionIterator = function(collection, kind) {\n    this._collection = collection;\n    this._kind = kind;\n    this._index = 0;\n  };\n\n  // This \"enum\" defines the three possible kinds of values which can be emitted\n  // by a CollectionIterator that correspond to the values(), keys() and entries()\n  // methods on Collection, respectively.\n  var ITERATOR_VALUES = 1;\n  var ITERATOR_KEYS = 2;\n  var ITERATOR_KEYSVALUES = 3;\n\n  // All Iterators should themselves be Iterable.\n  if ($$iterator) {\n    CollectionIterator.prototype[$$iterator] = function() {\n      return this;\n    };\n  }\n\n  CollectionIterator.prototype.next = function() {\n    if (this._collection) {\n\n      // Only continue iterating if the iterated collection is long enough.\n      if (this._index < this._collection.length) {\n        var model = this._collection.at(this._index);\n        this._index++;\n\n        // Construct a value depending on what kind of values should be iterated.\n        var value;\n        if (this._kind === ITERATOR_VALUES) {\n          value = model;\n        } else {\n          var id = this._collection.modelId(model.attributes, model.idAttribute);\n          if (this._kind === ITERATOR_KEYS) {\n            value = id;\n          } else { // ITERATOR_KEYSVALUES\n            value = [id, model];\n          }\n        }\n        return {value: value, done: false};\n      }\n\n      // Once exhausted, remove the reference to the collection so future\n      // calls to the next method always return done.\n      this._collection = void 0;\n    }\n\n    return {value: void 0, done: true};\n  };\n\n  // Backbone.View\n  // -------------\n\n  // Backbone Views are almost more convention than they are actual code. A View\n  // is simply a JavaScript object that represents a logical chunk of UI in the\n  // DOM. This might be a single item, an entire list, a sidebar or panel, or\n  // even the surrounding frame which wraps your whole app. Defining a chunk of\n  // UI as a **View** allows you to define your DOM events declaratively, without\n  // having to worry about render order ... and makes it easy for the view to\n  // react to specific changes in the state of your models.\n\n  // Creating a Backbone.View creates its initial element outside of the DOM,\n  // if an existing element is not provided...\n  var View = Backbone.View = function(options) {\n    this.cid = _.uniqueId('view');\n    this.preinitialize.apply(this, arguments);\n    _.extend(this, _.pick(options, viewOptions));\n    this._ensureElement();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regex to split keys for `delegate`.\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n  // List of view options to be set as properties.\n  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n  // Set up all inheritable **Backbone.View** properties and methods.\n  _.extend(View.prototype, Events, {\n\n    // The default `tagName` of a View's element is `\"div\"`.\n    tagName: 'div',\n\n    // jQuery delegate for element lookup, scoped to DOM elements within the\n    // current view. This should be preferred to global lookups where possible.\n    $: function(selector) {\n      return this.$el.find(selector);\n    },\n\n    // preinitialize is an empty function by default. You can override it with a function\n    // or object.  preinitialize will run before any instantiation logic is run in the View\n    preinitialize: function(){},\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // **render** is the core function that your view should override, in order\n    // to populate its element (`this.el`), with the appropriate HTML. The\n    // convention is for **render** to always return `this`.\n    render: function() {\n      return this;\n    },\n\n    // Remove this view by taking the element out of the DOM, and removing any\n    // applicable Backbone.Events listeners.\n    remove: function() {\n      this._removeElement();\n      this.stopListening();\n      return this;\n    },\n\n    // Remove this view's element from the document and all event listeners\n    // attached to it. Exposed for subclasses using an alternative DOM\n    // manipulation API.\n    _removeElement: function() {\n      this.$el.remove();\n    },\n\n    // Change the view's element (`this.el` property) and re-delegate the\n    // view's events on the new element.\n    setElement: function(element) {\n      this.undelegateEvents();\n      this._setElement(element);\n      this.delegateEvents();\n      return this;\n    },\n\n    // Creates the `this.el` and `this.$el` references for this view using the\n    // given `el`. `el` can be a CSS selector or an HTML string, a jQuery\n    // context or an element. Subclasses can override this to utilize an\n    // alternative DOM manipulation API and are only required to set the\n    // `this.el` property.\n    _setElement: function(el) {\n      this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\n      this.el = this.$el[0];\n    },\n\n    // Set callbacks, where `this.events` is a hash of\n    //\n    // *{\"event selector\": \"callback\"}*\n    //\n    //     {\n    //       'mousedown .title':  'edit',\n    //       'click .button':     'save',\n    //       'click .open':       function(e) { ... }\n    //     }\n    //\n    // pairs. Callbacks will be bound to the view, with `this` set properly.\n    // Uses event delegation for efficiency.\n    // Omitting the selector binds the event to `this.el`.\n    delegateEvents: function(events) {\n      events || (events = _.result(this, 'events'));\n      if (!events) return this;\n      this.undelegateEvents();\n      for (var key in events) {\n        var method = events[key];\n        if (!_.isFunction(method)) method = this[method];\n        if (!method) continue;\n        var match = key.match(delegateEventSplitter);\n        this.delegate(match[1], match[2], method.bind(this));\n      }\n      return this;\n    },\n\n    // Add a single event listener to the view's element (or a child element\n    // using `selector`). This only works for delegate-able events: not `focus`,\n    // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\n    delegate: function(eventName, selector, listener) {\n      this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Clears all callbacks previously bound to the view by `delegateEvents`.\n    // You usually don't need to use this, but may wish to if you have multiple\n    // Backbone views attached to the same DOM element.\n    undelegateEvents: function() {\n      if (this.$el) this.$el.off('.delegateEvents' + this.cid);\n      return this;\n    },\n\n    // A finer-grained `undelegateEvents` for removing a single delegated event.\n    // `selector` and `listener` are both optional.\n    undelegate: function(eventName, selector, listener) {\n      this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);\n      return this;\n    },\n\n    // Produces a DOM element to be assigned to your view. Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _createElement: function(tagName) {\n      return document.createElement(tagName);\n    },\n\n    // Ensure that the View has a DOM element to render into.\n    // If `this.el` is a string, pass it through `$()`, take the first\n    // matching element, and re-assign it to `el`. Otherwise, create\n    // an element from the `id`, `className` and `tagName` properties.\n    _ensureElement: function() {\n      if (!this.el) {\n        var attrs = _.extend({}, _.result(this, 'attributes'));\n        if (this.id) attrs.id = _.result(this, 'id');\n        if (this.className) attrs['class'] = _.result(this, 'className');\n        this.setElement(this._createElement(_.result(this, 'tagName')));\n        this._setAttributes(attrs);\n      } else {\n        this.setElement(_.result(this, 'el'));\n      }\n    },\n\n    // Set attributes from a hash on this view's element.  Exposed for\n    // subclasses using an alternative DOM manipulation API.\n    _setAttributes: function(attributes) {\n      this.$el.attr(attributes);\n    }\n\n  });\n\n  // Proxy Backbone class methods to Underscore functions, wrapping the model's\n  // `attributes` object or collection's `models` array behind the scenes.\n  //\n  // collection.filter(function(model) { return model.get('age') > 10 });\n  // collection.each(this.addView);\n  //\n  // `Function#apply` can be slow so we use the method's arg count, if we know it.\n  var addMethod = function(base, length, method, attribute) {\n    switch (length) {\n      case 1: return function() {\n        return base[method](this[attribute]);\n      };\n      case 2: return function(value) {\n        return base[method](this[attribute], value);\n      };\n      case 3: return function(iteratee, context) {\n        return base[method](this[attribute], cb(iteratee, this), context);\n      };\n      case 4: return function(iteratee, defaultVal, context) {\n        return base[method](this[attribute], cb(iteratee, this), defaultVal, context);\n      };\n      default: return function() {\n        var args = slice.call(arguments);\n        args.unshift(this[attribute]);\n        return base[method].apply(base, args);\n      };\n    }\n  };\n\n  var addUnderscoreMethods = function(Class, base, methods, attribute) {\n    _.each(methods, function(length, method) {\n      if (base[method]) Class.prototype[method] = addMethod(base, length, method, attribute);\n    });\n  };\n\n  // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.\n  var cb = function(iteratee, instance) {\n    if (_.isFunction(iteratee)) return iteratee;\n    if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);\n    if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };\n    return iteratee;\n  };\n  var modelMatcher = function(attrs) {\n    var matcher = _.matches(attrs);\n    return function(model) {\n      return matcher(model.attributes);\n    };\n  };\n\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  var collectionMethods = {forEach: 3, each: 3, map: 3, collect: 3, reduce: 0,\n    foldl: 0, inject: 0, reduceRight: 0, foldr: 0, find: 3, detect: 3, filter: 3,\n    select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,\n    contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,\n    head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,\n    without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,\n    isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,\n    sortBy: 3, indexBy: 3, findIndex: 3, findLastIndex: 3};\n\n\n  // Underscore methods that we want to implement on the Model, mapped to the\n  // number of arguments they take.\n  var modelMethods = {keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,\n    omit: 0, chain: 1, isEmpty: 1};\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n\n  _.each([\n    [Collection, collectionMethods, 'models'],\n    [Model, modelMethods, 'attributes']\n  ], function(config) {\n    var Base = config[0],\n        methods = config[1],\n        attribute = config[2];\n\n    Base.mixin = function(obj) {\n      var mappings = _.reduce(_.functions(obj), function(memo, name) {\n        memo[name] = 0;\n        return memo;\n      }, {});\n      addUnderscoreMethods(Base, obj, mappings, attribute);\n    };\n\n    addUnderscoreMethods(Base, _, methods, attribute);\n  });\n\n  // Backbone.sync\n  // -------------\n\n  // Override this function to change the manner in which Backbone persists\n  // models to the server. You will be passed the type of request, and the\n  // model in question. By default, makes a RESTful Ajax request\n  // to the model's `url()`. Some possible customizations could be:\n  //\n  // * Use `setTimeout` to batch rapid-fire updates into a single request.\n  // * Send up the models as XML instead of JSON.\n  // * Persist models via WebSockets instead of Ajax.\n  //\n  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n  // as `POST`, with a `_method` parameter containing the true HTTP method,\n  // as well as all requests with the body as `application/x-www-form-urlencoded`\n  // instead of `application/json` with the model in a param named `model`.\n  // Useful when interfacing with server-side languages like **PHP** that make\n  // it difficult to read the body of `PUT` requests.\n  Backbone.sync = function(method, model, options) {\n    var type = methodMap[method];\n\n    // Default options, unless specified.\n    _.defaults(options || (options = {}), {\n      emulateHTTP: Backbone.emulateHTTP,\n      emulateJSON: Backbone.emulateJSON\n    });\n\n    // Default JSON-request options.\n    var params = {type: type, dataType: 'json'};\n\n    // Ensure that we have a URL.\n    if (!options.url) {\n      params.url = _.result(model, 'url') || urlError();\n    }\n\n    // Ensure that we have the appropriate request data.\n    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n      params.contentType = 'application/json';\n      params.data = JSON.stringify(options.attrs || model.toJSON(options));\n    }\n\n    // For older servers, emulate JSON by encoding the request into an HTML-form.\n    if (options.emulateJSON) {\n      params.contentType = 'application/x-www-form-urlencoded';\n      params.data = params.data ? {model: params.data} : {};\n    }\n\n    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n    // And an `X-HTTP-Method-Override` header.\n    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n      params.type = 'POST';\n      if (options.emulateJSON) params.data._method = type;\n      var beforeSend = options.beforeSend;\n      options.beforeSend = function(xhr) {\n        xhr.setRequestHeader('X-HTTP-Method-Override', type);\n        if (beforeSend) return beforeSend.apply(this, arguments);\n      };\n    }\n\n    // Don't process data on a non-GET request.\n    if (params.type !== 'GET' && !options.emulateJSON) {\n      params.processData = false;\n    }\n\n    // Pass along `textStatus` and `errorThrown` from jQuery.\n    var error = options.error;\n    options.error = function(xhr, textStatus, errorThrown) {\n      options.textStatus = textStatus;\n      options.errorThrown = errorThrown;\n      if (error) error.call(options.context, xhr, textStatus, errorThrown);\n    };\n\n    // Make the request, allowing the user to override any Ajax options.\n    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n    model.trigger('request', model, xhr, options);\n    return xhr;\n  };\n\n  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n  var methodMap = {\n    'create': 'POST',\n    'update': 'PUT',\n    'patch': 'PATCH',\n    'delete': 'DELETE',\n    'read': 'GET'\n  };\n\n  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n  // Override this if you'd like to use a different library.\n  Backbone.ajax = function() {\n    return Backbone.$.ajax.apply(Backbone.$, arguments);\n  };\n\n  // Backbone.Router\n  // ---------------\n\n  // Routers map faux-URLs to actions, and fire events when routes are\n  // matched. Creating a new one sets its `routes` hash, if not set statically.\n  var Router = Backbone.Router = function(options) {\n    options || (options = {});\n    this.preinitialize.apply(this, arguments);\n    if (options.routes) this.routes = options.routes;\n    this._bindRoutes();\n    this.initialize.apply(this, arguments);\n  };\n\n  // Cached regular expressions for matching named param parts and splatted\n  // parts of route strings.\n  var optionalParam = /\\((.*?)\\)/g;\n  var namedParam    = /(\\(\\?)?:\\w+/g;\n  var splatParam    = /\\*\\w+/g;\n  var escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n  // Set up all inheritable **Backbone.Router** properties and methods.\n  _.extend(Router.prototype, Events, {\n\n    // preinitialize is an empty function by default. You can override it with a function\n    // or object.  preinitialize will run before any instantiation logic is run in the Router.\n    preinitialize: function(){},\n\n    // Initialize is an empty function by default. Override it with your own\n    // initialization logic.\n    initialize: function(){},\n\n    // Manually bind a single named route to a callback. For example:\n    //\n    //     this.route('search/:query/p:num', 'search', function(query, num) {\n    //       ...\n    //     });\n    //\n    route: function(route, name, callback) {\n      if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n      if (_.isFunction(name)) {\n        callback = name;\n        name = '';\n      }\n      if (!callback) callback = this[name];\n      var router = this;\n      Backbone.history.route(route, function(fragment) {\n        var args = router._extractParameters(route, fragment);\n        if (router.execute(callback, args, name) !== false) {\n          router.trigger.apply(router, ['route:' + name].concat(args));\n          router.trigger('route', name, args);\n          Backbone.history.trigger('route', router, name, args);\n        }\n      });\n      return this;\n    },\n\n    // Execute a route handler with the provided parameters.  This is an\n    // excellent place to do pre-route setup or post-route cleanup.\n    execute: function(callback, args, name) {\n      if (callback) callback.apply(this, args);\n    },\n\n    // Simple proxy to `Backbone.history` to save a fragment into the history.\n    navigate: function(fragment, options) {\n      Backbone.history.navigate(fragment, options);\n      return this;\n    },\n\n    // Bind all defined routes to `Backbone.history`. We have to reverse the\n    // order of the routes here to support behavior where the most general\n    // routes can be defined at the bottom of the route map.\n    _bindRoutes: function() {\n      if (!this.routes) return;\n      this.routes = _.result(this, 'routes');\n      var route, routes = _.keys(this.routes);\n      while ((route = routes.pop()) != null) {\n        this.route(route, this.routes[route]);\n      }\n    },\n\n    // Convert a route string into a regular expression, suitable for matching\n    // against the current location hash.\n    _routeToRegExp: function(route) {\n      route = route.replace(escapeRegExp, '\\\\$&')\n      .replace(optionalParam, '(?:$1)?')\n      .replace(namedParam, function(match, optional) {\n        return optional ? match : '([^/?]+)';\n      })\n      .replace(splatParam, '([^?]*?)');\n      return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n    },\n\n    // Given a route, and a URL fragment that it matches, return the array of\n    // extracted decoded parameters. Empty or unmatched parameters will be\n    // treated as `null` to normalize cross-browser behavior.\n    _extractParameters: function(route, fragment) {\n      var params = route.exec(fragment).slice(1);\n      return _.map(params, function(param, i) {\n        // Don't decode the search params.\n        if (i === params.length - 1) return param || null;\n        return param ? decodeURIComponent(param) : null;\n      });\n    }\n\n  });\n\n  // Backbone.History\n  // ----------------\n\n  // Handles cross-browser history management, based on either\n  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n  // and URL fragments. If the browser supports neither (old IE, natch),\n  // falls back to polling.\n  var History = Backbone.History = function() {\n    this.handlers = [];\n    this.checkUrl = this.checkUrl.bind(this);\n\n    // Ensure that `History` can be used outside of the browser.\n    if (typeof window !== 'undefined') {\n      this.location = window.location;\n      this.history = window.history;\n    }\n  };\n\n  // Cached regex for stripping a leading hash/slash and trailing space.\n  var routeStripper = /^[#\\/]|\\s+$/g;\n\n  // Cached regex for stripping leading and trailing slashes.\n  var rootStripper = /^\\/+|\\/+$/g;\n\n  // Cached regex for stripping urls of hash.\n  var pathStripper = /#.*$/;\n\n  // Has the history handling already been started?\n  History.started = false;\n\n  // Set up all inheritable **Backbone.History** properties and methods.\n  _.extend(History.prototype, Events, {\n\n    // The default interval to poll for hash changes, if necessary, is\n    // twenty times a second.\n    interval: 50,\n\n    // Are we at the app root?\n    atRoot: function() {\n      var path = this.location.pathname.replace(/[^\\/]$/, '$&/');\n      return path === this.root && !this.getSearch();\n    },\n\n    // Does the pathname match the root?\n    matchRoot: function() {\n      var path = this.decodeFragment(this.location.pathname);\n      var rootPath = path.slice(0, this.root.length - 1) + '/';\n      return rootPath === this.root;\n    },\n\n    // Unicode characters in `location.pathname` are percent encoded so they're\n    // decoded for comparison. `%25` should not be decoded since it may be part\n    // of an encoded parameter.\n    decodeFragment: function(fragment) {\n      return decodeURI(fragment.replace(/%25/g, '%2525'));\n    },\n\n    // In IE6, the hash fragment and search params are incorrect if the\n    // fragment contains `?`.\n    getSearch: function() {\n      var match = this.location.href.replace(/#.*/, '').match(/\\?.+/);\n      return match ? match[0] : '';\n    },\n\n    // Gets the true hash value. Cannot use location.hash directly due to bug\n    // in Firefox where location.hash will always be decoded.\n    getHash: function(window) {\n      var match = (window || this).location.href.match(/#(.*)$/);\n      return match ? match[1] : '';\n    },\n\n    // Get the pathname and search params, without the root.\n    getPath: function() {\n      var path = this.decodeFragment(\n        this.location.pathname + this.getSearch()\n      ).slice(this.root.length - 1);\n      return path.charAt(0) === '/' ? path.slice(1) : path;\n    },\n\n    // Get the cross-browser normalized URL fragment from the path or hash.\n    getFragment: function(fragment) {\n      if (fragment == null) {\n        if (this._usePushState || !this._wantsHashChange) {\n          fragment = this.getPath();\n        } else {\n          fragment = this.getHash();\n        }\n      }\n      return fragment.replace(routeStripper, '');\n    },\n\n    // Start the hash change handling, returning `true` if the current URL matches\n    // an existing route, and `false` otherwise.\n    start: function(options) {\n      if (History.started) throw new Error('Backbone.history has already been started');\n      History.started = true;\n\n      // Figure out the initial configuration. Do we need an iframe?\n      // Is pushState desired ... is it available?\n      this.options          = _.extend({root: '/'}, this.options, options);\n      this.root             = this.options.root;\n      this._wantsHashChange = this.options.hashChange !== false;\n      this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);\n      this._useHashChange   = this._wantsHashChange && this._hasHashChange;\n      this._wantsPushState  = !!this.options.pushState;\n      this._hasPushState    = !!(this.history && this.history.pushState);\n      this._usePushState    = this._wantsPushState && this._hasPushState;\n      this.fragment         = this.getFragment();\n\n      // Normalize root to always include a leading and trailing slash.\n      this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n      // Transition from hashChange to pushState or vice versa if both are\n      // requested.\n      if (this._wantsHashChange && this._wantsPushState) {\n\n        // If we've started off with a route from a `pushState`-enabled\n        // browser, but we're currently in a browser that doesn't support it...\n        if (!this._hasPushState && !this.atRoot()) {\n          var rootPath = this.root.slice(0, -1) || '/';\n          this.location.replace(rootPath + '#' + this.getPath());\n          // Return immediately as browser will do redirect to new url\n          return true;\n\n        // Or if we've started out with a hash-based route, but we're currently\n        // in a browser where it could be `pushState`-based instead...\n        } else if (this._hasPushState && this.atRoot()) {\n          this.navigate(this.getHash(), {replace: true});\n        }\n\n      }\n\n      // Proxy an iframe to handle location events if the browser doesn't\n      // support the `hashchange` event, HTML5 history, or the user wants\n      // `hashChange` but not `pushState`.\n      if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {\n        this.iframe = document.createElement('iframe');\n        this.iframe.src = 'javascript:0';\n        this.iframe.style.display = 'none';\n        this.iframe.tabIndex = -1;\n        var body = document.body;\n        // Using `appendChild` will throw on IE < 9 if the document is not ready.\n        var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;\n        iWindow.document.open();\n        iWindow.document.close();\n        iWindow.location.hash = '#' + this.fragment;\n      }\n\n      // Add a cross-platform `addEventListener` shim for older browsers.\n      var addEventListener = window.addEventListener || function(eventName, listener) {\n        return attachEvent('on' + eventName, listener);\n      };\n\n      // Depending on whether we're using pushState or hashes, and whether\n      // 'onhashchange' is supported, determine how we check the URL state.\n      if (this._usePushState) {\n        addEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        addEventListener('hashchange', this.checkUrl, false);\n      } else if (this._wantsHashChange) {\n        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n      }\n\n      if (!this.options.silent) return this.loadUrl();\n    },\n\n    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n    // but possibly useful for unit testing Routers.\n    stop: function() {\n      // Add a cross-platform `removeEventListener` shim for older browsers.\n      var removeEventListener = window.removeEventListener || function(eventName, listener) {\n        return detachEvent('on' + eventName, listener);\n      };\n\n      // Remove window listeners.\n      if (this._usePushState) {\n        removeEventListener('popstate', this.checkUrl, false);\n      } else if (this._useHashChange && !this.iframe) {\n        removeEventListener('hashchange', this.checkUrl, false);\n      }\n\n      // Clean up the iframe if necessary.\n      if (this.iframe) {\n        document.body.removeChild(this.iframe);\n        this.iframe = null;\n      }\n\n      // Some environments will throw when clearing an undefined interval.\n      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\n      History.started = false;\n    },\n\n    // Add a route to be tested when the fragment changes. Routes added later\n    // may override previous routes.\n    route: function(route, callback) {\n      this.handlers.unshift({route: route, callback: callback});\n    },\n\n    // Checks the current URL to see if it has changed, and if it has,\n    // calls `loadUrl`, normalizing across the hidden iframe.\n    checkUrl: function(e) {\n      var current = this.getFragment();\n\n      // If the user pressed the back button, the iframe's hash will have\n      // changed and we should use that for comparison.\n      if (current === this.fragment && this.iframe) {\n        current = this.getHash(this.iframe.contentWindow);\n      }\n\n      if (current === this.fragment) return false;\n      if (this.iframe) this.navigate(current);\n      this.loadUrl();\n    },\n\n    // Attempt to load the current URL fragment. If a route succeeds with a\n    // match, returns `true`. If no defined routes matches the fragment,\n    // returns `false`.\n    loadUrl: function(fragment) {\n      // If the root doesn't match, no routes can match either.\n      if (!this.matchRoot()) return false;\n      fragment = this.fragment = this.getFragment(fragment);\n      return _.some(this.handlers, function(handler) {\n        if (handler.route.test(fragment)) {\n          handler.callback(fragment);\n          return true;\n        }\n      });\n    },\n\n    // Save a fragment into the hash history, or replace the URL state if the\n    // 'replace' option is passed. You are responsible for properly URL-encoding\n    // the fragment in advance.\n    //\n    // The options object can contain `trigger: true` if you wish to have the\n    // route callback be fired (not usually desirable), or `replace: true`, if\n    // you wish to modify the current URL without adding an entry to the history.\n    navigate: function(fragment, options) {\n      if (!History.started) return false;\n      if (!options || options === true) options = {trigger: !!options};\n\n      // Normalize the fragment.\n      fragment = this.getFragment(fragment || '');\n\n      // Don't include a trailing slash on the root.\n      var rootPath = this.root;\n      if (fragment === '' || fragment.charAt(0) === '?') {\n        rootPath = rootPath.slice(0, -1) || '/';\n      }\n      var url = rootPath + fragment;\n\n      // Strip the fragment of the query and hash for matching.\n      fragment = fragment.replace(pathStripper, '');\n\n      // Decode for matching.\n      var decodedFragment = this.decodeFragment(fragment);\n\n      if (this.fragment === decodedFragment) return;\n      this.fragment = decodedFragment;\n\n      // If pushState is available, we use it to set the fragment as a real URL.\n      if (this._usePushState) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n      // If hash changes haven't been explicitly disabled, update the hash\n      // fragment to store history.\n      } else if (this._wantsHashChange) {\n        this._updateHash(this.location, fragment, options.replace);\n        if (this.iframe && fragment !== this.getHash(this.iframe.contentWindow)) {\n          var iWindow = this.iframe.contentWindow;\n\n          // Opening and closing the iframe tricks IE7 and earlier to push a\n          // history entry on hash-tag change.  When replace is true, we don't\n          // want this.\n          if (!options.replace) {\n            iWindow.document.open();\n            iWindow.document.close();\n          }\n\n          this._updateHash(iWindow.location, fragment, options.replace);\n        }\n\n      // If you've told us that you explicitly don't want fallback hashchange-\n      // based history, then `navigate` becomes a page refresh.\n      } else {\n        return this.location.assign(url);\n      }\n      if (options.trigger) return this.loadUrl(fragment);\n    },\n\n    // Update the hash location, either replacing the current entry, or adding\n    // a new one to the browser history.\n    _updateHash: function(location, fragment, replace) {\n      if (replace) {\n        var href = location.href.replace(/(javascript:|#).*$/, '');\n        location.replace(href + '#' + fragment);\n      } else {\n        // Some browsers require that `hash` contains a leading #.\n        location.hash = '#' + fragment;\n      }\n    }\n\n  });\n\n  // Create the default Backbone.history.\n  Backbone.history = new History;\n\n  // Helpers\n  // -------\n\n  // Helper function to correctly set up the prototype chain for subclasses.\n  // Similar to `goog.inherits`, but uses a hash of prototype properties and\n  // class properties to be extended.\n  var extend = function(protoProps, staticProps) {\n    var parent = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent constructor.\n    if (protoProps && _.has(protoProps, 'constructor')) {\n      child = protoProps.constructor;\n    } else {\n      child = function(){ return parent.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    _.extend(child, parent, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function and add the prototype properties.\n    child.prototype = _.create(parent.prototype, protoProps);\n    child.prototype.constructor = child;\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = parent.prototype;\n\n    return child;\n  };\n\n  // Set up inheritance for the model, collection, router, view and history.\n  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;\n\n  // Throw an error when a URL is needed, and none is supplied.\n  var urlError = function() {\n    throw new Error('A \"url\" property or function must be specified');\n  };\n\n  // Wrap an optional error callback with a fallback error event.\n  var wrapError = function(model, options) {\n    var error = options.error;\n    options.error = function(resp) {\n      if (error) error.call(options.context, model, resp, options);\n      model.trigger('error', model, resp, options);\n    };\n  };\n\n  return Backbone;\n});\n","// Vectorizer.\n// -----------\n\n// A tiny library for making your life easier when dealing with SVG.\n// The only Vectorizer dependency is the Geometry library.\n\nimport * as g from '../g/index.mjs';\n\nconst V = (function() {\n\n    var hasSvg = typeof window === 'object' && !!window.SVGAngle;\n\n    // SVG support is required.\n    if (!hasSvg) {\n\n        // Return a function that throws an error when it is used.\n        return function() {\n            throw new Error('SVG is required to use Vectorizer.');\n        };\n    }\n\n    // XML namespaces.\n    var ns = {\n        svg: 'http://www.w3.org/2000/svg',\n        xmlns: 'http://www.w3.org/2000/xmlns/',\n        xml: 'http://www.w3.org/XML/1998/namespace',\n        xlink: 'http://www.w3.org/1999/xlink',\n        xhtml: 'http://www.w3.org/1999/xhtml'\n    };\n\n    var SVGVersion = '1.1';\n\n    // Declare shorthands to the most used math functions.\n    var math = Math;\n    var PI = math.PI;\n    var atan2 = math.atan2;\n    var sqrt = math.sqrt;\n    var min = math.min;\n    var max = math.max;\n    var cos = math.cos;\n    var sin = math.sin;\n\n    var V = function(el, attrs, children) {\n\n        // This allows using V() without the new keyword.\n        if (!(this instanceof V)) {\n            return V.apply(Object.create(V.prototype), arguments);\n        }\n\n        if (!el) return;\n\n        if (V.isV(el)) {\n            el = el.node;\n        }\n\n        attrs = attrs || {};\n\n        if (V.isString(el)) {\n\n            el = el.trim();\n\n            if (el.toLowerCase() === 'svg') {\n\n                // Create a new SVG canvas.\n                el = V.createSvgDocument();\n\n            } else if (el[0] === '<') {\n\n                // Create element from an SVG string.\n                // Allows constructs of type: `document.appendChild(V('<rect></rect>').node)`.\n\n                var svgDoc = V.createSvgDocument(el);\n\n                // Note that `V()` might also return an array should the SVG string passed as\n                // the first argument contain more than one root element.\n                if (svgDoc.childNodes.length > 1) {\n\n                    // Map child nodes to `V`s.\n                    var arrayOfVels = [];\n                    var i, len;\n\n                    for (i = 0, len = svgDoc.childNodes.length; i < len; i++) {\n\n                        var childNode = svgDoc.childNodes[i];\n                        arrayOfVels.push(new V(document.importNode(childNode, true)));\n                    }\n\n                    return arrayOfVels;\n                }\n\n                el = document.importNode(svgDoc.firstChild, true);\n\n            } else {\n\n                el = document.createElementNS(ns.svg, el);\n            }\n\n            V.ensureId(el);\n        }\n\n        this.node = el;\n\n        this.setAttributes(attrs);\n\n        if (children) {\n            this.append(children);\n        }\n\n        return this;\n    };\n\n    var VPrototype = V.prototype;\n\n    Object.defineProperty(VPrototype, 'id', {\n        enumerable: true,\n        get: function() {\n            return this.node.id;\n        },\n        set: function(id) {\n            this.node.id = id;\n        }\n    });\n\n    /**\n     * @param {SVGGElement} toElem\n     * @returns {SVGMatrix}\n     */\n    VPrototype.getTransformToElement = function(target) {\n        var node = this.node;\n        if (V.isSVGGraphicsElement(target) && V.isSVGGraphicsElement(node)) {\n            var targetCTM = V.toNode(target).getScreenCTM();\n            var nodeCTM = node.getScreenCTM();\n            if (targetCTM && nodeCTM) {\n                return targetCTM.inverse().multiply(nodeCTM);\n            }\n        }\n        // Could not get actual transformation matrix\n        return V.createSVGMatrix();\n    };\n\n    /**\n     * @param {SVGMatrix} matrix\n     * @param {Object=} opt\n     * @returns {Vectorizer|SVGMatrix} Setter / Getter\n     */\n    VPrototype.transform = function(matrix, opt) {\n\n        var node = this.node;\n        if (V.isUndefined(matrix)) {\n            return V.transformStringToMatrix(this.attr('transform'));\n        }\n\n        if (opt && opt.absolute) {\n            return this.attr('transform', V.matrixToTransformString(matrix));\n        }\n\n        var svgTransform = V.createSVGTransform(matrix);\n        node.transform.baseVal.appendItem(svgTransform);\n        return this;\n    };\n\n    VPrototype.translate = function(tx, ty, opt) {\n\n        opt = opt || {};\n        ty = ty || 0;\n\n        var transformAttr = this.attr('transform') || '';\n        var transform = V.parseTransformString(transformAttr);\n        transformAttr = transform.value;\n        // Is it a getter?\n        if (V.isUndefined(tx)) {\n            return transform.translate;\n        }\n\n        transformAttr = transformAttr.replace(/translate\\([^)]*\\)/g, '').trim();\n\n        var newTx = opt.absolute ? tx : transform.translate.tx + tx;\n        var newTy = opt.absolute ? ty : transform.translate.ty + ty;\n        var newTranslate = 'translate(' + newTx + ',' + newTy + ')';\n\n        // Note that `translate()` is always the first transformation. This is\n        // usually the desired case.\n        this.attr('transform', (newTranslate + ' ' + transformAttr).trim());\n        return this;\n    };\n\n    VPrototype.rotate = function(angle, cx, cy, opt) {\n\n        opt = opt || {};\n\n        var transformAttr = this.attr('transform') || '';\n        var transform = V.parseTransformString(transformAttr);\n        transformAttr = transform.value;\n\n        // Is it a getter?\n        if (V.isUndefined(angle)) {\n            return transform.rotate;\n        }\n\n        transformAttr = transformAttr.replace(/rotate\\([^)]*\\)/g, '').trim();\n\n        angle %= 360;\n\n        var newAngle = opt.absolute ? angle : transform.rotate.angle + angle;\n        var newOrigin = (cx !== undefined && cy !== undefined) ? ',' + cx + ',' + cy : '';\n        var newRotate = 'rotate(' + newAngle + newOrigin + ')';\n\n        this.attr('transform', (transformAttr + ' ' + newRotate).trim());\n        return this;\n    };\n\n    // Note that `scale` as the only transformation does not combine with previous values.\n    VPrototype.scale = function(sx, sy) {\n\n        sy = V.isUndefined(sy) ? sx : sy;\n\n        var transformAttr = this.attr('transform') || '';\n        var transform = V.parseTransformString(transformAttr);\n        transformAttr = transform.value;\n\n        // Is it a getter?\n        if (V.isUndefined(sx)) {\n            return transform.scale;\n        }\n\n        transformAttr = transformAttr.replace(/scale\\([^)]*\\)/g, '').trim();\n\n        var newScale = 'scale(' + sx + ',' + sy + ')';\n\n        this.attr('transform', (transformAttr + ' ' + newScale).trim());\n        return this;\n    };\n\n    // Get SVGRect that contains coordinates and dimension of the real bounding box,\n    // i.e. after transformations are applied.\n    // If `target` is specified, bounding box will be computed relatively to `target` element.\n    VPrototype.bbox = function(withoutTransformations, target) {\n\n        var box;\n        var node = this.node;\n        var ownerSVGElement = node.ownerSVGElement;\n\n        // If the element is not in the live DOM, it does not have a bounding box defined and\n        // so fall back to 'zero' dimension element.\n        if (!ownerSVGElement) {\n            return new g.Rect(0, 0, 0, 0);\n        }\n\n        try {\n\n            box = node.getBBox();\n\n        } catch (e) {\n\n            // Fallback for IE.\n            box = {\n                x: node.clientLeft,\n                y: node.clientTop,\n                width: node.clientWidth,\n                height: node.clientHeight\n            };\n        }\n\n        if (withoutTransformations) {\n            return new g.Rect(box);\n        }\n\n        var matrix = this.getTransformToElement(target || ownerSVGElement);\n\n        return V.transformRect(box, matrix);\n    };\n\n    // Returns an SVGRect that contains coordinates and dimensions of the real bounding box,\n    // i.e. after transformations are applied.\n    // Fixes a browser implementation bug that returns incorrect bounding boxes for groups of svg elements.\n    // Takes an (Object) `opt` argument (optional) with the following attributes:\n    // (Object) `target` (optional): if not undefined, transform bounding boxes relative to `target`; if undefined, transform relative to this\n    // (Boolean) `recursive` (optional): if true, recursively enter all groups and get a union of element bounding boxes (svg bbox fix); if false or undefined, return result of native function this.node.getBBox();\n    VPrototype.getBBox = function(opt) {\n\n        var options = {};\n\n        var outputBBox;\n        var node = this.node;\n        var ownerSVGElement = node.ownerSVGElement;\n\n        // If the element is not in the live DOM, it does not have a bounding box defined and\n        // so fall back to 'zero' dimension element.\n        // If the element is not an SVGGraphicsElement, we could not measure the bounding box either\n        if (!ownerSVGElement || !V.isSVGGraphicsElement(node)) {\n            return new g.Rect(0, 0, 0, 0);\n        }\n\n        if (opt) {\n            if (opt.target) { // check if target exists\n                options.target = V.toNode(opt.target); // works for V objects, jquery objects, and node objects\n            }\n            if (opt.recursive) {\n                options.recursive = opt.recursive;\n            }\n        }\n\n        if (!options.recursive) {\n            try {\n                outputBBox = node.getBBox();\n            } catch (e) {\n                // Fallback for IE.\n                outputBBox = {\n                    x: node.clientLeft,\n                    y: node.clientTop,\n                    width: node.clientWidth,\n                    height: node.clientHeight\n                };\n            }\n\n            if (!options.target) {\n                // transform like this (that is, not at all)\n                return new g.Rect(outputBBox);\n            } else {\n                // transform like target\n                var matrix = this.getTransformToElement(options.target);\n                return V.transformRect(outputBBox, matrix);\n            }\n        } else { // if we want to calculate the bbox recursively\n            // browsers report correct bbox around svg elements (one that envelops the path lines tightly)\n            // but some browsers fail to report the same bbox when the elements are in a group (returning a looser bbox that also includes control points, like node.getClientRect())\n            // this happens even if we wrap a single svg element into a group!\n            // this option setting makes the function recursively enter all the groups from this and deeper, get bboxes of the elements inside, then return a union of those bboxes\n\n            var children = this.children();\n            var n = children.length;\n\n            if (n === 0) {\n                return this.getBBox({ target: options.target, recursive: false });\n            }\n\n            // recursion's initial pass-through setting:\n            // recursive passes-through just keep the target as whatever was set up here during the initial pass-through\n            if (!options.target) {\n                // transform children/descendants like this (their parent/ancestor)\n                options.target = this;\n            } // else transform children/descendants like target\n\n            for (var i = 0; i < n; i++) {\n                var currentChild = children[i];\n\n                var childBBox;\n\n                // if currentChild is not a group element, get its bbox with a nonrecursive call\n                if (currentChild.children().length === 0) {\n                    childBBox = currentChild.getBBox({ target: options.target, recursive: false });\n                } else {\n                    // if currentChild is a group element (determined by checking the number of children), enter it with a recursive call\n                    childBBox = currentChild.getBBox({ target: options.target, recursive: true });\n                }\n\n                if (!outputBBox) {\n                    // if this is the first iteration\n                    outputBBox = childBBox;\n                } else {\n                    // make a new bounding box rectangle that contains this child's bounding box and previous bounding box\n                    outputBBox = outputBBox.union(childBBox);\n                }\n            }\n\n            return outputBBox;\n        }\n    };\n\n    // Text() helpers\n\n    function createTextPathNode(attrs, vel) {\n        attrs || (attrs = {});\n        var textPathElement = V('textPath');\n        var d = attrs.d;\n        if (d && attrs['xlink:href'] === undefined) {\n            // If `opt.attrs` is a plain string, consider it to be directly the\n            // SVG path data for the text to go along (this is a shortcut).\n            // Otherwise if it is an object and contains the `d` property, then this is our path.\n            // Wrap the text in the SVG <textPath> element that points\n            // to a path defined by `opt.attrs` inside the `<defs>` element.\n            var linkedPath = V('path').attr('d', d).appendTo(vel.defs());\n            textPathElement.attr('xlink:href', '#' + linkedPath.id);\n        }\n        if (V.isObject(attrs)) {\n            // Set attributes on the `<textPath>`. The most important one\n            // is the `xlink:href` that points to our newly created `<path/>` element in `<defs/>`.\n            // Note that we also allow the following construct:\n            // `t.text('my text', { textPath: { 'xlink:href': '#my-other-path' } })`.\n            // In other words, one can completely skip the auto-creation of the path\n            // and use any other arbitrary path that is in the document.\n            textPathElement.attr(attrs);\n        }\n        return textPathElement.node;\n    }\n\n    function annotateTextLine(lineNode, lineAnnotations, opt) {\n        opt || (opt = {});\n        var includeAnnotationIndices = opt.includeAnnotationIndices;\n        var eol = opt.eol;\n        var lineHeight = opt.lineHeight;\n        var baseSize = opt.baseSize;\n        var maxFontSize = 0;\n        var fontMetrics = {};\n        var lastJ = lineAnnotations.length - 1;\n        for (var j = 0; j <= lastJ; j++) {\n            var annotation = lineAnnotations[j];\n            var fontSize = null;\n            if (V.isObject(annotation)) {\n                var annotationAttrs = annotation.attrs;\n                var vTSpan = V('tspan', annotationAttrs);\n                var tspanNode = vTSpan.node;\n                var t = annotation.t;\n                if (eol && j === lastJ) t += eol;\n                tspanNode.textContent = t;\n                // Per annotation className\n                var annotationClass = annotationAttrs['class'];\n                if (annotationClass) vTSpan.addClass(annotationClass);\n                // If `opt.includeAnnotationIndices` is `true`,\n                // set the list of indices of all the applied annotations\n                // in the `annotations` attribute. This list is a comma\n                // separated list of indices.\n                if (includeAnnotationIndices) vTSpan.attr('annotations', annotation.annotations);\n                // Check for max font size\n                fontSize = parseFloat(annotationAttrs['font-size']);\n                if (!isFinite(fontSize)) fontSize = baseSize;\n                if (fontSize && fontSize > maxFontSize) maxFontSize = fontSize;\n            } else {\n                if (eol && j === lastJ) annotation += eol;\n                tspanNode = document.createTextNode(annotation || ' ');\n                if (baseSize && baseSize > maxFontSize) maxFontSize = baseSize;\n            }\n            lineNode.appendChild(tspanNode);\n        }\n\n        if (maxFontSize) fontMetrics.maxFontSize = maxFontSize;\n        if (lineHeight) {\n            fontMetrics.lineHeight = lineHeight;\n        } else if (maxFontSize) {\n            fontMetrics.lineHeight = (maxFontSize * 1.2);\n        }\n        return fontMetrics;\n    }\n\n    var emRegex = /em$/;\n\n    function convertEmToPx(em, fontSize) {\n        var numerical = parseFloat(em);\n        if (emRegex.test(em)) return numerical * fontSize;\n        return numerical;\n    }\n\n    function calculateDY(alignment, linesMetrics, baseSizePx, lineHeight) {\n        if (!Array.isArray(linesMetrics)) return 0;\n        var n = linesMetrics.length;\n        if (!n) return 0;\n        var lineMetrics = linesMetrics[0];\n        var flMaxFont = convertEmToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n        var rLineHeights = 0;\n        var lineHeightPx = convertEmToPx(lineHeight, baseSizePx);\n        for (var i = 1; i < n; i++) {\n            lineMetrics = linesMetrics[i];\n            var iLineHeight = convertEmToPx(lineMetrics.lineHeight, baseSizePx) || lineHeightPx;\n            rLineHeights += iLineHeight;\n        }\n        var llMaxFont = convertEmToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n        var dy;\n        switch (alignment) {\n            case 'middle':\n                dy = (flMaxFont / 2) - (0.15 * llMaxFont) - (rLineHeights / 2);\n                break;\n            case 'bottom':\n                dy = -(0.25 * llMaxFont) - rLineHeights;\n                break;\n            default:\n            case 'top':\n                dy = (0.8 * flMaxFont);\n                break;\n        }\n        return dy;\n    }\n\n    VPrototype.text = function(content, opt) {\n\n        if (content && typeof content !== 'string') throw new Error('Vectorizer: text() expects the first argument to be a string.');\n\n        // Replace all spaces with the Unicode No-break space (http://www.fileformat.info/info/unicode/char/a0/index.htm).\n        // IE would otherwise collapse all spaces into one.\n        content = V.sanitizeText(content);\n        opt || (opt = {});\n        // Should we allow the text to be selected?\n        var displayEmpty = opt.displayEmpty;\n        // End of Line character\n        var eol = opt.eol;\n        // Text along path\n        var textPath = opt.textPath;\n        // Vertical shift\n        var verticalAnchor = opt.textVerticalAnchor;\n        var namedVerticalAnchor = (verticalAnchor === 'middle' || verticalAnchor === 'bottom' || verticalAnchor === 'top');\n        // Horizontal shift applied to all the lines but the first.\n        var x = opt.x;\n        if (x === undefined) x = this.attr('x') || 0;\n        // Annotations\n        var iai = opt.includeAnnotationIndices;\n        var annotations = opt.annotations;\n        if (annotations && !V.isArray(annotations)) annotations = [annotations];\n        // Shift all the <tspan> but first by one line (`1em`)\n        var defaultLineHeight = opt.lineHeight;\n        var autoLineHeight = (defaultLineHeight === 'auto');\n        var lineHeight = (autoLineHeight) ? '1.5em' : (defaultLineHeight || '1em');\n        // Clearing the element\n        this.empty();\n        this.attr({\n            // Preserve spaces. In other words, we do not want consecutive spaces to get collapsed to one.\n            'xml:space': 'preserve',\n            // An empty text gets rendered into the DOM in webkit-based browsers.\n            // In order to unify this behaviour across all browsers\n            // we rather hide the text element when it's empty.\n            'display': (content || displayEmpty) ? null : 'none'\n        });\n\n        // Set default font-size if none\n        var fontSize = parseFloat(this.attr('font-size'));\n        if (!fontSize) {\n            fontSize = 16;\n            if (namedVerticalAnchor || annotations) this.attr('font-size', fontSize);\n        }\n\n        var doc = document;\n        var containerNode;\n        if (textPath) {\n            // Now all the `<tspan>`s will be inside the `<textPath>`.\n            if (typeof textPath === 'string') textPath = { d: textPath };\n            containerNode = createTextPathNode(textPath, this);\n        } else {\n            containerNode = doc.createDocumentFragment();\n        }\n        var offset = 0;\n        var lines = content.split('\\n');\n        var linesMetrics = [];\n        var annotatedY;\n        for (var i = 0, lastI = lines.length - 1; i <= lastI; i++) {\n            var dy = lineHeight;\n            var lineClassName = 'v-line';\n            var lineNode = doc.createElementNS(ns.svg, 'tspan');\n            var line = lines[i];\n            var lineMetrics;\n            if (line) {\n                if (annotations) {\n                    // Find the *compacted* annotations for this line.\n                    var lineAnnotations = V.annotateString(line, annotations, {\n                        offset: -offset,\n                        includeAnnotationIndices: iai\n                    });\n                    lineMetrics = annotateTextLine(lineNode, lineAnnotations, {\n                        includeAnnotationIndices: iai,\n                        eol: (i !== lastI && eol),\n                        lineHeight: (autoLineHeight) ? null : lineHeight,\n                        baseSize: fontSize\n                    });\n                    // Get the line height based on the biggest font size in the annotations for this line.\n                    var iLineHeight = lineMetrics.lineHeight;\n                    if (iLineHeight && autoLineHeight && i !== 0) dy = iLineHeight;\n                    if (i === 0) annotatedY = lineMetrics.maxFontSize * 0.8;\n                } else {\n                    if (eol && i !== lastI) line += eol;\n                    lineNode.textContent = line;\n                }\n            } else {\n                // Make sure the textContent is never empty. If it is, add a dummy\n                // character and make it invisible, making the following lines correctly\n                // relatively positioned. `dy=1em` won't work with empty lines otherwise.\n                lineNode.textContent = '-';\n                lineClassName += ' v-empty-line';\n                // 'opacity' needs to be specified with fill, stroke. Opacity without specification\n                // is not applied in Firefox\n                var lineNodeStyle = lineNode.style;\n                lineNodeStyle.fillOpacity = 0;\n                lineNodeStyle.strokeOpacity = 0;\n                if (annotations) {\n                    // Empty line with annotations.\n                    lineMetrics = {};\n                    lineAnnotations = V.findAnnotationsAtIndex(annotations, offset);\n                    let lineFontSize = fontSize;\n                    // Check if any of the annotations overrides the font size.\n                    for (let j = lineAnnotations.length; j > 0; j--) {\n                        const attrs = lineAnnotations[j - 1].attrs;\n                        if (!attrs || !('font-size' in attrs)) continue;\n                        const fs = parseFloat(attrs['font-size']);\n                        if (isFinite(fs)) {\n                            lineFontSize = fs;\n                            break;\n                        }\n                    }\n                    if (autoLineHeight) {\n                        if (i > 0) {\n                            dy = lineFontSize * 1.2;\n                        } else {\n                            annotatedY = lineFontSize * 0.8;\n                        }\n                    }\n                    // The font size is important for the native selection box height.\n                    lineNode.setAttribute('font-size', lineFontSize);\n                    lineMetrics.maxFontSize = lineFontSize;\n                }\n            }\n            if (lineMetrics) linesMetrics.push(lineMetrics);\n            if (i > 0) lineNode.setAttribute('dy', dy);\n            // Firefox requires 'x' to be set on the first line when inside a text path\n            if (i > 0 || textPath) lineNode.setAttribute('x', x);\n            lineNode.className.baseVal = lineClassName;\n            containerNode.appendChild(lineNode);\n            offset += line.length + 1;      // + 1 = newline character.\n        }\n        // Y Alignment calculation\n        if (namedVerticalAnchor) {\n            if (annotations) {\n                dy = calculateDY(verticalAnchor, linesMetrics, fontSize, lineHeight);\n            } else if (verticalAnchor === 'top') {\n                // A shortcut for top alignment. It does not depend on font-size nor line-height\n                dy = '0.8em';\n            } else {\n                var rh; // remaining height\n                if (lastI > 0) {\n                    rh = parseFloat(lineHeight) || 1;\n                    rh *= lastI;\n                    if (!emRegex.test(lineHeight)) rh /= fontSize;\n                } else {\n                    // Single-line text\n                    rh = 0;\n                }\n                switch (verticalAnchor) {\n                    case 'middle':\n                        dy = (0.3 - (rh / 2)) + 'em';\n                        break;\n                    case 'bottom':\n                        dy = (-rh - 0.3) + 'em';\n                        break;\n                }\n            }\n        } else {\n            if (verticalAnchor === 0) {\n                dy = '0em';\n            } else if (verticalAnchor) {\n                dy = verticalAnchor;\n            } else {\n                // No vertical anchor is defined\n                dy = 0;\n                // Backwards compatibility - we change the `y` attribute instead of `dy`.\n                if (this.attr('y') === null) this.attr('y', annotatedY || '0.8em');\n            }\n        }\n        containerNode.firstChild.setAttribute('dy', dy);\n        // Appending lines to the element.\n        this.append(containerNode);\n        return this;\n    };\n\n    /**\n     * @public\n     * @param {string} name\n     * @returns {Vectorizer}\n     */\n    VPrototype.removeAttr = function(name) {\n\n        var qualifiedName = V.qualifyAttr(name);\n        var el = this.node;\n\n        if (qualifiedName.ns) {\n            if (el.hasAttributeNS(qualifiedName.ns, qualifiedName.local)) {\n                el.removeAttributeNS(qualifiedName.ns, qualifiedName.local);\n            }\n        } else if (el.hasAttribute(name)) {\n            el.removeAttribute(name);\n        }\n        return this;\n    };\n\n    VPrototype.attr = function(name, value) {\n\n        if (V.isUndefined(name)) {\n\n            // Return all attributes.\n            var attributes = this.node.attributes;\n            var attrs = {};\n\n            for (var i = 0; i < attributes.length; i++) {\n                attrs[attributes[i].name] = attributes[i].value;\n            }\n\n            return attrs;\n        }\n\n        if (V.isString(name) && V.isUndefined(value)) {\n            return this.node.getAttribute(name);\n        }\n\n        if (typeof name === 'object') {\n\n            for (var attrName in name) {\n                if (name.hasOwnProperty(attrName)) {\n                    this.setAttribute(attrName, name[attrName]);\n                }\n            }\n\n        } else {\n\n            this.setAttribute(name, value);\n        }\n\n        return this;\n    };\n\n    VPrototype.normalizePath = function() {\n\n        var tagName = this.tagName();\n        if (tagName === 'PATH') {\n            this.attr('d', V.normalizePathData(this.attr('d')));\n        }\n\n        return this;\n    };\n\n    VPrototype.remove = function() {\n\n        if (this.node.parentNode) {\n            this.node.parentNode.removeChild(this.node);\n        }\n\n        return this;\n    };\n\n    VPrototype.empty = function() {\n\n        while (this.node.firstChild) {\n            this.node.removeChild(this.node.firstChild);\n        }\n\n        return this;\n    };\n\n    /**\n     * @private\n     * @param {object} attrs\n     * @returns {Vectorizer}\n     */\n    VPrototype.setAttributes = function(attrs) {\n\n        for (var key in attrs) {\n            if (attrs.hasOwnProperty(key)) {\n                this.setAttribute(key, attrs[key]);\n            }\n        }\n\n        return this;\n    };\n\n    VPrototype.append = function(els) {\n\n        if (!V.isArray(els)) {\n            els = [els];\n        }\n\n        for (var i = 0, len = els.length; i < len; i++) {\n            this.node.appendChild(V.toNode(els[i])); // lgtm [js/xss-through-dom]\n        }\n\n        return this;\n    };\n\n    VPrototype.prepend = function(els) {\n\n        var child = this.node.firstChild;\n        return child ? V(child).before(els) : this.append(els);\n    };\n\n    VPrototype.before = function(els) {\n\n        var node = this.node;\n        var parent = node.parentNode;\n\n        if (parent) {\n\n            if (!V.isArray(els)) {\n                els = [els];\n            }\n\n            for (var i = 0, len = els.length; i < len; i++) {\n                parent.insertBefore(V.toNode(els[i]), node);\n            }\n        }\n\n        return this;\n    };\n\n    VPrototype.appendTo = function(node) {\n        V.toNode(node).appendChild(this.node); // lgtm [js/xss-through-dom]\n        return this;\n    };\n\n    VPrototype.svg = function() {\n\n        return this.node instanceof window.SVGSVGElement ? this : V(this.node.ownerSVGElement);\n    };\n\n    VPrototype.tagName = function() {\n\n        return this.node.tagName.toUpperCase();\n    };\n\n    VPrototype.defs = function() {\n        var context = this.svg() || this;\n        var defsNode = context.node.getElementsByTagName('defs')[0];\n        if (defsNode) return V(defsNode);\n        return V('defs').appendTo(context);\n    };\n\n    VPrototype.clone = function() {\n\n        var clone = V(this.node.cloneNode(true/* deep */));\n        // Note that clone inherits also ID. Therefore, we need to change it here.\n        clone.node.id = V.uniqueId();\n        return clone;\n    };\n\n    VPrototype.findOne = function(selector) {\n\n        var found = this.node.querySelector(selector);\n        return found ? V(found) : undefined;\n    };\n\n    VPrototype.find = function(selector) {\n\n        var vels = [];\n        var nodes = this.node.querySelectorAll(selector);\n\n        if (nodes) {\n\n            // Map DOM elements to `V`s.\n            for (var i = 0; i < nodes.length; i++) {\n                vels.push(V(nodes[i]));\n            }\n        }\n\n        return vels;\n    };\n\n    // Returns an array of V elements made from children of this.node.\n    VPrototype.children = function() {\n\n        var children = this.node.childNodes;\n\n        var outputArray = [];\n        for (var i = 0; i < children.length; i++) {\n            var currentChild = children[i];\n            if (currentChild.nodeType === 1) {\n                outputArray.push(V(children[i]));\n            }\n        }\n        return outputArray;\n    };\n\n    // Returns the V element from parentNode of this.node.\n    VPrototype.parent = function() {\n        return V(this.node.parentNode) || null;\n    },\n\n    // Find an index of an element inside its container.\n    VPrototype.index = function() {\n\n        var index = 0;\n        var node = this.node.previousSibling;\n\n        while (node) {\n            // nodeType 1 for ELEMENT_NODE\n            if (node.nodeType === 1) index++;\n            node = node.previousSibling;\n        }\n\n        return index;\n    };\n\n    VPrototype.findParentByClass = function(className, terminator) {\n\n        var ownerSVGElement = this.node.ownerSVGElement;\n        var node = this.node.parentNode;\n\n        while (node && node !== terminator && node !== ownerSVGElement) {\n\n            var vel = V(node);\n            if (vel.hasClass(className)) {\n                return vel;\n            }\n\n            node = node.parentNode;\n        }\n\n        return null;\n    };\n\n    // https://jsperf.com/get-common-parent\n    VPrototype.contains = function(el) {\n\n        var a = this.node;\n        var b = V.toNode(el);\n        var bup = b && b.parentNode;\n\n        return (a === bup) || !!(bup && bup.nodeType === 1 && (a.compareDocumentPosition(bup) & 16));\n    };\n\n    // Convert global point into the coordinate space of this element.\n    VPrototype.toLocalPoint = function(x, y) {\n\n        var svg = this.svg().node;\n\n        var p = svg.createSVGPoint();\n        p.x = x;\n        p.y = y;\n\n        try {\n\n            var globalPoint = p.matrixTransform(svg.getScreenCTM().inverse());\n            var globalToLocalMatrix = this.getTransformToElement(svg).inverse();\n\n        } catch (e) {\n            // IE9 throws an exception in odd cases. (`Unexpected call to method or property access`)\n            // We have to make do with the original coordianates.\n            return p;\n        }\n\n        return globalPoint.matrixTransform(globalToLocalMatrix);\n    };\n\n    VPrototype.translateCenterToPoint = function(p) {\n\n        var bbox = this.getBBox({ target: this.svg() });\n        var center = bbox.center();\n\n        this.translate(p.x - center.x, p.y - center.y);\n        return this;\n    };\n\n    // Efficiently auto-orient an element. This basically implements the orient=auto attribute\n    // of markers. The easiest way of understanding on what this does is to imagine the element is an\n    // arrowhead. Calling this method on the arrowhead makes it point to the `position` point while\n    // being auto-oriented (properly rotated) towards the `reference` point.\n    // `target` is the element relative to which the transformations are applied. Usually a viewport.\n    VPrototype.translateAndAutoOrient = function(position, reference, target) {\n\n        position = new g.Point(position);\n        reference =  new g.Point(reference);\n        target || (target = this.svg());\n\n        // Clean-up previously set transformations except the scale. If we didn't clean up the\n        // previous transformations then they'd add up with the old ones. Scale is an exception as\n        // it doesn't add up, consider: `this.scale(2).scale(2).scale(2)`. The result is that the\n        // element is scaled by the factor 2, not 8.\n        var scale = this.scale();\n        this.attr('transform', '');\n        var bbox = this.getBBox({ target: target }).scale(scale.sx, scale.sy);\n\n        // 1. Translate to origin.\n        var translateToOrigin = V.createSVGTransform();\n        translateToOrigin.setTranslate(-bbox.x - bbox.width / 2, -bbox.y - bbox.height / 2);\n\n        // 2. Rotate around origin.\n        var rotateAroundOrigin = V.createSVGTransform();\n        var angle = position.angleBetween(reference, position.clone().offset(1, 0));\n        if (angle) rotateAroundOrigin.setRotate(angle, 0, 0);\n\n        // 3. Translate to the `position` + the offset (half my width) towards the `reference` point.\n        var translateFromOrigin = V.createSVGTransform();\n        var finalPosition = position.clone().move(reference, bbox.width / 2);\n        translateFromOrigin.setTranslate(2 * position.x - finalPosition.x, 2 * position.y - finalPosition.y);\n\n        // 4. Get the current transformation matrix of this node\n        var ctm = this.getTransformToElement(target);\n\n        // 5. Apply transformations and the scale\n        var transform = V.createSVGTransform();\n        transform.setMatrix(\n            translateFromOrigin.matrix.multiply(\n                rotateAroundOrigin.matrix.multiply(\n                    translateToOrigin.matrix.multiply(\n                        ctm.scale(scale.sx, scale.sy)))));\n\n        this.attr('transform', V.matrixToTransformString(transform.matrix));\n\n        return this;\n    };\n\n    VPrototype.animateAlongPath = function(attrs, path) {\n\n        path = V.toNode(path);\n\n        var id = V.ensureId(path);\n        var animateMotion = V('animateMotion', attrs);\n        var mpath = V('mpath', { 'xlink:href': '#' + id });\n\n        animateMotion.append(mpath);\n\n        this.append(animateMotion);\n        try {\n            animateMotion.node.beginElement();\n        } catch (e) {\n            // Fallback for IE 9.\n            // Run the animation programmatically if FakeSmile (`http://leunen.me/fakesmile/`) present\n            if (document.documentElement.getAttribute('smiling') === 'fake') {\n                /* global getTargets:true, Animator:true, animators:true id2anim:true */\n                // Register the animation. (See `https://answers.launchpad.net/smil/+question/203333`)\n                var animation = animateMotion.node;\n                animation.animators = [];\n\n                var animationID = animation.getAttribute('id');\n                if (animationID) id2anim[animationID] = animation;\n\n                var targets = getTargets(animation);\n                for (var i = 0, len = targets.length; i < len; i++) {\n                    var target = targets[i];\n                    var animator = new Animator(animation, target, i);\n                    animators.push(animator);\n                    animation.animators[i] = animator;\n                    animator.register();\n                }\n            }\n        }\n        return this;\n    };\n\n\n    // Split a string into an array of tokens.\n    // https://infra.spec.whatwg.org/#ascii-whitespace\n    const noHTMLWhitespaceRegex = /[^\\x20\\t\\r\\n\\f]+/g;\n    function getTokenList(str) {\n        if (!V.isString(str)) return [];\n        return str.trim().match(noHTMLWhitespaceRegex) || [];\n    }\n\n    VPrototype.hasClass = function(className) {\n        if (!V.isString(className)) return false;\n        return this.node.classList.contains(className.trim());\n    };\n\n    VPrototype.addClass = function(className) {\n        this.node.classList.add(...getTokenList(className));\n        return this;\n    };\n\n    VPrototype.removeClass = function(className) {\n        this.node.classList.remove(...getTokenList(className));\n        return this;\n    };\n\n    VPrototype.toggleClass = function(className, toAdd) {\n        const tokens = getTokenList(className);\n        for (let i = 0; i < tokens.length; i++) {\n            this.node.classList.toggle(tokens[i], toAdd);\n        }\n        return this;\n    };\n\n    // Interpolate path by discrete points. The precision of the sampling\n    // is controlled by `interval`. In other words, `sample()` will generate\n    // a point on the path starting at the beginning of the path going to the end\n    // every `interval` pixels.\n    // The sampler can be very useful for e.g. finding intersection between two\n    // paths (finding the two closest points from two samples).\n    VPrototype.sample = function(interval) {\n\n        interval = interval || 1;\n        var node = this.node;\n        var length = node.getTotalLength();\n        var samples = [];\n        var distance = 0;\n        var sample;\n        while (distance < length) {\n            sample = node.getPointAtLength(distance);\n            samples.push({ x: sample.x, y: sample.y, distance: distance });\n            distance += interval;\n        }\n        return samples;\n    };\n\n    VPrototype.convertToPath = function() {\n\n        var path = V('path');\n        path.attr(this.attr());\n        var d = this.convertToPathData();\n        if (d) {\n            path.attr('d', d);\n        }\n        return path;\n    };\n\n    VPrototype.convertToPathData = function() {\n\n        var tagName = this.tagName();\n\n        switch (tagName) {\n            case 'PATH':\n                return this.attr('d');\n            case 'LINE':\n                return V.convertLineToPathData(this.node);\n            case 'POLYGON':\n                return V.convertPolygonToPathData(this.node);\n            case 'POLYLINE':\n                return V.convertPolylineToPathData(this.node);\n            case 'ELLIPSE':\n                return V.convertEllipseToPathData(this.node);\n            case 'CIRCLE':\n                return V.convertCircleToPathData(this.node);\n            case 'RECT':\n                return V.convertRectToPathData(this.node);\n        }\n\n        throw new Error(tagName + ' cannot be converted to PATH.');\n    };\n\n    V.prototype.toGeometryShape = function() {\n        var x, y, width, height, cx, cy, r, rx, ry, points, d, x1, x2, y1, y2;\n        switch (this.tagName()) {\n\n            case 'RECT':\n                x = parseFloat(this.attr('x')) || 0;\n                y = parseFloat(this.attr('y')) || 0;\n                width = parseFloat(this.attr('width')) || 0;\n                height = parseFloat(this.attr('height')) || 0;\n                return new g.Rect(x, y, width, height);\n\n            case 'CIRCLE':\n                cx = parseFloat(this.attr('cx')) || 0;\n                cy = parseFloat(this.attr('cy')) || 0;\n                r = parseFloat(this.attr('r')) || 0;\n                return new g.Ellipse({ x: cx, y: cy }, r, r);\n\n            case 'ELLIPSE':\n                cx = parseFloat(this.attr('cx')) || 0;\n                cy = parseFloat(this.attr('cy')) || 0;\n                rx = parseFloat(this.attr('rx')) || 0;\n                ry = parseFloat(this.attr('ry')) || 0;\n                return new g.Ellipse({ x: cx, y: cy }, rx, ry);\n\n            case 'POLYLINE':\n                points = V.getPointsFromSvgNode(this);\n                return new g.Polyline(points);\n\n            case 'POLYGON':\n                points = V.getPointsFromSvgNode(this);\n                if (points.length > 1) points.push(points[0]);\n                return new g.Polyline(points);\n\n            case 'PATH':\n                d = this.attr('d');\n                if (!g.Path.isDataSupported(d)) d = V.normalizePathData(d);\n                return new g.Path(d);\n\n            case 'LINE':\n                x1 = parseFloat(this.attr('x1')) || 0;\n                y1 = parseFloat(this.attr('y1')) || 0;\n                x2 = parseFloat(this.attr('x2')) || 0;\n                y2 = parseFloat(this.attr('y2')) || 0;\n                return new g.Line({ x: x1, y: y1 }, { x: x2, y: y2 });\n        }\n\n        // Anything else is a rectangle\n        return this.getBBox();\n    };\n\n    // Find the intersection of a line starting in the center\n    // of the SVG `node` ending in the point `ref`.\n    // `target` is an SVG element to which `node`s transformations are relative to.\n    // Note that `ref` point must be in the coordinate system of the `target` for this function to work properly.\n    // Returns a point in the `target` coordinate system (the same system as `ref` is in) if\n    // an intersection is found. Returns `undefined` otherwise.\n    VPrototype.findIntersection = function(ref, target) {\n\n        var svg = this.svg().node;\n        target = target || svg;\n        var bbox = this.getBBox({ target: target });\n        var center = bbox.center();\n\n        if (!bbox.intersectionWithLineFromCenterToPoint(ref)) return undefined;\n\n        var spot;\n        var tagName = this.tagName();\n\n        // Little speed up optimization for `<rect>` element. We do not do conversion\n        // to path element and sampling but directly calculate the intersection through\n        // a transformed geometrical rectangle.\n        if (tagName === 'RECT') {\n\n            var gRect = new g.Rect(\n                parseFloat(this.attr('x') || 0),\n                parseFloat(this.attr('y') || 0),\n                parseFloat(this.attr('width')),\n                parseFloat(this.attr('height'))\n            );\n            // Get the rect transformation matrix with regards to the SVG document.\n            var rectMatrix = this.getTransformToElement(target);\n            // Decompose the matrix to find the rotation angle.\n            var rectMatrixComponents = V.decomposeMatrix(rectMatrix);\n            // Now we want to rotate the rectangle back so that we\n            // can use `intersectionWithLineFromCenterToPoint()` passing the angle as the second argument.\n            var resetRotation = svg.createSVGTransform();\n            resetRotation.setRotate(-rectMatrixComponents.rotation, center.x, center.y);\n            var rect = V.transformRect(gRect, resetRotation.matrix.multiply(rectMatrix));\n            spot = (new g.Rect(rect)).intersectionWithLineFromCenterToPoint(ref, rectMatrixComponents.rotation);\n\n        } else if (tagName === 'PATH' || tagName === 'POLYGON' || tagName === 'POLYLINE' || tagName === 'CIRCLE' || tagName === 'ELLIPSE') {\n\n            var pathNode = (tagName === 'PATH') ? this : this.convertToPath();\n            var samples = pathNode.sample();\n            var minDistance = Infinity;\n            var closestSamples = [];\n\n            var i, sample, gp, centerDistance, refDistance, distance;\n\n            for (i = 0; i < samples.length; i++) {\n\n                sample = samples[i];\n                // Convert the sample point in the local coordinate system to the global coordinate system.\n                gp = V.createSVGPoint(sample.x, sample.y);\n                gp = gp.matrixTransform(this.getTransformToElement(target));\n                sample = new g.Point(gp);\n                centerDistance = sample.distance(center);\n                // Penalize a higher distance to the reference point by 10%.\n                // This gives better results. This is due to\n                // inaccuracies introduced by rounding errors and getPointAtLength() returns.\n                refDistance = sample.distance(ref) * 1.1;\n                distance = centerDistance + refDistance;\n\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    closestSamples = [{ sample: sample, refDistance: refDistance }];\n                } else if (distance < minDistance + 1) {\n                    closestSamples.push({ sample: sample, refDistance: refDistance });\n                }\n            }\n\n            closestSamples.sort(function(a, b) {\n                return a.refDistance - b.refDistance;\n            });\n\n            if (closestSamples[0]) {\n                spot = closestSamples[0].sample;\n            }\n        }\n\n        return spot;\n    };\n\n    /**\n     * @private\n     * @param {string} name\n     * @param {string} value\n     * @returns {Vectorizer}\n     */\n    VPrototype.setAttribute = function(name, value) {\n\n        var el = this.node;\n\n        if (value === null) {\n            this.removeAttr(name);\n            return this;\n        }\n\n        var qualifiedName = V.qualifyAttr(name);\n\n        if (qualifiedName.ns) {\n            // Attribute names can be namespaced. E.g. `image` elements\n            // have a `xlink:href` attribute to set the source of the image.\n            el.setAttributeNS(qualifiedName.ns, name, value);\n        } else if (name === 'id') {\n            el.id = value;\n        } else {\n            el.setAttribute(name, value);\n        }\n\n        return this;\n    };\n\n    // Create an SVG document element.\n    // If `content` is passed, it will be used as the SVG content of the `<svg>` root element.\n    V.createSvgDocument = function(content) {\n\n        if (content) {\n            const XMLString = `<svg xmlns=\"${ns.svg}\" xmlns:xlink=\"${ns.xlink}\" version=\"${SVGVersion}\">${content}</svg>`;\n            const { documentElement } = V.parseXML(XMLString, { async: false });\n            return documentElement;\n        }\n\n        const svg = document.createElementNS(ns.svg, 'svg');\n        svg.setAttributeNS(ns.xmlns, 'xmlns:xlink', ns.xlink);\n        svg.setAttribute('version', SVGVersion);\n        return svg;\n    };\n\n    V.createSVGStyle = function(stylesheet) {\n        const { node } = V('style', { type: 'text/css' }, [\n            V.createCDATASection(stylesheet)\n        ]);\n        return node;\n    },\n\n    V.createCDATASection = function(data = '') {\n        const xml = document.implementation.createDocument(null, 'xml', null);\n        return xml.createCDATASection(data);\n    };\n\n    V.idCounter = 0;\n\n    // A function returning a unique identifier for this client session with every call.\n    V.uniqueId = function() {\n\n        return 'v-' + (++V.idCounter);\n    };\n\n    V.toNode = function(el) {\n\n        return V.isV(el) ? el.node : (el.nodeName && el || el[0]);\n    };\n\n    V.ensureId = function(node) {\n\n        node = V.toNode(node);\n        return node.id || (node.id = V.uniqueId());\n    };\n\n    // Replace all spaces with the Unicode No-break space (http://www.fileformat.info/info/unicode/char/a0/index.htm).\n    // IE would otherwise collapse all spaces into one. This is used in the text() method but it is\n    // also exposed so that the programmer can use it in case he needs to. This is useful e.g. in tests\n    // when you want to compare the actual DOM text content without having to add the unicode character in\n    // the place of all spaces.\n    V.sanitizeText = function(text) {\n\n        return (text || '').replace(/ /g, '\\u00A0');\n    };\n\n    V.isUndefined = function(value) {\n\n        return typeof value === 'undefined';\n    };\n\n    V.isString = function(value) {\n\n        return typeof value === 'string';\n    };\n\n    V.isObject = function(value) {\n\n        return value && (typeof value === 'object');\n    };\n\n    V.isArray = Array.isArray;\n\n    V.parseXML = function(data, opt) {\n\n        opt = opt || {};\n\n        var xml;\n\n        try {\n            var parser = new DOMParser();\n\n            if (!V.isUndefined(opt.async)) {\n                parser.async = opt.async;\n            }\n\n            xml = parser.parseFromString(data, 'text/xml');\n        } catch (error) {\n            xml = undefined;\n        }\n\n        if (!xml || xml.getElementsByTagName('parsererror').length) {\n            throw new Error('Invalid XML: ' + data);\n        }\n\n        return xml;\n    };\n\n    /**\n     * @param {string} name\n     * @returns {{ns: string|null, local: string}} namespace and attribute name\n     */\n    V.qualifyAttr = function(name) {\n\n        if (name.indexOf(':') !== -1) {\n            var combinedKey = name.split(':');\n            return {\n                ns: ns[combinedKey[0]],\n                local: combinedKey[1]\n            };\n        }\n\n        return {\n            ns: null,\n            local: name\n        };\n    };\n\n    // Note: This regex allows multiple commas as separator which is incorrect in SVG\n    // This regex is used by `split()`, so it doesn't need to use /g\n    V.transformSeparatorRegex = /[ ,]+/;\n    // Note: All following regexes are more restrictive than SVG specification\n    // ReDoS mitigation: Use an anchor at the beginning of the match\n    // ReDoS mitigation: Avoid backtracking (uses `[^()]+` instead of `.*?`)\n    // ReDoS mitigation: Don't match initial `(` inside repeated part\n    // The following regex needs to use /g (= cannot use capturing groups)\n    V.transformRegex = /\\b\\w+\\([^()]+\\)/g;\n    // The following regexes need to use capturing groups (= cannot use /g)\n    V.transformFunctionRegex = /\\b(\\w+)\\(([^()]+)\\)/;\n    V.transformTranslateRegex = /\\btranslate\\(([^()]+)\\)/;\n    V.transformRotateRegex = /\\brotate\\(([^()]+)\\)/;\n    V.transformScaleRegex = /\\bscale\\(([^()]+)\\)/;\n\n    V.transformStringToMatrix = function(transform) {\n\n        // Initialize result matrix as identity matrix\n        let transformationMatrix = V.createSVGMatrix();\n\n        // Note: Multiple transform functions are allowed in `transform` string\n        // `match()` returns `null` if none found\n        const transformMatches = transform && transform.match(V.transformRegex);\n        if (!transformMatches) {\n            // Return identity matrix\n            return transformationMatrix;\n        }\n\n        const numMatches = transformMatches.length;\n        for (let i = 0; i < numMatches; i++) {\n\n            const transformMatch = transformMatches[i];\n            // Use same regex as above, but with capturing groups\n            // `match()` returns values of capturing groups as `[1]`, `[2]`\n            const transformFunctionMatch = transformMatch.match(V.transformFunctionRegex);\n            if (transformFunctionMatch) {\n\n                let sx, sy, tx, ty, angle;\n                let ctm = V.createSVGMatrix();\n                const transformFunction = transformFunctionMatch[1].toLowerCase();\n                const args = transformFunctionMatch[2].split(V.transformSeparatorRegex);\n                switch (transformFunction) {\n\n                    case 'scale':\n                        sx = parseFloat(args[0]);\n                        sy = (args[1] === undefined) ? sx : parseFloat(args[1]);\n                        ctm = ctm.scaleNonUniform(sx, sy);\n                        break;\n\n                    case 'translate':\n                        tx = parseFloat(args[0]);\n                        ty = parseFloat(args[1]);\n                        ctm = ctm.translate(tx, ty);\n                        break;\n\n                    case 'rotate':\n                        angle = parseFloat(args[0]);\n                        tx = parseFloat(args[1]) || 0;\n                        ty = parseFloat(args[2]) || 0;\n                        if (tx !== 0 || ty !== 0) {\n                            ctm = ctm.translate(tx, ty).rotate(angle).translate(-tx, -ty);\n                        } else {\n                            ctm = ctm.rotate(angle);\n                        }\n                        break;\n\n                    case 'skewx':\n                        angle = parseFloat(args[0]);\n                        ctm = ctm.skewX(angle);\n                        break;\n\n                    case 'skewy':\n                        angle = parseFloat(args[0]);\n                        ctm = ctm.skewY(angle);\n                        break;\n\n                    case 'matrix':\n                        ctm.a = parseFloat(args[0]);\n                        ctm.b = parseFloat(args[1]);\n                        ctm.c = parseFloat(args[2]);\n                        ctm.d = parseFloat(args[3]);\n                        ctm.e = parseFloat(args[4]);\n                        ctm.f = parseFloat(args[5]);\n                        break;\n\n                    default:\n                        continue;\n                }\n\n                // Multiply current transformation into result matrix\n                transformationMatrix = transformationMatrix.multiply(ctm);\n            }\n\n        }\n        return transformationMatrix;\n    };\n\n    V.matrixToTransformString = function(matrix) {\n        matrix || (matrix = true);\n\n        return 'matrix(' +\n            (matrix.a !== undefined ? matrix.a : 1) + ',' +\n            (matrix.b !== undefined ? matrix.b : 0) + ',' +\n            (matrix.c !== undefined ? matrix.c : 0) + ',' +\n            (matrix.d !== undefined ? matrix.d : 1) + ',' +\n            (matrix.e !== undefined ? matrix.e : 0) + ',' +\n            (matrix.f !== undefined ? matrix.f : 0) +\n            ')';\n    };\n\n    V.parseTransformString = function(transform) {\n\n        var translate, rotate, scale;\n\n        if (transform) {\n\n            var separator = V.transformSeparatorRegex;\n\n            // Special handling for `transform` with one or more matrix functions\n            if (transform.trim().indexOf('matrix') >= 0) {\n\n                // Convert EVERYTHING in `transform` string to a matrix\n                // Will combine ALL matrixes * ALL translates * ALL scales * ALL rotates\n                // Note: In non-matrix case, we only take first one of each (if any)\n                var matrix = V.transformStringToMatrix(transform);\n                var decomposedMatrix = V.decomposeMatrix(matrix);\n\n                // Extract `translate`, `scale`, `rotate` from matrix\n                translate = [decomposedMatrix.translateX, decomposedMatrix.translateY];\n                scale = [decomposedMatrix.scaleX, decomposedMatrix.scaleY];\n                rotate = [decomposedMatrix.rotation];\n\n                // Rewrite `transform` string in `translate scale rotate` format\n                var transformations = [];\n                if (translate[0] !== 0 || translate[1] !== 0) {\n                    transformations.push('translate(' + translate + ')');\n                }\n                if (scale[0] !== 1 || scale[1] !== 1) {\n                    transformations.push('scale(' + scale + ')');\n                }\n                if (rotate[0] !== 0) {\n                    transformations.push('rotate(' + rotate + ')');\n                }\n                transform = transformations.join(' ');\n\n            } else {\n\n                // Extract `translate`, `rotate`, `scale` functions from `transform` string\n                // Note: We only detect the first match of each (if any)\n                // `match()` returns value of capturing group as `[1]`\n                const translateMatch = transform.match(V.transformTranslateRegex);\n                if (translateMatch) {\n                    translate = translateMatch[1].split(separator);\n                }\n                const rotateMatch = transform.match(V.transformRotateRegex);\n                if (rotateMatch) {\n                    rotate = rotateMatch[1].split(separator);\n                }\n                const scaleMatch = transform.match(V.transformScaleRegex);\n                if (scaleMatch) {\n                    scale = scaleMatch[1].split(separator);\n                }\n            }\n        }\n\n        var sx = (scale && scale[0]) ? parseFloat(scale[0]) : 1;\n\n        return {\n            value: transform,\n            translate: {\n                tx: (translate && translate[0]) ? parseInt(translate[0], 10) : 0,\n                ty: (translate && translate[1]) ? parseInt(translate[1], 10) : 0\n            },\n            rotate: {\n                angle: (rotate && rotate[0]) ? parseInt(rotate[0], 10) : 0,\n                cx: (rotate && rotate[1]) ? parseInt(rotate[1], 10) : undefined,\n                cy: (rotate && rotate[2]) ? parseInt(rotate[2], 10) : undefined\n            },\n            scale: {\n                sx: sx,\n                sy: (scale && scale[1]) ? parseFloat(scale[1]) : sx\n            }\n        };\n    };\n\n    V.deltaTransformPoint = function(matrix, point) {\n\n        var dx = point.x * matrix.a + point.y * matrix.c + 0;\n        var dy = point.x * matrix.b + point.y * matrix.d + 0;\n        return { x: dx, y: dy };\n    };\n\n    V.decomposeMatrix = function(matrix) {\n\n        // @see https://gist.github.com/2052247\n\n        // calculate delta transform point\n        var px = V.deltaTransformPoint(matrix, { x: 0, y: 1 });\n        var py = V.deltaTransformPoint(matrix, { x: 1, y: 0 });\n\n        // calculate skew\n        var skewX = ((180 / PI) * atan2(px.y, px.x) - 90);\n        var skewY = ((180 / PI) * atan2(py.y, py.x));\n\n        return {\n\n            translateX: matrix.e,\n            translateY: matrix.f,\n            scaleX: sqrt(matrix.a * matrix.a + matrix.b * matrix.b),\n            scaleY: sqrt(matrix.c * matrix.c + matrix.d * matrix.d),\n            skewX: skewX,\n            skewY: skewY,\n            rotation: skewX // rotation is the same as skew x\n        };\n    };\n\n    // Return the `scale` transformation from the following equation:\n    // `translate(tx, ty) . rotate(angle) . scale(sx, sy) === matrix(a,b,c,d,e,f)`\n    V.matrixToScale = function(matrix) {\n\n        var a, b, c, d;\n        if (matrix) {\n            a = V.isUndefined(matrix.a) ? 1 : matrix.a;\n            d = V.isUndefined(matrix.d) ? 1 : matrix.d;\n            b = matrix.b;\n            c = matrix.c;\n        } else {\n            a = d = 1;\n        }\n        return {\n            sx: b ? sqrt(a * a + b * b) : a,\n            sy: c ? sqrt(c * c + d * d) : d\n        };\n    };\n\n    // Return the `rotate` transformation from the following equation:\n    // `translate(tx, ty) . rotate(angle) . scale(sx, sy) === matrix(a,b,c,d,e,f)`\n    V.matrixToRotate = function(matrix) {\n\n        var p = { x: 0, y: 1 };\n        if (matrix) {\n            p = V.deltaTransformPoint(matrix, p);\n        }\n\n        return {\n            angle: g.normalizeAngle(g.toDeg(atan2(p.y, p.x)) - 90)\n        };\n    };\n\n    // Return the `translate` transformation from the following equation:\n    // `translate(tx, ty) . rotate(angle) . scale(sx, sy) === matrix(a,b,c,d,e,f)`\n    V.matrixToTranslate = function(matrix) {\n\n        return {\n            tx: (matrix && matrix.e) || 0,\n            ty: (matrix && matrix.f) || 0\n        };\n    };\n\n    V.isV = function(object) {\n\n        return object instanceof V;\n    };\n\n    // For backwards compatibility:\n    V.isVElement = V.isV;\n\n    // Element implements `getBBox()`, `getCTM()` and `getScreenCTM()`\n    // https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement\n    V.isSVGGraphicsElement = function(node) {\n        if (!node) return false;\n        node = V.toNode(node);\n        // IE/Edge does not implement SVGGraphicsElement interface, thus check for `getScreenCTM` below\n        return node instanceof SVGElement && typeof node.getScreenCTM === 'function';\n    };\n\n    var svgDocument = V('svg').node;\n\n    V.createSVGMatrix = function(matrix) {\n\n        var svgMatrix = svgDocument.createSVGMatrix();\n        for (var component in matrix) {\n            svgMatrix[component] = matrix[component];\n        }\n\n        return svgMatrix;\n    };\n\n    V.createSVGTransform = function(matrix) {\n\n        if (!V.isUndefined(matrix)) {\n\n            if (!(matrix instanceof SVGMatrix)) {\n                matrix = V.createSVGMatrix(matrix);\n            }\n\n            return svgDocument.createSVGTransformFromMatrix(matrix);\n        }\n\n        return svgDocument.createSVGTransform();\n    };\n\n    V.createSVGPoint = function(x, y) {\n\n        var p = svgDocument.createSVGPoint();\n        p.x = x;\n        p.y = y;\n        return p;\n    };\n\n    V.transformRect = function(r, matrix) {\n\n        var p = svgDocument.createSVGPoint();\n\n        p.x = r.x;\n        p.y = r.y;\n        var corner1 = p.matrixTransform(matrix);\n\n        p.x = r.x + r.width;\n        p.y = r.y;\n        var corner2 = p.matrixTransform(matrix);\n\n        p.x = r.x + r.width;\n        p.y = r.y + r.height;\n        var corner3 = p.matrixTransform(matrix);\n\n        p.x = r.x;\n        p.y = r.y + r.height;\n        var corner4 = p.matrixTransform(matrix);\n\n        var minX = min(corner1.x, corner2.x, corner3.x, corner4.x);\n        var maxX = max(corner1.x, corner2.x, corner3.x, corner4.x);\n        var minY = min(corner1.y, corner2.y, corner3.y, corner4.y);\n        var maxY = max(corner1.y, corner2.y, corner3.y, corner4.y);\n\n        return new g.Rect(minX, minY, maxX - minX, maxY - minY);\n    };\n\n    V.transformPoint = function(p, matrix) {\n\n        return new g.Point(V.createSVGPoint(p.x, p.y).matrixTransform(matrix));\n    };\n\n    V.transformLine = function(l, matrix) {\n\n        return new g.Line(\n            V.transformPoint(l.start, matrix),\n            V.transformPoint(l.end, matrix)\n        );\n    };\n\n    V.transformPolyline = function(p, matrix) {\n\n        var inPoints = (p instanceof g.Polyline) ? p.points : p;\n        if (!V.isArray(inPoints)) inPoints = [];\n        var outPoints = [];\n        for (var i = 0, n = inPoints.length; i < n; i++) outPoints[i] = V.transformPoint(inPoints[i], matrix);\n        return new g.Polyline(outPoints);\n    };\n\n    // Convert a style represented as string (e.g. `'fill=\"blue\"; stroke=\"red\"'`) to\n    // an object (`{ fill: 'blue', stroke: 'red' }`).\n    V.styleToObject = function(styleString) {\n        var ret = {};\n        var styles = styleString.split(';');\n        for (var i = 0; i < styles.length; i++) {\n            var style = styles[i];\n            var pair = style.split('=');\n            ret[pair[0].trim()] = pair[1].trim();\n        }\n        return ret;\n    };\n\n    // Inspired by d3.js https://github.com/mbostock/d3/blob/master/src/svg/arc.js\n    V.createSlicePathData = function(innerRadius, outerRadius, startAngle, endAngle) {\n\n        var svgArcMax = 2 * PI - 1e-6;\n        var r0 = innerRadius;\n        var r1 = outerRadius;\n        var a0 = startAngle;\n        var a1 = endAngle;\n        var da = (a1 < a0 && (da = a0, a0 = a1, a1 = da), a1 - a0);\n        var df = da < PI ? '0' : '1';\n        var c0 = cos(a0);\n        var s0 = sin(a0);\n        var c1 = cos(a1);\n        var s1 = sin(a1);\n\n        return (da >= svgArcMax)\n            ? (r0\n                ? 'M0,' + r1\n                + 'A' + r1 + ',' + r1 + ' 0 1,1 0,' + (-r1)\n                + 'A' + r1 + ',' + r1 + ' 0 1,1 0,' + r1\n                + 'M0,' + r0\n                + 'A' + r0 + ',' + r0 + ' 0 1,0 0,' + (-r0)\n                + 'A' + r0 + ',' + r0 + ' 0 1,0 0,' + r0\n                + 'Z'\n                : 'M0,' + r1\n                + 'A' + r1 + ',' + r1 + ' 0 1,1 0,' + (-r1)\n                + 'A' + r1 + ',' + r1 + ' 0 1,1 0,' + r1\n                + 'Z')\n            : (r0\n                ? 'M' + r1 * c0 + ',' + r1 * s0\n                + 'A' + r1 + ',' + r1 + ' 0 ' + df + ',1 ' + r1 * c1 + ',' + r1 * s1\n                + 'L' + r0 * c1 + ',' + r0 * s1\n                + 'A' + r0 + ',' + r0 + ' 0 ' + df + ',0 ' + r0 * c0 + ',' + r0 * s0\n                + 'Z'\n                : 'M' + r1 * c0 + ',' + r1 * s0\n                + 'A' + r1 + ',' + r1 + ' 0 ' + df + ',1 ' + r1 * c1 + ',' + r1 * s1\n                + 'L0,0'\n                + 'Z');\n    };\n\n    // Merge attributes from object `b` with attributes in object `a`.\n    // Note that this modifies the object `a`.\n    // Also important to note that attributes are merged but CSS classes are concatenated.\n    V.mergeAttrs = function(a, b) {\n\n        for (var attr in b) {\n\n            if (attr === 'class') {\n                // Concatenate classes.\n                a[attr] = a[attr] ? a[attr] + ' ' + b[attr] : b[attr];\n            } else if (attr === 'style') {\n                // `style` attribute can be an object.\n                if (V.isObject(a[attr]) && V.isObject(b[attr])) {\n                    // `style` stored in `a` is an object.\n                    a[attr] = V.mergeAttrs(a[attr], b[attr]);\n                } else if (V.isObject(a[attr])) {\n                    // `style` in `a` is an object but it's a string in `b`.\n                    // Convert the style represented as a string to an object in `b`.\n                    a[attr] = V.mergeAttrs(a[attr], V.styleToObject(b[attr]));\n                } else if (V.isObject(b[attr])) {\n                    // `style` in `a` is a string, in `b` it's an object.\n                    a[attr] = V.mergeAttrs(V.styleToObject(a[attr]), b[attr]);\n                } else {\n                    // Both styles are strings.\n                    a[attr] = V.mergeAttrs(V.styleToObject(a[attr]), V.styleToObject(b[attr]));\n                }\n            } else {\n                a[attr] = b[attr];\n            }\n        }\n\n        return a;\n    };\n\n    V.annotateString = function(t, annotations, opt) {\n\n        annotations = annotations || [];\n        opt = opt || {};\n\n        var offset = opt.offset || 0;\n        var compacted = [];\n        var batch;\n        var ret = [];\n        var item;\n        var prev;\n\n        for (var i = 0; i < t.length; i++) {\n\n            item = ret[i] = t[i];\n\n            for (var j = 0; j < annotations.length; j++) {\n\n                var annotation = annotations[j];\n                var start = annotation.start + offset;\n                var end = annotation.end + offset;\n\n                if (i >= start && i < end) {\n                    // Annotation applies.\n                    if (V.isObject(item)) {\n                        // There is more than one annotation to be applied => Merge attributes.\n                        item.attrs = V.mergeAttrs(V.mergeAttrs({}, item.attrs), annotation.attrs);\n                    } else {\n                        item = ret[i] = { t: t[i], attrs: annotation.attrs };\n                    }\n                    if (opt.includeAnnotationIndices) {\n                        (item.annotations || (item.annotations = [])).push(j);\n                    }\n                }\n            }\n\n            prev = ret[i - 1];\n\n            if (!prev) {\n\n                batch = item;\n\n            } else if (V.isObject(item) && V.isObject(prev)) {\n                // Both previous item and the current one are annotations. If the attributes\n                // didn't change, merge the text.\n                if (JSON.stringify(item.attrs) === JSON.stringify(prev.attrs)) {\n                    batch.t += item.t;\n                } else {\n                    compacted.push(batch);\n                    batch = item;\n                }\n\n            } else if (V.isObject(item)) {\n                // Previous item was a string, current item is an annotation.\n                compacted.push(batch);\n                batch = item;\n\n            } else if (V.isObject(prev)) {\n                // Previous item was an annotation, current item is a string.\n                compacted.push(batch);\n                batch = item;\n\n            } else {\n                // Both previous and current item are strings.\n                batch = (batch || '') + item;\n            }\n        }\n\n        if (batch) {\n            compacted.push(batch);\n        }\n\n        return compacted;\n    };\n\n    V.findAnnotationsAtIndex = function(annotations, index) {\n\n        var found = [];\n\n        if (annotations) {\n\n            annotations.forEach(function(annotation) {\n\n                if (annotation.start < index && index <= annotation.end) {\n                    found.push(annotation);\n                }\n            });\n        }\n\n        return found;\n    };\n\n    V.findAnnotationsBetweenIndexes = function(annotations, start, end) {\n\n        var found = [];\n\n        if (annotations) {\n\n            annotations.forEach(function(annotation) {\n\n                if ((start >= annotation.start && start < annotation.end) || (end > annotation.start && end <= annotation.end) || (annotation.start >= start && annotation.end < end)) {\n                    found.push(annotation);\n                }\n            });\n        }\n\n        return found;\n    };\n\n    // Shift all the text annotations after character `index` by `offset` positions.\n    V.shiftAnnotations = function(annotations, index, offset) {\n\n        if (annotations) {\n\n            annotations.forEach(function(annotation) {\n\n                if (annotation.start < index && annotation.end >= index) {\n                    annotation.end += offset;\n                } else if (annotation.start >= index) {\n                    annotation.start += offset;\n                    annotation.end += offset;\n                }\n            });\n        }\n\n        return annotations;\n    };\n\n    V.convertLineToPathData = function(line) {\n\n        line = V(line);\n        var d = [\n            'M', line.attr('x1'), line.attr('y1'),\n            'L', line.attr('x2'), line.attr('y2')\n        ].join(' ');\n        return d;\n    };\n\n    V.convertPolygonToPathData = function(polygon) {\n\n        var points = V.getPointsFromSvgNode(polygon);\n        if (points.length === 0) return null;\n\n        return V.svgPointsToPath(points) + ' Z';\n    };\n\n    V.convertPolylineToPathData = function(polyline) {\n\n        var points = V.getPointsFromSvgNode(polyline);\n        if (points.length === 0) return null;\n\n        return V.svgPointsToPath(points);\n    };\n\n    V.svgPointsToPath = function(points) {\n\n        for (var i = 0, n = points.length; i < n; i++) {\n            points[i] = points[i].x + ' ' + points[i].y;\n        }\n\n        return 'M ' + points.join(' L');\n    };\n\n    V.getPointsFromSvgNode = function(node) {\n\n        node = V.toNode(node);\n        var points = [];\n        var nodePoints = node.points;\n        if (nodePoints) {\n            for (var i = 0, n = nodePoints.numberOfItems; i < n; i++) {\n                points.push(nodePoints.getItem(i));\n            }\n        }\n\n        return points;\n    };\n\n    V.KAPPA = 0.551784;\n\n    V.convertCircleToPathData = function(circle) {\n\n        circle = V(circle);\n        var cx = parseFloat(circle.attr('cx')) || 0;\n        var cy = parseFloat(circle.attr('cy')) || 0;\n        var r = parseFloat(circle.attr('r'));\n        var cd = r * V.KAPPA; // Control distance.\n\n        var d = [\n            'M', cx, cy - r,    // Move to the first point.\n            'C', cx + cd, cy - r, cx + r, cy - cd, cx + r, cy, // I. Quadrant.\n            'C', cx + r, cy + cd, cx + cd, cy + r, cx, cy + r, // II. Quadrant.\n            'C', cx - cd, cy + r, cx - r, cy + cd, cx - r, cy, // III. Quadrant.\n            'C', cx - r, cy - cd, cx - cd, cy - r, cx, cy - r, // IV. Quadrant.\n            'Z'\n        ].join(' ');\n        return d;\n    };\n\n    V.convertEllipseToPathData = function(ellipse) {\n\n        ellipse = V(ellipse);\n        var cx = parseFloat(ellipse.attr('cx')) || 0;\n        var cy = parseFloat(ellipse.attr('cy')) || 0;\n        var rx = parseFloat(ellipse.attr('rx'));\n        var ry = parseFloat(ellipse.attr('ry')) || rx;\n        var cdx = rx * V.KAPPA; // Control distance x.\n        var cdy = ry * V.KAPPA; // Control distance y.\n\n        var d = [\n            'M', cx, cy - ry,    // Move to the first point.\n            'C', cx + cdx, cy - ry, cx + rx, cy - cdy, cx + rx, cy, // I. Quadrant.\n            'C', cx + rx, cy + cdy, cx + cdx, cy + ry, cx, cy + ry, // II. Quadrant.\n            'C', cx - cdx, cy + ry, cx - rx, cy + cdy, cx - rx, cy, // III. Quadrant.\n            'C', cx - rx, cy - cdy, cx - cdx, cy - ry, cx, cy - ry, // IV. Quadrant.\n            'Z'\n        ].join(' ');\n        return d;\n    };\n\n    V.convertRectToPathData = function(rect) {\n\n        rect = V(rect);\n\n        return V.rectToPath({\n            x: parseFloat(rect.attr('x')) || 0,\n            y: parseFloat(rect.attr('y')) || 0,\n            width: parseFloat(rect.attr('width')) || 0,\n            height: parseFloat(rect.attr('height')) || 0,\n            rx: parseFloat(rect.attr('rx')) || 0,\n            ry: parseFloat(rect.attr('ry')) || 0\n        });\n    };\n\n    // Convert a rectangle to SVG path commands. `r` is an object of the form:\n    // `{ x: [number], y: [number], width: [number], height: [number], top-ry: [number], top-ry: [number], bottom-rx: [number], bottom-ry: [number] }`,\n    // where `x, y, width, height` are the usual rectangle attributes and [top-/bottom-]rx/ry allows for\n    // specifying radius of the rectangle for all its sides (as opposed to the built-in SVG rectangle\n    // that has only `rx` and `ry` attributes).\n    V.rectToPath = function(r) {\n\n        var d;\n        var x = r.x;\n        var y = r.y;\n        var width = r.width;\n        var height = r.height;\n        var topRx = min(r.rx || r['top-rx'] || 0, width / 2);\n        var bottomRx = min(r.rx || r['bottom-rx'] || 0, width / 2);\n        var topRy = min(r.ry || r['top-ry'] || 0, height / 2);\n        var bottomRy = min(r.ry || r['bottom-ry'] || 0, height / 2);\n\n        if (topRx || bottomRx || topRy || bottomRy) {\n            d = [\n                'M', x, y + topRy,\n                'v', height - topRy - bottomRy,\n                'a', bottomRx, bottomRy, 0, 0, 0, bottomRx, bottomRy,\n                'h', width - 2 * bottomRx,\n                'a', bottomRx, bottomRy, 0, 0, 0, bottomRx, -bottomRy,\n                'v', -(height - bottomRy - topRy),\n                'a', topRx, topRy, 0, 0, 0, -topRx, -topRy,\n                'h', -(width - 2 * topRx),\n                'a', topRx, topRy, 0, 0, 0, -topRx, topRy,\n                'Z'\n            ];\n        } else {\n            d = [\n                'M', x, y,\n                'H', x + width,\n                'V', y + height,\n                'H', x,\n                'V', y,\n                'Z'\n            ];\n        }\n\n        return d.join(' ');\n    };\n\n    // Take a path data string\n    // Return a normalized path data string\n    // If data cannot be parsed, return 'M 0 0'\n    // Adapted from Rappid normalizePath polyfill\n    // Highly inspired by Raphael Library (www.raphael.com)\n    V.normalizePathData = (function() {\n\n        var spaces = '\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029';\n        var pathCommand = new RegExp('([a-z])[' + spaces + ',]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[' + spaces + ']*,?[' + spaces + ']*)+)', 'ig');\n        var pathValues = new RegExp('(-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?)[' + spaces + ']*,?[' + spaces + ']*', 'ig');\n\n        var math = Math;\n        var PI = math.PI;\n        var sin = math.sin;\n        var cos = math.cos;\n        var tan = math.tan;\n        var asin = math.asin;\n        var sqrt = math.sqrt;\n        var abs = math.abs;\n\n        function q2c(x1, y1, ax, ay, x2, y2) {\n\n            var _13 = 1 / 3;\n            var _23 = 2 / 3;\n            return [(_13 * x1) + (_23 * ax), (_13 * y1) + (_23 * ay), (_13 * x2) + (_23 * ax), (_13 * y2) + (_23 * ay), x2, y2];\n        }\n\n        function rotate(x, y, rad) {\n\n            var X = (x * cos(rad)) - (y * sin(rad));\n            var Y = (x * sin(rad)) + (y * cos(rad));\n            return { x: X, y: Y };\n        }\n\n        function a2c(x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n            // for more information of where this math came from visit:\n            // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n            var _120 = (PI * 120) / 180;\n            var rad = (PI / 180) * (+angle || 0);\n            var res = [];\n            var xy;\n\n            if (!recursive) {\n                xy = rotate(x1, y1, -rad);\n                x1 = xy.x;\n                y1 = xy.y;\n\n                xy = rotate(x2, y2, -rad);\n                x2 = xy.x;\n                y2 = xy.y;\n\n                var x = (x1 - x2) / 2;\n                var y = (y1 - y2) / 2;\n                var h = ((x * x) / (rx * rx)) + ((y * y) / (ry * ry));\n\n                if (h > 1) {\n                    h = sqrt(h);\n                    rx = h * rx;\n                    ry = h * ry;\n                }\n\n                var rx2 = rx * rx;\n                var ry2 = ry * ry;\n\n                var k = ((large_arc_flag == sweep_flag) ? -1 : 1) * sqrt(abs(((rx2 * ry2) - (rx2 * y * y) - (ry2 * x * x)) / ((rx2 * y * y) + (ry2 * x * x))));\n\n                var cx = ((k * rx * y) / ry) + ((x1 + x2) / 2);\n                var cy = ((k * -ry * x) / rx) + ((y1 + y2) / 2);\n\n                var f1 = asin(((y1 - cy) / ry).toFixed(9));\n                var f2 = asin(((y2 - cy) / ry).toFixed(9));\n\n                f1 = ((x1 < cx) ? (PI - f1) : f1);\n                f2 = ((x2 < cx) ? (PI - f2) : f2);\n\n                if (f1 < 0) f1 = (PI * 2) + f1;\n                if (f2 < 0) f2 = (PI * 2) + f2;\n\n                if (sweep_flag && (f1 > f2)) f1 = f1 - (PI * 2);\n                if (!sweep_flag && (f2 > f1)) f2 = f2 - (PI * 2);\n\n            } else {\n                f1 = recursive[0];\n                f2 = recursive[1];\n                cx = recursive[2];\n                cy = recursive[3];\n            }\n\n            var df = f2 - f1;\n            if (abs(df) > _120) {\n                var f2old = f2;\n                var x2old = x2;\n                var y2old = y2;\n                f2 = f1 + (_120 * ((sweep_flag && (f2 > f1)) ? 1 : -1));\n                x2 = cx + (rx * cos(f2));\n                y2 = cy + (ry * sin(f2));\n                res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\n            }\n\n            df = f2 - f1;\n\n            var c1 = cos(f1);\n            var s1 = sin(f1);\n            var c2 = cos(f2);\n            var s2 = sin(f2);\n            var t = tan(df / 4);\n            var hx = (4 / 3) * (rx * t);\n            var hy = (4 / 3) * (ry * t);\n            var m1 = [x1, y1];\n            var m2 = [x1 + (hx * s1), y1 - (hy * c1)];\n            var m3 = [x2 + (hx * s2), y2 - (hy * c2)];\n            var m4 = [x2, y2];\n\n            m2[0] = (2 * m1[0]) - m2[0];\n            m2[1] = (2 * m1[1]) - m2[1];\n\n            if (recursive) {\n                return [m2, m3, m4].concat(res);\n            } else {\n                res = [m2, m3, m4].concat(res).join().split(',');\n                var newres = [];\n                var ii = res.length;\n                for (var i = 0; i < ii; i++) {\n                    newres[i] = (i % 2) ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n                }\n                return newres;\n            }\n        }\n\n        function parsePathString(pathString) {\n\n            if (!pathString) return null;\n\n            var paramCounts = { a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0 };\n            var data = [];\n\n            String(pathString).replace(pathCommand, function(a, b, c) {\n\n                var params = [];\n                var name = b.toLowerCase();\n                c.replace(pathValues, function(a, b) {\n                    if (b) params.push(+b);\n                });\n\n                if ((name === 'm') && (params.length > 2)) {\n                    data.push([b].concat(params.splice(0, 2)));\n                    name = 'l';\n                    b = ((b === 'm') ? 'l' : 'L');\n                }\n\n                while (params.length >= paramCounts[name]) {\n                    data.push([b].concat(params.splice(0, paramCounts[name])));\n                    if (!paramCounts[name]) break;\n                }\n            });\n\n            return data;\n        }\n\n        function pathToAbsolute(pathArray) {\n\n            if (!Array.isArray(pathArray) || !Array.isArray(pathArray && pathArray[0])) { // rough assumption\n                pathArray = parsePathString(pathArray);\n            }\n\n            // if invalid string, return 'M 0 0'\n            if (!pathArray || !pathArray.length) return [['M', 0, 0]];\n\n            var res = [];\n            var x = 0;\n            var y = 0;\n            var mx = 0;\n            var my = 0;\n            var start = 0;\n            var pa0;\n\n            var ii = pathArray.length;\n            for (var i = start; i < ii; i++) {\n\n                var r = [];\n                res.push(r);\n\n                var pa = pathArray[i];\n                pa0 = pa[0];\n\n                if (pa0 != pa0.toUpperCase()) {\n                    r[0] = pa0.toUpperCase();\n\n                    var jj;\n                    var j;\n                    switch (r[0]) {\n                        case 'A':\n                            r[1] = pa[1];\n                            r[2] = pa[2];\n                            r[3] = pa[3];\n                            r[4] = pa[4];\n                            r[5] = pa[5];\n                            r[6] = +pa[6] + x;\n                            r[7] = +pa[7] + y;\n                            break;\n\n                        case 'V':\n                            r[1] = +pa[1] + y;\n                            break;\n\n                        case 'H':\n                            r[1] = +pa[1] + x;\n                            break;\n\n                        case 'M':\n                            mx = +pa[1] + x;\n                            my = +pa[2] + y;\n\n                            jj = pa.length;\n                            for (j = 1; j < jj; j++) {\n                                r[j] = +pa[j] + ((j % 2) ? x : y);\n                            }\n                            break;\n\n                        default:\n                            jj = pa.length;\n                            for (j = 1; j < jj; j++) {\n                                r[j] = +pa[j] + ((j % 2) ? x : y);\n                            }\n                            break;\n                    }\n                } else {\n                    var kk = pa.length;\n                    for (var k = 0; k < kk; k++) {\n                        r[k] = pa[k];\n                    }\n                }\n\n                switch (r[0]) {\n                    case 'Z':\n                        x = +mx;\n                        y = +my;\n                        break;\n\n                    case 'H':\n                        x = r[1];\n                        break;\n\n                    case 'V':\n                        y = r[1];\n                        break;\n\n                    case 'M':\n                        mx = r[r.length - 2];\n                        my = r[r.length - 1];\n                        x = r[r.length - 2];\n                        y = r[r.length - 1];\n                        break;\n\n                    default:\n                        x = r[r.length - 2];\n                        y = r[r.length - 1];\n                        break;\n                }\n            }\n\n            return res;\n        }\n\n        function normalize(path) {\n\n            var p = pathToAbsolute(path);\n            var attrs = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null };\n\n            function processPath(path, d, pcom) {\n\n                var nx, ny;\n\n                if (!path) return ['C', d.x, d.y, d.x, d.y, d.x, d.y];\n\n                if (!(path[0] in { T: 1, Q: 1 })) {\n                    d.qx = null;\n                    d.qy = null;\n                }\n\n                switch (path[0]) {\n                    case 'M':\n                        d.X = path[1];\n                        d.Y = path[2];\n                        break;\n\n                    case 'A':\n                        if (parseFloat(path[1]) === 0 || parseFloat(path[2]) === 0) {\n                            // https://www.w3.org/TR/SVG/paths.html#ArcOutOfRangeParameters\n                            // \"If either rx or ry is 0, then this arc is treated as a\n                            // straight line segment (a \"lineto\") joining the endpoints.\"\n                            path = ['L', path[6], path[7]];\n                        } else {\n                            path = ['C'].concat(a2c.apply(0, [d.x, d.y].concat(path.slice(1))));\n                        }\n                        break;\n\n                    case 'S':\n                        if (pcom === 'C' || pcom === 'S') { // In 'S' case we have to take into account, if the previous command is C/S.\n                            nx = (d.x * 2) - d.bx;          // And reflect the previous\n                            ny = (d.y * 2) - d.by;          // command's control point relative to the current point.\n                        } else {                            // or some else or nothing\n                            nx = d.x;\n                            ny = d.y;\n                        }\n                        path = ['C', nx, ny].concat(path.slice(1));\n                        break;\n\n                    case 'T':\n                        if (pcom === 'Q' || pcom === 'T') { // In 'T' case we have to take into account, if the previous command is Q/T.\n                            d.qx = (d.x * 2) - d.qx;        // And make a reflection similar\n                            d.qy = (d.y * 2) - d.qy;        // to case 'S'.\n                        } else {                            // or something else or nothing\n                            d.qx = d.x;\n                            d.qy = d.y;\n                        }\n                        path = ['C'].concat(q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n                        break;\n\n                    case 'Q':\n                        d.qx = path[1];\n                        d.qy = path[2];\n                        path = ['C'].concat(q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n                        break;\n\n                    case 'H':\n                        path = ['L'].concat(path[1], d.y);\n                        break;\n\n                    case 'V':\n                        path = ['L'].concat(d.x, path[1]);\n                        break;\n\n                    case 'L':\n                        break;\n\n                    case 'Z':\n                        break;\n                }\n\n                return path;\n            }\n\n            function fixArc(pp, i) {\n\n                if (pp[i].length > 7) {\n\n                    pp[i].shift();\n                    var pi = pp[i];\n\n                    while (pi.length) {\n                        pcoms[i] = 'A'; // if created multiple 'C's, their original seg is saved\n                        pp.splice(i++, 0, ['C'].concat(pi.splice(0, 6)));\n                    }\n\n                    pp.splice(i, 1);\n                    ii = p.length;\n                }\n            }\n\n            var pcoms = []; // path commands of original path p\n            var pfirst = ''; // temporary holder for original path command\n            var pcom = ''; // holder for previous path command of original path\n\n            var ii = p.length;\n            for (var i = 0; i < ii; i++) {\n                if (p[i]) pfirst = p[i][0]; // save current path command\n\n                if (pfirst !== 'C') { // C is not saved yet, because it may be result of conversion\n                    pcoms[i] = pfirst; // Save current path command\n                    if (i > 0) pcom = pcoms[i - 1]; // Get previous path command pcom\n                }\n\n                p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath\n\n                if (pcoms[i] !== 'A' && pfirst === 'C') pcoms[i] = 'C'; // 'A' is the only command\n                // which may produce multiple 'C's\n                // so we have to make sure that 'C' is also 'C' in original path\n\n                fixArc(p, i); // fixArc adds also the right amount of 'A's to pcoms\n\n                var seg = p[i];\n                var seglen = seg.length;\n\n                attrs.x = seg[seglen - 2];\n                attrs.y = seg[seglen - 1];\n\n                attrs.bx = parseFloat(seg[seglen - 4]) || attrs.x;\n                attrs.by = parseFloat(seg[seglen - 3]) || attrs.y;\n            }\n\n            // make sure normalized path data string starts with an M segment\n            if (!p[0][0] || p[0][0] !== 'M') {\n                p.unshift(['M', 0, 0]);\n            }\n\n            return p;\n        }\n\n        return function(pathData) {\n            return normalize(pathData).join(',').split(',').join(' ');\n        };\n    })();\n\n    V.namespace = ns;\n\n    V.g = g;\n\n    return V;\n\n})();\n\nexport default V;\n","export const config = {\n    // When set to `true` the cell selectors could be defined as CSS selectors.\n    // If not, only JSON Markup selectors are taken into account.\n    // export let useCSSSelectors = true;\n    useCSSSelectors: true,\n    // The class name prefix config is for advanced use only.\n    // Be aware that if you change the prefix, the JointJS CSS will no longer function properly.\n    // export let classNamePrefix = 'joint-';\n    // export let defaultTheme = 'default';\n    classNamePrefix: 'joint-',\n    defaultTheme: 'default',\n    // The maximum delay required for two consecutive touchend events to be interpreted\n    // as a double-tap.\n    doubleTapInterval: 300\n};\n","// code is inspired by https://github.com/lodash/lodash\n\n/* eslint-disable no-case-declarations */\n// -- helper constants\nconst argsTag = '[object Arguments]';\nconst arrayTag = '[object Array]';\nconst boolTag = '[object Boolean]';\nconst dateTag = '[object Date]';\nconst errorTag = '[object Error]';\nconst funcTag = '[object Function]';\nconst mapTag = '[object Map]';\nconst numberTag = '[object Number]';\nconst nullTag = '[object Null]';\nconst objectTag = '[object Object]';\nconst regexpTag = '[object RegExp]';\nconst setTag = '[object Set]';\nconst stringTag = '[object String]';\nconst symbolTag = '[object Symbol]';\nconst undefinedTag = '[object Undefined]';\nconst weakMapTag = '[object WeakMap]';\nconst arrayBufferTag = '[object ArrayBuffer]';\nconst dataViewTag = '[object DataView]';\nconst float32Tag = '[object Float32Array]';\nconst float64Tag = '[object Float64Array]';\nconst int8Tag = '[object Int8Array]';\nconst int16Tag = '[object Int16Array]';\nconst int32Tag = '[object Int32Array]';\nconst uint8Tag = '[object Uint8Array]';\nconst uint8ClampedTag = '[object Uint8ClampedArray]';\nconst uint16Tag = '[object Uint16Array]';\nconst uint32Tag = '[object Uint32Array]';\n\nconst CLONEABLE_TAGS = {\n    [argsTag]: true,\n    [arrayTag]: true,\n    [arrayBufferTag]: true,\n    [dataViewTag]: true,\n    [boolTag]: true,\n    [dateTag]: true,\n    [float32Tag]: true,\n    [float64Tag]: true,\n    [int8Tag]: true,\n    [int16Tag]: true,\n    [int32Tag]: true,\n    [mapTag]: true,\n    [numberTag]: true,\n    [objectTag]: true,\n    [regexpTag]: true,\n    [setTag]: true,\n    [stringTag]: true,\n    [symbolTag]: true,\n    [uint8Tag]: true,\n    [uint8ClampedTag]: true,\n    [uint16Tag]: true,\n    [uint32Tag]: true,\n    [errorTag]: false,\n    [funcTag]: false,\n    [weakMapTag]: false,\n};\n\n/** Used to compose unicode character classes. */\nconst rsAstralRange = '\\\\ud800-\\\\udfff';\nconst rsComboMarksRange = '\\\\u0300-\\\\u036f';\nconst reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f';\nconst rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff';\nconst rsComboMarksExtendedRange = '\\\\u1ab0-\\\\u1aff';\nconst rsComboMarksSupplementRange = '\\\\u1dc0-\\\\u1dff';\nconst rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange + rsComboMarksExtendedRange + rsComboMarksSupplementRange;\nconst rsDingbatRange = '\\\\u2700-\\\\u27bf';\nconst rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff';\nconst rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7';\nconst rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf';\nconst rsPunctuationRange = '\\\\u2000-\\\\u206f';\nconst rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000';\nconst rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde';\nconst rsVarRange = '\\\\ufe0e\\\\ufe0f';\nconst rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nconst rsApos = '[\\'\\u2019]';\nconst rsBreak = `[${rsBreakRange}]`;\nconst rsCombo = `[${rsComboRange}]`;\nconst rsDigit = '\\\\d';\nconst rsDingbat = `[${rsDingbatRange}]`;\nconst rsLower = `[${rsLowerRange}]`;\nconst rsMisc = `[^${rsAstralRange}${rsBreakRange + rsDigit + rsDingbatRange + rsLowerRange + rsUpperRange}]`;\nconst rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]';\nconst rsModifier = `(?:${rsCombo}|${rsFitz})`;\nconst rsNonAstral = `[^${rsAstralRange}]`;\nconst rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}';\nconst rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]';\nconst rsUpper = `[${rsUpperRange}]`;\nconst rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nconst rsMiscLower = `(?:${rsLower}|${rsMisc})`;\nconst rsMiscUpper = `(?:${rsUpper}|${rsMisc})`;\nconst rsOptContrLower = `(?:${rsApos}(?:d|ll|m|re|s|t|ve))?`;\nconst rsOptContrUpper = `(?:${rsApos}(?:D|LL|M|RE|S|T|VE))?`;\nconst reOptMod = `${rsModifier}?`;\nconst rsOptVar = `[${rsVarRange}]?`;\nconst rsOptJoin = `(?:${rsZWJ}(?:${[rsNonAstral, rsRegional, rsSurrPair].join('|')})${rsOptVar + reOptMod})*`;\nconst rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])';\nconst rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])';\nconst rsSeq = rsOptVar + reOptMod + rsOptJoin;\nconst rsEmoji = `(?:${[rsDingbat, rsRegional, rsSurrPair].join('|')})${rsSeq}`;\n\nconst reUnicodeWords = RegExp([\n    `${rsUpper}?${rsLower}+${rsOptContrLower}(?=${[rsBreak, rsUpper, '$'].join('|')})`,\n    `${rsMiscUpper}+${rsOptContrUpper}(?=${[rsBreak, rsUpper + rsMiscLower, '$'].join('|')})`,\n    `${rsUpper}?${rsMiscLower}+${rsOptContrLower}`,\n    `${rsUpper}+${rsOptContrUpper}`,\n    rsOrdUpper,\n    rsOrdLower,\n    `${rsDigit}+`,\n    rsEmoji\n].join('|'), 'g');\n\nconst LARGE_ARRAY_SIZE = 200;\nconst HASH_UNDEFINED = '__hash_undefined__';\n\n// Used to match `toStringTag` values of typed arrays\nconst reTypedTag = /^\\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\\]$/;\n\n// Used to compose unicode capture groups\nconst rsAstral = `[${rsAstralRange}]`;\n\n// Used to compose unicode regexes\nconst rsNonAstralCombo = `${rsNonAstral}${rsCombo}?`;\nconst rsSymbol = `(?:${[rsNonAstralCombo, rsCombo, rsRegional, rsSurrPair, rsAstral].join('|')})`;\n\n// Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode)\nconst reUnicode = RegExp(`${rsFitz}(?=${rsFitz})|${rsSymbol + rsSeq}`, 'g');\n\nconst reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/;\nconst reIsPlainProp = /^\\w*$/;\n\nconst charCodeOfDot = '.'.charCodeAt(0);\nconst reEscapeChar = /\\\\(\\\\)?/g;\nconst rePropName = RegExp(\n    // Match anything that isn't a dot or bracket.\n    '[^.[\\\\]]+' + '|' +\n  // Or match property names within brackets.\n  '\\\\[(?:' +\n    // Match a non-string expression.\n    '([^\"\\'][^[]*)' + '|' +\n    // Or match strings (supports escaping characters).\n    '([\"\\'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2' +\n  ')\\\\]'+ '|' +\n  // Or match \"\" as the space between consecutive dots or empty brackets.\n  '(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))'\n    , 'g');\nconst reIsUint = /^(?:0|[1-9]\\d*)$/;\n\nconst hasUnicodeWord = RegExp.prototype.test.bind(\n    /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/\n);\n\nconst MAX_ARRAY_INDEX = 4294967295 - 1;\n\n/** Used to match words composed of alphanumeric characters. */\n// eslint-disable-next-line no-control-regex\nconst reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n\n\n// -- helper functions\nconst hasUnicode = (string) => {\n    return reUnicode.test(string);\n};\n\nconst unicodeToArray = (string) => {\n    return string.match(reUnicode) || [];\n};\n\nconst asciiToArray = (string) => {\n    return string.split('');\n};\n\nconst stringToArray = (string) => {\n    return hasUnicode(string) ? unicodeToArray(string) : asciiToArray(string);\n};\n\nconst values = (object) => {\n    if (object == null) {\n        return [];\n    }\n\n    return keys(object).map((key) => object[key]);\n};\n\nconst keys = (object) => {\n    return isArrayLike(object) ? arrayLikeKeys(object) : Object.keys(Object(object));\n};\n\nconst baseKeys = (object) => {\n    if (!isPrototype(object)) {\n        return Object.keys(object);\n    }\n    var result = [];\n    for (var key in Object(object)) {\n        if (hasOwnProperty.call(object, key) && key != 'constructor') {\n            result.push(key);\n        }\n    }\n\n    return result;\n};\n\nconst arrayLikeKeys = (value, inherited) => {\n    const isArr = Array.isArray(value);\n    const isArg = !isArr && isObjectLike(value) && getTag(value) === argsTag;\n    const isType = !isArr && !isArg && isTypedArray(value);\n    const skipIndexes = isArr || isArg || isType;\n    const length = value.length;\n    const result = new Array(skipIndexes ? length : 0);\n    let index = skipIndexes ? -1 : length;\n    while (++index < length) {\n        result[index] = `${index}`;\n    }\n    for (const key in value) {\n        if ((inherited || hasOwnProperty.call(value, key)) &&\n            !(skipIndexes && (\n                // Safari 9 has enumerable `arguments.length` in strict mode.\n                key === 'length' ||\n                // Skip index properties.\n                isIndex(key, length)\n            ))\n        ) {\n            result.push(key);\n        }\n    }\n    return result;\n};\n\nconst assocIndexOf = (array, key) => {\n    let { length } = array;\n    while (length--) {\n        if (eq(array[length][0], key)) {\n            return length;\n        }\n    }\n    return -1;\n};\n\nconst eq = (value, other) => {\n    return value === other || (value !== value && other !== other);\n};\n\nconst isObjectLike = (value) => {\n    return value != null && typeof value == 'object';\n};\n\nconst isIterateeCall = (value, index, object) => {\n    if (!isObject(object)) {\n        return false;\n    }\n    const type = typeof index;\n\n    const isPossibleIteratee = type == 'number' ?\n        (isArrayLike(object) && index > -1 && index < object.length) :\n        (type == 'string' && index in object);\n\n    if (isPossibleIteratee) {\n        return eq(object[index], value);\n    }\n    return false;\n};\n\nconst isSet = (value) => {\n    return isObjectLike(value) && getTag(value) == setTag;\n};\n\nconst isMap = (value) => {\n    return isObjectLike(value) && getTag(value) == mapTag;\n};\n\nconst isPrototype = (value) => {\n    const Ctor = value && value.constructor;\n    const proto = (typeof Ctor === 'function' && Ctor.prototype) || Object.prototype;\n\n    return value === proto;\n};\n\nconst assignValue = (object, key, value) => {\n    const objValue = object[key];\n    if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n        (value === undefined && !(key in object))) {\n        object[key] = value;\n    }\n};\n\nconst copyObject = (source, props, object) => {\n    let index = -1;\n    const length = props.length;\n\n    while (++index < length) {\n        const key = props[index];\n        assignValue(object, key, source[key]);\n    }\n    return object;\n};\n\nconst isArrayLike = (value) => {\n    return value != null && typeof value !== 'function' && typeof value.length === 'number' &&\n        value.length > -1 && value.length % 1 === 0;\n};\n\nconst isSymbol = (value) => {\n    return typeof value == 'symbol' ||\n        (isObjectLike(value) && getTag(value) === symbolTag);\n};\n\nconst initCloneArray = (array) => {\n    const length = array.length;\n    let result = new array.constructor(length);\n\n    if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n        result.index = array.index;\n        result.input = array.input;\n    }\n\n    return result;\n};\n\nconst copyArray = (source, array) => {\n    let index = -1;\n    const length = source.length;\n\n    array || (array = new Array(length));\n    while (++index < length) {\n        array[index] = source[index];\n    }\n    return array;\n};\n\nconst getTag = (value) => {\n    if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n    }\n\n    return Object.prototype.toString.call(value);\n};\n\nconst cloneArrayBuffer = (arrayBuffer) => {\n    const result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n    new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n    return result;\n};\n\nconst cloneTypedArray = (typedArray, isDeep) => {\n    const buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n    return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n};\n\nconst cloneRegExp = (regexp) =>{\n    const result = new regexp.constructor(regexp.source, /\\w*$/.exec(regexp));\n    result.lastIndex = regexp.lastIndex;\n    return result;\n};\n\nconst initCloneObject = (object) => {\n    return (typeof object.constructor == 'function' && !isPrototype(object))\n        ? Object.create(Object.getPrototypeOf(object))\n        : {};\n};\n\nconst getSymbols = (object) => {\n    if (object == null) {\n        return [];\n    }\n\n    object = Object(object);\n    const symbols = Object.getOwnPropertySymbols(object);\n\n    return symbols.filter((symbol) => propertyIsEnumerable.call(object, symbol));\n};\n\nconst copySymbols = (source, object) => {\n    return copyObject(source, getSymbols(source), object);\n};\n\nfunction cloneDataView(dataView, isDeep) {\n    const buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n    return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nconst initCloneByTag = (object, tag, isDeep) => {\n    const Constructor = object.constructor;\n    switch(tag) {\n        case arrayBufferTag:\n            return cloneArrayBuffer(object, isDeep);\n        case boolTag:\n        case dateTag:\n            return new Constructor(+object);\n        case dataViewTag:\n            return cloneDataView(object, isDeep);\n        case float32Tag:\n        case float64Tag:\n        case int8Tag:\n        case int16Tag:\n        case int32Tag:\n        case uint8Tag:\n        case uint8ClampedTag:\n        case uint16Tag:\n        case uint32Tag:\n            return cloneTypedArray(object, isDeep);\n        case mapTag:\n            return new Constructor(object);\n        case numberTag:\n        case stringTag:\n            return new Constructor(object);\n        case regexpTag:\n            return cloneRegExp(object);\n        case setTag:\n            return new Constructor;\n        case symbolTag:\n            return Symbol.prototype.valueOf ? Object(Symbol.prototype.valueOf.call(object)) : {};\n    }\n};\n\nconst isTypedArray = (value) => {\n    return isObjectLike(value) && reTypedTag.test(getTag(value));\n};\n\nconst getAllKeys = (object) => {\n    const result = Object.keys(object);\n    if(!Array.isArray(object) && object != null) {\n        result.push(...getSymbols(Object(object)));\n    }\n\n    return result;\n};\n\nconst getSymbolsIn = (object) => {\n    const result = [];\n    while (object) {\n        result.push(...getSymbols(object));\n        object = Object.getPrototypeOf(Object(object));\n    }\n\n    return result;\n};\n\nconst getAllKeysIn = (object) => {\n    const result = [];\n\n    for (const key in object) {\n        result.push(key);\n    }\n\n    if (!Array.isArray(object)) {\n        result.push(...getSymbolsIn(object));\n    }\n\n    return result;\n};\n\nconst getMapData = ({ __data__ }, key) => {\n    const data = __data__;\n    return isKeyable(key)\n        ? data[typeof key === 'string' ? 'string' : 'hash']\n        : data.map;\n};\n\nconst equalObjects = (object, other, equalFunc, stack) => {\n    const objProps = getAllKeys(object);\n    const objLength = objProps.length;\n    const othProps = getAllKeys(other);\n    const othLength = othProps.length;\n\n    if (objLength != othLength) {\n        return false;\n    }\n    let key;\n    let index = objLength;\n    while (index--) {\n        key = objProps[index];\n        if (!(hasOwnProperty.call(other, key))) {\n            return false;\n        }\n    }\n\n    const objStacked = stack.get(object);\n    const othStacked = stack.get(other);\n    if (objStacked && othStacked) {\n        return objStacked == other && othStacked == object;\n    }\n    let result = true;\n    stack.set(object, other);\n    stack.set(other, object);\n\n    let compared;\n    let skipCtor;\n\n    while (++index < objLength) {\n        key = objProps[index];\n        const objValue = object[key];\n        const othValue = other[key];\n\n        if (!(compared === undefined\n            ? (objValue === othValue || equalFunc(objValue, othValue, stack))\n            : compared\n        )) {\n            result = false;\n            break;\n        }\n        skipCtor || (skipCtor = key == 'constructor');\n    }\n\n    if (result && !skipCtor) {\n        const objCtor = object.constructor;\n        const othCtor = other.constructor;\n\n        if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor === 'function' && objCtor instanceof objCtor &&\n            typeof othCtor === 'function' && othCtor instanceof othCtor)) {\n            result = false;\n        }\n    }\n    stack['delete'](object);\n    stack['delete'](other);\n    return result;\n};\n\nconst baseIsEqual = (value, other, stack) => {\n    if (value === other) {\n        return true;\n    }\n    if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n        return value !== value && other !== other;\n    }\n\n    return baseIsEqualDeep(value, other, baseIsEqual, stack);\n};\n\nconst baseIsEqualDeep = (object, other, equalFunc, stack) => {\n    let objIsArr = Array.isArray(object);\n    const othIsArr = Array.isArray(other);\n    let objTag = objIsArr ? arrayTag : getTag(object);\n    let othTag = othIsArr ? arrayTag : getTag(other);\n\n    objTag = objTag == argsTag ? objectTag : objTag;\n    othTag = othTag == argsTag ? objectTag : othTag;\n\n    let objIsObj = objTag == objectTag;\n    const othIsObj = othTag == objectTag;\n    const isSameTag = objTag == othTag;\n\n    if (isSameTag && !objIsObj) {\n        stack || (stack = new Stack);\n        return (objIsArr || isTypedArray(object))\n            ? equalArrays(object, other, false, equalFunc, stack)\n            : equalByTag(object, other, objTag, equalFunc, stack);\n    }\n\n    const objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__');\n    const othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n        const objUnwrapped = objIsWrapped ? object.value() : object;\n        const othUnwrapped = othIsWrapped ? other.value() : other;\n\n        stack || (stack = new Stack);\n        return equalFunc(objUnwrapped, othUnwrapped, stack);\n    }\n\n    if (!isSameTag) {\n        return false;\n    }\n\n    stack || (stack = new Stack);\n    return equalObjects(object, other, equalFunc, stack);\n};\n\nconst equalArrays = (array, other, compareUnordered, equalFunc, stack) => {\n    const isPartial = false;\n    const arrLength = array.length;\n    const othLength = other.length;\n\n    if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n        return false;\n    }\n    // Assume cyclic values are equal.\n    const arrStacked = stack.get(array);\n    const othStacked = stack.get(other);\n    if (arrStacked && othStacked) {\n        return arrStacked == other && othStacked == array;\n    }\n    let index = -1;\n    let result = true;\n    const seen = compareUnordered ? new SetCache : undefined;\n\n    stack.set(array, other);\n    stack.set(other, array);\n\n    while (++index < arrLength) {\n        let compared;\n        const arrValue = array[index];\n        const othValue = other[index];\n\n        if (compared !== undefined) {\n            if (compared) {\n                continue;\n            }\n            result = false;\n            break;\n        }\n\n        if (seen) {\n            if (!some(other, (othValue, othIndex) => {\n                if (!cacheHas(seen, othIndex) &&\n            (arrValue === othValue || equalFunc(arrValue, othValue, stack))) {\n                    return seen.push(othIndex);\n                }\n            })) {\n                result = false;\n                break;\n            }\n        } else if (!(\n            arrValue === othValue ||\n            equalFunc(arrValue, othValue, stack)\n        )) {\n            result = false;\n            break;\n        }\n    }\n    stack['delete'](array);\n    stack['delete'](other);\n    return result;\n};\n\nconst some = (array, predicate) => {\n    let index = -1;\n    const length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n        if (predicate(array[index], index, array)) {\n            return true;\n        }\n    }\n    return false;\n};\n\nconst cacheHas = (cache, key) => {\n    return cache.has(key);\n};\n\nconst compareArrayBufferTag = (object, other, equalFunc, stack) => {\n    if ((object.byteLength != other.byteLength) ||\n                !equalFunc(new Uint8Array(object), new Uint8Array(other), stack)) {\n        return false;\n    }\n    return true;\n};\n\nconst equalByTag = (object, other, tag, equalFunc, stack) => {\n\n    switch (tag) {\n        case dataViewTag:\n            if ((object.byteLength != other.byteLength) ||\n                (object.byteOffset != other.byteOffset)) {\n                return false;\n            }\n            object = object.buffer;\n            other = other.buffer;\n            return compareArrayBufferTag(object, other, equalFunc, stack);\n        case arrayBufferTag:\n            return compareArrayBufferTag(object, other, equalFunc, stack);\n        case boolTag:\n        case dateTag:\n        case numberTag:\n            return eq(+object, +other);\n        case errorTag:\n            return object.name == other.name && object.message == other.message;\n        case regexpTag:\n        case stringTag:\n            return object == `${other}`;\n        case mapTag:\n            let convert = mapToArray;\n        // Intentional fallthrough\n        // eslint-disable-next-line no-fallthrough\n        case setTag:\n            convert || (convert = setToArray);\n\n            if (object.size != other.size) {\n                return false;\n            }\n            // Assume cyclic values are equal.\n            const stacked = stack.get(object);\n            if (stacked) {\n                return stacked == other;\n            }\n\n            // Recursively compare objects (susceptible to call stack limits).\n            stack.set(object, other);\n            const result = equalArrays(convert(object), convert(other), true, equalFunc, stack);\n            stack['delete'](object);\n            return result;\n        case symbolTag:\n            return Symbol.prototype.valueOf.call(object) == Symbol.prototype.valueOf.call(other);\n    }\n\n    return false;\n};\n\nconst mapToArray = (map) => {\n    let index = -1;\n    let result = Array(map.size);\n\n    map.forEach((value, key) => {\n        result[++index] = [key, value];\n    });\n    return result;\n};\n\nconst setToArray = (set) => {\n    let index = -1;\n    const result = new Array(set.size);\n\n    set.forEach((value) => {\n        result[++index] = value;\n    });\n    return result;\n};\n\nconst isKey = (value, object) => {\n    if (Array.isArray(value)) {\n        return false;\n    }\n    const type = typeof value;\n    if (type === 'number' || type === 'boolean' || value == null || isSymbol(value)) {\n        return true;\n    }\n    return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n};\n\nconst stringToPath = (string) => {\n    const result = [];\n    if (string.charCodeAt(0) === charCodeOfDot) {\n        result.push('');\n    }\n    string.replace(rePropName, (match, expression, quote, subString) => {\n        let key = match;\n        if (quote) {\n            key = subString.replace(reEscapeChar, '$1');\n        }\n        else if (expression) {\n            key = expression.trim();\n        }\n        result.push(key);\n    });\n    return result;\n};\n\nconst castPath = (path, object) => {\n    if (Array.isArray(path)) {\n        return path;\n    }\n\n    return isKey(path, object) ? [path] : stringToPath(`${path}`);\n};\n\nconst get = (object, path) => {\n    path = castPath(path, object);\n\n    let index = 0;\n    const length = path.length;\n\n    while (object != null && index < length) {\n        object = object[toKey(path[index])];\n        index++;\n    }\n\n    return (index && index == length) ? object : undefined;\n};\n\nfunction compareAscending(value, other) {\n    if (value !== other) {\n        const valIsDefined = value !== undefined;\n        const valIsNull = value === null;\n        const valIsReflexive = value === value;\n        const valIsSymbol = isSymbol(value);\n\n        const othIsDefined = other !== undefined;\n        const othIsNull = other === null;\n        const othIsReflexive = other === other;\n        const othIsSymbol = isSymbol(other);\n\n        if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n            (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n            (valIsNull && othIsDefined && othIsReflexive) ||\n            (!valIsDefined && othIsReflexive) ||\n            !valIsReflexive) {\n            return 1;\n        }\n        if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n            (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n            (othIsNull && valIsDefined && valIsReflexive) ||\n            (!othIsDefined && valIsReflexive) ||\n            !othIsReflexive) {\n            return -1;\n        }\n    }\n    return 0;\n}\n\nfunction compareMultiple(object, other, orders) {\n    let index = -1;\n    const objCriteria = object.criteria;\n    const othCriteria = other.criteria;\n    const length = objCriteria.length;\n    const ordersLength = orders.length;\n\n    while (++index < length) {\n        const order = index < ordersLength ? orders[index] : null;\n        const cmpFn = (order && typeof order === 'function') ? order : compareAscending;\n        const result = cmpFn(objCriteria[index], othCriteria[index]);\n        if (result) {\n            if (order && typeof order !== 'function') {\n                return result * (order == 'desc' ? -1 : 1);\n            }\n            return result;\n        }\n    }\n\n    return object.index - other.index;\n}\n\nconst diff = (array, values) => {\n    let includes = (array, value) => {\n        const length = array == null ? 0 : array.length;\n        return !!length && array.indexOf(value) > -1;\n    };\n    let isCommon = true;\n    const result = [];\n    const valuesLength = values.length;\n\n    if (!array.length) {\n        return result;\n    }\n\n    if (values.length >= LARGE_ARRAY_SIZE) {\n        includes = (cache, key) => cache.has(key);\n        isCommon = false;\n        values = new SetCache(values);\n    }\n\n    outer:\n    for (let key in array) {\n        let value = array[key];\n        const computed = value;\n\n        value = (value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n            let valuesIndex = valuesLength;\n            while (valuesIndex--) {\n                if (values[valuesIndex] === computed) {\n                    continue outer;\n                }\n            }\n            result.push(value);\n        }\n        else if (!includes(values, computed)) {\n            result.push(value);\n        }\n    }\n\n    return result;\n};\n\nconst intersect = (arrays) => {\n    const includes = (array, value) => {\n        const length = array == null ? 0 : array.length;\n        return !!length && array.indexOf(value) > -1;\n    };\n    const cacheHas = (cache, key) => cache.has(key);\n    const length = arrays[0].length;\n    const othLength = arrays.length;\n    const caches = new Array(othLength);\n    const result = [];\n\n    let array;\n    let maxLength = Infinity;\n    let othIndex = othLength;\n\n    while (othIndex--) {\n        array = arrays[othIndex];\n\n        maxLength = Math.min(array.length, maxLength);\n        caches[othIndex] = length >= 120 && array.length >= 120\n            ? new SetCache(othIndex && array)\n            : undefined;\n    }\n    array = arrays[0];\n\n    let index = -1;\n    const seen = caches[0];\n\n    outer:\n    while (++index < length && result.length < maxLength) {\n        let value = array[index];\n        const computed = value;\n\n        value = (value !== 0) ? value : 0;\n        if (!(seen\n            ? cacheHas(seen, computed)\n            : includes(result, computed)\n        )) {\n            othIndex = othLength;\n            while (--othIndex) {\n                const cache = caches[othIndex];\n                if (!(cache\n                    ? cacheHas(cache, computed)\n                    : includes(arrays[othIndex], computed))\n                ) {\n                    continue outer;\n                }\n            }\n            if (seen) {\n                seen.push(computed);\n            }\n            result.push(value);\n        }\n    }\n    return result;\n};\n\nconst toKey = (value) => {\n    if (typeof value === 'string' || isSymbol(value)) {\n        return value;\n    }\n    const result = `${value}`;\n    return (result == '0' && (1 / value) == -Infinity) ? '-0' : result;\n};\n\nconst baseClone = (value, isDeep = false, isFlat = false, isFull = true, customizer, key, object, stack) => {\n    let result;\n\n    if (customizer) {\n        result = object ? customizer(value, key, object, stack) : customizer(value);\n    }\n\n    if (result !== undefined) {\n        return result;\n    }\n\n    if (!isObject(value)) {\n        return value;\n    }\n\n    const isArr = Array.isArray(value);\n    const tag = getTag(value);\n\n    if (isArr) {\n        result = initCloneArray(value);\n\n        if (!isDeep) {\n            return copyArray(value, result);\n        }\n    } else {\n        const isFunc = typeof value === 'function';\n\n        if (tag === objectTag || tag === argsTag || (isFunc && !object)) {\n            result = (isFlat || isFunc) ? {} : initCloneObject(value);\n            if (!isDeep) {\n                return isFlat ?\n                    copySymbolsIn(value, copyObject(value, Object.keys(value), result)) :\n                    copySymbols(value, Object.assign(result, value));\n            }\n        } else {\n            if (isFunc || !CLONEABLE_TAGS[tag]) {\n                return object ? value : {};\n            }\n            result = initCloneByTag(value, tag, isDeep);\n        }\n    }\n\n    stack || (stack = new Stack);\n    const stacked = stack.get(value);\n\n    if (stacked) {\n        return stacked;\n    }\n\n    stack.set(value, result);\n\n    if (isMap(value)) {\n        value.forEach((subValue, key) => {\n            result.set(key, baseClone(subValue, isDeep, isFlat, isFull, customizer, key, value, stack));\n        });\n\n        return result;\n    }\n\n    if (isSet(value)) {\n        value.forEach(subValue => {\n            result.add(baseClone(subValue, isDeep, isFlat, isFull, customizer, subValue, value, stack));\n        });\n\n        return result;\n    }\n\n    if(isTypedArray(value)) {\n        return result;\n    }\n\n    const keysFunc = isFull\n        ? (isFlat ? getAllKeysIn : getAllKeys)\n        : (isFlat ? keysIn : keys);\n\n    const props =  isArr ? undefined : keysFunc(value);\n\n    (props || value).forEach((subValue, key) => {\n        if (props) {\n            key = subValue;\n            subValue = value[key];\n        }\n\n        assignValue(result, key, baseClone(subValue, isDeep, isFlat, isFull, customizer, key, value, stack));\n    });\n\n    return result;\n};\n\nconst copySymbolsIn = (source, object) => {\n    return copyObject(source, getSymbolsIn(source), object);\n};\n\nconst parent = (object, path) => {\n    return path.length < 2 ? object : get(object, path.slice(0, -1));\n};\n\nconst set = (object, path, value) => {\n    if (!isObject(object)) {\n        return object;\n    }\n    path = castPath(path, object);\n\n    const length = path.length;\n    const lastIndex = length - 1;\n\n    let index = -1;\n    let nested = object;\n\n    while (nested != null && ++index < length) {\n        const key = toKey(path[index]);\n        let newValue = value;\n\n        if (index != lastIndex) {\n            const objValue = nested[key];\n            newValue = undefined;\n            if (newValue === undefined) {\n                newValue = isObject(objValue)\n                    ? objValue\n                    : (isIndex(path[index + 1]) ? [] : {});\n            }\n        }\n        assignValue(nested, key, newValue);\n        nested = nested[key];\n    }\n    return object;\n};\n\nconst isIndex = (value, length) => {\n    const type = typeof value;\n    length = length == null ? Number.MAX_SAFE_INTEGER : length;\n\n    return !!length &&\n    (type === 'number' ||\n        (type !== 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n};\n\nconst unset = (object, path) => {\n    path = castPath(path, object);\n    object = parent(object, path);\n    const lastSegment = path[path.length - 1];\n    return object == null || delete object[toKey(lastSegment)];\n};\n\nconst isKeyable = (value) => {\n    const type = typeof value;\n    return (type === 'string' || type === 'number' || type === 'symbol' || type === 'boolean')\n        ? (value !== '__proto__')\n        : (value === null);\n};\n\nconst keysIn = (object) => {\n    const result = [];\n    for (const key in object) {\n        result.push(key);\n    }\n    return result;\n};\n\nconst toPlainObject = (value) => {\n    value = Object(value);\n    const result = {};\n    for (const key in value) {\n        result[key] = value[key];\n    }\n    return result;\n};\n\nconst safeGet = (object, key) => {\n    if (key === 'constructor' && typeof object[key] === 'function') {\n        return;\n    }\n\n    if (key == '__proto__') {\n        return;\n    }\n\n    return object[key];\n};\n\nfunction createAssigner(assigner, isMerge = false) {\n    return (object, ...sources) => {\n        let index = -1;\n        let length = sources.length;\n        let customizer = length > 1 ? sources[length - 1] : undefined;\n        const guard = length > 2 ? sources[2] : undefined;\n\n        customizer = (assigner.length > 3 && typeof customizer === 'function')\n            ? (length--, customizer)\n            : isMerge ? (a, b) => {\n                if (Array.isArray(a) && !Array.isArray(b)) {\n                    return b;\n                }\n            } : undefined;\n\n        if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n            customizer = length < 3 ? undefined : customizer;\n            length = 1;\n        }\n        object = Object(object);\n        while (++index < length) {\n            const source = sources[index];\n            if (source) {\n                assigner(object, source, index, customizer);\n            }\n        }\n        return object;\n    };\n}\n\nconst baseMerge = (object, source, srcIndex, customizer, stack) => {\n    if (object === source) {\n        return;\n    }\n\n    forIn(source, (srcValue, key) => {\n        if (isObject(srcValue)) {\n            stack || (stack = new Stack);\n            baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n        } else {\n            let newValue = customizer\n                ? customizer(object[key], srcValue, `${key}`, object, source, stack)\n                : undefined;\n\n            if (newValue === undefined) {\n                newValue = srcValue;\n            }\n\n            assignMergeValue(object, key, newValue);\n        }\n    }, keysIn);\n};\n\nconst baseMergeDeep = (object, source, key, srcIndex, mergeFunc, customizer, stack) => {\n    const objValue = safeGet(object, key);\n    const srcValue = safeGet(source, key);\n    const stacked = stack.get(srcValue);\n\n    if (stacked) {\n        assignMergeValue(object, key, stacked);\n        return;\n    }\n\n    let newValue = customizer\n        ? customizer(objValue, srcValue, `${key}`, object, source, stack)\n        : undefined;\n\n    let isCommon = newValue === undefined;\n\n    if (isCommon) {\n        const isArr = Array.isArray(srcValue);\n        const isTyped = !isArr && isTypedArray(srcValue);\n\n        newValue = srcValue;\n        if (isArr || isTyped) {\n            if (Array.isArray(objValue)) {\n                newValue = objValue;\n            }\n            else if (isObjectLike(objValue) && isArrayLike(objValue)) {\n                newValue = copyArray(objValue);\n            }\n            else if (isTyped) {\n                isCommon = false;\n                newValue = cloneTypedArray(srcValue, true);\n            }\n            else {\n                newValue = [];\n            }\n        }\n        else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n            newValue = objValue;\n            if (isArguments(objValue)) {\n                newValue = toPlainObject(objValue);\n            }\n            else if (typeof objValue === 'function' || !isObject(objValue)) {\n                newValue = initCloneObject(srcValue);\n            }\n        }\n        else {\n            isCommon = false;\n        }\n    }\n    if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, newValue);\n        mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n        stack['delete'](srcValue);\n    }\n    assignMergeValue(object, key, newValue);\n};\n\nconst assignMergeValue = (object, key, value) => {\n    if ((value !== undefined && !eq(object[key], value)) ||\n        (value === undefined && !(key in object))) {\n        assignValue(object, key, value);\n    }\n};\n\nfunction baseFor(object, iteratee, keysFunc) {\n    const iterable = Object(object);\n    const props = keysFunc(object);\n    let { length } = props;\n    let index = -1;\n\n    while (length--) {\n        const key = props[++index];\n        if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n        }\n    }\n    return object;\n}\n\nconst baseForOwn = (object, iteratee) => {\n    return object && baseFor(object, iteratee, keys);\n};\n\nconst baseEach = (collection, iteratee) => {\n    if (collection == null) {\n        return collection;\n    }\n    if (!isArrayLike(collection)) {\n        return baseForOwn(collection, iteratee);\n    }\n    const length = collection.length;\n    const iterable = Object(collection);\n    let index = -1;\n\n    while (++index < length) {\n        if (iteratee(iterable[index], index, iterable) === false) {\n            break;\n        }\n    }\n    return collection;\n};\n\nfunction last(array) {\n    const length = array == null ? 0 : array.length;\n    return length ? array[length - 1] : undefined;\n}\n\nconst createSet = (Set && (1 / setToArray(new Set([undefined,-0]))[1]) == 1 / 0)\n    ? (values) => new Set(values)\n    : () => {};\n\nfunction customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n    if (isObject(objValue) && isObject(srcValue)) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, objValue);\n        baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n        stack['delete'](srcValue);\n    }\n    return objValue;\n}\n\nfunction baseOrderBy(collection, iteratees, orders) {\n    if (iteratees.length) {\n        iteratees = iteratees.map((iteratee) => {\n            if (Array.isArray(iteratee)) {\n                return (value) => get(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n            }\n\n            return iteratee;\n        });\n    } else {\n        iteratees = [(value) => value];\n    }\n\n    let criteriaIndex = -1;\n    let eachIndex = -1;\n\n    const result = isArrayLike(collection) ? new Array(collection.length) : [];\n\n    baseEach(collection, (value) => {\n        const criteria = iteratees.map((iteratee) => iteratee(value));\n\n        result[++eachIndex] = {\n            criteria,\n            index: ++criteriaIndex,\n            value\n        };\n    });\n\n    return baseSortBy(result, (object, other) => compareMultiple(object, other, orders));\n}\n\nfunction baseSortBy(array, comparer) {\n    let { length } = array;\n\n    array.sort(comparer);\n    while (length--) {\n        array[length] = array[length].value;\n    }\n    return array;\n}\n\nfunction isStrictComparable(value) {\n    return value === value && !isObject(value);\n}\n\nfunction matchesStrictComparable(key, srcValue) {\n    return (object) => {\n        if (object == null) {\n            return false;\n        }\n        return object[key] === srcValue &&\n            (srcValue !== undefined || (key in Object(object)));\n    };\n}\n\nfunction hasIn(object, path) {\n    return object != null && hasPath(object, path, baseHasIn);\n}\n\nfunction baseMatchesProperty(path, srcValue) {\n    if (isKey(path) && isStrictComparable(srcValue)) {\n        return matchesStrictComparable(toKey(path), srcValue);\n    }\n    return (object) => {\n        const objValue = get(object, path);\n        return (objValue === undefined && objValue === srcValue)\n            ? hasIn(object, path)\n            : baseIsEqual(srcValue, objValue);\n    };\n}\n\nfunction baseMatches(source) {\n    const matchData = getMatchData(source);\n    if (matchData.length === 1 && matchData[0][2]) {\n        return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n    }\n    return (object) => object === source || baseIsMatch(object, source, matchData);\n}\n\nfunction getMatchData(object) {\n    const result = keys(object);\n    let length = result.length;\n\n    while (length--) {\n        const key = result[length];\n        const value = object[key];\n        result[length] = [key, value, isStrictComparable(value)];\n    }\n    return result;\n}\n\nfunction baseIsMatch(object, source, matchData, customizer) {\n    let index = matchData.length;\n    const length = index;\n    const noCustomizer = !customizer;\n\n    if (object == null) {\n        return !length;\n    }\n    let data;\n    let result;\n    object = Object(object);\n    while (index--) {\n        data = matchData[index];\n        if ((noCustomizer && data[2])\n            ? data[1] !== object[data[0]]\n            : !(data[0] in object)\n        ) {\n            return false;\n        }\n    }\n    while (++index < length) {\n        data = matchData[index];\n        const key = data[0];\n        const objValue = object[key];\n        const srcValue = data[1];\n\n        if (noCustomizer && data[2]) {\n            if (objValue === undefined && !(key in object)) {\n                return false;\n            }\n        } else {\n            const stack = new Stack;\n            if (customizer) {\n                result = customizer(objValue, srcValue, key, object, source, stack);\n            }\n            if (!(result === undefined\n                ? baseIsEqual(srcValue, objValue, stack)\n                : result\n            )) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\nfunction property(path) {\n    return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nfunction baseProperty(key) {\n    return (object) => object == null ? undefined : object[key];\n}\n\nfunction basePropertyDeep(path) {\n    return (object) => get(object, path);\n}\n\nfunction baseIteratee(value) {\n    if (typeof value == 'function') {\n        return value;\n    }\n    if (value == null) {\n        return (val) => val;\n    }\n    if (typeof value == 'object') {\n        return Array.isArray(value)\n            ? baseMatchesProperty(value[0], value[1])\n            : baseMatches(value);\n    }\n    return property(value);\n}\n\nfunction getIteratee() {\n    const result = baseIteratee;\n    return arguments.length ? result(arguments[0], arguments[1]) : result;\n}\n\nconst arrayReduce = (array, iteratee, accumulator, initAccum) => {\n    let index = -1;\n    const length = array == null ? 0 : array.length;\n\n    if (initAccum && length) {\n        accumulator = array[++index];\n    }\n    while (++index < length) {\n        accumulator = iteratee(accumulator, array[index], index, array);\n    }\n    return accumulator;\n};\n\nconst baseReduce = (collection, iteratee, accumulator, initAccum, eachFunc) => {\n    eachFunc(collection, (value, index, collection) => {\n        accumulator = initAccum\n            ? (initAccum = false, value)\n            : iteratee(accumulator, value, index, collection);\n    });\n    return accumulator;\n};\n\nfunction reduce(collection, iteratee, accumulator) {\n    const func = Array.isArray(collection) ? arrayReduce : baseReduce;\n    const initAccum = arguments.length < 3;\n    return func(collection, iteratee, accumulator, initAccum, baseEach);\n}\n\nconst isFlattenable = (value) => {\n    return Array.isArray(value) || isArguments(value) ||\n    !!(value && value[Symbol.isConcatSpreadable]);\n};\n\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n    let index = -1;\n    const length = array.length;\n\n    predicate || (predicate = isFlattenable);\n    result || (result = []);\n\n    while (++index < length) {\n        var value = array[index];\n        if (depth > 0 && predicate(value)) {\n            if (depth > 1) {\n                // Recursively flatten arrays (susceptible to call stack limits).\n                baseFlatten(value, depth - 1, predicate, isStrict, result);\n            } else {\n                result.push(...value);\n            }\n        } else if (!isStrict) {\n            result[result.length] = value;\n        }\n    }\n    return result;\n}\n\nconst isArguments = (value) => {\n    return isObjectLike(value) && getTag(value) == '[object Arguments]';\n};\n\nconst basePick = (object, paths) => {\n    return basePickBy(object, paths, (value, path) => hasIn(object, path));\n};\n\nconst basePickBy = (object, paths, predicate) => {\n    let index = -1;\n    const length = paths.length;\n    const result = {};\n\n    while (++index < length) {\n        const path = paths[index];\n        const value = get(object, path);\n        if (predicate(value, path)) {\n            set(result, castPath(path, object), value);\n        }\n    }\n    return result;\n};\n\nconst isLength = (value) => {\n    return typeof value == 'number' &&\n        value > -1 && value % 1 == 0 && value <= Number.MAX_SAFE_INTEGER;\n};\n\nconst baseHasIn = (object, key) =>{\n    return object != null && key in Object(object);\n};\n\nconst hasPath = (object, path, hasFunc) => {\n    path = castPath(path, object);\n\n    var index = -1,\n        length = path.length,\n        result = false;\n\n    while (++index < length) {\n        var key = toKey(path[index]);\n        if (!(result = object != null && hasFunc(object, key))) {\n            break;\n        }\n        object = object[key];\n    }\n    if (result || ++index != length) {\n        return result;\n    }\n    length = object == null ? 0 : object.length;\n    return !!length && isLength(length) && isIndex(key, length) &&\n        (Array.isArray(object) || isArguments(object));\n};\n\nconst asciiWords = (string) => {\n    return string.match(reAsciiWord);\n};\n\nconst unicodeWords = (string) => {\n    return string.match(reUnicodeWords);\n};\n\nconst words = (string, pattern) => {\n    if (pattern === undefined) {\n        const result = hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n        return result || [];\n    }\n    return string.match(pattern) || [];\n};\n\nconst castSlice = (array, start, end) => {\n    const { length } = array;\n    end = end === undefined ? length : end;\n    return (!start && end >= length) ? array : array.slice(start, end);\n};\n\nconst upperFirst = createCaseFirst('toUpperCase');\n\nfunction createCaseFirst(methodName) {\n    return (string) => {\n        if (!string) {\n            return '';\n        }\n\n        const strSymbols = hasUnicode(string)\n            ? stringToArray(string)\n            : undefined;\n\n        const chr = strSymbols\n            ? strSymbols[0]\n            : string[0];\n\n        const trailing = strSymbols\n            ? castSlice(strSymbols, 1).join('')\n            : string.slice(1);\n\n        return chr[methodName]() + trailing;\n    };\n}\n\n// -- helper classes\nclass Stack {\n    constructor(entries) {\n        const data = this.__data__ = new ListCache(entries);\n        this.size = data.size;\n    }\n\n    clear() {\n        this.__data__ = new ListCache;\n        this.size = 0;\n    }\n\n    delete(key) {\n        const data = this.__data__;\n        const result = data['delete'](key);\n\n        this.size = data.size;\n        return result;\n    }\n\n    get(key) {\n        return this.__data__.get(key);\n    }\n\n    has(key) {\n        return this.__data__.has(key);\n    }\n\n    set(key, value) {\n        let data = this.__data__;\n        if (data instanceof ListCache) {\n            const pairs = data.__data__;\n            if (pairs.length < LARGE_ARRAY_SIZE - 1) {\n                pairs.push([key, value]);\n                this.size = ++data.size;\n                return this;\n            }\n            data = this.__data__ = new MapCache(pairs);\n        }\n        data.set(key, value);\n        this.size = data.size;\n        return this;\n    }\n}\n\nclass ListCache {\n    constructor(entries) {\n        let index = -1;\n        const length = entries == null ? 0 : entries.length;\n\n        this.clear();\n        while (++index < length) {\n            const entry = entries[index];\n            this.set(entry[0], entry[1]);\n        }\n    }\n\n    clear() {\n        this.__data__ = [];\n        this.size = 0;\n    }\n\n    delete(key) {\n        const data = this.__data__;\n        const index = assocIndexOf(data, key);\n\n        if (index < 0) {\n            return false;\n        }\n        const lastIndex = data.length - 1;\n        if (index == lastIndex) {\n            data.pop();\n        } else {\n            data.splice(index, 1);\n        }\n        --this.size;\n        return true;\n    }\n\n    get(key) {\n        const data = this.__data__;\n        const index = assocIndexOf(data, key);\n        return index < 0 ? undefined : data[index][1];\n    }\n\n    has(key) {\n        return assocIndexOf(this.__data__, key) > -1;\n    }\n\n    set(key, value) {\n        const data = this.__data__;\n        const index = assocIndexOf(data, key);\n\n        if (index < 0) {\n            ++this.size;\n            data.push([key, value]);\n        } else {\n            data[index][1] = value;\n        }\n        return this;\n    }\n}\n\nclass MapCache {\n    constructor(entries) {\n        let index = -1;\n        const length = entries == null ? 0 : entries.length;\n\n        this.clear();\n        while (++index < length) {\n            const entry = entries[index];\n            this.set(entry[0], entry[1]);\n        }\n    }\n\n    clear() {\n        this.size = 0;\n        this.__data__ = {\n            'hash': new Hash,\n            'map': new Map,\n            'string': new Hash\n        };\n    }\n\n    delete(key) {\n        const result = getMapData(this, key)['delete'](key);\n        this.size -= result ? 1 : 0;\n        return result;\n    }\n\n    get(key) {\n        return getMapData(this, key).get(key);\n    }\n\n    has(key) {\n        return getMapData(this, key).has(key);\n    }\n\n    set(key, value) {\n        const data = getMapData(this, key);\n        const size = data.size;\n\n        data.set(key, value);\n        this.size += data.size == size ? 0 : 1;\n        return this;\n    }\n}\n\nclass Hash {\n    constructor(entries) {\n        let index = -1;\n        const length = entries == null ? 0 : entries.length;\n\n        this.clear();\n        while (++index < length) {\n            const entry = entries[index];\n            this.set(entry[0], entry[1]);\n        }\n    }\n\n    clear() {\n        this.__data__ = Object.create(null);\n        this.size = 0;\n    }\n\n    delete(key) {\n        const result = this.has(key) && delete this.__data__[key];\n        this.size -= result ? 1 : 0;\n        return result;\n    }\n\n    get(key) {\n        const data = this.__data__;\n        const result = data[key];\n        return result === HASH_UNDEFINED ? undefined : result;\n    }\n\n    has(key) {\n        const data = this.__data__;\n        return data[key] !== undefined;\n    }\n\n    set(key, value) {\n        const data = this.__data__;\n        this.size += this.has(key) ? 0 : 1;\n        data[key] = value === undefined ? HASH_UNDEFINED : value;\n        return this;\n    }\n}\n\nclass SetCache {\n    constructor(values) {\n        let index = -1;\n        const length = values == null ? 0 : values.length;\n\n        this.__data__ = new MapCache;\n        while (++index < length) {\n            this.add(values[index]);\n        }\n    }\n\n    add(value) {\n        this.__data__.set(value, HASH_UNDEFINED);\n        return this;\n    }\n\n    has(value) {\n        return this.__data__.has(value);\n    }\n}\n\nSetCache.prototype.push = SetCache.prototype.add;\n\n// -- top level functions\n\nexport const isBoolean = function(value) {\n    var toString = Object.prototype.toString;\n    return value === true || value === false || (!!value && typeof value === 'object' && toString.call(value) === boolTag);\n};\n\nexport const isObject = function(value) {\n    return !!value && (typeof value === 'object' || typeof value === 'function');\n};\n\nexport const isNumber = function(value) {\n    var toString = Object.prototype.toString;\n    return typeof value === 'number' || (!!value && typeof value === 'object' && toString.call(value) === numberTag);\n};\n\nexport const isString = function(value) {\n    var toString = Object.prototype.toString;\n    return typeof value === 'string' || (!!value && typeof value === 'object' && toString.call(value) === stringTag);\n};\n\nexport const assign = createAssigner((object, source) => {\n    if (isPrototype(source) || isArrayLike(source)) {\n        copyObject(source, keys(source), object);\n        return;\n    }\n    for (var key in source) {\n        if (hasOwnProperty.call(source, key)) {\n            assignValue(object, key, source[key]);\n        }\n    }\n});\n\nexport const mixin = assign;\n\nexport const deepMixin = mixin;\n\nexport const supplement = (object, ...sources) => {\n    let index = -1;\n    let length = sources.length;\n    const guard = length > 2 ? sources[2] : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n        length = 1;\n    }\n\n    while (++index < length) {\n        const source = sources[index];\n\n        if (source == null) {\n            continue;\n        }\n\n        const props = Object.keys(source);\n        const propsLength = props.length;\n        let propsIndex = -1;\n\n        while (++propsIndex < propsLength) {\n            const key = props[propsIndex];\n            const value = object[key];\n\n            if (value === undefined ||\n                (eq(value, Object.prototype[key]) && !hasOwnProperty.call(object, key))) {\n                object[key] = source[key];\n            }\n        }\n    }\n\n    return object;\n};\n\nexport const defaults = supplement;\n\nexport const deepSupplement = function defaultsDeep(...args) {\n    args.push(undefined, customDefaultsMerge);\n    return merge.apply(undefined, args);\n};\n\nexport const defaultsDeep = deepSupplement;\n\n// _.invokeMap\nexport const invoke = (collection, path, ...args) => {\n    let index = -1;\n    const isFunc = typeof path === 'function';\n    const result = isArrayLike(collection) ? new Array(collection.length) : [];\n\n    baseEach(collection, (value) => {\n        result[++index] = isFunc ? path.apply(value, args) : invokeProperty(value, path, ...args);\n    });\n\n    return result;\n};\n\n// _.invoke\nexport const invokeProperty = (object, path, ...args) => {\n    path = castPath(path, object);\n    object = parent(object, path);\n    const func = object == null ? object : object[toKey(last(path))];\n    return func == null ? undefined : func.apply(object, args);\n};\n\nexport const sortedIndex = (array, value, iteratee) => {\n    let low = 0;\n    let high = array == null ? 0 : array.length;\n    if (high == 0) {\n        return 0;\n    }\n\n    iteratee = getIteratee(iteratee, 2);\n    value = iteratee(value);\n\n    const valIsNaN = value !== value;\n    const valIsNull = value === null;\n    const valIsSymbol = isSymbol(value);\n    const valIsUndefined = value === undefined;\n\n    while (low < high) {\n        let setLow;\n        const mid = Math.floor((low + high) / 2);\n        const computed = iteratee(array[mid]);\n        const othIsDefined = computed !== undefined;\n        const othIsNull = computed === null;\n        const othIsReflexive = computed === computed;\n        const othIsSymbol = isSymbol(computed);\n\n        if (valIsNaN) {\n            setLow = othIsReflexive;\n        } else if (valIsUndefined) {\n            setLow = othIsReflexive &&othIsDefined;\n        } else if (valIsNull) {\n            setLow = othIsReflexive && othIsDefined && !othIsNull;\n        } else if (valIsSymbol) {\n            setLow = othIsReflexive && othIsDefined && !othIsNull && !othIsSymbol;\n        } else if (othIsNull || othIsSymbol) {\n            setLow = false;\n        } else {\n            setLow = computed < value;\n        }\n        if (setLow) {\n            low = mid + 1;\n        } else {\n            high = mid;\n        }\n    }\n    return Math.min(high, MAX_ARRAY_INDEX);\n};\n\nexport const uniq = (array, iteratee) => {\n    let index = -1;\n    let includes = (array, value) => {\n        const length = array == null ? 0 : array.length;\n        return !!length && array.indexOf(value) > -1;\n    };\n    iteratee = getIteratee(iteratee, 2);\n    let isCommon = true;\n\n    const { length } = array;\n    const result = [];\n    let seen = result;\n\n    if (length >= LARGE_ARRAY_SIZE) {\n        const set = iteratee ? null : createSet(array);\n        if (set) {\n            return setToArray(set);\n        }\n        isCommon = false;\n        includes = (cache, key) => cache.has(key);\n        seen = new SetCache;\n    } else {\n        seen = iteratee ? [] : result;\n    }\n    outer:\n    while (++index < length) {\n        let value = array[index];\n        const computed = iteratee ? iteratee(value) : value;\n\n        value = (value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n            let seenIndex = seen.length;\n            while (seenIndex--) {\n                if (seen[seenIndex] === computed) {\n                    continue outer;\n                }\n            }\n            if (iteratee) {\n                seen.push(computed);\n            }\n            result.push(value);\n        }\n        else if (!includes(seen, computed)) {\n            if (seen !== result) {\n                seen.push(computed);\n            }\n            result.push(value);\n        }\n    }\n    return result;\n};\n\nexport const clone = (value) => baseClone(value);\n\nexport const cloneDeep = (value) => baseClone(value, true);\n\nexport const isEmpty = (value) => {\n    if (value == null) {\n        return true;\n    }\n    if (isArrayLike(value) &&\n        (Array.isArray(value) || typeof value === 'string' || typeof value.splice === 'function' ||\n            isTypedArray(value) || isArguments(value))) {\n        return !value.length;\n    }\n    const tag = getTag(value);\n    if (tag == '[object Map]' || tag == '[object Set]') {\n        return !value.size;\n    }\n    if (isPrototype(value)) {\n        return !baseKeys(value).length;\n    }\n    for (const key in value) {\n        if (hasOwnProperty.call(value, key)) {\n            return false;\n        }\n    }\n    return true;\n};\nexport const isEqual = (object, other) => baseIsEqual(object, other);\n\nexport const isFunction = (value) => typeof value === 'function';\n\nexport const isPlainObject = (value) => {\n    if (!isObjectLike(value) || getTag(value) != '[object Object]') {\n        return false;\n    }\n    if (Object.getPrototypeOf(value) === null) {\n        return true;\n    }\n    let proto = value;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(value) === proto;\n};\n\nexport const toArray = (value) => {\n    if (!value) {\n        return [];\n    }\n\n    if (isArrayLike(value)) {\n        return isString(value) ? stringToArray(value) : copyArray(value);\n    }\n\n    if (Symbol.iterator && Symbol.iterator in Object(value)) {\n        const iterator = value[Symbol.iterator]();\n        let data;\n        const result = [];\n\n        while (!(data = iterator.next()).done) {\n            result.push(data.value);\n        }\n        return result;\n    }\n\n    const tag = getTag(value);\n    const func = tag == mapTag ? mapToArray : (tag == setTag ? setToArray : values);\n\n    return func(value);\n};\n\nexport function debounce(func, wait, opt) {\n    if (typeof func !== 'function') {\n        throw new TypeError('Expected a function');\n    }\n\n    let lastArgs;\n    let lastThis;\n    let maxWait;\n    let result;\n    let timerId;\n    let lastCallTime;\n    let lastInvokeTime = 0;\n    let leading = false;\n    let maxing = false;\n    let trailing = true;\n\n    const useRaf = (!wait && wait !== 0 && window && typeof window.requestAnimationFrame === 'function');\n\n    wait = +wait || 0;\n\n    if (isObject(opt)) {\n        leading = !!opt.leading;\n        maxing = 'maxWait' in opt;\n        maxWait = maxing ? Math.max(+opt.maxWait || 0, wait) : maxWait;\n        trailing = 'trailing' in opt ? !!opt.trailing : trailing;\n    }\n\n    function invokeFunc(time) {\n        const args = lastArgs;\n        const thisArg = lastThis;\n\n        lastArgs = lastThis = undefined;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n    }\n\n    function startTimer(pendingFunc, wait) {\n        if (useRaf) {\n            window.cancelAnimationFrame(timerId);\n            return window.requestAnimationFrame(pendingFunc);\n        }\n        return setTimeout(pendingFunc, wait);\n    }\n\n    function cancelTimer(id) {\n        if (useRaf) {\n            return window.cancelAnimationFrame(id);\n        }\n        clearTimeout(id);\n    }\n\n    function leadingEdge(time) {\n        lastInvokeTime = time;\n        timerId = startTimer(timerExpired, wait);\n        return leading ? invokeFunc(time) : result;\n    }\n\n    function remainingWait(time) {\n        const timeSinceLastCall = time - lastCallTime;\n        const timeSinceLastInvoke = time - lastInvokeTime;\n        const timeWaiting = wait - timeSinceLastCall;\n\n        return maxing ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;\n    }\n\n    function shouldInvoke(time) {\n        const timeSinceLastCall = time - lastCallTime;\n        const timeSinceLastInvoke = time - lastInvokeTime;\n\n        return (lastCallTime === undefined || (timeSinceLastCall >= wait) || (timeSinceLastCall < 0) ||\n            (maxing && timeSinceLastInvoke >= maxWait));\n    }\n\n    function timerExpired() {\n        const time = Date.now();\n        if (shouldInvoke(time)) {\n            return trailingEdge(time);\n        }\n        timerId = startTimer(timerExpired, remainingWait(time));\n    }\n\n    function trailingEdge(time) {\n        timerId = undefined;\n\n        if (trailing && lastArgs) {\n            return invokeFunc(time);\n        }\n        lastArgs = lastThis = undefined;\n        return result;\n    }\n\n    function debounced(...args) {\n        const time = Date.now();\n        const isInvoking = shouldInvoke(time);\n\n        lastArgs = args;\n        lastThis = this;\n        lastCallTime = time;\n\n        if (isInvoking) {\n            if (timerId === undefined) {\n                return leadingEdge(lastCallTime);\n            }\n            if (maxing) {\n                timerId = startTimer(timerExpired, wait);\n                return invokeFunc(lastCallTime);\n            }\n        }\n        if (timerId === undefined) {\n            timerId = startTimer(timerExpired, wait);\n        }\n        return result;\n    }\n\n    debounced.cancel = () => {\n        if (timerId !== undefined) {\n            cancelTimer(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = undefined;\n    };\n    debounced.flush = () => timerId === undefined ? result : trailingEdge(Date.now());\n    debounced.pending = () => timerId !== undefined;\n\n    return debounced;\n}\n\nexport const groupBy = (collection, iteratee) => {\n    iteratee = getIteratee(iteratee, 2);\n\n    return reduce(collection, (result, value, key) => {\n        key = iteratee(value);\n        if (hasOwnProperty.call(result, key)) {\n            result[key].push(value);\n        } else {\n            assignValue(result, key, [value]);\n        }\n        return result;\n    }, {});\n};\n\nexport const sortBy = (collection, iteratees = []) => {\n    if (collection == null) {\n        return [];\n    }\n\n    const length = iteratees.length;\n    if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n        iteratees = [];\n    } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n        iteratees = [iteratees[0]];\n    }\n\n    if (!Array.isArray(iteratees)) {\n        iteratees = [getIteratee(iteratees, 2)];\n    }\n\n    return baseOrderBy(collection, iteratees.flat(1), []);\n};\n\nexport const flattenDeep = (array) => {\n    const length = array == null ? 0 : array.length;\n    return length ? baseFlatten(array, Infinity) : [];\n};\n\nexport const without = (array, ...values) => isArrayLike(array) ? diff(array, values) : [];\n\nexport const difference = (array, ...values) =>\n    isObjectLike(array) && isArrayLike(array) ?\n        diff(array, values.flat(1)) : [];\n\nexport const intersection = (...arrays) => {\n    const mapped = arrays.map((array) =>\n        isObjectLike(array) && isArrayLike(array) ?\n            array : []\n    );\n\n    return mapped.length && mapped[0] === arrays[0] ?\n        intersect(mapped) : [];\n};\n\nexport const union = (...arrays) => {\n    const array = arrays.flat(1);\n    return uniq(array);\n};\n\nexport const has = (object, key) => {\n    if (object == null) {\n        return false;\n    }\n\n    if (typeof key === 'string') {\n        key = key.split('.');\n    }\n\n    let index = -1;\n    let value = object;\n\n    while (++index < key.length) {\n        if (!value || !hasOwnProperty.call(value, key[index])) {\n            return false;\n        }\n        value = value[key[index]];\n    }\n\n    return true;\n};\n\nexport const result = (object, path, defaultValue) => {\n    path = castPath(path, object);\n\n    let index = -1;\n    let length = path.length;\n\n    if (!length) {\n        length = 1;\n        object = undefined;\n    }\n    while (++index < length) {\n        let value = object == null ? undefined : object[toKey(path[index])];\n        if (value === undefined) {\n            index = length;\n            value = defaultValue;\n        }\n        object = typeof value === 'function' ? value.call(object) : value;\n    }\n    return object;\n};\n\nexport const omit = (object, ...paths) => {\n    let result = {};\n    if (object == null) {\n        return result;\n    }\n    let isDeep = false;\n    paths = paths.flat(1).map((path) => {\n        path = castPath(path, object);\n        isDeep || (isDeep = path.length > 1);\n        return path;\n    });\n    copyObject(object, getAllKeysIn(object), result);\n    if (isDeep) {\n        result = baseClone(result, true, true, true, (value) => isPlainObject(value) ? undefined : value);\n    }\n    let length = paths.length;\n    while (length--) {\n        unset(result, paths[length]);\n    }\n    return result;\n};\n\nexport const pick = (object, ...paths) => {\n    return object == null ? {} : basePick(object, paths.flat(Infinity));\n};\n\nexport const bindAll = (object, ...methodNames) => {\n    methodNames.flat(1).forEach((key) => {\n        key = toKey(key);\n        assignValue(object, key, object[key].bind(object));\n    });\n    return object;\n};\n\nexport const forIn = (object, iteratee = (value) => value) => {\n    let index = -1;\n    const iterable = Object(object);\n    const props = isArrayLike(object) ? arrayLikeKeys(object, true) : keysIn(object);\n    let length = props.length;\n\n    while(length--) {\n        const key = props[++index];\n        if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n        }\n    }\n};\n\nexport const camelCase = (string = '') => (\n    words(`${string}`.replace(/['\\u2019]/g, ''))\n        .reduce((result, word, index) => {\n            word = word.toLowerCase();\n            return result + (index ? upperFirst(word) : word);\n        }, '')\n);\n\nlet idCounter = 0;\n\nexport const uniqueId = (prefix = '') => {\n    const id = ++idCounter;\n    return `${prefix}` + id;\n};\n\nexport const merge = createAssigner((object, source, srcIndex, customizer) => {\n    baseMerge(object, source, srcIndex, customizer);\n}, true);\n","import $ from 'jquery';\nimport V from '../V/index.mjs';\nimport { config } from '../config/index.mjs';\nimport { \n    isBoolean,\n    isObject,\n    isNumber,\n    isString,\n    mixin,\n    deepMixin,\n    supplement,\n    defaults,\n    defaultsDeep,\n    deepSupplement,\n    assign,\n    invoke,\n    invokeProperty,\n    sortedIndex,\n    uniq,\n    clone,\n    cloneDeep,\n    isEmpty,\n    isEqual,\n    isFunction,\n    isPlainObject,\n    toArray,\n    debounce,\n    groupBy,\n    sortBy,\n    flattenDeep,\n    without,\n    difference,\n    intersection,\n    union,\n    has,\n    result,\n    omit,\n    pick,\n    bindAll,\n    forIn,\n    camelCase,\n    uniqueId,\n    merge\n} from './utilHelpers.mjs';\n\nexport const addClassNamePrefix = function(className) {\n\n    if (!className) return className;\n\n    return className.toString().split(' ').map(function(_className) {\n\n        if (_className.substr(0, config.classNamePrefix.length) !== config.classNamePrefix) {\n            _className = config.classNamePrefix + _className;\n        }\n\n        return _className;\n\n    }).join(' ');\n};\n\nexport const removeClassNamePrefix = function(className) {\n\n    if (!className) return className;\n\n    return className.toString().split(' ').map(function(_className) {\n\n        if (_className.substr(0, config.classNamePrefix.length) === config.classNamePrefix) {\n            _className = _className.substr(config.classNamePrefix.length);\n        }\n\n        return _className;\n\n    }).join(' ');\n};\n\nexport const parseDOMJSON = function(json, namespace) {\n\n    const selectors = {};\n    const groupSelectors = {};\n    const svgNamespace = V.namespace.svg;\n\n    const ns = namespace || svgNamespace;\n    const fragment = document.createDocumentFragment();\n\n    const parseNode = function(siblingsDef, parentNode, ns) {\n        for (let i = 0; i < siblingsDef.length; i++) {\n            const nodeDef = siblingsDef[i];\n\n            // Text node\n            if (typeof nodeDef === 'string') {\n                const textNode = document.createTextNode(nodeDef);\n                parentNode.appendChild(textNode);\n                continue;\n            }\n\n            // TagName\n            if (!nodeDef.hasOwnProperty('tagName')) throw new Error('json-dom-parser: missing tagName');\n            const tagName = nodeDef.tagName;\n\n            let node;\n\n            // Namespace URI\n            if (nodeDef.hasOwnProperty('namespaceURI')) ns = nodeDef.namespaceURI;\n            node = document.createElementNS(ns, tagName);\n            const svg = (ns === svgNamespace);\n\n            const wrapper = (svg) ? V : $;\n            // Attributes\n            const attributes = nodeDef.attributes;\n            if (attributes) wrapper(node).attr(attributes);\n            // Style\n            const style = nodeDef.style;\n            if (style) $(node).css(style);\n            // ClassName\n            if (nodeDef.hasOwnProperty('className')) {\n                const className = nodeDef.className;\n                if (svg) {\n                    node.className.baseVal = className;\n                } else {\n                    node.className = className;\n                }\n            }\n            // TextContent\n            if (nodeDef.hasOwnProperty('textContent')) {\n                node.textContent = nodeDef.textContent;\n            }\n            // Selector\n            if (nodeDef.hasOwnProperty('selector')) {\n                const nodeSelector = nodeDef.selector;\n                if (selectors[nodeSelector]) throw new Error('json-dom-parser: selector must be unique');\n                selectors[nodeSelector] = node;\n                wrapper(node).attr('joint-selector', nodeSelector);\n            }\n            // Groups\n            if (nodeDef.hasOwnProperty('groupSelector')) {\n                let nodeGroups = nodeDef.groupSelector;\n                if (!Array.isArray(nodeGroups)) nodeGroups = [nodeGroups];\n                for (let j = 0; j < nodeGroups.length; j++) {\n                    const nodeGroup = nodeGroups[j];\n                    let group = groupSelectors[nodeGroup];\n                    if (!group) group = groupSelectors[nodeGroup] = [];\n                    group.push(node);\n                }\n            }\n\n            parentNode.appendChild(node);\n\n            // Children\n            const childrenDef = nodeDef.children;\n            if (Array.isArray(childrenDef)) {\n                parseNode(childrenDef, node, ns);\n            }\n        }\n    };\n    parseNode(json, fragment, ns);\n    return {\n        fragment: fragment,\n        selectors: selectors,\n        groupSelectors: groupSelectors\n    };\n};\n\n// Return a simple hash code from a string. See http://werxltd.com/wp/2010/05/13/javascript-implementation-of-javas-string-hashcode-method/.\nexport const hashCode = function(str) {\n\n    let hash = 0;\n    if (str.length === 0) return hash;\n    for (let i = 0; i < str.length; i++) {\n        const c = str.charCodeAt(i);\n        hash = ((hash << 5) - hash) + c;\n        hash = hash & hash; // Convert to 32bit integer\n    }\n    return hash;\n};\n\nexport const getByPath = function(obj, path, delimiter) {\n\n    var keys = Array.isArray(path) ? path : path.split(delimiter || '/');\n    var key;\n    var i = 0;\n    var length = keys.length;\n    while (i < length) {\n        key = keys[i++];\n        if (Object(obj) === obj && key in obj) {\n            obj = obj[key];\n        } else {\n            return undefined;\n        }\n    }\n    return obj;\n};\n\nconst isGetSafe = function(obj, key) {\n    // Prevent prototype pollution\n    // https://snyk.io/vuln/SNYK-JS-JSON8MERGEPATCH-1038399\n    if (typeof key !== 'string' && typeof key !== 'number') {\n        key = String(key);\n    }\n    if (key === 'constructor' && typeof obj[key] === 'function') {\n        return false;\n    }\n    if (key === '__proto__') {\n        return false;\n    }\n    return true;\n};\n\nexport const setByPath = function(obj, path, value, delimiter) {\n\n    const keys = Array.isArray(path) ? path : path.split(delimiter || '/');\n    const last = keys.length - 1;\n    let diver = obj;\n    let i = 0;\n\n    for (; i < last; i++) {\n        const key = keys[i];\n        if (!isGetSafe(diver, key)) return obj;\n        const value = diver[key];\n        // diver creates an empty object if there is no nested object under such a key.\n        // This means that one can populate an empty nested object with setByPath().\n        diver = value || (diver[key] = {});\n    }\n\n    diver[keys[last]] = value;\n\n    return obj;\n};\n\nexport const unsetByPath = function(obj, path, delimiter) {\n\n    const keys = Array.isArray(path) ? path : path.split(delimiter || '/');\n    const last = keys.length - 1;\n    let diver = obj;\n    let i = 0;\n\n    for (; i < last; i++) {\n        const key = keys[i];\n        if (!isGetSafe(diver, key)) return obj;\n        const value = diver[key];\n        if (!value) return obj;\n        diver = value;\n    }\n\n    delete diver[keys[last]];\n\n    return obj;\n};\n\nexport const flattenObject = function(obj, delim, stop) {\n\n    delim = delim || '/';\n    var ret = {};\n\n    for (var key in obj) {\n\n        if (!obj.hasOwnProperty(key)) continue;\n\n        var shouldGoDeeper = typeof obj[key] === 'object';\n        if (shouldGoDeeper && stop && stop(obj[key])) {\n            shouldGoDeeper = false;\n        }\n\n        if (shouldGoDeeper) {\n\n            var flatObject = flattenObject(obj[key], delim, stop);\n\n            for (var flatKey in flatObject) {\n                if (!flatObject.hasOwnProperty(flatKey)) continue;\n                ret[key + delim + flatKey] = flatObject[flatKey];\n            }\n\n        } else {\n\n            ret[key] = obj[key];\n        }\n    }\n\n    return ret;\n};\n\nexport const uuid = function() {\n\n    // credit: http://stackoverflow.com/posts/2117523/revisions\n\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        var r = (Math.random() * 16) | 0;\n        var v = (c === 'x') ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n};\n\n// Generates global unique id and stores it as a property of the object, if provided.\nexport const guid = function(obj) {\n\n    guid.id = guid.id || 1;\n\n    if (obj === undefined) {\n        return 'j_' + guid.id++;\n    }\n\n    obj.id = (obj.id === undefined ? 'j_' + guid.id++ : obj.id);\n    return obj.id;\n};\n\nexport const toKebabCase = function(string) {\n\n    return string.replace(/[A-Z]/g, '-$&').toLowerCase();\n};\n\nexport const normalizeEvent = function(evt) {\n\n    if (evt.normalized) return evt;\n\n    const { originalEvent, target } = evt;\n\n    // If the event is a touch event, normalize it to a mouse event.\n    const touch = originalEvent && originalEvent.changedTouches && originalEvent.changedTouches[0];\n    if (touch) {\n        for (let property in touch) {\n            // copy all the properties from the first touch that are not\n            // defined on TouchEvent (clientX, clientY, pageX, pageY, screenX, screenY, identifier, ...)\n            if (evt[property] === undefined) {\n                evt[property] = touch[property];\n            }\n        }\n    }\n    // IE: evt.target could be set to SVGElementInstance for SVGUseElement\n    if (target) {\n        const useElement = target.correspondingUseElement;\n        if (useElement) evt.target = useElement;\n    }\n\n    evt.normalized = true;\n\n    return evt;\n};\n\nexport const normalizeWheel = function(evt) {\n    // Sane values derived empirically\n    const PIXEL_STEP  = 10;\n    const LINE_HEIGHT = 40;\n    const PAGE_HEIGHT = 800;\n\n    let sX = 0, sY = 0, pX = 0, pY = 0;\n\n    // Legacy\n    if ('detail'      in evt) { sY = evt.detail; }\n    if ('wheelDelta'  in evt) { sY = -evt.wheelDelta / 120; }\n    if ('wheelDeltaY' in evt) { sY = -evt.wheelDeltaY / 120; }\n    if ('wheelDeltaX' in evt) { sX = -evt.wheelDeltaX / 120; }\n\n    // side scrolling on FF with DOMMouseScroll\n    if ( 'axis' in evt && evt.axis === evt.HORIZONTAL_AXIS ) {\n        sX = sY;\n        sY = 0;\n    }\n\n    pX = 'deltaX' in evt ? evt.deltaX : sX * PIXEL_STEP;\n    pY = 'deltaY' in evt ? evt.deltaY : sY * PIXEL_STEP;\n\n    if ((pX || pY) && evt.deltaMode) {\n        if (evt.deltaMode == 1) {\n            pX *= LINE_HEIGHT;\n            pY *= LINE_HEIGHT;\n        } else {\n            pX *= PAGE_HEIGHT;\n            pY *= PAGE_HEIGHT;\n        }\n    }\n\n    // macOS switches deltaX and deltaY automatically when scrolling with shift key, so this is needed in other cases\n    if (evt.deltaX === 0 && evt.deltaY !== 0 && evt.shiftKey) {\n        pX = pY;\n        pY = 0;\n        sX = sY;\n        sY = 0;\n    }\n\n    // Fall-back if spin cannot be determined\n    if (pX && !sX) { sX = (pX < 1) ? -1 : 1; }\n    if (pY && !sY) { sY = (pY < 1) ? -1 : 1; }\n\n    return {\n        spinX  : sX,\n        spinY  : sY,\n        deltaX : pX,\n        deltaY : pY,\n    };\n};\n\nexport const cap = function(val, max) {\n    return val > max ? max : val < -max ? -max : val;\n};\n\nexport const nextFrame = (function() {\n\n    var raf;\n\n    if (typeof window !== 'undefined') {\n\n        raf = window.requestAnimationFrame ||\n            window.webkitRequestAnimationFrame ||\n            window.mozRequestAnimationFrame ||\n            window.oRequestAnimationFrame ||\n            window.msRequestAnimationFrame;\n    }\n\n    if (!raf) {\n\n        var lastTime = 0;\n\n        raf = function(callback) {\n\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = setTimeout(function() {\n                callback(currTime + timeToCall);\n            }, timeToCall);\n\n            lastTime = currTime + timeToCall;\n\n            return id;\n        };\n    }\n\n    return function(callback, context, ...rest) {\n        return (context !== undefined)\n            ? raf(callback.bind(context, ...rest))\n            : raf(callback);\n    };\n\n})();\n\nexport const cancelFrame = (function() {\n\n    var caf;\n    var client = typeof window != 'undefined';\n\n    if (client) {\n\n        caf = window.cancelAnimationFrame ||\n            window.webkitCancelAnimationFrame ||\n            window.webkitCancelRequestAnimationFrame ||\n            window.msCancelAnimationFrame ||\n            window.msCancelRequestAnimationFrame ||\n            window.oCancelAnimationFrame ||\n            window.oCancelRequestAnimationFrame ||\n            window.mozCancelAnimationFrame ||\n            window.mozCancelRequestAnimationFrame;\n    }\n\n    caf = caf || clearTimeout;\n\n    return client ? caf.bind(window) : caf;\n\n})();\n\n/**\n * @deprecated\n */\nexport const shapePerimeterConnectionPoint = function(linkView, view, magnet, reference) {\n\n    var bbox;\n    var spot;\n\n    if (!magnet) {\n\n        // There is no magnet, try to make the best guess what is the\n        // wrapping SVG element. This is because we want this \"smart\"\n        // connection points to work out of the box without the\n        // programmer to put magnet marks to any of the subelements.\n        // For example, we want the function to work on basic.Path elements\n        // without any special treatment of such elements.\n        // The code below guesses the wrapping element based on\n        // one simple assumption. The wrapping elemnet is the\n        // first child of the scalable group if such a group exists\n        // or the first child of the rotatable group if not.\n        // This makese sense because usually the wrapping element\n        // is below any other sub element in the shapes.\n        var scalable = view.$('.scalable')[0];\n        var rotatable = view.$('.rotatable')[0];\n\n        if (scalable && scalable.firstChild) {\n\n            magnet = scalable.firstChild;\n\n        } else if (rotatable && rotatable.firstChild) {\n\n            magnet = rotatable.firstChild;\n        }\n    }\n\n    if (magnet) {\n\n        spot = V(magnet).findIntersection(reference, linkView.paper.cells);\n        if (!spot) {\n            bbox = V(magnet).getBBox({ target: linkView.paper.cells });\n        }\n\n    } else {\n\n        bbox = view.model.getBBox();\n        spot = bbox.intersectionWithLineFromCenterToPoint(reference);\n    }\n    return spot || bbox.center();\n};\n\nexport const isPercentage = function(val) {\n\n    return isString(val) && val.slice(-1) === '%';\n};\n\nexport const parseCssNumeric = function(val, restrictUnits) {\n\n    function getUnit(validUnitExp) {\n\n        // one or more numbers, followed by\n        // any number of (\n        //  `.`, followed by\n        //  one or more numbers\n        // ), followed by\n        // `validUnitExp`, followed by\n        // end of string\n        var matches = new RegExp('(?:\\\\d+(?:\\\\.\\\\d+)*)(' + validUnitExp + ')$').exec(val);\n\n        if (!matches) return null;\n        return matches[1];\n    }\n\n    var number = parseFloat(val);\n\n    // if `val` cannot be parsed as a number, return `null`\n    if (Number.isNaN(number)) return null;\n\n    // else: we know `output.value`\n    var output = {};\n    output.value = number;\n\n    // determine the unit\n    var validUnitExp;\n    if (restrictUnits == null) {\n        // no restriction\n        // accept any unit, as well as no unit\n        validUnitExp = '[A-Za-z]*';\n\n    } else if (Array.isArray(restrictUnits)) {\n        // if this is an empty array, top restriction - return `null`\n        if (restrictUnits.length === 0) return null;\n\n        // else: restriction - an array of valid unit strings\n        validUnitExp = restrictUnits.join('|');\n\n    } else if (isString(restrictUnits)) {\n        // restriction - a single valid unit string\n        validUnitExp = restrictUnits;\n    }\n    var unit = getUnit(validUnitExp);\n\n    // if we found no matches for `restrictUnits`, return `null`\n    if (unit === null) return null;\n\n    // else: we know the unit\n    output.unit = unit;\n    return output;\n};\n\nconst NO_SPACE = 0;\n\nfunction splitWordWithEOL(word, eol) {\n    const eolWords = word.split(eol);\n    let n = 1;\n    for (let j = 0, jl = eolWords.length - 1; j < jl; j++) {\n        const replacement = [];\n        if (j > 0 || eolWords[0] !== '') replacement.push(NO_SPACE);\n        replacement.push(eol);\n        if (j < jl - 1 || eolWords[jl] !== '') replacement.push(NO_SPACE);\n        eolWords.splice(n, 0, ...replacement);\n        n += replacement.length + 1;\n    }\n    return eolWords.filter(word => word !== '');\n}\n\n\nfunction getLineHeight(heightValue, textElement) {\n    if (heightValue === null) {\n        // Default 1em lineHeight\n        return textElement.getBBox().height;\n    }\n\n    switch (heightValue.unit) {\n        case 'em':\n            return textElement.getBBox().height * heightValue.value;\n        case 'px':\n        case '':\n            return heightValue.value;\n    }\n}\n\nexport const breakText = function(text, size, styles = {}, opt = {}) {\n\n    var width = size.width;\n    var height = size.height;\n\n    var svgDocument = opt.svgDocument || V('svg').node;\n    var textSpan = V('tspan').node;\n    var textElement = V('text').attr(styles).append(textSpan).node;\n    var textNode = document.createTextNode('');\n\n    // Prevent flickering\n    textElement.style.opacity = 0;\n    // Prevent FF from throwing an uncaught exception when `getBBox()`\n    // called on element that is not in the render tree (is not measurable).\n    // <tspan>.getComputedTextLength() returns always 0 in this case.\n    // Note that the `textElement` resp. `textSpan` can become hidden\n    // when it's appended to the DOM and a `display: none` CSS stylesheet\n    // rule gets applied.\n    textElement.style.display = 'block';\n    textSpan.style.display = 'block';\n\n    textSpan.appendChild(textNode);\n    svgDocument.appendChild(textElement); // lgtm [js/xss-through-dom]\n\n    if (!opt.svgDocument) {\n\n        document.body.appendChild(svgDocument);\n    }\n\n    const preserveSpaces = opt.preserveSpaces;\n    const space = ' ';\n    var separator = opt.separator || space;\n    var eol = opt.eol || '\\n';\n    var hyphen = opt.hyphen ? new RegExp(opt.hyphen) : /[^\\w\\d]/;\n    var maxLineCount = opt.maxLineCount;\n    if (!isNumber(maxLineCount)) maxLineCount = Infinity;\n\n    var words = text.split(separator);\n    var full = [];\n    var lines = [];\n    var p, h;\n    var lineHeight;\n\n    if (preserveSpaces) {\n        V(textSpan).attr('xml:space', 'preserve');\n    }\n\n    for (var i = 0, l = 0, len = words.length; i < len; i++) {\n\n        var word = words[i];\n\n        if (!word && !preserveSpaces) continue;\n        if (typeof word !== 'string') continue;\n\n        var isEol = false;\n        if (eol && word.indexOf(eol) >= 0) {\n            // word contains end-of-line character\n            if (word.length > 1) {\n                // separate word and continue cycle\n                const eolWords = splitWordWithEOL(words[i], eol);\n                words.splice(i, 1, ...eolWords);\n                i--;\n                len = words.length;\n                continue;\n            } else {\n                // creates a new line\n                if (preserveSpaces && typeof words[i - 1] === 'string' ) {\n                    words.splice(i, NO_SPACE, '', NO_SPACE);\n                    len += 2;\n                    i--;\n                    continue;\n                }\n                lines[++l] = (!preserveSpaces || typeof words[i + 1] === 'string') ? '' : undefined;\n                isEol = true;\n            }\n        }\n\n        if (!isEol) {\n\n            let data;\n            if (preserveSpaces) {\n                data = lines[l] !== undefined ? lines[l] + space + word : word;\n            } else {\n                data = lines[l] ? lines[l] + space + word : word;\n            }\n\n            textNode.data = data;\n\n            if (textSpan.getComputedTextLength() <= width) {\n\n                // the current line fits\n                lines[l] = data;\n\n                if (p || h) {\n                // We were partitioning. Put rest of the word onto next line\n                    full[l++] = true;\n\n                    // cancel partitioning and splitting by hyphens\n                    p = 0;\n                    h = 0;\n                }\n\n            } else {\n\n                if (!lines[l] || p) {\n\n                    var partition = !!p;\n\n                    p = word.length - 1;\n\n                    if (partition || !p) {\n\n                        // word has only one character.\n                        if (!p) {\n\n                            if (!lines[l]) {\n\n                                // we won't fit this text within our rect\n                                lines = [];\n\n                                break;\n                            }\n\n                            // partitioning didn't help on the non-empty line\n                            // try again, but this time start with a new line\n\n                            // cancel partitions created\n                            words.splice(i, 2, word + words[i + 1]);\n\n                            // adjust word length\n                            len--;\n\n                            full[l++] = true;\n                            i--;\n\n                            continue;\n                        }\n\n                        // move last letter to the beginning of the next word\n                        words[i] = word.substring(0, p);\n                        const nextWord = words[i + 1];\n                        words[i + 1] = word.substring(p) + (nextWord === undefined || nextWord === NO_SPACE ? '' : nextWord);\n\n                    } else {\n\n                        if (h) {\n                        // cancel splitting and put the words together again\n                            words.splice(i, 2, words[i] + words[i + 1]);\n                            h = 0;\n                        } else {\n                            var hyphenIndex = word.search(hyphen);\n                            if (hyphenIndex > -1 && hyphenIndex !== word.length - 1 && hyphenIndex !== 0) {\n                                h = hyphenIndex + 1;\n                                p = 0;\n                            }\n\n                            // We initiate partitioning or splitting\n                            // split the long word into two words\n                            words.splice(i, 1, word.substring(0, h || p), word.substring(h|| p));\n                            // adjust words length\n                            len++;\n\n                        }\n\n                        if (l && !full[l - 1]) {\n                        // if the previous line is not full, try to fit max part of\n                        // the current word there\n                            l--;\n                        }\n                    }\n\n                    if (!preserveSpaces || lines[l] !== '') {\n                        i--;\n                    }\n\n                    continue;\n                }\n\n                l++;\n                i--;\n            }\n        }\n        var lastL = null;\n\n        if (lines.length > maxLineCount) {\n\n            lastL = maxLineCount - 1;\n\n        } else if (height !== undefined) {\n\n            // if size.height is defined we have to check whether the height of the entire\n            // text exceeds the rect height\n\n            if (lineHeight === undefined && textNode.data !== '') {\n\n                // use the same defaults as in V.prototype.text\n                if (styles.lineHeight === 'auto') {\n                    lineHeight = getLineHeight({ value: 1.5, unit: 'em' }, textElement);\n                } else {\n                    const parsed = parseCssNumeric(styles.lineHeight, ['em', 'px', '']);\n\n                    lineHeight = getLineHeight(parsed, textElement);\n                }\n            }\n\n            if (lineHeight * lines.length > height) {\n                // remove overflowing lines\n                lastL = Math.floor(height / lineHeight) - 1;\n            }\n        }\n\n        if (lastL !== null) {\n\n            lines.splice(lastL + 1);\n\n            // add ellipsis\n            var ellipsis = opt.ellipsis;\n            if (!ellipsis || lastL < 0) break;\n            if (typeof ellipsis !== 'string') ellipsis = '\\u2026';\n\n            var lastLine = lines[lastL];\n            if (!lastLine && !isEol) break;\n            var k = lastLine.length;\n            var lastLineWithOmission, lastChar, separatorChar;\n            do {\n                lastChar = lastLine[k];\n                lastLineWithOmission = lastLine.substring(0, k);\n                if (!lastChar) {\n                    separatorChar = (typeof separator === 'string') ? separator : ' ';\n                    lastLineWithOmission += separatorChar;\n                } else if (lastChar.match(separator)) {\n                    lastLineWithOmission += lastChar;\n                }\n                lastLineWithOmission += ellipsis;\n                textNode.data = lastLineWithOmission;\n                if (textSpan.getComputedTextLength() <= width) {\n                    lines[lastL] = lastLineWithOmission;\n                    break;\n                }\n                k--;\n            } while (k >= 0);\n            break;\n        }\n    }\n\n    if (opt.svgDocument) {\n\n        // svg document was provided, remove the text element only\n        svgDocument.removeChild(textElement);\n\n    } else {\n\n        // clean svg document\n        document.body.removeChild(svgDocument);\n    }\n\n    return lines.join(eol);\n};\n\n// Sanitize HTML\n// Based on https://gist.github.com/ufologist/5a0da51b2b9ef1b861c30254172ac3c9\n// Parses a string into an array of DOM nodes.\n// Then outputs it back as a string.\nexport const sanitizeHTML = function(html) {\n\n    // Ignores tags that are invalid inside a <div> tag (e.g. <body>, <head>)\n\n    // If documentContext (second parameter) is not specified or given as `null` or `undefined`, a new document is used.\n    // Inline events will not execute when the HTML is parsed; this includes, for example, sending GET requests for images.\n\n    // If keepScripts (last parameter) is `false`, scripts are not executed.\n    var output = $($.parseHTML('<div>' + html + '</div>', null, false));\n\n    output.find('*').each(function() { // for all nodes\n        var currentNode = this;\n\n        $.each(currentNode.attributes, function() { // for all attributes in each node\n            var currentAttribute = this;\n\n            var attrName = currentAttribute.name;\n            var attrValue = currentAttribute.value;\n\n            // Remove attribute names that start with \"on\" (e.g. onload, onerror...).\n            // Remove attribute values that start with \"javascript:\" pseudo protocol (e.g. `href=\"javascript:alert(1)\"`).\n            if (attrName.startsWith('on') || attrValue.startsWith('javascript:') || attrValue.startsWith('data:') || attrValue.startsWith('vbscript:')) {\n                $(currentNode).removeAttr(attrName);\n            }\n        });\n    });\n\n    return output.html();\n};\n\n// Download `blob` as file with `fileName`.\n// Does not work in IE9.\nexport const downloadBlob = function(blob, fileName) {\n\n    if (window.navigator.msSaveBlob) { // requires IE 10+\n        // pulls up a save dialog\n        window.navigator.msSaveBlob(blob, fileName);\n\n    } else { // other browsers\n        // downloads directly in Chrome and Safari\n\n        // presents a save/open dialog in Firefox\n        // Firefox bug: `from` field in save dialog always shows `from:blob:`\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1053327\n\n        var url = window.URL.createObjectURL(blob);\n        var link = document.createElement('a');\n\n        link.href = url;\n        link.download = fileName;\n        document.body.appendChild(link);\n\n        link.click();\n\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(url); // mark the url for garbage collection\n    }\n};\n\n// Download `dataUri` as file with `fileName`.\n// Does not work in IE9.\nexport const downloadDataUri = function(dataUri, fileName) {\n\n    const blob = dataUriToBlob(dataUri);\n    downloadBlob(blob, fileName);\n};\n\n// Convert an uri-encoded data component (possibly also base64-encoded) to a blob.\nexport const dataUriToBlob = function(dataUri) {\n\n    // first, make sure there are no newlines in the data uri\n    dataUri = dataUri.replace(/\\s/g, '');\n    dataUri = decodeURIComponent(dataUri);\n\n    var firstCommaIndex = dataUri.indexOf(','); // split dataUri as `dataTypeString`,`data`\n\n    var dataTypeString = dataUri.slice(0, firstCommaIndex); // e.g. 'data:image/jpeg;base64'\n    var mimeString = dataTypeString.split(':')[1].split(';')[0]; // e.g. 'image/jpeg'\n\n    var data = dataUri.slice(firstCommaIndex + 1);\n    var decodedString;\n    if (dataTypeString.indexOf('base64') >= 0) { // data may be encoded in base64\n        decodedString = atob(data); // decode data\n    } else {\n        // convert the decoded string to UTF-8\n        decodedString = unescape(encodeURIComponent(data));\n    }\n    // write the bytes of the string to a typed array\n    var ia = new Uint8Array(decodedString.length);\n    for (var i = 0; i < decodedString.length; i++) {\n        ia[i] = decodedString.charCodeAt(i);\n    }\n\n    return new Blob([ia], { type: mimeString }); // return the typed array as Blob\n};\n\n// Read an image at `url` and return it as base64-encoded data uri.\n// The mime type of the image is inferred from the `url` file extension.\n// If data uri is provided as `url`, it is returned back unchanged.\n// `callback` is a method with `err` as first argument and `dataUri` as second argument.\n// Works with IE9.\nexport const imageToDataUri = function(url, callback) {\n\n    if (!url || url.substr(0, 'data:'.length) === 'data:') {\n        // No need to convert to data uri if it is already in data uri.\n\n        // This not only convenient but desired. For example,\n        // IE throws a security error if data:image/svg+xml is used to render\n        // an image to the canvas and an attempt is made to read out data uri.\n        // Now if our image is already in data uri, there is no need to render it to the canvas\n        // and so we can bypass this error.\n\n        // Keep the async nature of the function.\n        return setTimeout(function() {\n            callback(null, url);\n        }, 0);\n    }\n\n    // chrome, IE10+\n    var modernHandler = function(xhr, callback) {\n\n        if (xhr.status === 200) {\n\n            var reader = new FileReader();\n\n            reader.onload = function(evt) {\n                var dataUri = evt.target.result;\n                callback(null, dataUri);\n            };\n\n            reader.onerror = function() {\n                callback(new Error('Failed to load image ' + url));\n            };\n\n            reader.readAsDataURL(xhr.response);\n        } else {\n            callback(new Error('Failed to load image ' + url));\n        }\n    };\n\n    var legacyHandler = function(xhr, callback) {\n\n        var Uint8ToString = function(u8a) {\n            var CHUNK_SZ = 0x8000;\n            var c = [];\n            for (var i = 0; i < u8a.length; i += CHUNK_SZ) {\n                c.push(String.fromCharCode.apply(null, u8a.subarray(i, i + CHUNK_SZ)));\n            }\n            return c.join('');\n        };\n\n        if (xhr.status === 200) {\n\n            var bytes = new Uint8Array(xhr.response);\n\n            var suffix = (url.split('.').pop()) || 'png';\n            var map = {\n                'svg': 'svg+xml'\n            };\n            var meta = 'data:image/' + (map[suffix] || suffix) + ';base64,';\n            var b64encoded = meta + btoa(Uint8ToString(bytes));\n            callback(null, b64encoded);\n        } else {\n            callback(new Error('Failed to load image ' + url));\n        }\n    };\n\n    var xhr = new XMLHttpRequest();\n\n    xhr.open('GET', url, true);\n    xhr.addEventListener('error', function() {\n        callback(new Error('Failed to load image ' + url));\n    });\n\n    xhr.responseType = window.FileReader ? 'blob' : 'arraybuffer';\n\n    xhr.addEventListener('load', function() {\n        if (window.FileReader) {\n            modernHandler(xhr, callback);\n        } else {\n            legacyHandler(xhr, callback);\n        }\n    });\n\n    xhr.send();\n};\n\nexport const getElementBBox = function(el) {\n\n    var $el = $(el);\n    if ($el.length === 0) {\n        throw new Error('Element not found');\n    }\n\n    var element = $el[0];\n    var doc = element.ownerDocument;\n    var clientBBox = element.getBoundingClientRect();\n\n    var strokeWidthX = 0;\n    var strokeWidthY = 0;\n\n    // Firefox correction\n    if (element.ownerSVGElement) {\n\n        var vel = V(element);\n        var bbox = vel.getBBox({ target: vel.svg() });\n\n        // if FF getBoundingClientRect includes stroke-width, getBBox doesn't.\n        // To unify this across all browsers we need to adjust the final bBox with `stroke-width` value.\n        strokeWidthX = (clientBBox.width - bbox.width);\n        strokeWidthY = (clientBBox.height - bbox.height);\n    }\n\n    return {\n        x: clientBBox.left + window.pageXOffset - doc.documentElement.offsetLeft + strokeWidthX / 2,\n        y: clientBBox.top + window.pageYOffset - doc.documentElement.offsetTop + strokeWidthY / 2,\n        width: clientBBox.width - strokeWidthX,\n        height: clientBBox.height - strokeWidthY\n    };\n};\n\n\n// Highly inspired by the jquery.sortElements plugin by Padolsey.\n// See http://james.padolsey.com/javascript/sorting-elements-with-jquery/.\nexport const sortElements = function(elements, comparator) {\n\n    var $elements = $(elements);\n    var placements = $elements.map(function() {\n\n        var sortElement = this;\n        var parentNode = sortElement.parentNode;\n        // Since the element itself will change position, we have\n        // to have some way of storing it's original position in\n        // the DOM. The easiest way is to have a 'flag' node:\n        var nextSibling = parentNode.insertBefore(document.createTextNode(''), sortElement.nextSibling);\n\n        return function() {\n\n            if (parentNode === this) {\n                throw new Error('You can\\'t sort elements if any one is a descendant of another.');\n            }\n\n            // Insert before flag:\n            parentNode.insertBefore(this, nextSibling);\n            // Remove flag:\n            parentNode.removeChild(nextSibling);\n        };\n    });\n\n    return Array.prototype.sort.call($elements, comparator).each(function(i) {\n        placements[i].call(this);\n    });\n};\n\n// Sets attributes on the given element and its descendants based on the selector.\n// `attrs` object: { [SELECTOR1]: { attrs1 }, [SELECTOR2]: { attrs2}, ... } e.g. { 'input': { color : 'red' }}\nexport const setAttributesBySelector = function(element, attrs) {\n\n    var $element = $(element);\n\n    forIn(attrs, function(attrs, selector) {\n        var $elements = $element.find(selector).addBack().filter(selector);\n        // Make a special case for setting classes.\n        // We do not want to overwrite any existing class.\n        if (has(attrs, 'class')) {\n            $elements.addClass(attrs['class']);\n            attrs = omit(attrs, 'class');\n        }\n        $elements.attr(attrs);\n    });\n};\n\n// Return a new object with all four sides (top, right, bottom, left) in it.\n// Value of each side is taken from the given argument (either number or object).\n// Default value for a side is 0.\n// Examples:\n// normalizeSides(5) --> { top: 5, right: 5, bottom: 5, left: 5 }\n// normalizeSides({ horizontal: 5 }) --> { top: 0, right: 5, bottom: 0, left: 5 }\n// normalizeSides({ left: 5 }) --> { top: 0, right: 0, bottom: 0, left: 5 }\n// normalizeSides({ horizontal: 10, left: 5 }) --> { top: 0, right: 10, bottom: 0, left: 5 }\n// normalizeSides({ horizontal: 0, left: 5 }) --> { top: 0, right: 0, bottom: 0, left: 5 }\nexport const normalizeSides = function(box) {\n\n    if (Object(box) !== box) { // `box` is not an object\n        var val = 0; // `val` left as 0 if `box` cannot be understood as finite number\n        if (isFinite(box)) val = +box; // actually also accepts string numbers (e.g. '100')\n\n        return { top: val, right: val, bottom: val, left: val };\n    }\n\n    // `box` is an object\n    var top, right, bottom, left;\n    top = right = bottom = left = 0;\n\n    if (isFinite(box.vertical)) top = bottom = +box.vertical;\n    if (isFinite(box.horizontal)) right = left = +box.horizontal;\n\n    if (isFinite(box.top)) top = +box.top; // overwrite vertical\n    if (isFinite(box.right)) right = +box.right; // overwrite horizontal\n    if (isFinite(box.bottom)) bottom = +box.bottom; // overwrite vertical\n    if (isFinite(box.left)) left = +box.left; // overwrite horizontal\n\n    return { top: top, right: right, bottom: bottom, left: left };\n};\n\nexport const timing = {\n\n    linear: function(t) {\n        return t;\n    },\n\n    quad: function(t) {\n        return t * t;\n    },\n\n    cubic: function(t) {\n        return t * t * t;\n    },\n\n    inout: function(t) {\n        if (t <= 0) return 0;\n        if (t >= 1) return 1;\n        var t2 = t * t;\n        var t3 = t2 * t;\n        return 4 * (t < .5 ? t3 : 3 * (t - t2) + t3 - .75);\n    },\n\n    exponential: function(t) {\n        return Math.pow(2, 10 * (t - 1));\n    },\n\n    bounce: function(t) {\n        for (var a = 0, b = 1; 1; a += b, b /= 2) {\n            if (t >= (7 - 4 * a) / 11) {\n                var q = (11 - 6 * a - 11 * t) / 4;\n                return -q * q + b * b;\n            }\n        }\n    },\n\n    reverse: function(f) {\n        return function(t) {\n            return 1 - f(1 - t);\n        };\n    },\n\n    reflect: function(f) {\n        return function(t) {\n            return .5 * (t < .5 ? f(2 * t) : (2 - f(2 - 2 * t)));\n        };\n    },\n\n    clamp: function(f, n, x) {\n        n = n || 0;\n        x = x || 1;\n        return function(t) {\n            var r = f(t);\n            return r < n ? n : r > x ? x : r;\n        };\n    },\n\n    back: function(s) {\n        if (!s) s = 1.70158;\n        return function(t) {\n            return t * t * ((s + 1) * t - s);\n        };\n    },\n\n    elastic: function(x) {\n        if (!x) x = 1.5;\n        return function(t) {\n            return Math.pow(2, 10 * (t - 1)) * Math.cos(20 * Math.PI * x / 3 * t);\n        };\n    }\n};\n\nexport const interpolate = {\n\n    number: function(a, b) {\n        var d = b - a;\n        return function(t) {\n            return a + d * t;\n        };\n    },\n\n    object: function(a, b) {\n        var s = Object.keys(a);\n        return function(t) {\n            var i, p;\n            var r = {};\n            for (i = s.length - 1; i != -1; i--) {\n                p = s[i];\n                r[p] = a[p] + (b[p] - a[p]) * t;\n            }\n            return r;\n        };\n    },\n\n    hexColor: function(a, b) {\n\n        var ca = parseInt(a.slice(1), 16);\n        var cb = parseInt(b.slice(1), 16);\n        var ra = ca & 0x0000ff;\n        var rd = (cb & 0x0000ff) - ra;\n        var ga = ca & 0x00ff00;\n        var gd = (cb & 0x00ff00) - ga;\n        var ba = ca & 0xff0000;\n        var bd = (cb & 0xff0000) - ba;\n\n        return function(t) {\n\n            var r = (ra + rd * t) & 0x000000ff;\n            var g = (ga + gd * t) & 0x0000ff00;\n            var b = (ba + bd * t) & 0x00ff0000;\n\n            return '#' + (1 << 24 | r | g | b).toString(16).slice(1);\n        };\n    },\n\n    unit: function(a, b) {\n\n        var r = /(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/;\n        var ma = r.exec(a);\n        var mb = r.exec(b);\n        var p = mb[1].indexOf('.');\n        var f = p > 0 ? mb[1].length - p - 1 : 0;\n        a = +ma[1];\n        var d = +mb[1] - a;\n        var u = ma[2];\n\n        return function(t) {\n            return (a + d * t).toFixed(f) + u;\n        };\n    }\n};\n\n// SVG filters.\n// (values in parentheses are default values)\nexport const filter = {\n\n    // `color` ... outline color ('blue')\n    // `width`... outline width (1)\n    // `opacity` ... outline opacity (1)\n    // `margin` ... gap between outline and the element (2)\n    outline: function(args) {\n\n        var tpl = '<filter><feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/><feMorphology in=\"SourceAlpha\" result=\"morphedOuter\" operator=\"dilate\" radius=\"${outerRadius}\" /><feMorphology in=\"SourceAlpha\" result=\"morphedInner\" operator=\"dilate\" radius=\"${innerRadius}\" /><feComposite result=\"morphedOuterColored\" in=\"colored\" in2=\"morphedOuter\" operator=\"in\"/><feComposite operator=\"xor\" in=\"morphedOuterColored\" in2=\"morphedInner\" result=\"outline\"/><feMerge><feMergeNode in=\"outline\"/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n\n        var margin = Number.isFinite(args.margin) ? args.margin : 2;\n        var width = Number.isFinite(args.width) ? args.width : 1;\n\n        return template(tpl)({\n            color: args.color || 'blue',\n            opacity: Number.isFinite(args.opacity) ? args.opacity : 1,\n            outerRadius: margin + width,\n            innerRadius: margin\n        });\n    },\n\n    // `color` ... color ('red')\n    // `width`... width (1)\n    // `blur` ... blur (0)\n    // `opacity` ... opacity (1)\n    highlight: function(args) {\n\n        var tpl = '<filter><feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/><feMorphology result=\"morphed\" in=\"SourceGraphic\" operator=\"dilate\" radius=\"${width}\"/><feComposite result=\"composed\" in=\"colored\" in2=\"morphed\" operator=\"in\"/><feGaussianBlur result=\"blured\" in=\"composed\" stdDeviation=\"${blur}\"/><feBlend in=\"SourceGraphic\" in2=\"blured\" mode=\"normal\"/></filter>';\n\n        return template(tpl)({\n            color: args.color || 'red',\n            width: Number.isFinite(args.width) ? args.width : 1,\n            blur: Number.isFinite(args.blur) ? args.blur : 0,\n            opacity: Number.isFinite(args.opacity) ? args.opacity : 1\n        });\n    },\n\n    // `x` ... horizontal blur (2)\n    // `y` ... vertical blur (optional)\n    blur: function(args) {\n\n        var x = Number.isFinite(args.x) ? args.x : 2;\n\n        return template('<filter><feGaussianBlur stdDeviation=\"${stdDeviation}\"/></filter>')({\n            stdDeviation: Number.isFinite(args.y) ? [x, args.y] : x\n        });\n    },\n\n    // `dx` ... horizontal shift (0)\n    // `dy` ... vertical shift (0)\n    // `blur` ... blur (4)\n    // `color` ... color ('black')\n    // `opacity` ... opacity (1)\n    dropShadow: function(args) {\n\n        var tpl = 'SVGFEDropShadowElement' in window\n            ? '<filter><feDropShadow stdDeviation=\"${blur}\" dx=\"${dx}\" dy=\"${dy}\" flood-color=\"${color}\" flood-opacity=\"${opacity}\"/></filter>'\n            : '<filter><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"${blur}\"/><feOffset dx=\"${dx}\" dy=\"${dy}\" result=\"offsetblur\"/><feFlood flood-color=\"${color}\"/><feComposite in2=\"offsetblur\" operator=\"in\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"${opacity}\"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n\n        return template(tpl)({\n            dx: args.dx || 0,\n            dy: args.dy || 0,\n            opacity: Number.isFinite(args.opacity) ? args.opacity : 1,\n            color: args.color || 'black',\n            blur: Number.isFinite(args.blur) ? args.blur : 4\n        });\n    },\n\n    // `amount` ... the proportion of the conversion (1). A value of 1 (default) is completely grayscale. A value of 0 leaves the input unchanged.\n    grayscale: function(args) {\n\n        var amount = Number.isFinite(args.amount) ? args.amount : 1;\n\n        return template('<filter><feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0\"/></filter>')({\n            a: 0.2126 + 0.7874 * (1 - amount),\n            b: 0.7152 - 0.7152 * (1 - amount),\n            c: 0.0722 - 0.0722 * (1 - amount),\n            d: 0.2126 - 0.2126 * (1 - amount),\n            e: 0.7152 + 0.2848 * (1 - amount),\n            f: 0.0722 - 0.0722 * (1 - amount),\n            g: 0.2126 - 0.2126 * (1 - amount),\n            h: 0.0722 + 0.9278 * (1 - amount)\n        });\n    },\n\n    // `amount` ... the proportion of the conversion (1). A value of 1 (default) is completely sepia. A value of 0 leaves the input unchanged.\n    sepia: function(args) {\n\n        var amount = Number.isFinite(args.amount) ? args.amount : 1;\n\n        return template('<filter><feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0\"/></filter>')({\n            a: 0.393 + 0.607 * (1 - amount),\n            b: 0.769 - 0.769 * (1 - amount),\n            c: 0.189 - 0.189 * (1 - amount),\n            d: 0.349 - 0.349 * (1 - amount),\n            e: 0.686 + 0.314 * (1 - amount),\n            f: 0.168 - 0.168 * (1 - amount),\n            g: 0.272 - 0.272 * (1 - amount),\n            h: 0.534 - 0.534 * (1 - amount),\n            i: 0.131 + 0.869 * (1 - amount)\n        });\n    },\n\n    // `amount` ... the proportion of the conversion (1). A value of 0 is completely un-saturated. A value of 1 (default) leaves the input unchanged.\n    saturate: function(args) {\n\n        var amount = Number.isFinite(args.amount) ? args.amount : 1;\n\n        return template('<filter><feColorMatrix type=\"saturate\" values=\"${amount}\"/></filter>')({\n            amount: 1 - amount\n        });\n    },\n\n    // `angle` ...  the number of degrees around the color circle the input samples will be adjusted (0).\n    hueRotate: function(args) {\n\n        return template('<filter><feColorMatrix type=\"hueRotate\" values=\"${angle}\"/></filter>')({\n            angle: args.angle || 0\n        });\n    },\n\n    // `amount` ... the proportion of the conversion (1). A value of 1 (default) is completely inverted. A value of 0 leaves the input unchanged.\n    invert: function(args) {\n\n        var amount = Number.isFinite(args.amount) ? args.amount : 1;\n\n        return template('<filter><feComponentTransfer><feFuncR type=\"table\" tableValues=\"${amount} ${amount2}\"/><feFuncG type=\"table\" tableValues=\"${amount} ${amount2}\"/><feFuncB type=\"table\" tableValues=\"${amount} ${amount2}\"/></feComponentTransfer></filter>')({\n            amount: amount,\n            amount2: 1 - amount\n        });\n    },\n\n    // `amount` ... proportion of the conversion (1). A value of 0 will create an image that is completely black. A value of 1 (default) leaves the input unchanged.\n    brightness: function(args) {\n\n        return template('<filter><feComponentTransfer><feFuncR type=\"linear\" slope=\"${amount}\"/><feFuncG type=\"linear\" slope=\"${amount}\"/><feFuncB type=\"linear\" slope=\"${amount}\"/></feComponentTransfer></filter>')({\n            amount: Number.isFinite(args.amount) ? args.amount : 1\n        });\n    },\n\n    // `amount` ... proportion of the conversion (1). A value of 0 will create an image that is completely black. A value of 1 (default) leaves the input unchanged.\n    contrast: function(args) {\n\n        var amount = Number.isFinite(args.amount) ? args.amount : 1;\n\n        return template('<filter><feComponentTransfer><feFuncR type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/><feFuncG type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/><feFuncB type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/></feComponentTransfer></filter>')({\n            amount: amount,\n            amount2: .5 - amount / 2\n        });\n    }\n};\n\nexport const format = {\n\n    // Formatting numbers via the Python Format Specification Mini-language.\n    // See http://docs.python.org/release/3.1.3/library/string.html#format-specification-mini-language.\n    // Heavilly inspired by the D3.js library implementation.\n    number: function(specifier, value, locale) {\n\n        locale = locale || {\n\n            currency: ['$', ''],\n            decimal: '.',\n            thousands: ',',\n            grouping: [3]\n        };\n\n        // See Python format specification mini-language: http://docs.python.org/release/3.1.3/library/string.html#format-specification-mini-language.\n        // [[fill]align][sign][symbol][0][width][,][.precision][type]\n        var re = /(?:([^{])?([<>=^]))?([+\\- ])?([$#])?(0)?(\\d+)?(,)?(\\.-?\\d+)?([a-z%])?/i;\n\n        var match = re.exec(specifier);\n        var fill = match[1] || ' ';\n        var align = match[2] || '>';\n        var sign = match[3] || '';\n        var symbol = match[4] || '';\n        var zfill = match[5];\n        var width = +match[6];\n        var comma = match[7];\n        var precision = match[8];\n        var type = match[9];\n        var scale = 1;\n        var prefix = '';\n        var suffix = '';\n        var integer = false;\n\n        if (precision) precision = +precision.substring(1);\n\n        if (zfill || fill === '0' && align === '=') {\n            zfill = fill = '0';\n            align = '=';\n            if (comma) width -= Math.floor((width - 1) / 4);\n        }\n\n        switch (type) {\n            case 'n':\n                comma = true;\n                type = 'g';\n                break;\n            case '%':\n                scale = 100;\n                suffix = '%';\n                type = 'f';\n                break;\n            case 'p':\n                scale = 100;\n                suffix = '%';\n                type = 'r';\n                break;\n            case 'b':\n            case 'o':\n            case 'x':\n            case 'X':\n                if (symbol === '#') prefix = '0' + type.toLowerCase();\n                break;\n            case 'c':\n            case 'd':\n                integer = true;\n                precision = 0;\n                break;\n            case 's':\n                scale = -1;\n                type = 'r';\n                break;\n        }\n\n        if (symbol === '$') {\n            prefix = locale.currency[0];\n            suffix = locale.currency[1];\n        }\n\n        // If no precision is specified for `'r'`, fallback to general notation.\n        if (type == 'r' && !precision) type = 'g';\n\n        // Ensure that the requested precision is in the supported range.\n        if (precision != null) {\n            if (type == 'g') precision = Math.max(1, Math.min(21, precision));\n            else if (type == 'e' || type == 'f') precision = Math.max(0, Math.min(20, precision));\n        }\n\n        var zcomma = zfill && comma;\n\n        // Return the empty string for floats formatted as ints.\n        if (integer && (value % 1)) return '';\n\n        // Convert negative to positive, and record the sign prefix.\n        var negative = value < 0 || value === 0 && 1 / value < 0 ? (value = -value, '-') : sign;\n\n        var fullSuffix = suffix;\n\n        // Apply the scale, computing it from the value's exponent for si format.\n        // Preserve the existing suffix, if any, such as the currency symbol.\n        if (scale < 0) {\n            var unit = this.prefix(value, precision);\n            value = unit.scale(value);\n            fullSuffix = unit.symbol + suffix;\n        } else {\n            value *= scale;\n        }\n\n        // Convert to the desired precision.\n        value = this.convert(type, value, precision);\n\n        // Break the value into the integer part (before) and decimal part (after).\n        var i = value.lastIndexOf('.');\n        var before = i < 0 ? value : value.substring(0, i);\n        var after = i < 0 ? '' : locale.decimal + value.substring(i + 1);\n\n        function formatGroup(value) {\n\n            var i = value.length;\n            var t = [];\n            var j = 0;\n            var g = locale.grouping[0];\n            while (i > 0 && g > 0) {\n                t.push(value.substring(i -= g, i + g));\n                g = locale.grouping[j = (j + 1) % locale.grouping.length];\n            }\n            return t.reverse().join(locale.thousands);\n        }\n\n        // If the fill character is not `'0'`, grouping is applied before padding.\n        if (!zfill && comma && locale.grouping) {\n\n            before = formatGroup(before);\n        }\n\n        var length = prefix.length + before.length + after.length + (zcomma ? 0 : negative.length);\n        var padding = length < width ? new Array(length = width - length + 1).join(fill) : '';\n\n        // If the fill character is `'0'`, grouping is applied after padding.\n        if (zcomma) before = formatGroup(padding + before);\n\n        // Apply prefix.\n        negative += prefix;\n\n        // Rejoin integer and decimal parts.\n        value = before + after;\n\n        return (align === '<' ? negative + value + padding\n            : align === '>' ? padding + negative + value\n                : align === '^' ? padding.substring(0, length >>= 1) + negative + value + padding.substring(length)\n                    : negative + (zcomma ? value : padding + value)) + fullSuffix;\n    },\n\n    // Formatting string via the Python Format string.\n    // See https://docs.python.org/2/library/string.html#format-string-syntax)\n    string: function(formatString, value) {\n\n        var fieldDelimiterIndex;\n        var fieldDelimiter = '{';\n        var endPlaceholder = false;\n        var formattedStringArray = [];\n\n        while ((fieldDelimiterIndex = formatString.indexOf(fieldDelimiter)) !== -1) {\n\n            var pieceFormattedString, formatSpec, fieldName;\n\n            pieceFormattedString = formatString.slice(0, fieldDelimiterIndex);\n\n            if (endPlaceholder) {\n                formatSpec = pieceFormattedString.split(':');\n                fieldName = formatSpec.shift().split('.');\n                pieceFormattedString = value;\n\n                for (var i = 0; i < fieldName.length; i++)\n                    pieceFormattedString = pieceFormattedString[fieldName[i]];\n\n                if (formatSpec.length)\n                    pieceFormattedString = this.number(formatSpec, pieceFormattedString);\n            }\n\n            formattedStringArray.push(pieceFormattedString);\n\n            formatString = formatString.slice(fieldDelimiterIndex + 1);\n            endPlaceholder = !endPlaceholder;\n            fieldDelimiter = (endPlaceholder) ? '}' : '{';\n        }\n        formattedStringArray.push(formatString);\n\n        return formattedStringArray.join('');\n    },\n\n    convert: function(type, value, precision) {\n\n        switch (type) {\n            case 'b':\n                return value.toString(2);\n            case 'c':\n                return String.fromCharCode(value);\n            case 'o':\n                return value.toString(8);\n            case 'x':\n                return value.toString(16);\n            case 'X':\n                return value.toString(16).toUpperCase();\n            case 'g':\n                return value.toPrecision(precision);\n            case 'e':\n                return value.toExponential(precision);\n            case 'f':\n                return value.toFixed(precision);\n            case 'r':\n                return (value = this.round(value, this.precision(value, precision))).toFixed(Math.max(0, Math.min(20, this.precision(value * (1 + 1e-15), precision))));\n            default:\n                return value + '';\n        }\n    },\n\n    round: function(value, precision) {\n\n        return precision\n            ? Math.round(value * (precision = Math.pow(10, precision))) / precision\n            : Math.round(value);\n    },\n\n    precision: function(value, precision) {\n\n        return precision - (value ? Math.ceil(Math.log(value) / Math.LN10) : 1);\n    },\n\n    prefix: function(value, precision) {\n\n        var prefixes = ['y', 'z', 'a', 'f', 'p', 'n', '', 'm', '', 'k', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'].map(function(d, i) {\n            var k = Math.pow(10, Math.abs(8 - i) * 3);\n            return {\n                scale: i > 8 ? function(d) {\n                    return d / k;\n                } : function(d) {\n                    return d * k;\n                },\n                symbol: d\n            };\n        });\n\n        var i = 0;\n        if (value) {\n            if (value < 0) value *= -1;\n            if (precision) value = this.round(value, this.precision(value, precision));\n            i = 1 + Math.floor(1e-12 + Math.log(value) / Math.LN10);\n            i = Math.max(-24, Math.min(24, Math.floor((i <= 0 ? i + 1 : i - 1) / 3) * 3));\n        }\n        return prefixes[8 + i / 3];\n    }\n};\n\n/*\n    Pre-compile the HTML to be used as a template.\n*/\nexport const template = function(html) {\n\n    /*\n        Must support the variation in templating syntax found here:\n        https://lodash.com/docs#template\n    */\n    var regex = /<%= ([^ ]+) %>|\\$\\{ ?([^{} ]+) ?\\}|\\{\\{([^{} ]+)\\}\\}/g;\n\n    return function(data) {\n\n        data = data || {};\n\n        return html.replace(regex, function(match) {\n\n            var args = Array.from(arguments);\n            var attr = args.slice(1, 4).find(function(_attr) {\n                return !!_attr;\n            });\n\n            var attrArray = attr.split('.');\n            var value = data[attrArray.shift()];\n\n            while (value !== undefined && attrArray.length) {\n                value = value[attrArray.shift()];\n            }\n\n            return value !== undefined ? value : '';\n        });\n    };\n};\n\n/**\n * @param {Element} el Element, which content is intent to display in full-screen mode, 'window.top.document.body' is default.\n */\nexport const toggleFullScreen = function(el) {\n\n    var topDocument = window.top.document;\n    el = el || topDocument.body;\n\n    function prefixedResult(el, prop) {\n\n        var prefixes = ['webkit', 'moz', 'ms', 'o', ''];\n        for (var i = 0; i < prefixes.length; i++) {\n            var prefix = prefixes[i];\n            var propName = prefix ? (prefix + prop) : (prop.substr(0, 1).toLowerCase() + prop.substr(1));\n            if (el[propName] !== undefined) {\n                return isFunction(el[propName]) ? el[propName]() : el[propName];\n            }\n        }\n    }\n\n    if (prefixedResult(topDocument, 'FullscreenElement') || prefixedResult(topDocument, 'FullScreenElement')) {\n        prefixedResult(topDocument, 'ExitFullscreen') || // Spec.\n        prefixedResult(topDocument, 'CancelFullScreen'); // Firefox\n    } else {\n        prefixedResult(el, 'RequestFullscreen') || // Spec.\n        prefixedResult(el, 'RequestFullScreen'); // Firefox\n    }\n};\n\nexport { \n    isBoolean,\n    isObject,\n    isNumber,\n    isString,\n    mixin,\n    deepMixin,\n    supplement,\n    defaults,\n    deepSupplement,\n    defaultsDeep,\n    assign,\n    invoke,\n    invokeProperty,\n    sortedIndex,\n    uniq,\n    clone,\n    cloneDeep,\n    isEmpty,\n    isEqual,\n    isFunction,\n    isPlainObject,\n    toArray,\n    debounce,\n    groupBy,\n    sortBy,\n    flattenDeep, \n    without,\n    difference,\n    intersection,\n    union,\n    has,\n    result,\n    omit,\n    pick,\n    bindAll,\n    forIn,\n    camelCase,\n    uniqueId,\n    merge\n};\n\nexport const noop = function() {\n};\n","import { uniq, toArray, isEmpty } from './util.mjs';\n\n// Clone `cells` returning an object that maps the original cell ID to the clone. The number\n// of clones is exactly the same as the `cells.length`.\n// This function simply clones all the `cells`. However, it also reconstructs\n// all the `source/target` and `parent/embed` references within the `cells`.\n// This is the main difference from the `cell.clone()` method. The\n// `cell.clone()` method works on one single cell only.\n// For example, for a graph: `A --- L ---> B`, `cloneCells([A, L, B])`\n// returns `[A2, L2, B2]` resulting to a graph: `A2 --- L2 ---> B2`, i.e.\n// the source and target of the link `L2` is changed to point to `A2` and `B2`.\nexport function cloneCells(cells) {\n\n    cells = uniq(cells);\n\n    // A map of the form [original cell ID] -> [clone] helping\n    // us to reconstruct references for source/target and parent/embeds.\n    // This is also the returned value.\n    const cloneMap = toArray(cells).reduce(function(map, cell) {\n        map[cell.id] = cell.clone();\n        return map;\n    }, {});\n\n    toArray(cells).forEach(function(cell) {\n\n        const clone = cloneMap[cell.id];\n        // assert(clone exists)\n\n        if (clone.isLink()) {\n            const source = clone.source();\n            const target = clone.target();\n            if (source.id && cloneMap[source.id]) {\n                // Source points to an element and the element is among the clones.\n                // => Update the source of the cloned link.\n                clone.prop('source/id', cloneMap[source.id].id);\n            }\n            if (target.id && cloneMap[target.id]) {\n                // Target points to an element and the element is among the clones.\n                // => Update the target of the cloned link.\n                clone.prop('target/id', cloneMap[target.id].id);\n            }\n        }\n\n        // Find the parent of the original cell\n        const parent = cell.get('parent');\n        if (parent && cloneMap[parent]) {\n            clone.set('parent', cloneMap[parent].id);\n        }\n\n        // Find the embeds of the original cell\n        const embeds = toArray(cell.get('embeds')).reduce(function(newEmbeds, embed) {\n            // Embedded cells that are not being cloned can not be carried\n            // over with other embedded cells.\n            if (cloneMap[embed]) {\n                newEmbeds.push(cloneMap[embed].id);\n            }\n            return newEmbeds;\n        }, []);\n\n        if (!isEmpty(embeds)) {\n            clone.set('embeds', embeds);\n        }\n    });\n\n    return cloneMap;\n}\n\n","import { isPlainObject } from '../../util/util.mjs';\n\nconst validPropertiesList = ['checked', 'selected', 'disabled', 'readOnly', 'contentEditable', 'value', 'indeterminate'];\n\nconst validProperties = validPropertiesList.reduce((acc, key) => {\n    acc[key] = true;\n    return acc;\n}, {});\n\nconst props = {\n    qualify: function(properties) {\n        return isPlainObject(properties);\n    },\n    set: function(properties, _, node) {\n        Object.keys(properties).forEach(function(key) {\n            if (validProperties[key] && key in node) {\n                const value = properties[key];\n                if (node.tagName === 'SELECT' && Array.isArray(value)) {\n                    Array.from(node.options).forEach(function(option, index) {\n                        option.selected = value.includes(option.value);\n                    });\n                } else {\n                    node[key] = value;\n                }\n            }\n        });\n    }\n};\n\nexport default props;\n","import { Point, Path, Polyline } from '../../g/index.mjs';\nimport { assign, isPlainObject, pick, isObject, isPercentage, breakText } from '../../util/util.mjs';\nimport { isCalcAttribute, evalCalcAttribute } from './calc.mjs';\nimport props from './props.mjs';\nimport $ from 'jquery';\nimport V from '../../V/index.mjs';\n\nfunction setWrapper(attrName, dimension) {\n    return function(value, refBBox) {\n        var isValuePercentage = isPercentage(value);\n        value = parseFloat(value);\n        if (isValuePercentage) {\n            value /= 100;\n        }\n\n        var attrs = {};\n        if (isFinite(value)) {\n            var attrValue = (isValuePercentage || value >= 0 && value <= 1)\n                ? value * refBBox[dimension]\n                : Math.max(value + refBBox[dimension], 0);\n            attrs[attrName] = attrValue;\n        }\n\n        return attrs;\n    };\n}\n\nfunction positionWrapper(axis, dimension, origin) {\n    return function(value, refBBox) {\n        var valuePercentage = isPercentage(value);\n        value = parseFloat(value);\n        if (valuePercentage) {\n            value /= 100;\n        }\n\n        var delta;\n        if (isFinite(value)) {\n            var refOrigin = refBBox[origin]();\n            if (valuePercentage || value > 0 && value < 1) {\n                delta = refOrigin[axis] + refBBox[dimension] * value;\n            } else {\n                delta = refOrigin[axis] + value;\n            }\n        }\n\n        var point = Point();\n        point[axis] = delta || 0;\n        return point;\n    };\n}\n\nfunction offsetWrapper(axis, dimension, corner) {\n    return function(value, nodeBBox) {\n        var delta;\n        if (value === 'middle') {\n            delta = nodeBBox[dimension] / 2;\n        } else if (value === corner) {\n            delta = nodeBBox[dimension];\n        } else if (isFinite(value)) {\n            // TODO: or not to do a breaking change?\n            delta = (value > -1 && value < 1) ? (-nodeBBox[dimension] * value) : -value;\n        } else if (isPercentage(value)) {\n            delta = nodeBBox[dimension] * parseFloat(value) / 100;\n        } else {\n            delta = 0;\n        }\n\n        var point = Point();\n        point[axis] = -(nodeBBox[axis] + delta);\n        return point;\n    };\n}\n\nfunction shapeWrapper(shapeConstructor, opt) {\n    var cacheName = 'joint-shape';\n    var resetOffset = opt && opt.resetOffset;\n    return function(value, refBBox, node) {\n        var $node = $(node);\n        var cache = $node.data(cacheName);\n        if (!cache || cache.value !== value) {\n            // only recalculate if value has changed\n            var cachedShape = shapeConstructor(value);\n            cache = {\n                value: value,\n                shape: cachedShape,\n                shapeBBox: cachedShape.bbox()\n            };\n            $node.data(cacheName, cache);\n        }\n\n        var shape = cache.shape.clone();\n        var shapeBBox = cache.shapeBBox.clone();\n        var shapeOrigin = shapeBBox.origin();\n        var refOrigin = refBBox.origin();\n\n        shapeBBox.x = refOrigin.x;\n        shapeBBox.y = refOrigin.y;\n\n        var fitScale = refBBox.maxRectScaleToFit(shapeBBox, refOrigin);\n        // `maxRectScaleToFit` can give Infinity if width or height is 0\n        var sx = (shapeBBox.width === 0 || refBBox.width === 0) ? 1 : fitScale.sx;\n        var sy = (shapeBBox.height === 0 || refBBox.height === 0) ? 1 : fitScale.sy;\n\n        shape.scale(sx, sy, shapeOrigin);\n        if (resetOffset) {\n            shape.translate(-shapeOrigin.x, -shapeOrigin.y);\n        }\n\n        return shape;\n    };\n}\n\n// `d` attribute for SVGPaths\nfunction dWrapper(opt) {\n    function pathConstructor(value) {\n        return new Path(V.normalizePathData(value));\n    }\n\n    var shape = shapeWrapper(pathConstructor, opt);\n    return function(value, refBBox, node) {\n        var path = shape(value, refBBox, node);\n        return {\n            d: path.serialize()\n        };\n    };\n}\n\n// `points` attribute for SVGPolylines and SVGPolygons\nfunction pointsWrapper(opt) {\n    var shape = shapeWrapper(Polyline, opt);\n    return function(value, refBBox, node) {\n        var polyline = shape(value, refBBox, node);\n        return {\n            points: polyline.serialize()\n        };\n    };\n}\n\nfunction atConnectionWrapper(method, opt) {\n    var zeroVector = new Point(1, 0);\n    return function(value) {\n        var p, angle;\n        var tangent = this[method](value);\n        if (tangent) {\n            angle = (opt.rotate) ? tangent.vector().vectorAngle(zeroVector) : 0;\n            p = tangent.start;\n        } else {\n            p = this.path.start;\n            angle = 0;\n        }\n        if (angle === 0) return { transform: 'translate(' + p.x + ',' + p.y + ')' };\n        return { transform: 'translate(' + p.x + ',' + p.y + ') rotate(' + angle + ')' };\n    };\n}\n\nfunction setIfChangedWrapper(attribute) {\n    return function setIfChanged(value, _, node) {\n        const vel = V(node);\n        if (vel.attr(attribute) === value) return;\n        vel.attr(attribute, value);\n    };\n}\n\nfunction isTextInUse(_value, _node, attrs) {\n    return (attrs.text !== undefined);\n}\n\nfunction isLinkView() {\n    return this.model.isLink();\n}\n\nfunction contextMarker(context) {\n    var marker = {};\n    // Stroke\n    // The context 'fill' is disregared here. The usual case is to use the marker with a connection\n    // (for which 'fill' attribute is set to 'none').\n    var stroke = context.stroke;\n    if (typeof stroke === 'string') {\n        marker['stroke'] = stroke;\n        marker['fill'] = stroke;\n    }\n    // Opacity\n    // Again the context 'fill-opacity' is ignored.\n    var strokeOpacity = context.strokeOpacity;\n    if (strokeOpacity === undefined) strokeOpacity = context['stroke-opacity'];\n    if (strokeOpacity === undefined) strokeOpacity = context.opacity;\n    if (strokeOpacity !== undefined) {\n        marker['stroke-opacity'] = strokeOpacity;\n        marker['fill-opacity'] = strokeOpacity;\n    }\n    return marker;\n}\n\nfunction setPaintURL(def) {\n    const { paper } = this;\n    const url = (def.type === 'pattern')\n        ? paper.definePattern(def)\n        : paper.defineGradient(def);\n    return `url(#${url})`;\n}\n\nconst attributesNS = {\n\n    xlinkShow: {\n        set: 'xlink:show'\n    },\n\n    xlinkRole: {\n        set: 'xlink:role'\n    },\n\n    xlinkType: {\n        set: 'xlink:type'\n    },\n\n    xlinkArcrole: {\n        set: 'xlink:arcrole'\n    },\n\n    xlinkTitle: {\n        set: 'xlink:title'\n    },\n\n    xlinkActuate: {\n        set: 'xlink:actuate'\n    },\n\n    xmlSpace: {\n        set: 'xml:space'\n    },\n\n    xmlBase: {\n        set: 'xml:base'\n    },\n\n    xmlLang: {\n        set: 'xml:lang'\n    },\n\n    preserveAspectRatio: {\n        set: 'preserveAspectRatio'\n    },\n\n    requiredExtension: {\n        set: 'requiredExtension'\n    },\n\n    requiredFeatures: {\n        set: 'requiredFeatures'\n    },\n\n    systemLanguage: {\n        set: 'systemLanguage'\n    },\n\n    externalResourcesRequired: {\n        set: 'externalResourceRequired'\n    },\n\n    href: {\n        set: setIfChangedWrapper('href')\n    },\n\n    xlinkHref: {\n        set: setIfChangedWrapper('xlink:href')\n    },\n\n    filter: {\n        qualify: isPlainObject,\n        set: function(filter) {\n            return 'url(#' + this.paper.defineFilter(filter) + ')';\n        }\n    },\n\n    fill: {\n        qualify: isPlainObject,\n        set: setPaintURL\n    },\n\n    stroke: {\n        qualify: isPlainObject,\n        set: setPaintURL\n    },\n\n    sourceMarker: {\n        qualify: isPlainObject,\n        set: function(marker, refBBox, node, attrs) {\n            marker = assign(contextMarker(attrs), marker);\n            return { 'marker-start': 'url(#' + this.paper.defineMarker(marker) + ')' };\n        }\n    },\n\n    targetMarker: {\n        qualify: isPlainObject,\n        set: function(marker, refBBox, node, attrs) {\n            marker = assign(contextMarker(attrs), { 'transform': 'rotate(180)' }, marker);\n            return { 'marker-end': 'url(#' + this.paper.defineMarker(marker) + ')' };\n        }\n    },\n\n    vertexMarker: {\n        qualify: isPlainObject,\n        set: function(marker, refBBox, node, attrs) {\n            marker = assign(contextMarker(attrs), marker);\n            return { 'marker-mid': 'url(#' + this.paper.defineMarker(marker) + ')' };\n        }\n    },\n\n    text: {\n        qualify: function(_text, _node, attrs) {\n            return !attrs.textWrap || !isPlainObject(attrs.textWrap);\n        },\n        set: function(text, refBBox, node, attrs) {\n            var $node = $(node);\n            var cacheName = 'joint-text';\n            var cache = $node.data(cacheName);\n            var textAttrs = pick(attrs, 'lineHeight', 'annotations', 'textPath', 'x', 'textVerticalAnchor', 'eol', 'displayEmpty');\n            // eval `x` if using calc()\n            const { x } = textAttrs;\n            if (isCalcAttribute(x)) {\n                textAttrs.x = evalCalcAttribute(x, refBBox);\n            }\n\n            let fontSizeAttr = attrs['font-size'] || attrs['fontSize'];\n            if (isCalcAttribute(fontSizeAttr)) {\n                fontSizeAttr = evalCalcAttribute(fontSizeAttr, refBBox);\n            }\n            var fontSize = textAttrs.fontSize = fontSizeAttr;\n            var textHash = JSON.stringify([text, textAttrs]);\n            // Update the text only if there was a change in the string\n            // or any of its attributes.\n            if (cache === undefined || cache !== textHash) {\n                // Chrome bug:\n                // Tspans positions defined as `em` are not updated\n                // when container `font-size` change.\n                if (fontSize) node.setAttribute('font-size', fontSize);\n                // Text Along Path Selector\n                var textPath = textAttrs.textPath;\n                if (isObject(textPath)) {\n                    var pathSelector = textPath.selector;\n                    if (typeof pathSelector === 'string') {\n                        var pathNode = this.findBySelector(pathSelector)[0];\n                        if (pathNode instanceof SVGPathElement) {\n                            textAttrs.textPath = assign({ 'xlink:href': '#' + pathNode.id }, textPath);\n                        }\n                    }\n                }\n                V(node).text('' + text, textAttrs);\n                $node.data(cacheName, textHash);\n            }\n        }\n    },\n\n    textWrap: {\n        qualify: isPlainObject,\n        set: function(value, refBBox, node, attrs) {\n            var size = {};\n            // option `width`\n            var width = value.width || 0;\n            if (isPercentage(width)) {\n                size.width = refBBox.width * parseFloat(width) / 100;\n            } else if (isCalcAttribute(width)) {\n                size.width = Number(evalCalcAttribute(width, refBBox));\n            } else {\n                if (value.width === null) {\n                    // breakText() requires width to be specified.\n                    size.width = Infinity;\n                } else if (width <= 0) {\n                    size.width = refBBox.width + width;\n                } else {\n                    size.width = width;\n                }\n            }\n            // option `height`\n            var height = value.height || 0;\n            if (isPercentage(height)) {\n                size.height = refBBox.height * parseFloat(height) / 100;\n            } else if (isCalcAttribute(height)) {\n                size.height = Number(evalCalcAttribute(height, refBBox));\n            } else {\n                if (value.height === null) {\n                    // if height is not specified breakText() does not\n                    // restrict the height of the text.\n                } else if (height <= 0) {\n                    size.height = refBBox.height + height;\n                } else {\n                    size.height = height;\n                }\n            }\n            // option `text`\n            var wrappedText;\n            var text = value.text;\n            if (text === undefined) text = attrs.text;\n            if (text !== undefined) {\n                const breakTextFn = value.breakText || breakText;\n                const fontSizeAttr = attrs['font-size'] || attrs.fontSize;\n                wrappedText = breakTextFn('' + text, size, {\n                    'font-weight': attrs['font-weight'] || attrs.fontWeight,\n                    'font-size': isCalcAttribute(fontSizeAttr) ? evalCalcAttribute(fontSizeAttr, refBBox) : fontSizeAttr,\n                    'font-family': attrs['font-family'] || attrs.fontFamily,\n                    'lineHeight': attrs.lineHeight,\n                    'letter-spacing': 'letter-spacing' in attrs ? attrs['letter-spacing'] : attrs.letterSpacing\n                }, {\n                    // Provide an existing SVG Document here\n                    // instead of creating a temporary one over again.\n                    svgDocument: this.paper.svg,\n                    ellipsis: value.ellipsis,\n                    hyphen: value.hyphen,\n                    maxLineCount: value.maxLineCount,\n                    preserveSpaces: value.preserveSpaces\n                });\n            } else {\n                wrappedText = '';\n            }\n            attributesNS.text.set.call(this, wrappedText, refBBox, node, attrs);\n        }\n    },\n\n    title: {\n        qualify: function(title, node) {\n            // HTMLElement title is specified via an attribute (i.e. not an element)\n            return node instanceof SVGElement;\n        },\n        set: function(title, refBBox, node) {\n            var $node = $(node);\n            var cacheName = 'joint-title';\n            var cache = $node.data(cacheName);\n            if (cache === undefined || cache !== title) {\n                $node.data(cacheName, title);\n                if (node.tagName === 'title') {\n                    // The target node is a <title> element.\n                    node.textContent = title;\n                    return;\n                }\n                // Generally <title> element should be the first child element of its parent.\n                var firstChild = node.firstElementChild;\n                if (firstChild && firstChild.tagName === 'title') {\n                    // Update an existing title\n                    firstChild.textContent = title;\n                } else {\n                    // Create a new title\n                    var titleNode = document.createElementNS(node.namespaceURI, 'title');\n                    titleNode.textContent = title;\n                    node.insertBefore(titleNode, firstChild);\n                }\n            }\n        }\n    },\n\n    lineHeight: {\n        qualify: isTextInUse\n    },\n\n    textVerticalAnchor: {\n        qualify: isTextInUse\n    },\n\n    textPath: {\n        qualify: isTextInUse\n    },\n\n    annotations: {\n        qualify: isTextInUse\n    },\n\n    eol: {\n        qualify: isTextInUse\n    },\n\n    displayEmpty: {\n        qualify: isTextInUse\n    },\n\n    // `port` attribute contains the `id` of the port that the underlying magnet represents.\n    port: {\n        set: function(port) {\n            return (port === null || port.id === undefined) ? port : port.id;\n        }\n    },\n\n    // `style` attribute is special in the sense that it sets the CSS style of the subelement.\n    style: {\n        qualify: isPlainObject,\n        set: function(styles, refBBox, node) {\n            $(node).css(styles);\n        }\n    },\n\n    html: {\n        set: function(html, refBBox, node) {\n            $(node).html(html + '');\n        }\n    },\n\n    // Properties setter (set various properties on the node)\n    props,\n\n    ref: {\n        // We do not set `ref` attribute directly on an element.\n        // The attribute itself does not qualify for relative positioning.\n    },\n\n    // if `refX` is in [0, 1] then `refX` is a fraction of bounding box width\n    // if `refX` is < 0 then `refX`'s absolute values is the right coordinate of the bounding box\n    // otherwise, `refX` is the left coordinate of the bounding box\n\n    refX: {\n        position: positionWrapper('x', 'width', 'origin')\n    },\n\n    refY: {\n        position: positionWrapper('y', 'height', 'origin')\n    },\n\n    // `ref-dx` and `ref-dy` define the offset of the subelement relative to the right and/or bottom\n    // coordinate of the reference element.\n\n    refDx: {\n        position: positionWrapper('x', 'width', 'corner')\n    },\n\n    refDy: {\n        position: positionWrapper('y', 'height', 'corner')\n    },\n\n    // 'ref-width'/'ref-height' defines the width/height of the subelement relatively to\n    // the reference element size\n    // val in 0..1         ref-width = 0.75 sets the width to 75% of the ref. el. width\n    // val < 0 || val > 1  ref-height = -20 sets the height to the ref. el. height shorter by 20\n\n    refWidth: {\n        set: setWrapper('width', 'width')\n    },\n\n    refHeight: {\n        set: setWrapper('height', 'height')\n    },\n\n    refRx: {\n        set: setWrapper('rx', 'width')\n    },\n\n    refRy: {\n        set: setWrapper('ry', 'height')\n    },\n\n    refRInscribed: {\n        set: (function(attrName) {\n            var widthFn = setWrapper(attrName, 'width');\n            var heightFn = setWrapper(attrName, 'height');\n            return function(value, refBBox) {\n                var fn = (refBBox.height > refBBox.width) ? widthFn : heightFn;\n                return fn(value, refBBox);\n            };\n        })('r')\n    },\n\n    refRCircumscribed: {\n        set: function(value, refBBox) {\n            var isValuePercentage = isPercentage(value);\n            value = parseFloat(value);\n            if (isValuePercentage) {\n                value /= 100;\n            }\n\n            var diagonalLength = Math.sqrt((refBBox.height * refBBox.height) + (refBBox.width * refBBox.width));\n\n            var rValue;\n            if (isFinite(value)) {\n                if (isValuePercentage || value >= 0 && value <= 1) rValue = value * diagonalLength;\n                else rValue = Math.max(value + diagonalLength, 0);\n            }\n\n            return { r: rValue };\n        }\n    },\n\n    refCx: {\n        set: setWrapper('cx', 'width')\n    },\n\n    refCy: {\n        set: setWrapper('cy', 'height')\n    },\n\n    // `x-alignment` when set to `middle` causes centering of the subelement around its new x coordinate.\n    // `x-alignment` when set to `right` uses the x coordinate as referenced to the right of the bbox.\n\n    xAlignment: {\n        offset: offsetWrapper('x', 'width', 'right')\n    },\n\n    // `y-alignment` when set to `middle` causes centering of the subelement around its new y coordinate.\n    // `y-alignment` when set to `bottom` uses the y coordinate as referenced to the bottom of the bbox.\n\n    yAlignment: {\n        offset: offsetWrapper('y', 'height', 'bottom')\n    },\n\n    resetOffset: {\n        offset: function(val, nodeBBox) {\n            return (val)\n                ? { x: -nodeBBox.x, y: -nodeBBox.y }\n                : { x: 0, y: 0 };\n        }\n\n    },\n\n    refDResetOffset: {\n        set: dWrapper({ resetOffset: true })\n    },\n\n    refDKeepOffset: {\n        set: dWrapper({ resetOffset: false })\n    },\n\n    refPointsResetOffset: {\n        set: pointsWrapper({ resetOffset: true })\n    },\n\n    refPointsKeepOffset: {\n        set: pointsWrapper({ resetOffset: false })\n    },\n\n    // LinkView Attributes\n\n    connection: {\n        qualify: isLinkView,\n        set: function({ stubs = 0 }) {\n            let d;\n            if (isFinite(stubs) && stubs !== 0) {\n                let offset;\n                if (stubs < 0) {\n                    offset = (this.getConnectionLength() + stubs) / 2;\n                } else {\n                    offset = stubs;\n                }\n                const path = this.getConnection();\n                const segmentSubdivisions = this.getConnectionSubdivisions();\n                const sourceParts = path.divideAtLength(offset, { segmentSubdivisions });\n                const targetParts = path.divideAtLength(-offset, { segmentSubdivisions });\n                if (sourceParts && targetParts) {\n                    d = `${sourceParts[0].serialize()} ${targetParts[1].serialize()}`;\n                }\n            }\n\n            return { d: d || this.getSerializedConnection() };\n        }\n    },\n\n    atConnectionLengthKeepGradient: {\n        qualify: isLinkView,\n        set: atConnectionWrapper('getTangentAtLength', { rotate: true })\n    },\n\n    atConnectionLengthIgnoreGradient: {\n        qualify: isLinkView,\n        set: atConnectionWrapper('getTangentAtLength', { rotate: false })\n    },\n\n    atConnectionRatioKeepGradient: {\n        qualify: isLinkView,\n        set: atConnectionWrapper('getTangentAtRatio', { rotate: true })\n    },\n\n    atConnectionRatioIgnoreGradient: {\n        qualify: isLinkView,\n        set: atConnectionWrapper('getTangentAtRatio', { rotate: false })\n    }\n};\n\nattributesNS['xlink:href'] = attributesNS.xlinkHref;\n\n// Support `calc()` with the following SVG attributes\n[\n    'transform', // g\n    'd', // path\n    'points', // polyline / polygon\n    'cx', 'cy', // circle / ellipse\n    'x1', 'x2', 'y1', 'y2', // line\n    'x', 'y', // rect / text / image\n    'dx', 'dy' // text\n].forEach(attribute => {\n    attributesNS[attribute] = {\n        qualify: isCalcAttribute,\n        set: function setCalcAttribute(value, refBBox) {\n            return { [attribute]: evalCalcAttribute(value, refBBox) };\n        }\n    };\n});\n\n// Prevent \"A negative value is not valid\" error.\n[\n    'width', 'height', // rect / image\n    'r', // circle\n    'rx', 'ry', // rect / ellipse\n    'font-size', // text\n    'stroke-width' // elements\n].forEach(attribute => {\n    attributesNS[attribute] = {\n        qualify: isCalcAttribute,\n        set: function setCalcAttribute(value, refBBox) {\n            return { [attribute]: Math.max(0, evalCalcAttribute(value, refBBox)) };\n        }\n    };\n});\n\n// Aliases\nattributesNS.refR = attributesNS.refRInscribed;\nattributesNS.refD = attributesNS.refDResetOffset;\nattributesNS.refPoints = attributesNS.refPointsResetOffset;\nattributesNS.atConnectionLength = attributesNS.atConnectionLengthKeepGradient;\nattributesNS.atConnectionRatio = attributesNS.atConnectionRatioKeepGradient;\nattributesNS.fontSize = attributesNS['font-size'];\nattributesNS.strokeWidth = attributesNS['stroke-width'];\n\n// This allows to combine both absolute and relative positioning\n// refX: 50%, refX2: 20\nattributesNS.refX2 = attributesNS.refX;\nattributesNS.refY2 = attributesNS.refY;\nattributesNS.refWidth2 = attributesNS.refWidth;\nattributesNS.refHeight2 = attributesNS.refHeight;\n\n// Aliases for backwards compatibility\nattributesNS['ref-x'] = attributesNS.refX;\nattributesNS['ref-y'] = attributesNS.refY;\nattributesNS['ref-dy'] = attributesNS.refDy;\nattributesNS['ref-dx'] = attributesNS.refDx;\nattributesNS['ref-width'] = attributesNS.refWidth;\nattributesNS['ref-height'] = attributesNS.refHeight;\nattributesNS['x-alignment'] = attributesNS.xAlignment;\nattributesNS['y-alignment'] = attributesNS.yAlignment;\n\nexport const attributes = attributesNS;\n\n","import Backbone from 'backbone';\nimport {\n    uniqueId,\n    union,\n    result,\n    merge,\n    forIn,\n    isObject,\n    isEqual,\n    isString,\n    cloneDeep,\n    omit,\n    uuid,\n    isEmpty,\n    assign,\n    uniq,\n    toArray,\n    setByPath,\n    unsetByPath,\n    getByPath,\n    timing,\n    interpolate,\n    nextFrame,\n    without,\n    cancelFrame,\n    defaultsDeep,\n    has,\n    sortBy,\n    defaults\n} from '../util/util.mjs';\nimport { cloneCells } from '../util/cloneCells.mjs';\nimport { attributes } from './attributes/index.mjs';\nimport * as g from '../g/index.mjs';\n\n\n// Cell base model.\n// --------------------------\n\nexport const Cell = Backbone.Model.extend({\n\n    // This is the same as Backbone.Model with the only difference that is uses util.merge\n    // instead of just _.extend. The reason is that we want to mixin attributes set in upper classes.\n    constructor: function(attributes, options) {\n\n        var defaults;\n        var attrs = attributes || {};\n        if (typeof this.preinitialize === 'function') {\n            // Check to support an older version of Backbone (prior v1.4)\n            this.preinitialize.apply(this, arguments);\n        }\n        this.cid = uniqueId('c');\n        this.attributes = {};\n        if (options && options.collection) this.collection = options.collection;\n        if (options && options.parse) attrs = this.parse(attrs, options) || {};\n        if ((defaults = result(this, 'defaults'))) {\n            //<custom code>\n            // Replaced the call to _.defaults with util.merge.\n            attrs = merge({}, defaults, attrs);\n            //</custom code>\n        }\n        this.set(attrs, options);\n        this.changed = {};\n        this.initialize.apply(this, arguments);\n    },\n\n    translate: function(dx, dy, opt) {\n\n        throw new Error('Must define a translate() method.');\n    },\n\n    toJSON: function() {\n\n        const defaults = result(this.constructor.prototype, 'defaults');\n        const defaultAttrs = defaults.attrs || {};\n        const attrs = this.attributes.attrs;\n        const finalAttrs = {};\n\n        // Loop through all the attributes and\n        // omit the default attributes as they are implicitly reconstructible by the cell 'type'.\n        forIn(attrs, function(attr, selector) {\n\n            const defaultAttr = defaultAttrs[selector];\n\n            forIn(attr, function(value, name) {\n\n                // attr is mainly flat though it might have one more level (consider the `style` attribute).\n                // Check if the `value` is object and if yes, go one level deep.\n                if (isObject(value) && !Array.isArray(value)) {\n\n                    forIn(value, function(value2, name2) {\n\n                        if (!defaultAttr || !defaultAttr[name] || !isEqual(defaultAttr[name][name2], value2)) {\n\n                            finalAttrs[selector] = finalAttrs[selector] || {};\n                            (finalAttrs[selector][name] || (finalAttrs[selector][name] = {}))[name2] = value2;\n                        }\n                    });\n\n                } else if (!defaultAttr || !isEqual(defaultAttr[name], value)) {\n                    // `value` is not an object, default attribute for such a selector does not exist\n                    // or it is different than the attribute value set on the model.\n\n                    finalAttrs[selector] = finalAttrs[selector] || {};\n                    finalAttrs[selector][name] = value;\n                }\n            });\n        });\n\n        const attributes = cloneDeep(omit(this.attributes, 'attrs'));\n        attributes.attrs = finalAttrs;\n\n        return attributes;\n    },\n\n    initialize: function(options) {\n\n        const idAttribute = this.getIdAttribute();\n        if (!options || options[idAttribute] === undefined) {\n            this.set(idAttribute, this.generateId(), { silent: true });\n        }\n\n        this._transitionIds = {};\n        this._scheduledTransitionIds = {};\n\n        // Collect ports defined in `attrs` and keep collecting whenever `attrs` object changes.\n        this.processPorts();\n        this.on('change:attrs', this.processPorts, this);\n    },\n\n    getIdAttribute: function() {\n        return this.idAttribute || 'id';\n    },\n\n    generateId: function() {\n        return uuid();\n    },\n\n    /**\n     * @deprecated\n     */\n    processPorts: function() {\n\n        // Whenever `attrs` changes, we extract ports from the `attrs` object and store it\n        // in a more accessible way. Also, if any port got removed and there were links that had `target`/`source`\n        // set to that port, we remove those links as well (to follow the same behaviour as\n        // with a removed element).\n\n        var previousPorts = this.ports;\n\n        // Collect ports from the `attrs` object.\n        var ports = {};\n        forIn(this.get('attrs'), function(attrs, selector) {\n\n            if (attrs && attrs.port) {\n\n                // `port` can either be directly an `id` or an object containing an `id` (and potentially other data).\n                if (attrs.port.id !== undefined) {\n                    ports[attrs.port.id] = attrs.port;\n                } else {\n                    ports[attrs.port] = { id: attrs.port };\n                }\n            }\n        });\n\n        // Collect ports that have been removed (compared to the previous ports) - if any.\n        // Use hash table for quick lookup.\n        var removedPorts = {};\n        forIn(previousPorts, function(port, id) {\n\n            if (!ports[id]) removedPorts[id] = true;\n        });\n\n        // Remove all the incoming/outgoing links that have source/target port set to any of the removed ports.\n        if (this.graph && !isEmpty(removedPorts)) {\n\n            var inboundLinks = this.graph.getConnectedLinks(this, { inbound: true });\n            inboundLinks.forEach(function(link) {\n\n                if (removedPorts[link.get('target').port]) link.remove();\n            });\n\n            var outboundLinks = this.graph.getConnectedLinks(this, { outbound: true });\n            outboundLinks.forEach(function(link) {\n\n                if (removedPorts[link.get('source').port]) link.remove();\n            });\n        }\n\n        // Update the `ports` object.\n        this.ports = ports;\n    },\n\n    remove: function(opt = {}) {\n\n        // Store the graph in a variable because `this.graph` won't be accessible\n        // after `this.trigger('remove', ...)` down below.\n        const { graph, collection } = this;\n        if (!graph) {\n            // The collection is a common Backbone collection (not the graph collection).\n            if (collection) collection.remove(this, opt);\n            return this;\n        }\n\n        graph.startBatch('remove');\n\n        // First, unembed this cell from its parent cell if there is one.\n        const parentCell = this.getParentCell();\n        if (parentCell) {\n            parentCell.unembed(this, opt);\n        }\n\n        // Remove also all the cells, which were embedded into this cell\n        const embeddedCells = this.getEmbeddedCells();\n        for (let i = 0, n = embeddedCells.length; i < n; i++) {\n            const embed = embeddedCells[i];\n            if (embed) {\n                embed.remove(opt);\n            }\n        }\n\n        this.trigger('remove', this, graph.attributes.cells, opt);\n\n        graph.stopBatch('remove');\n\n        return this;\n    },\n\n    toFront: function(opt) {\n        var graph = this.graph;\n        if (graph) {\n            opt = defaults(opt || {}, { foregroundEmbeds: true });\n\n            let cells;\n            if (opt.deep) {\n                cells = this.getEmbeddedCells({ deep: true, breadthFirst: opt.breadthFirst !== false, sortSiblings: opt.foregroundEmbeds });\n                cells.unshift(this);\n            } else {\n                cells = [this];\n            }\n\n            const sortedCells = opt.foregroundEmbeds ? cells : sortBy(cells, cell => cell.z());\n\n            const maxZ = graph.maxZIndex();\n            let z = maxZ - cells.length + 1;\n\n            const collection = graph.get('cells');\n\n            let shouldUpdate = (collection.indexOf(sortedCells[0]) !== (collection.length - cells.length));\n            if (!shouldUpdate) {\n                shouldUpdate = sortedCells.some(function(cell, index) {\n                    return cell.z() !== z + index;\n                });\n            }\n\n            if (shouldUpdate) {\n                this.startBatch('to-front');\n\n                z = z + cells.length;\n\n                sortedCells.forEach(function(cell, index) {\n                    cell.set('z', z + index, opt);\n                });\n\n                this.stopBatch('to-front');\n            }\n        }\n\n        return this;\n    },\n\n    toBack: function(opt) {\n        var graph = this.graph;\n        if (graph) {\n            opt = defaults(opt || {}, { foregroundEmbeds: true });\n\n            let cells;\n            if (opt.deep) {\n                cells = this.getEmbeddedCells({ deep: true, breadthFirst: opt.breadthFirst !== false, sortSiblings: opt.foregroundEmbeds });\n                cells.unshift(this);\n            } else {\n                cells = [this];\n            }\n\n            const sortedCells = opt.foregroundEmbeds ? cells : sortBy(cells, cell => cell.z());\n\n            let z = graph.minZIndex();\n\n            var collection = graph.get('cells');\n\n            let shouldUpdate = (collection.indexOf(sortedCells[0]) !== 0);\n            if (!shouldUpdate) {\n                shouldUpdate = sortedCells.some(function(cell, index) {\n                    return cell.z() !== z + index;\n                });\n            }\n\n            if (shouldUpdate) {\n                this.startBatch('to-back');\n\n                z -= cells.length;\n\n                sortedCells.forEach(function(cell, index) {\n                    cell.set('z', z + index, opt);\n                });\n\n                this.stopBatch('to-back');\n            }\n        }\n\n        return this;\n    },\n\n    parent: function(parent, opt) {\n\n        // getter\n        if (parent === undefined) return this.get('parent');\n        // setter\n        return this.set('parent', parent, opt);\n    },\n\n    embed: function(cell, opt) {\n        const cells = Array.isArray(cell) ? cell : [cell];\n        if (!this.canEmbed(cells)) {\n            throw new Error('Recursive embedding not allowed.');\n        }\n        if (cells.some(c => c.isEmbedded() && this.id !== c.parent())) {\n            throw new Error('Embedding of already embedded cells is not allowed.');\n        }\n        this._embedCells(cells, opt);\n        return this;\n    },\n\n    unembed: function(cell, opt) {\n        const cells = Array.isArray(cell) ? cell : [cell];\n        this._unembedCells(cells, opt);\n        return this;\n    },\n\n    canEmbed: function(cell) {\n        const cells = Array.isArray(cell) ? cell : [cell];\n        return cells.every(c => this !== c && !this.isEmbeddedIn(c));\n    },\n\n    _embedCells: function(cells, opt) {\n        const batchName = 'embed';\n        this.startBatch(batchName);\n        const embeds = assign([], this.get('embeds'));\n        cells.forEach(cell => {\n            // We keep all element ids after link ids.\n            embeds[cell.isLink() ? 'unshift' : 'push'](cell.id);\n            cell.parent(this.id, opt);\n        });\n        this.set('embeds', uniq(embeds), opt);\n        this.stopBatch(batchName);\n    },\n\n    _unembedCells: function(cells, opt) {\n        const batchName = 'unembed';\n        this.startBatch(batchName);\n        cells.forEach(cell => cell.unset('parent', opt));\n        this.set('embeds', without(this.get('embeds'), ...cells.map(cell => cell.id)), opt);\n        this.stopBatch(batchName);\n    },\n\n    getParentCell: function() {\n\n        // unlike link.source/target, cell.parent stores id directly as a string\n        var parentId = this.parent();\n        var graph = this.graph;\n\n        return (parentId && graph && graph.getCell(parentId)) || null;\n    },\n\n    // Return an array of ancestor cells.\n    // The array is ordered from the parent of the cell\n    // to the most distant ancestor.\n    getAncestors: function() {\n\n        var ancestors = [];\n\n        if (!this.graph) {\n            return ancestors;\n        }\n\n        var parentCell = this.getParentCell();\n        while (parentCell) {\n            ancestors.push(parentCell);\n            parentCell = parentCell.getParentCell();\n        }\n\n        return ancestors;\n    },\n\n    getEmbeddedCells: function(opt) {\n\n        opt = opt || {};\n\n        // Cell models can only be retrieved when this element is part of a collection.\n        // There is no way this element knows about other cells otherwise.\n        // This also means that calling e.g. `translate()` on an element with embeds before\n        // adding it to a graph does not translate its embeds.\n        if (!this.graph) {\n            return [];\n        }\n\n        if (opt.deep) {\n            if (opt.breadthFirst) {\n                return this._getEmbeddedCellsBfs(opt.sortSiblings);\n            } else {\n                return this._getEmbeddedCellsDfs(opt.sortSiblings);\n            }\n        }\n\n        const embeddedIds = this.get('embeds');\n        if (isEmpty(embeddedIds)) {\n            return [];\n        }\n\n        let cells = embeddedIds.map(this.graph.getCell, this.graph);\n        if (opt.sortSiblings) {\n            cells = sortBy(cells, cell => cell.z());\n        }\n\n        return cells;\n    },\n\n    _getEmbeddedCellsBfs: function(sortSiblings) {\n        const cells = [];\n\n        const queue = [];\n        queue.push(this);\n\n        while (queue.length > 0) {\n            const current = queue.shift();\n            cells.push(current);\n\n            const embeddedCells = current.getEmbeddedCells({ sortSiblings: sortSiblings });\n\n            queue.push(...embeddedCells);\n        }\n        cells.shift();\n\n        return cells;\n    },\n\n    _getEmbeddedCellsDfs: function(sortSiblings) {\n        const cells = [];\n\n        const stack = [];\n        stack.push(this);\n\n        while (stack.length > 0) {\n            const current = stack.pop();\n            cells.push(current);\n\n            const embeddedCells = current.getEmbeddedCells({ sortSiblings: sortSiblings });\n\n            // When using the stack, cells that are embedded last are processed first.\n            // To maintain the original order, we need to push the cells in reverse order\n            for (let i = embeddedCells.length - 1; i >= 0; --i) {\n                stack.push(embeddedCells[i]);\n            }\n        }\n        cells.shift();\n\n        return cells;\n    },\n\n    isEmbeddedIn: function(cell, opt) {\n\n        var cellId = isString(cell) ? cell : cell.id;\n        var parentId = this.parent();\n\n        opt = assign({ deep: true }, opt);\n\n        // See getEmbeddedCells().\n        if (this.graph && opt.deep) {\n\n            while (parentId) {\n                if (parentId === cellId) {\n                    return true;\n                }\n                parentId = this.graph.getCell(parentId).parent();\n            }\n\n            return false;\n\n        } else {\n\n            // When this cell is not part of a collection check\n            // at least whether it's a direct child of given cell.\n            return parentId === cellId;\n        }\n    },\n\n    // Whether or not the cell is embedded in any other cell.\n    isEmbedded: function() {\n\n        return !!this.parent();\n    },\n\n    // Isolated cloning. Isolated cloning has two versions: shallow and deep (pass `{ deep: true }` in `opt`).\n    // Shallow cloning simply clones the cell and returns a new cell with different ID.\n    // Deep cloning clones the cell and all its embedded cells recursively.\n    clone: function(opt) {\n\n        opt = opt || {};\n\n        if (!opt.deep) {\n            // Shallow cloning.\n\n            var clone = Backbone.Model.prototype.clone.apply(this, arguments);\n            // We don't want the clone to have the same ID as the original.\n            clone.set(this.getIdAttribute(), this.generateId());\n            // A shallow cloned element does not carry over the original embeds.\n            clone.unset('embeds');\n            // And can not be embedded in any cell\n            // as the clone is not part of the graph.\n            clone.unset('parent');\n\n            return clone;\n\n        } else {\n            // Deep cloning.\n\n            // For a deep clone, simply call `graph.cloneCells()` with the cell and all its embedded cells.\n            return toArray(cloneCells([this].concat(this.getEmbeddedCells({ deep: true }))));\n        }\n    },\n\n    // A convenient way to set nested properties.\n    // This method merges the properties you'd like to set with the ones\n    // stored in the cell and makes sure change events are properly triggered.\n    // You can either set a nested property with one object\n    // or use a property path.\n    // The most simple use case is:\n    // `cell.prop('name/first', 'John')` or\n    // `cell.prop({ name: { first: 'John' } })`.\n    // Nested arrays are supported too:\n    // `cell.prop('series/0/data/0/degree', 50)` or\n    // `cell.prop({ series: [ { data: [ { degree: 50 } ] } ] })`.\n    prop: function(props, value, opt) {\n\n        var delim = '/';\n        var _isString = isString(props);\n\n        if (_isString || Array.isArray(props)) {\n            // Get/set an attribute by a special path syntax that delimits\n            // nested objects by the colon character.\n\n            if (arguments.length > 1) {\n\n                var path;\n                var pathArray;\n\n                if (_isString) {\n                    path = props;\n                    pathArray = path.split('/');\n                } else {\n                    path = props.join(delim);\n                    pathArray = props.slice();\n                }\n\n                var property = pathArray[0];\n                var pathArrayLength = pathArray.length;\n\n                const options = opt || {};\n                options.propertyPath = path;\n                options.propertyValue = value;\n                options.propertyPathArray = pathArray;\n                if (!('rewrite' in options)) {\n                    options.rewrite = false;\n                }\n\n                var update = {};\n                // Initialize the nested object. Sub-objects are either arrays or objects.\n                // An empty array is created if the sub-key is an integer. Otherwise, an empty object is created.\n                // Note that this imposes a limitation on object keys one can use with Inspector.\n                // Pure integer keys will cause issues and are therefore not allowed.\n                var initializer = update;\n                var prevProperty = property;\n\n                for (var i = 1; i < pathArrayLength; i++) {\n                    var pathItem = pathArray[i];\n                    var isArrayIndex = Number.isFinite(_isString ? Number(pathItem) : pathItem);\n                    initializer = initializer[prevProperty] = isArrayIndex ? [] : {};\n                    prevProperty = pathItem;\n                }\n\n                // Fill update with the `value` on `path`.\n                update = setByPath(update, pathArray, value, '/');\n\n                var baseAttributes = merge({}, this.attributes);\n                // if rewrite mode enabled, we replace value referenced by path with\n                // the new one (we don't merge).\n                options.rewrite && unsetByPath(baseAttributes, path, '/');\n\n                // Merge update with the model attributes.\n                var attributes = merge(baseAttributes, update);\n                // Finally, set the property to the updated attributes.\n                return this.set(property, attributes[property], options);\n\n            } else {\n\n                return getByPath(this.attributes, props, delim);\n            }\n        }\n\n        const options = value || {};\n        // Note: '' is not the path to the root. It's a path with an empty string i.e. { '': {}}.\n        options.propertyPath = null;\n        options.propertyValue = props;\n        options.propertyPathArray = [];\n        if (!('rewrite' in options)) {\n            options.rewrite = false;\n        }\n\n        return this.set(merge({}, this.attributes, props), options);\n    },\n\n    // A convenient way to unset nested properties\n    removeProp: function(path, opt) {\n\n        opt = opt || {};\n\n        var pathArray = Array.isArray(path) ? path : path.split('/');\n\n        // Once a property is removed from the `attrs` attribute\n        // the cellView will recognize a `dirty` flag and re-render itself\n        // in order to remove the attribute from SVG element.\n        var property = pathArray[0];\n        if (property === 'attrs') opt.dirty = true;\n\n        if (pathArray.length === 1) {\n            // A top level property\n            return this.unset(path, opt);\n        }\n\n        // A nested property\n        var nestedPath = pathArray.slice(1);\n        var propertyValue = this.get(property);\n        if (propertyValue === undefined || propertyValue === null) return this;\n        propertyValue = cloneDeep(propertyValue);\n\n        unsetByPath(propertyValue, nestedPath, '/');\n\n        return this.set(property, propertyValue, opt);\n    },\n\n    // A convenient way to set nested attributes.\n    attr: function(attrs, value, opt) {\n\n        var args = Array.from(arguments);\n        if (args.length === 0) {\n            return this.get('attrs');\n        }\n\n        if (Array.isArray(attrs)) {\n            args[0] = ['attrs'].concat(attrs);\n        } else if (isString(attrs)) {\n            // Get/set an attribute by a special path syntax that delimits\n            // nested objects by the colon character.\n            args[0] = 'attrs/' + attrs;\n\n        } else {\n\n            args[0] = { 'attrs' : attrs };\n        }\n\n        return this.prop.apply(this, args);\n    },\n\n    // A convenient way to unset nested attributes\n    removeAttr: function(path, opt) {\n\n        if (Array.isArray(path)) {\n\n            return this.removeProp(['attrs'].concat(path));\n        }\n\n        return this.removeProp('attrs/' + path, opt);\n    },\n\n    transition: function(path, value, opt, delim) {\n\n        delim = delim || '/';\n\n        var defaults = {\n            duration: 100,\n            delay: 10,\n            timingFunction: timing.linear,\n            valueFunction: interpolate.number\n        };\n\n        opt = assign(defaults, opt);\n\n        var firstFrameTime = 0;\n        var interpolatingFunction;\n\n        var setter = function(runtime) {\n\n            var id, progress, propertyValue;\n\n            firstFrameTime = firstFrameTime || runtime;\n            runtime -= firstFrameTime;\n            progress = runtime / opt.duration;\n\n            if (progress < 1) {\n                this._transitionIds[path] = id = nextFrame(setter);\n            } else {\n                progress = 1;\n                delete this._transitionIds[path];\n            }\n\n            propertyValue = interpolatingFunction(opt.timingFunction(progress));\n\n            opt.transitionId = id;\n\n            this.prop(path, propertyValue, opt);\n\n            if (!id) this.trigger('transition:end', this, path);\n\n        }.bind(this);\n\n        const { _scheduledTransitionIds } = this;\n        let initialId;\n\n        var initiator = (callback) => {\n\n            if (_scheduledTransitionIds[path]) {\n                _scheduledTransitionIds[path] = without(_scheduledTransitionIds[path], initialId);\n                if (_scheduledTransitionIds[path].length === 0) {\n                    delete _scheduledTransitionIds[path];\n                }\n            }\n\n            this.stopPendingTransitions(path, delim);\n\n            interpolatingFunction = opt.valueFunction(getByPath(this.attributes, path, delim), value);\n\n            this._transitionIds[path] = nextFrame(callback);\n\n            this.trigger('transition:start', this, path);\n\n        };\n\n        initialId = setTimeout(initiator, opt.delay, setter);\n\n        _scheduledTransitionIds[path] || (_scheduledTransitionIds[path] = []);\n        _scheduledTransitionIds[path].push(initialId);\n\n        return initialId;\n    },\n\n    getTransitions: function() {\n        return union(\n            Object.keys(this._transitionIds),\n            Object.keys(this._scheduledTransitionIds)\n        );\n    },\n\n    stopScheduledTransitions: function(path, delim = '/') {\n        const { _scheduledTransitionIds = {}} = this;\n        let transitions = Object.keys(_scheduledTransitionIds);\n        if (path) {\n            const pathArray = path.split(delim);\n            transitions = transitions.filter((key) => {\n                return isEqual(pathArray, key.split(delim).slice(0, pathArray.length));\n            });\n        }\n        transitions.forEach((key) => {\n            const transitionIds = _scheduledTransitionIds[key];\n            // stop the initiator\n            transitionIds.forEach(transitionId => clearTimeout(transitionId));\n            delete _scheduledTransitionIds[key];\n            // Note: we could trigger transition:cancel` event here\n        });\n        return this;\n    },\n\n    stopPendingTransitions(path, delim = '/') {\n        const { _transitionIds = {}} = this;\n        let transitions = Object.keys(_transitionIds);\n        if (path) {\n            const pathArray = path.split(delim);\n            transitions = transitions.filter((key) => {\n                return isEqual(pathArray, key.split(delim).slice(0, pathArray.length));\n            });\n        }\n        transitions.forEach((key) => {\n            const transitionId = _transitionIds[key];\n            // stop the setter\n            cancelFrame(transitionId);\n            delete _transitionIds[key];\n            this.trigger('transition:end', this, key);\n        });\n    },\n\n    stopTransitions: function(path, delim = '/') {\n        this.stopScheduledTransitions(path, delim);\n        this.stopPendingTransitions(path, delim);\n        return this;\n    },\n\n    // A shorcut making it easy to create constructs like the following:\n    // `var el = (new joint.shapes.basic.Rect).addTo(graph)`.\n    addTo: function(graph, opt) {\n\n        graph.addCell(this, opt);\n        return this;\n    },\n\n    // A shortcut for an equivalent call: `paper.findViewByModel(cell)`\n    // making it easy to create constructs like the following:\n    // `cell.findView(paper).highlight()`\n    findView: function(paper) {\n\n        return paper.findViewByModel(this);\n    },\n\n    isElement: function() {\n\n        return false;\n    },\n\n    isLink: function() {\n\n        return false;\n    },\n\n    startBatch: function(name, opt) {\n\n        if (this.graph) { this.graph.startBatch(name, assign({}, opt, { cell: this })); }\n        return this;\n    },\n\n    stopBatch: function(name, opt) {\n\n        if (this.graph) { this.graph.stopBatch(name, assign({}, opt, { cell: this })); }\n        return this;\n    },\n\n    getChangeFlag: function(attributes) {\n\n        var flag = 0;\n        if (!attributes) return flag;\n        for (var key in attributes) {\n            if (!attributes.hasOwnProperty(key) || !this.hasChanged(key)) continue;\n            flag |= attributes[key];\n        }\n        return flag;\n    },\n\n    angle: function() {\n\n        // To be overridden.\n        return 0;\n    },\n\n    position: function() {\n\n        // To be overridden.\n        return new g.Point(0, 0);\n    },\n\n    z: function() {\n        return this.get('z') || 0;\n    },\n\n    getPointFromConnectedLink: function() {\n\n        // To be overridden\n        return new g.Point();\n    },\n\n    getBBox: function() {\n\n        // To be overridden\n        return new g.Rect(0, 0, 0, 0);\n    },\n\n    getPointRotatedAroundCenter(angle, x, y) {\n        const point = new g.Point(x, y);\n        if (angle) point.rotate(this.getBBox().center(), angle);\n        return point;\n    },\n\n    getAbsolutePointFromRelative(x, y) {\n        // Rotate the position to take the model angle into account\n        return this.getPointRotatedAroundCenter(\n            -this.angle(),\n            // Transform the relative position to absolute\n            this.position().offset(x, y)\n        );\n    },\n\n    getRelativePointFromAbsolute(x, y) {\n        return this\n            // Rotate the coordinates to mitigate the element's rotation.\n            .getPointRotatedAroundCenter(this.angle(), x, y)\n            // Transform the absolute position into relative\n            .difference(this.position());\n    }\n\n}, {\n\n    getAttributeDefinition: function(attrName) {\n\n        var defNS = this.attributes;\n        var globalDefNS = attributes;\n        return (defNS && defNS[attrName]) || globalDefNS[attrName];\n    },\n\n    define: function(type, defaults, protoProps, staticProps) {\n\n        protoProps = assign({\n            defaults: defaultsDeep({ type: type }, defaults, this.prototype.defaults)\n        }, protoProps);\n\n        var Cell = this.extend(protoProps, staticProps);\n        // es5 backward compatibility\n        /* eslint-disable no-undef */\n        if (typeof joint !== 'undefined' && has(joint, 'shapes')) {\n            setByPath(joint.shapes, type, Cell, '.');\n        }\n        /* eslint-enable no-undef */\n        return Cell;\n    }\n});\n\n","import { Cell } from '../dia/Cell.mjs';\nimport { isFunction, isString, toArray } from './util.mjs';\n\nexport const wrapWith = function(object, methods, wrapper) {\n\n    if (isString(wrapper)) {\n\n        if (!wrappers[wrapper]) {\n            throw new Error('Unknown wrapper: \"' + wrapper + '\"');\n        }\n\n        wrapper = wrappers[wrapper];\n    }\n\n    if (!isFunction(wrapper)) {\n        throw new Error('Wrapper must be a function.');\n    }\n\n    toArray(methods).forEach(function(method) {\n        object[method] = wrapper(object[method]);\n    });\n};\n\nexport const wrappers = {\n\n    cells: function(fn) {\n\n        return function() {\n\n            var args = Array.from(arguments);\n            var n = args.length;\n            var cells = n > 0 && args[0] || [];\n            var opt = n > 1 && args[n - 1] || {};\n\n            if (!Array.isArray(cells)) {\n\n                if (opt instanceof Cell) {\n                    cells = args;\n                } else if (cells instanceof Cell) {\n                    if (args.length > 1) {\n                        args.pop();\n                    }\n                    cells = args;\n                }\n            }\n\n            if (opt instanceof Cell) {\n                opt = {};\n            }\n\n            return fn.call(this, cells, opt);\n        };\n    }\n\n};\n\n","import * as g from '../g/index.mjs';\n\nexport const Positions = {\n    TOP: 'top',\n    RIGHT: 'right',\n    BOTTOM: 'bottom',\n    LEFT: 'left',\n    TOP_LEFT: 'top-left',\n    TOP_RIGHT: 'top-right',\n    BOTTOM_LEFT: 'bottom-left',\n    BOTTOM_RIGHT: 'bottom-right',\n    CENTER: 'center',\n};\n\nexport function getRectPoint(rect, position) {\n    const r = new g.Rect(rect);\n    switch (position) {\n        case undefined:\n            throw new Error('Position required');\n\n        // Middle Points\n        case Positions.LEFT:\n        case 'leftMiddle':\n            return r.leftMiddle();\n\n        case Positions.RIGHT:\n        case 'rightMiddle':\n            return r.rightMiddle();\n\n        case Positions.TOP:\n        case 'topMiddle':\n            return r.topMiddle();\n\n        case Positions.BOTTOM:\n        case 'bottomMiddle':\n            return r.bottomMiddle();\n\n        // Corners\n        case Positions.TOP_LEFT:\n        case 'topLeft':\n        case 'origin':\n            return r.topLeft();\n\n        case Positions.TOP_RIGHT:\n        case 'topRight':\n            return r.topRight();\n\n        case Positions.BOTTOM_LEFT:\n        case 'bottomLeft':\n            return r.bottomLeft();\n\n        case Positions.BOTTOM_RIGHT:\n        case 'bottomRight':\n        case 'corner':\n            return r.bottomRight();\n\n        // Center\n        case Positions.CENTER:\n            return r.center();\n\n        // TODO: calc(), percentage etc.\n        default:\n            throw new Error(`Unknown position: ${position}`);\n    }\n}\n","import { evalCalcAttribute, isCalcAttribute } from '../../dia/attributes/calc.mjs';\nimport * as g from '../../g/index.mjs';\nimport * as util from '../../util/index.mjs';\n\nfunction portTransformAttrs(point, angle, opt) {\n\n    var trans = point.toJSON();\n\n    trans.angle = angle || 0;\n\n    return util.defaults({}, opt, trans);\n}\n\nfunction lineLayout(ports, p1, p2, elBBox) {\n    return ports.map(function(port, index, ports) {\n        var p = this.pointAt(((index + 0.5) / ports.length));\n        // `dx`,`dy` per port offset option\n        if (port.dx || port.dy) {\n            p.offset(port.dx || 0, port.dy || 0);\n        }\n        return portTransformAttrs(p.round(), 0, argTransform(elBBox, port));\n    }, g.line(p1, p2));\n}\n\nfunction ellipseLayout(ports, elBBox, startAngle, stepFn) {\n\n    var center = elBBox.center();\n    var ratio = elBBox.width / elBBox.height;\n    var p1 = elBBox.topMiddle();\n\n    var ellipse = g.Ellipse.fromRect(elBBox);\n\n    return ports.map(function(port, index, ports) {\n\n        var angle = startAngle + stepFn(index, ports.length);\n        var p2 = p1.clone()\n            .rotate(center, -angle)\n            .scale(ratio, 1, center);\n\n        var theta = port.compensateRotation ? -ellipse.tangentTheta(p2) : 0;\n\n        // `dx`,`dy` per port offset option\n        if (port.dx || port.dy) {\n            p2.offset(port.dx || 0, port.dy || 0);\n        }\n\n        // `dr` delta radius option\n        if (port.dr) {\n            p2.move(center, port.dr);\n        }\n\n        return portTransformAttrs(p2.round(), theta, argTransform(elBBox, port));\n    });\n}\n\n\nfunction argTransform(bbox, args) {\n    let { x, y, angle } = args;\n    if (util.isPercentage(x)) {\n        x = parseFloat(x) / 100 * bbox.width;\n    } else if (isCalcAttribute(x)) {\n        x = Number(evalCalcAttribute(x, bbox));\n    }\n    if (util.isPercentage(y)) {\n        y = parseFloat(y) / 100 * bbox.height;\n    } else if (isCalcAttribute(y)) {\n        y = Number(evalCalcAttribute(y, bbox));\n    }\n    return { x, y, angle };\n}\n\n// Creates a point stored in arguments\nfunction argPoint(bbox, args) {\n    const { x, y } = argTransform(bbox, args);\n    return new g.Point(x || 0, y || 0);\n}\n\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const absolute = function(ports, elBBox) {\n    return ports.map(port => {\n        const transformation = argPoint(elBBox, port).round().toJSON();\n        transformation.angle = port.angle || 0;\n        return transformation;\n    });\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const fn = function(ports, elBBox, opt) {\n    return opt.fn(ports, elBBox, opt);\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const line = function(ports, elBBox, opt) {\n\n    var start = argPoint(elBBox, opt.start || elBBox.origin());\n    var end = argPoint(elBBox, opt.end || elBBox.corner());\n\n    return lineLayout(ports, start, end, elBBox);\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const left = function(ports, elBBox, opt) {\n    return lineLayout(ports, elBBox.origin(), elBBox.bottomLeft(), elBBox);\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const right = function(ports, elBBox, opt) {\n    return lineLayout(ports, elBBox.topRight(), elBBox.corner(), elBBox);\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const top = function(ports, elBBox, opt) {\n    return lineLayout(ports, elBBox.origin(), elBBox.topRight(), elBBox);\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt opt Group options\n * @returns {Array<g.Point>}\n */\nexport const bottom = function(ports, elBBox, opt) {\n    return lineLayout(ports, elBBox.bottomLeft(), elBBox.corner(), elBBox);\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt Group options\n * @returns {Array<g.Point>}\n */\nexport const ellipseSpread = function(ports, elBBox, opt) {\n\n    var startAngle = opt.startAngle || 0;\n    var stepAngle = opt.step || 360 / ports.length;\n\n    return ellipseLayout(ports, elBBox, startAngle, function(index) {\n        return index * stepAngle;\n    });\n};\n\n/**\n * @param {Array<Object>} ports\n * @param {g.Rect} elBBox\n * @param {Object=} opt Group options\n * @returns {Array<g.Point>}\n */\nexport const ellipse = function(ports, elBBox, opt) {\n\n    var startAngle = opt.startAngle || 0;\n    var stepAngle = opt.step || 20;\n\n    return ellipseLayout(ports, elBBox, startAngle, function(index, count) {\n        return (index + 0.5 - count / 2) * stepAngle;\n    });\n};\n\n","import * as g from '../../g/index.mjs';\nimport * as util from '../../util/index.mjs';\n\nfunction labelAttributes(opt1, opt2) {\n\n    // use value from `opt2` if it is missing in `opt1`\n    // use value from this object if it is missing in `opt2` as well\n    return util.defaultsDeep({}, opt1, opt2, {\n        x: 0,\n        y: 0,\n        angle: 0,\n        attrs: {}\n    });\n}\n\nfunction getBBoxAngles(elBBox) {\n\n    var center = elBBox.center();\n\n    var tl = center.theta(elBBox.origin());\n    var bl = center.theta(elBBox.bottomLeft());\n    var br = center.theta(elBBox.corner());\n    var tr = center.theta(elBBox.topRight());\n\n    return [tl, tr, br, bl];\n}\n\nfunction outsideLayout(portPosition, elBBox, autoOrient, opt) {\n\n    opt = util.defaults({}, opt, { offset: 15 });\n    var angle = elBBox.center().theta(portPosition);\n\n    var tx, ty, y, textAnchor;\n    var offset = opt.offset;\n    var orientAngle = 0;\n\n    const [topLeftAngle, bottomLeftAngle, bottomRightAngle, topRightAngle] = getBBoxAngles(elBBox);\n    if ((angle < bottomLeftAngle) || (angle > bottomRightAngle)) {\n        y = '.3em';\n        tx = offset;\n        ty = 0;\n        textAnchor = 'start';\n    } else if (angle < topLeftAngle) {\n        tx = 0;\n        ty = -offset;\n        if (autoOrient) {\n            orientAngle = -90;\n            textAnchor = 'start';\n            y = '.3em';\n        } else {\n            textAnchor = 'middle';\n            y = '0';\n        }\n    } else if (angle < topRightAngle) {\n        y = '.3em';\n        tx = -offset;\n        ty = 0;\n        textAnchor = 'end';\n    } else {\n        tx = 0;\n        ty = offset;\n        if (autoOrient) {\n            orientAngle = 90;\n            textAnchor = 'start';\n            y = '.3em';\n        } else {\n            textAnchor = 'middle';\n            y = '.6em';\n        }\n    }\n\n    var round = Math.round;\n    return labelAttributes(opt, {\n        x: round(tx),\n        y: round(ty),\n        angle: orientAngle,\n        attrs: { labelText: { y, textAnchor }}\n    });\n}\n\nfunction insideLayout(portPosition, elBBox, autoOrient, opt) {\n\n    opt = util.defaults({}, opt, { offset: 15 });\n    var angle = elBBox.center().theta(portPosition);\n\n    var tx, ty, y, textAnchor;\n    var offset = opt.offset;\n    var orientAngle = 0;\n\n    const [topLeftAngle, bottomLeftAngle, bottomRightAngle, topRightAngle] = getBBoxAngles(elBBox);\n    if ((angle < bottomLeftAngle) || (angle > bottomRightAngle)) {\n        y = '.3em';\n        tx = -offset;\n        ty = 0;\n        textAnchor = 'end';\n    } else if (angle < topLeftAngle) {\n        tx = 0;\n        ty = offset;\n        if (autoOrient) {\n            orientAngle = 90;\n            textAnchor = 'start';\n            y = '.3em';\n        } else {\n            textAnchor = 'middle';\n            y = '.6em';\n        }\n    } else if (angle < topRightAngle) {\n        y = '.3em';\n        tx = offset;\n        ty = 0;\n        textAnchor = 'start';\n    } else {\n        tx = 0;\n        ty = -offset;\n        if (autoOrient) {\n            orientAngle = -90;\n            textAnchor = 'start';\n            y = '.3em';\n        } else {\n            textAnchor = 'middle';\n            y = '0';\n        }\n    }\n\n    var round = Math.round;\n    return labelAttributes(opt, {\n        x: round(tx),\n        y: round(ty),\n        angle: orientAngle,\n        attrs: { labelText: { y, textAnchor }}\n    });\n}\n\nfunction radialLayout(portCenterOffset, autoOrient, opt) {\n\n    opt = util.defaults({}, opt, { offset: 20 });\n\n    var origin = g.point(0, 0);\n    var angle = -portCenterOffset.theta(origin);\n    var orientAngle = angle;\n    var offset = portCenterOffset.clone()\n        .move(origin, opt.offset)\n        .difference(portCenterOffset)\n        .round();\n\n    var y = '.3em';\n    var textAnchor;\n\n    if ((angle + 90) % 180 === 0) {\n        textAnchor = autoOrient ? 'end' : 'middle';\n        if (!autoOrient && angle === -270) {\n            y = '0em';\n        }\n    } else if (angle > -270 && angle < -90) {\n        textAnchor = 'start';\n        orientAngle = angle - 180;\n    } else {\n        textAnchor = 'end';\n    }\n\n    var round = Math.round;\n    return labelAttributes(opt, {\n        x: round(offset.x),\n        y: round(offset.y),\n        angle: ((autoOrient) ? orientAngle : 0),\n        attrs: { labelText: { y, textAnchor }}\n    });\n}\n\nexport const manual = function(_portPosition, _elBBox, opt) {\n    return labelAttributes(opt);\n};\n\nexport const left = function(portPosition, elBBox, opt) {\n    return labelAttributes(opt, {\n        x: -15,\n        attrs: { labelText: { y: '.3em', textAnchor: 'end' }},\n    });\n};\n\nexport const right = function(portPosition, elBBox, opt) {\n    return labelAttributes(opt, {\n        x: 15,\n        attrs: { labelText: { y: '.3em', textAnchor: 'start' }},\n    });\n};\n\nexport const top = function(portPosition, elBBox, opt) {\n    return labelAttributes(opt, {\n        y: -15,\n        attrs: { labelText: { y: '0', textAnchor: 'middle' }},\n    });\n};\n\nexport const bottom = function(portPosition, elBBox, opt) {\n    return labelAttributes(opt, {\n        y: 15,\n        attrs: { labelText: { y: '.6em', textAnchor: 'middle' }},\n    });\n};\n\nexport const outsideOriented = function(portPosition, elBBox, opt) {\n    return outsideLayout(portPosition, elBBox, true, opt);\n};\n\nexport const outside = function(portPosition, elBBox, opt) {\n    return outsideLayout(portPosition, elBBox, false, opt);\n};\n\nexport const insideOriented = function(portPosition, elBBox, opt) {\n    return insideLayout(portPosition, elBBox, true, opt);\n};\n\nexport const inside = function(portPosition, elBBox, opt) {\n    return insideLayout(portPosition, elBBox, false, opt);\n};\n\nexport const radial = function(portPosition, elBBox, opt) {\n    return radialLayout(portPosition.difference(elBBox.center()), false, opt);\n};\n\nexport const radialOriented = function(portPosition, elBBox, opt) {\n    return radialLayout(portPosition.difference(elBBox.center()), true, opt);\n};\n","import { Cell } from './Cell.mjs';\nimport { clone, isPlainObject, isFunction, isString, isNumber } from '../util/index.mjs';\nimport { Point, Polyline } from '../g/index.mjs';\n\n// Link base model.\n// --------------------------\n\nexport const Link = Cell.extend({\n\n    // The default markup for links.\n    markup: [\n        '<path class=\"connection\" stroke=\"black\" d=\"M 0 0 0 0\"/>',\n        '<path class=\"marker-source\" fill=\"black\" stroke=\"black\" d=\"M 0 0 0 0\"/>',\n        '<path class=\"marker-target\" fill=\"black\" stroke=\"black\" d=\"M 0 0 0 0\"/>',\n        '<path class=\"connection-wrap\" d=\"M 0 0 0 0\"/>',\n        '<g class=\"labels\"/>',\n        '<g class=\"marker-vertices\"/>',\n        '<g class=\"marker-arrowheads\"/>',\n        '<g class=\"link-tools\"/>'\n    ].join(''),\n\n    toolMarkup: [\n        '<g class=\"link-tool\">',\n        '<g class=\"tool-remove\" event=\"remove\">',\n        '<circle r=\"11\" />',\n        '<path transform=\"scale(.8) translate(-16, -16)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\" />',\n        '<title>Remove link.</title>',\n        '</g>',\n        '<g class=\"tool-options\" event=\"link:options\">',\n        '<circle r=\"11\" transform=\"translate(25)\"/>',\n        '<path fill=\"white\" transform=\"scale(.55) translate(29, -16)\" d=\"M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z\"/>',\n        '<title>Link options.</title>',\n        '</g>',\n        '</g>'\n    ].join(''),\n\n    doubleToolMarkup: undefined,\n\n    // The default markup for showing/removing vertices. These elements are the children of the .marker-vertices element (see `this.markup`).\n    // Only .marker-vertex and .marker-vertex-remove element have special meaning. The former is used for\n    // dragging vertices (changing their position). The latter is used for removing vertices.\n    vertexMarkup: [\n        '<g class=\"marker-vertex-group\" transform=\"translate(<%= x %>, <%= y %>)\">',\n        '<circle class=\"marker-vertex\" idx=\"<%= idx %>\" r=\"10\" />',\n        '<path class=\"marker-vertex-remove-area\" idx=\"<%= idx %>\" d=\"M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z\" transform=\"translate(5, -33)\"/>',\n        '<path class=\"marker-vertex-remove\" idx=\"<%= idx %>\" transform=\"scale(.8) translate(9.5, -37)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\">',\n        '<title>Remove vertex.</title>',\n        '</path>',\n        '</g>'\n    ].join(''),\n\n    arrowheadMarkup: [\n        '<g class=\"marker-arrowhead-group marker-arrowhead-group-<%= end %>\">',\n        '<path class=\"marker-arrowhead\" end=\"<%= end %>\" d=\"M 26 0 L 0 13 L 26 26 z\" />',\n        '</g>'\n    ].join(''),\n\n    // may be overwritten by user to change default label (its markup, size, attrs, position)\n    defaultLabel: undefined,\n\n    // deprecated\n    // may be overwritten by user to change default label markup\n    // lower priority than defaultLabel.markup\n    labelMarkup: undefined,\n\n    // private\n    _builtins: {\n        defaultLabel: {\n            // builtin default markup:\n            // used if neither defaultLabel.markup\n            // nor label.markup is set\n            markup: [\n                {\n                    tagName: 'rect',\n                    selector: 'rect' // faster than tagName CSS selector\n                }, {\n                    tagName: 'text',\n                    selector: 'text' // faster than tagName CSS selector\n                }\n            ],\n            // builtin default attributes:\n            // applied only if builtin default markup is used\n            attrs: {\n                text: {\n                    fill: '#000000',\n                    fontSize: 14,\n                    textAnchor: 'middle',\n                    yAlignment: 'middle',\n                    pointerEvents: 'none'\n                },\n                rect: {\n                    ref: 'text',\n                    fill: '#ffffff',\n                    rx: 3,\n                    ry: 3,\n                    refWidth: 1,\n                    refHeight: 1,\n                    refX: 0,\n                    refY: 0\n                }\n            },\n            // builtin default position:\n            // used if neither defaultLabel.position\n            // nor label.position is set\n            position: {\n                distance: 0.5\n            }\n        }\n    },\n\n    defaults: {\n        type: 'link',\n        source: {},\n        target: {}\n    },\n\n    isLink: function() {\n\n        return true;\n    },\n\n    disconnect: function(opt) {\n\n        return this.set({\n            source: { x: 0, y: 0 },\n            target: { x: 0, y: 0 }\n        }, opt);\n    },\n\n    source: function(source, args, opt) {\n\n        // getter\n        if (source === undefined) {\n            return clone(this.get('source'));\n        }\n\n        // setter\n        var setSource;\n        var setOpt;\n\n        // `source` is a cell\n        // take only its `id` and combine with `args`\n        var isCellProvided = source instanceof Cell;\n        if (isCellProvided) { // three arguments\n            setSource = clone(args) || {};\n            setSource.id = source.id;\n            setOpt = opt;\n            return this.set('source', setSource, setOpt);\n        }\n\n        // `source` is a point-like object\n        // for example, a g.Point\n        // take only its `x` and `y` and combine with `args`\n        var isPointProvided = !isPlainObject(source);\n        if (isPointProvided) { // three arguments\n            setSource = clone(args) || {};\n            setSource.x = source.x;\n            setSource.y = source.y;\n            setOpt = opt;\n            return this.set('source', setSource, setOpt);\n        }\n\n        // `source` is an object\n        // no checking\n        // two arguments\n        setSource = source;\n        setOpt = args;\n        return this.set('source', setSource, setOpt);\n    },\n\n    target: function(target, args, opt) {\n\n        // getter\n        if (target === undefined) {\n            return clone(this.get('target'));\n        }\n\n        // setter\n        var setTarget;\n        var setOpt;\n\n        // `target` is a cell\n        // take only its `id` argument and combine with `args`\n        var isCellProvided = target instanceof Cell;\n        if (isCellProvided) { // three arguments\n            setTarget = clone(args) || {};\n            setTarget.id = target.id;\n            setOpt = opt;\n            return this.set('target', setTarget, setOpt);\n        }\n\n        // `target` is a point-like object\n        // for example, a g.Point\n        // take only its `x` and `y` and combine with `args`\n        var isPointProvided = !isPlainObject(target);\n        if (isPointProvided) { // three arguments\n            setTarget = clone(args) || {};\n            setTarget.x = target.x;\n            setTarget.y = target.y;\n            setOpt = opt;\n            return this.set('target', setTarget, setOpt);\n        }\n\n        // `target` is an object\n        // no checking\n        // two arguments\n        setTarget = target;\n        setOpt = args;\n        return this.set('target', setTarget, setOpt);\n    },\n\n    router: function(name, args, opt) {\n\n        // getter\n        if (name === undefined) {\n            var router = this.get('router');\n            if (!router) {\n                if (this.get('manhattan')) return { name: 'orthogonal' }; // backwards compatibility\n                return null;\n            }\n            if (typeof router === 'object') return clone(router);\n            return router; // e.g. a function\n        }\n\n        // setter\n        var isRouterProvided = ((typeof name === 'object') || (typeof name === 'function'));\n        var localRouter = isRouterProvided ? name : { name: name, args: args };\n        var localOpt = isRouterProvided ? args : opt;\n\n        return this.set('router', localRouter, localOpt);\n    },\n\n    connector: function(name, args, opt) {\n\n        // getter\n        if (name === undefined) {\n            var connector = this.get('connector');\n            if (!connector) {\n                if (this.get('smooth')) return { name: 'smooth' }; // backwards compatibility\n                return null;\n            }\n            if (typeof connector === 'object') return clone(connector);\n            return connector; // e.g. a function\n        }\n\n        // setter\n        var isConnectorProvided = ((typeof name === 'object' || typeof name === 'function'));\n        var localConnector = isConnectorProvided ? name : { name: name, args: args };\n        var localOpt = isConnectorProvided ? args : opt;\n\n        return this.set('connector', localConnector, localOpt);\n    },\n\n    // Labels API\n\n    // A convenient way to set labels. Currently set values will be mixined with `value` if used as a setter.\n    label: function(idx, label, opt) {\n\n        var labels = this.labels();\n\n        idx = (isFinite(idx) && idx !== null) ? (idx | 0) : 0;\n        if (idx < 0) idx = labels.length + idx;\n\n        // getter\n        if (arguments.length <= 1) return this.prop(['labels', idx]);\n        // setter\n        return this.prop(['labels', idx], label, opt);\n    },\n\n    labels: function(labels, opt) {\n\n        // getter\n        if (arguments.length === 0) {\n            labels = this.get('labels');\n            if (!Array.isArray(labels)) return [];\n            return labels.slice();\n        }\n        // setter\n        if (!Array.isArray(labels)) labels = [];\n        return this.set('labels', labels, opt);\n    },\n\n    hasLabels: function() {\n        const { labels } = this.attributes;\n        return Array.isArray(labels) && labels.length > 0;\n    },\n\n    insertLabel: function(idx, label, opt) {\n\n        if (!label) throw new Error('dia.Link: no label provided');\n\n        var labels = this.labels();\n        var n = labels.length;\n        idx = (isFinite(idx) && idx !== null) ? (idx | 0) : n;\n        if (idx < 0) idx = n + idx + 1;\n\n        labels.splice(idx, 0, label);\n        return this.labels(labels, opt);\n    },\n\n    // convenience function\n    // add label to end of labels array\n    appendLabel: function(label, opt) {\n\n        return this.insertLabel(-1, label, opt);\n    },\n\n    removeLabel: function(idx, opt) {\n\n        var labels = this.labels();\n        idx = (isFinite(idx) && idx !== null) ? (idx | 0) : -1;\n\n        labels.splice(idx, 1);\n        return this.labels(labels, opt);\n    },\n\n    // Vertices API\n\n    vertex: function(idx, vertex, opt) {\n\n        var vertices = this.vertices();\n\n        idx = (isFinite(idx) && idx !== null) ? (idx | 0) : 0;\n        if (idx < 0) idx = vertices.length + idx;\n\n        // getter\n        if (arguments.length <= 1) return this.prop(['vertices', idx]);\n\n        // setter\n        var setVertex = this._normalizeVertex(vertex);\n        return this.prop(['vertices', idx], setVertex, opt);\n    },\n\n    vertices: function(vertices, opt) {\n\n        // getter\n        if (arguments.length === 0) {\n            vertices = this.get('vertices');\n            if (!Array.isArray(vertices)) return [];\n            return vertices.slice();\n        }\n\n        // setter\n        if (!Array.isArray(vertices)) vertices = [];\n        var setVertices = [];\n        for (var i = 0; i < vertices.length; i++) {\n            var vertex = vertices[i];\n            var setVertex = this._normalizeVertex(vertex);\n            setVertices.push(setVertex);\n        }\n        return this.set('vertices', setVertices, opt);\n    },\n\n    insertVertex: function(idx, vertex, opt) {\n\n        if (!vertex) throw new Error('dia.Link: no vertex provided');\n\n        var vertices = this.vertices();\n        var n = vertices.length;\n        idx = (isFinite(idx) && idx !== null) ? (idx | 0) : n;\n        if (idx < 0) idx = n + idx + 1;\n\n        var setVertex = this._normalizeVertex(vertex);\n        vertices.splice(idx, 0, setVertex);\n        return this.vertices(vertices, opt);\n    },\n\n    removeVertex: function(idx, opt) {\n\n        var vertices = this.vertices();\n        idx = (isFinite(idx) && idx !== null) ? (idx | 0) : -1;\n\n        vertices.splice(idx, 1);\n        return this.vertices(vertices, opt);\n    },\n\n    _normalizeVertex: function(vertex) {\n\n        // is vertex a point-like object?\n        // for example, a g.Point\n        var isPointProvided = !isPlainObject(vertex);\n        if (isPointProvided) return { x: vertex.x, y: vertex.y };\n\n        // else: return vertex unchanged\n        return vertex;\n    },\n\n    // Transformations\n\n    translate: function(tx, ty, opt) {\n\n        // enrich the option object\n        opt = opt || {};\n        opt.translateBy = opt.translateBy || this.id;\n        opt.tx = tx;\n        opt.ty = ty;\n\n        return this.applyToPoints(function(p) {\n            return { x: (p.x || 0) + tx, y: (p.y || 0) + ty };\n        }, opt);\n    },\n\n    scale: function(sx, sy, origin, opt) {\n\n        return this.applyToPoints(function(p) {\n            return Point(p).scale(sx, sy, origin).toJSON();\n        }, opt);\n    },\n\n    applyToPoints: function(fn, opt) {\n\n        if (!isFunction(fn)) {\n            throw new TypeError('dia.Link: applyToPoints expects its first parameter to be a function.');\n        }\n\n        var attrs = {};\n\n        var { source, target } = this.attributes;\n        if (!source.id) {\n            attrs.source = fn(source);\n        }\n        if (!target.id) {\n            attrs.target = fn(target);\n        }\n\n        var vertices = this.vertices();\n        if (vertices.length > 0) {\n            attrs.vertices = vertices.map(fn);\n        }\n\n        return this.set(attrs, opt);\n    },\n\n    getSourcePoint: function() {\n        var sourceCell = this.getSourceCell();\n        if (!sourceCell) return new Point(this.source());\n        return sourceCell.getPointFromConnectedLink(this, 'source');\n    },\n\n    getTargetPoint: function() {\n        var targetCell = this.getTargetCell();\n        if (!targetCell) return new Point(this.target());\n        return targetCell.getPointFromConnectedLink(this, 'target');\n    },\n\n    getPointFromConnectedLink: function(/* link, endType */) {\n        return this.getPolyline().pointAt(0.5);\n    },\n\n    getPolyline: function() {\n        const points = [\n            this.getSourcePoint(),\n            ...this.vertices().map(Point),\n            this.getTargetPoint()\n        ];\n        return new Polyline(points);\n    },\n\n    getBBox: function() {\n        return this.getPolyline().bbox();\n    },\n\n    reparent: function(opt) {\n\n        var newParent;\n\n        if (this.graph) {\n\n            var source = this.getSourceElement();\n            var target = this.getTargetElement();\n            var prevParent = this.getParentCell();\n\n            if (source && target) {\n                if (source === target || source.isEmbeddedIn(target)) {\n                    newParent = target;\n                } else if (target.isEmbeddedIn(source)) {\n                    newParent = source;\n                } else {\n                    newParent = this.graph.getCommonAncestor(source, target);\n                }\n            }\n\n            if (prevParent && (!newParent || newParent.id !== prevParent.id)) {\n                // Unembed the link if source and target has no common ancestor\n                // or common ancestor changed\n                prevParent.unembed(this, opt);\n            }\n\n            if (newParent) {\n                newParent.embed(this, opt);\n            }\n        }\n\n        return newParent;\n    },\n\n    hasLoop: function(opt) {\n\n        opt = opt || {};\n\n        var { source, target } = this.attributes;\n        var sourceId = source.id;\n        var targetId = target.id;\n\n        if (!sourceId || !targetId) {\n            // Link \"pinned\" to the paper does not have a loop.\n            return false;\n        }\n\n        var loop = sourceId === targetId;\n\n        // Note that there in the deep mode a link can have a loop,\n        // even if it connects only a parent and its embed.\n        // A loop \"target equals source\" is valid in both shallow and deep mode.\n        if (!loop && opt.deep && this.graph) {\n\n            var sourceElement = this.getSourceCell();\n            var targetElement = this.getTargetCell();\n\n            loop = sourceElement.isEmbeddedIn(targetElement) || targetElement.isEmbeddedIn(sourceElement);\n        }\n\n        return loop;\n    },\n\n    // unlike source(), this method returns null if source is a point\n    getSourceCell: function() {\n\n        const { graph, attributes } = this;\n        var source = attributes.source;\n        return (source && source.id && graph && graph.getCell(source.id)) || null;\n    },\n\n    getSourceElement: function() {\n        var cell = this;\n        var visited = {};\n        do {\n            if (visited[cell.id]) return null;\n            visited[cell.id] = true;\n            cell = cell.getSourceCell();\n        } while (cell && cell.isLink());\n        return cell;\n    },\n\n    // unlike target(), this method returns null if target is a point\n    getTargetCell: function() {\n\n        const { graph, attributes } = this;\n        var target = attributes.target;\n        return (target && target.id && graph && graph.getCell(target.id)) || null;\n    },\n\n    getTargetElement: function() {\n        var cell = this;\n        var visited = {};\n        do {\n            if (visited[cell.id]) return null;\n            visited[cell.id] = true;\n            cell = cell.getTargetCell();\n        } while (cell && cell.isLink());\n        return cell;\n    },\n\n    // Returns the common ancestor for the source element,\n    // target element and the link itself.\n    getRelationshipAncestor: function() {\n\n        var connectionAncestor;\n\n        if (this.graph) {\n\n            var cells = [\n                this,\n                this.getSourceElement(), // null if source is a point\n                this.getTargetElement() // null if target is a point\n            ].filter(function(item) {\n                return !!item;\n            });\n\n            connectionAncestor = this.graph.getCommonAncestor.apply(this.graph, cells);\n        }\n\n        return connectionAncestor || null;\n    },\n\n    // Is source, target and the link itself embedded in a given cell?\n    isRelationshipEmbeddedIn: function(cell) {\n\n        var cellId = (isString(cell) || isNumber(cell)) ? cell : cell.id;\n        var ancestor = this.getRelationshipAncestor();\n\n        return !!ancestor && (ancestor.id === cellId || ancestor.isEmbeddedIn(cellId));\n    },\n\n    // Get resolved default label.\n    _getDefaultLabel: function() {\n\n        var defaultLabel = this.get('defaultLabel') || this.defaultLabel || {};\n\n        var label = {};\n        label.markup = defaultLabel.markup || this.get('labelMarkup') || this.labelMarkup;\n        label.position = defaultLabel.position;\n        label.attrs = defaultLabel.attrs;\n        label.size = defaultLabel.size;\n\n        return label;\n    }\n}, {\n\n    endsEqual: function(a, b) {\n\n        var portsEqual = a.port === b.port || !a.port && !b.port;\n        return a.id === b.id && portsEqual;\n    }\n});\n\n","import * as util from '../util/index.mjs';\nimport V from '../V/index.mjs';\nimport { Rect, Point } from '../g/index.mjs';\nimport * as Port from '../layout/ports/port.mjs';\nimport * as PortLabel from '../layout/ports/portLabel.mjs';\n\nvar PortData = function(data) {\n\n    var clonedData = util.cloneDeep(data) || {};\n    this.ports = [];\n    this.groups = {};\n    this.portLayoutNamespace = Port;\n    this.portLabelLayoutNamespace = PortLabel;\n\n    this._init(clonedData);\n};\n\nPortData.prototype = {\n\n    getPorts: function() {\n        return this.ports;\n    },\n\n    getGroup: function(name) {\n        return this.groups[name] || {};\n    },\n\n    getPortsByGroup: function(groupName) {\n\n        return this.ports.filter(function(port) {\n            return port.group === groupName;\n        });\n    },\n\n    getGroupPortsMetrics: function(groupName, elBBox) {\n\n        var group = this.getGroup(groupName);\n        var ports = this.getPortsByGroup(groupName);\n\n        var groupPosition = group.position || {};\n        var groupPositionName = groupPosition.name;\n        var namespace = this.portLayoutNamespace;\n        if (!namespace[groupPositionName]) {\n            groupPositionName = 'left';\n        }\n\n        var groupArgs = groupPosition.args || {};\n        var portsArgs = ports.map(function(port) {\n            return port && port.position && port.position.args;\n        });\n        var groupPortTransformations = namespace[groupPositionName](portsArgs, elBBox, groupArgs);\n\n        var accumulator = {\n            ports: ports,\n            result: []\n        };\n\n        util.toArray(groupPortTransformations).reduce(function(res, portTransformation, index) {\n            var port = res.ports[index];\n            res.result.push({\n                portId: port.id,\n                portTransformation: portTransformation,\n                labelTransformation: this._getPortLabelLayout(port, Point(portTransformation), elBBox),\n                portAttrs: port.attrs,\n                portSize: port.size,\n                labelSize: port.label.size\n            });\n            return res;\n        }.bind(this), accumulator);\n\n        return accumulator.result;\n    },\n\n    _getPortLabelLayout: function(port, portPosition, elBBox) {\n\n        var namespace = this.portLabelLayoutNamespace;\n        var labelPosition = port.label.position.name || 'left';\n\n        if (namespace[labelPosition]) {\n            return namespace[labelPosition](portPosition, elBBox, port.label.position.args);\n        }\n\n        return null;\n    },\n\n    _init: function(data) {\n\n        // prepare groups\n        if (util.isObject(data.groups)) {\n            var groups = Object.keys(data.groups);\n            for (var i = 0, n = groups.length; i < n; i++) {\n                var key = groups[i];\n                this.groups[key] = this._evaluateGroup(data.groups[key]);\n            }\n        }\n\n        // prepare ports\n        var ports = util.toArray(data.items);\n        for (var j = 0, m = ports.length; j < m; j++) {\n            this.ports.push(this._evaluatePort(ports[j]));\n        }\n    },\n\n    _evaluateGroup: function(group) {\n\n        return util.merge(group, {\n            position: this._getPosition(group.position, true),\n            label: this._getLabel(group, true)\n        });\n    },\n\n    _evaluatePort: function(port) {\n\n        var evaluated = util.assign({}, port);\n\n        var group = this.getGroup(port.group);\n\n        evaluated.markup = evaluated.markup || group.markup;\n        evaluated.attrs = util.merge({}, group.attrs, evaluated.attrs);\n        evaluated.position = this._createPositionNode(group, evaluated);\n        evaluated.label = util.merge({}, group.label, this._getLabel(evaluated));\n        evaluated.z = this._getZIndex(group, evaluated);\n        evaluated.size = util.assign({}, group.size, evaluated.size);\n\n        return evaluated;\n    },\n\n    _getZIndex: function(group, port) {\n\n        if (util.isNumber(port.z)) {\n            return port.z;\n        }\n        if (util.isNumber(group.z) || group.z === 'auto') {\n            return group.z;\n        }\n        return 'auto';\n    },\n\n    _createPositionNode: function(group, port) {\n\n        return util.merge({\n            name: 'left',\n            args: {}\n        }, group.position, { args: port.args });\n    },\n\n    _getPosition: function(position, setDefault) {\n\n        var args = {};\n        var positionName;\n\n        if (util.isFunction(position)) {\n            positionName = 'fn';\n            args.fn = position;\n        } else if (util.isString(position)) {\n            positionName = position;\n        } else if (position === undefined) {\n            positionName = setDefault ? 'left' : null;\n        } else if (Array.isArray(position)) {\n            positionName = 'absolute';\n            args.x = position[0];\n            args.y = position[1];\n        } else if (util.isObject(position)) {\n            positionName = position.name;\n            util.assign(args, position.args);\n        }\n\n        var result = { args: args };\n\n        if (positionName) {\n            result.name = positionName;\n        }\n        return result;\n    },\n\n    _getLabel: function(item, setDefaults) {\n\n        var label = item.label || {};\n\n        var ret = label;\n        ret.position = this._getPosition(label.position, setDefaults);\n\n        return ret;\n    }\n};\n\nexport const elementPortPrototype = {\n\n    _initializePorts: function() {\n\n        this._createPortData();\n        this.on('change:ports', function() {\n\n            this._processRemovedPort();\n            this._createPortData();\n        }, this);\n    },\n\n    /**\n     * remove links tied wiht just removed element\n     * @private\n     */\n    _processRemovedPort: function() {\n\n        var current = this.get('ports') || {};\n        var currentItemsMap = {};\n\n        util.toArray(current.items).forEach(function(item) {\n            currentItemsMap[item.id] = true;\n        });\n\n        var previous = this.previous('ports') || {};\n        var removed = {};\n\n        util.toArray(previous.items).forEach(function(item) {\n            if (!currentItemsMap[item.id]) {\n                removed[item.id] = true;\n            }\n        });\n\n        var graph = this.graph;\n        if (graph && !util.isEmpty(removed)) {\n\n            var inboundLinks = graph.getConnectedLinks(this, { inbound: true });\n            inboundLinks.forEach(function(link) {\n\n                if (removed[link.get('target').port]) link.remove();\n            });\n\n            var outboundLinks = graph.getConnectedLinks(this, { outbound: true });\n            outboundLinks.forEach(function(link) {\n\n                if (removed[link.get('source').port]) link.remove();\n            });\n        }\n    },\n\n    /**\n     * @returns {boolean}\n     */\n    hasPorts: function() {\n\n        var ports = this.prop('ports/items');\n        return Array.isArray(ports) && ports.length > 0;\n    },\n\n    /**\n     * @param {string} id\n     * @returns {boolean}\n     */\n    hasPort: function(id) {\n\n        return this.getPortIndex(id) !== -1;\n    },\n\n    /**\n     * @returns {Array<object>}\n     */\n    getPorts: function() {\n\n        return util.cloneDeep(this.prop('ports/items')) || [];\n    },\n\n    /**\n     * @returns {Array<object>}\n     */\n    getGroupPorts: function(groupName) {\n        const groupPorts = util.toArray(this.prop(['ports','items'])).filter(port => port.group === groupName);\n        return util.cloneDeep(groupPorts);\n    },\n\n    /**\n     * @param {string} id\n     * @returns {object}\n     */\n    getPort: function(id) {\n\n        return util.cloneDeep(util.toArray(this.prop('ports/items')).find(function(port) {\n            return port.id && port.id === id;\n        }));\n    },\n\n    /**\n     * @param {string} groupName\n     * @returns {Object<portId, {x: number, y: number, angle: number}>}\n     */\n    getPortsPositions: function(groupName) {\n\n        var portsMetrics = this._portSettingsData.getGroupPortsMetrics(groupName, Rect(this.size()));\n\n        return portsMetrics.reduce(function(positions, metrics) {\n            var transformation = metrics.portTransformation;\n            positions[metrics.portId] = {\n                x: transformation.x,\n                y: transformation.y,\n                angle: transformation.angle\n            };\n            return positions;\n        }, {});\n    },\n\n    /**\n     * @param {string|Port} port port id or port\n     * @returns {number} port index\n     */\n    getPortIndex: function(port) {\n\n        var id = util.isObject(port) ? port.id : port;\n\n        if (!this._isValidPortId(id)) {\n            return -1;\n        }\n\n        return util.toArray(this.prop('ports/items')).findIndex(function(item) {\n            return item.id === id;\n        });\n    },\n\n    /**\n     * @param {object} port\n     * @param {object} [opt]\n     * @returns {joint.dia.Element}\n     */\n    addPort: function(port, opt) {\n\n        if (!util.isObject(port) || Array.isArray(port)) {\n            throw new Error('Element: addPort requires an object.');\n        }\n\n        var ports = util.assign([], this.prop('ports/items'));\n        ports.push(port);\n        this.prop('ports/items', ports, opt);\n\n        return this;\n    },\n\n    /**\n     * @param {string|Port|number} before\n     * @param {object} port\n     * @param {object} [opt]\n     * @returns {joint.dia.Element}\n     */\n    insertPort: function(before, port, opt) {\n        const index = (typeof before === 'number') ? before : this.getPortIndex(before);\n\n        if (!util.isObject(port) || Array.isArray(port)) {\n            throw new Error('dia.Element: insertPort requires an object.');\n        }\n\n        const ports = util.assign([], this.prop('ports/items'));\n        ports.splice(index, 0, port);\n        this.prop('ports/items', ports, opt);\n\n        return this;\n    },\n\n    /**\n     * @param {string} portId\n     * @param {string|object=} path\n     * @param {*=} value\n     * @param {object=} opt\n     * @returns {joint.dia.Element}\n     */\n    portProp: function(portId, path, value, opt) {\n\n        var index = this.getPortIndex(portId);\n\n        if (index === -1) {\n            throw new Error('Element: unable to find port with id ' + portId);\n        }\n\n        var args = Array.prototype.slice.call(arguments, 1);\n        if (Array.isArray(path)) {\n            args[0] = ['ports', 'items', index].concat(path);\n        } else if (util.isString(path)) {\n\n            // Get/set an attribute by a special path syntax that delimits\n            // nested objects by the colon character.\n            args[0] = ['ports/items/', index, '/', path].join('');\n\n        } else {\n\n            args = ['ports/items/' + index];\n            if (util.isPlainObject(path)) {\n                args.push(path);\n                args.push(value);\n            }\n        }\n\n        return this.prop.apply(this, args);\n    },\n\n    _validatePorts: function() {\n\n        var portsAttr = this.get('ports') || {};\n\n        var errorMessages = [];\n        portsAttr = portsAttr || {};\n        var ports = util.toArray(portsAttr.items);\n\n        ports.forEach(function(p) {\n\n            if (typeof p !== 'object') {\n                errorMessages.push('Element: invalid port ', p);\n            }\n\n            if (!this._isValidPortId(p.id)) {\n                p.id = this.generatePortId();\n            }\n        }, this);\n\n        if (util.uniq(ports, 'id').length !== ports.length) {\n            errorMessages.push('Element: found id duplicities in ports.');\n        }\n\n        return errorMessages;\n    },\n\n    generatePortId: function() {\n        return this.generateId();\n    },\n\n    /**\n     * @param {string} id port id\n     * @returns {boolean}\n     * @private\n     */\n    _isValidPortId: function(id) {\n\n        return id !== null && id !== undefined && !util.isObject(id);\n    },\n\n    addPorts: function(ports, opt) {\n\n        if (ports.length) {\n            this.prop('ports/items', util.assign([], this.prop('ports/items')).concat(ports), opt);\n        }\n\n        return this;\n    },\n\n    removePort: function(port, opt) {\n        const options = opt || {};\n        const index = this.getPortIndex(port);\n        if (index !== -1) {\n            const ports = util.assign([], this.prop(['ports', 'items']));\n            ports.splice(index, 1);\n            options.rewrite = true;\n            this.startBatch('port-remove');\n            this.prop(['ports', 'items'], ports, options);\n            this.stopBatch('port-remove');\n        }\n        return this;\n    },\n\n    removePorts: function(portsForRemoval, opt) {\n        let options, newPorts;\n        if (Array.isArray(portsForRemoval)) {\n            options = opt || {};\n            if (portsForRemoval.length === 0) return this.this;\n            const currentPorts = util.assign([], this.prop(['ports', 'items']));\n            newPorts = currentPorts.filter(function(cp) {\n                return !portsForRemoval.some(function(rp) {\n                    const rpId = util.isObject(rp) ? rp.id : rp;\n                    return cp.id === rpId;\n                });\n            });\n        } else {\n            options = portsForRemoval || {};\n            newPorts = [];\n        }\n        this.startBatch('port-remove');\n        options.rewrite = true;\n        this.prop(['ports', 'items'], newPorts, options);\n        this.stopBatch('port-remove');\n        return this;\n    },\n\n    /**\n     * @private\n     */\n    _createPortData: function() {\n\n        var err = this._validatePorts();\n\n        if (err.length > 0) {\n            this.set('ports', this.previous('ports'));\n            throw new Error(err.join(' '));\n        }\n\n        var prevPortData;\n\n        if (this._portSettingsData) {\n\n            prevPortData = this._portSettingsData.getPorts();\n        }\n\n        this._portSettingsData = new PortData(this.get('ports'));\n\n        var curPortData = this._portSettingsData.getPorts();\n\n        if (prevPortData) {\n\n            var added = curPortData.filter(function(item) {\n                if (!prevPortData.find(function(prevPort) {\n                    return prevPort.id === item.id;\n                })) {\n                    return item;\n                }\n            });\n\n            var removed = prevPortData.filter(function(item) {\n                if (!curPortData.find(function(curPort) {\n                    return curPort.id === item.id;\n                })) {\n                    return item;\n                }\n            });\n\n            if (removed.length > 0) {\n                this.trigger('ports:remove', this, removed);\n            }\n\n            if (added.length > 0) {\n                this.trigger('ports:add', this, added);\n            }\n        }\n    }\n};\n\nexport const elementViewPortPrototype = {\n\n    portContainerMarkup: 'g',\n    portMarkup: [{\n        tagName: 'circle',\n        selector: 'circle',\n        attributes: {\n            'r': 10,\n            'fill': '#FFFFFF',\n            'stroke': '#000000'\n        }\n    }],\n    portLabelMarkup: [{\n        tagName: 'text',\n        selector: 'text',\n        attributes: {\n            'fill': '#000000'\n        }\n    }],\n    /** @type {Object<string, {portElement: Vectorizer, portLabelElement: Vectorizer}>} */\n    _portElementsCache: null,\n\n    /**\n     * @private\n     */\n    _initializePorts: function() {\n        this._cleanPortsCache();\n    },\n\n    /**\n     * @typedef {Object} Port\n     *\n     * @property {string} id\n     * @property {Object} position\n     * @property {Object} label\n     * @property {Object} attrs\n     * @property {string} markup\n     * @property {string} group\n     */\n\n    /**\n     * @private\n     */\n    _refreshPorts: function() {\n\n        this._removePorts();\n        this._cleanPortsCache();\n        this._renderPorts();\n    },\n\n    _cleanPortsCache: function() {\n        this._portElementsCache = {};\n    },\n\n    /**\n     * @private\n     */\n    _renderPorts: function() {\n\n        // references to rendered elements without z-index\n        var elementReferences = [];\n        var elem = this._getContainerElement();\n\n        for (var i = 0, count = elem.node.childNodes.length; i < count; i++) {\n            elementReferences.push(elem.node.childNodes[i]);\n        }\n\n        var portsGropsByZ = util.groupBy(this.model._portSettingsData.getPorts(), 'z');\n        var withoutZKey = 'auto';\n\n        // render non-z first\n        util.toArray(portsGropsByZ[withoutZKey]).forEach(function(port) {\n            var portElement = this._getPortElement(port);\n            elem.append(portElement);\n            elementReferences.push(portElement);\n        }, this);\n\n        var groupNames = Object.keys(portsGropsByZ);\n        for (var k = 0; k < groupNames.length; k++) {\n            var groupName = groupNames[k];\n            if (groupName !== withoutZKey) {\n                var z = parseInt(groupName, 10);\n                this._appendPorts(portsGropsByZ[groupName], z, elementReferences);\n            }\n        }\n\n        this._updatePorts();\n    },\n\n    /**\n     * @returns {V}\n     * @private\n     */\n    _getContainerElement: function() {\n\n        return this.rotatableNode || this.vel;\n    },\n\n    /**\n     * @param {Array<Port>}ports\n     * @param {number} z\n     * @param refs\n     * @private\n     */\n    _appendPorts: function(ports, z, refs) {\n\n        var containerElement = this._getContainerElement();\n        var portElements = util.toArray(ports).map(this._getPortElement, this);\n\n        if (refs[z] || z < 0) {\n            V(refs[Math.max(z, 0)]).before(portElements);\n        } else {\n            containerElement.append(portElements);\n        }\n    },\n\n    /**\n     * Try to get element from cache,\n     * @param port\n     * @returns {*}\n     * @private\n     */\n    _getPortElement: function(port) {\n\n        if (this._portElementsCache[port.id]) {\n            return this._portElementsCache[port.id].portElement;\n        }\n        return this._createPortElement(port);\n    },\n\n    findPortNode: function(portId, selector) {\n        const portCache = this._portElementsCache[portId];\n        if (!portCache) return null;\n        if (!selector) return portCache.portContentElement.node;\n        const portRoot = portCache.portElement.node;\n        const portSelectors = portCache.portSelectors;\n        const [node = null] = this.findBySelector(selector, portRoot, portSelectors);\n        return node;\n    },\n\n    /**\n     * @private\n     */\n    _updatePorts: function() {\n\n        // layout ports without group\n        this._updatePortGroup(undefined);\n        // layout ports with explicit group\n        var groupsNames = Object.keys(this.model._portSettingsData.groups);\n        groupsNames.forEach(this._updatePortGroup, this);\n    },\n\n    /**\n     * @private\n     */\n    _removePorts: function() {\n        util.invoke(this._portElementsCache, 'portElement.remove');\n    },\n\n    /**\n     * @param {Port} port\n     * @returns {V}\n     * @private\n     */\n    _createPortElement: function(port) {\n\n        let portElement;\n        let labelElement;\n        let labelSelectors;\n        let portSelectors;\n\n        var portContainerElement = V(this.portContainerMarkup).addClass('joint-port');\n\n        var portMarkup = this._getPortMarkup(port);\n        if (Array.isArray(portMarkup)) {\n            var portDoc = this.parseDOMJSON(portMarkup, portContainerElement.node);\n            var portFragment = portDoc.fragment;\n            if (portFragment.childNodes.length > 1) {\n                portElement = V('g').append(portFragment);\n            } else {\n                portElement = V(portFragment.firstChild);\n            }\n            portSelectors = portDoc.selectors;\n        } else {\n            portElement = V(portMarkup);\n            if (Array.isArray(portElement)) {\n                portElement = V('g').append(portElement);\n            }\n        }\n\n        if (!portElement) {\n            throw new Error('ElementView: Invalid port markup.');\n        }\n\n        portElement.attr({\n            'port': port.id,\n            'port-group': port.group\n        });\n\n        const labelMarkupDef = this._getPortLabelMarkup(port.label);\n        if (Array.isArray(labelMarkupDef)) {\n            // JSON Markup\n            const { fragment, selectors } = this.parseDOMJSON(labelMarkupDef, portContainerElement.node);\n            const childCount = fragment.childNodes.length;\n            if (childCount > 0) {\n                labelSelectors = selectors;\n                labelElement = (childCount === 1) ? V(fragment.firstChild) : V('g').append(fragment);\n            }\n        } else {\n            // String Markup\n            labelElement = V(labelMarkupDef);\n            if (Array.isArray(labelElement)) {\n                labelElement = V('g').append(labelElement);\n            }\n        }\n\n        var portContainerSelectors;\n        if (portSelectors && labelSelectors) {\n            for (var key in labelSelectors) {\n                if (portSelectors[key] && key !== this.selector) throw new Error('ElementView: selectors within port must be unique.');\n            }\n            portContainerSelectors = util.assign({}, portSelectors, labelSelectors);\n        } else {\n            portContainerSelectors = portSelectors || labelSelectors || {};\n        }\n\n        // The `portRootSelector` points to the root SVGNode of the port.\n        // Either the implicit wrapping group <g/> in case the port consist of multiple SVGNodes.\n        // Or the single SVGNode of the port.\n        const portRootSelector = 'portRoot';\n        // The `labelRootSelector` points to the root SVGNode of the label.\n        const labelRootSelector = 'labelRoot';\n        // The `labelTextSelector` points to all text SVGNodes of the label.\n        const labelTextSelector = 'labelText';\n\n        if (!(portRootSelector in portContainerSelectors)) {\n            portContainerSelectors[portRootSelector] = portElement.node;\n        }\n\n        if (labelElement) {\n            const labelNode = labelElement.node;\n            if (!(labelRootSelector in portContainerSelectors)) {\n                portContainerSelectors[labelRootSelector] = labelNode;\n            }\n            if (!(labelTextSelector in portContainerSelectors)) {\n                // If the label is a <text> element, we can use it directly.\n                // Otherwise, we need to find the <text> element within the label.\n                const labelTextNode = (labelElement.tagName() === 'TEXT')\n                    ? labelNode\n                    : Array.from(labelNode.querySelectorAll('text'));\n                portContainerSelectors[labelTextSelector] = labelTextNode;\n                if (!labelSelectors) labelSelectors = {};\n                labelSelectors[labelTextSelector] = labelTextNode;\n            }\n        }\n\n        portContainerElement.append(portElement.addClass('joint-port-body'));\n        if (labelElement) {\n            portContainerElement.append(labelElement.addClass('joint-port-label'));\n        }\n\n        this._portElementsCache[port.id] = {\n            portElement: portContainerElement,\n            portLabelElement: labelElement,\n            portSelectors: portContainerSelectors,\n            portLabelSelectors: labelSelectors,\n            portContentElement: portElement,\n            portContentSelectors: portSelectors\n        };\n\n        return portContainerElement;\n    },\n\n    /**\n     * @param {string=} groupName\n     * @private\n     */\n    _updatePortGroup: function(groupName) {\n\n        var elementBBox = Rect(this.model.size());\n        var portsMetrics = this.model._portSettingsData.getGroupPortsMetrics(groupName, elementBBox);\n\n        for (var i = 0, n = portsMetrics.length; i < n; i++) {\n            var metrics = portsMetrics[i];\n            var portId = metrics.portId;\n            var cached = this._portElementsCache[portId] || {};\n            var portTransformation = metrics.portTransformation;\n            var labelTransformation = metrics.labelTransformation;\n            if (labelTransformation && cached.portLabelElement) {\n                this.updateDOMSubtreeAttributes(cached.portLabelElement.node, labelTransformation.attrs, {\n                    rootBBox: new Rect(metrics.labelSize),\n                    selectors: cached.portLabelSelectors\n                });\n                this.applyPortTransform(cached.portLabelElement, labelTransformation, (-portTransformation.angle || 0));\n            }\n            this.updateDOMSubtreeAttributes(cached.portElement.node, metrics.portAttrs, {\n                rootBBox: new Rect(metrics.portSize),\n                selectors: cached.portSelectors\n            });\n            this.applyPortTransform(cached.portElement, portTransformation);\n        }\n    },\n\n    /**\n     * @param {Vectorizer} element\n     * @param {{dx:number, dy:number, angle: number, attrs: Object, x:number: y:number}} transformData\n     * @param {number=} initialAngle\n     * @constructor\n     */\n    applyPortTransform: function(element, transformData, initialAngle) {\n\n        var matrix = V.createSVGMatrix()\n            .rotate(initialAngle || 0)\n            .translate(transformData.x || 0, transformData.y || 0)\n            .rotate(transformData.angle || 0);\n\n        element.transform(matrix, { absolute: true });\n    },\n\n    /**\n     * @param {Port} port\n     * @returns {string}\n     * @private\n     */\n    _getPortMarkup: function(port) {\n\n        return port.markup || this.model.get('portMarkup') || this.model.portMarkup || this.portMarkup;\n    },\n\n    /**\n     * @param {Object} label\n     * @returns {string}\n     * @private\n     */\n    _getPortLabelMarkup: function(label) {\n\n        return label.markup || this.model.get('portLabelMarkup') || this.model.portLabelMarkup || this.portLabelMarkup;\n    }\n};\n\n","import { Cell } from './Cell.mjs';\nimport { Point, toRad, normalizeAngle, Rect } from '../g/index.mjs';\nimport { isNumber, isObject, interpolate, assign, invoke, normalizeSides } from '../util/index.mjs';\nimport { elementPortPrototype } from './ports.mjs';\n\n// Element base model.\n// -----------------------------\n\nexport const Element = Cell.extend({\n\n    defaults: {\n        position: { x: 0, y: 0 },\n        size: { width: 1, height: 1 },\n        angle: 0\n    },\n\n    initialize: function() {\n\n        this._initializePorts();\n        Cell.prototype.initialize.apply(this, arguments);\n    },\n\n    /**\n     * @abstract\n     */\n    _initializePorts: function() {\n        // implemented in ports.js\n    },\n\n    _refreshPorts: function() {\n        // implemented in ports.js\n    },\n\n    isElement: function() {\n\n        return true;\n    },\n\n    position: function(x, y, opt) {\n\n        const isSetter = isNumber(y);\n        opt = (isSetter ? opt : x) || {};\n        const { parentRelative, deep, restrictedArea } = opt;\n\n\n        // option `parentRelative` for setting the position relative to the element's parent.\n        let parentPosition;\n        if (parentRelative) {\n\n            // Getting the parent's position requires the collection.\n            // Cell.parent() holds cell id only.\n            if (!this.graph) throw new Error('Element must be part of a graph.');\n\n            const parent = this.getParentCell();\n            if (parent && !parent.isLink()) {\n                parentPosition = parent.get('position');\n            }\n        }\n\n        if (isSetter) {\n\n            if (parentPosition) {\n                x += parentPosition.x;\n                y += parentPosition.y;\n            }\n\n            if (deep || restrictedArea) {\n                const { x: x0, y: y0 } = this.get('position');\n                this.translate(x - x0, y - y0, opt);\n            } else {\n                this.set('position', { x, y }, opt);\n            }\n\n            return this;\n\n        } else { // Getter returns a geometry point.\n\n            const elementPosition = Point(this.get('position'));\n            return parentRelative\n                ? elementPosition.difference(parentPosition)\n                : elementPosition;\n        }\n    },\n\n    translate: function(tx, ty, opt) {\n\n        tx = tx || 0;\n        ty = ty || 0;\n\n        if (tx === 0 && ty === 0) {\n            // Like nothing has happened.\n            return this;\n        }\n\n        opt = opt || {};\n        // Pass the initiator of the translation.\n        opt.translateBy = opt.translateBy || this.id;\n\n        var position = this.get('position') || { x: 0, y: 0 };\n        var ra = opt.restrictedArea;\n        if (ra && opt.translateBy === this.id) {\n\n            if (typeof ra === 'function') {\n\n                var newPosition = ra.call(this, position.x + tx, position.y + ty, opt);\n\n                tx = newPosition.x - position.x;\n                ty = newPosition.y - position.y;\n\n            } else  {\n                // We are restricting the translation for the element itself only. We get\n                // the bounding box of the element including all its embeds.\n                // All embeds have to be translated the exact same way as the element.\n                var bbox = this.getBBox({ deep: true });\n                //- - - - - - - - - - - - -> ra.x + ra.width\n                // - - - -> position.x      |\n                // -> bbox.x\n                //                   |\n                //         \n                //                 |\n                //   \n                //                  |\n                //   <-dx->                     | restricted area right border\n                //         <-width->        |    translated element\n                //   <- - bbox.width - ->        embedded element\n                var dx = position.x - bbox.x;\n                var dy = position.y - bbox.y;\n                // Find the maximal/minimal coordinates that the element can be translated\n                // while complies the restrictions.\n                var x = Math.max(ra.x + dx, Math.min(ra.x + ra.width + dx - bbox.width, position.x + tx));\n                var y = Math.max(ra.y + dy, Math.min(ra.y + ra.height + dy - bbox.height, position.y + ty));\n                // recalculate the translation taking the restrictions into account.\n                tx = x - position.x;\n                ty = y - position.y;\n            }\n        }\n\n        var translatedPosition = {\n            x: position.x + tx,\n            y: position.y + ty\n        };\n\n        // To find out by how much an element was translated in event 'change:position' handlers.\n        opt.tx = tx;\n        opt.ty = ty;\n\n        if (opt.transition) {\n\n            if (!isObject(opt.transition)) opt.transition = {};\n\n            this.transition('position', translatedPosition, assign({}, opt.transition, {\n                valueFunction: interpolate.object\n            }));\n\n            // Recursively call `translate()` on all the embeds cells.\n            invoke(this.getEmbeddedCells(), 'translate', tx, ty, opt);\n\n        } else {\n\n            this.startBatch('translate', opt);\n            this.set('position', translatedPosition, opt);\n            invoke(this.getEmbeddedCells(), 'translate', tx, ty, opt);\n            this.stopBatch('translate', opt);\n        }\n\n        return this;\n    },\n\n    size: function(width, height, opt) {\n\n        var currentSize = this.get('size');\n        // Getter\n        // () signature\n        if (width === undefined) {\n            return {\n                width: currentSize.width,\n                height: currentSize.height\n            };\n        }\n        // Setter\n        // (size, opt) signature\n        if (isObject(width)) {\n            opt = height;\n            height = isNumber(width.height) ? width.height : currentSize.height;\n            width = isNumber(width.width) ? width.width : currentSize.width;\n        }\n\n        return this.resize(width, height, opt);\n    },\n\n    resize: function(width, height, opt) {\n\n        opt = opt || {};\n\n        this.startBatch('resize', opt);\n\n        if (opt.direction) {\n\n            var currentSize = this.get('size');\n\n            switch (opt.direction) {\n\n                case 'left':\n                case 'right':\n                    // Don't change height when resizing horizontally.\n                    height = currentSize.height;\n                    break;\n\n                case 'top':\n                case 'bottom':\n                    // Don't change width when resizing vertically.\n                    width = currentSize.width;\n                    break;\n            }\n\n            // Get the angle and clamp its value between 0 and 360 degrees.\n            var angle = normalizeAngle(this.get('angle') || 0);\n\n            // This is a rectangle in size of the un-rotated element.\n            var bbox = this.getBBox();\n\n            var origin;\n\n            if (angle) {\n\n                var quadrant = {\n                    'top-right': 0,\n                    'right': 0,\n                    'top-left': 1,\n                    'top': 1,\n                    'bottom-left': 2,\n                    'left': 2,\n                    'bottom-right': 3,\n                    'bottom': 3\n                }[opt.direction];\n\n                if (opt.absolute) {\n\n                    // We are taking the element's rotation into account\n                    quadrant += Math.floor((angle + 45) / 90);\n                    quadrant %= 4;\n                }\n\n                // Pick the corner point on the element, which meant to stay on its place before and\n                // after the rotation.\n                var fixedPoint = bbox[['bottomLeft', 'corner', 'topRight', 'origin'][quadrant]]();\n\n                // Find  an image of the previous indent point. This is the position, where is the\n                // point actually located on the screen.\n                var imageFixedPoint = Point(fixedPoint).rotate(bbox.center(), -angle);\n\n                // Every point on the element rotates around a circle with the centre of rotation\n                // in the middle of the element while the whole element is being rotated. That means\n                // that the distance from a point in the corner of the element (supposed its always rect) to\n                // the center of the element doesn't change during the rotation and therefore it equals\n                // to a distance on un-rotated element.\n                // We can find the distance as DISTANCE = (ELEMENTWIDTH/2)^2 + (ELEMENTHEIGHT/2)^2)^0.5.\n                var radius = Math.sqrt((width * width) + (height * height)) / 2;\n\n                // Now we are looking for an angle between x-axis and the line starting at image of fixed point\n                // and ending at the center of the element. We call this angle `alpha`.\n\n                // The image of a fixed point is located in n-th quadrant. For each quadrant passed\n                // going anti-clockwise we have to add 90 degrees. Note that the first quadrant has index 0.\n                //\n                // 3 | 2\n                // --c-- Quadrant positions around the element's center `c`\n                // 0 | 1\n                //\n                var alpha = quadrant * Math.PI / 2;\n\n                // Add an angle between the beginning of the current quadrant (line parallel with x-axis or y-axis\n                // going through the center of the element) and line crossing the indent of the fixed point and the center\n                // of the element. This is the angle we need but on the un-rotated element.\n                alpha += Math.atan(quadrant % 2 == 0 ? height / width : width / height);\n\n                // Lastly we have to deduct the original angle the element was rotated by and that's it.\n                alpha -= toRad(angle);\n\n                // With this angle and distance we can easily calculate the centre of the un-rotated element.\n                // Note that fromPolar constructor accepts an angle in radians.\n                var center = Point.fromPolar(radius, alpha, imageFixedPoint);\n\n                // The top left corner on the un-rotated element has to be half a width on the left\n                // and half a height to the top from the center. This will be the origin of rectangle\n                // we were looking for.\n                origin = Point(center).offset(width / -2, height / -2);\n\n            } else {\n                // calculation for the origin Point when there is no rotation of the element\n                origin = bbox.topLeft();\n\n                switch (opt.direction) {\n                    case 'top':\n                    case 'top-right':\n                        origin.offset(0, bbox.height - height);\n                        break;\n                    case 'left':\n                    case 'bottom-left':\n                        origin.offset(bbox.width -width, 0);\n                        break;\n                    case 'top-left':\n                        origin.offset(bbox.width - width, bbox.height - height);\n                        break;\n                }\n            }\n\n            // Resize the element (before re-positioning it).\n            this.set('size', { width: width, height: height }, opt);\n\n            // Finally, re-position the element.\n            this.position(origin.x, origin.y, opt);\n\n        } else {\n\n            // Resize the element.\n            this.set('size', { width: width, height: height }, opt);\n        }\n\n        this.stopBatch('resize', opt);\n\n        return this;\n    },\n\n    scale: function(sx, sy, origin, opt) {\n\n        var scaledBBox = this.getBBox().scale(sx, sy, origin);\n        this.startBatch('scale', opt);\n        this.position(scaledBBox.x, scaledBBox.y, opt);\n        this.resize(scaledBBox.width, scaledBBox.height, opt);\n        this.stopBatch('scale');\n        return this;\n    },\n\n    fitEmbeds: function(opt) {\n\n        return this.fitToChildren(opt);\n    },\n\n    fitToChildren: function(opt = {}) {\n\n        // Getting the children's size and position requires the collection.\n        // Cell.get('embeds') holds an array of cell ids only.\n        const { graph } = this;\n        if (!graph) throw new Error('Element must be part of a graph.');\n\n        const childElements = this.getEmbeddedCells().filter(cell => cell.isElement());\n        if (childElements.length === 0) return this;\n\n        this.startBatch('fit-embeds', opt);\n\n        if (opt.deep) {\n            // `opt.deep = true` means \"fit to all descendants\".\n            // As the first action of the fitting algorithm, recursively apply `fitToChildren()` on all descendants.\n            // - i.e. the algorithm is applied in reverse-depth order - start from deepest descendant, then go up (= this element).\n            invoke(childElements, 'fitToChildren', opt);\n        }\n\n        // Set new size and position of this element, based on:\n        // - union of bboxes of all children\n        // - inflated by given `opt.padding`\n        this._fitToElements(Object.assign({ elements: childElements }, opt));\n\n        this.stopBatch('fit-embeds');\n\n        return this;\n    },\n\n    fitParent: function(opt = {}) {\n\n        const { graph } = this;\n        if (!graph) throw new Error('Element must be part of a graph.');\n\n        // When `opt.deep = true`, we want `opt.terminator` to be the last ancestor processed.\n        // If the current element is `opt.terminator`, it means that this element has already been processed as parent so we can exit now.\n        if (opt.deep && opt.terminator && ((opt.terminator === this) || (opt.terminator === this.id))) return this;\n\n        const parentElement = this.getParentCell();\n        if (!parentElement || !parentElement.isElement()) return this;\n\n        // Get all children of parent element (i.e. this element + any sibling elements).\n        const siblingElements = parentElement.getEmbeddedCells().filter(cell => cell.isElement());\n        if (siblingElements.length === 0) return this;\n\n        this.startBatch('fit-parent', opt);\n\n        // Set new size and position of parent element, based on:\n        // - union of bboxes of all children of parent element (i.e. this element + any sibling elements)\n        // - inflated by given `opt.padding`\n        parentElement._fitToElements(Object.assign({ elements: siblingElements }, opt));\n\n        if (opt.deep) {\n            // `opt.deep = true` means \"fit all ancestors to their respective children\".\n            // As the last action of the fitting algorithm, recursively apply `fitParent()` on all ancestors.\n            // - i.e. the algorithm is applied in reverse-depth order - start from deepest descendant (= this element), then go up.\n            parentElement.fitParent(opt);\n        }\n\n        this.stopBatch('fit-parent');\n\n        return this;\n    },\n\n    // Assumption: This element is part of a graph.\n    _fitToElements: function(opt = {}) {\n\n        const elementsBBox = this.graph.getCellsBBox(opt.elements);\n        // If no `opt.elements` were provided, do nothing.\n        if (!elementsBBox) return;\n\n        const { expandOnly, shrinkOnly } = opt;\n        // This combination is meaningless, do nothing.\n        if (expandOnly && shrinkOnly) return;\n\n        // Calculate new size and position of this element based on:\n        // - union of bboxes of `opt.elements`\n        // - inflated by `opt.padding` (if not provided, all four properties = 0)\n        let { x, y, width, height } = elementsBBox;\n        const { left, right, top, bottom } = normalizeSides(opt.padding);\n        x -= left;\n        y -= top;\n        width += left + right;\n        height += bottom + top;\n        let resultBBox = new Rect(x, y, width, height);\n\n        if (expandOnly) {\n            // Non-shrinking is enforced by taking union of this element's current bbox with bbox calculated from `opt.elements`.\n            resultBBox = this.getBBox().union(resultBBox);\n\n        } else if (shrinkOnly) {\n            // Non-expansion is enforced by taking intersection of this element's current bbox with bbox calculated from `opt.elements`.\n            const intersectionBBox = this.getBBox().intersect(resultBBox);\n            // If all children are outside this element's current bbox, then `intersectionBBox` is `null` - does not make sense, do nothing.\n            if (!intersectionBBox) return;\n\n            resultBBox =  intersectionBBox;\n        }\n\n        // Set the new size and position of this element.\n        this.set({\n            position: { x: resultBBox.x, y: resultBBox.y },\n            size: { width: resultBBox.width, height: resultBBox.height }\n        }, opt);\n    },\n\n    // Rotate element by `angle` degrees, optionally around `origin` point.\n    // If `origin` is not provided, it is considered to be the center of the element.\n    // If `absolute` is `true`, the `angle` is considered is absolute, i.e. it is not\n    // the difference from the previous angle.\n    rotate: function(angle, absolute, origin, opt) {\n\n        if (origin) {\n\n            var center = this.getBBox().center();\n            var size = this.get('size');\n            var position = this.get('position');\n            center.rotate(origin, this.get('angle') - angle);\n            var dx = center.x - size.width / 2 - position.x;\n            var dy = center.y - size.height / 2 - position.y;\n            this.startBatch('rotate', { angle: angle, absolute: absolute, origin: origin });\n            this.position(position.x + dx, position.y + dy, opt);\n            this.rotate(angle, absolute, null, opt);\n            this.stopBatch('rotate');\n\n        } else {\n\n            this.set('angle', absolute ? angle : (this.get('angle') + angle) % 360, opt);\n        }\n\n        return this;\n    },\n\n    angle: function() {\n        return normalizeAngle(this.get('angle') || 0);\n    },\n\n    getBBox: function(opt = {}) {\n\n        const { graph, attributes } = this;\n        const { deep, rotate } = opt;\n\n        if (deep && graph) {\n            // Get all the embedded elements using breadth first algorithm.\n            const elements = this.getEmbeddedCells({ deep: true, breadthFirst: true });\n            // Add the model itself.\n            elements.push(this);\n            // Note: the default of getCellsBBox() is rotate=true and can't be\n            // changed without a breaking change\n            return graph.getCellsBBox(elements, opt);\n        }\n\n        const { angle = 0, position: { x, y }, size: { width, height }} = attributes;\n        const bbox = new Rect(x, y, width, height);\n        if (rotate) {\n            bbox.rotateAroundCenter(angle);\n        }\n        return bbox;\n    },\n\n    getPointFromConnectedLink: function(link, endType) {\n        // Center of the model\n        var bbox = this.getBBox();\n        var center = bbox.center();\n        // Center of a port\n        var endDef = link.get(endType);\n        if (!endDef) return center;\n        var portId = endDef.port;\n        if (!portId || !this.hasPort(portId)) return center;\n        var portGroup = this.portProp(portId, ['group']);\n        var portsPositions = this.getPortsPositions(portGroup);\n        var portCenter = new Point(portsPositions[portId]).offset(bbox.origin());\n        var angle = this.angle();\n        if (angle) portCenter.rotate(center, -angle);\n        return portCenter;\n    }\n});\n\nassign(Element.prototype, elementPortPrototype);\n\n","import Backbone from 'backbone';\nimport * as util from '../util/index.mjs';\nimport * as g from '../g/index.mjs';\n\nimport { Link } from './Link.mjs';\nimport { Element } from './Element.mjs';\nimport { wrappers, wrapWith } from '../util/wrappers.mjs';\nimport { cloneCells } from '../util/index.mjs';\n\nconst GraphCells = Backbone.Collection.extend({\n\n    initialize: function(models, opt) {\n\n        // Set the optional namespace where all model classes are defined.\n        if (opt.cellNamespace) {\n            this.cellNamespace = opt.cellNamespace;\n        } else {\n            /* eslint-disable no-undef */\n            this.cellNamespace = typeof joint !== 'undefined' && util.has(joint, 'shapes') ? joint.shapes : null;\n            /* eslint-enable no-undef */\n        }\n\n\n        this.graph = opt.graph;\n    },\n\n    model: function(attrs, opt) {\n\n        var collection = opt.collection;\n        var namespace = collection.cellNamespace;\n\n        // Find the model class in the namespace or use the default one.\n        var ModelClass = (attrs.type === 'link')\n            ? Link\n            : util.getByPath(namespace, attrs.type, '.') || Element;\n\n        var cell = new ModelClass(attrs, opt);\n        // Add a reference to the graph. It is necessary to do this here because this is the earliest place\n        // where a new model is created from a plain JS object. For other objects, see `joint.dia.Graph>>_prepareCell()`.\n        if (!opt.dry) {\n            cell.graph = collection.graph;\n        }\n\n        return cell;\n    },\n\n    // `comparator` makes it easy to sort cells based on their `z` index.\n    comparator: function(model) {\n\n        return model.get('z') || 0;\n    }\n});\n\n\nexport const Graph = Backbone.Model.extend({\n\n    initialize: function(attrs, opt) {\n\n        opt = opt || {};\n\n        // Passing `cellModel` function in the options object to graph allows for\n        // setting models based on attribute objects. This is especially handy\n        // when processing JSON graphs that are in a different than JointJS format.\n        var cells = new GraphCells([], {\n            model: opt.cellModel,\n            cellNamespace: opt.cellNamespace,\n            graph: this\n        });\n        Backbone.Model.prototype.set.call(this, 'cells', cells);\n\n        // Make all the events fired in the `cells` collection available.\n        // to the outside world.\n        cells.on('all', this.trigger, this);\n\n        // Backbone automatically doesn't trigger re-sort if models attributes are changed later when\n        // they're already in the collection. Therefore, we're triggering sort manually here.\n        this.on('change:z', this._sortOnChangeZ, this);\n\n        // `joint.dia.Graph` keeps an internal data structure (an adjacency list)\n        // for fast graph queries. All changes that affect the structure of the graph\n        // must be reflected in the `al` object. This object provides fast answers to\n        // questions such as \"what are the neighbours of this node\" or \"what\n        // are the sibling links of this link\".\n\n        // Outgoing edges per node. Note that we use a hash-table for the list\n        // of outgoing edges for a faster lookup.\n        // [nodeId] -> Object [edgeId] -> true\n        this._out = {};\n        // Ingoing edges per node.\n        // [nodeId] -> Object [edgeId] -> true\n        this._in = {};\n        // `_nodes` is useful for quick lookup of all the elements in the graph, without\n        // having to go through the whole cells array.\n        // [node ID] -> true\n        this._nodes = {};\n        // `_edges` is useful for quick lookup of all the links in the graph, without\n        // having to go through the whole cells array.\n        // [edgeId] -> true\n        this._edges = {};\n\n        this._batches = {};\n\n        cells.on('add', this._restructureOnAdd, this);\n        cells.on('remove', this._restructureOnRemove, this);\n        cells.on('reset', this._restructureOnReset, this);\n        cells.on('change:source', this._restructureOnChangeSource, this);\n        cells.on('change:target', this._restructureOnChangeTarget, this);\n        cells.on('remove', this._removeCell, this);\n    },\n\n    _sortOnChangeZ: function() {\n\n        this.get('cells').sort();\n    },\n\n    _restructureOnAdd: function(cell) {\n\n        if (cell.isLink()) {\n            this._edges[cell.id] = true;\n            var { source, target } = cell.attributes;\n            if (source.id) {\n                (this._out[source.id] || (this._out[source.id] = {}))[cell.id] = true;\n            }\n            if (target.id) {\n                (this._in[target.id] || (this._in[target.id] = {}))[cell.id] = true;\n            }\n        } else {\n            this._nodes[cell.id] = true;\n        }\n    },\n\n    _restructureOnRemove: function(cell) {\n\n        if (cell.isLink()) {\n            delete this._edges[cell.id];\n            var { source, target } = cell.attributes;\n            if (source.id && this._out[source.id] && this._out[source.id][cell.id]) {\n                delete this._out[source.id][cell.id];\n            }\n            if (target.id && this._in[target.id] && this._in[target.id][cell.id]) {\n                delete this._in[target.id][cell.id];\n            }\n        } else {\n            delete this._nodes[cell.id];\n        }\n    },\n\n    _restructureOnReset: function(cells) {\n\n        // Normalize into an array of cells. The original `cells` is GraphCells Backbone collection.\n        cells = cells.models;\n\n        this._out = {};\n        this._in = {};\n        this._nodes = {};\n        this._edges = {};\n\n        cells.forEach(this._restructureOnAdd, this);\n    },\n\n    _restructureOnChangeSource: function(link) {\n\n        var prevSource = link.previous('source');\n        if (prevSource.id && this._out[prevSource.id]) {\n            delete this._out[prevSource.id][link.id];\n        }\n        var source = link.attributes.source;\n        if (source.id) {\n            (this._out[source.id] || (this._out[source.id] = {}))[link.id] = true;\n        }\n    },\n\n    _restructureOnChangeTarget: function(link) {\n\n        var prevTarget = link.previous('target');\n        if (prevTarget.id && this._in[prevTarget.id]) {\n            delete this._in[prevTarget.id][link.id];\n        }\n        var target = link.get('target');\n        if (target.id) {\n            (this._in[target.id] || (this._in[target.id] = {}))[link.id] = true;\n        }\n    },\n\n    // Return all outbound edges for the node. Return value is an object\n    // of the form: [edgeId] -> true\n    getOutboundEdges: function(node) {\n\n        return (this._out && this._out[node]) || {};\n    },\n\n    // Return all inbound edges for the node. Return value is an object\n    // of the form: [edgeId] -> true\n    getInboundEdges: function(node) {\n\n        return (this._in && this._in[node]) || {};\n    },\n\n    toJSON: function() {\n\n        // Backbone does not recursively call `toJSON()` on attributes that are themselves models/collections.\n        // It just clones the attributes. Therefore, we must call `toJSON()` on the cells collection explicitly.\n        var json = Backbone.Model.prototype.toJSON.apply(this, arguments);\n        json.cells = this.get('cells').toJSON();\n        return json;\n    },\n\n    fromJSON: function(json, opt) {\n\n        if (!json.cells) {\n\n            throw new Error('Graph JSON must contain cells array.');\n        }\n\n        return this.set(json, opt);\n    },\n\n    set: function(key, val, opt) {\n\n        var attrs;\n\n        // Handle both `key`, value and {key: value} style arguments.\n        if (typeof key === 'object') {\n            attrs = key;\n            opt = val;\n        } else {\n            (attrs = {})[key] = val;\n        }\n\n        // Make sure that `cells` attribute is handled separately via resetCells().\n        if (attrs.hasOwnProperty('cells')) {\n            this.resetCells(attrs.cells, opt);\n            attrs = util.omit(attrs, 'cells');\n        }\n\n        // The rest of the attributes are applied via original set method.\n        return Backbone.Model.prototype.set.call(this, attrs, opt);\n    },\n\n    clear: function(opt) {\n\n        opt = util.assign({}, opt, { clear: true });\n\n        var collection = this.get('cells');\n\n        if (collection.length === 0) return this;\n\n        this.startBatch('clear', opt);\n\n        // The elements come after the links.\n        var cells = collection.sortBy(function(cell) {\n            return cell.isLink() ? 1 : 2;\n        });\n\n        do {\n\n            // Remove all the cells one by one.\n            // Note that all the links are removed first, so it's\n            // safe to remove the elements without removing the connected\n            // links first.\n            cells.shift().remove(opt);\n\n        } while (cells.length > 0);\n\n        this.stopBatch('clear');\n\n        return this;\n    },\n\n    _prepareCell: function(cell, opt) {\n\n        var attrs;\n        if (cell instanceof Backbone.Model) {\n            attrs = cell.attributes;\n            if (!cell.graph && (!opt || !opt.dry)) {\n                // An element can not be member of more than one graph.\n                // A cell stops being the member of the graph after it's explicitly removed.\n                cell.graph = this;\n            }\n        } else {\n            // In case we're dealing with a plain JS object, we have to set the reference\n            // to the `graph` right after the actual model is created. This happens in the `model()` function\n            // of `joint.dia.GraphCells`.\n            attrs = cell;\n        }\n\n        if (!util.isString(attrs.type)) {\n            throw new TypeError('dia.Graph: cell type must be a string.');\n        }\n\n        return cell;\n    },\n\n    minZIndex: function() {\n\n        var firstCell = this.get('cells').first();\n        return firstCell ? (firstCell.get('z') || 0) : 0;\n    },\n\n    maxZIndex: function() {\n\n        var lastCell = this.get('cells').last();\n        return lastCell ? (lastCell.get('z') || 0) : 0;\n    },\n\n    addCell: function(cell, opt) {\n\n        if (Array.isArray(cell)) {\n\n            return this.addCells(cell, opt);\n        }\n\n        if (cell instanceof Backbone.Model) {\n\n            if (!cell.has('z')) {\n                cell.set('z', this.maxZIndex() + 1);\n            }\n\n        } else if (cell.z === undefined) {\n\n            cell.z = this.maxZIndex() + 1;\n        }\n\n        this.get('cells').add(this._prepareCell(cell, opt), opt || {});\n\n        return this;\n    },\n\n    addCells: function(cells, opt) {\n\n        if (cells.length === 0) return this;\n\n        cells = util.flattenDeep(cells);\n        opt.maxPosition = opt.position = cells.length - 1;\n\n        this.startBatch('add', opt);\n        cells.forEach(function(cell) {\n            this.addCell(cell, opt);\n            opt.position--;\n        }, this);\n        this.stopBatch('add', opt);\n\n        return this;\n    },\n\n    // When adding a lot of cells, it is much more efficient to\n    // reset the entire cells collection in one go.\n    // Useful for bulk operations and optimizations.\n    resetCells: function(cells, opt) {\n\n        var preparedCells = util.toArray(cells).map(function(cell) {\n            return this._prepareCell(cell, opt);\n        }, this);\n        this.get('cells').reset(preparedCells, opt);\n\n        return this;\n    },\n\n    removeCells: function(cells, opt) {\n\n        if (cells.length) {\n\n            this.startBatch('remove');\n            util.invoke(cells, 'remove', opt);\n            this.stopBatch('remove');\n        }\n\n        return this;\n    },\n\n    _removeCell: function(cell, collection, options) {\n\n        options = options || {};\n\n        if (!options.clear) {\n            // Applications might provide a `disconnectLinks` option set to `true` in order to\n            // disconnect links when a cell is removed rather then removing them. The default\n            // is to remove all the associated links.\n            if (options.disconnectLinks) {\n\n                this.disconnectLinks(cell, options);\n\n            } else {\n\n                this.removeLinks(cell, options);\n            }\n        }\n        // Silently remove the cell from the cells collection. Silently, because\n        // `joint.dia.Cell.prototype.remove` already triggers the `remove` event which is\n        // then propagated to the graph model. If we didn't remove the cell silently, two `remove` events\n        // would be triggered on the graph model.\n        this.get('cells').remove(cell, { silent: true });\n\n        if (cell.graph === this) {\n            // Remove the element graph reference only if the cell is the member of this graph.\n            cell.graph = null;\n        }\n    },\n\n    // Get a cell by `id`.\n    getCell: function(id) {\n\n        return this.get('cells').get(id);\n    },\n\n    getCells: function() {\n\n        return this.get('cells').toArray();\n    },\n\n    getElements: function() {\n\n        return this.get('cells').filter(cell => cell.isElement());\n    },\n\n    getLinks: function() {\n\n        return this.get('cells').filter(cell => cell.isLink());\n    },\n\n    getFirstCell: function() {\n\n        return this.get('cells').first();\n    },\n\n    getLastCell: function() {\n\n        return this.get('cells').last();\n    },\n\n    // Get all inbound and outbound links connected to the cell `model`.\n    getConnectedLinks: function(model, opt) {\n\n        opt = opt || {};\n\n        var indirect = opt.indirect;\n        var inbound = opt.inbound;\n        var outbound = opt.outbound;\n        if ((inbound === undefined) && (outbound === undefined)) {\n            inbound = outbound = true;\n        }\n\n        // the final array of connected link models\n        var links = [];\n        // a hash table of connected edges of the form: [edgeId] -> true\n        // used for quick lookups to check if we already added a link\n        var edges = {};\n\n        if (outbound) {\n            addOutbounds(this, model);\n        }\n        if (inbound) {\n            addInbounds(this, model);\n        }\n\n        function addOutbounds(graph, model) {\n            util.forIn(graph.getOutboundEdges(model.id), function(_, edge) {\n                // skip links that were already added\n                // (those must be self-loop links)\n                // (because they are inbound and outbound edges of the same two elements)\n                if (edges[edge]) return;\n                var link = graph.getCell(edge);\n                links.push(link);\n                edges[edge] = true;\n                if (indirect) {\n                    if (inbound) addInbounds(graph, link);\n                    if (outbound) addOutbounds(graph, link);\n                }\n            }.bind(graph));\n            if (indirect && model.isLink()) {\n                var outCell = model.getTargetCell();\n                if (outCell && outCell.isLink()) {\n                    if (!edges[outCell.id]) {\n                        links.push(outCell);\n                        addOutbounds(graph, outCell);\n                    }\n                }\n            }\n        }\n\n        function addInbounds(graph, model) {\n            util.forIn(graph.getInboundEdges(model.id), function(_, edge) {\n                // skip links that were already added\n                // (those must be self-loop links)\n                // (because they are inbound and outbound edges of the same two elements)\n                if (edges[edge]) return;\n                var link = graph.getCell(edge);\n                links.push(link);\n                edges[edge] = true;\n                if (indirect) {\n                    if (inbound) addInbounds(graph, link);\n                    if (outbound) addOutbounds(graph, link);\n                }\n            }.bind(graph));\n            if (indirect && model.isLink()) {\n                var inCell = model.getSourceCell();\n                if (inCell && inCell.isLink()) {\n                    if (!edges[inCell.id]) {\n                        links.push(inCell);\n                        addInbounds(graph, inCell);\n                    }\n                }\n            }\n        }\n\n        // if `deep` option is `true`, check also all the links that are connected to any of the descendant cells\n        if (opt.deep) {\n\n            var embeddedCells = model.getEmbeddedCells({ deep: true });\n\n            // in the first round, we collect all the embedded elements\n            var embeddedElements = {};\n            embeddedCells.forEach(function(cell) {\n                if (cell.isElement()) {\n                    embeddedElements[cell.id] = true;\n                }\n            });\n\n            embeddedCells.forEach(function(cell) {\n                if (cell.isLink()) return;\n                if (outbound) {\n                    util.forIn(this.getOutboundEdges(cell.id), function(exists, edge) {\n                        if (!edges[edge]) {\n                            var edgeCell = this.getCell(edge);\n                            var { source, target } = edgeCell.attributes;\n                            var sourceId = source.id;\n                            var targetId = target.id;\n\n                            // if `includeEnclosed` option is falsy, skip enclosed links\n                            if (!opt.includeEnclosed\n                                && (sourceId && embeddedElements[sourceId])\n                                && (targetId && embeddedElements[targetId])) {\n                                return;\n                            }\n\n                            links.push(this.getCell(edge));\n                            edges[edge] = true;\n                        }\n                    }.bind(this));\n                }\n                if (inbound) {\n                    util.forIn(this.getInboundEdges(cell.id), function(exists, edge) {\n                        if (!edges[edge]) {\n                            var edgeCell = this.getCell(edge);\n                            var { source, target } = edgeCell.attributes;\n                            var sourceId = source.id;\n                            var targetId = target.id;\n\n                            // if `includeEnclosed` option is falsy, skip enclosed links\n                            if (!opt.includeEnclosed\n                                && (sourceId && embeddedElements[sourceId])\n                                && (targetId && embeddedElements[targetId])) {\n                                return;\n                            }\n\n                            links.push(this.getCell(edge));\n                            edges[edge] = true;\n                        }\n                    }.bind(this));\n                }\n            }, this);\n        }\n\n        return links;\n    },\n\n    getNeighbors: function(model, opt) {\n\n        opt || (opt = {});\n\n        var inbound = opt.inbound;\n        var outbound = opt.outbound;\n        if (inbound === undefined && outbound === undefined) {\n            inbound = outbound = true;\n        }\n\n        var neighbors = this.getConnectedLinks(model, opt).reduce(function(res, link) {\n\n            var { source, target } = link.attributes;\n            var loop = link.hasLoop(opt);\n\n            // Discard if it is a point, or if the neighbor was already added.\n            if (inbound && util.has(source, 'id') && !res[source.id]) {\n\n                var sourceElement = this.getCell(source.id);\n                if (sourceElement.isElement()) {\n                    if (loop || (sourceElement && sourceElement !== model && (!opt.deep || !sourceElement.isEmbeddedIn(model)))) {\n                        res[source.id] = sourceElement;\n                    }\n                }\n            }\n\n            // Discard if it is a point, or if the neighbor was already added.\n            if (outbound && util.has(target, 'id') && !res[target.id]) {\n\n                var targetElement = this.getCell(target.id);\n                if (targetElement.isElement()) {\n                    if (loop || (targetElement && targetElement !== model && (!opt.deep || !targetElement.isEmbeddedIn(model)))) {\n                        res[target.id] = targetElement;\n                    }\n                }\n            }\n\n            return res;\n        }.bind(this), {});\n\n        if (model.isLink()) {\n            if (inbound) {\n                var sourceCell = model.getSourceCell();\n                if (sourceCell && sourceCell.isElement() && !neighbors[sourceCell.id]) {\n                    neighbors[sourceCell.id] = sourceCell;\n                }\n            }\n            if (outbound) {\n                var targetCell = model.getTargetCell();\n                if (targetCell && targetCell.isElement() && !neighbors[targetCell.id]) {\n                    neighbors[targetCell.id] = targetCell;\n                }\n            }\n        }\n\n        return util.toArray(neighbors);\n    },\n\n    getCommonAncestor: function(/* cells */) {\n\n        var cellsAncestors = Array.from(arguments).map(function(cell) {\n\n            var ancestors = [];\n            var parentId = cell.get('parent');\n\n            while (parentId) {\n\n                ancestors.push(parentId);\n                parentId = this.getCell(parentId).get('parent');\n            }\n\n            return ancestors;\n\n        }, this);\n\n        cellsAncestors = cellsAncestors.sort(function(a, b) {\n            return a.length - b.length;\n        });\n\n        var commonAncestor = util.toArray(cellsAncestors.shift()).find(function(ancestor) {\n            return cellsAncestors.every(function(cellAncestors) {\n                return cellAncestors.includes(ancestor);\n            });\n        });\n\n        return this.getCell(commonAncestor);\n    },\n\n    // Find the whole branch starting at `element`.\n    // If `opt.deep` is `true`, take into account embedded elements too.\n    // If `opt.breadthFirst` is `true`, use the Breadth-first search algorithm, otherwise use Depth-first search.\n    getSuccessors: function(element, opt) {\n\n        opt = opt || {};\n        var res = [];\n        // Modify the options so that it includes the `outbound` neighbors only. In other words, search forwards.\n        this.search(element, function(el) {\n            if (el !== element) {\n                res.push(el);\n            }\n        }, util.assign({}, opt, { outbound: true }));\n        return res;\n    },\n\n    cloneCells: cloneCells,\n    // Clone the whole subgraph (including all the connected links whose source/target is in the subgraph).\n    // If `opt.deep` is `true`, also take into account all the embedded cells of all the subgraph cells.\n    // Return a map of the form: [original cell ID] -> [clone].\n    cloneSubgraph: function(cells, opt) {\n\n        var subgraph = this.getSubgraph(cells, opt);\n        return this.cloneCells(subgraph);\n    },\n\n    // Return `cells` and all the connected links that connect cells in the `cells` array.\n    // If `opt.deep` is `true`, return all the cells including all their embedded cells\n    // and all the links that connect any of the returned cells.\n    // For example, for a single shallow element, the result is that very same element.\n    // For two elements connected with a link: `A --- L ---> B`, the result for\n    // `getSubgraph([A, B])` is `[A, L, B]`. The same goes for `getSubgraph([L])`, the result is again `[A, L, B]`.\n    getSubgraph: function(cells, opt) {\n\n        opt = opt || {};\n\n        var subgraph = [];\n        // `cellMap` is used for a quick lookup of existence of a cell in the `cells` array.\n        var cellMap = {};\n        var elements = [];\n        var links = [];\n\n        util.toArray(cells).forEach(function(cell) {\n            if (!cellMap[cell.id]) {\n                subgraph.push(cell);\n                cellMap[cell.id] = cell;\n                if (cell.isLink()) {\n                    links.push(cell);\n                } else {\n                    elements.push(cell);\n                }\n            }\n\n            if (opt.deep) {\n                var embeds = cell.getEmbeddedCells({ deep: true });\n                embeds.forEach(function(embed) {\n                    if (!cellMap[embed.id]) {\n                        subgraph.push(embed);\n                        cellMap[embed.id] = embed;\n                        if (embed.isLink()) {\n                            links.push(embed);\n                        } else {\n                            elements.push(embed);\n                        }\n                    }\n                });\n            }\n        });\n\n        links.forEach(function(link) {\n            // For links, return their source & target (if they are elements - not points).\n            var { source, target } = link.attributes;\n            if (source.id && !cellMap[source.id]) {\n                var sourceElement = this.getCell(source.id);\n                subgraph.push(sourceElement);\n                cellMap[sourceElement.id] = sourceElement;\n                elements.push(sourceElement);\n            }\n            if (target.id && !cellMap[target.id]) {\n                var targetElement = this.getCell(target.id);\n                subgraph.push(this.getCell(target.id));\n                cellMap[targetElement.id] = targetElement;\n                elements.push(targetElement);\n            }\n        }, this);\n\n        elements.forEach(function(element) {\n            // For elements, include their connected links if their source/target is in the subgraph;\n            var links = this.getConnectedLinks(element, opt);\n            links.forEach(function(link) {\n                var { source, target } = link.attributes;\n                if (!cellMap[link.id] && source.id && cellMap[source.id] && target.id && cellMap[target.id]) {\n                    subgraph.push(link);\n                    cellMap[link.id] = link;\n                }\n            });\n        }, this);\n\n        return subgraph;\n    },\n\n    // Find all the predecessors of `element`. This is a reverse operation of `getSuccessors()`.\n    // If `opt.deep` is `true`, take into account embedded elements too.\n    // If `opt.breadthFirst` is `true`, use the Breadth-first search algorithm, otherwise use Depth-first search.\n    getPredecessors: function(element, opt) {\n\n        opt = opt || {};\n        var res = [];\n        // Modify the options so that it includes the `inbound` neighbors only. In other words, search backwards.\n        this.search(element, function(el) {\n            if (el !== element) {\n                res.push(el);\n            }\n        }, util.assign({}, opt, { inbound: true }));\n        return res;\n    },\n\n    // Perform search on the graph.\n    // If `opt.breadthFirst` is `true`, use the Breadth-first Search algorithm, otherwise use Depth-first search.\n    // By setting `opt.inbound` to `true`, you can reverse the direction of the search.\n    // If `opt.deep` is `true`, take into account embedded elements too.\n    // `iteratee` is a function of the form `function(element) {}`.\n    // If `iteratee` explicitly returns `false`, the searching stops.\n    search: function(element, iteratee, opt) {\n\n        opt = opt || {};\n        if (opt.breadthFirst) {\n            this.bfs(element, iteratee, opt);\n        } else {\n            this.dfs(element, iteratee, opt);\n        }\n    },\n\n    // Breadth-first search.\n    // If `opt.deep` is `true`, take into account embedded elements too.\n    // If `opt.inbound` is `true`, reverse the search direction (it's like reversing all the link directions).\n    // `iteratee` is a function of the form `function(element, distance) {}`.\n    // where `element` is the currently visited element and `distance` is the distance of that element\n    // from the root `element` passed the `bfs()`, i.e. the element we started the search from.\n    // Note that the `distance` is not the shortest or longest distance, it is simply the number of levels\n    // crossed till we visited the `element` for the first time. It is especially useful for tree graphs.\n    // If `iteratee` explicitly returns `false`, the searching stops.\n    bfs: function(element, iteratee, opt = {}) {\n\n        const visited = {};\n        const distance = {};\n        const queue = [];\n\n        queue.push(element);\n        distance[element.id] = 0;\n\n        while (queue.length > 0) {\n            var next = queue.shift();\n            if (visited[next.id]) continue;\n            visited[next.id] = true;\n            if (iteratee.call(this, next, distance[next.id]) === false) continue;\n            const neighbors = this.getNeighbors(next, opt);\n            for (let i = 0, n = neighbors.length; i < n; i++) {\n                const neighbor = neighbors[i];\n                distance[neighbor.id] = distance[next.id] + 1;\n                queue.push(neighbor);\n            }\n        }\n    },\n\n    // Depth-first search.\n    // If `opt.deep` is `true`, take into account embedded elements too.\n    // If `opt.inbound` is `true`, reverse the search direction (it's like reversing all the link directions).\n    // `iteratee` is a function of the form `function(element, distance) {}`.\n    // If `iteratee` explicitly returns `false`, the search stops.\n    dfs: function(element, iteratee, opt = {}) {\n\n        const visited = {};\n        const distance = {};\n        const queue = [];\n\n        queue.push(element);\n        distance[element.id] = 0;\n\n        while (queue.length > 0) {\n            const next = queue.pop();\n            if (visited[next.id]) continue;\n            visited[next.id] = true;\n            if (iteratee.call(this, next, distance[next.id]) === false) continue;\n            const neighbors = this.getNeighbors(next, opt);\n            const lastIndex = queue.length;\n            for (let i = 0, n = neighbors.length; i < n; i++) {\n                const neighbor = neighbors[i];\n                distance[neighbor.id] = distance[next.id] + 1;\n                queue.splice(lastIndex, 0, neighbor);\n            }\n        }\n    },\n\n    // Get all the roots of the graph. Time complexity: O(|V|).\n    getSources: function() {\n\n        var sources = [];\n        util.forIn(this._nodes, function(exists, node) {\n            if (!this._in[node] || util.isEmpty(this._in[node])) {\n                sources.push(this.getCell(node));\n            }\n        }.bind(this));\n        return sources;\n    },\n\n    // Get all the leafs of the graph. Time complexity: O(|V|).\n    getSinks: function() {\n\n        var sinks = [];\n        util.forIn(this._nodes, function(exists, node) {\n            if (!this._out[node] || util.isEmpty(this._out[node])) {\n                sinks.push(this.getCell(node));\n            }\n        }.bind(this));\n        return sinks;\n    },\n\n    // Return `true` if `element` is a root. Time complexity: O(1).\n    isSource: function(element) {\n\n        return !this._in[element.id] || util.isEmpty(this._in[element.id]);\n    },\n\n    // Return `true` if `element` is a leaf. Time complexity: O(1).\n    isSink: function(element) {\n\n        return !this._out[element.id] || util.isEmpty(this._out[element.id]);\n    },\n\n    // Return `true` is `elementB` is a successor of `elementA`. Return `false` otherwise.\n    isSuccessor: function(elementA, elementB) {\n\n        var isSuccessor = false;\n        this.search(elementA, function(element) {\n            if (element === elementB && element !== elementA) {\n                isSuccessor = true;\n                return false;\n            }\n        }, { outbound: true });\n        return isSuccessor;\n    },\n\n    // Return `true` is `elementB` is a predecessor of `elementA`. Return `false` otherwise.\n    isPredecessor: function(elementA, elementB) {\n\n        var isPredecessor = false;\n        this.search(elementA, function(element) {\n            if (element === elementB && element !== elementA) {\n                isPredecessor = true;\n                return false;\n            }\n        }, { inbound: true });\n        return isPredecessor;\n    },\n\n    // Return `true` is `elementB` is a neighbor of `elementA`. Return `false` otherwise.\n    // `opt.deep` controls whether to take into account embedded elements as well. See `getNeighbors()`\n    // for more details.\n    // If `opt.outbound` is set to `true`, return `true` only if `elementB` is a successor neighbor.\n    // Similarly, if `opt.inbound` is set to `true`, return `true` only if `elementB` is a predecessor neighbor.\n    isNeighbor: function(elementA, elementB, opt) {\n\n        opt = opt || {};\n\n        var inbound = opt.inbound;\n        var outbound = opt.outbound;\n        if ((inbound === undefined) && (outbound === undefined)) {\n            inbound = outbound = true;\n        }\n\n        var isNeighbor = false;\n\n        this.getConnectedLinks(elementA, opt).forEach(function(link) {\n\n            var { source, target } = link.attributes;\n\n            // Discard if it is a point.\n            if (inbound && util.has(source, 'id') && (source.id === elementB.id)) {\n                isNeighbor = true;\n                return false;\n            }\n\n            // Discard if it is a point, or if the neighbor was already added.\n            if (outbound && util.has(target, 'id') && (target.id === elementB.id)) {\n                isNeighbor = true;\n                return false;\n            }\n        });\n\n        return isNeighbor;\n    },\n\n    // Disconnect links connected to the cell `model`.\n    disconnectLinks: function(model, opt) {\n\n        this.getConnectedLinks(model).forEach(function(link) {\n\n            link.set((link.attributes.source.id === model.id ? 'source' : 'target'), { x: 0, y: 0 }, opt);\n        });\n    },\n\n    // Remove links connected to the cell `model` completely.\n    removeLinks: function(model, opt) {\n\n        util.invoke(this.getConnectedLinks(model), 'remove', opt);\n    },\n\n    // Find all elements at given point\n    findModelsFromPoint: function(p) {\n        return this.getElements().filter(el => el.getBBox({ rotate: true }).containsPoint(p));\n    },\n\n    // Find all elements in given area\n    findModelsInArea: function(rect, opt = {}) {\n        const r = new g.Rect(rect);\n        const { strict = false } = opt;\n        const method = strict ? 'containsRect' : 'intersect';\n        return this.getElements().filter(el => r[method](el.getBBox({ rotate: true })));\n    },\n\n    // Find all elements under the given element.\n    findModelsUnderElement: function(element, opt = {}) {\n        const { searchBy = 'bbox' } = opt;\n        const bbox = element.getBBox().rotateAroundCenter(element.angle());\n        const elements = (searchBy === 'bbox')\n            ? this.findModelsInArea(bbox)\n            : this.findModelsFromPoint(util.getRectPoint(bbox, searchBy));\n        // don't account element itself or any of its descendants\n        return elements.filter(el => element.id !== el.id && !el.isEmbeddedIn(element));\n    },\n\n    // Return bounding box of all elements.\n    getBBox: function() {\n\n        return this.getCellsBBox(this.getCells());\n    },\n\n    // Return the bounding box of all cells in array provided.\n    getCellsBBox: function(cells, opt = {}) {\n        const { rotate = true } = opt;\n        return util.toArray(cells).reduce(function(memo, cell) {\n            const rect = cell.getBBox({ rotate });\n            if (!rect) return memo;\n            if (memo) {\n                return memo.union(rect);\n            }\n            return rect;\n        }, null);\n    },\n\n    translate: function(dx, dy, opt) {\n\n        // Don't translate cells that are embedded in any other cell.\n        var cells = this.getCells().filter(function(cell) {\n            return !cell.isEmbedded();\n        });\n\n        util.invoke(cells, 'translate', dx, dy, opt);\n\n        return this;\n    },\n\n    resize: function(width, height, opt) {\n\n        return this.resizeCells(width, height, this.getCells(), opt);\n    },\n\n    resizeCells: function(width, height, cells, opt) {\n\n        // `getBBox` method returns `null` if no elements provided.\n        // i.e. cells can be an array of links\n        var bbox = this.getCellsBBox(cells);\n        if (bbox) {\n            var sx = Math.max(width / bbox.width, 0);\n            var sy = Math.max(height / bbox.height, 0);\n            util.invoke(cells, 'scale', sx, sy, bbox.origin(), opt);\n        }\n\n        return this;\n    },\n\n    startBatch: function(name, data) {\n\n        data = data || {};\n        this._batches[name] = (this._batches[name] || 0) + 1;\n\n        return this.trigger('batch:start', util.assign({}, data, { batchName: name }));\n    },\n\n    stopBatch: function(name, data) {\n\n        data = data || {};\n        this._batches[name] = (this._batches[name] || 0) - 1;\n\n        return this.trigger('batch:stop', util.assign({}, data, { batchName: name }));\n    },\n\n    hasActiveBatch: function(name) {\n\n        const batches = this._batches;\n        let names;\n\n        if (arguments.length === 0) {\n            names = Object.keys(batches);\n        } else if (Array.isArray(name)) {\n            names = name;\n        } else {\n            names = [name];\n        }\n\n        return names.some((batch) => batches[batch] > 0);\n    }\n\n}, {\n\n    validations: {\n\n        multiLinks: function(graph, link) {\n\n            // Do not allow multiple links to have the same source and target.\n            var { source, target } = link.attributes;\n\n            if (source.id && target.id) {\n\n                var sourceModel = link.getSourceCell();\n                if (sourceModel) {\n\n                    var connectedLinks = graph.getConnectedLinks(sourceModel, { outbound: true });\n                    var sameLinks = connectedLinks.filter(function(_link) {\n\n                        var { source: _source, target: _target } = _link.attributes;\n                        return _source && _source.id === source.id &&\n                            (!_source.port || (_source.port === source.port)) &&\n                            _target && _target.id === target.id &&\n                            (!_target.port || (_target.port === target.port));\n\n                    });\n\n                    if (sameLinks.length > 1) {\n                        return false;\n                    }\n                }\n            }\n\n            return true;\n        },\n\n        linkPinning: function(_graph, link) {\n            var { source, target } = link.attributes;\n            return source.id && target.id;\n        }\n    }\n\n});\n\nwrapWith(Graph.prototype, ['resetCells', 'addCells', 'removeCells'], wrappers.cells);\n","import Backbone from 'backbone';\nimport $ from 'jquery';\nimport * as util from '../util/index.mjs';\nimport V from '../V/index.mjs';\nimport { config } from '../config/index.mjs';\n\nexport const views = {};\n\nexport const View = Backbone.View.extend({\n\n    options: {},\n    theme: null,\n    themeClassNamePrefix: util.addClassNamePrefix('theme-'),\n    requireSetThemeOverride: false,\n    defaultTheme: config.defaultTheme,\n    children: null,\n    childNodes: null,\n\n    DETACHABLE: true,\n    UPDATE_PRIORITY: 2,\n    FLAG_INSERT: 1<<30,\n    FLAG_REMOVE: 1<<29,\n    FLAG_INIT: 1<<28,\n\n    constructor: function(options) {\n\n        this.requireSetThemeOverride = options && !!options.theme;\n        this.options = util.assign({}, this.options, options);\n\n        Backbone.View.call(this, options);\n    },\n\n    initialize: function() {\n\n        views[this.cid] = this;\n\n        this.setTheme(this.options.theme || this.defaultTheme);\n        this.init();\n    },\n\n    unmount: function() {\n        if (this.svgElement) {\n            this.vel.remove();\n        } else {\n            this.$el.remove();\n        }\n    },\n\n    isMounted: function() {\n        return this.el.parentNode !== null;\n    },\n\n    renderChildren: function(children) {\n        children || (children = util.result(this, 'children'));\n        if (children) {\n            var isSVG = this.svgElement;\n            var namespace = V.namespace[isSVG ? 'svg' : 'xhtml'];\n            var doc = util.parseDOMJSON(children, namespace);\n            (isSVG ? this.vel : this.$el).empty().append(doc.fragment);\n            this.childNodes = doc.selectors;\n        }\n        return this;\n    },\n\n    findAttribute: function(attributeName, node) {\n\n        var currentNode = node;\n\n        while (currentNode && currentNode.nodeType === 1) {\n            var attributeValue = currentNode.getAttribute(attributeName);\n            // attribute found\n            if (attributeValue) return attributeValue;\n            // do not climb up the DOM\n            if (currentNode === this.el) return null;\n            // try parent node\n            currentNode = currentNode.parentNode;\n        }\n\n        return null;\n    },\n\n    // Override the Backbone `_ensureElement()` method in order to create an\n    // svg element (e.g., `<g>`) node that wraps all the nodes of the Cell view.\n    // Expose class name setter as a separate method.\n    _ensureElement: function() {\n        if (!this.el) {\n            var tagName = util.result(this, 'tagName');\n            var attrs = util.assign({}, util.result(this, 'attributes'));\n            var style = util.assign({}, util.result(this, 'style'));\n            if (this.id) attrs.id = util.result(this, 'id');\n            this.setElement(this._createElement(tagName));\n            this._setAttributes(attrs);\n            this._setStyle(style);\n        } else {\n            this.setElement(util.result(this, 'el'));\n        }\n        this._ensureElClassName();\n    },\n\n    _setAttributes: function(attrs) {\n        if (this.svgElement) {\n            this.vel.attr(attrs);\n        } else {\n            this.$el.attr(attrs);\n        }\n    },\n\n    _setStyle: function(style) {\n        this.$el.css(style);\n    },\n\n    _createElement: function(tagName) {\n        if (this.svgElement) {\n            return document.createElementNS(V.namespace.svg, tagName);\n        } else {\n            return document.createElement(tagName);\n        }\n    },\n\n    // Utilize an alternative DOM manipulation API by\n    // adding an element reference wrapped in Vectorizer.\n    _setElement: function(el) {\n        this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\n        this.el = this.$el[0];\n        if (this.svgElement) this.vel = V(this.el);\n    },\n\n    _ensureElClassName: function() {\n        var className = util.result(this, 'className');\n        if (!className) return;\n        var prefixedClassName = util.addClassNamePrefix(className);\n        // Note: className removal here kept for backwards compatibility only\n        if (this.svgElement) {\n            this.vel.removeClass(className).addClass(prefixedClassName);\n        } else {\n            this.$el.removeClass(className).addClass(prefixedClassName);\n        }\n    },\n\n    init: function() {\n        // Intentionally empty.\n        // This method is meant to be overridden.\n    },\n\n    onRender: function() {\n        // Intentionally empty.\n        // This method is meant to be overridden.\n    },\n\n    confirmUpdate: function() {\n        // Intentionally empty.\n        // This method is meant to be overridden.\n        return 0;\n    },\n\n    setTheme: function(theme, opt) {\n\n        opt = opt || {};\n\n        // Theme is already set, override is required, and override has not been set.\n        // Don't set the theme.\n        if (this.theme && this.requireSetThemeOverride && !opt.override) {\n            return this;\n        }\n\n        this.removeThemeClassName();\n        this.addThemeClassName(theme);\n        this.onSetTheme(this.theme/* oldTheme */, theme/* newTheme */);\n        this.theme = theme;\n\n        return this;\n    },\n\n    addThemeClassName: function(theme) {\n\n        theme = theme || this.theme;\n        if (!theme) return this;\n\n        var className = this.themeClassNamePrefix + theme;\n\n        if (this.svgElement) {\n            this.vel.addClass(className);\n        } else {\n            this.$el.addClass(className);\n        }\n\n        return this;\n    },\n\n    removeThemeClassName: function(theme) {\n\n        theme = theme || this.theme;\n\n        var className = this.themeClassNamePrefix + theme;\n\n        if (this.svgElement) {\n            this.vel.removeClass(className);\n        } else {\n            this.$el.removeClass(className);\n        }\n\n        return this;\n    },\n\n    onSetTheme: function(oldTheme, newTheme) {\n        // Intentionally empty.\n        // This method is meant to be overridden.\n    },\n\n    remove: function() {\n\n        this.onRemove();\n        this.undelegateDocumentEvents();\n\n        views[this.cid] = null;\n\n        Backbone.View.prototype.remove.apply(this, arguments);\n\n        return this;\n    },\n\n    onRemove: function() {\n        // Intentionally empty.\n        // This method is meant to be overridden.\n    },\n\n    getEventNamespace: function() {\n        // Returns a per-session unique namespace\n        return '.joint-event-ns-' + this.cid;\n    },\n\n    delegateElementEvents: function(element, events, data) {\n        if (!events) return this;\n        data || (data = {});\n        var eventNS = this.getEventNamespace();\n        for (var eventName in events) {\n            var method = events[eventName];\n            if (typeof method !== 'function') method = this[method];\n            if (!method) continue;\n            $(element).on(eventName + eventNS, data, method.bind(this));\n        }\n        return this;\n    },\n\n    undelegateElementEvents: function(element) {\n        $(element).off(this.getEventNamespace());\n        return this;\n    },\n\n    delegateDocumentEvents: function(events, data) {\n        events || (events = util.result(this, 'documentEvents'));\n        return this.delegateElementEvents(document, events, data);\n    },\n\n    undelegateDocumentEvents: function() {\n        return this.undelegateElementEvents(document);\n    },\n\n    eventData: function(evt, data) {\n        if (!evt) throw new Error('eventData(): event object required.');\n        var currentData = evt.data;\n        var key = '__' + this.cid + '__';\n        if (data === undefined) {\n            if (!currentData) return {};\n            return currentData[key] || {};\n        }\n        currentData || (currentData = evt.data = {});\n        currentData[key] || (currentData[key] = {});\n        util.assign(currentData[key], data);\n        return this;\n    },\n\n    stopPropagation: function(evt) {\n        this.eventData(evt, { propagationStopped: true });\n        return this;\n    },\n\n    isPropagationStopped: function(evt) {\n        return !!this.eventData(evt).propagationStopped;\n    }\n\n}, {\n\n    extend: function() {\n\n        var args = Array.from(arguments);\n\n        // Deep clone the prototype and static properties objects.\n        // This prevents unexpected behavior where some properties are overwritten outside of this function.\n        var protoProps = args[0] && util.assign({}, args[0]) || {};\n        var staticProps = args[1] && util.assign({}, args[1]) || {};\n\n        // Need the real render method so that we can wrap it and call it later.\n        var renderFn = protoProps.render || (this.prototype && this.prototype.render) || null;\n\n        /*\n            Wrap the real render method so that:\n                .. `onRender` is always called.\n                .. `this` is always returned.\n        */\n        protoProps.render = function() {\n\n            if (typeof renderFn === 'function') {\n                // Call the original render method.\n                renderFn.apply(this, arguments);\n            }\n\n            if (this.render.__render__ === renderFn) {\n                // Should always call onRender() method.\n                // Should call it only once when renderFn is actual prototype method i.e. not the wrapper\n                this.onRender();\n            }\n\n            // Should always return itself.\n            return this;\n        };\n\n        protoProps.render.__render__ = renderFn;\n\n        return Backbone.View.extend.call(this, protoProps, staticProps);\n    }\n});\n\nconst DoubleTapEventName = 'dbltap';\nif ($.event && !(DoubleTapEventName in $.event.special)) {\n    const maxDelay = config.doubleTapInterval;\n    const minDelay = 30;\n    $.event.special[DoubleTapEventName] = {\n        bindType: 'touchend',\n        delegateType: 'touchend',\n        handle: function(event, ...args) {\n            const { handleObj, target } = event;\n            const targetData  = $.data(target);\n            const now = new Date().getTime();\n            const delta = 'lastTouch' in targetData ? now - targetData.lastTouch : 0;\n            if (delta < maxDelay && delta > minDelay) {\n                targetData.lastTouch = null;\n                event.type = handleObj.origType;\n                // let jQuery handle the triggering of \"dbltap\" event handlers\n                handleObj.handler.call(this, event, ...args);\n            } else {\n                targetData.lastTouch = now;\n            }\n        }\n    };\n}\n","import { View } from '../mvc/index.mjs';\nimport { addClassNamePrefix } from '../util/util.mjs';\n\nexport const LayersNames = {\n    CELLS: 'cells',\n    BACK: 'back',\n    FRONT: 'front',\n    TOOLS: 'tools',\n    LABELS: 'labels'\n};\n\nexport const PaperLayer = View.extend({\n\n    tagName: 'g',\n    svgElement: true,\n    pivotNodes: null,\n    defaultTheme: null,\n\n    options: {\n        name: ''\n    },\n\n    className: function() {\n        return addClassNamePrefix(`${this.options.name}-layer`);\n    },\n\n    init: function() {\n        this.pivotNodes = {};\n    },\n\n    insertSortedNode: function(node, z) {\n        this.el.insertBefore(node, this.insertPivot(z));\n    },\n\n    insertNode: function(node) {\n        const { el } = this;\n        if (node.parentNode !== el) {\n            el.appendChild(node);\n        }\n    },\n\n    insertPivot: function(z) {\n        const { el, pivotNodes } = this;\n        z = +z;\n        z || (z = 0);\n        let pivotNode = pivotNodes[z];\n        if (pivotNode) return pivotNode;\n        pivotNode = pivotNodes[z] = document.createComment('z-index:' + (z + 1));\n        let neighborZ = -Infinity;\n        for (let currentZ in pivotNodes) {\n            currentZ = +currentZ;\n            if (currentZ < z && currentZ > neighborZ) {\n                neighborZ = currentZ;\n                if (neighborZ === z - 1) continue;\n            }\n        }\n        if (neighborZ !== -Infinity) {\n            const neighborPivot = pivotNodes[neighborZ];\n            // Insert After\n            el.insertBefore(pivotNode, neighborPivot.nextSibling);\n        } else {\n            // First Child\n            el.insertBefore(pivotNode, el.firstChild);\n        }\n        return pivotNode;\n    },\n\n    removePivots: function() {\n        const { el, pivotNodes } = this;\n        for (let z in pivotNodes) el.removeChild(pivotNodes[z]);\n        this.pivotNodes = {};\n    }\n\n});\n","import * as mvc from '../mvc/index.mjs';\nimport V from '../V/index.mjs';\nimport { isPlainObject, result } from '../util/util.mjs';\n\nfunction toArray(obj) {\n    if (!obj) return [];\n    if (Array.isArray(obj)) return obj;\n    return [obj];\n}\n\nexport const HighlighterView = mvc.View.extend({\n\n    tagName: 'g',\n    svgElement: true,\n    className: 'highlight',\n\n    HIGHLIGHT_FLAG: 1,\n    UPDATE_PRIORITY: 3,\n    DETACHABLE: false,\n    UPDATABLE: true,\n    MOUNTABLE: true,\n\n    cellView: null,\n    nodeSelector: null,\n    node: null,\n    updateRequested: false,\n    postponedUpdate: false,\n    transformGroup: null,\n    detachedTransformGroup: null,\n\n    requestUpdate(cellView, nodeSelector) {\n        const { paper } = cellView;\n        this.cellView = cellView;\n        this.nodeSelector = nodeSelector;\n        if (paper) {\n            this.updateRequested = true;\n            paper.requestViewUpdate(this, this.HIGHLIGHT_FLAG, this.UPDATE_PRIORITY);\n        }\n    },\n\n    confirmUpdate() {\n        // The cellView is now rendered/updated since it has a higher update priority.\n        this.updateRequested = false;\n        const { cellView, nodeSelector } = this;\n        if (!cellView.isMounted()) {\n            this.postponedUpdate = true;\n            return 0;\n        }\n        this.update(cellView, nodeSelector);\n        this.mount();\n        this.transform();\n        return 0;\n    },\n\n    findNode(cellView, nodeSelector = null) {\n        let el;\n        if (typeof nodeSelector === 'string') {\n            [el] = cellView.findBySelector(nodeSelector);\n        } else if (isPlainObject(nodeSelector)) {\n            const isLink = cellView.model.isLink();\n            const { label = null, port, selector } = nodeSelector;\n            if (isLink && label !== null) {\n                // Link Label Selector\n                el = cellView.findLabelNode(label, selector);\n            } else if (!isLink && port) {\n                // Element Port Selector\n                el = cellView.findPortNode(port, selector);\n            } else {\n                // Cell Selector\n                [el] = cellView.findBySelector(selector);\n            }\n        } else if (nodeSelector) {\n            el = V.toNode(nodeSelector);\n            if (!(el instanceof SVGElement)) el = null;\n        }\n        return el ? el : null;\n    },\n\n    getNodeMatrix(cellView, node) {\n        const { options } = this;\n        const { layer } = options;\n        const { rotatableNode } = cellView;\n        const nodeMatrix = cellView.getNodeMatrix(node);\n        if (rotatableNode) {\n            if (layer) {\n                if (rotatableNode.contains(node)) {\n                    return nodeMatrix;\n                }\n                // The node is outside of the rotatable group.\n                // Compensate the rotation set by transformGroup.\n                return cellView.getRootRotateMatrix().inverse().multiply(nodeMatrix);\n            } else {\n                return cellView.getNodeRotateMatrix(node).multiply(nodeMatrix);\n            }\n        }\n        return nodeMatrix;\n    },\n\n    mount() {\n        const { MOUNTABLE, cellView, el, options, transformGroup, detachedTransformGroup, postponedUpdate, nodeSelector } = this;\n        if (!MOUNTABLE || transformGroup) return;\n        if (postponedUpdate) {\n            // The cellView was not mounted when the update was requested.\n            // The update was postponed until the cellView is mounted.\n            this.update(cellView, nodeSelector);\n            this.transform();\n            return;\n        }\n        const { vel: cellViewRoot, paper } = cellView;\n        const { layer: layerName } = options;\n        if (layerName) {\n            let vGroup;\n            if (detachedTransformGroup) {\n                vGroup = detachedTransformGroup;\n                this.detachedTransformGroup = null;\n            } else {\n                vGroup = V('g').addClass('highlight-transform').append(el);\n            }\n            this.transformGroup = vGroup;\n            paper.getLayerView(layerName).insertSortedNode(vGroup.node, options.z);\n        } else {\n            // TODO: prepend vs append\n            if (!el.parentNode || el.nextSibling) {\n                // Not appended yet or not the last child\n                cellViewRoot.append(el);\n            }\n        }\n    },\n\n    unmount() {\n        const { MOUNTABLE, transformGroup, vel } = this;\n        if (!MOUNTABLE) return;\n        if (transformGroup) {\n            this.transformGroup = null;\n            this.detachedTransformGroup = transformGroup;\n            transformGroup.remove();\n        } else {\n            vel.remove();\n        }\n    },\n\n    transform() {\n        const { transformGroup, cellView, updateRequested } = this;\n        if (!transformGroup || cellView.model.isLink() || updateRequested) return;\n        const translateMatrix = cellView.getRootTranslateMatrix();\n        const rotateMatrix = cellView.getRootRotateMatrix();\n        const transformMatrix = translateMatrix.multiply(rotateMatrix);\n        transformGroup.attr('transform', V.matrixToTransformString(transformMatrix));\n    },\n\n    update() {\n        const { node: prevNode, cellView, nodeSelector, updateRequested, id } = this;\n        if (updateRequested) return;\n        this.postponedUpdate = false;\n        const node = this.node = this.findNode(cellView, nodeSelector);\n        if (prevNode) {\n            this.unhighlight(cellView, prevNode);\n        }\n        if (node) {\n            this.highlight(cellView, node);\n            this.mount();\n        } else {\n            this.unmount();\n            cellView.notify('cell:highlight:invalid', id, this);\n        }\n    },\n\n    onRemove() {\n        const { node, cellView, id, constructor } = this;\n        if (node) {\n            this.unhighlight(cellView, node);\n        }\n        this.unmount();\n        constructor._removeRef(cellView, id);\n    },\n\n    highlight(_cellView, _node) {\n        // to be overridden\n    },\n\n    unhighlight(_cellView, _node) {\n        // to be overridden\n    },\n\n    // Update Attributes\n\n    listenToUpdateAttributes(cellView) {\n        const attributes = result(this, 'UPDATE_ATTRIBUTES');\n        if (!Array.isArray(attributes) || attributes.length === 0) return;\n        this.listenTo(cellView.model, 'change', this.onCellAttributeChange);\n    },\n\n    onCellAttributeChange() {\n        const { cellView } = this;\n        if (!cellView) return;\n        const { model, paper } = cellView;\n        const attributes = result(this, 'UPDATE_ATTRIBUTES');\n        if (!attributes.some(attribute => model.hasChanged(attribute))) return;\n        paper.requestViewUpdate(this, this.HIGHLIGHT_FLAG, this.UPDATE_PRIORITY);\n    }\n\n}, {\n\n    _views: {},\n\n    // Used internally by CellView highlight()\n    highlight: function(cellView, node, opt) {\n        const id = this.uniqueId(node, opt);\n        this.add(cellView, node, id, opt);\n    },\n\n    // Used internally by CellView unhighlight()\n    unhighlight: function(cellView, node, opt) {\n        const id = this.uniqueId(node, opt);\n        this.remove(cellView, id);\n    },\n\n    get(cellView, id = null) {\n        const { cid } = cellView;\n        const { _views } = this;\n        const refs = _views[cid];\n        if (id === null) {\n            // all highlighters\n            const views = [];\n            if (!refs) return views;\n            for (let hid in refs) {\n                const ref = refs[hid];\n                if (ref instanceof this) {\n                    views.push(ref);\n                }\n            }\n            return views;\n        } else {\n            // single highlighter\n            if (!refs) return null;\n            if (id in refs) {\n                const ref = refs[id];\n                if (ref instanceof this) return ref;\n            }\n            return null;\n        }\n    },\n\n    add(cellView, nodeSelector, id, opt = {}) {\n        if (!id) throw new Error('dia.HighlighterView: An ID required.');\n        // Search the existing view amongst all the highlighters\n        const previousView = HighlighterView.get(cellView, id);\n        if (previousView) previousView.remove();\n        const view = new this(opt);\n        view.id = id;\n        this._addRef(cellView, id, view);\n        view.requestUpdate(cellView, nodeSelector);\n        view.listenToUpdateAttributes(cellView);\n        return view;\n    },\n\n    _addRef(cellView, id, view) {\n        const { cid } = cellView;\n        const { _views } = this;\n        let refs = _views[cid];\n        if (!refs) refs = _views[cid] = {};\n        refs[id] = view;\n    },\n\n    _removeRef(cellView, id) {\n        const { cid } = cellView;\n        const { _views } = this;\n        const refs = _views[cid];\n        if (!refs) return;\n        if (id) delete refs[id];\n        for (let _ in refs) return;\n        delete _views[cid];\n    },\n\n    remove(cellView, id = null) {\n        toArray(this.get(cellView, id)).forEach(view => {\n            view.remove();\n        });\n    },\n\n    removeAll(paper, id = null) {\n        const { _views } = this;\n\n        for (let cid in _views) {\n            for (let hid in _views[cid]) {\n                const view = _views[cid][hid];\n\n                if (view.cellView.paper === paper && view instanceof this && (id === null || hid === id)) {\n                    view.remove();\n                }\n            }\n        }\n    },\n\n    update(cellView, id = null, dirty = false) {\n        toArray(this.get(cellView, id)).forEach(view => {\n            if (dirty || view.UPDATABLE) view.update();\n        });\n    },\n\n    transform(cellView, id = null) {\n        toArray(this.get(cellView, id)).forEach(view => {\n            if (view.UPDATABLE) view.transform();\n        });\n    },\n\n    unmount(cellView, id = null) {\n        toArray(this.get(cellView, id)).forEach(view => view.unmount());\n    },\n\n    mount(cellView, id = null) {\n        toArray(this.get(cellView, id)).forEach(view => view.mount());\n    },\n\n    uniqueId(node, opt = '') {\n        return V.ensureId(node) + JSON.stringify(opt);\n    }\n\n});\n","import { config } from '../config/index.mjs';\nimport { View } from '../mvc/index.mjs';\nimport {\n    assign,\n    guid,\n    omit,\n    parseDOMJSON,\n    isFunction,\n    isObject,\n    isPlainObject,\n    isBoolean,\n    isEmpty,\n    isString,\n    toKebabCase,\n    result,\n    sortedIndex,\n    merge,\n    uniq\n} from '../util/index.mjs';\nimport { Point, Rect } from '../g/index.mjs';\nimport V from '../V/index.mjs';\nimport $ from 'jquery';\nimport { HighlighterView } from './HighlighterView.mjs';\n\nconst HighlightingTypes = {\n    DEFAULT: 'default',\n    EMBEDDING: 'embedding',\n    CONNECTING: 'connecting',\n    MAGNET_AVAILABILITY: 'magnetAvailability',\n    ELEMENT_AVAILABILITY: 'elementAvailability'\n};\n\nconst Flags = {\n    TOOLS: 'TOOLS',\n};\n\n// CellView base view and controller.\n// --------------------------------------------\n\n// This is the base view and controller for `ElementView` and `LinkView`.\nexport const CellView = View.extend({\n\n    tagName: 'g',\n\n    svgElement: true,\n\n    selector: 'root',\n\n    metrics: null,\n\n    className: function() {\n\n        var classNames = ['cell'];\n        var type = this.model.get('type');\n\n        if (type) {\n\n            type.toLowerCase().split('.').forEach(function(value, index, list) {\n                classNames.push('type-' + list.slice(0, index + 1).join('-'));\n            });\n        }\n\n        return classNames.join(' ');\n    },\n\n    _presentationAttributes: null,\n    _flags: null,\n\n    setFlags: function() {\n        var flags = {};\n        var attributes = {};\n        var shift = 0;\n        var i, n, label;\n        var presentationAttributes = result(this, 'presentationAttributes');\n        for (var attribute in presentationAttributes) {\n            if (!presentationAttributes.hasOwnProperty(attribute)) continue;\n            var labels = presentationAttributes[attribute];\n            if (!Array.isArray(labels)) labels = [labels];\n            for (i = 0, n = labels.length; i < n; i++) {\n                label = labels[i];\n                var flag = flags[label];\n                if (!flag) {\n                    flag = flags[label] = 1<<(shift++);\n                }\n                attributes[attribute] |= flag;\n            }\n        }\n        var initFlag = result(this, 'initFlag');\n        if (!Array.isArray(initFlag)) initFlag = [initFlag];\n        for (i = 0, n = initFlag.length; i < n; i++) {\n            label = initFlag[i];\n            if (!flags[label]) flags[label] = 1<<(shift++);\n        }\n\n        // 26 - 30 are reserved for paper flags\n        // 31+ overflows maximal number\n        if (shift > 25) throw new Error('dia.CellView: Maximum number of flags exceeded.');\n\n        this._flags = flags;\n        this._presentationAttributes = attributes;\n    },\n\n    hasFlag: function(flag, label) {\n        return flag & this.getFlag(label);\n    },\n\n    removeFlag: function(flag, label) {\n        return flag ^ (flag & this.getFlag(label));\n    },\n\n    getFlag: function(label) {\n        var flags = this._flags;\n        if (!flags) return 0;\n        var flag = 0;\n        if (Array.isArray(label)) {\n            for (var i = 0, n = label.length; i < n; i++) flag |= flags[label[i]];\n        } else {\n            flag |= flags[label];\n        }\n        return flag;\n    },\n\n    attributes: function() {\n        var cell = this.model;\n        return {\n            'model-id': cell.id,\n            'data-type': cell.attributes.type\n        };\n    },\n\n    constructor: function(options) {\n\n        // Make sure a global unique id is assigned to this view. Store this id also to the properties object.\n        // The global unique id makes sure that the same view can be rendered on e.g. different machines and\n        // still be associated to the same object among all those clients. This is necessary for real-time\n        // collaboration mechanism.\n        options.id = options.id || guid(this);\n\n        View.call(this, options);\n    },\n\n    initialize: function() {\n\n        this.setFlags();\n\n        View.prototype.initialize.apply(this, arguments);\n\n        this.cleanNodesCache();\n\n        // Store reference to this to the <g> DOM element so that the view is accessible through the DOM tree.\n        this.$el.data('view', this);\n\n        this.startListening();\n    },\n\n    startListening: function() {\n        this.listenTo(this.model, 'change', this.onAttributesChange);\n    },\n\n    onAttributesChange: function(model, opt) {\n        var flag = model.getChangeFlag(this._presentationAttributes);\n        if (opt.updateHandled || !flag) return;\n        if (opt.dirty && this.hasFlag(flag, 'UPDATE')) flag |= this.getFlag('RENDER');\n        // TODO: tool changes does not need to be sync\n        // Fix Segments tools\n        if (opt.tool) opt.async = false;\n        this.requestUpdate(flag, opt);\n    },\n\n    requestUpdate: function(flags, opt) {\n        const { paper } = this;\n        if (paper && flags > 0) {\n            paper.requestViewUpdate(this, flags, this.UPDATE_PRIORITY, opt);\n        }\n    },\n\n    parseDOMJSON: function(markup, root) {\n\n        var doc = parseDOMJSON(markup);\n        var selectors = doc.selectors;\n        var groups = doc.groupSelectors;\n        for (var group in groups) {\n            if (selectors[group]) throw new Error('dia.CellView: ambiguous group selector');\n            selectors[group] = groups[group];\n        }\n        if (root) {\n            var rootSelector = this.selector;\n            if (selectors[rootSelector]) throw new Error('dia.CellView: ambiguous root selector.');\n            selectors[rootSelector] = root;\n        }\n        return { fragment: doc.fragment, selectors: selectors };\n    },\n\n    // Return `true` if cell link is allowed to perform a certain UI `feature`.\n    // Example: `can('vertexMove')`, `can('labelMove')`.\n    can: function(feature) {\n\n        var interactive = isFunction(this.options.interactive)\n            ? this.options.interactive(this)\n            : this.options.interactive;\n\n        return (isObject(interactive) && interactive[feature] !== false) ||\n            (isBoolean(interactive) && interactive !== false);\n    },\n\n    findBySelector: function(selector, root, selectors) {\n\n        root || (root = this.el);\n        selectors || (selectors = this.selectors);\n\n        // These are either descendants of `this.$el` of `this.$el` itself.\n        // `.` is a special selector used to select the wrapping `<g>` element.\n        if (!selector || selector === '.') return [root];\n        if (selectors) {\n            var nodes = selectors[selector];\n            if (nodes) {\n                if (Array.isArray(nodes)) return nodes;\n                return [nodes];\n            }\n        }\n\n        // Maintaining backwards compatibility\n        // e.g. `circle:first` would fail with querySelector() call\n        if (config.useCSSSelectors) return $(root).find(selector).toArray();\n\n        return [];\n    },\n\n    notify: function(eventName) {\n\n        if (this.paper) {\n\n            var args = Array.prototype.slice.call(arguments, 1);\n\n            // Trigger the event on both the element itself and also on the paper.\n            this.trigger.apply(this, [eventName].concat(args));\n\n            // Paper event handlers receive the view object as the first argument.\n            this.paper.trigger.apply(this.paper, [eventName, this].concat(args));\n        }\n    },\n\n    getBBox: function(opt) {\n\n        var bbox;\n        if (opt && opt.useModelGeometry) {\n            var model = this.model;\n            bbox = model.getBBox().bbox(model.angle());\n        } else {\n            bbox = this.getNodeBBox(this.el);\n        }\n\n        return this.paper.localToPaperRect(bbox);\n    },\n\n    getNodeBBox: function(magnet) {\n\n        const rect = this.getNodeBoundingRect(magnet);\n        const transformMatrix = this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(magnet));\n        const magnetMatrix = this.getNodeMatrix(magnet);\n        return V.transformRect(rect, transformMatrix.multiply(magnetMatrix));\n    },\n\n    getNodeRotateMatrix(node) {\n        if (!this.rotatableNode || this.rotatableNode.contains(node)) {\n            // Rotate transformation is applied to all nodes when no rotatableGroup\n            // is present or to nodes inside the rotatableGroup only.\n            return this.getRootRotateMatrix();\n        }\n        // Nodes outside the rotatable group\n        return V.createSVGMatrix();\n    },\n\n    getNodeUnrotatedBBox: function(magnet) {\n\n        var rect = this.getNodeBoundingRect(magnet);\n        var magnetMatrix = this.getNodeMatrix(magnet);\n        var translateMatrix = this.getRootTranslateMatrix();\n        return V.transformRect(rect, translateMatrix.multiply(magnetMatrix));\n    },\n\n    getRootTranslateMatrix: function() {\n\n        var model = this.model;\n        var position = model.position();\n        var mt = V.createSVGMatrix().translate(position.x, position.y);\n        return mt;\n    },\n\n    getRootRotateMatrix: function() {\n\n        var mr = V.createSVGMatrix();\n        var model = this.model;\n        var angle = model.angle();\n        if (angle) {\n            var bbox = model.getBBox();\n            var cx = bbox.width / 2;\n            var cy = bbox.height / 2;\n            mr = mr.translate(cx, cy).rotate(angle).translate(-cx, -cy);\n        }\n        return mr;\n    },\n\n    _notifyHighlight: function(eventName, el, opt = {}) {\n        const { el: rootNode } = this;\n        let node;\n        if (typeof el === 'string') {\n            [node = rootNode] = this.findBySelector(el);\n        } else {\n            [node = rootNode] = this.$(el);\n        }\n        // set partial flag if the highlighted element is not the entire view.\n        opt.partial = (node !== rootNode);\n        // translate type flag into a type string\n        if (opt.type === undefined) {\n            let type;\n            switch (true) {\n                case opt.embedding:\n                    type = HighlightingTypes.EMBEDDING;\n                    break;\n                case opt.connecting:\n                    type = HighlightingTypes.CONNECTING;\n                    break;\n                case opt.magnetAvailability:\n                    type = HighlightingTypes.MAGNET_AVAILABILITY;\n                    break;\n                case opt.elementAvailability:\n                    type = HighlightingTypes.ELEMENT_AVAILABILITY;\n                    break;\n                default:\n                    type = HighlightingTypes.DEFAULT;\n                    break;\n            }\n            opt.type = type;\n        }\n        this.notify(eventName, node, opt);\n        return this;\n    },\n\n    highlight: function(el, opt) {\n        return this._notifyHighlight('cell:highlight', el, opt);\n    },\n\n    unhighlight: function(el, opt = {}) {\n        return this._notifyHighlight('cell:unhighlight', el, opt);\n    },\n\n    // Find the closest element that has the `magnet` attribute set to `true`. If there was not such\n    // an element found, return the root element of the cell view.\n    findMagnet: function(el) {\n\n        const root = this.el;\n        let magnet = this.$(el)[0];\n        if (!magnet) {\n            magnet = root;\n        }\n\n        do {\n            const magnetAttribute = magnet.getAttribute('magnet');\n            const isMagnetRoot = (magnet === root);\n            if ((magnetAttribute || isMagnetRoot) && magnetAttribute !== 'false') {\n                return magnet;\n            }\n            if (isMagnetRoot) {\n                // If the overall cell has set `magnet === false`, then return `undefined` to\n                // announce there is no magnet found for this cell.\n                // This is especially useful to set on cells that have 'ports'. In this case,\n                // only the ports have set `magnet === true` and the overall element has `magnet === false`.\n                return undefined;\n            }\n            magnet = magnet.parentNode;\n        } while (magnet);\n\n        return undefined;\n    },\n\n    findProxyNode: function(el, type) {\n        el || (el = this.el);\n        const nodeSelector = el.getAttribute(`${type}-selector`);\n        if (nodeSelector) {\n            const [proxyNode] = this.findBySelector(nodeSelector);\n            if (proxyNode) return proxyNode;\n        }\n        return el;\n    },\n\n    // Construct a unique selector for the `el` element within this view.\n    // `prevSelector` is being collected through the recursive call.\n    // No value for `prevSelector` is expected when using this method.\n    getSelector: function(el, prevSelector) {\n\n        var selector;\n\n        if (el === this.el) {\n            if (typeof prevSelector === 'string') selector = '> ' + prevSelector;\n            return selector;\n        }\n\n        if (el) {\n\n            var nthChild = V(el).index() + 1;\n            selector = el.tagName + ':nth-child(' + nthChild + ')';\n\n            if (prevSelector) {\n                selector += ' > ' + prevSelector;\n            }\n\n            selector = this.getSelector(el.parentNode, selector);\n        }\n\n        return selector;\n    },\n\n    addLinkFromMagnet: function(magnet, x, y) {\n\n        var paper = this.paper;\n        var graph = paper.model;\n\n        var link = paper.getDefaultLink(this, magnet);\n        link.set({\n            source: this.getLinkEnd(magnet, x, y, link, 'source'),\n            target: { x: x, y: y }\n        }).addTo(graph, {\n            async: false,\n            ui: true\n        });\n\n        return link.findView(paper);\n    },\n\n    getLinkEnd: function(magnet, ...args) {\n\n        var model = this.model;\n        var id = model.id;\n        var port = this.findAttribute('port', magnet);\n        // Find a unique `selector` of the element under pointer that is a magnet.\n        var selector = magnet.getAttribute('joint-selector');\n\n        var end = { id: id };\n        if (selector != null) end.magnet = selector;\n        if (port != null) {\n            end.port = port;\n            if (!model.hasPort(port) && !selector) {\n                // port created via the `port` attribute (not API)\n                end.selector = this.getSelector(magnet);\n            }\n        } else if (selector == null && this.el !== magnet) {\n            end.selector = this.getSelector(magnet);\n        }\n\n        return this.customizeLinkEnd(end, magnet, ...args);\n    },\n\n    customizeLinkEnd: function(end, magnet, x, y, link, endType) {\n        const { paper } = this;\n        const { connectionStrategy } = paper.options;\n        if (typeof connectionStrategy === 'function') {\n            var strategy = connectionStrategy.call(paper, end, this, magnet, new Point(x, y), link, endType, paper);\n            if (strategy) return strategy;\n        }\n        return end;\n    },\n\n    getMagnetFromLinkEnd: function(end) {\n\n        var root = this.el;\n        var port = end.port;\n        var selector = end.magnet;\n        var model = this.model;\n        var magnet;\n        if (port != null && model.isElement() && model.hasPort(port)) {\n            magnet = this.findPortNode(port, selector) || root;\n        } else {\n            if (!selector) selector = end.selector;\n            if (!selector && port != null) {\n                // link end has only `id` and `port` property referencing\n                // a port created via the `port` attribute (not API).\n                selector = '[port=\"' + port + '\"]';\n            }\n            magnet = this.findBySelector(selector, root, this.selectors)[0];\n        }\n\n        return this.findProxyNode(magnet, 'magnet');\n    },\n\n    dragLinkStart: function(evt, magnet, x, y) {\n        this.model.startBatch('add-link');\n        const linkView = this.addLinkFromMagnet(magnet, x, y);\n        // backwards compatibility events\n        linkView.notifyPointerdown(evt, x, y);\n        linkView.eventData(evt, linkView.startArrowheadMove('target', { whenNotAllowed: 'remove' }));\n        this.eventData(evt, { linkView });\n    },\n\n    dragLink: function(evt, x, y) {\n        var data = this.eventData(evt);\n        var linkView = data.linkView;\n        if (linkView) {\n            linkView.pointermove(evt, x, y);\n        } else {\n            var paper = this.paper;\n            var magnetThreshold = paper.options.magnetThreshold;\n            var currentTarget = this.getEventTarget(evt);\n            var targetMagnet = data.targetMagnet;\n            if (magnetThreshold === 'onleave') {\n                // magnetThreshold when the pointer leaves the magnet\n                if (targetMagnet === currentTarget || V(targetMagnet).contains(currentTarget)) return;\n            } else {\n                // magnetThreshold defined as a number of movements\n                if (paper.eventData(evt).mousemoved <= magnetThreshold) return;\n            }\n            this.dragLinkStart(evt, targetMagnet, x, y);\n        }\n    },\n\n    dragLinkEnd: function(evt, x, y) {\n        var data = this.eventData(evt);\n        var linkView = data.linkView;\n        if (!linkView) return;\n        linkView.pointerup(evt, x, y);\n        this.model.stopBatch('add-link');\n    },\n\n    getAttributeDefinition: function(attrName) {\n\n        return this.model.constructor.getAttributeDefinition(attrName);\n    },\n\n    setNodeAttributes: function(node, attrs) {\n\n        if (!isEmpty(attrs)) {\n            if (node instanceof SVGElement) {\n                V(node).attr(attrs);\n            } else {\n                $(node).attr(attrs);\n            }\n        }\n    },\n\n    processNodeAttributes: function(node, attrs) {\n\n        var attrName, attrVal, def, i, n;\n        var normalAttrs, setAttrs, positionAttrs, offsetAttrs;\n        var relatives = [];\n        // divide the attributes between normal and special\n        for (attrName in attrs) {\n            if (!attrs.hasOwnProperty(attrName)) continue;\n            attrVal = attrs[attrName];\n            def = this.getAttributeDefinition(attrName);\n            if (def && (!isFunction(def.qualify) || def.qualify.call(this, attrVal, node, attrs, this))) {\n                if (isString(def.set)) {\n                    normalAttrs || (normalAttrs = {});\n                    normalAttrs[def.set] = attrVal;\n                }\n                if (attrVal !== null) {\n                    relatives.push(attrName, def);\n                }\n            } else {\n                normalAttrs || (normalAttrs = {});\n                normalAttrs[toKebabCase(attrName)] = attrVal;\n            }\n        }\n\n        // handle the rest of attributes via related method\n        // from the special attributes namespace.\n        for (i = 0, n = relatives.length; i < n; i+=2) {\n            attrName = relatives[i];\n            def = relatives[i+1];\n            attrVal = attrs[attrName];\n            if (isFunction(def.set)) {\n                setAttrs || (setAttrs = {});\n                setAttrs[attrName] = attrVal;\n            }\n            if (isFunction(def.position)) {\n                positionAttrs || (positionAttrs = {});\n                positionAttrs[attrName] = attrVal;\n            }\n            if (isFunction(def.offset)) {\n                offsetAttrs || (offsetAttrs = {});\n                offsetAttrs[attrName] = attrVal;\n            }\n        }\n\n        return {\n            raw: attrs,\n            normal: normalAttrs,\n            set: setAttrs,\n            position: positionAttrs,\n            offset: offsetAttrs\n        };\n    },\n\n    updateRelativeAttributes: function(node, attrs, refBBox, opt) {\n\n        opt || (opt = {});\n\n        var attrName, attrVal, def;\n        var rawAttrs = attrs.raw || {};\n        var nodeAttrs = attrs.normal || {};\n        var setAttrs = attrs.set;\n        var positionAttrs = attrs.position;\n        var offsetAttrs = attrs.offset;\n\n        for (attrName in setAttrs) {\n            attrVal = setAttrs[attrName];\n            def = this.getAttributeDefinition(attrName);\n            // SET - set function should return attributes to be set on the node,\n            // which will affect the node dimensions based on the reference bounding\n            // box. e.g. `width`, `height`, `d`, `rx`, `ry`, `points\n            var setResult = def.set.call(this, attrVal, refBBox.clone(), node, rawAttrs, this);\n            if (isObject(setResult)) {\n                assign(nodeAttrs, setResult);\n            } else if (setResult !== undefined) {\n                nodeAttrs[attrName] = setResult;\n            }\n        }\n\n        if (node instanceof HTMLElement) {\n            // TODO: setting the `transform` attribute on HTMLElements\n            // via `node.style.transform = 'matrix(...)';` would introduce\n            // a breaking change (e.g. basic.TextBlock).\n            this.setNodeAttributes(node, nodeAttrs);\n            return;\n        }\n\n        // The final translation of the subelement.\n        var nodeTransform = nodeAttrs.transform;\n        var nodeMatrix = V.transformStringToMatrix(nodeTransform);\n        var nodePosition = Point(nodeMatrix.e, nodeMatrix.f);\n        if (nodeTransform) {\n            nodeAttrs = omit(nodeAttrs, 'transform');\n            nodeMatrix.e = nodeMatrix.f = 0;\n        }\n\n        // Calculate node scale determined by the scalable group\n        // only if later needed.\n        var sx, sy, translation;\n        if (positionAttrs || offsetAttrs) {\n            var nodeScale = this.getNodeScale(node, opt.scalableNode);\n            sx = nodeScale.sx;\n            sy = nodeScale.sy;\n        }\n\n        var positioned = false;\n        for (attrName in positionAttrs) {\n            attrVal = positionAttrs[attrName];\n            def = this.getAttributeDefinition(attrName);\n            // POSITION - position function should return a point from the\n            // reference bounding box. The default position of the node is x:0, y:0 of\n            // the reference bounding box or could be further specify by some\n            // SVG attributes e.g. `x`, `y`\n            translation = def.position.call(this, attrVal, refBBox.clone(), node, rawAttrs, this);\n            if (translation) {\n                nodePosition.offset(Point(translation).scale(sx, sy));\n                positioned || (positioned = true);\n            }\n        }\n\n        // The node bounding box could depend on the `size` set from the previous loop.\n        // Here we know, that all the size attributes have been already set.\n        this.setNodeAttributes(node, nodeAttrs);\n\n        var offseted = false;\n        if (offsetAttrs) {\n            // Check if the node is visible\n            var nodeBoundingRect = this.getNodeBoundingRect(node);\n            if (nodeBoundingRect.width > 0 && nodeBoundingRect.height > 0) {\n                var nodeBBox = V.transformRect(nodeBoundingRect, nodeMatrix).scale(1 / sx, 1 / sy);\n                for (attrName in offsetAttrs) {\n                    attrVal = offsetAttrs[attrName];\n                    def = this.getAttributeDefinition(attrName);\n                    // OFFSET - offset function should return a point from the element\n                    // bounding box. The default offset point is x:0, y:0 (origin) or could be further\n                    // specify with some SVG attributes e.g. `text-anchor`, `cx`, `cy`\n                    translation = def.offset.call(this, attrVal, nodeBBox, node, rawAttrs, this);\n                    if (translation) {\n                        nodePosition.offset(Point(translation).scale(sx, sy));\n                        offseted || (offseted = true);\n                    }\n                }\n            }\n        }\n\n        // Do not touch node's transform attribute if there is no transformation applied.\n        if (nodeTransform !== undefined || positioned || offseted) {\n            // Round the coordinates to 1 decimal point.\n            nodePosition.round(1);\n            nodeMatrix.e = nodePosition.x;\n            nodeMatrix.f = nodePosition.y;\n            node.setAttribute('transform', V.matrixToTransformString(nodeMatrix));\n            // TODO: store nodeMatrix metrics?\n        }\n    },\n\n    getNodeScale: function(node, scalableNode) {\n\n        // Check if the node is a descendant of the scalable group.\n        var sx, sy;\n        if (scalableNode && scalableNode.contains(node)) {\n            var scale = scalableNode.scale();\n            sx = 1 / scale.sx;\n            sy = 1 / scale.sy;\n        } else {\n            sx = 1;\n            sy = 1;\n        }\n\n        return { sx: sx, sy: sy };\n    },\n\n    cleanNodesCache: function() {\n        this.metrics = {};\n    },\n\n    nodeCache: function(magnet) {\n\n        var metrics = this.metrics;\n        // Don't use cache? It most likely a custom view with overridden update.\n        if (!metrics) return {};\n        var id = V.ensureId(magnet);\n        var value = metrics[id];\n        if (!value) value = metrics[id] = {};\n        return value;\n    },\n\n    getNodeData: function(magnet) {\n\n        var metrics = this.nodeCache(magnet);\n        if (!metrics.data) metrics.data = {};\n        return metrics.data;\n    },\n\n    getNodeBoundingRect: function(magnet) {\n\n        var metrics = this.nodeCache(magnet);\n        if (metrics.boundingRect === undefined) metrics.boundingRect = V(magnet).getBBox();\n        return new Rect(metrics.boundingRect);\n    },\n\n    getNodeMatrix: function(magnet) {\n\n        const metrics = this.nodeCache(magnet);\n        if (metrics.magnetMatrix === undefined) {\n            const { rotatableNode, el } = this;\n            let target;\n            if (rotatableNode && rotatableNode.contains(magnet)) {\n                target = rotatableNode;\n            } else {\n                target = el;\n            }\n            metrics.magnetMatrix = V(magnet).getTransformToElement(target);\n        }\n        return V.createSVGMatrix(metrics.magnetMatrix);\n    },\n\n    getNodeShape: function(magnet) {\n\n        var metrics = this.nodeCache(magnet);\n        if (metrics.geometryShape === undefined) metrics.geometryShape = V(magnet).toGeometryShape();\n        return metrics.geometryShape.clone();\n    },\n\n    isNodeConnection: function(node) {\n        return this.model.isLink() && (!node || node === this.el);\n    },\n\n    findNodesAttributes: function(attrs, root, selectorCache, selectors) {\n\n        var i, n, nodeAttrs, nodeId;\n        var nodesAttrs = {};\n        var mergeIds = [];\n        for (var selector in attrs) {\n            if (!attrs.hasOwnProperty(selector)) continue;\n            nodeAttrs = attrs[selector];\n            if (!isPlainObject(nodeAttrs)) continue; // Not a valid selector-attributes pair\n            var selected = selectorCache[selector] = this.findBySelector(selector, root, selectors);\n            for (i = 0, n = selected.length; i < n; i++) {\n                var node = selected[i];\n                nodeId = V.ensureId(node);\n                // \"unique\" selectors are selectors that referencing a single node (defined by `selector`)\n                // groupSelector referencing a single node is not \"unique\"\n                var unique = (selectors && selectors[selector] === node);\n                var prevNodeAttrs = nodesAttrs[nodeId];\n                if (prevNodeAttrs) {\n                    // Note, that nodes referenced by deprecated `CSS selectors` are not taken into account.\n                    // e.g. css:`.circle` and selector:`circle` can be applied in a random order\n                    if (!prevNodeAttrs.array) {\n                        mergeIds.push(nodeId);\n                        prevNodeAttrs.array = true;\n                        prevNodeAttrs.attributes = [prevNodeAttrs.attributes];\n                        prevNodeAttrs.selectedLength = [prevNodeAttrs.selectedLength];\n                    }\n                    var attributes = prevNodeAttrs.attributes;\n                    var selectedLength = prevNodeAttrs.selectedLength;\n                    if (unique) {\n                        // node referenced by `selector`\n                        attributes.unshift(nodeAttrs);\n                        selectedLength.unshift(-1);\n                    } else {\n                        // node referenced by `groupSelector`\n                        var sortIndex = sortedIndex(selectedLength, n);\n                        attributes.splice(sortIndex, 0, nodeAttrs);\n                        selectedLength.splice(sortIndex, 0, n);\n                    }\n                } else {\n                    nodesAttrs[nodeId] = {\n                        attributes: nodeAttrs,\n                        selectedLength: unique ? -1 : n,\n                        node: node,\n                        array: false\n                    };\n                }\n            }\n        }\n\n        for (i = 0, n = mergeIds.length; i < n; i++) {\n            nodeId = mergeIds[i];\n            nodeAttrs = nodesAttrs[nodeId];\n            nodeAttrs.attributes = merge({}, ...nodeAttrs.attributes.reverse());\n        }\n\n        return nodesAttrs;\n    },\n\n    getEventTarget: function(evt, opt = {}) {\n        const { target, type, clientX = 0, clientY = 0 } = evt;\n        if (\n            // Explicitly defined `fromPoint` option\n            opt.fromPoint ||\n            // Touchmove/Touchend event's target is not reflecting the element under the coordinates as mousemove does.\n            // It holds the element when a touchstart triggered.\n            type === 'touchmove' || type === 'touchend' ||\n            // Pointermove/Pointerup event with the pointer captured\n            ('pointerId' in evt && target.hasPointerCapture(evt.pointerId))\n        ) {\n            return document.elementFromPoint(clientX, clientY);\n        }\n\n        return target;\n    },\n\n    // Default is to process the `model.attributes.attrs` object and set attributes on subelements based on the selectors,\n    // unless `attrs` parameter was passed.\n    updateDOMSubtreeAttributes: function(rootNode, attrs, opt) {\n\n        opt || (opt = {});\n        opt.rootBBox || (opt.rootBBox = Rect());\n        opt.selectors || (opt.selectors = this.selectors); // selector collection to use\n\n        // Cache table for query results and bounding box calculation.\n        // Note that `selectorCache` needs to be invalidated for all\n        // `updateAttributes` calls, as the selectors might pointing\n        // to nodes designated by an attribute or elements dynamically\n        // created.\n        var selectorCache = {};\n        var bboxCache = {};\n        var relativeItems = [];\n        var relativeRefItems = [];\n        var item, node, nodeAttrs, nodeData, processedAttrs;\n\n        var roAttrs = opt.roAttributes;\n        var nodesAttrs = this.findNodesAttributes(roAttrs || attrs, rootNode, selectorCache, opt.selectors);\n        // `nodesAttrs` are different from all attributes, when\n        // rendering only  attributes sent to this method.\n        var nodesAllAttrs = (roAttrs)\n            ? this.findNodesAttributes(attrs, rootNode, selectorCache, opt.selectors)\n            : nodesAttrs;\n\n        for (var nodeId in nodesAttrs) {\n            nodeData = nodesAttrs[nodeId];\n            nodeAttrs = nodeData.attributes;\n            node = nodeData.node;\n            processedAttrs = this.processNodeAttributes(node, nodeAttrs);\n\n            if (!processedAttrs.set && !processedAttrs.position && !processedAttrs.offset) {\n                // Set all the normal attributes right on the SVG/HTML element.\n                this.setNodeAttributes(node, processedAttrs.normal);\n\n            } else {\n\n                var nodeAllAttrs = nodesAllAttrs[nodeId] && nodesAllAttrs[nodeId].attributes;\n                var refSelector = (nodeAllAttrs && (nodeAttrs.ref === undefined))\n                    ? nodeAllAttrs.ref\n                    : nodeAttrs.ref;\n\n                var refNode;\n                if (refSelector) {\n                    refNode = (selectorCache[refSelector] || this.findBySelector(refSelector, rootNode, opt.selectors))[0];\n                    if (!refNode) {\n                        throw new Error('dia.CellView: \"' + refSelector + '\" reference does not exist.');\n                    }\n                } else {\n                    refNode = null;\n                }\n\n                item = {\n                    node: node,\n                    refNode: refNode,\n                    processedAttributes: processedAttrs,\n                    allAttributes: nodeAllAttrs\n                };\n\n                if (refNode) {\n                    // If an element in the list is positioned relative to this one, then\n                    // we want to insert this one before it in the list.\n                    var itemIndex = relativeRefItems.findIndex(function(item) {\n                        return item.refNode === node;\n                    });\n\n                    if (itemIndex > -1) {\n                        relativeRefItems.splice(itemIndex, 0, item);\n                    } else {\n                        relativeRefItems.push(item);\n                    }\n                } else {\n                    // A node with no ref attribute. To be updated before the nodes referencing other nodes.\n                    // The order of no-ref-items is not specified/important.\n                    relativeItems.push(item);\n                }\n            }\n        }\n\n        relativeItems.push(...relativeRefItems);\n\n        for (let i = 0, n = relativeItems.length; i < n; i++) {\n            item = relativeItems[i];\n            node = item.node;\n            refNode = item.refNode;\n\n            // Find the reference element bounding box. If no reference was provided, we\n            // use the optional bounding box.\n            const refNodeId = refNode ? V.ensureId(refNode) : '';\n            let refBBox = bboxCache[refNodeId];\n            if (!refBBox) {\n                // Get the bounding box of the reference element using to the common ancestor\n                // transformation space.\n                //\n                // @example 1\n                // <g transform=\"translate(11, 13)\">\n                //     <rect @selector=\"b\" x=\"1\" y=\"2\" width=\"3\" height=\"4\"/>\n                //     <rect @selector=\"a\"/>\n                // </g>\n                //\n                // In this case, the reference bounding box can not be affected\n                // by the `transform` attribute of the `<g>` element,\n                // because the exact transformation will be applied to the `a` element\n                // as well as to the `b` element.\n                //\n                // @example 2\n                // <g transform=\"translate(11, 13)\">\n                //     <rect @selector=\"b\" x=\"1\" y=\"2\" width=\"3\" height=\"4\"/>\n                // </g>\n                // <rect @selector=\"a\"/>\n                //\n                // In this case, the reference bounding box have to be affected by the\n                // `transform` attribute of the `<g>` element, because the `a` element\n                // is not descendant of the `<g>` element and will not be affected\n                // by the transformation.\n                refBBox = bboxCache[refNodeId] = (refNode)\n                    ? V(refNode).getBBox({ target: getCommonAncestorNode(node, refNode) })\n                    : opt.rootBBox;\n            }\n\n            if (roAttrs) {\n                // if there was a special attribute affecting the position amongst passed-in attributes\n                // we have to merge it with the rest of the element's attributes as they are necessary\n                // to update the position relatively (i.e `ref-x` && 'ref-dx')\n                processedAttrs = this.processNodeAttributes(node, item.allAttributes);\n                this.mergeProcessedAttributes(processedAttrs, item.processedAttributes);\n\n            } else {\n                processedAttrs = item.processedAttributes;\n            }\n\n            this.updateRelativeAttributes(node, processedAttrs, refBBox, opt);\n        }\n    },\n\n    mergeProcessedAttributes: function(processedAttrs, roProcessedAttrs) {\n\n        processedAttrs.set || (processedAttrs.set = {});\n        processedAttrs.position || (processedAttrs.position = {});\n        processedAttrs.offset || (processedAttrs.offset = {});\n\n        assign(processedAttrs.set, roProcessedAttrs.set);\n        assign(processedAttrs.position, roProcessedAttrs.position);\n        assign(processedAttrs.offset, roProcessedAttrs.offset);\n\n        // Handle also the special transform property.\n        var transform = processedAttrs.normal && processedAttrs.normal.transform;\n        if (transform !== undefined && roProcessedAttrs.normal) {\n            roProcessedAttrs.normal.transform = transform;\n        }\n        processedAttrs.normal = roProcessedAttrs.normal;\n    },\n\n    // Lifecycle methods\n\n    // Called when the view is attached to the DOM,\n    // as result of `cell.addTo(graph)` being called (isInitialMount === true)\n    // or `paper.options.viewport` returning `true` (isInitialMount === false).\n    onMount(isInitialMount) {\n        if (isInitialMount) return;\n        this.mountTools();\n        HighlighterView.mount(this);\n    },\n\n    // Called when the view is detached from the DOM,\n    // as result of `paper.options.viewport` returning `false`.\n    onDetach() {\n        this.unmountTools();\n        HighlighterView.unmount(this);\n    },\n\n    // Called when the view is removed from the DOM\n    // as result of `cell.remove()`.\n    onRemove: function() {\n        this.removeTools();\n        this.removeHighlighters();\n    },\n\n    _toolsView: null,\n\n    hasTools: function(name) {\n        var toolsView = this._toolsView;\n        if (!toolsView) return false;\n        if (!name) return true;\n        return (toolsView.getName() === name);\n    },\n\n    addTools: function(toolsView) {\n\n        this.removeTools();\n\n        if (toolsView) {\n            this._toolsView = toolsView;\n            toolsView.configure({ relatedView: this });\n            toolsView.listenTo(this.paper, 'tools:event', this.onToolEvent.bind(this));\n        }\n        return this;\n    },\n\n    unmountTools() {\n        const toolsView = this._toolsView;\n        if (toolsView) toolsView.unmount();\n        return this;\n    },\n\n    mountTools() {\n        const toolsView = this._toolsView;\n        // Prevent unnecessary re-appending of the tools.\n        if (toolsView && !toolsView.isMounted()) toolsView.mount();\n        return this;\n    },\n\n    updateTools: function(opt) {\n\n        var toolsView = this._toolsView;\n        if (toolsView) toolsView.update(opt);\n        return this;\n    },\n\n    removeTools: function() {\n\n        var toolsView = this._toolsView;\n        if (toolsView) {\n            toolsView.remove();\n            this._toolsView = null;\n        }\n        return this;\n    },\n\n    hideTools: function() {\n\n        var toolsView = this._toolsView;\n        if (toolsView) toolsView.hide();\n        return this;\n    },\n\n    showTools: function() {\n\n        var toolsView = this._toolsView;\n        if (toolsView) toolsView.show();\n        return this;\n    },\n\n    onToolEvent: function(event) {\n        switch (event) {\n            case 'remove':\n                this.removeTools();\n                break;\n            case 'hide':\n                this.hideTools();\n                break;\n            case 'show':\n                this.showTools();\n                break;\n        }\n    },\n\n    removeHighlighters: function() {\n        HighlighterView.remove(this);\n    },\n\n    updateHighlighters: function(dirty = false) {\n        HighlighterView.update(this, null, dirty);\n    },\n\n    transformHighlighters: function() {\n        HighlighterView.transform(this);\n    },\n\n    // Interaction. The controller part.\n    // ---------------------------------\n\n    preventDefaultInteraction(evt) {\n        this.eventData(evt, { defaultInteractionPrevented: true  });\n    },\n\n    isDefaultInteractionPrevented(evt) {\n        const { defaultInteractionPrevented = false } = this.eventData(evt);\n        return defaultInteractionPrevented;\n    },\n\n    // Interaction is handled by the paper and delegated to the view in interest.\n    // `x` & `y` parameters passed to these functions represent the coordinates already snapped to the paper grid.\n    // If necessary, real coordinates can be obtained from the `evt` event object.\n\n    // These functions are supposed to be overridden by the views that inherit from `joint.dia.Cell`,\n    // i.e. `joint.dia.Element` and `joint.dia.Link`.\n\n    pointerdblclick: function(evt, x, y) {\n\n        this.notify('cell:pointerdblclick', evt, x, y);\n    },\n\n    pointerclick: function(evt, x, y) {\n\n        this.notify('cell:pointerclick', evt, x, y);\n    },\n\n    contextmenu: function(evt, x, y) {\n\n        this.notify('cell:contextmenu', evt, x, y);\n    },\n\n    pointerdown: function(evt, x, y) {\n\n        const { model } = this;\n        const { graph } = model;\n        if (graph) {\n            model.startBatch('pointer');\n            this.eventData(evt, { graph });\n        }\n\n        this.notify('cell:pointerdown', evt, x, y);\n    },\n\n    pointermove: function(evt, x, y) {\n\n        this.notify('cell:pointermove', evt, x, y);\n    },\n\n    pointerup: function(evt, x, y) {\n\n        const { graph } = this.eventData(evt);\n\n        this.notify('cell:pointerup', evt, x, y);\n\n        if (graph) {\n            // we don't want to trigger event on model as model doesn't\n            // need to be member of collection anymore (remove)\n            graph.stopBatch('pointer', { cell: this.model });\n        }\n    },\n\n    mouseover: function(evt) {\n\n        this.notify('cell:mouseover', evt);\n    },\n\n    mouseout: function(evt) {\n\n        this.notify('cell:mouseout', evt);\n    },\n\n    mouseenter: function(evt) {\n\n        this.notify('cell:mouseenter', evt);\n    },\n\n    mouseleave: function(evt) {\n\n        this.notify('cell:mouseleave', evt);\n    },\n\n    mousewheel: function(evt, x, y, delta) {\n\n        this.notify('cell:mousewheel', evt, x, y, delta);\n    },\n\n    onevent: function(evt, eventName, x, y) {\n\n        this.notify(eventName, evt, x, y);\n    },\n\n    onmagnet: function() {\n\n        // noop\n    },\n\n    magnetpointerdblclick: function() {\n\n        // noop\n    },\n\n    magnetcontextmenu: function() {\n\n        // noop\n    },\n\n    checkMouseleave(evt) {\n        const { paper, model } = this;\n        if (paper.isAsync()) {\n            // Make sure the source/target views are updated before this view.\n            // It's not 100% bulletproof (see below) but it's a good enough solution for now.\n            // The connected cells could be links as well. In that case, we would\n            // need to recursively go through all the connected links and update\n            // their source/target views as well.\n            if (model.isLink()) {\n                // The `this.sourceView` and `this.targetView` might not be updated yet.\n                // We need to find the view by the model.\n                const sourceElement = model.getSourceElement();\n                if (sourceElement) {\n                    const sourceView = paper.findViewByModel(sourceElement);\n                    if (sourceView) {\n                        paper.dumpView(sourceView);\n                        paper.checkViewVisibility(sourceView);\n                    }\n                }\n                const targetElement = model.getTargetElement();\n                if (targetElement) {\n                    const targetView = paper.findViewByModel(targetElement);\n                    if (targetView) {\n                        paper.dumpView(targetView);\n                        paper.checkViewVisibility(targetView);\n                    }\n                }\n            }\n            // Do the updates of the current view synchronously now\n            paper.dumpView(this);\n            paper.checkViewVisibility(this);\n        }\n        const target = this.getEventTarget(evt, { fromPoint: true });\n        const view = paper.findView(target);\n        if (view === this) return;\n        // Leaving the current view\n        this.mouseleave(evt);\n        if (!view) return;\n        // Entering another view\n        view.mouseenter(evt);\n    },\n\n    setInteractivity: function(value) {\n\n        this.options.interactive = value;\n    }\n}, {\n\n    Flags,\n\n    Highlighting: HighlightingTypes,\n\n    addPresentationAttributes: function(presentationAttributes) {\n        return merge({}, result(this.prototype, 'presentationAttributes'), presentationAttributes, function(a, b) {\n            if (!a || !b) return;\n            if (typeof a === 'string') a = [a];\n            if (typeof b === 'string') b = [b];\n            if (Array.isArray(a) && Array.isArray(b)) return uniq(a.concat(b));\n        });\n    }\n});\n\n// TODO: Move to Vectorizer library.\nfunction getCommonAncestorNode(node1, node2) {\n    let parent = node1;\n    do {\n        if (parent.contains(node2)) return parent;\n        parent = parent.parentNode;\n    } while (parent);\n    return null;\n}\n\n","import { config } from '../config/index.mjs';\nimport { assign, isFunction, toArray } from '../util/index.mjs';\nimport { CellView } from './CellView.mjs';\nimport { Cell } from './Cell.mjs';\nimport V from '../V/index.mjs';\nimport { elementViewPortPrototype } from './ports.mjs';\nimport { Rect, snapToGrid } from '../g/index.mjs';\n\nconst Flags = {\n    TOOLS: CellView.Flags.TOOLS,\n    UPDATE: 'UPDATE',\n    TRANSLATE: 'TRANSLATE',\n    RESIZE: 'RESIZE',\n    PORTS: 'PORTS',\n    ROTATE: 'ROTATE',\n    RENDER: 'RENDER'\n};\n\nconst DragActions = {\n    MOVE: 'move',\n    MAGNET: 'magnet',\n};\n// Element base view and controller.\n// -------------------------------------------\n\nexport const ElementView = CellView.extend({\n\n    /**\n     * @abstract\n     */\n    _removePorts: function() {\n        // implemented in ports.js\n    },\n\n    /**\n     *\n     * @abstract\n     */\n    _renderPorts: function() {\n        // implemented in ports.js\n    },\n\n    className: function() {\n\n        var classNames = CellView.prototype.className.apply(this).split(' ');\n\n        classNames.push('element');\n\n        return classNames.join(' ');\n    },\n\n    initialize: function() {\n\n        CellView.prototype.initialize.apply(this, arguments);\n\n        this._initializePorts();\n    },\n\n    presentationAttributes: {\n        'attrs': [Flags.UPDATE],\n        'position': [Flags.TRANSLATE, Flags.TOOLS],\n        'size': [Flags.RESIZE, Flags.PORTS, Flags.TOOLS],\n        'angle': [Flags.ROTATE, Flags.TOOLS],\n        'markup': [Flags.RENDER],\n        'ports': [Flags.PORTS],\n    },\n\n    initFlag: [Flags.RENDER],\n\n    UPDATE_PRIORITY: 0,\n\n    confirmUpdate: function(flag, opt) {\n\n        const { useCSSSelectors } = config;\n        if (this.hasFlag(flag, Flags.PORTS)) {\n            this._removePorts();\n            this._cleanPortsCache();\n        }\n        let transformHighlighters = false;\n        if (this.hasFlag(flag, Flags.RENDER)) {\n            this.render();\n            this.updateTools(opt);\n            this.updateHighlighters(true);\n            transformHighlighters = true;\n            flag = this.removeFlag(flag, [Flags.RENDER, Flags.UPDATE, Flags.RESIZE, Flags.TRANSLATE, Flags.ROTATE, Flags.PORTS, Flags.TOOLS]);\n        } else {\n            let updateHighlighters = false;\n\n            // Skip this branch if render is required\n            if (this.hasFlag(flag, Flags.RESIZE)) {\n                this.resize(opt);\n                updateHighlighters = true;\n                // Resize method is calling `update()` internally\n                flag = this.removeFlag(flag, [Flags.RESIZE, Flags.UPDATE]);\n                if (useCSSSelectors) {\n                    // `resize()` rendered the ports when useCSSSelectors are enabled\n                    flag = this.removeFlag(flag, Flags.PORTS);\n                }\n            }\n            if (this.hasFlag(flag, Flags.UPDATE)) {\n                this.update(this.model, null, opt);\n                flag = this.removeFlag(flag, Flags.UPDATE);\n                updateHighlighters = true;\n                if (useCSSSelectors) {\n                    // `update()` will render ports when useCSSSelectors are enabled\n                    flag = this.removeFlag(flag, Flags.PORTS);\n                }\n            }\n            if (this.hasFlag(flag, Flags.TRANSLATE)) {\n                this.translate();\n                flag = this.removeFlag(flag, Flags.TRANSLATE);\n                transformHighlighters = true;\n            }\n            if (this.hasFlag(flag, Flags.ROTATE)) {\n                this.rotate();\n                flag = this.removeFlag(flag, Flags.ROTATE);\n                transformHighlighters = true;\n            }\n            if (this.hasFlag(flag, Flags.PORTS)) {\n                this._renderPorts();\n                updateHighlighters = true;\n                flag = this.removeFlag(flag, Flags.PORTS);\n            }\n\n            if (updateHighlighters) {\n                this.updateHighlighters(false);\n            }\n        }\n\n        if (transformHighlighters) {\n            this.transformHighlighters();\n        }\n\n        if (this.hasFlag(flag, Flags.TOOLS)) {\n            this.updateTools(opt);\n            flag = this.removeFlag(flag, Flags.TOOLS);\n        }\n\n        return flag;\n    },\n\n    /**\n     * @abstract\n     */\n    _initializePorts: function() {\n\n    },\n\n    update: function(_, renderingOnlyAttrs) {\n\n        this.cleanNodesCache();\n\n        // When CSS selector strings are used, make sure no rule matches port nodes.\n        const { useCSSSelectors } = config;\n        if (useCSSSelectors) this._removePorts();\n\n        var model = this.model;\n        var modelAttrs = model.attr();\n        this.updateDOMSubtreeAttributes(this.el, modelAttrs, {\n            rootBBox: new Rect(model.size()),\n            selectors: this.selectors,\n            scalableNode: this.scalableNode,\n            rotatableNode: this.rotatableNode,\n            // Use rendering only attributes if they differs from the model attributes\n            roAttributes: (renderingOnlyAttrs === modelAttrs) ? null : renderingOnlyAttrs\n        });\n\n        if (useCSSSelectors) {\n            this._renderPorts();\n        }\n    },\n\n    rotatableSelector: 'rotatable',\n    scalableSelector: 'scalable',\n    scalableNode: null,\n    rotatableNode: null,\n\n    // `prototype.markup` is rendered by default. Set the `markup` attribute on the model if the\n    // default markup is not desirable.\n    renderMarkup: function() {\n\n        var element = this.model;\n        var markup = element.get('markup') || element.markup;\n        if (!markup) throw new Error('dia.ElementView: markup required');\n        if (Array.isArray(markup)) return this.renderJSONMarkup(markup);\n        if (typeof markup === 'string') return this.renderStringMarkup(markup);\n        throw new Error('dia.ElementView: invalid markup');\n    },\n\n    renderJSONMarkup: function(markup) {\n\n        var doc = this.parseDOMJSON(markup, this.el);\n        var selectors = this.selectors = doc.selectors;\n        this.rotatableNode = V(selectors[this.rotatableSelector]) || null;\n        this.scalableNode = V(selectors[this.scalableSelector]) || null;\n        // Fragment\n        this.vel.append(doc.fragment);\n    },\n\n    renderStringMarkup: function(markup) {\n\n        var vel = this.vel;\n        vel.append(V(markup));\n        // Cache transformation groups\n        this.rotatableNode = vel.findOne('.rotatable');\n        this.scalableNode = vel.findOne('.scalable');\n\n        var selectors = this.selectors = {};\n        selectors[this.selector] = this.el;\n    },\n\n    render: function() {\n\n        this.vel.empty();\n        this.renderMarkup();\n        if (this.scalableNode) {\n            // Double update is necessary for elements with the scalable group only\n            // Note the resize() triggers the other `update`.\n            this.update();\n        }\n        this.resize();\n        if (this.rotatableNode) {\n            // Translate transformation is applied on `this.el` while the rotation transformation\n            // on `this.rotatableNode`\n            this.rotate();\n            this.translate();\n        } else {\n            this.updateTransformation();\n        }\n        if (!config.useCSSSelectors) this._renderPorts();\n        return this;\n    },\n\n    resize: function(opt) {\n\n        if (this.scalableNode) return this.sgResize(opt);\n        if (this.model.attributes.angle) this.rotate();\n        this.update();\n    },\n\n    translate: function() {\n\n        if (this.rotatableNode) return this.rgTranslate();\n        this.updateTransformation();\n    },\n\n    rotate: function() {\n\n        if (this.rotatableNode) {\n            this.rgRotate();\n            // It's necessary to call the update for the nodes outside\n            // the rotatable group referencing nodes inside the group\n            this.update();\n            return;\n        }\n        this.updateTransformation();\n    },\n\n    updateTransformation: function() {\n\n        var transformation = this.getTranslateString();\n        var rotateString = this.getRotateString();\n        if (rotateString) transformation += ' ' + rotateString;\n        this.vel.attr('transform', transformation);\n    },\n\n    getTranslateString: function() {\n\n        var position = this.model.attributes.position;\n        return 'translate(' + position.x + ',' + position.y + ')';\n    },\n\n    getRotateString: function() {\n        var attributes = this.model.attributes;\n        var angle = attributes.angle;\n        if (!angle) return null;\n        var size = attributes.size;\n        return 'rotate(' + angle + ',' + (size.width / 2) + ',' + (size.height / 2) + ')';\n    },\n\n    // Rotatable & Scalable Group\n    // always slower, kept mainly for backwards compatibility\n\n    rgRotate: function() {\n\n        this.rotatableNode.attr('transform', this.getRotateString());\n    },\n\n    rgTranslate: function() {\n\n        this.vel.attr('transform', this.getTranslateString());\n    },\n\n    sgResize: function(opt) {\n\n        var model = this.model;\n        var angle = model.angle();\n        var size = model.size();\n        var scalable = this.scalableNode;\n\n        // Getting scalable group's bbox.\n        // Due to a bug in webkit's native SVG .getBBox implementation, the bbox of groups with path children includes the paths' control points.\n        // To work around the issue, we need to check whether there are any path elements inside the scalable group.\n        var recursive = false;\n        if (scalable.node.getElementsByTagName('path').length > 0) {\n            // If scalable has at least one descendant that is a path, we need to switch to recursive bbox calculation.\n            // If there are no path descendants, group bbox calculation works and so we can use the (faster) native function directly.\n            recursive = true;\n        }\n        var scalableBBox = scalable.getBBox({ recursive: recursive });\n\n        // Make sure `scalableBbox.width` and `scalableBbox.height` are not zero which can happen if the element does not have any content. By making\n        // the width/height 1, we prevent HTML errors of the type `scale(Infinity, Infinity)`.\n        var sx = (size.width / (scalableBBox.width || 1));\n        var sy = (size.height / (scalableBBox.height || 1));\n        scalable.attr('transform', 'scale(' + sx + ',' + sy + ')');\n\n        // Now the interesting part. The goal is to be able to store the object geometry via just `x`, `y`, `angle`, `width` and `height`\n        // Order of transformations is significant but we want to reconstruct the object always in the order:\n        // resize(), rotate(), translate() no matter of how the object was transformed. For that to work,\n        // we must adjust the `x` and `y` coordinates of the object whenever we resize it (because the origin of the\n        // rotation changes). The new `x` and `y` coordinates are computed by canceling the previous rotation\n        // around the center of the resized object (which is a different origin then the origin of the previous rotation)\n        // and getting the top-left corner of the resulting object. Then we clean up the rotation back to what it originally was.\n\n        // Cancel the rotation but now around a different origin, which is the center of the scaled object.\n        var rotatable = this.rotatableNode;\n        var rotation = rotatable && rotatable.attr('transform');\n        if (rotation) {\n\n            rotatable.attr('transform', rotation + ' rotate(' + (-angle) + ',' + (size.width / 2) + ',' + (size.height / 2) + ')');\n            var rotatableBBox = scalable.getBBox({ target: this.paper.cells });\n\n            // Store new x, y and perform rotate() again against the new rotation origin.\n            model.set('position', { x: rotatableBBox.x, y: rotatableBBox.y }, assign({ updateHandled: true }, opt));\n            this.translate();\n            this.rotate();\n        }\n\n        // Update must always be called on non-rotated element. Otherwise, relative positioning\n        // would work with wrong (rotated) bounding boxes.\n        this.update();\n    },\n\n    // Embedding mode methods.\n    // -----------------------\n\n    prepareEmbedding: function(data = {}) {\n\n        const element = data.model || this.model;\n        const paper = data.paper || this.paper;\n        const graph = paper.model;\n\n        const initialZIndices = data.initialZIndices = {};\n        const embeddedCells = element.getEmbeddedCells({ deep: true });\n        const connectedLinks = graph.getConnectedLinks(element, { deep: true, includeEnclosed: true });\n\n        // Note: an embedded cell can be a connect link, but it's fine\n        // to iterate over the cell twice.\n        [\n            element,\n            ...embeddedCells,\n            ...connectedLinks\n        ].forEach(cell => initialZIndices[cell.id] = cell.attributes.z);\n\n        element.startBatch('to-front');\n\n        // Bring the model to the front with all his embeds.\n        element.toFront({ deep: true, ui: true });\n\n        // Note that at this point cells in the collection are not sorted by z index (it's running in the batch, see\n        // the dia.Graph._sortOnChangeZ), so we can't assume that the last cell in the collection has the highest z.\n        const maxZ = graph.getElements().reduce((max, cell) => Math.max(max, cell.attributes.z || 0), 0);\n\n        // Move to front also all the inbound and outbound links that are connected\n        // to any of the element descendant. If we bring to front only embedded elements,\n        // links connected to them would stay in the background.\n        connectedLinks.forEach((link) => {\n            if (link.attributes.z <= maxZ) {\n                link.set('z', maxZ + 1, { ui: true });\n            }\n        });\n\n        element.stopBatch('to-front');\n\n        // Before we start looking for suitable parent we remove the current one.\n        const parentId = element.parent();\n        if (parentId) {\n            const parent = graph.getCell(parentId);\n            parent.unembed(element, { ui: true });\n            data.initialParentId = parentId;\n        } else {\n            data.initialParentId = null;\n        }\n    },\n\n    processEmbedding: function(data = {}, evt, x, y) {\n\n        const model = data.model || this.model;\n        const paper = data.paper || this.paper;\n        const graph = paper.model;\n        const { findParentBy, frontParentOnly, validateEmbedding } = paper.options;\n\n        let candidates;\n        if (isFunction(findParentBy)) {\n            candidates = toArray(findParentBy.call(graph, this, evt, x, y));\n        } else if (findParentBy === 'pointer') {\n            candidates = toArray(graph.findModelsFromPoint({ x, y }));\n        } else {\n            candidates = graph.findModelsUnderElement(model, { searchBy: findParentBy });\n        }\n\n        candidates = candidates.filter((el) => {\n            return (el instanceof Cell) && (model.id !== el.id) && !el.isEmbeddedIn(model);\n        });\n\n        if (frontParentOnly) {\n            // pick the element with the highest `z` index\n            candidates = candidates.slice(-1);\n        }\n\n        let newCandidateView = null;\n        const prevCandidateView = data.candidateEmbedView;\n\n        // iterate over all candidates starting from the last one (has the highest z-index).\n        for (let i = candidates.length - 1; i >= 0; i--) {\n            const candidate = candidates[i];\n            if (prevCandidateView && prevCandidateView.model.id == candidate.id) {\n                // candidate remains the same\n                newCandidateView = prevCandidateView;\n                break;\n            } else {\n                const view = candidate.findView(paper);\n                if (!isFunction(validateEmbedding) || validateEmbedding.call(paper, this, view)) {\n                    // flip to the new candidate\n                    newCandidateView = view;\n                    break;\n                }\n            }\n        }\n\n        if (newCandidateView && newCandidateView != prevCandidateView) {\n            // A new candidate view found. Highlight the new one.\n            this.clearEmbedding(data);\n            data.candidateEmbedView = newCandidateView.highlight(\n                newCandidateView.findProxyNode(null, 'container'),\n                { embedding: true }\n            );\n        }\n\n        if (!newCandidateView && prevCandidateView) {\n            // No candidate view found. Unhighlight the previous candidate.\n            this.clearEmbedding(data);\n        }\n    },\n\n    clearEmbedding: function(data) {\n\n        data || (data = {});\n\n        var candidateView = data.candidateEmbedView;\n        if (candidateView) {\n            // No candidate view found. Unhighlight the previous candidate.\n            candidateView.unhighlight(\n                candidateView.findProxyNode(null, 'container'),\n                { embedding: true }\n            );\n            data.candidateEmbedView = null;\n        }\n    },\n\n    finalizeEmbedding: function(data = {}) {\n\n        const candidateView = data.candidateEmbedView;\n        const element = data.model || this.model;\n        const paper = data.paper || this.paper;\n\n        if (candidateView) {\n\n            // We finished embedding. Candidate view is chosen to become the parent of the model.\n            candidateView.model.embed(element, { ui: true });\n            candidateView.unhighlight(candidateView.findProxyNode(null, 'container'), { embedding: true });\n\n            data.candidateEmbedView = null;\n\n        } else {\n\n            const { validateUnembedding } = paper.options;\n            const { initialParentId } = data;\n            // The element was originally embedded into another element.\n            // The interaction would unembed the element. Let's validate\n            // if the element can be unembedded.\n            if (\n                initialParentId &&\n                typeof validateUnembedding === 'function' &&\n                !validateUnembedding.call(paper, this)\n            ) {\n                this._disallowUnembed(data);\n                return;\n            }\n        }\n\n        paper.model.getConnectedLinks(element, { deep: true }).forEach(link => {\n            link.reparent({ ui: true });\n        });\n    },\n\n    _disallowUnembed: function(data) {\n        const { model, whenNotAllowed = 'revert' } = data;\n        const element = model || this.model;\n        const paper = data.paper || this.paper;\n        const graph = paper.model;\n        switch (whenNotAllowed) {\n            case 'remove': {\n                element.remove({ ui: true });\n                break;\n            }\n            case 'revert': {\n                const { initialParentId, initialPosition, initialZIndices } = data;\n                // Revert the element's position (and the position of its embedded cells if any)\n                if (initialPosition) {\n                    const { x, y } = initialPosition;\n                    element.position(x, y, { deep: true, ui: true });\n                }\n                // Revert all the z-indices changed during the embedding\n                if (initialZIndices) {\n                    Object.keys(initialZIndices).forEach(id => {\n                        const cell = graph.getCell(id);\n                        if (cell) {\n                            cell.set('z', initialZIndices[id], { ui: true });\n                        }\n                    });\n                }\n                // Revert the original parent\n                const parent = graph.getCell(initialParentId);\n                if (parent) {\n                    parent.embed(element, { ui: true });\n                }\n                break;\n            }\n        }\n    },\n\n    getDelegatedView: function() {\n\n        var view = this;\n        var model = view.model;\n        var paper = view.paper;\n\n        while (view) {\n            if (model.isLink()) break;\n            if (!model.isEmbedded() || view.can('stopDelegation')) return view;\n            model = model.getParentCell();\n            view = paper.findViewByModel(model);\n        }\n\n        return null;\n    },\n\n    findProxyNode: function(el, type) {\n        el || (el = this.el);\n        const nodeSelector = el.getAttribute(`${type}-selector`);\n        if (nodeSelector) {\n            const port = this.findAttribute('port', el);\n            if (port) {\n                const proxyPortNode = this.findPortNode(port, nodeSelector);\n                if (proxyPortNode) return proxyPortNode;\n            } else {\n                const [proxyNode] = this.findBySelector(nodeSelector);\n                if (proxyNode) return proxyNode;\n            }\n        }\n        return el;\n    },\n\n    // Interaction. The controller part.\n    // ---------------------------------\n\n    notifyPointerdown(evt, x, y) {\n        CellView.prototype.pointerdown.call(this, evt, x, y);\n        this.notify('element:pointerdown', evt, x, y);\n    },\n\n    notifyPointermove(evt, x, y) {\n        CellView.prototype.pointermove.call(this, evt, x, y);\n        this.notify('element:pointermove', evt, x, y);\n    },\n\n    notifyPointerup(evt, x, y) {\n        this.notify('element:pointerup', evt, x, y);\n        CellView.prototype.pointerup.call(this, evt, x, y);\n    },\n\n    pointerdblclick: function(evt, x, y) {\n\n        CellView.prototype.pointerdblclick.apply(this, arguments);\n        this.notify('element:pointerdblclick', evt, x, y);\n    },\n\n    pointerclick: function(evt, x, y) {\n\n        CellView.prototype.pointerclick.apply(this, arguments);\n        this.notify('element:pointerclick', evt, x, y);\n    },\n\n    contextmenu: function(evt, x, y) {\n\n        CellView.prototype.contextmenu.apply(this, arguments);\n        this.notify('element:contextmenu', evt, x, y);\n    },\n\n    pointerdown: function(evt, x, y) {\n\n        this.notifyPointerdown(evt, x, y);\n        this.dragStart(evt, x, y);\n    },\n\n    pointermove: function(evt, x, y) {\n\n        const data = this.eventData(evt);\n        const { targetMagnet, action, delegatedView } = data;\n\n        if (targetMagnet) {\n            this.magnetpointermove(evt, targetMagnet, x, y);\n        }\n\n        switch (action) {\n            case DragActions.MAGNET:\n                this.dragMagnet(evt, x, y);\n                break;\n            case DragActions.MOVE:\n                (delegatedView || this).drag(evt, x, y);\n            // eslint: no-fallthrough=false\n            default:\n                if (data.preventPointerEvents) break;\n                this.notifyPointermove(evt, x, y);\n                break;\n        }\n\n        // Make sure the element view data is passed along.\n        // It could have been wiped out in the handlers above.\n        this.eventData(evt, data);\n    },\n\n    pointerup: function(evt, x, y) {\n\n        const data = this.eventData(evt);\n        const { targetMagnet, action, delegatedView } = data;\n\n        if (targetMagnet) {\n            this.magnetpointerup(evt, targetMagnet, x, y);\n        }\n\n        switch (action) {\n            case DragActions.MAGNET:\n                this.dragMagnetEnd(evt, x, y);\n                break;\n            case DragActions.MOVE:\n                (delegatedView || this).dragEnd(evt, x, y);\n            // eslint: no-fallthrough=false\n            default:\n                if (data.preventPointerEvents) break;\n                this.notifyPointerup(evt, x, y);\n        }\n\n        if (targetMagnet) {\n            this.magnetpointerclick(evt, targetMagnet, x, y);\n        }\n\n        this.checkMouseleave(evt);\n    },\n\n    mouseover: function(evt) {\n\n        CellView.prototype.mouseover.apply(this, arguments);\n        this.notify('element:mouseover', evt);\n    },\n\n    mouseout: function(evt) {\n\n        CellView.prototype.mouseout.apply(this, arguments);\n        this.notify('element:mouseout', evt);\n    },\n\n    mouseenter: function(evt) {\n\n        CellView.prototype.mouseenter.apply(this, arguments);\n        this.notify('element:mouseenter', evt);\n    },\n\n    mouseleave: function(evt) {\n\n        CellView.prototype.mouseleave.apply(this, arguments);\n        this.notify('element:mouseleave', evt);\n    },\n\n    mousewheel: function(evt, x, y, delta) {\n\n        CellView.prototype.mousewheel.apply(this, arguments);\n        this.notify('element:mousewheel', evt, x, y, delta);\n    },\n\n    onmagnet: function(evt, x, y) {\n\n        const { currentTarget: targetMagnet } = evt;\n        this.magnetpointerdown(evt, targetMagnet, x, y);\n        this.eventData(evt, { targetMagnet });\n        this.dragMagnetStart(evt, x, y);\n    },\n\n    magnetpointerdown: function(evt, magnet, x, y) {\n\n        this.notify('element:magnet:pointerdown', evt, magnet, x, y);\n    },\n\n    magnetpointermove: function(evt, magnet, x, y) {\n\n        this.notify('element:magnet:pointermove', evt, magnet, x, y);\n    },\n\n    magnetpointerup: function(evt, magnet, x, y) {\n\n        this.notify('element:magnet:pointerup', evt, magnet, x, y);\n    },\n\n    magnetpointerdblclick: function(evt, magnet, x, y) {\n\n        this.notify('element:magnet:pointerdblclick', evt, magnet, x, y);\n    },\n\n    magnetcontextmenu: function(evt, magnet, x, y) {\n\n        this.notify('element:magnet:contextmenu', evt, magnet, x, y);\n    },\n\n    // Drag Start Handlers\n\n    dragStart: function(evt, x, y) {\n\n        if (this.isDefaultInteractionPrevented(evt)) return;\n\n        var view = this.getDelegatedView();\n        if (!view || !view.can('elementMove')) return;\n\n        this.eventData(evt, {\n            action: DragActions.MOVE,\n            delegatedView: view\n        });\n\n        const position = view.model.position();\n        view.eventData(evt, {\n            initialPosition: position,\n            pointerOffset: position.difference(x, y),\n            restrictedArea: this.paper.getRestrictedArea(view, x, y)\n        });\n    },\n\n    dragMagnetStart: function(evt, x, y) {\n\n        const { paper } = this;\n        const isPropagationAlreadyStopped = evt.isPropagationStopped();\n        if (isPropagationAlreadyStopped) {\n            // Special case when the propagation was already stopped\n            // on the `element:magnet:pointerdown` event.\n            // Do not trigger any `element:pointer*` events\n            // but still start the magnet dragging.\n            this.eventData(evt, { preventPointerEvents: true });\n        }\n\n        if (this.isDefaultInteractionPrevented(evt) || !this.can('addLinkFromMagnet')) {\n            // Stop the default action, which is to start dragging a link.\n            return;\n        }\n\n        const { targetMagnet = evt.currentTarget } = this.eventData(evt);\n        evt.stopPropagation();\n\n        // Invalid (Passive) magnet. Start dragging the element.\n        if (!paper.options.validateMagnet.call(paper, this, targetMagnet, evt)) {\n            if (isPropagationAlreadyStopped) {\n                // Do not trigger `element:pointerdown` and start element dragging\n                // if the propagation was stopped.\n                this.dragStart(evt, x, y);\n                // The `element:pointerdown` event is not triggered because\n                // of `preventPointerEvents` flag.\n            } else {\n                // We need to reset the action\n                // to `MOVE` so that the element is dragged.\n                this.pointerdown(evt, x, y);\n            }\n            return;\n        }\n\n        // Valid magnet. Start dragging a link.\n        if (paper.options.magnetThreshold <= 0) {\n            this.dragLinkStart(evt, targetMagnet, x, y);\n        }\n        this.eventData(evt, { action: DragActions.MAGNET });\n    },\n\n    // Drag Handlers\n\n    drag: function(evt, x, y) {\n\n        var paper = this.paper;\n        var grid = paper.options.gridSize;\n        var element = this.model;\n        var data = this.eventData(evt);\n        var { pointerOffset, restrictedArea, embedding } = data;\n\n        // Make sure the new element's position always snaps to the current grid\n        var elX = snapToGrid(x + pointerOffset.x, grid);\n        var elY = snapToGrid(y + pointerOffset.y, grid);\n\n        element.position(elX, elY, { restrictedArea, deep: true, ui: true });\n\n        if (paper.options.embeddingMode) {\n            if (!embedding) {\n                // Prepare the element for embedding only if the pointer moves.\n                // We don't want to do unnecessary action with the element\n                // if an user only clicks/dblclicks on it.\n                this.prepareEmbedding(data);\n                embedding = true;\n            }\n            this.processEmbedding(data, evt, x, y);\n        }\n\n        this.eventData(evt, {\n            embedding\n        });\n    },\n\n    dragMagnet: function(evt, x, y) {\n        this.dragLink(evt, x, y);\n    },\n\n    // Drag End Handlers\n\n    dragEnd: function(evt, x, y) {\n\n        var data = this.eventData(evt);\n        if (data.embedding) this.finalizeEmbedding(data);\n    },\n\n    dragMagnetEnd: function(evt, x, y) {\n        this.dragLinkEnd(evt, x, y);\n    },\n\n    magnetpointerclick: function(evt, magnet, x, y) {\n        var paper = this.paper;\n        if (paper.eventData(evt).mousemoved > paper.options.clickThreshold) return;\n        this.notify('element:magnet:pointerclick', evt, magnet, x, y);\n    }\n\n}, {\n\n    Flags: Flags,\n});\n\nassign(ElementView.prototype, elementViewPortPrototype);\n","// Does not make any changes to vertices.\n// Returns the arguments that are passed to it, unchanged.\nexport const normal = function(vertices, opt, linkView) {\n\n    return vertices;\n};\n","import * as util from '../util/index.mjs';\n\n// Routes the link always to/from a certain side\n//\n// Arguments:\n//   padding ... gap between the element and the first vertex. :: Default 40.\n//   side ... 'left' | 'right' | 'top' | 'bottom' :: Default 'bottom'.\n//\nexport const oneSide = function(vertices, opt, linkView) {\n\n    var side = opt.side || 'bottom';\n    var padding = util.normalizeSides(opt.padding || 40);\n\n    // LinkView contains cached source an target bboxes.\n    // Note that those are Geometry rectangle objects.\n    var sourceBBox = linkView.sourceBBox;\n    var targetBBox = linkView.targetBBox;\n    var sourcePoint = sourceBBox.center();\n    var targetPoint = targetBBox.center();\n\n    var coordinate, dimension, direction;\n\n    switch (side) {\n        case 'bottom':\n            direction = 1;\n            coordinate = 'y';\n            dimension = 'height';\n            break;\n        case 'top':\n            direction = -1;\n            coordinate = 'y';\n            dimension = 'height';\n            break;\n        case 'left':\n            direction = -1;\n            coordinate = 'x';\n            dimension = 'width';\n            break;\n        case 'right':\n            direction = 1;\n            coordinate = 'x';\n            dimension = 'width';\n            break;\n        default:\n            throw new Error('Router: invalid side');\n    }\n\n    // move the points from the center of the element to outside of it.\n    sourcePoint[coordinate] += direction * (sourceBBox[dimension] / 2 + padding[side]);\n    targetPoint[coordinate] += direction * (targetBBox[dimension] / 2 + padding[side]);\n\n    // make link orthogonal (at least the first and last vertex).\n    if ((direction * (sourcePoint[coordinate] - targetPoint[coordinate])) > 0) {\n        targetPoint[coordinate] = sourcePoint[coordinate];\n    } else {\n        sourcePoint[coordinate] = targetPoint[coordinate];\n    }\n\n    return [sourcePoint].concat(vertices, targetPoint);\n};\n","import * as g from '../g/index.mjs';\nimport * as util from '../util/index.mjs';\n\n// bearing -> opposite bearing\nvar opposites = {\n    N: 'S',\n    S: 'N',\n    E: 'W',\n    W: 'E'\n};\n\n// bearing -> radians\nvar radians = {\n    N: -Math.PI / 2 * 3,\n    S: -Math.PI / 2,\n    E: 0,\n    W: Math.PI\n};\n\n// HELPERS //\n\n// returns a point `p` where lines p,p1 and p,p2 are perpendicular and p is not contained\n// in the given box\nfunction freeJoin(p1, p2, bbox) {\n\n    var p = new g.Point(p1.x, p2.y);\n    if (bbox.containsPoint(p)) p = new g.Point(p2.x, p1.y);\n    // kept for reference\n    // if (bbox.containsPoint(p)) p = null;\n\n    return p;\n}\n\n// returns either width or height of a bbox based on the given bearing\nfunction getBBoxSize(bbox, bearing) {\n\n    return bbox[(bearing === 'W' || bearing === 'E') ? 'width' : 'height'];\n}\n\n// simple bearing method (calculates only orthogonal cardinals)\nfunction getBearing(from, to) {\n\n    if (from.x === to.x) return (from.y > to.y) ? 'N' : 'S';\n    if (from.y === to.y) return (from.x > to.x) ? 'W' : 'E';\n    return null;\n}\n\n// transform point to a rect\nfunction getPointBox(p) {\n\n    return new g.Rect(p.x, p.y, 0, 0);\n}\n\nfunction getPaddingBox(opt) {\n\n    // if both provided, opt.padding wins over opt.elementPadding\n    var sides = util.normalizeSides(opt.padding || opt.elementPadding || 20);\n\n    return {\n        x: -sides.left,\n        y: -sides.top,\n        width: sides.left + sides.right,\n        height: sides.top + sides.bottom\n    };\n}\n\n// return source bbox\nfunction getSourceBBox(linkView, opt) {\n\n    return linkView.sourceBBox.clone().moveAndExpand(getPaddingBox(opt));\n}\n\n// return target bbox\nfunction getTargetBBox(linkView, opt) {\n\n    return linkView.targetBBox.clone().moveAndExpand(getPaddingBox(opt));\n}\n\n// return source anchor\nfunction getSourceAnchor(linkView, opt) {\n\n    if (linkView.sourceAnchor) return linkView.sourceAnchor;\n\n    // fallback: center of bbox\n    var sourceBBox = getSourceBBox(linkView, opt);\n    return sourceBBox.center();\n}\n\n// return target anchor\nfunction getTargetAnchor(linkView, opt) {\n\n    if (linkView.targetAnchor) return linkView.targetAnchor;\n\n    // fallback: center of bbox\n    var targetBBox = getTargetBBox(linkView, opt);\n    return targetBBox.center(); // default\n}\n\n// PARTIAL ROUTERS //\n\nfunction vertexVertex(from, to, bearing) {\n\n    var p1 = new g.Point(from.x, to.y);\n    var p2 = new g.Point(to.x, from.y);\n    var d1 = getBearing(from, p1);\n    var d2 = getBearing(from, p2);\n    var opposite = opposites[bearing];\n\n    var p = (d1 === bearing || (d1 !== opposite && (d2 === opposite || d2 !== bearing))) ? p1 : p2;\n\n    return { points: [p], direction: getBearing(p, to) };\n}\n\nfunction elementVertex(from, to, fromBBox) {\n\n    var p = freeJoin(from, to, fromBBox);\n\n    return { points: [p], direction: getBearing(p, to) };\n}\n\nfunction vertexElement(from, to, toBBox, bearing) {\n\n    var route = {};\n\n    var points = [new g.Point(from.x, to.y), new g.Point(to.x, from.y)];\n    var freePoints = points.filter(function(pt) {\n        return !toBBox.containsPoint(pt);\n    });\n    var freeBearingPoints = freePoints.filter(function(pt) {\n        return getBearing(pt, from) !== bearing;\n    });\n\n    var p;\n\n    if (freeBearingPoints.length > 0) {\n        // Try to pick a point which bears the same direction as the previous segment.\n\n        p = freeBearingPoints.filter(function(pt) {\n            return getBearing(from, pt) === bearing;\n        }).pop();\n        p = p || freeBearingPoints[0];\n\n        route.points = [p];\n        route.direction = getBearing(p, to);\n\n    } else {\n        // Here we found only points which are either contained in the element or they would create\n        // a link segment going in opposite direction from the previous one.\n        // We take the point inside element and move it outside the element in the direction the\n        // route is going. Now we can join this point with the current end (using freeJoin).\n\n        p = util.difference(points, freePoints)[0];\n\n        var p2 = (new g.Point(to)).move(p, -getBBoxSize(toBBox, bearing) / 2);\n        var p1 = freeJoin(p2, from, toBBox);\n\n        route.points = [p1, p2];\n        route.direction = getBearing(p2, to);\n    }\n\n    return route;\n}\n\nfunction elementElement(from, to, fromBBox, toBBox) {\n\n    var route = elementVertex(to, from, toBBox);\n    var p1 = route.points[0];\n\n    if (fromBBox.containsPoint(p1)) {\n\n        route = elementVertex(from, to, fromBBox);\n        var p2 = route.points[0];\n\n        if (toBBox.containsPoint(p2)) {\n\n            var fromBorder = (new g.Point(from)).move(p2, -getBBoxSize(fromBBox, getBearing(from, p2)) / 2);\n            var toBorder = (new g.Point(to)).move(p1, -getBBoxSize(toBBox, getBearing(to, p1)) / 2);\n            var mid = (new g.Line(fromBorder, toBorder)).midpoint();\n\n            var startRoute = elementVertex(from, mid, fromBBox);\n            var endRoute = vertexVertex(mid, to, startRoute.direction);\n\n            route.points = [startRoute.points[0], endRoute.points[0]];\n            route.direction = endRoute.direction;\n        }\n    }\n\n    return route;\n}\n\n// Finds route for situations where one element is inside the other.\n// Typically the route is directed outside the outer element first and\n// then back towards the inner element.\nfunction insideElement(from, to, fromBBox, toBBox, bearing) {\n\n    var route = {};\n    var boundary = fromBBox.union(toBBox).inflate(1);\n\n    // start from the point which is closer to the boundary\n    var reversed = boundary.center().distance(to) > boundary.center().distance(from);\n    var start = reversed ? to : from;\n    var end = reversed ? from : to;\n\n    var p1, p2, p3;\n\n    if (bearing) {\n        // Points on circle with radius equals 'W + H` are always outside the rectangle\n        // with width W and height H if the center of that circle is the center of that rectangle.\n        p1 = g.Point.fromPolar(boundary.width + boundary.height, radians[bearing], start);\n        p1 = boundary.pointNearestToPoint(p1).move(p1, -1);\n\n    } else {\n        p1 = boundary.pointNearestToPoint(start).move(start, 1);\n    }\n\n    p2 = freeJoin(p1, end, boundary);\n\n    if (p1.round().equals(p2.round())) {\n        p2 = g.Point.fromPolar(boundary.width + boundary.height, g.toRad(p1.theta(start)) + Math.PI / 2, end);\n        p2 = boundary.pointNearestToPoint(p2).move(end, 1).round();\n        p3 = freeJoin(p1, p2, boundary);\n        route.points = reversed ? [p2, p3, p1] : [p1, p3, p2];\n\n    } else {\n        route.points = reversed ? [p2, p1] : [p1, p2];\n    }\n\n    route.direction = reversed ? getBearing(p1, to) : getBearing(p2, to);\n\n    return route;\n}\n\n// MAIN ROUTER //\n\n// Return points through which a connection needs to be drawn in order to obtain an orthogonal link\n// routing from source to target going through `vertices`.\nexport function orthogonal(vertices, opt, linkView) {\n\n    var sourceBBox = getSourceBBox(linkView, opt);\n    var targetBBox = getTargetBBox(linkView, opt);\n\n    var sourceAnchor = getSourceAnchor(linkView, opt);\n    var targetAnchor = getTargetAnchor(linkView, opt);\n\n    // if anchor lies outside of bbox, the bbox expands to include it\n    sourceBBox = sourceBBox.union(getPointBox(sourceAnchor));\n    targetBBox = targetBBox.union(getPointBox(targetAnchor));\n\n    vertices = util.toArray(vertices).map(g.Point);\n    vertices.unshift(sourceAnchor);\n    vertices.push(targetAnchor);\n\n    var bearing; // bearing of previous route segment\n\n    var orthogonalVertices = []; // the array of found orthogonal vertices to be returned\n    for (var i = 0, max = vertices.length - 1; i < max; i++) {\n\n        var route = null;\n\n        var from = vertices[i];\n        var to = vertices[i + 1];\n\n        var isOrthogonal = !!getBearing(from, to);\n\n        if (i === 0) { // source\n\n            if (i + 1 === max) { // route source -> target\n\n                // Expand one of the elements by 1px to detect situations when the two\n                // elements are positioned next to each other with no gap in between.\n                if (sourceBBox.intersect(targetBBox.clone().inflate(1))) {\n                    route = insideElement(from, to, sourceBBox, targetBBox);\n\n                } else if (!isOrthogonal) {\n                    route = elementElement(from, to, sourceBBox, targetBBox);\n                }\n\n            } else { // route source -> vertex\n\n                if (sourceBBox.containsPoint(to)) {\n                    route = insideElement(from, to, sourceBBox, getPointBox(to).moveAndExpand(getPaddingBox(opt)));\n\n                } else if (!isOrthogonal) {\n                    route = elementVertex(from, to, sourceBBox);\n                }\n            }\n\n        } else if (i + 1 === max) { // route vertex -> target\n\n            // prevent overlaps with previous line segment\n            var isOrthogonalLoop = isOrthogonal && getBearing(to, from) === bearing;\n\n            if (targetBBox.containsPoint(from) || isOrthogonalLoop) {\n                route = insideElement(from, to, getPointBox(from).moveAndExpand(getPaddingBox(opt)), targetBBox, bearing);\n\n            } else if (!isOrthogonal) {\n                route = vertexElement(from, to, targetBBox, bearing);\n            }\n\n        } else if (!isOrthogonal) { // route vertex -> vertex\n            route = vertexVertex(from, to, bearing);\n        }\n\n        // applicable to all routes:\n\n        // set bearing for next iteration\n        if (route) {\n            Array.prototype.push.apply(orthogonalVertices, route.points);\n            bearing = route.direction;\n\n        } else {\n            // orthogonal route and not looped\n            bearing = getBearing(from, to);\n        }\n\n        // push `to` point to identified orthogonal vertices array\n        if (i + 1 < max) {\n            orthogonalVertices.push(to);\n        }\n    }\n\n    return orthogonalVertices;\n}\n","import * as g from '../g/index.mjs';\nimport * as util from '../util/index.mjs';\nimport { orthogonal } from './orthogonal.mjs';\n\nvar config = {\n\n    // size of the step to find a route (the grid of the manhattan pathfinder)\n    step: 10,\n\n    // the number of route finding loops that cause the router to abort\n    // returns fallback route instead\n    maximumLoops: 2000,\n\n    // the number of decimal places to round floating point coordinates\n    precision: 1,\n\n    // maximum change of direction\n    maxAllowedDirectionChange: 90,\n\n    // should the router use perpendicular linkView option?\n    // does not connect anchor of element but rather a point close-by that is orthogonal\n    // this looks much better\n    perpendicular: true,\n\n    // should the source and/or target not be considered as obstacles?\n    excludeEnds: [], // 'source', 'target'\n\n    // should certain types of elements not be considered as obstacles?\n    excludeTypes: ['basic.Text'],\n\n    // possible starting directions from an element\n    startDirections: ['top', 'right', 'bottom', 'left'],\n\n    // possible ending directions to an element\n    endDirections: ['top', 'right', 'bottom', 'left'],\n\n    // specify the directions used above and what they mean\n    directionMap: {\n        top: { x: 0, y: -1 },\n        right: { x: 1, y: 0 },\n        bottom: { x: 0, y: 1 },\n        left: { x: -1, y: 0 }\n    },\n\n    // cost of an orthogonal step\n    cost: function() {\n\n        return this.step;\n    },\n\n    // an array of directions to find next points on the route\n    // different from start/end directions\n    directions: function() {\n\n        var step = this.step;\n        var cost = this.cost();\n\n        return [\n            { offsetX: step, offsetY: 0, cost: cost },\n            { offsetX: -step, offsetY: 0, cost: cost },\n            { offsetX: 0, offsetY: step, cost: cost },\n            { offsetX: 0, offsetY: -step, cost: cost }\n        ];\n    },\n\n    // a penalty received for direction change\n    penalties: function() {\n\n        return {\n            0: 0,\n            45: this.step / 2,\n            90: this.step / 2\n        };\n    },\n\n    // padding applied on the element bounding boxes\n    paddingBox: function() {\n\n        var step = this.step;\n\n        return {\n            x: -step,\n            y: -step,\n            width: 2 * step,\n            height: 2 * step\n        };\n    },\n\n    // A function that determines whether a given point is an obstacle or not.\n    // If used, the `padding`, `excludeEnds`and `excludeTypes` options are ignored.\n    // (point: dia.Point) => boolean;\n    isPointObstacle: null,\n\n    // a router to use when the manhattan router fails\n    // (one of the partial routes returns null)\n    fallbackRouter: function(vertices, opt, linkView) {\n\n        if (!util.isFunction(orthogonal)) {\n            throw new Error('Manhattan requires the orthogonal router as default fallback.');\n        }\n\n        return orthogonal(vertices, util.assign({}, config, opt), linkView);\n    },\n\n    /* Deprecated */\n    // a simple route used in situations when main routing method fails\n    // (exceed max number of loop iterations, inaccessible)\n    fallbackRoute: function(from, to, opt) {\n\n        return null; // null result will trigger the fallbackRouter\n\n        // left for reference:\n        /*// Find an orthogonal route ignoring obstacles.\n\n        var point = ((opt.previousDirAngle || 0) % 180 === 0)\n                ? new g.Point(from.x, to.y)\n                : new g.Point(to.x, from.y);\n\n        return [point];*/\n    },\n\n    // if a function is provided, it's used to route the link while dragging an end\n    // i.e. function(from, to, opt) { return []; }\n    draggingRoute: null\n};\n\n// HELPER CLASSES //\n\n// Map of obstacles\n// Helper structure to identify whether a point lies inside an obstacle.\nfunction ObstacleMap(opt) {\n\n    this.map = {};\n    this.options = opt;\n    // tells how to divide the paper when creating the elements map\n    this.mapGridSize = 100;\n}\n\nObstacleMap.prototype.build = function(graph, link) {\n\n    var opt = this.options;\n\n    // source or target element could be excluded from set of obstacles\n    var excludedEnds = util.toArray(opt.excludeEnds).reduce(function(res, item) {\n\n        var end = link.get(item);\n        if (end) {\n            var cell = graph.getCell(end.id);\n            if (cell) {\n                res.push(cell);\n            }\n        }\n\n        return res;\n    }, []);\n\n    // Exclude any embedded elements from the source and the target element.\n    var excludedAncestors = [];\n\n    var source = graph.getCell(link.get('source').id);\n    if (source) {\n        excludedAncestors = util.union(excludedAncestors, source.getAncestors().map(function(cell) {\n            return cell.id;\n        }));\n    }\n\n    var target = graph.getCell(link.get('target').id);\n    if (target) {\n        excludedAncestors = util.union(excludedAncestors, target.getAncestors().map(function(cell) {\n            return cell.id;\n        }));\n    }\n\n    // Builds a map of all elements for quicker obstacle queries (i.e. is a point contained\n    // in any obstacle?) (a simplified grid search).\n    // The paper is divided into smaller cells, where each holds information about which\n    // elements belong to it. When we query whether a point lies inside an obstacle we\n    // don't need to go through all obstacles, we check only those in a particular cell.\n    var mapGridSize = this.mapGridSize;\n\n    graph.getElements().reduce(function(map, element) {\n\n        var isExcludedType = util.toArray(opt.excludeTypes).includes(element.get('type'));\n        var isExcludedEnd = excludedEnds.find(function(excluded) {\n            return excluded.id === element.id;\n        });\n        var isExcludedAncestor = excludedAncestors.includes(element.id);\n\n        var isExcluded = isExcludedType || isExcludedEnd || isExcludedAncestor;\n        if (!isExcluded) {\n            var bbox = element.getBBox().moveAndExpand(opt.paddingBox);\n\n            var origin = bbox.origin().snapToGrid(mapGridSize);\n            var corner = bbox.corner().snapToGrid(mapGridSize);\n\n            for (var x = origin.x; x <= corner.x; x += mapGridSize) {\n                for (var y = origin.y; y <= corner.y; y += mapGridSize) {\n                    var gridKey = x + '@' + y;\n                    map[gridKey] = map[gridKey] || [];\n                    map[gridKey].push(bbox);\n                }\n            }\n        }\n\n        return map;\n    }, this.map);\n\n    return this;\n};\n\nObstacleMap.prototype.isPointAccessible = function(point) {\n\n    var mapKey = point.clone().snapToGrid(this.mapGridSize).toString();\n\n    return util.toArray(this.map[mapKey]).every(function(obstacle) {\n        return !obstacle.containsPoint(point);\n    });\n};\n\n// Sorted Set\n// Set of items sorted by given value.\nfunction SortedSet() {\n    this.items = [];\n    this.hash = {};\n    this.values = {};\n    this.OPEN = 1;\n    this.CLOSE = 2;\n}\n\nSortedSet.prototype.add = function(item, value) {\n\n    if (this.hash[item]) {\n        // item removal\n        this.items.splice(this.items.indexOf(item), 1);\n    } else {\n        this.hash[item] = this.OPEN;\n    }\n\n    this.values[item] = value;\n\n    var index = util.sortedIndex(this.items, item, function(i) {\n        return this.values[i];\n    }.bind(this));\n\n    this.items.splice(index, 0, item);\n};\n\nSortedSet.prototype.remove = function(item) {\n\n    this.hash[item] = this.CLOSE;\n};\n\nSortedSet.prototype.isOpen = function(item) {\n\n    return this.hash[item] === this.OPEN;\n};\n\nSortedSet.prototype.isClose = function(item) {\n\n    return this.hash[item] === this.CLOSE;\n};\n\nSortedSet.prototype.isEmpty = function() {\n\n    return this.items.length === 0;\n};\n\nSortedSet.prototype.pop = function() {\n\n    var item = this.items.shift();\n    this.remove(item);\n    return item;\n};\n\n// HELPERS //\n\n// return source bbox\nfunction getSourceBBox(linkView, opt) {\n\n    // expand by padding box\n    if (opt && opt.paddingBox) return linkView.sourceBBox.clone().moveAndExpand(opt.paddingBox);\n\n    return linkView.sourceBBox.clone();\n}\n\n// return target bbox\nfunction getTargetBBox(linkView, opt) {\n\n    // expand by padding box\n    if (opt && opt.paddingBox) return linkView.targetBBox.clone().moveAndExpand(opt.paddingBox);\n\n    return linkView.targetBBox.clone();\n}\n\n// return source anchor\nfunction getSourceAnchor(linkView, opt) {\n\n    if (linkView.sourceAnchor) return linkView.sourceAnchor;\n\n    // fallback: center of bbox\n    var sourceBBox = getSourceBBox(linkView, opt);\n    return sourceBBox.center();\n}\n\n// return target anchor\nfunction getTargetAnchor(linkView, opt) {\n\n    if (linkView.targetAnchor) return linkView.targetAnchor;\n\n    // fallback: center of bbox\n    var targetBBox = getTargetBBox(linkView, opt);\n    return targetBBox.center(); // default\n}\n\n// returns a direction index from start point to end point\n// corrects for grid deformation between start and end\nfunction getDirectionAngle(start, end, numDirections, grid, opt) {\n\n    var quadrant = 360 / numDirections;\n    var angleTheta = start.theta(fixAngleEnd(start, end, grid, opt));\n    var normalizedAngle = g.normalizeAngle(angleTheta + (quadrant / 2));\n    return quadrant * Math.floor(normalizedAngle / quadrant);\n}\n\n// helper function for getDirectionAngle()\n// corrects for grid deformation\n// (if a point is one grid steps away from another in both dimensions,\n// it is considered to be 45 degrees away, even if the real angle is different)\n// this causes visible angle discrepancies if `opt.step` is much larger than `paper.gridSize`\nfunction fixAngleEnd(start, end, grid, opt) {\n\n    var step = opt.step;\n\n    var diffX = end.x - start.x;\n    var diffY = end.y - start.y;\n\n    var gridStepsX = diffX / grid.x;\n    var gridStepsY = diffY / grid.y;\n\n    var distanceX = gridStepsX * step;\n    var distanceY = gridStepsY * step;\n\n    return new g.Point(start.x + distanceX, start.y + distanceY);\n}\n\n// return the change in direction between two direction angles\nfunction getDirectionChange(angle1, angle2) {\n\n    var directionChange = Math.abs(angle1 - angle2);\n    return (directionChange > 180) ? (360 - directionChange) : directionChange;\n}\n\n// fix direction offsets according to current grid\nfunction getGridOffsets(directions, grid, opt) {\n\n    var step = opt.step;\n\n    util.toArray(opt.directions).forEach(function(direction) {\n\n        direction.gridOffsetX = (direction.offsetX / step) * grid.x;\n        direction.gridOffsetY = (direction.offsetY / step) * grid.y;\n    });\n}\n\n// get grid size in x and y dimensions, adapted to source and target positions\nfunction getGrid(step, source, target) {\n\n    return {\n        source: source.clone(),\n        x: getGridDimension(target.x - source.x, step),\n        y: getGridDimension(target.y - source.y, step)\n    };\n}\n\n// helper function for getGrid()\nfunction getGridDimension(diff, step) {\n\n    // return step if diff = 0\n    if (!diff) return step;\n\n    var absDiff = Math.abs(diff);\n    var numSteps = Math.round(absDiff / step);\n\n    // return absDiff if less than one step apart\n    if (!numSteps) return absDiff;\n\n    // otherwise, return corrected step\n    var roundedDiff = numSteps * step;\n    var remainder = absDiff - roundedDiff;\n    var stepCorrection = remainder / numSteps;\n\n    return step + stepCorrection;\n}\n\n// return a clone of point snapped to grid\nfunction snapToGrid(point, grid) {\n\n    var source = grid.source;\n\n    var snappedX = g.snapToGrid(point.x - source.x, grid.x) + source.x;\n    var snappedY = g.snapToGrid(point.y - source.y, grid.y) + source.y;\n\n    return new g.Point(snappedX, snappedY);\n}\n\n// round the point to opt.precision\nfunction round(point, precision) {\n\n    return point.round(precision);\n}\n\n// snap to grid and then round the point\nfunction align(point, grid, precision) {\n\n    return round(snapToGrid(point.clone(), grid), precision);\n}\n\n// return a string representing the point\n// string is rounded in both dimensions\nfunction getKey(point) {\n\n    return point.clone().toString();\n}\n\n// return a normalized vector from given point\n// used to determine the direction of a difference of two points\nfunction normalizePoint(point) {\n\n    return new g.Point(\n        point.x === 0 ? 0 : Math.abs(point.x) / point.x,\n        point.y === 0 ? 0 : Math.abs(point.y) / point.y\n    );\n}\n\n// PATHFINDING //\n\n// reconstructs a route by concatenating points with their parents\nfunction reconstructRoute(parents, points, tailPoint, from, to, grid, opt) {\n\n    var route = [];\n\n    var prevDiff = normalizePoint(to.difference(tailPoint));\n\n    // tailPoint is assumed to be aligned already\n    var currentKey = getKey(tailPoint);\n    var parent = parents[currentKey];\n\n    var point;\n    while (parent) {\n\n        // point is assumed to be aligned already\n        point = points[currentKey];\n\n        var diff = normalizePoint(point.difference(parent));\n        if (!diff.equals(prevDiff)) {\n            route.unshift(point);\n            prevDiff = diff;\n        }\n\n        // parent is assumed to be aligned already\n        currentKey = getKey(parent);\n        parent = parents[currentKey];\n    }\n\n    // leadPoint is assumed to be aligned already\n    var leadPoint = points[currentKey];\n\n    var fromDiff = normalizePoint(leadPoint.difference(from));\n    if (!fromDiff.equals(prevDiff)) {\n        route.unshift(leadPoint);\n    }\n\n    return route;\n}\n\n// heuristic method to determine the distance between two points\nfunction estimateCost(from, endPoints) {\n\n    var min = Infinity;\n\n    for (var i = 0, len = endPoints.length; i < len; i++) {\n        var cost = from.manhattanDistance(endPoints[i]);\n        if (cost < min) min = cost;\n    }\n\n    return min;\n}\n\n// find points around the bbox taking given directions into account\n// lines are drawn from anchor in given directions, intersections recorded\n// if anchor is outside bbox, only those directions that intersect get a rect point\n// the anchor itself is returned as rect point (representing some directions)\n// (since those directions are unobstructed by the bbox)\nfunction getRectPoints(anchor, bbox, directionList, grid, opt) {\n\n    var precision = opt.precision;\n    var directionMap = opt.directionMap;\n\n    var anchorCenterVector = anchor.difference(bbox.center());\n\n    var keys = util.isObject(directionMap) ? Object.keys(directionMap) : [];\n    var dirList = util.toArray(directionList);\n    var rectPoints = keys.reduce(function(res, key) {\n\n        if (dirList.includes(key)) {\n            var direction = directionMap[key];\n\n            // create a line that is guaranteed to intersect the bbox if bbox is in the direction\n            // even if anchor lies outside of bbox\n            var endpoint = new g.Point(\n                anchor.x + direction.x * (Math.abs(anchorCenterVector.x) + bbox.width),\n                anchor.y + direction.y * (Math.abs(anchorCenterVector.y) + bbox.height)\n            );\n            var intersectionLine = new g.Line(anchor, endpoint);\n\n            // get the farther intersection, in case there are two\n            // (that happens if anchor lies next to bbox)\n            var intersections = intersectionLine.intersect(bbox) || [];\n            var numIntersections = intersections.length;\n            var farthestIntersectionDistance;\n            var farthestIntersection = null;\n            for (var i = 0; i < numIntersections; i++) {\n                var currentIntersection = intersections[i];\n                var distance = anchor.squaredDistance(currentIntersection);\n                if ((farthestIntersectionDistance === undefined) || (distance > farthestIntersectionDistance)) {\n                    farthestIntersectionDistance = distance;\n                    farthestIntersection = currentIntersection;\n                }\n            }\n\n            // if an intersection was found in this direction, it is our rectPoint\n            if (farthestIntersection) {\n                var point = align(farthestIntersection, grid, precision);\n\n                // if the rectPoint lies inside the bbox, offset it by one more step\n                if (bbox.containsPoint(point)) {\n                    point = align(point.offset(direction.x * grid.x, direction.y * grid.y), grid, precision);\n                }\n\n                // then add the point to the result array\n                // aligned\n                res.push(point);\n            }\n        }\n\n        return res;\n    }, []);\n\n    // if anchor lies outside of bbox, add it to the array of points\n    if (!bbox.containsPoint(anchor)) {\n        // aligned\n        rectPoints.push(align(anchor, grid, precision));\n    }\n\n    return rectPoints;\n}\n\n// finds the route between two points/rectangles (`from`, `to`) implementing A* algorithm\n// rectangles get rect points assigned by getRectPoints()\nfunction findRoute(from, to, isPointObstacle, opt) {\n\n    var precision = opt.precision;\n\n    // Get grid for this route.\n\n    var sourceAnchor, targetAnchor;\n\n    if (from instanceof g.Rect) { // `from` is sourceBBox\n        sourceAnchor = round(getSourceAnchor(this, opt).clone(), precision);\n    } else {\n        sourceAnchor = round(from.clone(), precision);\n    }\n\n    if (to instanceof g.Rect) { // `to` is targetBBox\n        targetAnchor = round(getTargetAnchor(this, opt).clone(), precision);\n    } else {\n        targetAnchor = round(to.clone(), precision);\n    }\n\n    var grid = getGrid(opt.step, sourceAnchor, targetAnchor);\n\n    // Get pathfinding points.\n\n    var start, end; // aligned with grid by definition\n    var startPoints, endPoints; // assumed to be aligned with grid already\n\n    // set of points we start pathfinding from\n    if (from instanceof g.Rect) { // `from` is sourceBBox\n        start = sourceAnchor;\n        startPoints = getRectPoints(start, from, opt.startDirections, grid, opt);\n\n    } else {\n        start = sourceAnchor;\n        startPoints = [start];\n    }\n\n    // set of points we want the pathfinding to finish at\n    if (to instanceof g.Rect) { // `to` is targetBBox\n        end = targetAnchor;\n        endPoints = getRectPoints(targetAnchor, to, opt.endDirections, grid, opt);\n\n    } else {\n        end = targetAnchor;\n        endPoints = [end];\n    }\n\n    // take into account only accessible rect points (those not under obstacles)\n    startPoints = startPoints.filter(p => !isPointObstacle(p));\n    endPoints = endPoints.filter(p => !isPointObstacle(p));\n\n    // Check that there is an accessible route point on both sides.\n    // Otherwise, use fallbackRoute().\n    if (startPoints.length > 0 && endPoints.length > 0) {\n\n        // The set of tentative points to be evaluated, initially containing the start points.\n        // Rounded to nearest integer for simplicity.\n        var openSet = new SortedSet();\n        // Keeps reference to actual points for given elements of the open set.\n        var points = {};\n        // Keeps reference to a point that is immediate predecessor of given element.\n        var parents = {};\n        // Cost from start to a point along best known path.\n        var costs = {};\n\n        for (var i = 0, n = startPoints.length; i < n; i++) {\n            // startPoint is assumed to be aligned already\n            var startPoint = startPoints[i];\n\n            var key = getKey(startPoint);\n\n            openSet.add(key, estimateCost(startPoint, endPoints));\n            points[key] = startPoint;\n            costs[key] = 0;\n        }\n\n        var previousRouteDirectionAngle = opt.previousDirectionAngle; // undefined for first route\n        var isPathBeginning = (previousRouteDirectionAngle === undefined);\n\n        // directions\n        var direction, directionChange;\n        var directions = opt.directions;\n        getGridOffsets(directions, grid, opt);\n\n        var numDirections = directions.length;\n\n        var endPointsKeys = util.toArray(endPoints).reduce(function(res, endPoint) {\n            // endPoint is assumed to be aligned already\n\n            var key = getKey(endPoint);\n            res.push(key);\n            return res;\n        }, []);\n\n        // main route finding loop\n        var loopsRemaining = opt.maximumLoops;\n        while (!openSet.isEmpty() && loopsRemaining > 0) {\n\n            // remove current from the open list\n            var currentKey = openSet.pop();\n            var currentPoint = points[currentKey];\n            var currentParent = parents[currentKey];\n            var currentCost = costs[currentKey];\n\n            var isRouteBeginning = (currentParent === undefined); // undefined for route starts\n            var isStart = currentPoint.equals(start); // (is source anchor or `from` point) = can leave in any direction\n\n            var previousDirectionAngle;\n            if (!isRouteBeginning) previousDirectionAngle = getDirectionAngle(currentParent, currentPoint, numDirections, grid, opt); // a vertex on the route\n            else if (!isPathBeginning) previousDirectionAngle = previousRouteDirectionAngle; // beginning of route on the path\n            else if (!isStart) previousDirectionAngle = getDirectionAngle(start, currentPoint, numDirections, grid, opt); // beginning of path, start rect point\n            else previousDirectionAngle = null; // beginning of path, source anchor or `from` point\n\n            // check if we reached any endpoint\n            var samePoints = startPoints.length === endPoints.length;\n            if (samePoints) {\n                for (var j = 0; j < startPoints.length; j++) {\n                    if (!startPoints[j].equals(endPoints[j])) {\n                        samePoints = false;\n                        break;\n                    }\n                }\n            }\n            var skipEndCheck = (isRouteBeginning && samePoints);\n            if (!skipEndCheck && (endPointsKeys.indexOf(currentKey) >= 0)) {\n                opt.previousDirectionAngle = previousDirectionAngle;\n                return reconstructRoute(parents, points, currentPoint, start, end, grid, opt);\n            }\n\n            // go over all possible directions and find neighbors\n            for (i = 0; i < numDirections; i++) {\n                direction = directions[i];\n\n                var directionAngle = direction.angle;\n                directionChange = getDirectionChange(previousDirectionAngle, directionAngle);\n\n                // if the direction changed rapidly, don't use this point\n                // any direction is allowed for starting points\n                if (!(isPathBeginning && isStart) && directionChange > opt.maxAllowedDirectionChange) continue;\n\n                var neighborPoint = align(currentPoint.clone().offset(direction.gridOffsetX, direction.gridOffsetY), grid, precision);\n                var neighborKey = getKey(neighborPoint);\n\n                // Closed points from the openSet were already evaluated.\n                if (openSet.isClose(neighborKey) || isPointObstacle(neighborPoint)) continue;\n\n                // We can only enter end points at an acceptable angle.\n                if (endPointsKeys.indexOf(neighborKey) >= 0) { // neighbor is an end point\n\n                    var isNeighborEnd = neighborPoint.equals(end); // (is target anchor or `to` point) = can be entered in any direction\n\n                    if (!isNeighborEnd) {\n                        var endDirectionAngle = getDirectionAngle(neighborPoint, end, numDirections, grid, opt);\n                        var endDirectionChange = getDirectionChange(directionAngle, endDirectionAngle);\n\n                        if (endDirectionChange > opt.maxAllowedDirectionChange) continue;\n                    }\n                }\n\n                // The current direction is ok.\n\n                var neighborCost = direction.cost;\n                var neighborPenalty = isStart ? 0 : opt.penalties[directionChange]; // no penalties for start point\n                var costFromStart = currentCost + neighborCost + neighborPenalty;\n\n                if (!openSet.isOpen(neighborKey) || (costFromStart < costs[neighborKey])) {\n                    // neighbor point has not been processed yet\n                    // or the cost of the path from start is lower than previously calculated\n\n                    points[neighborKey] = neighborPoint;\n                    parents[neighborKey] = currentPoint;\n                    costs[neighborKey] = costFromStart;\n                    openSet.add(neighborKey, costFromStart + estimateCost(neighborPoint, endPoints));\n                }\n            }\n\n            loopsRemaining--;\n        }\n    }\n\n    // no route found (`to` point either wasn't accessible or finding route took\n    // way too much calculation)\n    return opt.fallbackRoute.call(this, start, end, opt);\n}\n\n// resolve some of the options\nfunction resolveOptions(opt) {\n\n    opt.directions = util.result(opt, 'directions');\n    opt.penalties = util.result(opt, 'penalties');\n    opt.paddingBox = util.result(opt, 'paddingBox');\n    opt.padding = util.result(opt, 'padding');\n\n    if (opt.padding) {\n        // if both provided, opt.padding wins over opt.paddingBox\n        var sides = util.normalizeSides(opt.padding);\n        opt.paddingBox = {\n            x: -sides.left,\n            y: -sides.top,\n            width: sides.left + sides.right,\n            height: sides.top + sides.bottom\n        };\n    }\n\n    util.toArray(opt.directions).forEach(function(direction) {\n\n        var point1 = new g.Point(0, 0);\n        var point2 = new g.Point(direction.offsetX, direction.offsetY);\n\n        direction.angle = g.normalizeAngle(point1.theta(point2));\n    });\n}\n\n// initialization of the route finding\nfunction router(vertices, opt, linkView) {\n\n    resolveOptions(opt);\n\n    // enable/disable linkView perpendicular option\n    linkView.options.perpendicular = !!opt.perpendicular;\n\n    var sourceBBox = getSourceBBox(linkView, opt);\n    var targetBBox = getTargetBBox(linkView, opt);\n\n    var sourceAnchor = getSourceAnchor(linkView, opt);\n    //var targetAnchor = getTargetAnchor(linkView, opt);\n\n    // pathfinding\n    let isPointObstacle;\n    if (typeof opt.isPointObstacle === 'function') {\n        isPointObstacle = opt.isPointObstacle;\n    } else {\n        const map = new ObstacleMap(opt);\n        map.build(linkView.paper.model, linkView.model);\n        isPointObstacle = (point) => !map.isPointAccessible(point);\n    }\n\n    var oldVertices = util.toArray(vertices).map(g.Point);\n    var newVertices = [];\n    var tailPoint = sourceAnchor; // the origin of first route's grid, does not need snapping\n\n    // find a route by concatenating all partial routes (routes need to pass through vertices)\n    // source -> vertex[1] -> ... -> vertex[n] -> target\n    var to, from;\n\n    for (var i = 0, len = oldVertices.length; i <= len; i++) {\n\n        var partialRoute = null;\n\n        from = to || sourceBBox;\n        to = oldVertices[i];\n\n        if (!to) {\n            // this is the last iteration\n            // we ran through all vertices in oldVertices\n            // 'to' is not a vertex.\n\n            to = targetBBox;\n\n            // If the target is a point (i.e. it's not an element), we\n            // should use dragging route instead of main routing method if it has been provided.\n            var isEndingAtPoint = !linkView.model.get('source').id || !linkView.model.get('target').id;\n\n            if (isEndingAtPoint && util.isFunction(opt.draggingRoute)) {\n                // Make sure we are passing points only (not rects).\n                var dragFrom = (from === sourceBBox) ? sourceAnchor : from;\n                var dragTo = to.origin();\n\n                partialRoute = opt.draggingRoute.call(linkView, dragFrom, dragTo, opt);\n            }\n        }\n\n        // if partial route has not been calculated yet use the main routing method to find one\n        partialRoute = partialRoute || findRoute.call(linkView, from, to, isPointObstacle, opt);\n\n        if (partialRoute === null) { // the partial route cannot be found\n            return opt.fallbackRouter(vertices, opt, linkView);\n        }\n\n        var leadPoint = partialRoute[0];\n\n        // remove the first point if the previous partial route had the same point as last\n        if (leadPoint && leadPoint.equals(tailPoint)) partialRoute.shift();\n\n        // save tailPoint for next iteration\n        tailPoint = partialRoute[partialRoute.length - 1] || tailPoint;\n\n        Array.prototype.push.apply(newVertices, partialRoute);\n    }\n\n    return newVertices;\n}\n\n// public function\nexport const manhattan = function(vertices, opt, linkView) {\n    return router(vertices, util.assign({}, config, opt), linkView);\n};\n","import { manhattan } from './manhattan.mjs';\nimport * as util from '../util/index.mjs';\nimport * as g from '../g/index.mjs';\n\nvar config = {\n\n    maxAllowedDirectionChange: 45,\n\n    // cost of a diagonal step\n    diagonalCost: function() {\n\n        var step = this.step;\n        return Math.ceil(Math.sqrt(step * step << 1));\n    },\n\n    // an array of directions to find next points on the route\n    // different from start/end directions\n    directions: function() {\n\n        var step = this.step;\n        var cost = this.cost();\n        var diagonalCost = this.diagonalCost();\n\n        return [\n            { offsetX: step, offsetY: 0, cost: cost },\n            { offsetX: step, offsetY: step, cost: diagonalCost },\n            { offsetX: 0, offsetY: step, cost: cost },\n            { offsetX: -step, offsetY: step, cost: diagonalCost },\n            { offsetX: -step, offsetY: 0, cost: cost },\n            { offsetX: -step, offsetY: -step, cost: diagonalCost },\n            { offsetX: 0, offsetY: -step, cost: cost },\n            { offsetX: step, offsetY: -step, cost: diagonalCost }\n        ];\n    },\n\n    // a simple route used in situations when main routing method fails\n    // (exceed max number of loop iterations, inaccessible)\n    fallbackRoute: function(from, to, opt) {\n\n        // Find a route which breaks by 45 degrees ignoring all obstacles.\n\n        var theta = from.theta(to);\n\n        var route = [];\n\n        var a = { x: to.x, y: from.y };\n        var b = { x: from.x, y: to.y };\n\n        if (theta % 180 > 90) {\n            var t = a;\n            a = b;\n            b = t;\n        }\n\n        var p1 = (theta % 90) < 45 ? a : b;\n        var l1 = new g.Line(from, p1);\n\n        var alpha = 90 * Math.ceil(theta / 90);\n\n        var p2 = g.Point.fromPolar(l1.squaredLength(), g.toRad(alpha + 135), p1);\n        var l2 = new g.Line(to, p2);\n\n        var intersectionPoint = l1.intersection(l2);\n        var point = intersectionPoint ? intersectionPoint : to;\n\n        var directionFrom = intersectionPoint ? point : from;\n\n        var quadrant = 360 / opt.directions.length;\n        var angleTheta = directionFrom.theta(to);\n        var normalizedAngle = g.normalizeAngle(angleTheta + (quadrant / 2));\n        var directionAngle = quadrant * Math.floor(normalizedAngle / quadrant);\n\n        opt.previousDirectionAngle = directionAngle;\n\n        if (point) route.push(point.round());\n        route.push(to);\n\n        return route;\n    }\n};\n\n// public function\nexport const metro = function(vertices, opt, linkView) {\n\n    if (!util.isFunction(manhattan)) {\n        throw new Error('Metro requires the manhattan router.');\n    }\n\n    return manhattan(vertices, util.assign({}, config, opt), linkView);\n};\n\n","import * as g from '../g/index.mjs';\n\nconst Directions = {\n    AUTO: 'auto',\n    LEFT: 'left',\n    RIGHT: 'right',\n    TOP: 'top',\n    BOTTOM: 'bottom',\n    ANCHOR_SIDE: 'anchor-side',\n    MAGNET_SIDE: 'magnet-side'\n};\n\nconst DEFINED_DIRECTIONS = [Directions.LEFT, Directions.RIGHT, Directions.TOP, Directions.BOTTOM];\n\nfunction getDirectionForLinkConnection(linkOrigin, connectionPoint, linkView) {\n    const tangent = linkView.getTangentAtLength(linkView.getClosestPointLength(connectionPoint));\n    const roundedAngle = Math.round(tangent.angle() / 90) * 90;\n\n    switch (roundedAngle) {\n        case 0:\n        case 360:\n            return linkOrigin.y < connectionPoint.y ? Directions.TOP : Directions.BOTTOM;\n        case 90:\n            return linkOrigin.x < connectionPoint.x ? Directions.LEFT : Directions.RIGHT;\n        case 180:\n            return linkOrigin.y < connectionPoint.y ? Directions.TOP : Directions.BOTTOM;\n        case 270:\n            return linkOrigin.x < connectionPoint.x ? Directions.LEFT : Directions.RIGHT;\n    }\n}\n\nfunction rightAngleRouter(_vertices, opt, linkView) {\n    const margin = opt.margin || 20;\n    let { sourceDirection = Directions.AUTO, targetDirection = Directions.AUTO } = opt;\n\n    const sourceView = linkView.sourceView;\n    const targetView = linkView.targetView;\n\n    const isSourcePort = !!linkView.model.source().port;\n    const isTargetPort = !!linkView.model.target().port;\n\n    if (sourceDirection === Directions.AUTO) {\n        sourceDirection = isSourcePort ? Directions.MAGNET_SIDE : Directions.ANCHOR_SIDE;\n    }\n\n    if (targetDirection === Directions.AUTO) {\n        targetDirection = isTargetPort ? Directions.MAGNET_SIDE : Directions.ANCHOR_SIDE;\n    }\n\n    const sourceBBox = linkView.sourceBBox;\n    const targetBBox = linkView.targetBBox;\n    const sourcePoint = linkView.sourceAnchor;\n    const targetPoint = linkView.targetAnchor;\n    let {\n        x: sx0,\n        y: sy0,\n        width: sourceWidth = 0,\n        height: sourceHeight = 0\n    } = sourceView && sourceView.model.isElement() ? g.Rect.fromRectUnion(sourceBBox, sourceView.model.getBBox()) : linkView.sourceAnchor;\n\n    let {\n        x: tx0,\n        y: ty0,\n        width: targetWidth = 0,\n        height: targetHeight = 0\n    } = targetView && targetView.model.isElement() ? g.Rect.fromRectUnion(targetBBox, targetView.model.getBBox()) : linkView.targetAnchor;\n\n    const tx1 = tx0 + targetWidth;\n    const ty1 = ty0 + targetHeight;\n    const sx1 = sx0 + sourceWidth;\n    const sy1 = sy0 + sourceHeight;\n\n    // Key coordinates including the margin\n    const smx0 = sx0 - margin;\n    const smx1 = sx1 + margin;\n    const smy0 = sy0 - margin;\n    const smy1 = sy1 + margin;\n    const tmx0 = tx0 - margin;\n    const tmx1 = tx1 + margin;\n    const tmy0 = ty0 - margin;\n    const tmy1 = ty1 + margin;\n\n    const sourceOutsidePoint = sourcePoint.clone();\n\n    let sourceSide;\n\n    if (!sourceView) {\n        const sourceLinkAnchorBBox = new g.Rect(sx0, sy0, 0, 0);\n        sourceSide = DEFINED_DIRECTIONS.includes(sourceDirection) ? sourceDirection : sourceLinkAnchorBBox.sideNearestToPoint(targetPoint);\n    } else if (sourceView.model.isLink()) {\n        sourceSide = getDirectionForLinkConnection(targetPoint, sourcePoint, sourceView);\n    } else if (sourceDirection === Directions.ANCHOR_SIDE) {\n        sourceSide = sourceBBox.sideNearestToPoint(sourcePoint);\n    } else if (sourceDirection === Directions.MAGNET_SIDE) {\n        sourceSide = sourceView.model.getBBox().sideNearestToPoint(sourcePoint);\n    } else {\n        sourceSide = sourceDirection;\n    }\n\n    switch (sourceSide) {\n        case 'left':\n            sourceOutsidePoint.x = smx0;\n            break;\n        case 'right':\n            sourceOutsidePoint.x = smx1;\n            break;\n        case 'top':\n            sourceOutsidePoint.y = smy0;\n            break;\n        case 'bottom':\n            sourceOutsidePoint.y = smy1;\n            break;\n    }\n    const targetOutsidePoint = targetPoint.clone();\n\n\n    let targetSide;\n\n\n    if (!targetView) {\n        const targetLinkAnchorBBox = new g.Rect(tx0, ty0, 0, 0);\n        targetSide = DEFINED_DIRECTIONS.includes(targetDirection) ? targetDirection : targetLinkAnchorBBox.sideNearestToPoint(sourcePoint);\n    } else if (targetView.model.isLink()) {\n        targetSide = getDirectionForLinkConnection(sourcePoint, targetPoint, targetView);\n    } else if (targetDirection === Directions.ANCHOR_SIDE) {\n        targetSide = targetBBox.sideNearestToPoint(targetPoint);\n    } else if (targetDirection === Directions.MAGNET_SIDE) {\n        targetSide = targetView.model.getBBox().sideNearestToPoint(targetPoint);\n    } else {\n        targetSide = targetDirection;\n    }\n\n    switch (targetSide) {\n        case 'left':\n            targetOutsidePoint.x = tmx0;\n            break;\n        case 'right':\n            targetOutsidePoint.x = tmx1;\n            break;\n        case 'top':\n            targetOutsidePoint.y = tmy0;\n            break;\n        case 'bottom':\n            targetOutsidePoint.y = tmy1;\n            break;\n    }\n\n    const { x: sox, y: soy } = sourceOutsidePoint;\n    const { x: tox, y: toy } = targetOutsidePoint;\n    const tcx = (tx0 + tx1) / 2;\n    const tcy = (ty0 + ty1) / 2;\n    const scx = (sx0 + sx1) / 2;\n    const scy = (sy0 + sy1) / 2;\n    const middleOfVerticalSides = (scx < tcx ? (sx1 + tx0) : (tx1 + sx0)) / 2;\n    const middleOfHorizontalSides = (scy < tcy ? (sy1 + ty0) : (ty1 + sy0)) / 2;\n\n    if (sourceSide === 'left' && targetSide === 'right') {\n        if (smx0 <= tx1) {\n            let y = middleOfHorizontalSides;\n            if (sx1 <= tx0) {\n                if (ty1 >= smy0 && toy < soy) {\n                    y = Math.min(tmy0, smy0);\n                } else if (ty0 <= smy1 && toy >= soy) {\n                    y = Math.max(tmy1, smy1);\n                }\n            }\n            return [\n                { x: sox, y: soy },\n                { x: sox, y },\n                { x: tox, y },\n                { x: tox, y: toy }\n            ];\n        }\n\n        const x = (sox + tox) / 2;\n        return [\n            { x, y: soy },\n            { x, y: toy }\n        ];\n    } else if (sourceSide === 'right' && targetSide === 'left') {\n        if (smx1 >= tx0) {\n            let y = middleOfHorizontalSides;\n            if (sox > tx1) {\n                if (ty1 >= smy0 && toy < soy) {\n                    y = Math.min(tmy0, smy0);\n                } else if (ty0 <= smy1 && toy >= soy) {\n                    y = Math.max(tmy1, smy1);\n                }\n            }\n\n            return [\n                { x: sox, y: soy },\n                { x: sox, y },\n                { x: tox, y },\n                { x: tox, y: toy }\n            ];\n        }\n\n        const x = (sox + tox) / 2;\n        return [\n            { x, y: soy },\n            { x, y: toy }\n        ];\n    } else if (sourceSide === 'top' && targetSide === 'bottom') {\n        if (soy < toy) {\n            let x = middleOfVerticalSides;\n            let y = soy;\n\n            if (soy < ty0) {\n                if (tx1 >= smx0 && tox < sox) {\n                    x = Math.min(tmx0, smx0);\n                } else if (tx0 <= smx1 && tox >= sox) {\n                    x = Math.max(tmx1, smx1);\n                }\n            }\n\n            return [\n                { x: sox, y },\n                { x, y },\n                { x, y: toy },\n                { x: tox, y: toy }\n            ];\n        }\n        const y = (soy + toy) / 2;\n        return [\n            { x: sox, y },\n            { x: tox, y }\n        ];\n    } else if (sourceSide === 'bottom' && targetSide === 'top') {\n        if (soy - margin > toy) {\n            let x = middleOfVerticalSides;\n            let y = soy;\n\n            if (soy > ty1) {\n                if (tx1 >= smx0 && tox < sox) {\n                    x = Math.min(tmx0, smx0);\n                } else if (tx0 <= smx1 && tox >= sox) {\n                    x = Math.max(tmx1, smx1);\n                }\n            }\n\n            return [\n                { x: sox, y },\n                { x, y },\n                { x, y: toy },\n                { x: tox, y: toy }\n            ];\n        }\n        const y = (soy + toy) / 2;\n        return [\n            { x: sox, y },\n            { x: tox, y }\n        ];\n    } else if (sourceSide === 'top' && targetSide === 'top') {\n        let x;\n        let y1 = Math.min((sy1 + ty0) / 2, toy);\n        let y2 = Math.min((sy0 + ty1) / 2, soy);\n\n        if (toy < soy) {\n            if (sox >= tmx1 || sox <= tmx0) {\n                return [\n                    { x: sox, y: Math.min(soy,toy) },\n                    { x: tox, y: Math.min(soy,toy) }\n                ];\n            } else if (tox > sox) {\n                x = Math.min(sox, tmx0);\n            } else {\n                x = Math.max(sox, tmx1);\n            }\n        } else {\n            if (tox >= smx1 || tox <= smx0) {\n                return [\n                    { x: sox, y: Math.min(soy,toy) },\n                    { x: tox, y: Math.min(soy,toy) }\n                ];\n            } else if (tox >= sox) {\n                x = Math.max(tox, smx1);\n            } else {\n                x = Math.min(tox, smx0);\n            }\n        }\n\n        return [\n            { x: sox, y: y2 },\n            { x, y: y2 },\n            { x, y: y1 },\n            { x: tox, y: y1 }\n        ];\n    } else if (sourceSide === 'bottom' && targetSide === 'bottom') {\n        if (tx0 >= sox + margin || tx1 <= sox - margin) {\n            return [\n                { x: sox, y: Math.max(soy, toy) },\n                { x: tox, y: Math.max(soy, toy) }\n            ];\n        }\n\n        let x;\n        let y1;\n        let y2;\n\n        if (toy > soy) {\n            y1 = Math.max((sy1 + ty0) / 2, toy);\n            y2 = Math.max((sy1 + ty0) / 2, soy);\n\n            if (tox > sox) {\n                x = Math.min(sox, tmx0);\n            } else {\n                x = Math.max(sox, tmx1);\n            }\n        } else {\n            y1 = Math.max((sy0 + ty1) / 2, toy);\n            y2 = Math.max((sy0 + ty1) / 2, soy);\n\n            if (tox > sox) {\n                x = Math.min(tox, smx0);\n            } else {\n                x = Math.max(tox, smx1);\n            }\n        }\n\n        return [\n            { x: sox, y: y2 },\n            { x, y: y2 },\n            { x, y: y1 },\n            { x: tox, y: y1 }\n        ];\n    } else if (sourceSide === 'left' && targetSide === 'left') {\n        let y;\n        let x1 = Math.min((sx1 + tx0) / 2, tox);\n        let x2 = Math.min((sx0 + tx1) / 2, sox);\n\n        if (tox > sox) {\n            if (toy <= soy) {\n                y = Math.min(smy0, toy);\n            } else {\n                y = Math.max(smy1, toy);\n            }\n        } else {\n            if (toy >= soy) {\n                y = Math.min(tmy0, soy);\n            } else {\n                y = Math.max(tmy1, soy);\n            }\n        }\n\n        return [\n            { x: x2, y: soy },\n            { x: x2, y },\n            { x: x1, y },\n            { x: x1, y: toy }\n        ];\n    } else if (sourceSide === 'right' && targetSide === 'right') {\n        let y;\n        let x1 = Math.max((sx0 + tx1) / 2, tox);\n        let x2 = Math.max((sx1 + tx0) / 2, sox);\n\n        if (tox < sox) {\n            if (toy <= soy) {\n                y = Math.min(smy0, toy);\n            } else {\n                y = Math.max(smy1, toy);\n            }\n        } else {\n            if (toy >= soy) {\n                y = Math.min(tmy0, soy);\n            } else {\n                y = Math.max(tmy1, soy);\n            }\n        }\n\n        return [\n            { x: x2, y: soy },\n            { x: x2, y },\n            { x: x1, y },\n            { x: x1, y: toy }\n        ];\n    } else if (sourceSide === 'top' && targetSide === 'right') {\n        if (soy > toy) {\n            if (sox < tox) {\n                let y = (sy0 + ty1) / 2;\n                if (y > tcy && y < tmy1 && sox < tmx0) {\n                    y = tmy0;\n                }\n                return [\n                    { x: sox, y },\n                    { x: tox, y },\n                    { x: tox, y: toy }\n                ];\n            }\n            return [{ x: sox, y: toy }];\n        }\n\n        const x = (sx0 + tx1) / 2;\n\n        if (sox > tox && sy1 >= toy) {\n            return [\n                { x: sox, y: soy },\n                { x, y: soy },\n                { x, y: toy }];\n        }\n\n        if (x > smx0 && soy < ty1) {\n            const y = Math.min(sy0, ty0) - margin;\n            const x = Math.max(sx1, tx1) + margin;\n            return [\n                { x: sox, y },\n                { x, y },\n                { x, y: toy }\n            ];\n        }\n        return [\n            { x: sox, y: soy },\n            { x, y: soy },\n            { x, y: toy }\n        ];\n    } else if (sourceSide === 'top' && targetSide === 'left') {\n        if (soy > toy) {\n            if (sox > tox) {\n                let y = (sy0 + ty1) / 2;\n                if (y > tcy && y < tmy1 && sox > tmx1) {\n                    y = tmy0;\n                }\n                return [\n                    { x: sox, y },\n                    { x: tox, y },\n                    { x: tox, y: toy }\n                ];\n            }\n            return [{ x: sox, y: toy }];\n        }\n\n        const x = (sx1 + tx0) / 2;\n\n        if (sox < tox && sy1 >= toy) {\n            return [\n                { x: sox, y: soy },\n                { x, y: soy },\n                { x, y: toy }];\n        }\n\n        if (x < smx1 && soy < ty1) {\n            const y = Math.min(sy0, ty0) - margin;\n            const x = Math.min(sx0, tx0) - margin;\n            return [\n                { x: sox, y },\n                { x, y },\n                { x, y: toy }\n            ];\n        }\n        return [\n            { x: sox, y: soy },\n            { x, y: soy },\n            { x, y: toy }\n        ];\n    } else if (sourceSide === 'bottom' && targetSide === 'right') {\n        if (soy < toy) {\n            if (sox < tox) {\n                let y = (sy1 + ty0) / 2;\n                if (y < tcy && y > tmy0 && sox < tmx0) {\n                    y = tmy1;\n                }\n                return [\n                    { x: sox, y },\n                    { x: tox, y },\n                    { x: tox, y: toy }\n                ];\n            }\n            return [{ x: sox, y: toy }];\n        } else {\n            if (sx0 < tox) {\n                const y = Math.max(sy1, ty1) + margin;\n                const x = Math.max(sx1, tx1) + margin;\n                return [\n                    { x: sox, y },\n                    { x, y },\n                    { x, y: toy }\n                ];\n            }\n        }\n\n        const x = middleOfVerticalSides;\n\n        return [\n            { x: sox, y: soy },\n            { x, y: soy },\n            { x, y: toy }\n        ];\n    } else if (sourceSide === 'bottom' && targetSide === 'left') {\n        if (soy < toy) {\n            if (sox > tox) {\n                let y = (sy1 + ty0) / 2;\n                if (y < tcy && y > tmy0 && sox > tmx1) {\n                    y = tmy1;\n                }\n                return [\n                    { x: sox, y },\n                    { x: tox, y },\n                    { x: tox, y: toy }\n                ];\n            }\n            return [{ x: sox, y: toy }];\n        } else {\n            if (sx1 > tox) {\n                const y = Math.max(sy1, ty1) + margin;\n                const x = Math.min(sx0, tx0) - margin;\n                return [\n                    { x: sox, y },\n                    { x, y },\n                    { x, y: toy }\n                ];\n            }\n        }\n\n        const x = middleOfVerticalSides;\n\n        return [\n            { x: sox, y: soy },\n            { x, y: soy },\n            { x, y: toy }\n        ];\n    } else if (sourceSide === 'left' && targetSide === 'bottom') {\n        if (sox > tox && soy >= tmy1) {\n            return [{ x: tox, y: soy }];\n        }\n\n        if (sox >= tx1 && soy < toy) {\n            const x = (sx1 + tx0) / 2;\n            return [\n                { x, y: soy },\n                { x, y: toy },\n                { x: tox, y: toy }\n            ];\n        }\n\n        if (tox < sx1 && ty1 <= sy0) {\n            const y = (sy0 + ty1) / 2;\n\n            return [\n                { x: sox, y: soy },\n                { x: sox, y },\n                { x: tox, y }\n            ];\n        }\n\n        const x = Math.min(tmx0, sox);\n        const y = Math.max(sy1, ty1) + margin;\n\n        return [\n            { x, y: soy },\n            { x, y },\n            { x: tox, y }\n        ];\n    } else if (sourceSide === 'left' && targetSide === 'top') {\n        if (sox > tox && soy < tmy0) {\n            return [{ x: tox, y: soy }];\n        }\n\n        if (sox >= tx1) {\n            if (soy > toy) {\n                const x = (sx0 + tx1) / 2;\n                return [\n                    { x, y: soy },\n                    { x, y: toy },\n                    { x: tox, y: toy }\n                ];\n            }\n        }\n\n        if (tox <= sx1 && toy > soy) {\n            const y = (ty0 + sy1) / 2;\n\n            return [\n                { x: sox, y: soy },\n                { x: sox, y },\n                { x: tox, y },\n            ];\n        }\n\n        const x = toy < soy ? Math.min(sx0, tx0) - margin : smx0;\n        const y = Math.min(sy0, ty0) - margin;\n\n        return [\n            { x, y: soy },\n            { x, y },\n            { x: tox, y }\n        ];\n\n    } else if (sourceSide === 'right' && targetSide === 'top') {\n        if (sox < tox && soy < tmy0) {\n            return [{ x: tox, y: soy }];\n        }\n\n        if (sx1 < tx0 && soy > toy) {\n            let x = (sx1 + tx0) / 2;\n            return [\n                { x, y: soy },\n                { x, y: toy },\n                { x: tox, y: toy }\n            ];\n        }\n\n        if (tox < sox && ty0 > sy1) {\n            const y = (sy1 + ty0) / 2;\n\n            return [\n                { x: sox, y: soy },\n                { x: sox, y },\n                { x: tox, y }\n            ];\n        }\n\n        const x = Math.max(sx1, tx1) + margin;\n        const y = Math.min(sy0, ty0) - margin;\n        return [\n            { x, y: soy },\n            { x, y },\n            { x: tox, y }\n        ];\n    } else if (sourceSide === 'right' && targetSide === 'bottom') {\n        if (sox < tox && soy >= tmy1) {\n            return [{ x: tox, y: soy }];\n        }\n\n        if (sox <= tx0 && soy < toy) {\n            const x = (sx1 + tx0) / 2;\n            return [\n                { x, y: soy },\n                { x, y: toy },\n                { x: tox, y: toy }\n            ];\n        }\n\n        if (tox > sx0 && ty1 < sy0) {\n            const y = (sy0 + ty1) / 2;\n\n            return [\n                { x: sox, y: soy },\n                { x: sox, y },\n                { x: tox, y }\n            ];\n        }\n\n        const x = Math.max(tmx1, sox);\n        const y = Math.max(sy1, ty1) + margin;\n\n        return [\n            { x, y: soy },\n            { x, y },\n            { x: tox, y }\n        ];\n    }\n}\n\nrightAngleRouter.Directions = Directions;\n\nexport const rightAngle = rightAngleRouter;\n","import * as g from '../g/index.mjs';\n\nconst CornerTypes = {\n    POINT: 'point',\n    CUBIC: 'cubic',\n    LINE: 'line',\n    GAP: 'gap'\n};\n\nconst DEFINED_CORNER_TYPES = Object.values(CornerTypes);\n\nconst CORNER_RADIUS = 10;\nconst PRECISION = 1;\n\nexport const straight = function(sourcePoint, targetPoint, routePoints = [], opt = {}) {\n\n    const {\n        cornerType = CornerTypes.POINT,\n        cornerRadius = CORNER_RADIUS,\n        cornerPreserveAspectRatio = false,\n        precision = PRECISION,\n        raw = false\n    } = opt;\n\n    if (DEFINED_CORNER_TYPES.indexOf(cornerType) === -1) {\n        // unknown `cornerType` provided => error\n        throw new Error('Invalid `cornerType` provided to `straight` connector.');\n    }\n\n    let path;\n\n    if ((cornerType === CornerTypes.POINT) || !cornerRadius) {\n        // default option => normal connector\n        // simply connect all points with straight lines\n        const points = [sourcePoint].concat(routePoints).concat([targetPoint]);\n        const polyline = new g.Polyline(points);\n        path = new g.Path(polyline);\n\n    } else {\n        // `cornerType` is not unknown and not 'point' (default) => must be one of other valid types\n        path = new g.Path();\n\n        // add initial gap segment = to source point\n        path.appendSegment(g.Path.createSegment('M', sourcePoint));\n\n        let nextDistance;\n        const routePointsLength = routePoints.length;\n        for (let i = 0; i < routePointsLength; i++) {\n\n            const curr = new g.Point(routePoints[i]);\n            const prev = (routePoints[i - 1] || sourcePoint);\n            const next = (routePoints[i + 1] || targetPoint);\n            const prevDistance = (nextDistance || (curr.distance(prev) / 2)); // try to re-use previously-computed `nextDistance`\n            nextDistance = (curr.distance(next) / 2);\n\n            let startMove, endMove;\n            if (!cornerPreserveAspectRatio) {\n                // `startMove` and `endMove` may be different\n                // (this happens when next or previous path point is closer than `2 * cornerRadius`)\n                startMove = -Math.min(cornerRadius, prevDistance);\n                endMove = -Math.min(cornerRadius, nextDistance);\n            } else {\n                // force `startMove` and `endMove` to be the same\n                startMove = endMove = -Math.min(cornerRadius, prevDistance, nextDistance);\n            }\n\n            // to find `cornerStart` and `cornerEnd`, the logic is as follows (using `cornerStart` as example):\n            // - find a point lying on the line `prev - startMove` such that...\n            // - ...the point lies `abs(startMove)` distance away from `curr`...\n            // - ...and its coordinates are rounded to whole numbers\n            const cornerStart = curr.clone().move(prev, startMove).round(precision);\n            const cornerEnd = curr.clone().move(next, endMove).round(precision);\n\n            // add in-between straight segment = from previous route point to corner start point\n            // (may have zero length)\n            path.appendSegment(g.Path.createSegment('L', cornerStart));\n\n            // add corner segment = from corner start point to corner end point\n            switch (cornerType) {\n                case CornerTypes.CUBIC: {\n                    // corner is rounded\n                    const _13 = (1 / 3);\n                    const _23 = (2 / 3);\n                    const control1 = new g.Point((_13 * cornerStart.x) + (_23 * curr.x), (_23 * curr.y) + (_13 * cornerStart.y));\n                    const control2 = new g.Point((_13 * cornerEnd.x) + (_23 * curr.x), (_23 * curr.y) + (_13 * cornerEnd.y));\n                    path.appendSegment(g.Path.createSegment('C', control1, control2, cornerEnd));\n                    break;\n                }\n                case CornerTypes.LINE: {\n                    // corner has bevel\n                    path.appendSegment(g.Path.createSegment('L', cornerEnd));\n                    break;\n                }\n                case CornerTypes.GAP: {\n                    // corner has empty space\n                    path.appendSegment(g.Path.createSegment('M', cornerEnd));\n                    break;\n                }\n                // default: no segment is created\n            }\n        }\n\n        // add final straight segment = from last corner end point to target point\n        // (= or from start point to end point, if there are no route points)\n        // (may have zero length)\n        path.appendSegment(g.Path.createSegment('L', targetPoint));\n    }\n\n    return ((raw) ? path : path.serialize());\n};\n","import * as util from '../util/index.mjs';\nimport * as g from '../g/index.mjs';\n\n// default size of jump if not specified in options\nvar JUMP_SIZE = 5;\n\n// available jump types\n// first one taken as default\nvar JUMP_TYPES = ['arc', 'gap', 'cubic'];\n\n// default radius\nvar RADIUS = 0;\n\n// takes care of math. error for case when jump is too close to end of line\nvar CLOSE_PROXIMITY_PADDING = 1;\n\n// list of connector types not to jump over.\nvar IGNORED_CONNECTORS = ['smooth'];\n\n// internal constants for round segment\nvar _13 = 1 / 3;\nvar _23 = 2 / 3;\n\nfunction sortPointsAscending(p1, p2) {\n\n    let { x: x1, y: y1 } = p1;\n    let { x: x2, y: y2 } = p2;\n\n    if (x1 > x2) {\n\n        let swap = x1;\n        x1 = x2;\n        x2 = swap;\n\n        swap = y1;\n        y1 = y2;\n        y2 = swap;\n    }\n\n    if (y1 > y2) {\n        let swap = x1;\n        x1 = x2;\n        x2 = swap;\n\n        swap = y1;\n        y1 = y2;\n        y2 = swap;\n    }\n\n    return [new g.Point(x1, y1), new g.Point(x2, y2)];\n}\n\nfunction overlapExists(line1, line2) {\n\n    const [{ x: x1, y: y1 }, { x: x2, y: y2 }] = sortPointsAscending(line1.start, line1.end);\n    const [{ x: x3, y: y3 }, { x: x4, y: y4 }] = sortPointsAscending(line2.start, line2.end);\n\n    const xMatch = x1 <= x4 && x3 <= x2;\n    const yMatch = y1 <= y4 && y3 <= y2;\n\n    return xMatch && yMatch;\n}\n\n/**\n * Transform start/end and route into series of lines\n * @param {g.point} sourcePoint start point\n * @param {g.point} targetPoint end point\n * @param {g.point[]} route optional list of route\n * @return {g.line[]} [description]\n */\nfunction createLines(sourcePoint, targetPoint, route) {\n    // make a flattened array of all points\n    var points = [].concat(sourcePoint, route, targetPoint);\n    return points.reduce(function(resultLines, point, idx) {\n        // if there is a next point, make a line with it\n        var nextPoint = points[idx + 1];\n        if (nextPoint != null) {\n            resultLines[idx] = g.line(point, nextPoint);\n        }\n        return resultLines;\n    }, []);\n}\n\nfunction setupUpdating(jumpOverLinkView) {\n    var paper = jumpOverLinkView.paper;\n    var updateList = paper._jumpOverUpdateList;\n\n    // first time setup for this paper\n    if (updateList == null) {\n        updateList = paper._jumpOverUpdateList = [];\n        var graph = paper.model;\n        graph.on('batch:stop', function() {\n            if (this.hasActiveBatch()) return;\n            updateJumpOver(paper);\n        });\n        graph.on('reset', function() {\n            updateList = paper._jumpOverUpdateList = [];\n        });\n    }\n\n    // add this link to a list so it can be updated when some other link is updated\n    if (updateList.indexOf(jumpOverLinkView) < 0) {\n        updateList.push(jumpOverLinkView);\n\n        // watch for change of connector type or removal of link itself\n        // to remove the link from a list of jump over connectors\n        jumpOverLinkView.listenToOnce(jumpOverLinkView.model, 'change:connector remove', function() {\n            updateList.splice(updateList.indexOf(jumpOverLinkView), 1);\n        });\n    }\n}\n\n/**\n * Handler for a batch:stop event to force\n * update of all registered links with jump over connector\n * @param {object} batchEvent optional object with info about batch\n */\nfunction updateJumpOver(paper) {\n    var updateList = paper._jumpOverUpdateList;\n    for (var i = 0; i < updateList.length; i++) {\n        const linkView = updateList[i];\n        const updateFlag = linkView.getFlag(linkView.constructor.Flags.CONNECTOR);\n        linkView.requestUpdate(updateFlag);\n    }\n}\n\n/**\n * Utility function to collect all intersection points of a single\n * line against group of other lines.\n * @param {g.line} line where to find points\n * @param {g.line[]} crossCheckLines lines to cross\n * @return {g.point[]} list of intersection points\n */\nfunction findLineIntersections(line, crossCheckLines) {\n    return util.toArray(crossCheckLines).reduce(function(res, crossCheckLine) {\n        var intersection = line.intersection(crossCheckLine);\n        if (intersection) {\n            res.push(intersection);\n        }\n        return res;\n    }, []);\n}\n\n/**\n * Sorting function for list of points by their distance.\n * @param {g.point} p1 first point\n * @param {g.point} p2 second point\n * @return {number} squared distance between points\n */\nfunction sortPoints(p1, p2) {\n    return g.line(p1, p2).squaredLength();\n}\n\n/**\n * Split input line into multiple based on intersection points.\n * @param {g.line} line input line to split\n * @param {g.point[]} intersections points where to split the line\n * @param {number} jumpSize the size of jump arc (length empty spot on a line)\n * @return {g.line[]} list of lines being split\n */\nfunction createJumps(line, intersections, jumpSize) {\n    return intersections.reduce(function(resultLines, point, idx) {\n        // skipping points that were merged with the previous line\n        // to make bigger arc over multiple lines that are close to each other\n        if (point.skip === true) {\n            return resultLines;\n        }\n\n        // always grab the last line from buffer and modify it\n        var lastLine = resultLines.pop() || line;\n\n        // calculate start and end of jump by moving by a given size of jump\n        var jumpStart = g.point(point).move(lastLine.start, -(jumpSize));\n        var jumpEnd = g.point(point).move(lastLine.start, +(jumpSize));\n\n        // now try to look at the next intersection point\n        var nextPoint = intersections[idx + 1];\n        if (nextPoint != null) {\n            var distance = jumpEnd.distance(nextPoint);\n            if (distance <= jumpSize) {\n                // next point is close enough, move the jump end by this\n                // difference and mark the next point to be skipped\n                jumpEnd = nextPoint.move(lastLine.start, distance);\n                nextPoint.skip = true;\n            }\n        } else {\n            // this block is inside of `else` as an optimization so the distance is\n            // not calculated when we know there are no other intersection points\n            var endDistance = jumpStart.distance(lastLine.end);\n            // if the end is too close to possible jump, draw remaining line instead of a jump\n            if (endDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n                resultLines.push(lastLine);\n                return resultLines;\n            }\n        }\n\n        var startDistance = jumpEnd.distance(lastLine.start);\n        if (startDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n            // if the start of line is too close to jump, draw that line instead of a jump\n            resultLines.push(lastLine);\n            return resultLines;\n        }\n\n        // finally create a jump line\n        var jumpLine = g.line(jumpStart, jumpEnd);\n        // it's just simple line but with a `isJump` property\n        jumpLine.isJump = true;\n\n        resultLines.push(\n            g.line(lastLine.start, jumpStart),\n            jumpLine,\n            g.line(jumpEnd, lastLine.end)\n        );\n        return resultLines;\n    }, []);\n}\n\n/**\n * Assemble `D` attribute of a SVG path by iterating given lines.\n * @param {g.line[]} lines source lines to use\n * @param {number} jumpSize the size of jump arc (length empty spot on a line)\n * @param {number} radius the radius\n * @return {string}\n */\nfunction buildPath(lines, jumpSize, jumpType, radius) {\n\n    var path = new g.Path();\n    var segment;\n\n    // first move to the start of a first line\n    segment = g.Path.createSegment('M', lines[0].start);\n    path.appendSegment(segment);\n\n    // make a paths from lines\n    util.toArray(lines).forEach(function(line, index) {\n\n        if (line.isJump) {\n            var angle, diff;\n\n            var control1, control2;\n\n            if (jumpType === 'arc') { // approximates semicircle with 2 curves\n                angle = -90;\n                // determine rotation of arc based on difference between points\n                diff = line.start.difference(line.end);\n                // make sure the arc always points up (or right)\n                var xAxisRotate = Number((diff.x < 0) || (diff.x === 0 && diff.y < 0));\n                if (xAxisRotate) angle += 180;\n\n                var midpoint = line.midpoint();\n                var centerLine = new g.Line(midpoint, line.end).rotate(midpoint, angle);\n\n                var halfLine;\n\n                // first half\n                halfLine = new g.Line(line.start, midpoint);\n\n                control1 = halfLine.pointAt(2 / 3).rotate(line.start, angle);\n                control2 = centerLine.pointAt(1 / 3).rotate(centerLine.end, -angle);\n\n                segment = g.Path.createSegment('C', control1, control2, centerLine.end);\n                path.appendSegment(segment);\n\n                // second half\n                halfLine = new g.Line(midpoint, line.end);\n\n                control1 = centerLine.pointAt(1 / 3).rotate(centerLine.end, angle);\n                control2 = halfLine.pointAt(1 / 3).rotate(line.end, -angle);\n\n                segment = g.Path.createSegment('C', control1, control2, line.end);\n                path.appendSegment(segment);\n\n            } else if (jumpType === 'gap') {\n                segment = g.Path.createSegment('M', line.end);\n                path.appendSegment(segment);\n\n            } else if (jumpType === 'cubic') { // approximates semicircle with 1 curve\n                angle = line.start.theta(line.end);\n\n                var xOffset = jumpSize * 0.6;\n                var yOffset = jumpSize * 1.35;\n\n                // determine rotation of arc based on difference between points\n                diff = line.start.difference(line.end);\n                // make sure the arc always points up (or right)\n                xAxisRotate = Number((diff.x < 0) || (diff.x === 0 && diff.y < 0));\n                if (xAxisRotate) yOffset *= -1;\n\n                control1 = g.Point(line.start.x + xOffset, line.start.y + yOffset).rotate(line.start, angle);\n                control2 = g.Point(line.end.x - xOffset, line.end.y + yOffset).rotate(line.end, angle);\n\n                segment = g.Path.createSegment('C', control1, control2, line.end);\n                path.appendSegment(segment);\n            }\n\n        } else {\n            var nextLine = lines[index + 1];\n            if (radius == 0 || !nextLine || nextLine.isJump) {\n                segment = g.Path.createSegment('L', line.end);\n                path.appendSegment(segment);\n            } else {\n                buildRoundedSegment(radius, path, line.end, line.start, nextLine.end);\n            }\n        }\n    });\n\n    return path;\n}\n\nfunction buildRoundedSegment(offset, path, curr, prev, next) {\n    var prevDistance = curr.distance(prev) / 2;\n    var nextDistance = curr.distance(next) / 2;\n\n    var startMove = -Math.min(offset, prevDistance);\n    var endMove = -Math.min(offset, nextDistance);\n\n    var roundedStart = curr.clone().move(prev, startMove).round();\n    var roundedEnd = curr.clone().move(next, endMove).round();\n\n    var control1 = new g.Point((_13 * roundedStart.x) + (_23 * curr.x), (_23 * curr.y) + (_13 * roundedStart.y));\n    var control2 = new g.Point((_13 * roundedEnd.x) + (_23 * curr.x), (_23 * curr.y) + (_13 * roundedEnd.y));\n\n    var segment;\n    segment = g.Path.createSegment('L', roundedStart);\n    path.appendSegment(segment);\n\n    segment = g.Path.createSegment('C', control1, control2, roundedEnd);\n    path.appendSegment(segment);\n}\n\n/**\n * Actual connector function that will be run on every update.\n * @param {g.point} sourcePoint start point of this link\n * @param {g.point} targetPoint end point of this link\n * @param {g.point[]} route of this link\n * @param {object} opt options\n * @property {number} size optional size of a jump arc\n * @return {string} created `D` attribute of SVG path\n */\nexport const jumpover = function(sourcePoint, targetPoint, route, opt) { // eslint-disable-line max-params\n\n    setupUpdating(this);\n\n    var raw = opt.raw;\n    var jumpSize = opt.size || JUMP_SIZE;\n    var jumpType = opt.jump && ('' + opt.jump).toLowerCase();\n    var radius = opt.radius || RADIUS;\n    var ignoreConnectors = opt.ignoreConnectors || IGNORED_CONNECTORS;\n\n    // grab the first jump type as a default if specified one is invalid\n    if (JUMP_TYPES.indexOf(jumpType) === -1) {\n        jumpType = JUMP_TYPES[0];\n    }\n\n    var paper = this.paper;\n    var graph = paper.model;\n    var allLinks = graph.getLinks();\n\n    // there is just one link, draw it directly\n    if (allLinks.length === 1) {\n        return buildPath(\n            createLines(sourcePoint, targetPoint, route),\n            jumpSize, jumpType, radius\n        );\n    }\n\n    var thisModel = this.model;\n    var thisIndex = allLinks.indexOf(thisModel);\n    var defaultConnector = paper.options.defaultConnector || {};\n\n    // not all links are meant to be jumped over.\n    var links = allLinks.filter(function(link, idx) {\n\n        var connector = link.get('connector') || defaultConnector;\n\n        // avoid jumping over links with connector type listed in `ignored connectors`.\n        if (util.toArray(ignoreConnectors).includes(connector.name)) {\n            return false;\n        }\n        // filter out links that are above this one and  have the same connector type\n        // otherwise there would double hoops for each intersection\n        if (idx > thisIndex) {\n            return connector.name !== 'jumpover';\n        }\n        return true;\n    });\n\n    // find views for all links\n    var linkViews = links.map(function(link) {\n        return paper.findViewByModel(link);\n    });\n\n    // create lines for this link\n    var thisLines = createLines(\n        sourcePoint,\n        targetPoint,\n        route\n    );\n\n    // create lines for all other links\n    var linkLines = linkViews.map(function(linkView) {\n        if (linkView == null) {\n            return [];\n        }\n        if (linkView === this) {\n            return thisLines;\n        }\n        return createLines(\n            linkView.sourcePoint,\n            linkView.targetPoint,\n            linkView.route\n        );\n    }, this);\n\n    // transform lines for this link by splitting with jump lines at\n    // points of intersection with other links\n    var jumpingLines = thisLines.reduce(function(resultLines, thisLine) {\n        // iterate all links and grab the intersections with this line\n        // these are then sorted by distance so the line can be split more easily\n        var intersections = links.reduce(function(res, link, i) {\n            // don't intersection with itself\n            if (link !== thisModel) {\n\n                const linkLinesToTest = linkLines[i].slice();\n                const overlapIndex = linkLinesToTest.findIndex((line) => overlapExists(thisLine, line));\n\n                // Overlap occurs and the end point of one segment lies on thisLine\n                if (overlapIndex > -1 && thisLine.containsPoint(linkLinesToTest[overlapIndex].end)) {\n                    // Remove the next segment because there will never be a jump\n                    linkLinesToTest.splice(overlapIndex + 1, 1);\n                } \n                const lineIntersections = findLineIntersections(thisLine, linkLinesToTest);\n                res.push.apply(res, lineIntersections);\n            }\n            return res;\n        }, []).sort(function(a, b) {\n            return sortPoints(thisLine.start, a) - sortPoints(thisLine.start, b);\n        });\n\n        if (intersections.length > 0) {\n            // split the line based on found intersection points\n            resultLines.push.apply(resultLines, createJumps(thisLine, intersections, jumpSize));\n        } else {\n            // without any intersection the line goes uninterrupted\n            resultLines.push(thisLine);\n        }\n        return resultLines;\n    }, []);\n\n    var path = buildPath(jumpingLines, jumpSize, jumpType, radius);\n    return (raw) ? path : path.serialize();\n};\n","import { straight } from './straight.mjs';\n\nexport const normal = function(sourcePoint, targetPoint, route = [], opt = {}) {\n\n    const { raw } = opt;\n    const localOpt = {\n        cornerType: 'point',\n        raw\n    };\n\n    return straight(sourcePoint, targetPoint, route, localOpt);\n};\n","import { straight } from './straight.mjs';\n\nconst CORNER_RADIUS = 10;\nconst PRECISION = 0;\n\nexport const rounded = function(sourcePoint, targetPoint, route = [], opt = {}) {\n\n    const { radius = CORNER_RADIUS, raw } = opt;\n    const localOpt = {\n        cornerType: 'cubic',\n        cornerRadius: radius,\n        precision: PRECISION,\n        raw\n    };\n\n    return straight(sourcePoint, targetPoint, route, localOpt);\n};\n","import * as g from '../g/index.mjs';\n\nexport const smooth = function(sourcePoint, targetPoint, route, opt) {\n\n    var raw = opt && opt.raw;\n    var path;\n\n    if (route && route.length !== 0) {\n\n        var points = [sourcePoint].concat(route).concat([targetPoint]);\n        var curves = g.Curve.throughPoints(points);\n\n        path = new g.Path(curves);\n\n    } else {\n        // if we have no route, use a default cubic bezier curve\n        // cubic bezier requires two control points\n        // the control points have `x` midway between source and target\n        // this produces an S-like curve\n\n        path = new g.Path();\n\n        var segment;\n\n        segment = g.Path.createSegment('M', sourcePoint);\n        path.appendSegment(segment);\n\n        if ((Math.abs(sourcePoint.x - targetPoint.x)) >= (Math.abs(sourcePoint.y - targetPoint.y))) {\n            var controlPointX = (sourcePoint.x + targetPoint.x) / 2;\n\n            segment = g.Path.createSegment('C', controlPointX, sourcePoint.y, controlPointX, targetPoint.y, targetPoint.x, targetPoint.y);\n            path.appendSegment(segment);\n\n        } else {\n            var controlPointY = (sourcePoint.y + targetPoint.y) / 2;\n\n            segment = g.Path.createSegment('C', sourcePoint.x, controlPointY, targetPoint.x, controlPointY, targetPoint.x, targetPoint.y);\n            path.appendSegment(segment);\n\n        }\n    }\n\n    return (raw) ? path : path.serialize();\n};\n","import { Path, Point, Curve } from '../g/index.mjs';\n\nconst Directions = {\n    AUTO: 'auto',\n    HORIZONTAL: 'horizontal',\n    VERTICAL: 'vertical',\n    CLOSEST_POINT: 'closest-point',\n    OUTWARDS: 'outwards'\n};\n\nconst TangentDirections = {\n    UP: 'up',\n    DOWN: 'down',\n    LEFT: 'left',\n    RIGHT: 'right',\n    AUTO: 'auto',\n    CLOSEST_POINT: 'closest-point',\n    OUTWARDS: 'outwards'\n};\n\nexport const curve = function(sourcePoint, targetPoint, route = [], opt = {}, linkView) {\n    const raw = Boolean(opt.raw);\n    // distanceCoefficient - a coefficient of the tangent vector length relative to the distance between points.\n    // angleTangentCoefficient - a coefficient of the end tangents length in the case of angles larger than 45 degrees.\n    // tension - a Catmull-Rom curve tension parameter.\n    // sourceTangent - a tangent vector along the curve at the sourcePoint.\n    // sourceDirection - a unit direction vector along the curve at the sourcePoint.\n    // targetTangent - a tangent vector along the curve at the targetPoint.\n    // targetDirection - a unit direction vector along the curve at the targetPoint.\n    // precision - a rounding precision for path values.\n    const { direction = Directions.AUTO, precision = 3 } = opt;\n    const options = {\n        coeff: opt.distanceCoefficient || 0.6,\n        angleTangentCoefficient: opt.angleTangentCoefficient || 80,\n        tau: opt.tension || 0.5,\n        sourceTangent: opt.sourceTangent ? new Point(opt.sourceTangent) : null,\n        targetTangent: opt.targetTangent ? new Point(opt.targetTangent) : null,\n        rotate: Boolean(opt.rotate)\n    };\n    if (typeof opt.sourceDirection === 'string')\n        options.sourceDirection = opt.sourceDirection;\n    else if (typeof opt.sourceDirection === 'number')\n        options.sourceDirection = new Point(1, 0).rotate(null, opt.sourceDirection);\n    else\n        options.sourceDirection = opt.sourceDirection ? new Point(opt.sourceDirection).normalize() : null;\n\n    if (typeof opt.targetDirection === 'string')\n        options.targetDirection = opt.targetDirection;\n    else if (typeof opt.targetDirection === 'number')\n        options.targetDirection = new Point(1, 0).rotate(null, opt.targetDirection);\n    else\n        options.targetDirection = opt.targetDirection ? new Point(opt.targetDirection).normalize() : null;\n\n    const completeRoute = [sourcePoint, ...route, targetPoint].map(p => new Point(p));\n\n    // The calculation of a sourceTangent\n    let sourceTangent;\n    if (options.sourceTangent) {\n        sourceTangent = options.sourceTangent;\n    } else {\n        const sourceDirection = getSourceTangentDirection(linkView, completeRoute, direction, options);\n        const tangentLength = completeRoute[0].distance(completeRoute[1]) * options.coeff;\n        const pointsVector = completeRoute[1].difference(completeRoute[0]).normalize();\n        const angle = angleBetweenVectors(sourceDirection, pointsVector);\n        if (angle > Math.PI / 4) {\n            const updatedLength = tangentLength + (angle - Math.PI / 4) * options.angleTangentCoefficient;\n            sourceTangent = sourceDirection.clone().scale(updatedLength, updatedLength);\n        } else {\n            sourceTangent = sourceDirection.clone().scale(tangentLength, tangentLength);\n        }\n    }\n\n    // The calculation of a targetTangent\n    let targetTangent;\n    if (options.targetTangent) {\n        targetTangent = options.targetTangent;\n    } else {\n        const targetDirection = getTargetTangentDirection(linkView, completeRoute, direction, options);\n        const last = completeRoute.length - 1;\n        const tangentLength = completeRoute[last - 1].distance(completeRoute[last]) * options.coeff;\n        const pointsVector = completeRoute[last - 1].difference(completeRoute[last]).normalize();\n        const angle = angleBetweenVectors(targetDirection, pointsVector);\n        if (angle > Math.PI / 4) {\n            const updatedLength = tangentLength + (angle - Math.PI / 4) * options.angleTangentCoefficient;\n            targetTangent = targetDirection.clone().scale(updatedLength, updatedLength);\n        } else {\n            targetTangent = targetDirection.clone().scale(tangentLength, tangentLength);\n        }\n    }\n\n    const catmullRomCurves = createCatmullRomCurves(completeRoute, sourceTangent, targetTangent, options);\n    const bezierCurves = catmullRomCurves.map(curve => catmullRomToBezier(curve, options));\n    const path = new Path(bezierCurves).round(precision);\n\n    return (raw) ? path : path.serialize();\n};\ncurve.Directions = Directions;\ncurve.TangentDirections = TangentDirections;\n\nfunction getHorizontalSourceDirection(linkView, route, options) {\n    const { sourceBBox } = linkView;\n\n    let sourceSide;\n    let rotation;\n    if (!linkView.sourceView) {\n        if (sourceBBox.x > route[1].x)\n            sourceSide = 'right';\n        else\n            sourceSide = 'left';\n    } else {\n        rotation = linkView.sourceView.model.angle();\n        if (options.rotate && rotation) {\n            const unrotatedBBox = linkView.sourceView.getNodeUnrotatedBBox(linkView.sourceView.el);\n            const sourcePoint = route[0].clone();\n            sourcePoint.rotate(sourceBBox.center(), rotation);\n            sourceSide = unrotatedBBox.sideNearestToPoint(sourcePoint);\n        } else {\n            sourceSide = sourceBBox.sideNearestToPoint(route[0]);\n        }\n    }\n\n    let direction;\n    switch (sourceSide) {\n        case 'left':\n            direction = new Point(-1, 0);\n            break;\n        case 'right':\n        default:\n            direction = new Point(1, 0);\n            break;\n    }\n\n    if (options.rotate && rotation) {\n        direction.rotate(null, -rotation);\n    }\n\n    return direction;\n}\n\nfunction getHorizontalTargetDirection(linkView, route, options) {\n    const { targetBBox } = linkView;\n\n    let targetSide;\n    let rotation;\n    if (!linkView.targetView) {\n        if (targetBBox.x > route[route.length - 2].x)\n            targetSide = 'left';\n        else\n            targetSide = 'right';\n    } else {\n        rotation = linkView.targetView.model.angle();\n        if (options.rotate && rotation) {\n            const unrotatedBBox = linkView.targetView.getNodeUnrotatedBBox(linkView.targetView.el);\n            const targetPoint = route[route.length - 1].clone();\n            targetPoint.rotate(targetBBox.center(), rotation);\n            targetSide = unrotatedBBox.sideNearestToPoint(targetPoint);\n        } else {\n            targetSide = targetBBox.sideNearestToPoint(route[route.length - 1]);\n        }\n    }\n\n    let direction;\n    switch (targetSide) {\n        case 'left':\n            direction = new Point(-1, 0);\n            break;\n        case 'right':\n        default:\n            direction = new Point(1, 0);\n            break;\n    }\n\n    if (options.rotate && rotation) {\n        direction.rotate(null, -rotation);\n    }\n\n    return direction;\n}\n\nfunction getVerticalSourceDirection(linkView, route, options) {\n    const { sourceBBox } = linkView;\n\n    let sourceSide;\n    let rotation;\n    if (!linkView.sourceView) {\n        if (sourceBBox.y > route[1].y)\n            sourceSide = 'bottom';\n        else\n            sourceSide = 'top';\n    } else {\n        rotation = linkView.sourceView.model.angle();\n        if (options.rotate && rotation) {\n            const unrotatedBBox = linkView.sourceView.getNodeUnrotatedBBox(linkView.sourceView.el);\n            const sourcePoint = route[0].clone();\n            sourcePoint.rotate(sourceBBox.center(), rotation);\n            sourceSide = unrotatedBBox.sideNearestToPoint(sourcePoint);\n        } else {\n            sourceSide = sourceBBox.sideNearestToPoint(route[0]);\n        }\n    }\n\n    let direction;\n    switch (sourceSide) {\n        case 'top':\n            direction = new Point(0, -1);\n            break;\n        case 'bottom':\n        default:\n            direction = new Point(0, 1);\n            break;\n    }\n\n    if (options.rotate && rotation) {\n        direction.rotate(null, -rotation);\n    }\n\n    return direction;\n}\n\nfunction getVerticalTargetDirection(linkView, route, options) {\n    const { targetBBox } = linkView;\n\n    let targetSide;\n    let rotation;\n    if (!linkView.targetView) {\n        if (targetBBox.y > route[route.length - 2].y)\n            targetSide = 'top';\n        else\n            targetSide = 'bottom';\n    } else {\n        rotation = linkView.targetView.model.angle();\n        if (options.rotate && rotation) {\n            const unrotatedBBox = linkView.targetView.getNodeUnrotatedBBox(linkView.targetView.el);\n            const targetPoint = route[route.length - 1].clone();\n            targetPoint.rotate(targetBBox.center(), rotation);\n            targetSide = unrotatedBBox.sideNearestToPoint(targetPoint);\n        } else {\n            targetSide = targetBBox.sideNearestToPoint(route[route.length - 1]);\n        }\n    }\n\n\n    let direction;\n    switch (targetSide) {\n        case 'top':\n            direction = new Point(0, -1);\n            break;\n        case 'bottom':\n        default:\n            direction = new Point(0, 1);\n            break;\n    }\n\n    if (options.rotate && rotation) {\n        direction.rotate(null, -rotation);\n    }\n\n    return direction;\n}\n\nfunction getAutoSourceDirection(linkView, route, options) {\n    const { sourceBBox } = linkView;\n\n    let sourceSide;\n    let rotation;\n    if (!linkView.sourceView) {\n        sourceSide = sourceBBox.sideNearestToPoint(route[1]);\n    } else {\n        rotation = linkView.sourceView.model.angle();\n        if (options.rotate && rotation) {\n            const unrotatedBBox = linkView.sourceView.getNodeUnrotatedBBox(linkView.sourceView.el);\n            const sourcePoint = route[0].clone();\n            sourcePoint.rotate(sourceBBox.center(), rotation);\n            sourceSide = unrotatedBBox.sideNearestToPoint(sourcePoint);\n        } else {\n            sourceSide = sourceBBox.sideNearestToPoint(route[0]);\n        }\n    }\n\n    let direction;\n    switch (sourceSide) {\n        case 'top':\n            direction = new Point(0, -1);\n            break;\n        case 'bottom':\n            direction = new Point(0, 1);\n            break;\n        case 'right':\n            direction = new Point(1, 0);\n            break;\n        case 'left':\n            direction = new Point(-1, 0);\n            break;\n    }\n\n    if (options.rotate && rotation) {\n        direction.rotate(null, -rotation);\n    }\n\n    return direction;\n}\n\nfunction getAutoTargetDirection(linkView, route, options) {\n    const { targetBBox } = linkView;\n\n    let targetSide;\n    let rotation;\n    if (!linkView.targetView) {\n        targetSide = targetBBox.sideNearestToPoint(route[route.length - 2]);\n    } else {\n        rotation = linkView.targetView.model.angle();\n        if (options.rotate && rotation) {\n            const unrotatedBBox = linkView.targetView.getNodeUnrotatedBBox(linkView.targetView.el);\n            const targetPoint = route[route.length - 1].clone();\n            targetPoint.rotate(targetBBox.center(), rotation);\n            targetSide = unrotatedBBox.sideNearestToPoint(targetPoint);\n        } else {\n            targetSide = targetBBox.sideNearestToPoint(route[route.length - 1]);\n        }\n    }\n\n    let direction;\n    switch (targetSide) {\n        case 'top':\n            direction = new Point(0, -1);\n            break;\n        case 'bottom':\n            direction = new Point(0, 1);\n            break;\n        case 'right':\n            direction = new Point(1, 0);\n            break;\n        case 'left':\n            direction = new Point(-1, 0);\n            break;\n    }\n\n    if (options.rotate && rotation) {\n        direction.rotate(null, -rotation);\n    }\n\n    return direction;\n}\n\nfunction getClosestPointSourceDirection(linkView, route, options) {\n    return route[1].difference(route[0]).normalize();\n}\n\nfunction getClosestPointTargetDirection(linkView, route, options) {\n    const last = route.length - 1;\n    return route[last - 1].difference(route[last]).normalize();\n}\n\nfunction getOutwardsSourceDirection(linkView, route, options) {\n    const { sourceBBox } = linkView;\n    const sourceCenter = sourceBBox.center();\n    return route[0].difference(sourceCenter).normalize();\n}\n\nfunction getOutwardsTargetDirection(linkView, route, options) {\n    const { targetBBox } = linkView;\n    const targetCenter = targetBBox.center();\n    return route[route.length - 1].difference(targetCenter).normalize();\n}\n\nfunction getSourceTangentDirection(linkView, route, direction, options) {\n    if (options.sourceDirection) {\n        switch (options.sourceDirection) {\n            case TangentDirections.UP:\n                return new Point(0, -1);\n            case TangentDirections.DOWN:\n                return new Point(0, 1);\n            case TangentDirections.LEFT:\n                return new Point(-1, 0);\n            case TangentDirections.RIGHT:\n                return new Point(1, 0);\n            case TangentDirections.AUTO:\n                return getAutoSourceDirection(linkView, route, options);\n            case TangentDirections.CLOSEST_POINT:\n                return getClosestPointSourceDirection(linkView, route, options);\n            case TangentDirections.OUTWARDS:\n                return getOutwardsSourceDirection(linkView, route, options);\n            default:\n                return options.sourceDirection;\n        }\n    }\n\n    switch (direction) {\n        case Directions.HORIZONTAL:\n            return getHorizontalSourceDirection(linkView, route, options);\n        case Directions.VERTICAL:\n            return getVerticalSourceDirection(linkView, route, options);\n        case Directions.CLOSEST_POINT:\n            return getClosestPointSourceDirection(linkView, route, options);\n        case Directions.OUTWARDS:\n            return getOutwardsSourceDirection(linkView, route, options);\n        case Directions.AUTO:\n        default:\n            return getAutoSourceDirection(linkView, route, options);\n    }\n}\n\nfunction getTargetTangentDirection(linkView, route, direction, options) {\n    if (options.targetDirection) {\n        switch (options.targetDirection) {\n            case TangentDirections.UP:\n                return new Point(0, -1);\n            case TangentDirections.DOWN:\n                return new Point(0, 1);\n            case TangentDirections.LEFT:\n                return new Point(-1, 0);\n            case TangentDirections.RIGHT:\n                return new Point(0, 1);\n            case TangentDirections.AUTO:\n                return getAutoTargetDirection(linkView, route, options);\n            case TangentDirections.CLOSEST_POINT:\n                return getClosestPointTargetDirection(linkView, route, options);\n            case TangentDirections.OUTWARDS:\n                return getOutwardsTargetDirection(linkView, route, options);\n            default:\n                return options.targetDirection;\n        }\n    }\n\n    switch (direction) {\n        case Directions.HORIZONTAL:\n            return getHorizontalTargetDirection(linkView, route, options);\n        case Directions.VERTICAL:\n            return getVerticalTargetDirection(linkView, route, options);\n        case Directions.CLOSEST_POINT:\n            return getClosestPointTargetDirection(linkView, route, options);\n        case Directions.OUTWARDS:\n            return getOutwardsTargetDirection(linkView, route, options);\n        case Directions.AUTO:\n        default:\n            return getAutoTargetDirection(linkView, route, options);\n    }\n}\n\nfunction rotateVector(vector, angle) {\n    const cos = Math.cos(angle);\n    const sin = Math.sin(angle);\n    const x = cos * vector.x - sin * vector.y;\n    const y = sin * vector.x + cos * vector.y;\n    vector.x = x;\n    vector.y = y;\n}\n\nfunction angleBetweenVectors(v1, v2) {\n    let cos = v1.dot(v2) / (v1.magnitude() * v2.magnitude());\n    if (cos < -1) cos = -1;\n    if (cos > 1) cos = 1;\n    return Math.acos(cos);\n}\n\nfunction determinant(v1, v2) {\n    return v1.x * v2.y - v1.y * v2.x;\n}\n\nfunction createCatmullRomCurves(points, sourceTangent, targetTangent, options) {\n    const { tau, coeff } = options;\n    const distances = [];\n    const tangents = [];\n    const catmullRomCurves = [];\n    const n = points.length - 1;\n\n    for (let i = 0; i < n; i++) {\n        distances[i] = points[i].distance(points[i + 1]);\n    }\n\n    tangents[0] = sourceTangent;\n    tangents[n] = targetTangent;\n\n    // The calculation of tangents of vertices\n    for (let i = 1; i < n; i++) {\n        let tpPrev;\n        let tpNext;\n        if (i === 1) {\n            tpPrev = points[i - 1].clone().offset(tangents[i - 1].x, tangents[i - 1].y);\n        } else {\n            tpPrev = points[i - 1].clone();\n        }\n        if (i === n - 1) {\n            tpNext = points[i + 1].clone().offset(tangents[i + 1].x, tangents[i + 1].y);\n        } else {\n            tpNext = points[i + 1].clone();\n        }\n        const v1 = tpPrev.difference(points[i]).normalize();\n        const v2 = tpNext.difference(points[i]).normalize();\n        const vAngle = angleBetweenVectors(v1, v2);\n\n        let rot = (Math.PI - vAngle) / 2;\n        let t;\n        const vectorDeterminant = determinant(v1, v2);\n        let pointsDeterminant;\n        pointsDeterminant = determinant(points[i].difference(points[i + 1]), points[i].difference(points[i - 1]));\n        if (vectorDeterminant < 0) {\n            rot = -rot;\n        }\n        if ((vAngle < Math.PI / 2) && ((rot < 0 && pointsDeterminant < 0) || (rot > 0 && pointsDeterminant > 0))) {\n            rot = rot - Math.PI;\n        }\n        t = v2.clone();\n        rotateVector(t, rot);\n\n        const t1 = t.clone();\n        const t2 = t.clone();\n        const scaleFactor1 = distances[i - 1] * coeff;\n        const scaleFactor2 = distances[i] * coeff;\n        t1.scale(scaleFactor1, scaleFactor1);\n        t2.scale(scaleFactor2, scaleFactor2);\n\n        tangents[i] = [t1, t2];\n    }\n\n    // The building of a Catmull-Rom curve based of tangents of points\n    for (let i = 0; i < n; i++) {\n        let p0;\n        let p3;\n        if (i === 0) {\n            p0 = points[i + 1].difference(tangents[i].x / tau, tangents[i].y / tau);\n        } else {\n            p0 = points[i + 1].difference(tangents[i][1].x / tau, tangents[i][1].y / tau);\n        }\n        if (i === n - 1) {\n            p3 = points[i].clone().offset(tangents[i + 1].x / tau, tangents[i + 1].y / tau);\n        } else {\n            p3 = points[i].difference(tangents[i + 1][0].x / tau, tangents[i + 1][0].y / tau);\n        }\n\n        catmullRomCurves[i] = [p0, points[i], points[i + 1], p3];\n    }\n    return catmullRomCurves;\n}\n\n// The function to convert Catmull-Rom curve to Bezier curve using the tension (tau)\nfunction catmullRomToBezier(points, options) {\n    const { tau } = options;\n\n    const bcp1 = new Point();\n    bcp1.x = points[1].x + (points[2].x - points[0].x) / (6 * tau);\n    bcp1.y = points[1].y + (points[2].y - points[0].y) / (6 * tau);\n\n    const bcp2 = new Point();\n    bcp2.x = points[2].x + (points[3].x - points[1].x) / (6 * tau);\n    bcp2.y = points[2].y + (points[3].y - points[1].y) / (6 * tau);\n    return new Curve(\n        points[1],\n        bcp1,\n        bcp2,\n        points[2]\n    );\n}\n","import { CellView } from './CellView.mjs';\nimport { Link } from './Link.mjs';\nimport V from '../V/index.mjs';\nimport { addClassNamePrefix, removeClassNamePrefix, merge, template, assign, toArray, isObject, isFunction, clone, isPercentage, result, isEqual } from '../util/index.mjs';\nimport { Point, Line, Path, normalizeAngle, Rect, Polyline } from '../g/index.mjs';\nimport * as routers from '../routers/index.mjs';\nimport * as connectors from '../connectors/index.mjs';\nimport $ from 'jquery';\n\nconst Flags = {\n    TOOLS: CellView.Flags.TOOLS,\n    RENDER: 'RENDER',\n    UPDATE: 'UPDATE',\n    LEGACY_TOOLS: 'LEGACY_TOOLS',\n    LABELS: 'LABELS',\n    VERTICES: 'VERTICES',\n    SOURCE: 'SOURCE',\n    TARGET: 'TARGET',\n    CONNECTOR: 'CONNECTOR'\n};\n\n// Link base view and controller.\n// ----------------------------------------\n\nexport const LinkView = CellView.extend({\n\n    className: function() {\n\n        var classNames = CellView.prototype.className.apply(this).split(' ');\n\n        classNames.push('link');\n\n        return classNames.join(' ');\n    },\n\n    options: {\n\n        shortLinkLength: 105,\n        doubleLinkTools: false,\n        longLinkLength: 155,\n        linkToolsOffset: 40,\n        doubleLinkToolsOffset: 65,\n        sampleInterval: 50\n    },\n\n    _labelCache: null,\n    _labelSelectors: null,\n    _markerCache: null,\n    _V: null,\n    _dragData: null, // deprecated\n\n    metrics: null,\n    decimalsRounding: 2,\n\n    initialize: function() {\n\n        CellView.prototype.initialize.apply(this, arguments);\n\n        // `_.labelCache` is a mapping of indexes of labels in the `this.get('labels')` array to\n        // `<g class=\"label\">` nodes wrapped by Vectorizer. This allows for quick access to the\n        // nodes in `updateLabelPosition()` in order to update the label positions.\n        this._labelCache = {};\n\n        // a cache of label selectors\n        this._labelSelectors = {};\n\n        // keeps markers bboxes and positions again for quicker access\n        this._markerCache = {};\n\n        // cache of default markup nodes\n        this._V = {};\n\n        // connection path metrics\n        this.cleanNodesCache();\n    },\n\n    presentationAttributes: {\n        markup: [Flags.RENDER],\n        attrs: [Flags.UPDATE],\n        router: [Flags.UPDATE],\n        connector: [Flags.CONNECTOR],\n        smooth: [Flags.UPDATE],\n        manhattan: [Flags.UPDATE],\n        toolMarkup: [Flags.LEGACY_TOOLS],\n        labels: [Flags.LABELS],\n        labelMarkup: [Flags.LABELS],\n        vertices: [Flags.VERTICES, Flags.UPDATE],\n        vertexMarkup: [Flags.VERTICES],\n        source: [Flags.SOURCE, Flags.UPDATE],\n        target: [Flags.TARGET, Flags.UPDATE]\n    },\n\n    initFlag: [Flags.RENDER, Flags.SOURCE, Flags.TARGET, Flags.TOOLS],\n\n    UPDATE_PRIORITY: 1,\n\n    confirmUpdate: function(flags, opt) {\n\n        opt || (opt = {});\n\n        if (this.hasFlag(flags, Flags.SOURCE)) {\n            if (!this.updateEndProperties('source')) return flags;\n            flags = this.removeFlag(flags, Flags.SOURCE);\n        }\n\n        if (this.hasFlag(flags, Flags.TARGET)) {\n            if (!this.updateEndProperties('target')) return flags;\n            flags = this.removeFlag(flags, Flags.TARGET);\n        }\n\n        const { paper, sourceView, targetView } = this;\n        if (paper && ((sourceView && !paper.isViewMounted(sourceView)) || (targetView && !paper.isViewMounted(targetView)))) {\n            // Wait for the sourceView and targetView to be rendered\n            return flags;\n        }\n\n        if (this.hasFlag(flags, Flags.RENDER)) {\n            this.render();\n            this.updateHighlighters(true);\n            this.updateTools(opt);\n            flags = this.removeFlag(flags, [Flags.RENDER, Flags.UPDATE, Flags.VERTICES, Flags.LABELS, Flags.TOOLS, Flags.LEGACY_TOOLS, Flags.CONNECTOR]);\n            return flags;\n        }\n\n        let updateHighlighters = false;\n\n        if (this.hasFlag(flags, Flags.VERTICES)) {\n            this.renderVertexMarkers();\n            flags = this.removeFlag(flags, Flags.VERTICES);\n        }\n\n        const { model } = this;\n        const { attributes } = model;\n        let updateLabels = this.hasFlag(flags, Flags.LABELS);\n        let updateLegacyTools = this.hasFlag(flags, Flags.LEGACY_TOOLS);\n\n        if (updateLabels) {\n            this.onLabelsChange(model, attributes.labels, opt);\n            flags = this.removeFlag(flags, Flags.LABELS);\n            updateHighlighters = true;\n        }\n\n        if (updateLegacyTools) {\n            this.renderTools();\n            flags = this.removeFlag(flags, Flags.LEGACY_TOOLS);\n        }\n\n        const updateAll = this.hasFlag(flags, Flags.UPDATE);\n        const updateConnector = this.hasFlag(flags, Flags.CONNECTOR);\n        if (updateAll || updateConnector) {\n            if (!updateAll) {\n                // Keep the current route and update the geometry\n                this.updatePath();\n                this.updateDOM();\n            } else if (opt.translateBy && model.isRelationshipEmbeddedIn(opt.translateBy)) {\n                // The link is being translated by an ancestor that will\n                // shift source point, target point and all vertices\n                // by an equal distance.\n                this.translate(opt.tx, opt.ty);\n            } else {\n                this.update();\n            }\n            this.updateTools(opt);\n            flags = this.removeFlag(flags, [Flags.UPDATE, Flags.TOOLS, Flags.CONNECTOR]);\n            updateLabels = false;\n            updateLegacyTools = false;\n            updateHighlighters = true;\n        }\n\n        if (updateLabels) {\n            this.updateLabelPositions();\n        }\n\n        if (updateLegacyTools) {\n            this.updateToolsPosition();\n        }\n\n        if (updateHighlighters) {\n            this.updateHighlighters();\n        }\n\n        if (this.hasFlag(flags, Flags.TOOLS)) {\n            this.updateTools(opt);\n            flags = this.removeFlag(flags, Flags.TOOLS);\n        }\n\n        return flags;\n    },\n\n    requestConnectionUpdate: function(opt) {\n        this.requestUpdate(this.getFlag(Flags.UPDATE), opt);\n    },\n\n    isLabelsRenderRequired: function(opt = {}) {\n\n        const previousLabels = this.model.previous('labels');\n        if (!previousLabels) return true;\n\n        // Here is an optimization for cases when we know, that change does\n        // not require re-rendering of all labels.\n        if (('propertyPathArray' in opt) && ('propertyValue' in opt)) {\n            // The label is setting by `prop()` method\n            var pathArray = opt.propertyPathArray || [];\n            var pathLength = pathArray.length;\n            if (pathLength > 1) {\n                // We are changing a single label here e.g. 'labels/0/position'\n                var labelExists = !!previousLabels[pathArray[1]];\n                if (labelExists) {\n                    if (pathLength === 2) {\n                        // We are changing the entire label. Need to check if the\n                        // markup is also being changed.\n                        return ('markup' in Object(opt.propertyValue));\n                    } else if (pathArray[2] !== 'markup') {\n                        // We are changing a label property but not the markup\n                        return false;\n                    }\n                }\n            }\n        }\n\n        return true;\n    },\n\n    onLabelsChange: function(_link, _labels, opt) {\n\n        // Note: this optimization works in async=false mode only\n        if (this.isLabelsRenderRequired(opt)) {\n            this.renderLabels();\n        } else {\n            this.updateLabels();\n        }\n    },\n\n    // Rendering.\n    // ----------\n\n    render: function() {\n\n        this.vel.empty();\n        this.unmountLabels();\n        this._V = {};\n        this.renderMarkup();\n        // rendering labels has to be run after the link is appended to DOM tree. (otherwise <Text> bbox\n        // returns zero values)\n        this.renderLabels();\n        this.update();\n\n        return this;\n    },\n\n    renderMarkup: function() {\n\n        var link = this.model;\n        var markup = link.get('markup') || link.markup;\n        if (!markup) throw new Error('dia.LinkView: markup required');\n        if (Array.isArray(markup)) return this.renderJSONMarkup(markup);\n        if (typeof markup === 'string') return this.renderStringMarkup(markup);\n        throw new Error('dia.LinkView: invalid markup');\n    },\n\n    renderJSONMarkup: function(markup) {\n\n        var doc = this.parseDOMJSON(markup, this.el);\n        // Selectors\n        this.selectors = doc.selectors;\n        // Fragment\n        this.vel.append(doc.fragment);\n    },\n\n    renderStringMarkup: function(markup) {\n\n        // A special markup can be given in the `properties.markup` property. This might be handy\n        // if e.g. arrowhead markers should be `<image>` elements or any other element than `<path>`s.\n        // `.connection`, `.connection-wrap`, `.marker-source` and `.marker-target` selectors\n        // of elements with special meaning though. Therefore, those classes should be preserved in any\n        // special markup passed in `properties.markup`.\n        var children = V(markup);\n        // custom markup may contain only one children\n        if (!Array.isArray(children)) children = [children];\n        // Cache all children elements for quicker access.\n        var cache = this._V; // vectorized markup;\n        for (var i = 0, n = children.length; i < n; i++) {\n            var child = children[i];\n            var className = child.attr('class');\n            if (className) {\n                // Strip the joint class name prefix, if there is one.\n                className = removeClassNamePrefix(className);\n                cache[$.camelCase(className)] = child;\n            }\n        }\n        // partial rendering\n        this.renderTools();\n        this.renderVertexMarkers();\n        this.renderArrowheadMarkers();\n        this.vel.append(children);\n    },\n\n    _getLabelMarkup: function(labelMarkup) {\n\n        if (!labelMarkup) return undefined;\n\n        if (Array.isArray(labelMarkup)) return this.parseDOMJSON(labelMarkup, null);\n        if (typeof labelMarkup === 'string') return this._getLabelStringMarkup(labelMarkup);\n        throw new Error('dia.linkView: invalid label markup');\n    },\n\n    _getLabelStringMarkup: function(labelMarkup) {\n\n        var children = V(labelMarkup);\n        var fragment = document.createDocumentFragment();\n\n        if (!Array.isArray(children)) {\n            fragment.appendChild(children.node);\n\n        } else {\n            for (var i = 0, n = children.length; i < n; i++) {\n                var currentChild = children[i].node;\n                fragment.appendChild(currentChild);\n            }\n        }\n\n        return { fragment: fragment, selectors: {}}; // no selectors\n    },\n\n    // Label markup fragment may come wrapped in <g class=\"label\" />, or not.\n    // If it doesn't, add the <g /> container here.\n    _normalizeLabelMarkup: function(markup) {\n\n        if (!markup) return undefined;\n\n        var fragment = markup.fragment;\n        if (!(markup.fragment instanceof DocumentFragment) || !markup.fragment.hasChildNodes()) throw new Error('dia.LinkView: invalid label markup.');\n\n        var vNode;\n        var childNodes = fragment.childNodes;\n\n        if ((childNodes.length > 1) || childNodes[0].nodeName.toUpperCase() !== 'G') {\n            // default markup fragment is not wrapped in <g />\n            // add a <g /> container\n            vNode = V('g').append(fragment);\n        } else {\n            vNode = V(childNodes[0]);\n        }\n\n        vNode.addClass('label');\n\n        return { node: vNode.node, selectors: markup.selectors };\n    },\n\n    renderLabels: function() {\n\n        var cache = this._V;\n        var vLabels = cache.labels;\n        var labelCache = this._labelCache = {};\n        var labelSelectors = this._labelSelectors = {};\n        var model = this.model;\n        var labels = model.attributes.labels || [];\n        var labelsCount = labels.length;\n\n        if (labelsCount === 0) {\n            if (vLabels) vLabels.remove();\n            return this;\n        }\n\n        if (vLabels) {\n            vLabels.empty();\n        }  else {\n            // there is no label container in the markup but some labels are defined\n            // add a <g class=\"labels\" /> container\n            vLabels = cache.labels = V('g').addClass('labels');\n            if (this.options.labelsLayer) {\n                vLabels.addClass(addClassNamePrefix(result(this, 'className')));\n                vLabels.attr('model-id', model.id);\n            }\n        }\n\n        for (var i = 0; i < labelsCount; i++) {\n\n            var label = labels[i];\n            var labelMarkup = this._normalizeLabelMarkup(this._getLabelMarkup(label.markup));\n            var labelNode;\n            var selectors;\n            if (labelMarkup) {\n\n                labelNode = labelMarkup.node;\n                selectors = labelMarkup.selectors;\n\n            } else {\n\n                var builtinDefaultLabel =  model._builtins.defaultLabel;\n                var builtinDefaultLabelMarkup = this._normalizeLabelMarkup(this._getLabelMarkup(builtinDefaultLabel.markup));\n                var defaultLabel = model._getDefaultLabel();\n                var defaultLabelMarkup = this._normalizeLabelMarkup(this._getLabelMarkup(defaultLabel.markup));\n                var defaultMarkup = defaultLabelMarkup || builtinDefaultLabelMarkup;\n\n                labelNode = defaultMarkup.node;\n                selectors = defaultMarkup.selectors;\n            }\n\n            labelNode.setAttribute('label-idx', i); // assign label-idx\n            vLabels.append(labelNode);\n            labelCache[i] = labelNode; // cache node for `updateLabels()` so it can just update label node positions\n\n            var rootSelector = this.selector;\n            if (selectors[rootSelector]) throw new Error('dia.LinkView: ambiguous label root selector.');\n            selectors[rootSelector] = labelNode;\n\n            labelSelectors[i] = selectors; // cache label selectors for `updateLabels()`\n        }\n        if (!vLabels.parent()) {\n            this.mountLabels();\n        }\n\n        this.updateLabels();\n\n        return this;\n    },\n\n    mountLabels: function() {\n        const { el, paper, model, _V, options } = this;\n        const { labels: vLabels } = _V;\n        if (!vLabels || !model.hasLabels()) return;\n        const { node } = vLabels;\n        if (options.labelsLayer) {\n            paper.getLayerView(options.labelsLayer).insertSortedNode(node, model.get('z'));\n        } else {\n            if (node.parentNode !== el) {\n                el.appendChild(node);\n            }\n        }\n    },\n\n    unmountLabels: function() {\n        const { options, _V } = this;\n        if (!_V) return;\n        const { labels: vLabels } = _V;\n        if (vLabels && options.labelsLayer) {\n            vLabels.remove();\n        }\n    },\n\n    findLabelNode: function(labelIndex, selector) {\n        const labelRoot = this._labelCache[labelIndex];\n        if (!labelRoot) return null;\n        const labelSelectors = this._labelSelectors[labelIndex];\n        const [node = null] = this.findBySelector(selector, labelRoot, labelSelectors);\n        return node;\n    },\n\n\n    // merge default label attrs into label attrs (or use built-in default label attrs if neither is provided)\n    // keep `undefined` or `null` because `{}` means something else\n    _mergeLabelAttrs: function(hasCustomMarkup, labelAttrs, defaultLabelAttrs, builtinDefaultLabelAttrs) {\n\n        if (labelAttrs === null) return null;\n        if (labelAttrs === undefined) {\n\n            if (defaultLabelAttrs === null) return null;\n            if (defaultLabelAttrs === undefined) {\n\n                if (hasCustomMarkup) return undefined;\n                return builtinDefaultLabelAttrs;\n            }\n\n            if (hasCustomMarkup) return defaultLabelAttrs;\n            return merge({}, builtinDefaultLabelAttrs, defaultLabelAttrs);\n        }\n\n        if (hasCustomMarkup) return merge({}, defaultLabelAttrs, labelAttrs);\n        return merge({}, builtinDefaultLabelAttrs, defaultLabelAttrs, labelAttrs);\n    },\n\n    // merge default label size into label size (no built-in default)\n    // keep `undefined` or `null` because `{}` means something else\n    _mergeLabelSize: function(labelSize, defaultLabelSize) {\n\n        if (labelSize === null) return null;\n        if (labelSize === undefined) {\n\n            if (defaultLabelSize === null) return null;\n            if (defaultLabelSize === undefined) return undefined;\n\n            return defaultLabelSize;\n        }\n\n        return merge({}, defaultLabelSize, labelSize);\n    },\n\n    updateLabels: function() {\n\n        if (!this._V.labels) return this;\n\n        var model = this.model;\n        var labels = model.get('labels') || [];\n        var canLabelMove = this.can('labelMove');\n\n        var builtinDefaultLabel = model._builtins.defaultLabel;\n        var builtinDefaultLabelAttrs = builtinDefaultLabel.attrs;\n\n        var defaultLabel = model._getDefaultLabel();\n        var defaultLabelMarkup = defaultLabel.markup;\n        var defaultLabelAttrs = defaultLabel.attrs;\n        var defaultLabelSize = defaultLabel.size;\n\n        for (var i = 0, n = labels.length; i < n; i++) {\n\n            var labelNode = this._labelCache[i];\n            labelNode.setAttribute('cursor', (canLabelMove ? 'move' : 'default'));\n\n            var selectors = this._labelSelectors[i];\n\n            var label = labels[i];\n            var labelMarkup = label.markup;\n            var labelAttrs = label.attrs;\n            var labelSize = label.size;\n\n            var attrs = this._mergeLabelAttrs(\n                (labelMarkup || defaultLabelMarkup),\n                labelAttrs,\n                defaultLabelAttrs,\n                builtinDefaultLabelAttrs\n            );\n\n            var size = this._mergeLabelSize(\n                labelSize,\n                defaultLabelSize\n            );\n\n            this.updateDOMSubtreeAttributes(labelNode, attrs, {\n                rootBBox: new Rect(size),\n                selectors: selectors\n            });\n        }\n\n        return this;\n    },\n\n    renderTools: function() {\n\n        if (!this._V.linkTools) return this;\n\n        // Tools are a group of clickable elements that manipulate the whole link.\n        // A good example of this is the remove tool that removes the whole link.\n        // Tools appear after hovering the link close to the `source` element/point of the link\n        // but are offset a bit so that they don't cover the `marker-arrowhead`.\n\n        var $tools = $(this._V.linkTools.node).empty();\n        var toolTemplate = template(this.model.get('toolMarkup') || this.model.toolMarkup);\n        var tool = V(toolTemplate());\n\n        $tools.append(tool.node);\n\n        // Cache the tool node so that the `updateToolsPosition()` can update the tool position quickly.\n        this._toolCache = tool;\n\n        // If `doubleLinkTools` is enabled, we render copy of the tools on the other side of the\n        // link as well but only if the link is longer than `longLinkLength`.\n        if (this.options.doubleLinkTools) {\n\n            var tool2;\n            if (this.model.get('doubleToolMarkup') || this.model.doubleToolMarkup) {\n                toolTemplate = template(this.model.get('doubleToolMarkup') || this.model.doubleToolMarkup);\n                tool2 = V(toolTemplate());\n            } else {\n                tool2 = tool.clone();\n            }\n\n            $tools.append(tool2.node);\n            this._tool2Cache = tool2;\n        }\n\n        return this;\n    },\n\n    renderVertexMarkers: function() {\n\n        if (!this._V.markerVertices) return this;\n\n        var $markerVertices = $(this._V.markerVertices.node).empty();\n\n        // A special markup can be given in the `properties.vertexMarkup` property. This might be handy\n        // if default styling (elements) are not desired. This makes it possible to use any\n        // SVG elements for .marker-vertex and .marker-vertex-remove tools.\n        var markupTemplate = template(this.model.get('vertexMarkup') || this.model.vertexMarkup);\n\n        this.model.vertices().forEach(function(vertex, idx) {\n            $markerVertices.append(V(markupTemplate(assign({ idx: idx }, vertex))).node);\n        });\n\n        return this;\n    },\n\n    renderArrowheadMarkers: function() {\n\n        // Custom markups might not have arrowhead markers. Therefore, jump of this function immediately if that's the case.\n        if (!this._V.markerArrowheads) return this;\n\n        var $markerArrowheads = $(this._V.markerArrowheads.node);\n\n        $markerArrowheads.empty();\n\n        // A special markup can be given in the `properties.vertexMarkup` property. This might be handy\n        // if default styling (elements) are not desired. This makes it possible to use any\n        // SVG elements for .marker-vertex and .marker-vertex-remove tools.\n        var markupTemplate = template(this.model.get('arrowheadMarkup') || this.model.arrowheadMarkup);\n\n        this._V.sourceArrowhead = V(markupTemplate({ end: 'source' }));\n        this._V.targetArrowhead = V(markupTemplate({ end: 'target' }));\n\n        $markerArrowheads.append(this._V.sourceArrowhead.node, this._V.targetArrowhead.node);\n\n        return this;\n    },\n\n    // remove vertices that lie on (or nearly on) straight lines within the link\n    // return the number of removed points\n    removeRedundantLinearVertices: function(opt) {\n\n        const SIMPLIFY_THRESHOLD = 0.001;\n\n        const link = this.model;\n        const vertices = link.vertices();\n        const routePoints = [this.sourceAnchor, ...vertices, this.targetAnchor];\n        const numRoutePoints = routePoints.length;\n\n        // put routePoints into a polyline and try to simplify\n        const polyline = new Polyline(routePoints);\n        polyline.simplify({ threshold: SIMPLIFY_THRESHOLD });\n        const polylinePoints = polyline.points.map((point) => (point.toJSON())); // JSON of points after simplification\n        const numPolylinePoints = polylinePoints.length; // number of points after simplification\n\n        // shortcut if simplification did not remove any redundant vertices:\n        if (numRoutePoints === numPolylinePoints) return 0;\n\n        // else: set simplified polyline points as link vertices\n        // remove first and last polyline points again (= source/target anchors)\n        link.vertices(polylinePoints.slice(1, numPolylinePoints - 1), opt);\n        return (numRoutePoints - numPolylinePoints);\n    },\n\n    updateDefaultConnectionPath: function() {\n\n        var cache = this._V;\n\n        if (cache.connection) {\n            cache.connection.attr('d', this.getSerializedConnection());\n        }\n\n        if (cache.connectionWrap) {\n            cache.connectionWrap.attr('d', this.getSerializedConnection());\n        }\n\n        if (cache.markerSource && cache.markerTarget) {\n            this._translateAndAutoOrientArrows(cache.markerSource, cache.markerTarget);\n        }\n    },\n\n    getEndView: function(type) {\n        switch (type) {\n            case 'source':\n                return this.sourceView || null;\n            case 'target':\n                return this.targetView || null;\n            default:\n                throw new Error('dia.LinkView: type parameter required.');\n        }\n    },\n\n    getEndAnchor: function(type) {\n        switch (type) {\n            case 'source':\n                return new Point(this.sourceAnchor);\n            case 'target':\n                return new Point(this.targetAnchor);\n            default:\n                throw new Error('dia.LinkView: type parameter required.');\n        }\n    },\n\n    getEndConnectionPoint: function(type) {\n        switch (type) {\n            case 'source':\n                return new Point(this.sourcePoint);\n            case 'target':\n                return new Point(this.targetPoint);\n            default:\n                throw new Error('dia.LinkView: type parameter required.');\n        }\n    },\n\n    getEndMagnet: function(type) {\n        switch (type) {\n            case 'source':\n                var sourceView = this.sourceView;\n                if (!sourceView) break;\n                return this.sourceMagnet || sourceView.el;\n            case 'target':\n                var targetView = this.targetView;\n                if (!targetView) break;\n                return this.targetMagnet || targetView.el;\n            default:\n                throw new Error('dia.LinkView: type parameter required.');\n        }\n        return null;\n    },\n\n\n    // Updating.\n    // ---------\n\n    update: function() {\n        this.updateRoute();\n        this.updatePath();\n        this.updateDOM();\n        return this;\n    },\n\n    translate: function(tx = 0, ty = 0) {\n        const { route, path } = this;\n        if (!route || !path) return;\n        // translate the route\n        const polyline = new Polyline(route);\n        polyline.translate(tx, ty);\n        this.route = polyline.points;\n        // translate source and target connection and marker points.\n        this._translateConnectionPoints(tx, ty);\n        // translate the geometry path\n        path.translate(tx, ty);\n        this.updateDOM();\n    },\n\n    updateDOM() {\n        const { el, model, selectors } = this;\n        this.cleanNodesCache();\n        // update SVG attributes defined by 'attrs/'.\n        this.updateDOMSubtreeAttributes(el, model.attr(), { selectors });\n        // legacy link path update\n        this.updateDefaultConnectionPath();\n        // update the label position etc.\n        this.updateLabelPositions();\n        this.updateToolsPosition();\n        this.updateArrowheadMarkers();\n        // *Deprecated*\n        // Local perpendicular flag (as opposed to one defined on paper).\n        // Could be enabled inside a connector/router. It's valid only\n        // during the update execution.\n        this.options.perpendicular = null;\n    },\n\n    updateRoute: function() {\n        const { model } = this;\n        const vertices = model.vertices();\n        // 1. Find Anchors\n        const anchors = this.findAnchors(vertices);\n        const sourceAnchor = this.sourceAnchor = anchors.source;\n        const targetAnchor = this.targetAnchor = anchors.target;\n        // 2. Find Route\n        const route = this.findRoute(vertices);\n        this.route = route;\n        // 3. Find Connection Points\n        var connectionPoints = this.findConnectionPoints(route, sourceAnchor, targetAnchor);\n        this.sourcePoint = connectionPoints.source;\n        this.targetPoint = connectionPoints.target;\n    },\n\n    updatePath: function() {\n        const { route, sourcePoint, targetPoint } = this;\n        // 3b. Find Marker Connection Point - Backwards Compatibility\n        const markerPoints = this.findMarkerPoints(route, sourcePoint, targetPoint);\n        // 4. Find Connection\n        const path = this.findPath(route, markerPoints.source || sourcePoint, markerPoints.target || targetPoint);\n        this.path = path;\n    },\n\n    findMarkerPoints: function(route, sourcePoint, targetPoint) {\n\n        var firstWaypoint = route[0];\n        var lastWaypoint = route[route.length - 1];\n\n        // Move the source point by the width of the marker taking into account\n        // its scale around x-axis. Note that scale is the only transform that\n        // makes sense to be set in `.marker-source` attributes object\n        // as all other transforms (translate/rotate) will be replaced\n        // by the `translateAndAutoOrient()` function.\n        var cache = this._markerCache;\n        // cache source and target points\n        var sourceMarkerPoint, targetMarkerPoint;\n\n        if (this._V.markerSource) {\n\n            cache.sourceBBox = cache.sourceBBox || this._V.markerSource.getBBox();\n            sourceMarkerPoint = Point(sourcePoint).move(\n                firstWaypoint || targetPoint,\n                cache.sourceBBox.width * this._V.markerSource.scale().sx * -1\n            ).round();\n        }\n\n        if (this._V.markerTarget) {\n\n            cache.targetBBox = cache.targetBBox || this._V.markerTarget.getBBox();\n            targetMarkerPoint = Point(targetPoint).move(\n                lastWaypoint || sourcePoint,\n                cache.targetBBox.width * this._V.markerTarget.scale().sx * -1\n            ).round();\n        }\n\n        // if there was no markup for the marker, use the connection point.\n        cache.sourcePoint = sourceMarkerPoint || sourcePoint.clone();\n        cache.targetPoint = targetMarkerPoint || targetPoint.clone();\n\n        return {\n            source: sourceMarkerPoint,\n            target: targetMarkerPoint\n        };\n    },\n\n    findAnchorsOrdered: function(firstEndType, firstRef, secondEndType, secondRef) {\n\n        var firstAnchor, secondAnchor;\n        var firstAnchorRef, secondAnchorRef;\n        var model = this.model;\n        var firstDef = model.get(firstEndType);\n        var secondDef = model.get(secondEndType);\n        var firstView = this.getEndView(firstEndType);\n        var secondView = this.getEndView(secondEndType);\n        var firstMagnet = this.getEndMagnet(firstEndType);\n        var secondMagnet = this.getEndMagnet(secondEndType);\n\n        // Anchor first\n        if (firstView) {\n            if (firstRef) {\n                firstAnchorRef = new Point(firstRef);\n            } else if (secondView) {\n                firstAnchorRef = secondMagnet;\n            } else {\n                firstAnchorRef = new Point(secondDef);\n            }\n            firstAnchor = this.getAnchor(firstDef.anchor, firstView, firstMagnet, firstAnchorRef, firstEndType);\n        } else {\n            firstAnchor = new Point(firstDef);\n        }\n\n        // Anchor second\n        if (secondView) {\n            secondAnchorRef = new Point(secondRef || firstAnchor);\n            secondAnchor = this.getAnchor(secondDef.anchor, secondView, secondMagnet, secondAnchorRef, secondEndType);\n        } else {\n            secondAnchor = new Point(secondDef);\n        }\n\n        var res = {};\n        res[firstEndType] = firstAnchor;\n        res[secondEndType] = secondAnchor;\n        return res;\n    },\n\n    findAnchors: function(vertices) {\n\n        var model = this.model;\n        var firstVertex = vertices[0];\n        var lastVertex = vertices[vertices.length - 1];\n\n        if (model.target().priority && !model.source().priority) {\n            // Reversed order\n            return this.findAnchorsOrdered('target', lastVertex, 'source', firstVertex);\n        }\n\n        // Usual order\n        return this.findAnchorsOrdered('source', firstVertex, 'target', lastVertex);\n    },\n\n    findConnectionPoints: function(route, sourceAnchor, targetAnchor) {\n\n        var firstWaypoint = route[0];\n        var lastWaypoint = route[route.length - 1];\n        var model = this.model;\n        var sourceDef = model.get('source');\n        var targetDef = model.get('target');\n        var sourceView = this.sourceView;\n        var targetView = this.targetView;\n        var paperOptions = this.paper.options;\n        var sourceMagnet, targetMagnet;\n\n        // Connection Point Source\n        var sourcePoint;\n        if (sourceView && !sourceView.isNodeConnection(this.sourceMagnet)) {\n            sourceMagnet = (this.sourceMagnet || sourceView.el);\n            var sourceConnectionPointDef = sourceDef.connectionPoint || paperOptions.defaultConnectionPoint;\n            var sourcePointRef = firstWaypoint || targetAnchor;\n            var sourceLine = new Line(sourcePointRef, sourceAnchor);\n            sourcePoint = this.getConnectionPoint(\n                sourceConnectionPointDef,\n                sourceView,\n                sourceMagnet,\n                sourceLine,\n                'source'\n            );\n        } else {\n            sourcePoint = sourceAnchor;\n        }\n        // Connection Point Target\n        var targetPoint;\n        if (targetView && !targetView.isNodeConnection(this.targetMagnet)) {\n            targetMagnet = (this.targetMagnet || targetView.el);\n            var targetConnectionPointDef = targetDef.connectionPoint || paperOptions.defaultConnectionPoint;\n            var targetPointRef = lastWaypoint || sourceAnchor;\n            var targetLine = new Line(targetPointRef, targetAnchor);\n            targetPoint = this.getConnectionPoint(\n                targetConnectionPointDef,\n                targetView,\n                targetMagnet,\n                targetLine,\n                'target'\n            );\n        } else {\n            targetPoint = targetAnchor;\n        }\n\n        return {\n            source: sourcePoint,\n            target: targetPoint\n        };\n    },\n\n    getAnchor: function(anchorDef, cellView, magnet, ref, endType) {\n\n        var isConnection = cellView.isNodeConnection(magnet);\n        var paperOptions = this.paper.options;\n        if (!anchorDef) {\n            if (isConnection) {\n                anchorDef = paperOptions.defaultLinkAnchor;\n            } else {\n                if (paperOptions.perpendicularLinks || this.options.perpendicular) {\n                    // Backwards compatibility\n                    // If `perpendicularLinks` flag is set on the paper and there are vertices\n                    // on the link, then try to find a connection point that makes the link perpendicular\n                    // even though the link won't point to the center of the targeted object.\n                    anchorDef = { name: 'perpendicular' };\n                } else {\n                    anchorDef = paperOptions.defaultAnchor;\n                }\n            }\n        }\n\n        if (!anchorDef) throw new Error('Anchor required.');\n        var anchorFn;\n        if (typeof anchorDef === 'function') {\n            anchorFn = anchorDef;\n        } else {\n            var anchorName = anchorDef.name;\n            var anchorNamespace = isConnection ? 'linkAnchorNamespace' : 'anchorNamespace';\n            anchorFn = paperOptions[anchorNamespace][anchorName];\n            if (typeof anchorFn !== 'function') throw new Error('Unknown anchor: ' + anchorName);\n        }\n        var anchor = anchorFn.call(\n            this,\n            cellView,\n            magnet,\n            ref,\n            anchorDef.args || {},\n            endType,\n            this\n        );\n        if (!anchor) return new Point();\n        return anchor.round(this.decimalsRounding);\n    },\n\n\n    getConnectionPoint: function(connectionPointDef, view, magnet, line, endType) {\n\n        var connectionPoint;\n        var anchor = line.end;\n        var paperOptions = this.paper.options;\n\n        // Backwards compatibility\n        if (typeof paperOptions.linkConnectionPoint === 'function') {\n            var linkConnectionMagnet = (magnet === view.el) ? undefined : magnet;\n            connectionPoint = paperOptions.linkConnectionPoint(this, view, linkConnectionMagnet, line.start, endType);\n            if (connectionPoint) return connectionPoint;\n        }\n\n        if (!connectionPointDef) return anchor;\n        var connectionPointFn;\n        if (typeof connectionPointDef === 'function') {\n            connectionPointFn = connectionPointDef;\n        } else {\n            var connectionPointName = connectionPointDef.name;\n            connectionPointFn = paperOptions.connectionPointNamespace[connectionPointName];\n            if (typeof connectionPointFn !== 'function') throw new Error('Unknown connection point: ' + connectionPointName);\n        }\n        connectionPoint = connectionPointFn.call(this, line, view, magnet, connectionPointDef.args || {}, endType, this);\n        if (!connectionPoint) return anchor;\n        return connectionPoint.round(this.decimalsRounding);\n    },\n\n    _translateConnectionPoints: function(tx, ty) {\n\n        var cache = this._markerCache;\n\n        cache.sourcePoint.offset(tx, ty);\n        cache.targetPoint.offset(tx, ty);\n        this.sourcePoint.offset(tx, ty);\n        this.targetPoint.offset(tx, ty);\n        this.sourceAnchor.offset(tx, ty);\n        this.targetAnchor.offset(tx, ty);\n    },\n\n    // combine default label position with built-in default label position\n    _getDefaultLabelPositionProperty: function() {\n\n        var model = this.model;\n\n        var builtinDefaultLabel = model._builtins.defaultLabel;\n        var builtinDefaultLabelPosition = builtinDefaultLabel.position;\n\n        var defaultLabel = model._getDefaultLabel();\n        var defaultLabelPosition = this._normalizeLabelPosition(defaultLabel.position);\n\n        return merge({}, builtinDefaultLabelPosition, defaultLabelPosition);\n    },\n\n    // if label position is a number, normalize it to a position object\n    // this makes sure that label positions can be merged properly\n    _normalizeLabelPosition: function(labelPosition) {\n\n        if (typeof labelPosition === 'number') return { distance: labelPosition, offset: null, angle: 0, args: null };\n        return labelPosition;\n    },\n\n    // expects normalized position properties\n    // e.g. `this._normalizeLabelPosition(labelPosition)` and `this._getDefaultLabelPositionProperty()`\n    _mergeLabelPositionProperty: function(normalizedLabelPosition, normalizedDefaultLabelPosition) {\n\n        if (normalizedLabelPosition === null) return null;\n        if (normalizedLabelPosition === undefined) {\n\n            if (normalizedDefaultLabelPosition === null) return null;\n            return normalizedDefaultLabelPosition;\n        }\n\n        return merge({}, normalizedDefaultLabelPosition, normalizedLabelPosition);\n    },\n\n    updateLabelPositions: function() {\n\n        if (!this._V.labels) return this;\n\n        var path = this.path;\n        if (!path) return this;\n\n        // This method assumes all the label nodes are stored in the `this._labelCache` hash table\n        // by their indices in the `this.get('labels')` array. This is done in the `renderLabels()` method.\n\n        var model = this.model;\n        var labels = model.get('labels') || [];\n        if (!labels.length) return this;\n\n        var defaultLabelPosition = this._getDefaultLabelPositionProperty();\n\n        for (var idx = 0, n = labels.length; idx < n; idx++) {\n            var labelNode = this._labelCache[idx];\n            if (!labelNode) continue;\n            var label = labels[idx];\n            var labelPosition = this._normalizeLabelPosition(label.position);\n            var position = this._mergeLabelPositionProperty(labelPosition, defaultLabelPosition);\n            var transformationMatrix = this._getLabelTransformationMatrix(position);\n            labelNode.setAttribute('transform', V.matrixToTransformString(transformationMatrix));\n            this._cleanLabelMatrices(idx);\n        }\n\n        return this;\n    },\n\n    _cleanLabelMatrices: function(index) {\n        // Clean magnetMatrix for all nodes of the label.\n        // Cached BoundingRect does not need to updated when the position changes\n        // TODO: this doesn't work for labels with XML String markups.\n        const { metrics, _labelSelectors } = this;\n        const selectors = _labelSelectors[index];\n        if (!selectors) return;\n        for (let selector in selectors) {\n            const { id } = selectors[selector];\n            if (id && (id in metrics)) delete metrics[id].magnetMatrix;\n        }\n    },\n\n    updateToolsPosition: function() {\n\n        if (!this._V.linkTools) return this;\n\n        // Move the tools a bit to the target position but don't cover the `sourceArrowhead` marker.\n        // Note that the offset is hardcoded here. The offset should be always\n        // more than the `this.$('.marker-arrowhead[end=\"source\"]')[0].bbox().width` but looking\n        // this up all the time would be slow.\n\n        var scale = '';\n        var offset = this.options.linkToolsOffset;\n        var connectionLength = this.getConnectionLength();\n\n        // Firefox returns connectionLength=NaN in odd cases (for bezier curves).\n        // In that case we won't update tools position at all.\n        if (!Number.isNaN(connectionLength)) {\n\n            // If the link is too short, make the tools half the size and the offset twice as low.\n            if (connectionLength < this.options.shortLinkLength) {\n                scale = 'scale(.5)';\n                offset /= 2;\n            }\n\n            var toolPosition = this.getPointAtLength(offset);\n\n            this._toolCache.attr('transform', 'translate(' + toolPosition.x + ', ' + toolPosition.y + ') ' + scale);\n\n            if (this.options.doubleLinkTools && connectionLength >= this.options.longLinkLength) {\n\n                var doubleLinkToolsOffset = this.options.doubleLinkToolsOffset || offset;\n\n                toolPosition = this.getPointAtLength(connectionLength - doubleLinkToolsOffset);\n                this._tool2Cache.attr('transform', 'translate(' + toolPosition.x + ', ' + toolPosition.y + ') ' + scale);\n                this._tool2Cache.attr('visibility', 'visible');\n\n            } else if (this.options.doubleLinkTools) {\n\n                this._tool2Cache.attr('visibility', 'hidden');\n            }\n        }\n\n        return this;\n    },\n\n    updateArrowheadMarkers: function() {\n\n        if (!this._V.markerArrowheads) return this;\n\n        // getting bbox of an element with `display=\"none\"` in IE9 ends up with access violation\n        if ($.css(this._V.markerArrowheads.node, 'display') === 'none') return this;\n\n        var sx = this.getConnectionLength() < this.options.shortLinkLength ? .5 : 1;\n        this._V.sourceArrowhead.scale(sx);\n        this._V.targetArrowhead.scale(sx);\n\n        this._translateAndAutoOrientArrows(this._V.sourceArrowhead, this._V.targetArrowhead);\n\n        return this;\n    },\n\n    updateEndProperties: function(endType) {\n\n        const { model, paper } = this;\n        const endViewProperty = `${endType}View`;\n        const endDef = model.get(endType);\n        const endId = endDef && endDef.id;\n\n        if (!endId) {\n            // the link end is a point ~ rect 0x0\n            this[endViewProperty] = null;\n            this.updateEndMagnet(endType);\n            return true;\n        }\n\n        const endModel = paper.getModelById(endId);\n        if (!endModel) throw new Error('LinkView: invalid ' + endType + ' cell.');\n\n        const endView = endModel.findView(paper);\n        if (!endView) {\n            // A view for a model should always exist\n            return false;\n        }\n\n        this[endViewProperty] = endView;\n        this.updateEndMagnet(endType);\n        return true;\n    },\n\n    updateEndMagnet: function(endType) {\n\n        const endMagnetProperty = `${endType}Magnet`;\n        const endView = this.getEndView(endType);\n        if (endView) {\n            let connectedMagnet = endView.getMagnetFromLinkEnd(this.model.get(endType));\n            if (connectedMagnet === endView.el) connectedMagnet = null;\n            this[endMagnetProperty] = connectedMagnet;\n        } else {\n            this[endMagnetProperty] = null;\n        }\n    },\n\n    _translateAndAutoOrientArrows: function(sourceArrow, targetArrow) {\n\n        // Make the markers \"point\" to their sticky points being auto-oriented towards\n        // `targetPosition`/`sourcePosition`. And do so only if there is a markup for them.\n        var route = toArray(this.route);\n        if (sourceArrow) {\n            sourceArrow.translateAndAutoOrient(\n                this.sourcePoint,\n                route[0] || this.targetPoint,\n                this.paper.cells\n            );\n        }\n\n        if (targetArrow) {\n            targetArrow.translateAndAutoOrient(\n                this.targetPoint,\n                route[route.length - 1] || this.sourcePoint,\n                this.paper.cells\n            );\n        }\n    },\n\n    _getLabelPositionProperty: function(idx) {\n\n        return (this.model.label(idx).position || {});\n    },\n\n    _getLabelPositionAngle: function(idx) {\n\n        var labelPosition = this._getLabelPositionProperty(idx);\n        return (labelPosition.angle || 0);\n    },\n\n    _getLabelPositionArgs: function(idx) {\n\n        var labelPosition = this._getLabelPositionProperty(idx);\n        return labelPosition.args;\n    },\n\n    _getDefaultLabelPositionArgs: function() {\n\n        var defaultLabel = this.model._getDefaultLabel();\n        var defaultLabelPosition = defaultLabel.position || {};\n        return defaultLabelPosition.args;\n    },\n\n    // merge default label position args into label position args\n    // keep `undefined` or `null` because `{}` means something else\n    _mergeLabelPositionArgs: function(labelPositionArgs, defaultLabelPositionArgs) {\n\n        if (labelPositionArgs === null) return null;\n        if (labelPositionArgs === undefined) {\n\n            if (defaultLabelPositionArgs === null) return null;\n            return defaultLabelPositionArgs;\n        }\n\n        return merge({}, defaultLabelPositionArgs, labelPositionArgs);\n    },\n\n    // Add default label at given position at end of `labels` array.\n    // Four signatures:\n    // - obj, obj = point, opt\n    // - obj, num, obj = point, angle, opt\n    // - num, num, obj = x, y, opt\n    // - num, num, num, obj = x, y, angle, opt\n    // Assigns relative coordinates by default:\n    // `opt.absoluteDistance` forces absolute coordinates.\n    // `opt.reverseDistance` forces reverse absolute coordinates (if absoluteDistance = true).\n    // `opt.absoluteOffset` forces absolute coordinates for offset.\n    // Additional args:\n    // `opt.keepGradient` auto-adjusts the angle of the label to match path gradient at position.\n    // `opt.ensureLegibility` rotates labels so they are never upside-down.\n    addLabel: function(p1, p2, p3, p4) {\n\n        // normalize data from the four possible signatures\n        var localX;\n        var localY;\n        var localAngle = 0;\n        var localOpt;\n        if (typeof p1 !== 'number') {\n            // {x, y} object provided as first parameter\n            localX = p1.x;\n            localY = p1.y;\n            if (typeof p2 === 'number') {\n                // angle and opt provided as second and third parameters\n                localAngle = p2;\n                localOpt = p3;\n            } else {\n                // opt provided as second parameter\n                localOpt = p2;\n            }\n        } else {\n            // x and y provided as first and second parameters\n            localX = p1;\n            localY = p2;\n            if (typeof p3 === 'number') {\n                // angle and opt provided as third and fourth parameters\n                localAngle = p3;\n                localOpt = p4;\n            } else {\n                // opt provided as third parameter\n                localOpt = p3;\n            }\n        }\n\n        // merge label position arguments\n        var defaultLabelPositionArgs = this._getDefaultLabelPositionArgs();\n        var labelPositionArgs = localOpt;\n        var positionArgs = this._mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs);\n\n        // append label to labels array\n        var label = { position: this.getLabelPosition(localX, localY, localAngle, positionArgs) };\n        var idx = -1;\n        this.model.insertLabel(idx, label, localOpt);\n        return idx;\n    },\n\n    // Add a new vertex at calculated index to the `vertices` array.\n    addVertex: function(x, y, opt) {\n\n        // accept input in form `{ x, y }, opt` or `x, y, opt`\n        var isPointProvided = (typeof x !== 'number');\n        var localX = isPointProvided ? x.x : x;\n        var localY = isPointProvided ? x.y : y;\n        var localOpt = isPointProvided ? y : opt;\n\n        var vertex = { x: localX, y: localY };\n        var idx = this.getVertexIndex(localX, localY);\n        this.model.insertVertex(idx, vertex, localOpt);\n        return idx;\n    },\n\n    // Send a token (an SVG element, usually a circle) along the connection path.\n    // Example: `link.findView(paper).sendToken(V('circle', { r: 7, fill: 'green' }).node)`\n    // `opt.duration` is optional and is a time in milliseconds that the token travels from the source to the target of the link. Default is `1000`.\n    // `opt.directon` is optional and it determines whether the token goes from source to target or other way round (`reverse`)\n    // `opt.connection` is an optional selector to the connection path.\n    // `callback` is optional and is a function to be called once the token reaches the target.\n    sendToken: function(token, opt, callback) {\n\n        function onAnimationEnd(vToken, callback) {\n            return function() {\n                vToken.remove();\n                if (typeof callback === 'function') {\n                    callback();\n                }\n            };\n        }\n\n        var duration, isReversed, selector;\n        if (isObject(opt)) {\n            duration = opt.duration;\n            isReversed = (opt.direction === 'reverse');\n            selector = opt.connection;\n        } else {\n            // Backwards compatibility\n            duration = opt;\n            isReversed = false;\n            selector = null;\n        }\n\n        duration = duration || 1000;\n\n        var animationAttributes = {\n            dur: duration + 'ms',\n            repeatCount: 1,\n            calcMode: 'linear',\n            fill: 'freeze'\n        };\n\n        if (isReversed) {\n            animationAttributes.keyPoints = '1;0';\n            animationAttributes.keyTimes = '0;1';\n        }\n\n        var vToken = V(token);\n        var connection;\n        if (typeof selector === 'string') {\n            // Use custom connection path.\n            connection = this.findBySelector(selector, this.el, this.selectors)[0];\n        } else {\n            // Select connection path automatically.\n            var cache = this._V;\n            connection = (cache.connection) ? cache.connection.node : this.el.querySelector('path');\n        }\n\n        if (!(connection instanceof SVGPathElement)) {\n            throw new Error('dia.LinkView: token animation requires a valid connection path.');\n        }\n\n        vToken\n            .appendTo(this.paper.cells)\n            .animateAlongPath(animationAttributes, connection);\n\n        setTimeout(onAnimationEnd(vToken, callback), duration);\n    },\n\n    findRoute: function(vertices) {\n\n        vertices || (vertices = []);\n\n        var namespace = this.paper.options.routerNamespace || routers;\n        var router = this.model.router();\n        var defaultRouter = this.paper.options.defaultRouter;\n\n        if (!router) {\n            if (defaultRouter) router = defaultRouter;\n            else return vertices.map(Point); // no router specified\n        }\n\n        var routerFn = isFunction(router) ? router : namespace[router.name];\n        if (!isFunction(routerFn)) {\n            throw new Error('dia.LinkView: unknown router: \"' + router.name + '\".');\n        }\n\n        var args = router.args || {};\n\n        var route = routerFn.call(\n            this, // context\n            vertices, // vertices\n            args, // options\n            this // linkView\n        );\n\n        if (!route) return vertices.map(Point);\n        return route;\n    },\n\n    // Return the `d` attribute value of the `<path>` element representing the link\n    // between `source` and `target`.\n    findPath: function(route, sourcePoint, targetPoint) {\n\n        var namespace = this.paper.options.connectorNamespace || connectors;\n        var connector = this.model.connector();\n        var defaultConnector = this.paper.options.defaultConnector;\n\n        if (!connector) {\n            connector = defaultConnector || {};\n        }\n\n        var connectorFn = isFunction(connector) ? connector : namespace[connector.name];\n        if (!isFunction(connectorFn)) {\n            throw new Error('dia.LinkView: unknown connector: \"' + connector.name + '\".');\n        }\n\n        var args = clone(connector.args || {});\n        args.raw = true; // Request raw g.Path as the result.\n\n        var path = connectorFn.call(\n            this, // context\n            sourcePoint, // start point\n            targetPoint, // end point\n            route, // vertices\n            args, // options\n            this // linkView\n        );\n\n        if (typeof path === 'string') {\n            // Backwards compatibility for connectors not supporting `raw` option.\n            path = new Path(V.normalizePathData(path));\n        }\n\n        return path;\n    },\n\n    // Public API.\n    // -----------\n\n    getConnection: function() {\n\n        var path = this.path;\n        if (!path) return null;\n\n        return path.clone();\n    },\n\n    getSerializedConnection: function() {\n\n        var path = this.path;\n        if (!path) return null;\n\n        var metrics = this.metrics;\n        if (metrics.hasOwnProperty('data')) return metrics.data;\n        var data = path.serialize();\n        metrics.data = data;\n        return data;\n    },\n\n    getConnectionSubdivisions: function() {\n\n        var path = this.path;\n        if (!path) return null;\n\n        var metrics = this.metrics;\n        if (metrics.hasOwnProperty('segmentSubdivisions')) return metrics.segmentSubdivisions;\n        var subdivisions = path.getSegmentSubdivisions();\n        metrics.segmentSubdivisions = subdivisions;\n        return subdivisions;\n    },\n\n    getConnectionLength: function() {\n\n        var path = this.path;\n        if (!path) return 0;\n\n        var metrics = this.metrics;\n        if (metrics.hasOwnProperty('length')) return metrics.length;\n        var length = path.length({ segmentSubdivisions: this.getConnectionSubdivisions() });\n        metrics.length = length;\n        return length;\n    },\n\n    getPointAtLength: function(length) {\n\n        var path = this.path;\n        if (!path) return null;\n\n        return path.pointAtLength(length, { segmentSubdivisions: this.getConnectionSubdivisions() });\n    },\n\n    getPointAtRatio: function(ratio) {\n\n        var path = this.path;\n        if (!path) return null;\n        if (isPercentage(ratio)) ratio = parseFloat(ratio) / 100;\n        return path.pointAt(ratio, { segmentSubdivisions: this.getConnectionSubdivisions() });\n    },\n\n    getTangentAtLength: function(length) {\n\n        var path = this.path;\n        if (!path) return null;\n\n        return path.tangentAtLength(length, { segmentSubdivisions: this.getConnectionSubdivisions() });\n    },\n\n    getTangentAtRatio: function(ratio) {\n\n        var path = this.path;\n        if (!path) return null;\n\n        return path.tangentAt(ratio, { segmentSubdivisions: this.getConnectionSubdivisions() });\n    },\n\n    getClosestPoint: function(point) {\n\n        var path = this.path;\n        if (!path) return null;\n\n        return path.closestPoint(point, { segmentSubdivisions: this.getConnectionSubdivisions() });\n    },\n\n    getClosestPointLength: function(point) {\n\n        var path = this.path;\n        if (!path) return null;\n\n        return path.closestPointLength(point, { segmentSubdivisions: this.getConnectionSubdivisions() });\n    },\n\n    getClosestPointRatio: function(point) {\n\n        var path = this.path;\n        if (!path) return null;\n\n        return path.closestPointNormalizedLength(point, { segmentSubdivisions: this.getConnectionSubdivisions() });\n    },\n\n    // Get label position object based on two provided coordinates, x and y.\n    // (Used behind the scenes when user moves labels around.)\n    // Two signatures:\n    // - num, num, obj = x, y, options\n    // - num, num, num, obj = x, y, angle, options\n    // Accepts distance/offset options = `absoluteDistance: boolean`, `reverseDistance: boolean`, `absoluteOffset: boolean`\n    // - `absoluteOffset` is necessary in order to move beyond connection endpoints\n    // Additional options = `keepGradient: boolean`, `ensureLegibility: boolean`\n    getLabelPosition: function(x, y, p3, p4) {\n\n        var position = {};\n\n        // normalize data from the two possible signatures\n        var localAngle = 0;\n        var localOpt;\n        if (typeof p3 === 'number') {\n            // angle and opt provided as third and fourth argument\n            localAngle = p3;\n            localOpt = p4;\n        } else {\n            // opt provided as third argument\n            localOpt = p3;\n        }\n\n        // save localOpt as `args` of the position object that is passed along\n        if (localOpt) position.args = localOpt;\n\n        // identify distance/offset settings\n        var isDistanceRelative = !(localOpt && localOpt.absoluteDistance); // relative by default\n        var isDistanceAbsoluteReverse = (localOpt && localOpt.absoluteDistance && localOpt.reverseDistance); // non-reverse by default\n        var isOffsetAbsolute = localOpt && localOpt.absoluteOffset; // offset is non-absolute by default\n\n        // find closest point t\n        var path = this.path;\n        var pathOpt = { segmentSubdivisions: this.getConnectionSubdivisions() };\n        var labelPoint = new Point(x, y);\n        var t = path.closestPointT(labelPoint, pathOpt);\n\n        // DISTANCE:\n        var labelDistance = path.lengthAtT(t, pathOpt);\n        if (isDistanceRelative) labelDistance = (labelDistance / this.getConnectionLength()) || 0; // fix to prevent NaN for 0 length\n        if (isDistanceAbsoluteReverse) labelDistance = (-1 * (this.getConnectionLength() - labelDistance)) || 1; // fix for end point (-0 => 1)\n        position.distance = labelDistance;\n\n        // OFFSET:\n        // use absolute offset if:\n        // - opt.absoluteOffset is true,\n        // - opt.absoluteOffset is not true but there is no tangent\n        var tangent;\n        if (!isOffsetAbsolute) tangent = path.tangentAtT(t);\n        var labelOffset;\n        if (tangent) {\n            labelOffset = tangent.pointOffset(labelPoint);\n        } else {\n            var closestPoint = path.pointAtT(t);\n            var labelOffsetDiff = labelPoint.difference(closestPoint);\n            labelOffset = { x: labelOffsetDiff.x, y: labelOffsetDiff.y };\n        }\n        position.offset = labelOffset;\n\n        // ANGLE:\n        position.angle = localAngle;\n\n        return position;\n    },\n\n    _getLabelTransformationMatrix: function(labelPosition) {\n\n        var labelDistance;\n        var labelAngle = 0;\n        var args = {};\n        if (typeof labelPosition === 'number') {\n            labelDistance = labelPosition;\n        } else if (typeof labelPosition.distance === 'number') {\n            args = labelPosition.args || {};\n            labelDistance = labelPosition.distance;\n            labelAngle = labelPosition.angle || 0;\n        } else {\n            throw new Error('dia.LinkView: invalid label position distance.');\n        }\n\n        var isDistanceRelative = ((labelDistance > 0) && (labelDistance <= 1));\n\n        var labelOffset = 0;\n        var labelOffsetCoordinates = { x: 0, y: 0 };\n        if (labelPosition.offset) {\n            var positionOffset = labelPosition.offset;\n            if (typeof positionOffset === 'number') labelOffset = positionOffset;\n            if (positionOffset.x) labelOffsetCoordinates.x = positionOffset.x;\n            if (positionOffset.y) labelOffsetCoordinates.y = positionOffset.y;\n        }\n\n        var isOffsetAbsolute = ((labelOffsetCoordinates.x !== 0) || (labelOffsetCoordinates.y !== 0) || labelOffset === 0);\n\n        var isKeepGradient = args.keepGradient;\n        var isEnsureLegibility = args.ensureLegibility;\n\n        var path = this.path;\n        var pathOpt = { segmentSubdivisions: this.getConnectionSubdivisions() };\n\n        var distance = isDistanceRelative ? (labelDistance * this.getConnectionLength()) : labelDistance;\n        var tangent = path.tangentAtLength(distance, pathOpt);\n\n        var translation;\n        var angle = labelAngle;\n        if (tangent) {\n            if (isOffsetAbsolute) {\n                translation = tangent.start.clone();\n                translation.offset(labelOffsetCoordinates);\n            } else {\n                var normal = tangent.clone();\n                normal.rotate(tangent.start, -90);\n                normal.setLength(labelOffset);\n                translation = normal.end;\n            }\n\n            if (isKeepGradient) {\n                angle = (tangent.angle() + labelAngle);\n                if (isEnsureLegibility) {\n                    angle = normalizeAngle(((angle + 90) % 180) - 90);\n                }\n            }\n\n        } else {\n            // fallback - the connection has zero length\n            translation = path.start.clone();\n            if (isOffsetAbsolute) translation.offset(labelOffsetCoordinates);\n        }\n\n        return V.createSVGMatrix()\n            .translate(translation.x, translation.y)\n            .rotate(angle);\n    },\n\n    getLabelCoordinates: function(labelPosition) {\n\n        var transformationMatrix = this._getLabelTransformationMatrix(labelPosition);\n        return new Point(transformationMatrix.e, transformationMatrix.f);\n    },\n\n    getVertexIndex: function(x, y) {\n\n        var model = this.model;\n        var vertices = model.vertices();\n\n        var vertexLength = this.getClosestPointLength(new Point(x, y));\n\n        var idx = 0;\n        for (var n = vertices.length; idx < n; idx++) {\n            var currentVertex = vertices[idx];\n            var currentVertexLength = this.getClosestPointLength(currentVertex);\n            if (vertexLength < currentVertexLength) break;\n        }\n\n        return idx;\n    },\n\n    // Interaction. The controller part.\n    // ---------------------------------\n\n    notifyPointerdown(evt, x, y) {\n        CellView.prototype.pointerdown.call(this, evt, x, y);\n        this.notify('link:pointerdown', evt, x, y);\n    },\n\n    notifyPointermove(evt, x, y) {\n        CellView.prototype.pointermove.call(this, evt, x, y);\n        this.notify('link:pointermove', evt, x, y);\n    },\n\n    notifyPointerup(evt, x, y) {\n        this.notify('link:pointerup', evt, x, y);\n        CellView.prototype.pointerup.call(this, evt, x, y);\n    },\n\n    pointerdblclick: function(evt, x, y) {\n\n        CellView.prototype.pointerdblclick.apply(this, arguments);\n        this.notify('link:pointerdblclick', evt, x, y);\n    },\n\n    pointerclick: function(evt, x, y) {\n\n        CellView.prototype.pointerclick.apply(this, arguments);\n        this.notify('link:pointerclick', evt, x, y);\n    },\n\n    contextmenu: function(evt, x, y) {\n\n        CellView.prototype.contextmenu.apply(this, arguments);\n        this.notify('link:contextmenu', evt, x, y);\n    },\n\n    pointerdown: function(evt, x, y) {\n\n        this.notifyPointerdown(evt, x, y);\n\n        // Backwards compatibility for the default markup\n        var className = evt.target.getAttribute('class');\n        switch (className) {\n\n            case 'marker-vertex':\n                this.dragVertexStart(evt, x, y);\n                return;\n\n            case 'marker-vertex-remove':\n            case 'marker-vertex-remove-area':\n                this.dragVertexRemoveStart(evt, x, y);\n                return;\n\n            case 'marker-arrowhead':\n                this.dragArrowheadStart(evt, x, y);\n                return;\n\n            case 'connection':\n            case 'connection-wrap':\n                this.dragConnectionStart(evt, x, y);\n                return;\n\n            case 'marker-source':\n            case 'marker-target':\n                return;\n        }\n\n        this.dragStart(evt, x, y);\n    },\n\n    pointermove: function(evt, x, y) {\n\n        // Backwards compatibility\n        var dragData = this._dragData;\n        if (dragData) this.eventData(evt, dragData);\n\n        var data = this.eventData(evt);\n        switch (data.action) {\n\n            case 'vertex-move':\n                this.dragVertex(evt, x, y);\n                break;\n\n            case 'label-move':\n                this.dragLabel(evt, x, y);\n                break;\n\n            case 'arrowhead-move':\n                this.dragArrowhead(evt, x, y);\n                break;\n\n            case 'move':\n                this.drag(evt, x, y);\n                break;\n        }\n\n        // Backwards compatibility\n        if (dragData) assign(dragData, this.eventData(evt));\n\n        this.notifyPointermove(evt, x, y);\n    },\n\n    pointerup: function(evt, x, y) {\n\n        // Backwards compatibility\n        var dragData = this._dragData;\n        if (dragData) {\n            this.eventData(evt, dragData);\n            this._dragData = null;\n        }\n\n        var data = this.eventData(evt);\n        switch (data.action) {\n\n            case 'vertex-move':\n                this.dragVertexEnd(evt, x, y);\n                break;\n\n            case 'label-move':\n                this.dragLabelEnd(evt, x, y);\n                break;\n\n            case 'arrowhead-move':\n                this.dragArrowheadEnd(evt, x, y);\n                break;\n\n            case 'move':\n                this.dragEnd(evt, x, y);\n        }\n\n        this.notifyPointerup(evt, x, y);\n        this.checkMouseleave(evt);\n    },\n\n    mouseover: function(evt) {\n\n        CellView.prototype.mouseover.apply(this, arguments);\n        this.notify('link:mouseover', evt);\n    },\n\n    mouseout: function(evt) {\n\n        CellView.prototype.mouseout.apply(this, arguments);\n        this.notify('link:mouseout', evt);\n    },\n\n    mouseenter: function(evt) {\n\n        CellView.prototype.mouseenter.apply(this, arguments);\n        this.notify('link:mouseenter', evt);\n    },\n\n    mouseleave: function(evt) {\n\n        CellView.prototype.mouseleave.apply(this, arguments);\n        this.notify('link:mouseleave', evt);\n    },\n\n    mousewheel: function(evt, x, y, delta) {\n\n        CellView.prototype.mousewheel.apply(this, arguments);\n        this.notify('link:mousewheel', evt, x, y, delta);\n    },\n\n    onevent: function(evt, eventName, x, y) {\n\n        // Backwards compatibility\n        var linkTool = V(evt.target).findParentByClass('link-tool', this.el);\n        if (linkTool) {\n            // No further action to be executed\n            evt.stopPropagation();\n\n            // Allow `interactive.useLinkTools=false`\n            if (this.can('useLinkTools')) {\n                if (eventName === 'remove') {\n                    // Built-in remove event\n                    this.model.remove({ ui: true });\n                    // Do not trigger link pointerdown\n                    return;\n\n                } else {\n                    // link:options and other custom events inside the link tools\n                    this.notify(eventName, evt, x, y);\n                }\n            }\n\n            this.notifyPointerdown(evt, x, y);\n            this.paper.delegateDragEvents(this, evt.data);\n\n        } else {\n            CellView.prototype.onevent.apply(this, arguments);\n        }\n    },\n\n    onlabel: function(evt, x, y) {\n\n        this.notifyPointerdown(evt, x, y);\n\n        this.dragLabelStart(evt, x, y);\n\n        var stopPropagation = this.eventData(evt).stopPropagation;\n        if (stopPropagation) evt.stopPropagation();\n    },\n\n    // Drag Start Handlers\n\n    dragConnectionStart: function(evt, x, y) {\n\n        if (!this.can('vertexAdd')) return;\n\n        // Store the index at which the new vertex has just been placed.\n        // We'll be update the very same vertex position in `pointermove()`.\n        var vertexIdx = this.addVertex({ x: x, y: y }, { ui: true });\n        this.eventData(evt, {\n            action: 'vertex-move',\n            vertexIdx: vertexIdx\n        });\n    },\n\n    dragLabelStart: function(evt, x, y) {\n\n        if (this.can('labelMove')) {\n\n            if (this.isDefaultInteractionPrevented(evt)) return;\n\n            var labelNode = evt.currentTarget;\n            var labelIdx = parseInt(labelNode.getAttribute('label-idx'), 10);\n\n            var defaultLabelPosition = this._getDefaultLabelPositionProperty();\n            var initialLabelPosition = this._normalizeLabelPosition(this._getLabelPositionProperty(labelIdx));\n            var position = this._mergeLabelPositionProperty(initialLabelPosition, defaultLabelPosition);\n\n            var coords = this.getLabelCoordinates(position);\n            var dx = coords.x - x; // how much needs to be added to cursor x to get to label x\n            var dy = coords.y - y; // how much needs to be added to cursor y to get to label y\n\n            var positionAngle = this._getLabelPositionAngle(labelIdx);\n            var labelPositionArgs = this._getLabelPositionArgs(labelIdx);\n            var defaultLabelPositionArgs = this._getDefaultLabelPositionArgs();\n            var positionArgs = this._mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs);\n\n            this.eventData(evt, {\n                action: 'label-move',\n                labelIdx: labelIdx,\n                dx: dx,\n                dy: dy,\n                positionAngle: positionAngle,\n                positionArgs: positionArgs,\n                stopPropagation: true\n            });\n\n        } else {\n\n            // Backwards compatibility:\n            // If labels can't be dragged no default action is triggered.\n            this.eventData(evt, { stopPropagation: true });\n        }\n\n        this.paper.delegateDragEvents(this, evt.data);\n    },\n\n    dragVertexStart: function(evt, x, y) {\n\n        if (!this.can('vertexMove')) return;\n\n        var vertexNode = evt.target;\n        var vertexIdx = parseInt(vertexNode.getAttribute('idx'), 10);\n        this.eventData(evt, {\n            action: 'vertex-move',\n            vertexIdx: vertexIdx\n        });\n    },\n\n    dragVertexRemoveStart: function(evt, x, y) {\n\n        if (!this.can('vertexRemove')) return;\n\n        var removeNode = evt.target;\n        var vertexIdx = parseInt(removeNode.getAttribute('idx'), 10);\n        this.model.removeVertex(vertexIdx);\n    },\n\n    dragArrowheadStart: function(evt, x, y) {\n\n        if (!this.can('arrowheadMove')) return;\n\n        var arrowheadNode = evt.target;\n        var arrowheadType = arrowheadNode.getAttribute('end');\n        var data = this.startArrowheadMove(arrowheadType, { ignoreBackwardsCompatibility: true });\n\n        this.eventData(evt, data);\n    },\n\n    dragStart: function(evt, x, y) {\n\n        if (this.isDefaultInteractionPrevented(evt)) return;\n\n        if (!this.can('linkMove')) return;\n\n        this.eventData(evt, {\n            action: 'move',\n            dx: x,\n            dy: y\n        });\n    },\n\n    // Drag Handlers\n    dragLabel: function(evt, x, y) {\n\n        var data = this.eventData(evt);\n        var label = { position: this.getLabelPosition((x + data.dx), (y + data.dy), data.positionAngle, data.positionArgs) };\n        if (this.paper.options.snapLabels) delete label.position.offset;\n        // The `touchmove' events are not fired\n        // when the original event target is removed from the DOM.\n        // The labels are currently re-rendered completely when only\n        // the position changes. This is why we need to make sure that\n        // the label is updated synchronously.\n        // TODO: replace `touchmove` with `pointermove` (breaking change).\n        const setOptions = { ui: true };\n        if (this.paper.isAsync() && evt.type === 'touchmove') {\n            setOptions.async = false;\n        }\n        this.model.label(data.labelIdx, label, setOptions);\n    },\n\n    dragVertex: function(evt, x, y) {\n\n        var data = this.eventData(evt);\n        this.model.vertex(data.vertexIdx, { x: x, y: y }, { ui: true });\n    },\n\n    dragArrowhead: function(evt, x, y) {\n        if (this.paper.options.snapLinks) {\n            const isSnapped = this._snapArrowhead(evt, x, y);\n            if (!isSnapped && this.paper.options.snapLinksSelf) {\n                this._snapArrowheadSelf(evt, x, y);\n            }\n        } else {\n            if (this.paper.options.snapLinksSelf) {\n                this._snapArrowheadSelf(evt, x, y);\n            } else {\n                this._connectArrowhead(this.getEventTarget(evt), x, y, this.eventData(evt));\n            }\n        }\n    },\n\n    drag: function(evt, x, y) {\n\n        var data = this.eventData(evt);\n        this.model.translate(x - data.dx, y - data.dy, { ui: true });\n        this.eventData(evt, {\n            dx: x,\n            dy: y\n        });\n    },\n\n    // Drag End Handlers\n\n    dragLabelEnd: function() {\n        // noop\n    },\n\n    dragVertexEnd: function() {\n        // noop\n    },\n\n    dragArrowheadEnd: function(evt, x, y) {\n\n        var data = this.eventData(evt);\n        var paper = this.paper;\n\n        if (paper.options.snapLinks) {\n            this._snapArrowheadEnd(data);\n        } else {\n            this._connectArrowheadEnd(data, x, y);\n        }\n\n        if (!paper.linkAllowed(this)) {\n            // If the changed link is not allowed, revert to its previous state.\n            this._disallow(data);\n        } else {\n            this._finishEmbedding(data);\n            this._notifyConnectEvent(data, evt);\n        }\n\n        this._afterArrowheadMove(data);\n    },\n\n    dragEnd: function() {\n        // noop\n    },\n\n    _disallow: function(data) {\n\n        switch (data.whenNotAllowed) {\n\n            case 'remove':\n                this.model.remove({ ui: true });\n                break;\n\n            case 'revert':\n            default:\n                this.model.set(data.arrowhead, data.initialEnd, { ui: true });\n                break;\n        }\n    },\n\n    _finishEmbedding: function(data) {\n\n        // Reparent the link if embedding is enabled\n        if (this.paper.options.embeddingMode && this.model.reparent()) {\n            // Make sure we don't reverse to the original 'z' index (see afterArrowheadMove()).\n            data.z = null;\n        }\n    },\n\n    _notifyConnectEvent: function(data, evt) {\n\n        var arrowhead = data.arrowhead;\n        var initialEnd = data.initialEnd;\n        var currentEnd = this.model.prop(arrowhead);\n        var endChanged = currentEnd && !Link.endsEqual(initialEnd, currentEnd);\n        if (endChanged) {\n            var paper = this.paper;\n            if (initialEnd.id) {\n                this.notify('link:disconnect', evt, paper.findViewByModel(initialEnd.id), data.initialMagnet, arrowhead);\n            }\n            if (currentEnd.id) {\n                this.notify('link:connect', evt, paper.findViewByModel(currentEnd.id), data.magnetUnderPointer, arrowhead);\n            }\n        }\n    },\n\n    _snapToPoints: function(snapPoint, points, radius) {\n        let closestPointX = null;\n        let closestDistanceX = Infinity;\n\n        let closestPointY = null;\n        let closestDistanceY = Infinity;\n\n        let x = snapPoint.x;\n        let y = snapPoint.y;\n\n        for (let i = 0; i < points.length; i++) {\n            const distX = Math.abs(points[i].x - snapPoint.x);\n            if (distX < closestDistanceX) {\n                closestDistanceX = distX;\n                closestPointX = points[i];\n            }\n\n            const distY = Math.abs(points[i].y - snapPoint.y);\n            if (distY < closestDistanceY) {\n                closestDistanceY = distY;\n                closestPointY = points[i];\n            }\n        }\n\n        if (closestDistanceX < radius) {\n            x = closestPointX.x;\n        }\n        if (closestDistanceY < radius) {\n            y = closestPointY.y;\n        }\n\n        return { x, y };\n    },\n\n    _snapArrowheadSelf: function(evt, x, y) {\n\n        const { paper, model } = this;\n        const { snapLinksSelf } = paper.options;\n        const data = this.eventData(evt);\n        const radius = snapLinksSelf.radius || 20;\n\n        const anchor = this.getEndAnchor(data.arrowhead === 'source' ? 'target' : 'source');\n        const vertices = model.vertices();\n        const points = [anchor, ...vertices];\n\n        const snapPoint = this._snapToPoints({ x: x, y: y }, points, radius);\n\n        const point = paper.localToClientPoint(snapPoint);\n        this._connectArrowhead(document.elementFromPoint(point.x, point.y), snapPoint.x, snapPoint.y, this.eventData(evt));\n    },\n\n    _snapArrowhead: function(evt, x, y) {\n\n        const { paper } = this;\n        const { snapLinks, connectionStrategy } = paper.options;\n        const data = this.eventData(evt);\n        let isSnapped = false;\n        // checking view in close area of the pointer\n\n        var r = snapLinks.radius || 50;\n        var viewsInArea = paper.findViewsInArea({ x: x - r, y: y - r, width: 2 * r, height: 2 * r });\n\n        var prevClosestView = data.closestView || null;\n        var prevClosestMagnet = data.closestMagnet || null;\n        var prevMagnetProxy = data.magnetProxy || null;\n\n        data.closestView = data.closestMagnet = data.magnetProxy = null;\n\n        var minDistance = Number.MAX_VALUE;\n        var pointer = new Point(x, y);\n\n        viewsInArea.forEach(function(view) {\n            const candidates = [];\n            // skip connecting to the element in case '.': { magnet: false } attribute present\n            if (view.el.getAttribute('magnet') !== 'false') {\n                candidates.push({\n                    bbox: view.model.getBBox(),\n                    magnet: view.el\n                });\n            }\n\n            view.$('[magnet]').toArray().forEach(magnet => {\n                candidates.push({\n                    bbox: view.getNodeBBox(magnet),\n                    magnet\n                });\n            });\n\n            candidates.forEach(candidate => {\n                const { magnet, bbox } = candidate;\n                // find distance from the center of the model to pointer coordinates\n                const distance = bbox.center().squaredDistance(pointer);\n                // the connection is looked up in a circle area by `distance < r`\n                if (distance < minDistance) {\n                    const isAlreadyValidated = prevClosestMagnet === magnet;\n                    if (isAlreadyValidated || paper.options.validateConnection.apply(\n                        paper, data.validateConnectionArgs(view, (view.el === magnet) ? null : magnet)\n                    )) {\n                        minDistance = distance;\n                        data.closestView = view;\n                        data.closestMagnet = magnet;\n                    }\n                }\n            });\n\n        }, this);\n\n        var end;\n        var magnetProxy = null;\n        var closestView = data.closestView;\n        var closestMagnet = data.closestMagnet;\n        if (closestMagnet) {\n            magnetProxy = data.magnetProxy = closestView.findProxyNode(closestMagnet, 'highlighter');\n        }\n        var endType = data.arrowhead;\n        var newClosestMagnet = (prevClosestMagnet !== closestMagnet);\n        if (prevClosestView && newClosestMagnet) {\n            prevClosestView.unhighlight(prevMagnetProxy, {\n                connecting: true,\n                snapping: true\n            });\n        }\n\n        if (closestView) {\n            const { prevEnd, prevX, prevY } = data;\n            data.prevX = x;\n            data.prevY = y;\n            isSnapped = true;\n\n            if (!newClosestMagnet)  {\n                if (typeof connectionStrategy !== 'function' || (prevX === x && prevY === y)) {\n                    // the magnet has not changed and the link's end does not depend on the x and y\n                    return isSnapped;\n                }\n            }\n\n            end = closestView.getLinkEnd(closestMagnet, x, y, this.model, endType);\n            if (!newClosestMagnet && isEqual(prevEnd, end)) {\n                // the source/target json has not changed\n                return isSnapped;\n            }\n\n            data.prevEnd = end;\n\n            if (newClosestMagnet) {\n                closestView.highlight(magnetProxy, {\n                    connecting: true,\n                    snapping: true\n                });\n            }\n\n        } else {\n\n            end = { x: x, y: y };\n        }\n\n        this.model.set(endType, end || { x: x, y: y }, { ui: true });\n\n        if (prevClosestView) {\n            this.notify('link:snap:disconnect', evt, prevClosestView, prevClosestMagnet, endType);\n        }\n        if (closestView) {\n            this.notify('link:snap:connect', evt, closestView, closestMagnet, endType);\n        }\n\n        return isSnapped;\n    },\n\n    _snapArrowheadEnd: function(data) {\n\n        // Finish off link snapping.\n        // Everything except view unhighlighting was already done on pointermove.\n        var closestView = data.closestView;\n        var closestMagnet = data.closestMagnet;\n        if (closestView && closestMagnet) {\n\n            closestView.unhighlight(data.magnetProxy, { connecting: true, snapping: true });\n            data.magnetUnderPointer = closestView.findMagnet(closestMagnet);\n        }\n\n        data.closestView = data.closestMagnet = null;\n    },\n\n    _connectArrowhead: function(target, x, y, data) {\n\n        // checking views right under the pointer\n        const { paper, model } = this;\n\n        if (data.eventTarget !== target) {\n            // Unhighlight the previous view under pointer if there was one.\n            if (data.magnetProxy) {\n                data.viewUnderPointer.unhighlight(data.magnetProxy, {\n                    connecting: true\n                });\n            }\n\n            const viewUnderPointer = data.viewUnderPointer = paper.findView(target);\n            if (viewUnderPointer) {\n                // If we found a view that is under the pointer, we need to find the closest\n                // magnet based on the real target element of the event.\n                const magnetUnderPointer = data.magnetUnderPointer = viewUnderPointer.findMagnet(target);\n                const magnetProxy = data.magnetProxy = viewUnderPointer.findProxyNode(magnetUnderPointer, 'highlighter');\n\n                if (magnetUnderPointer && this.paper.options.validateConnection.apply(\n                    paper,\n                    data.validateConnectionArgs(viewUnderPointer, magnetUnderPointer)\n                )) {\n                    // If there was no magnet found, do not highlight anything and assume there\n                    // is no view under pointer we're interested in reconnecting to.\n                    // This can only happen if the overall element has the attribute `'.': { magnet: false }`.\n                    if (magnetProxy) {\n                        viewUnderPointer.highlight(magnetProxy, {\n                            connecting: true\n                        });\n                    }\n                } else {\n                    // This type of connection is not valid. Disregard this magnet.\n                    data.magnetUnderPointer = null;\n                    data.magnetProxy = null;\n                }\n            } else {\n                // Make sure we'll unset previous magnet.\n                data.magnetUnderPointer = null;\n                data.magnetProxy = null;\n            }\n        }\n\n        data.eventTarget = target;\n\n        model.set(data.arrowhead, { x: x, y: y }, { ui: true });\n    },\n\n    _connectArrowheadEnd: function(data = {}, x, y) {\n\n        const { model } = this;\n        const { viewUnderPointer, magnetUnderPointer, magnetProxy, arrowhead } = data;\n\n        if (!magnetUnderPointer || !magnetProxy || !viewUnderPointer) return;\n\n        viewUnderPointer.unhighlight(magnetProxy, { connecting: true });\n\n        // The link end is taken from the magnet under the pointer, not the proxy.\n        const end = viewUnderPointer.getLinkEnd(magnetUnderPointer, x, y, model, arrowhead);\n        model.set(arrowhead, end, { ui: true });\n    },\n\n    _beforeArrowheadMove: function(data) {\n\n        data.z = this.model.get('z');\n        this.model.toFront();\n\n        // Let the pointer propagate through the link view elements so that\n        // the `evt.target` is another element under the pointer, not the link itself.\n        var style = this.el.style;\n        data.pointerEvents = style.pointerEvents;\n        style.pointerEvents = 'none';\n\n        if (this.paper.options.markAvailable) {\n            this._markAvailableMagnets(data);\n        }\n    },\n\n    _afterArrowheadMove: function(data) {\n\n        if (data.z !== null) {\n            this.model.set('z', data.z, { ui: true });\n            data.z = null;\n        }\n\n        // Put `pointer-events` back to its original value. See `_beforeArrowheadMove()` for explanation.\n        this.el.style.pointerEvents = data.pointerEvents;\n\n        if (this.paper.options.markAvailable) {\n            this._unmarkAvailableMagnets(data);\n        }\n    },\n\n    _createValidateConnectionArgs: function(arrowhead) {\n        // It makes sure the arguments for validateConnection have the following form:\n        // (source view, source magnet, target view, target magnet and link view)\n        var args = [];\n\n        args[4] = arrowhead;\n        args[5] = this;\n\n        var oppositeArrowhead;\n        var i = 0;\n        var j = 0;\n\n        if (arrowhead === 'source') {\n            i = 2;\n            oppositeArrowhead = 'target';\n        } else {\n            j = 2;\n            oppositeArrowhead = 'source';\n        }\n\n        var end = this.model.get(oppositeArrowhead);\n\n        if (end.id) {\n            var view = args[i] = this.paper.findViewByModel(end.id);\n            var magnet = view.getMagnetFromLinkEnd(end);\n            if (magnet === view.el) magnet = undefined;\n            args[i + 1] = magnet;\n        }\n\n        function validateConnectionArgs(cellView, magnet) {\n            args[j] = cellView;\n            args[j + 1] = cellView.el === magnet ? undefined : magnet;\n            return args;\n        }\n\n        return validateConnectionArgs;\n    },\n\n    _markAvailableMagnets: function(data) {\n\n        function isMagnetAvailable(view, magnet) {\n            var paper = view.paper;\n            var validate = paper.options.validateConnection;\n            return validate.apply(paper, this.validateConnectionArgs(view, magnet));\n        }\n\n        var paper = this.paper;\n        var elements = paper.model.getCells();\n        data.marked = {};\n\n        for (var i = 0, n = elements.length; i < n; i++) {\n            var view = elements[i].findView(paper);\n\n            if (!view) {\n                continue;\n            }\n\n            var magnets = Array.prototype.slice.call(view.el.querySelectorAll('[magnet]'));\n            if (view.el.getAttribute('magnet') !== 'false') {\n                // Element wrapping group is also a magnet\n                magnets.push(view.el);\n            }\n\n            var availableMagnets = magnets.filter(isMagnetAvailable.bind(data, view));\n\n            if (availableMagnets.length > 0) {\n                // highlight all available magnets\n                for (var j = 0, m = availableMagnets.length; j < m; j++) {\n                    view.highlight(availableMagnets[j], { magnetAvailability: true });\n                }\n                // highlight the entire view\n                view.highlight(null, { elementAvailability: true });\n\n                data.marked[view.model.id] = availableMagnets;\n            }\n        }\n    },\n\n    _unmarkAvailableMagnets: function(data) {\n\n        var markedKeys = Object.keys(data.marked);\n        var id;\n        var markedMagnets;\n\n        for (var i = 0, n = markedKeys.length; i < n; i++) {\n            id = markedKeys[i];\n            markedMagnets = data.marked[id];\n\n            var view = this.paper.findViewByModel(id);\n            if (view) {\n                for (var j = 0, m = markedMagnets.length; j < m; j++) {\n                    view.unhighlight(markedMagnets[j], { magnetAvailability: true });\n                }\n                view.unhighlight(null, { elementAvailability: true });\n            }\n        }\n\n        data.marked = null;\n    },\n\n    startArrowheadMove: function(end, opt) {\n\n        opt || (opt = {});\n\n        // Allow to delegate events from an another view to this linkView in order to trigger arrowhead\n        // move without need to click on the actual arrowhead dom element.\n        var data = {\n            action: 'arrowhead-move',\n            arrowhead: end,\n            whenNotAllowed: opt.whenNotAllowed || 'revert',\n            initialMagnet: this[end + 'Magnet'] || (this[end + 'View'] ? this[end + 'View'].el : null),\n            initialEnd: clone(this.model.get(end)),\n            validateConnectionArgs: this._createValidateConnectionArgs(end)\n        };\n\n        this._beforeArrowheadMove(data);\n\n        if (opt.ignoreBackwardsCompatibility !== true) {\n            this._dragData = data;\n        }\n\n        return data;\n    },\n\n    // Lifecycle methods\n\n    onMount: function() {\n        CellView.prototype.onMount.apply(this, arguments);\n        this.mountLabels();\n    },\n\n    onDetach: function() {\n        CellView.prototype.onDetach.apply(this, arguments);\n        this.unmountLabels();\n    },\n\n    onRemove: function() {\n        CellView.prototype.onRemove.apply(this, arguments);\n        this.unmountLabels();\n    }\n\n}, {\n\n    Flags: Flags,\n});\n\nObject.defineProperty(LinkView.prototype, 'sourceBBox', {\n\n    enumerable: true,\n\n    get: function() {\n        var sourceView = this.sourceView;\n        if (!sourceView) {\n            var sourceDef = this.model.source();\n            return new Rect(sourceDef.x, sourceDef.y);\n        }\n        var sourceMagnet = this.sourceMagnet;\n        if (sourceView.isNodeConnection(sourceMagnet)) {\n            return new Rect(this.sourceAnchor);\n        }\n        return sourceView.getNodeBBox(sourceMagnet || sourceView.el);\n    }\n\n});\n\nObject.defineProperty(LinkView.prototype, 'targetBBox', {\n\n    enumerable: true,\n\n    get: function() {\n        var targetView = this.targetView;\n        if (!targetView) {\n            var targetDef = this.model.target();\n            return new Rect(targetDef.x, targetDef.y);\n        }\n        var targetMagnet = this.targetMagnet;\n        if (targetView.isNodeConnection(targetMagnet)) {\n            return new Rect(this.targetAnchor);\n        }\n        return targetView.getNodeBBox(targetMagnet || targetView.el);\n    }\n});\n\n","import { assign } from '../util/index.mjs';\nimport V from '../V/index.mjs';\nimport { HighlighterView } from '../dia/HighlighterView.mjs';\n\nexport const stroke = HighlighterView.extend({\n\n    tagName: 'path',\n    className: 'highlight-stroke',\n    attributes: {\n        'pointer-events': 'none',\n        'vector-effect': 'non-scaling-stroke',\n        'fill': 'none'\n    },\n\n    options: {\n        padding: 3,\n        rx: 0,\n        ry: 0,\n        useFirstSubpath: false,\n        attrs: {\n            'stroke-width': 3,\n            'stroke': '#FEB663'\n        }\n    },\n\n    getPathData(cellView, node) {\n        const { options } = this;\n        const { useFirstSubpath } = options;\n        let d;\n        try {\n            const vNode = V(node);\n            d = vNode.convertToPathData().trim();\n            if (vNode.tagName() === 'PATH' && useFirstSubpath) {\n                const secondSubpathIndex = d.search(/.M/i) + 1;\n                if (secondSubpathIndex > 0) {\n                    d = d.substr(0, secondSubpathIndex);\n                }\n            }\n        } catch (error) {\n            // Failed to get path data from magnet element.\n            // Draw a rectangle around the node instead.\n            const nodeBBox = cellView.getNodeBoundingRect(node);\n            d = V.rectToPath(assign({}, options, nodeBBox.toJSON()));\n        }\n        return d;\n    },\n\n    highlightConnection(cellView) {\n        this.vel.attr('d', cellView.getSerializedConnection());\n    },\n\n    highlightNode(cellView, node) {\n        const { vel, options } = this;\n        const { padding, layer } = options;\n        let highlightMatrix = this.getNodeMatrix(cellView, node);\n        // Add padding to the highlight element.\n        if (padding) {\n            if (!layer && node === cellView.el) {\n                // If the highlighter is appended to the cellView\n                // and we measure the size of the cellView wrapping group\n                // it's necessary to remove the highlighter first\n                vel.remove();\n            }\n            let nodeBBox = cellView.getNodeBoundingRect(node);\n            const cx = nodeBBox.x + (nodeBBox.width / 2);\n            const cy = nodeBBox.y + (nodeBBox.height / 2);\n            nodeBBox = V.transformRect(nodeBBox, highlightMatrix);\n            const width = Math.max(nodeBBox.width, 1);\n            const height = Math.max(nodeBBox.height, 1);\n            const sx = (width + padding) / width;\n            const sy = (height + padding) / height;\n            const paddingMatrix = V.createSVGMatrix({\n                a: sx,\n                b: 0,\n                c: 0,\n                d: sy,\n                e: cx - sx * cx,\n                f: cy - sy * cy\n            });\n            highlightMatrix = highlightMatrix.multiply(paddingMatrix);\n        }\n        vel.attr({\n            'd': this.getPathData(cellView, node),\n            'transform': V.matrixToTransformString(highlightMatrix)\n        });\n    },\n\n    highlight(cellView, node) {\n        const { vel, options } = this;\n        vel.attr(options.attrs);\n        if (cellView.isNodeConnection(node)) {\n            this.highlightConnection(cellView);\n        } else {\n            this.highlightNode(cellView, node);\n        }\n    }\n\n});\n","import V from '../V/index.mjs';\nimport { HighlighterView } from '../dia/HighlighterView.mjs';\n\nconst MASK_CLIP = 20;\n\nfunction forEachDescendant(vel, fn) {\n    const descendants = vel.children();\n    while (descendants.length > 0) {\n        const descendant = descendants.shift();\n        if (fn(descendant)) {\n            descendants.push(...descendant.children());\n        }\n    }\n}\n\nexport const mask = HighlighterView.extend({\n\n    tagName: 'rect',\n    className: 'highlight-mask',\n    attributes: {\n        'pointer-events': 'none'\n    },\n\n    options: {\n        padding: 3,\n        maskClip: MASK_CLIP,\n        deep: false,\n        attrs: {\n            'stroke': '#FEB663',\n            'stroke-width': 3,\n            'stroke-linecap': 'butt',\n            'stroke-linejoin': 'miter',\n        }\n    },\n\n    VISIBLE: 'white',\n    INVISIBLE: 'black',\n\n    MASK_ROOT_ATTRIBUTE_BLACKLIST: [\n        'marker-start',\n        'marker-end',\n        'marker-mid',\n        'transform',\n        'stroke-dasharray',\n        'class',\n    ],\n\n    MASK_CHILD_ATTRIBUTE_BLACKLIST: [\n        'stroke',\n        'fill',\n        'stroke-width',\n        'stroke-opacity',\n        'stroke-dasharray',\n        'fill-opacity',\n        'marker-start',\n        'marker-end',\n        'marker-mid',\n        'class',\n    ],\n\n    // TODO: change the list to a function callback\n    MASK_REPLACE_TAGS: [\n        'FOREIGNOBJECT',\n        'IMAGE',\n        'USE',\n        'TEXT',\n        'TSPAN',\n        'TEXTPATH'\n    ],\n\n    // TODO: change the list to a function callback\n    MASK_REMOVE_TAGS: [\n        'TEXT',\n        'TSPAN',\n        'TEXTPATH'\n    ],\n\n    transformMaskChild(cellView, childEl) {\n        const {\n            MASK_CHILD_ATTRIBUTE_BLACKLIST,\n            MASK_REPLACE_TAGS,\n            MASK_REMOVE_TAGS\n        } = this;\n        const childTagName = childEl.tagName();\n        // Do not include the element in the mask's image\n        if (!V.isSVGGraphicsElement(childEl) || MASK_REMOVE_TAGS.includes(childTagName)) {\n            childEl.remove();\n            return false;\n        }\n        // Replace the element with a rectangle\n        if (MASK_REPLACE_TAGS.includes(childTagName)) {\n            // Note: clone() method does not change the children ids\n            const originalChild = cellView.vel.findOne(`#${childEl.id}`);\n            if (originalChild) {\n                const { node: originalNode } = originalChild;\n                let childBBox = cellView.getNodeBoundingRect(originalNode);\n                if (cellView.model.isElement()) {\n                    childBBox = V.transformRect(childBBox, cellView.getNodeMatrix(originalNode));\n                }\n                const replacement = V('rect', childBBox.toJSON());\n                const { x: ox, y: oy } = childBBox.center();\n                const { angle, cx = ox, cy = oy } = originalChild.rotate();\n                if (angle) replacement.rotate(angle, cx, cy);\n                // Note: it's not important to keep the same sibling index since all subnodes are filled\n                childEl.parent().append(replacement);\n            }\n            childEl.remove();\n            return false;\n        }\n        // Keep the element, but clean it from certain attributes\n        MASK_CHILD_ATTRIBUTE_BLACKLIST.forEach(attrName => {\n            if (attrName === 'fill' && childEl.attr('fill') === 'none') return;\n            childEl.removeAttr(attrName);\n        });\n        return true;\n    },\n\n    transformMaskRoot(_cellView, rootEl) {\n        const { MASK_ROOT_ATTRIBUTE_BLACKLIST } = this;\n        MASK_ROOT_ATTRIBUTE_BLACKLIST.forEach(attrName => {\n            rootEl.removeAttr(attrName);\n        });\n    },\n\n    getMaskShape(cellView, vel) {\n        const { options, MASK_REPLACE_TAGS } = this;\n        const { deep } = options;\n        const tagName = vel.tagName();\n        let maskRoot;\n        if (tagName === 'G') {\n            if (!deep) return null;\n            maskRoot = vel.clone();\n            forEachDescendant(maskRoot, maskChild => this.transformMaskChild(cellView, maskChild));\n        } else {\n            if (MASK_REPLACE_TAGS.includes(tagName)) return null;\n            maskRoot = vel.clone();\n        }\n        this.transformMaskRoot(cellView, maskRoot);\n        return maskRoot;\n    },\n\n    getMaskId() {\n        return `highlight-mask-${this.cid}`;\n    },\n\n    getMask(cellView, vNode) {\n\n        const { VISIBLE, INVISIBLE, options } = this;\n        const { padding, attrs } = options;\n\n        const strokeWidth = ('stroke-width' in attrs) ? attrs['stroke-width'] : 1;\n        const hasNodeFill = vNode.attr('fill') !== 'none';\n        let magnetStrokeWidth = parseFloat(vNode.attr('stroke-width'));\n        if (isNaN(magnetStrokeWidth)) magnetStrokeWidth = 1;\n        // stroke of the invisible shape\n        const minStrokeWidth = magnetStrokeWidth + padding * 2;\n        // stroke of the visible shape\n        const maxStrokeWidth = minStrokeWidth + strokeWidth * 2;\n        let maskEl = this.getMaskShape(cellView, vNode);\n        if (!maskEl) {\n            const nodeBBox = cellView.getNodeBoundingRect(vNode.node);\n            // Make sure the rect is visible\n            nodeBBox.inflate(nodeBBox.width ? 0 : 0.5, nodeBBox.height ? 0 : 0.5);\n            maskEl =  V('rect', nodeBBox.toJSON());\n        }\n        maskEl.attr(attrs);\n        return V('mask', {\n            'id': this.getMaskId()\n        }).append([\n            maskEl.clone().attr({\n                'fill': hasNodeFill ? VISIBLE : 'none',\n                'stroke': VISIBLE,\n                'stroke-width': maxStrokeWidth\n            }),\n            maskEl.clone().attr({\n                'fill': hasNodeFill ? INVISIBLE : 'none',\n                'stroke': INVISIBLE,\n                'stroke-width': minStrokeWidth\n            })\n        ]);\n    },\n\n    removeMask(paper) {\n        const maskNode = paper.svg.getElementById(this.getMaskId());\n        if (maskNode) {\n            paper.defs.removeChild(maskNode);\n        }\n    },\n\n    addMask(paper, maskEl) {\n        paper.defs.appendChild(maskEl.node);\n    },\n\n    highlight(cellView, node) {\n        const { options, vel } = this;\n        const { padding, attrs, maskClip = MASK_CLIP, layer } = options;\n        const color = ('stroke' in attrs) ? attrs['stroke'] : '#000000';\n        if (!layer && node === cellView.el) {\n            // If the highlighter is appended to the cellView\n            // and we measure the size of the cellView wrapping group\n            // it's necessary to remove the highlighter first\n            vel.remove();\n        }\n        const highlighterBBox = cellView.getNodeBoundingRect(node).inflate(padding + maskClip);\n        const highlightMatrix = this.getNodeMatrix(cellView, node);\n        const maskEl = this.getMask(cellView, V(node));\n        this.addMask(cellView.paper, maskEl);\n        vel.attr(highlighterBBox.toJSON());\n        vel.attr({\n            'transform': V.matrixToTransformString(highlightMatrix),\n            'mask': `url(#${maskEl.id})`,\n            'fill': color\n        });\n    },\n\n    unhighlight(cellView) {\n        this.removeMask(cellView.paper);\n    }\n\n});\n","import * as util from '../util/index.mjs';\nimport V from '../V/index.mjs';\nimport { HighlighterView } from '../dia/HighlighterView.mjs';\n\nexport const opacity = HighlighterView.extend({\n\n    UPDATABLE: false,\n    MOUNTABLE: false,\n\n    opacityClassName: util.addClassNamePrefix('highlight-opacity'),\n\n    highlight: function(_cellView, node) {\n        V(node).addClass(this.opacityClassName);\n    },\n\n    unhighlight: function(_cellView, node) {\n        V(node).removeClass(this.opacityClassName);\n    }\n\n});\n","import * as util from '../util/index.mjs';\nimport V from '../V/index.mjs';\nimport { HighlighterView } from '../dia/HighlighterView.mjs';\n\nconst className = util.addClassNamePrefix('highlighted');\n\nexport const addClass = HighlighterView.extend({\n\n    UPDATABLE: false,\n    MOUNTABLE: false,\n\n    options: {\n        className\n    },\n\n    highlight: function(_cellView, node) {\n        V(node).addClass(this.options.className);\n    },\n\n    unhighlight: function(_cellView, node) {\n        V(node).removeClass(this.options.className);\n    }\n\n}, {\n    // Backwards Compatibility\n    className\n});\n","import { Rect } from '../g/index.mjs';\nimport { HighlighterView } from '../dia/HighlighterView.mjs';\nimport {\n    normalizeSides,\n    isEqual,\n} from '../util/index.mjs';\nimport {\n    Positions,\n    getRectPoint,\n} from '../util/getRectPoint.mjs';\n\nconst Directions = {\n    ROW: 'row',\n    COLUMN: 'column'\n};\n\nexport const list = HighlighterView.extend({\n\n    tagName: 'g',\n    MOUNTABLE: true,\n    UPDATE_ATTRIBUTES: function() {\n        return [this.options.attribute];\n    },\n\n    _prevItems: null,\n\n    highlight(elementView, node) {\n        const element = elementView.model;\n        const { attribute, size = 20, gap = 5, direction = Directions.ROW } = this.options;\n        if (!attribute) throw new Error('List: attribute is required');\n        const normalizedSize = (typeof size === 'number') ? { width: size, height: size } : size;\n        const isRowDirection = (direction === Directions.ROW);\n        const itemWidth = isRowDirection ? normalizedSize.width : normalizedSize.height;\n        let items = element.get(attribute);\n        if (!Array.isArray(items)) items = [];\n        const prevItems = this._prevItems || [];\n        const comparison = items.map((item, index) => isEqual(prevItems[index], items[index]));\n        if (prevItems.length !== items.length || comparison.some(unchanged => !unchanged)) {\n            const prevEls = this.vel.children();\n            const itemsEls = items.map((item, index) => {\n                const prevEl = (index in prevEls) ? prevEls[index].node : null;\n                if (comparison[index]) return prevEl;\n                const itemEl = this.createListItem(item, normalizedSize, prevEl);\n                if (!itemEl) return null;\n                if (!(itemEl instanceof SVGElement)) throw new Error('List: item must be an SVGElement');\n                itemEl.dataset.index = index;\n                itemEl.dataset.attribute = attribute;\n                const offset = index * (itemWidth + gap);\n                itemEl.setAttribute('transform', (isRowDirection)\n                    ? `translate(${offset}, 0)`\n                    : `translate(0, ${offset})`\n                );\n                return itemEl;\n            });\n            this.vel.empty().append(itemsEls);\n            this._prevItems = items;\n        }\n        const itemsCount = items.length;\n        const length = (itemsCount === 0)\n            ? 0\n            : (itemsCount * itemWidth + (itemsCount - 1) * gap);\n        const listSize = (isRowDirection)\n            ? { width: length, height: normalizedSize.height }\n            : { width: normalizedSize.width, height: length };\n\n        this.position(element, listSize);\n    },\n\n    position(element, listSize) {\n        const { vel, options } = this;\n        const { margin = 5, position = 'top-left' } = options;\n        const { width, height } = element.size();\n        const { left, right, top, bottom } = normalizeSides(margin);\n        const bbox = new Rect(left, top, width - (left + right), height - (top + bottom));\n        let { x, y } = getRectPoint(bbox, position);\n        // x\n        switch (position) {\n            case Positions.CENTER:\n            case Positions.TOP:\n            case Positions.BOTTOM: {\n                x -= listSize.width / 2;\n                break;\n            }\n            case Positions.RIGHT:\n            case Positions.BOTTOM_RIGHT:\n            case Positions.TOP_RIGHT: {\n                x -= listSize.width;\n                break;\n            }\n        }\n        // y\n        switch (position) {\n            case Positions.CENTER:\n            case Positions.RIGHT:\n            case Positions.LEFT: {\n                y -= listSize.height / 2;\n                break;\n            }\n            case Positions.BOTTOM:\n            case Positions.BOTTOM_RIGHT:\n            case Positions.BOTTOM_LEFT: {\n                y -= listSize.height;\n                break;\n            }\n        }\n        vel.attr('transform', `translate(${x}, ${y})`);\n    }\n}, {\n    Directions,\n    Positions\n});\n","import { Line, Point } from '../g/index.mjs';\nimport { isPercentage } from '../util/index.mjs';\n\nfunction connectionRatio(view, _magnet, _refPoint, opt) {\n\n    var ratio = ('ratio' in opt) ? opt.ratio : 0.5;\n    return view.getPointAtRatio(ratio);\n}\n\nfunction connectionLength(view, _magnet, _refPoint, opt) {\n\n    var length = ('length' in opt) ? opt.length : 20;\n    return view.getPointAtLength(length);\n}\n\nfunction _connectionPerpendicular(view, _magnet, refPoint, opt) {\n\n    var OFFSET = 1e6;\n    var path = view.getConnection();\n    var segmentSubdivisions = view.getConnectionSubdivisions();\n    var verticalLine = new Line(refPoint.clone().offset(0, OFFSET), refPoint.clone().offset(0, -OFFSET));\n    var horizontalLine = new Line(refPoint.clone().offset(OFFSET, 0), refPoint.clone().offset(-OFFSET, 0));\n    var verticalIntersections = verticalLine.intersect(path, { segmentSubdivisions: segmentSubdivisions });\n    var horizontalIntersections = horizontalLine.intersect(path, { segmentSubdivisions: segmentSubdivisions });\n    var intersections = [];\n    if (verticalIntersections) Array.prototype.push.apply(intersections, verticalIntersections);\n    if (horizontalIntersections) Array.prototype.push.apply(intersections, horizontalIntersections);\n    if (intersections.length > 0) return refPoint.chooseClosest(intersections);\n    if ('fallbackAt' in opt) {\n        return getPointAtLink(view, opt.fallbackAt);\n    }\n    return connectionClosest(view, _magnet, refPoint, opt);\n}\n\nfunction _connectionClosest(view, _magnet, refPoint, _opt) {\n\n    var closestPoint = view.getClosestPoint(refPoint);\n    if (!closestPoint) return new Point();\n    return closestPoint;\n}\n\nexport function resolveRef(fn) {\n    return function(view, magnet, ref, opt) {\n        if (ref instanceof Element) {\n            var refView = this.paper.findView(ref);\n            var refPoint;\n            if (refView) {\n                if (refView.isNodeConnection(ref)) {\n                    var distance = ('fixedAt' in opt) ? opt.fixedAt : '50%';\n                    refPoint = getPointAtLink(refView, distance);\n                } else {\n                    refPoint = refView.getNodeBBox(ref).center();\n                }\n            } else {\n                // Something went wrong\n                refPoint = new Point();\n            }\n            return fn.call(this, view, magnet, refPoint, opt);\n        }\n        return fn.apply(this, arguments);\n    };\n}\n\nfunction getPointAtLink(view, value) {\n    var parsedValue = parseFloat(value);\n    if (isPercentage(value)) {\n        return view.getPointAtRatio(parsedValue / 100);\n    } else {\n        return view.getPointAtLength(parsedValue);\n    }\n}\n\n// joint.linkAnchors\nexport { connectionRatio, connectionLength };\nexport const connectionPerpendicular = resolveRef(_connectionPerpendicular);\nexport const connectionClosest = resolveRef(_connectionClosest);\n","import * as g from '../g/index.mjs';\nimport V from '../V/index.mjs';\nimport * as util from '../util/index.mjs';\n\nfunction offsetPoint(p1, p2, offset) {\n    if (util.isPlainObject(offset)) {\n        const { x, y } = offset;\n        if (isFinite(y)) {\n            const line =  new g.Line(p2, p1);\n            const { start, end } = line.parallel(y);\n            p2 = start;\n            p1 = end;\n        }\n        offset = x;\n    }\n    if (!isFinite(offset)) return p1;\n    var length = p1.distance(p2);\n    if (offset === 0 && length > 0) return p1;\n    return p1.move(p2, -Math.min(offset, length - 1));\n}\n\nfunction stroke(magnet) {\n\n    var stroke = magnet.getAttribute('stroke-width');\n    if (stroke === null) return 0;\n    return parseFloat(stroke) || 0;\n}\n\nfunction alignLine(line, type, offset = 0) {\n    let coordinate, a, b, direction;\n    const { start, end } = line;\n    switch (type) {\n        case 'left':\n            coordinate = 'x';\n            a = end;\n            b = start;\n            direction = -1;\n            break;\n        case 'right':\n            coordinate = 'x';\n            a = start;\n            b = end;\n            direction = 1;\n            break;\n        case 'top':\n            coordinate = 'y';\n            a = end;\n            b = start;\n            direction = -1;\n            break;\n        case 'bottom':\n            coordinate = 'y';\n            a = start;\n            b = end;\n            direction = 1;\n            break;\n        default:\n            return;\n    }\n    if (start[coordinate] < end[coordinate]) {\n        a[coordinate] = b[coordinate];\n    } else {\n        b[coordinate] = a[coordinate];\n    }\n    if (isFinite(offset)) {\n        a[coordinate] += direction * offset;\n        b[coordinate] += direction * offset;\n    }\n}\n\n// Connection Points\n\nfunction anchorConnectionPoint(line, _view, _magnet, opt) {\n    let { offset, alignOffset, align } = opt;\n    if (align) alignLine(line, align, alignOffset);\n    return offsetPoint(line.end, line.start, offset);\n}\n\nfunction bboxIntersection(line, view, magnet, opt) {\n\n    var bbox = view.getNodeBBox(magnet);\n    if (opt.stroke) bbox.inflate(stroke(magnet) / 2);\n    var intersections = line.intersect(bbox);\n    var cp = (intersections)\n        ? line.start.chooseClosest(intersections)\n        : line.end;\n    return offsetPoint(cp, line.start, opt.offset);\n}\n\nfunction rectangleIntersection(line, view, magnet, opt) {\n\n    var angle = view.model.angle();\n    if (angle === 0) {\n        return bboxIntersection(line, view, magnet, opt);\n    }\n\n    var bboxWORotation = view.getNodeUnrotatedBBox(magnet);\n    if (opt.stroke) bboxWORotation.inflate(stroke(magnet) / 2);\n    var center = bboxWORotation.center();\n    var lineWORotation = line.clone().rotate(center, angle);\n    var intersections = lineWORotation.setLength(1e6).intersect(bboxWORotation);\n    var cp = (intersections)\n        ? lineWORotation.start.chooseClosest(intersections).rotate(center, -angle)\n        : line.end;\n    return offsetPoint(cp, line.start, opt.offset);\n}\n\nfunction findShapeNode(magnet) {\n    if (!magnet) return null;\n    var node = magnet;\n    do {\n        var tagName = node.tagName;\n        if (typeof tagName !== 'string') return null;\n        tagName = tagName.toUpperCase();\n        if (tagName === 'G') {\n            node = node.firstElementChild;\n        } else if (tagName === 'TITLE') {\n            node = node.nextElementSibling;\n        } else break;\n    } while (node);\n    return node;\n}\n\nvar BNDR_SUBDIVISIONS = 'segmentSubdivisons';\nvar BNDR_SHAPE_BBOX = 'shapeBBox';\n\nfunction boundaryIntersection(line, view, magnet, opt) {\n\n    var node, intersection;\n    var selector = opt.selector;\n    var anchor = line.end;\n\n    if (typeof selector === 'string') {\n        node = view.findBySelector(selector)[0];\n    } else if (selector === false) {\n        node = magnet;\n    } else if (Array.isArray(selector)) {\n        node = util.getByPath(magnet, selector);\n    } else {\n        node = findShapeNode(magnet);\n    }\n\n    if (!V.isSVGGraphicsElement(node)) {\n        if (node === magnet || !V.isSVGGraphicsElement(magnet)) return anchor;\n        node = magnet;\n    }\n\n    var localShape = view.getNodeShape(node);\n    var magnetMatrix = view.getNodeMatrix(node);\n    var translateMatrix = view.getRootTranslateMatrix();\n    var rotateMatrix = view.getRootRotateMatrix();\n    var targetMatrix = translateMatrix.multiply(rotateMatrix).multiply(magnetMatrix);\n    var localMatrix = targetMatrix.inverse();\n    var localLine = V.transformLine(line, localMatrix);\n    var localRef = localLine.start.clone();\n    var data = view.getNodeData(node);\n\n    if (opt.insideout === false) {\n        if (!data[BNDR_SHAPE_BBOX]) data[BNDR_SHAPE_BBOX] = localShape.bbox();\n        var localBBox = data[BNDR_SHAPE_BBOX];\n        if (localBBox.containsPoint(localRef)) return anchor;\n    }\n\n    // Caching segment subdivisions for paths\n    var pathOpt;\n    if (localShape instanceof g.Path) {\n        var precision = opt.precision || 2;\n        if (!data[BNDR_SUBDIVISIONS]) data[BNDR_SUBDIVISIONS] = localShape.getSegmentSubdivisions({ precision: precision });\n        pathOpt = {\n            precision: precision,\n            segmentSubdivisions: data[BNDR_SUBDIVISIONS]\n        };\n    }\n\n    if (opt.extrapolate === true) localLine.setLength(1e6);\n\n    intersection = localLine.intersect(localShape, pathOpt);\n    if (intersection) {\n        // More than one intersection\n        if (V.isArray(intersection)) intersection = localRef.chooseClosest(intersection);\n    } else if (opt.sticky === true) {\n        // No intersection, find the closest point instead\n        if (localShape instanceof g.Rect) {\n            intersection = localShape.pointNearestToPoint(localRef);\n        } else if (localShape instanceof g.Ellipse) {\n            intersection = localShape.intersectionWithLineFromCenterToPoint(localRef);\n        } else {\n            intersection = localShape.closestPoint(localRef, pathOpt);\n        }\n    }\n\n    var cp = (intersection) ? V.transformPoint(intersection, targetMatrix) : anchor;\n    var cpOffset = opt.offset || 0;\n    if (opt.stroke) cpOffset += stroke(node) / 2;\n\n    return offsetPoint(cp, line.start, cpOffset);\n}\n\nexport const anchor = anchorConnectionPoint;\nexport const bbox = bboxIntersection;\nexport const rectangle = rectangleIntersection;\nexport const boundary = boundaryIntersection;\n","import * as util from '../util/index.mjs';\nimport { toRad } from '../g/index.mjs';\nimport { resolveRef } from '../linkAnchors/index.mjs';\n\nfunction bboxWrapper(method) {\n\n    return function(view, magnet, ref, opt) {\n\n        var rotate = !!opt.rotate;\n        var bbox = (rotate) ? view.getNodeUnrotatedBBox(magnet) : view.getNodeBBox(magnet);\n        var anchor = bbox[method]();\n\n        var dx = opt.dx;\n        if (dx) {\n            var dxPercentage = util.isPercentage(dx);\n            dx = parseFloat(dx);\n            if (isFinite(dx)) {\n                if (dxPercentage) {\n                    dx /= 100;\n                    dx *= bbox.width;\n                }\n                anchor.x += dx;\n            }\n        }\n\n        var dy = opt.dy;\n        if (dy) {\n            var dyPercentage = util.isPercentage(dy);\n            dy = parseFloat(dy);\n            if (isFinite(dy)) {\n                if (dyPercentage) {\n                    dy /= 100;\n                    dy *= bbox.height;\n                }\n                anchor.y += dy;\n            }\n        }\n\n        return (rotate) ? anchor.rotate(view.model.getBBox().center(), -view.model.angle()) : anchor;\n    };\n}\n\nfunction _perpendicular(view, magnet, refPoint, opt) {\n\n    var angle = view.model.angle();\n    var bbox = view.getNodeBBox(magnet);\n    var anchor = bbox.center();\n    var topLeft = bbox.origin();\n    var bottomRight = bbox.corner();\n\n    var padding = opt.padding;\n    if (!isFinite(padding)) padding = 0;\n\n    if ((topLeft.y + padding) <= refPoint.y && refPoint.y <= (bottomRight.y - padding)) {\n        var dy = (refPoint.y - anchor.y);\n        anchor.x += (angle === 0 || angle === 180) ? 0 : dy * 1 / Math.tan(toRad(angle));\n        anchor.y += dy;\n    } else if ((topLeft.x + padding) <= refPoint.x && refPoint.x <= (bottomRight.x - padding)) {\n        var dx = (refPoint.x - anchor.x);\n        anchor.y += (angle === 90 || angle === 270) ? 0 : dx * Math.tan(toRad(angle));\n        anchor.x += dx;\n    }\n\n    return anchor;\n}\n\nfunction _midSide(view, magnet, refPoint, opt) {\n\n    var rotate = !!opt.rotate;\n    var bbox, angle, center;\n    if (rotate) {\n        bbox = view.getNodeUnrotatedBBox(magnet);\n        center = view.model.getBBox().center();\n        angle = view.model.angle();\n    } else {\n        bbox = view.getNodeBBox(magnet);\n    }\n\n    var padding = opt.padding;\n    if (isFinite(padding)) bbox.inflate(padding);\n\n    if (rotate) refPoint.rotate(center, angle);\n\n    var side = bbox.sideNearestToPoint(refPoint);\n    var anchor;\n    switch (side) {\n        case 'left':\n            anchor = bbox.leftMiddle();\n            break;\n        case 'right':\n            anchor = bbox.rightMiddle();\n            break;\n        case 'top':\n            anchor = bbox.topMiddle();\n            break;\n        case 'bottom':\n            anchor = bbox.bottomMiddle();\n            break;\n    }\n\n    return (rotate) ? anchor.rotate(center, -angle) : anchor;\n}\n\n// Can find anchor from model, when there is no selector or the link end\n// is connected to a port\nfunction _modelCenter(view, _magnet, _refPoint, opt, endType) {\n    return view.model.getPointFromConnectedLink(this.model, endType).offset(opt.dx, opt.dy);\n}\n\n//joint.anchors\nexport const center = bboxWrapper('center');\nexport const top = bboxWrapper('topMiddle');\nexport const bottom = bboxWrapper('bottomMiddle');\nexport const left = bboxWrapper('leftMiddle');\nexport const right = bboxWrapper('rightMiddle');\nexport const topLeft = bboxWrapper('origin');\nexport const topRight = bboxWrapper('topRight');\nexport const bottomLeft = bboxWrapper('bottomLeft');\nexport const bottomRight = bboxWrapper('corner');\nexport const perpendicular = resolveRef(_perpendicular);\nexport const midSide = resolveRef(_midSide);\nexport const modelCenter = _modelCenter;\n\n","import V from '../V/index.mjs';\nimport {\n    isNumber,\n    assign,\n    nextFrame,\n    isObject,\n    cancelFrame,\n    defaults,\n    defaultsDeep,\n    addClassNamePrefix,\n    normalizeSides,\n    isFunction,\n    isPlainObject,\n    getByPath,\n    sortElements,\n    isString,\n    guid,\n    normalizeEvent,\n    normalizeWheel,\n    cap,\n    debounce,\n    omit,\n    result,\n    merge,\n    camelCase,\n    cloneDeep,\n    invoke,\n    hashCode,\n    filter as _filter,\n    parseDOMJSON,\n    toArray,\n    has\n} from '../util/index.mjs';\nimport { Rect, Point, toRad } from '../g/index.mjs';\nimport { View, views } from '../mvc/index.mjs';\nimport { CellView } from './CellView.mjs';\nimport { ElementView } from './ElementView.mjs';\nimport { LinkView } from './LinkView.mjs';\nimport { Link } from './Link.mjs';\nimport { Cell } from './Cell.mjs';\nimport { Graph } from './Graph.mjs';\nimport { LayersNames, PaperLayer } from './PaperLayer.mjs';\nimport * as highlighters from '../highlighters/index.mjs';\nimport * as linkAnchors from '../linkAnchors/index.mjs';\nimport * as connectionPoints from '../connectionPoints/index.mjs';\nimport * as anchors from '../anchors/index.mjs';\n\nimport $ from 'jquery';\nimport Backbone from 'backbone';\n\nconst sortingTypes = {\n    NONE: 'sorting-none',\n    APPROX: 'sorting-approximate',\n    EXACT: 'sorting-exact'\n};\n\nconst WHEEL_CAP = 50;\nconst WHEEL_WAIT_MS = 20;\nconst MOUNT_BATCH_SIZE = 1000;\nconst UPDATE_BATCH_SIZE = Infinity;\nconst MIN_PRIORITY = 9007199254740991; // Number.MAX_SAFE_INTEGER\n\nconst HighlightingTypes = CellView.Highlighting;\n\nconst defaultHighlighting = {\n    [HighlightingTypes.DEFAULT]: {\n        name: 'stroke',\n        options: {\n            padding: 3\n        }\n    },\n    [HighlightingTypes.MAGNET_AVAILABILITY]: {\n        name: 'addClass',\n        options: {\n            className: 'available-magnet'\n        }\n    },\n    [HighlightingTypes.ELEMENT_AVAILABILITY]: {\n        name: 'addClass',\n        options: {\n            className: 'available-cell'\n        }\n    }\n};\n\nconst defaultLayers = [{\n    name: LayersNames.BACK,\n}, {\n    name: LayersNames.CELLS,\n}, {\n    name: LayersNames.LABELS,\n}, {\n    name: LayersNames.FRONT\n}, {\n    name: LayersNames.TOOLS\n}];\n\nexport const Paper = View.extend({\n\n    className: 'paper',\n\n    options: {\n\n        width: 800,\n        height: 600,\n        origin: { x: 0, y: 0 }, // x,y coordinates in top-left corner\n        gridSize: 1,\n        // Whether or not to draw the grid lines on the paper's DOM element.\n        // e.g drawGrid: true, drawGrid: { color: 'red', thickness: 2 }\n        drawGrid: false,\n        // If not set, the size of the visual grid is the same as the `gridSize`.\n        drawGridSize: null,\n\n        // Whether or not to draw the background on the paper's DOM element.\n        // e.g. background: { color: 'lightblue', image: '/paper-background.png', repeat: 'flip-xy' }\n        background: false,\n\n        perpendicularLinks: false,\n        elementView: ElementView,\n        linkView: LinkView,\n        snapLabels: false, // false, true\n        snapLinks: false, // false, true, { radius: value }\n        snapLinksSelf: false, // false, true, { radius: value }\n\n        // Should the link labels be rendered into its own layer?\n        // `false` - the labels are part of the links\n        // `true` - the labels are appended to LayersName.LABELS\n        // [LayersName] - the labels are appended to the layer specified\n        labelsLayer: false,\n\n        // When set to FALSE, an element may not have more than 1 link with the same source and target element.\n        multiLinks: true,\n\n        // For adding custom guard logic.\n        guard: function(evt, view) {\n\n            // FALSE means the event isn't guarded.\n            return false;\n        },\n\n        highlighting: defaultHighlighting,\n\n        // Prevent the default context menu from being displayed.\n        preventContextMenu: true,\n\n        // Prevent the default action for blank:pointer<action>.\n        preventDefaultBlankAction: true,\n\n        // Prevent the default action for cell:pointer<action>.\n        preventDefaultViewAction: true,\n\n        // Restrict the translation of elements by given bounding box.\n        // Option accepts a boolean:\n        //  true - the translation is restricted to the paper area\n        //  false - no restrictions\n        // A method:\n        // restrictTranslate: function(elementView) {\n        //     var parentId = elementView.model.get('parent');\n        //     return parentId && this.model.getCell(parentId).getBBox();\n        // },\n        // Or a bounding box:\n        // restrictTranslate: { x: 10, y: 10, width: 790, height: 590 }\n        restrictTranslate: false,\n\n        // Marks all available magnets with 'available-magnet' class name and all available cells with\n        // 'available-cell' class name. Marks them when dragging a link is started and unmark\n        // when the dragging is stopped.\n        markAvailable: false,\n\n        // Defines what link model is added to the graph after an user clicks on an active magnet.\n        // Value could be the Backbone.model or a function returning the Backbone.model\n        // defaultLink: function(elementView, magnet) { return condition ? new customLink1() : new customLink2() }\n        defaultLink: new Link,\n\n        // A connector that is used by links with no connector defined on the model.\n        // e.g. { name: 'rounded', args: { radius: 5 }} or a function\n        defaultConnector: { name: 'normal' },\n\n        // A router that is used by links with no router defined on the model.\n        // e.g. { name: 'oneSide', args: { padding: 10 }} or a function\n        defaultRouter: { name: 'normal' },\n\n        defaultAnchor: { name: 'center' },\n\n        defaultLinkAnchor: { name: 'connectionRatio' },\n\n        defaultConnectionPoint: { name: 'bbox' },\n\n        /* CONNECTING */\n\n        connectionStrategy: null,\n\n        // Check whether to add a new link to the graph when user clicks on an a magnet.\n        validateMagnet: function(_cellView, magnet, _evt) {\n            return magnet.getAttribute('magnet') !== 'passive';\n        },\n\n        // Check whether to allow or disallow the link connection while an arrowhead end (source/target)\n        // being changed.\n        validateConnection: function(cellViewS, _magnetS, cellViewT, _magnetT, end, _linkView) {\n            return (end === 'target' ? cellViewT : cellViewS) instanceof ElementView;\n        },\n\n        /* EMBEDDING */\n\n        // Enables embedding. Re-parent the dragged element with elements under it and makes sure that\n        // all links and elements are visible taken the level of embedding into account.\n        embeddingMode: false,\n\n        // Check whether to allow or disallow the element embedding while an element being translated.\n        validateEmbedding: function(childView, parentView) {\n            // by default all elements can be in relation child-parent\n            return true;\n        },\n\n        // Check whether to allow or disallow an embedded element to be unembedded / to become a root.\n        validateUnembedding: function(childView) {\n            // by default all elements can become roots\n            return true;\n        },\n\n        // Determines the way how a cell finds a suitable parent when it's dragged over the paper.\n        // The cell with the highest z-index (visually on the top) will be chosen.\n        findParentBy: 'bbox', // 'bbox'|'center'|'origin'|'corner'|'topRight'|'bottomLeft'\n\n        // If enabled only the element on the very front is taken into account for the embedding.\n        // If disabled the elements under the dragged view are tested one by one\n        // (from front to back) until a valid parent found.\n        frontParentOnly: true,\n\n        // Interactive flags. See online docs for the complete list of interactive flags.\n        interactive: {\n            labelMove: false\n        },\n\n        // When set to true the links can be pinned to the paper.\n        // i.e. link source/target can be a point e.g. link.get('source') ==> { x: 100, y: 100 };\n        linkPinning: true,\n\n        // Custom validation after an interaction with a link ends.\n        // Recognizes a function. If `false` is returned, the link is disallowed (removed or reverted)\n        // (linkView, paper) => boolean\n        allowLink: null,\n\n        // Allowed number of mousemove events after which the pointerclick event will be still triggered.\n        clickThreshold: 0,\n\n        // Number of required mousemove events before the first pointermove event will be triggered.\n        moveThreshold: 0,\n\n        // Number of required mousemove events before a link is created out of the magnet.\n        // Or string `onleave` so the link is created when the pointer leaves the magnet\n        magnetThreshold: 0,\n\n        // Rendering Options\n\n        sorting: sortingTypes.EXACT,\n\n        frozen: false,\n\n        autoFreeze: false,\n\n        // no docs yet\n        onViewUpdate: function(view, flag, priority, opt, paper) {\n            // Do not update connected links when:\n            // 1. the view was just inserted (added to the graph and rendered)\n            // 2. the view was just mounted (added back to the paper by viewport function)\n            // 3. the change was marked as `isolate`.\n            // 4. the view model was just removed from the graph\n            if ((flag & (view.FLAG_INSERT | view.FLAG_REMOVE)) || opt.mounting || opt.isolate) return;\n            paper.requestConnectedLinksUpdate(view, priority, opt);\n        },\n\n        // no docs yet\n        onViewPostponed: function(view, flag, paper) {\n            return paper.forcePostponedViewUpdate(view, flag);\n        },\n\n        beforeRender: null, // function(opt, paper) { },\n\n        afterRender: null, // function(stats, opt, paper) {\n\n        viewport: null,\n\n        // Default namespaces\n\n        cellViewNamespace: null,\n\n        routerNamespace: null,\n\n        connectorNamespace: null,\n\n        highlighterNamespace: highlighters,\n\n        anchorNamespace: anchors,\n\n        linkAnchorNamespace: linkAnchors,\n\n        connectionPointNamespace: connectionPoints,\n\n        overflow: false\n    },\n\n    events: {\n        'dblclick': 'pointerdblclick',\n        'dbltap': 'pointerdblclick',\n        'contextmenu': 'contextmenu',\n        'mousedown': 'pointerdown',\n        'touchstart': 'pointerdown',\n        'mouseover': 'mouseover',\n        'mouseout': 'mouseout',\n        'mouseenter': 'mouseenter',\n        'mouseleave': 'mouseleave',\n        'wheel': 'mousewheel',\n        'mouseenter .joint-cell': 'mouseenter',\n        'mouseleave .joint-cell': 'mouseleave',\n        'mouseenter .joint-tools': 'mouseenter',\n        'mouseleave .joint-tools': 'mouseleave',\n        'dblclick .joint-cell [magnet]': 'magnetpointerdblclick',\n        'contextmenu .joint-cell [magnet]': 'magnetcontextmenu',\n        'mousedown .joint-link .label': 'onlabel', // interaction with link label\n        'touchstart .joint-link .label': 'onlabel',\n        'dragstart .joint-cell image': 'onImageDragStart' // firefox fix\n    },\n\n    documentEvents: {\n        'mousemove': 'pointermove',\n        'touchmove': 'pointermove',\n        'mouseup': 'pointerup',\n        'touchend': 'pointerup',\n        'touchcancel': 'pointerup'\n    },\n\n    svg: null,\n    viewport: null,\n    defs: null,\n    tools: null,\n    $background: null,\n    layers: null,\n    $grid: null,\n    $document: null,\n\n    // For storing the current transformation matrix (CTM) of the paper's viewport.\n    _viewportMatrix: null,\n    // For verifying whether the CTM is up-to-date. The viewport transform attribute\n    // could have been manipulated directly.\n    _viewportTransformString: null,\n    // Updates data (priorities, unmounted views etc.)\n    _updates: null,\n    // Paper Layers\n    _layers: null,\n\n    SORT_DELAYING_BATCHES: ['add', 'to-front', 'to-back'],\n    UPDATE_DELAYING_BATCHES: ['translate'],\n    // If you interact with these elements,\n    // the default interaction such as `element move` is prevented.\n    FORM_CONTROL_TAG_NAMES: ['TEXTAREA', 'INPUT', 'BUTTON', 'SELECT', 'OPTION'] ,\n    // If you interact with these elements, the events are not propagated to the paper\n    // i.e. paper events such as `element:pointerdown` are not triggered.\n    GUARDED_TAG_NAMES: [\n        // Guard <select> for consistency. When you click on it:\n        // Chrome: triggers `pointerdown`, `pointerup`, `pointerclick` to open\n        // Firefox: triggers `pointerdown` on open, `pointerup` (and `pointerclick` only if you haven't moved).\n        //          on close. However, if you open and then close by clicking elsewhere on the page,\n        //           no other event is triggered.\n        // Safari: when you open it, it triggers `pointerdown`. That's it.\n        'SELECT',\n    ],\n    MIN_SCALE: 1e-6,\n\n    init: function() {\n\n        const { options, el } = this;\n        if (!options.cellViewNamespace) {\n            /* eslint-disable no-undef */\n            options.cellViewNamespace = typeof joint !== 'undefined' && has(joint, 'shapes') ? joint.shapes : null;\n            /* eslint-enable no-undef */\n        }\n\n        const model = this.model = options.model || new Graph;\n\n        // Layers (SVGGroups)\n        this._layers = {};\n\n        this.setGrid(options.drawGrid);\n        this.cloneOptions();\n        this.render();\n        this._setDimensions();\n        this.startListening();\n\n        // Hash of all cell views.\n        this._views = {};\n\n        // Mouse wheel events buffer\n        this._mw_evt_buffer = {\n            event: null,\n            deltas: [],\n        };\n\n        // Reference to the paper owner document\n        this.$document = $(el.ownerDocument);\n        // Render existing cells in the graph\n        this.resetViews(model.attributes.cells.models);\n        // Start the Rendering Loop\n        if (!this.isFrozen() && this.isAsync()) this.updateViewsAsync();\n    },\n\n    _resetUpdates: function() {\n        return this._updates = {\n            id: null,\n            priorities: [{}, {}, {}],\n            unmountedCids: [],\n            mountedCids: [],\n            unmounted: {},\n            mounted: {},\n            count: 0,\n            keyFrozen: false,\n            freezeKey: null,\n            sort: false,\n            disabled: false,\n            idle: false\n        };\n    },\n\n    startListening: function() {\n        var model = this.model;\n        this.listenTo(model, 'add', this.onCellAdded)\n            .listenTo(model, 'remove', this.onCellRemoved)\n            .listenTo(model, 'change', this.onCellChange)\n            .listenTo(model, 'reset', this.onGraphReset)\n            .listenTo(model, 'sort', this.onGraphSort)\n            .listenTo(model, 'batch:stop', this.onGraphBatchStop);\n        this.on('cell:highlight', this.onCellHighlight)\n            .on('cell:unhighlight', this.onCellUnhighlight)\n            .on('scale translate', this.update);\n    },\n\n    onCellAdded: function(cell, _, opt) {\n        var position = opt.position;\n        if (this.isAsync() || !isNumber(position)) {\n            this.renderView(cell, opt);\n        } else {\n            if (opt.maxPosition === position) this.freeze({ key: 'addCells' });\n            this.renderView(cell, opt);\n            if (position === 0) this.unfreeze({ key: 'addCells' });\n        }\n    },\n\n    onCellRemoved: function(cell, _, opt) {\n        const view = this.findViewByModel(cell);\n        if (view) this.requestViewUpdate(view, view.FLAG_REMOVE, view.UPDATE_PRIORITY, opt);\n    },\n\n    onCellChange: function(cell, opt) {\n        if (cell === this.model.attributes.cells) return;\n        if (cell.hasChanged('z') && this.options.sorting === sortingTypes.APPROX) {\n            const view = this.findViewByModel(cell);\n            if (view) this.requestViewUpdate(view, view.FLAG_INSERT, view.UPDATE_PRIORITY, opt);\n        }\n    },\n\n    onGraphReset: function(collection, opt) {\n        this.resetLayers();\n        this.resetViews(collection.models, opt);\n    },\n\n    onGraphSort: function() {\n        if (this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)) return;\n        this.sortViews();\n    },\n\n    onGraphBatchStop: function(data) {\n        if (this.isFrozen()) return;\n        var name = data && data.batchName;\n        var graph = this.model;\n        if (!this.isAsync()) {\n            var updateDelayingBatches = this.UPDATE_DELAYING_BATCHES;\n            if (updateDelayingBatches.includes(name) && !graph.hasActiveBatch(updateDelayingBatches)) {\n                this.updateViews(data);\n            }\n        }\n        var sortDelayingBatches = this.SORT_DELAYING_BATCHES;\n        if (sortDelayingBatches.includes(name) && !graph.hasActiveBatch(sortDelayingBatches)) {\n            this.sortViews();\n        }\n    },\n\n    cloneOptions: function() {\n\n        const { options } = this;\n        const {\n            defaultConnector,\n            defaultRouter,\n            defaultConnectionPoint,\n            defaultAnchor,\n            defaultLinkAnchor,\n            origin,\n            highlighting,\n            cellViewNamespace,\n            interactive\n        } = options;\n\n        // Default cellView namespace for ES5\n        /* eslint-disable no-undef */\n        if (!cellViewNamespace && typeof joint !== 'undefined' && has(joint, 'shapes')) {\n            options.cellViewNamespace = joint.shapes;\n        }\n        /* eslint-enable no-undef */\n\n        // Here if a function was provided, we can not clone it, as this would result in loosing the function.\n        // If the default is used, the cloning is necessary in order to prevent modifying the options on prototype.\n        if (!isFunction(defaultConnector)) {\n            options.defaultConnector = cloneDeep(defaultConnector);\n        }\n        if (!isFunction(defaultRouter)) {\n            options.defaultRouter = cloneDeep(defaultRouter);\n        }\n        if (!isFunction(defaultConnectionPoint)) {\n            options.defaultConnectionPoint = cloneDeep(defaultConnectionPoint);\n        }\n        if (!isFunction(defaultAnchor)) {\n            options.defaultAnchor = cloneDeep(defaultAnchor);\n        }\n        if (!isFunction(defaultLinkAnchor)) {\n            options.defaultLinkAnchor = cloneDeep(defaultLinkAnchor);\n        }\n        if (isPlainObject(interactive)) {\n            options.interactive = assign({}, interactive);\n        }\n        if (isPlainObject(highlighting)) {\n            // Return the default highlighting options into the user specified options.\n            options.highlighting = defaultsDeep({}, highlighting, defaultHighlighting);\n        }\n        options.origin = assign({}, origin);\n    },\n\n    children: function() {\n        var ns = V.namespace;\n        return [{\n            namespaceURI: ns.xhtml,\n            tagName: 'div',\n            className: addClassNamePrefix('paper-background'),\n            selector: 'background'\n        }, {\n            namespaceURI: ns.xhtml,\n            tagName: 'div',\n            className: addClassNamePrefix('paper-grid'),\n            selector: 'grid'\n        }, {\n            namespaceURI: ns.svg,\n            tagName: 'svg',\n            attributes: {\n                'width': '100%',\n                'height': '100%',\n                'xmlns:xlink': ns.xlink\n            },\n            selector: 'svg',\n            children: [{\n                // Append `<defs>` element to the SVG document. This is useful for filters and gradients.\n                // It's desired to have the defs defined before the viewport (e.g. to make a PDF document pick up defs properly).\n                tagName: 'defs',\n                selector: 'defs'\n            }, {\n                tagName: 'g',\n                className: addClassNamePrefix('layers'),\n                selector: 'layers'\n            }]\n        }];\n    },\n\n    hasLayerView(layerName) {\n        return  (layerName in this._layers);\n    },\n\n    getLayerView(layerName) {\n        const { _layers } = this;\n        if (layerName in _layers) return _layers[layerName];\n        throw new Error(`dia.Paper: Unknown layer \"${layerName}\"`);\n    },\n\n    getLayerNode(layerName) {\n        return this.getLayerView(layerName).el;\n    },\n\n    render: function() {\n\n        this.renderChildren();\n        const { childNodes, options } = this;\n        const { svg, defs, layers, background, grid } = childNodes;\n\n        svg.style.overflow = options.overflow ? 'visible' : 'hidden';\n\n        this.svg = svg;\n        this.defs = defs;\n        this.layers = layers;\n        this.$background = $(background);\n        this.$grid = $(grid);\n\n        this.renderLayers();\n\n        V.ensureId(svg);\n\n        if (options.background) {\n            this.drawBackground(options.background);\n        }\n\n        if (options.drawGrid) {\n            this.drawGrid();\n        }\n\n        return this;\n    },\n\n    renderLayers: function(layers = defaultLayers) {\n        this.removeLayers();\n        // TODO: Layers to be read from the graph `layers` attribute\n        layers.forEach(({ name, sorted }) => {\n            const layerView = new PaperLayer({ name });\n            this.layers.appendChild(layerView.el);\n            this._layers[name] = layerView;\n        });\n        // Throws an exception if doesn't exist\n        const cellsLayerView = this.getLayerView(LayersNames.CELLS);\n        const toolsLayerView = this.getLayerView(LayersNames.TOOLS);\n        const labelsLayerView = this.getLayerView(LayersNames.LABELS);\n        // backwards compatibility\n        this.tools = toolsLayerView.el;\n        this.cells = this.viewport = cellsLayerView.el;\n        // user-select: none;\n        cellsLayerView.vel.addClass(addClassNamePrefix('viewport'));\n        labelsLayerView.vel.addClass(addClassNamePrefix('viewport'));\n    },\n\n    removeLayers: function() {\n        const { _layers } = this;\n        Object.keys(_layers).forEach(name => {\n            _layers[name].remove();\n            delete _layers[name];\n        });\n    },\n\n    resetLayers: function() {\n        const { _layers } = this;\n        Object.keys(_layers).forEach(name => {\n            _layers[name].removePivots();\n        });\n    },\n\n    update: function() {\n\n        if (this.options.drawGrid) {\n            this.drawGrid();\n        }\n\n        if (this._background) {\n            this.updateBackgroundImage(this._background);\n        }\n\n        return this;\n    },\n\n    matrix: function(ctm) {\n\n        var viewport = this.layers;\n\n        // Getter:\n        if (ctm === undefined) {\n\n            var transformString = viewport.getAttribute('transform');\n\n            if ((this._viewportTransformString || null) === transformString) {\n                // It's ok to return the cached matrix. The transform attribute has not changed since\n                // the matrix was stored.\n                ctm = this._viewportMatrix;\n            } else {\n                // The viewport transform attribute has changed. Measure the matrix and cache again.\n                ctm = viewport.getCTM();\n                this._viewportMatrix = ctm;\n                this._viewportTransformString = transformString;\n            }\n\n            // Clone the cached current transformation matrix.\n            // If no matrix previously stored the identity matrix is returned.\n            return V.createSVGMatrix(ctm);\n        }\n\n        // Setter:\n        ctm = V.createSVGMatrix(ctm);\n        var ctmString = V.matrixToTransformString(ctm);\n        viewport.setAttribute('transform', ctmString);\n\n        this._viewportMatrix = ctm;\n        this._viewportTransformString = viewport.getAttribute('transform');\n\n        return this;\n    },\n\n    clientMatrix: function() {\n\n        return V.createSVGMatrix(this.cells.getScreenCTM());\n    },\n\n    requestConnectedLinksUpdate: function(view, priority, opt) {\n        if (view instanceof CellView) {\n            var model = view.model;\n            var links = this.model.getConnectedLinks(model);\n            for (var j = 0, n = links.length; j < n; j++) {\n                var link = links[j];\n                var linkView = this.findViewByModel(link);\n                if (!linkView) continue;\n                var flagLabels = ['UPDATE'];\n                if (link.getTargetCell() === model) flagLabels.push('TARGET');\n                if (link.getSourceCell() === model) flagLabels.push('SOURCE');\n                var nextPriority = Math.max(priority + 1, linkView.UPDATE_PRIORITY);\n                this.scheduleViewUpdate(linkView, linkView.getFlag(flagLabels), nextPriority, opt);\n            }\n        }\n    },\n\n    forcePostponedViewUpdate: function(view, flag) {\n        if (!view || !(view instanceof CellView)) return false;\n        var model = view.model;\n        if (model.isElement()) return false;\n        if ((flag & view.getFlag(['SOURCE', 'TARGET'])) === 0) {\n            var dumpOptions = { silent: true };\n            // LinkView is waiting for the target or the source cellView to be rendered\n            // This can happen when the cells are not in the viewport.\n            var sourceFlag = 0;\n            var sourceView = this.findViewByModel(model.getSourceCell());\n            if (sourceView && !this.isViewMounted(sourceView)) {\n                sourceFlag = this.dumpView(sourceView, dumpOptions);\n                view.updateEndMagnet('source');\n            }\n            var targetFlag = 0;\n            var targetView = this.findViewByModel(model.getTargetCell());\n            if (targetView && !this.isViewMounted(targetView)) {\n                targetFlag = this.dumpView(targetView, dumpOptions);\n                view.updateEndMagnet('target');\n            }\n            if (sourceFlag === 0 && targetFlag === 0) {\n                // If leftover flag is 0, all view updates were done.\n                return !this.dumpView(view, dumpOptions);\n            }\n        }\n        return false;\n    },\n\n    requestViewUpdate: function(view, flag, priority, opt) {\n        opt || (opt = {});\n        this.scheduleViewUpdate(view, flag, priority, opt);\n        var isAsync = this.isAsync();\n        if (this.isFrozen() || (isAsync && opt.async !== false)) return;\n        if (this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)) return;\n        var stats = this.updateViews(opt);\n        if (isAsync) this.notifyAfterRender(stats, opt);\n    },\n\n    scheduleViewUpdate: function(view, type, priority, opt) {\n        const { _updates: updates, options } = this;\n        if (updates.idle) {\n            if (options.autoFreeze) {\n                updates.idle = false;\n                this.unfreeze();\n            }\n        }\n        const { FLAG_REMOVE, FLAG_INSERT, UPDATE_PRIORITY, cid } = view;\n        let priorityUpdates = updates.priorities[priority];\n        if (!priorityUpdates) priorityUpdates = updates.priorities[priority] = {};\n        // Move higher priority updates to this priority\n        if (priority > UPDATE_PRIORITY) {\n            // Not the default priority for this view. It's most likely a link view\n            // connected to another link view, which triggered the update.\n            // TODO: If there is an update scheduled with a lower priority already, we should\n            // change the requested priority to the lowest one. Does not seem to be critical\n            // right now, as it \"only\" results in multiple updates on the same view.\n            for (let i = priority - 1; i >= UPDATE_PRIORITY; i--) {\n                const prevPriorityUpdates = updates.priorities[i];\n                if (!prevPriorityUpdates || !(cid in prevPriorityUpdates)) continue;\n                priorityUpdates[cid] |= prevPriorityUpdates[cid];\n                delete prevPriorityUpdates[cid];\n            }\n        }\n        let currentType = priorityUpdates[cid] || 0;\n        // Prevent cycling\n        if ((currentType & type) === type) return;\n        if (!currentType) updates.count++;\n        if (type & FLAG_REMOVE && currentType & FLAG_INSERT) {\n            // When a view is removed we need to remove the insert flag as this is a reinsert\n            priorityUpdates[cid] ^= FLAG_INSERT;\n        } else if (type & FLAG_INSERT && currentType & FLAG_REMOVE) {\n            // When a view is added we need to remove the remove flag as this is view was previously removed\n            priorityUpdates[cid] ^= FLAG_REMOVE;\n        }\n        priorityUpdates[cid] |= type;\n        const viewUpdateFn = options.onViewUpdate;\n        if (typeof viewUpdateFn === 'function') viewUpdateFn.call(this, view, type, priority, opt || {}, this);\n    },\n\n    dumpViewUpdate: function(view) {\n        if (!view) return 0;\n        var updates = this._updates;\n        var cid = view.cid;\n        var priorityUpdates = updates.priorities[view.UPDATE_PRIORITY];\n        var flag = this.registerMountedView(view) | priorityUpdates[cid];\n        delete priorityUpdates[cid];\n        return flag;\n    },\n\n    dumpView: function(view, opt = {}) {\n        const flag = this.dumpViewUpdate(view);\n        if (!flag) return 0;\n        const shouldNotify = !opt.silent;\n        if (shouldNotify) this.notifyBeforeRender(opt);\n        const leftover = this.updateView(view, flag, opt);\n        if (shouldNotify) {\n            const stats = { updated: 1, priority: view.UPDATE_PRIORITY };\n            this.notifyAfterRender(stats, opt);\n        }\n        return leftover;\n    },\n\n    updateView: function(view, flag, opt) {\n        if (!view) return 0;\n        const { FLAG_REMOVE, FLAG_INSERT, FLAG_INIT, model } = view;\n        if (view instanceof CellView) {\n            if (flag & FLAG_REMOVE) {\n                this.removeView(model);\n                return 0;\n            }\n            if (flag & FLAG_INSERT) {\n                const isInitialInsert = !!(flag & FLAG_INIT);\n                if (isInitialInsert) {\n                    flag ^= FLAG_INIT;\n                }\n                this.insertView(view, isInitialInsert);\n                flag ^= FLAG_INSERT;\n            }\n        }\n        if (!flag) return 0;\n        return view.confirmUpdate(flag, opt || {});\n    },\n\n    requireView: function(model, opt) {\n        var view = this.findViewByModel(model);\n        if (!view) return null;\n        this.dumpView(view, opt);\n        return view;\n    },\n\n    registerUnmountedView: function(view) {\n        var cid = view.cid;\n        var updates = this._updates;\n        if (cid in updates.unmounted) return 0;\n        var flag = updates.unmounted[cid] |= view.FLAG_INSERT;\n        updates.unmountedCids.push(cid);\n        delete updates.mounted[cid];\n        return flag;\n    },\n\n    registerMountedView: function(view) {\n        var cid = view.cid;\n        var updates = this._updates;\n        if (cid in updates.mounted) return 0;\n        updates.mounted[cid] = true;\n        updates.mountedCids.push(cid);\n        var flag = updates.unmounted[cid] || 0;\n        delete updates.unmounted[cid];\n        return flag;\n    },\n\n    isViewMounted: function(view) {\n        if (!view) return false;\n        var cid = view.cid;\n        var updates = this._updates;\n        return (cid in updates.mounted);\n    },\n\n    dumpViews: function(opt) {\n        var passingOpt = defaults({}, opt, { viewport: null });\n        this.checkViewport(passingOpt);\n        this.updateViews(passingOpt);\n    },\n\n    // Synchronous views update\n    updateViews: function(opt) {\n        this.notifyBeforeRender(opt);\n        let batchStats;\n        let updateCount = 0;\n        let batchCount = 0;\n        let priority = MIN_PRIORITY;\n        do {\n            batchCount++;\n            batchStats = this.updateViewsBatch(opt);\n            updateCount += batchStats.updated;\n            priority = Math.min(batchStats.priority, priority);\n        } while (!batchStats.empty);\n        const stats = { updated: updateCount, batches: batchCount, priority };\n        this.notifyAfterRender(stats, opt);\n        return stats;\n    },\n\n    hasScheduledUpdates: function() {\n        const priorities = this._updates.priorities;\n        const priorityIndexes = Object.keys(priorities); // convert priorities to a dense array\n        let i = priorityIndexes.length;\n        while (i > 0 && i--) {\n            // a faster way how to check if an object is empty\n            for (let _key in priorities[priorityIndexes[i]]) return true;\n        }\n        return false;\n    },\n\n    updateViewsAsync: function(opt, data) {\n        opt || (opt = {});\n        data || (data = { processed: 0, priority: MIN_PRIORITY });\n        const { _updates: updates, options } = this;\n        const id = updates.id;\n        if (id) {\n            cancelFrame(id);\n            if (data.processed === 0 && this.hasScheduledUpdates()) {\n                this.notifyBeforeRender(opt);\n            }\n            const stats = this.updateViewsBatch(opt);\n            const passingOpt = defaults({}, opt, {\n                mountBatchSize: MOUNT_BATCH_SIZE - stats.mounted,\n                unmountBatchSize: MOUNT_BATCH_SIZE - stats.unmounted\n            });\n            const checkStats = this.checkViewport(passingOpt);\n            const unmountCount = checkStats.unmounted;\n            const mountCount = checkStats.mounted;\n            let processed = data.processed;\n            const total = updates.count;\n            if (stats.updated > 0) {\n                // Some updates have been just processed\n                processed += stats.updated + stats.unmounted;\n                stats.processed = processed;\n                data.priority = Math.min(stats.priority, data.priority);\n                if (stats.empty && mountCount === 0) {\n                    stats.unmounted += unmountCount;\n                    stats.mounted += mountCount;\n                    stats.priority = data.priority;\n                    this.notifyAfterRender(stats, opt);\n                    data.processed = 0;\n                    data.priority = MIN_PRIORITY;\n                    updates.count = 0;\n                } else {\n                    data.processed = processed;\n                }\n            } else {\n                if (!updates.idle) {\n                    if (options.autoFreeze) {\n                        this.freeze();\n                        updates.idle = true;\n                        this.trigger('render:idle', opt);\n                    }\n                }\n            }\n            // Progress callback\n            const progressFn = opt.progress;\n            if (total && typeof progressFn === 'function') {\n                progressFn.call(this, stats.empty, processed, total, stats, this);\n            }\n            // The current frame could have been canceled in a callback\n            if (updates.id !== id) return;\n        }\n        if (updates.disabled) {\n            throw new Error('dia.Paper: can not unfreeze the paper after it was removed');\n        }\n        updates.id = nextFrame(this.updateViewsAsync, this, opt, data);\n    },\n\n    notifyBeforeRender: function(opt = {}) {\n        let beforeFn = opt.beforeRender;\n        if (typeof beforeFn !== 'function') {\n            beforeFn = this.options.beforeRender;\n            if (typeof beforeFn !== 'function') return;\n        }\n        beforeFn.call(this, opt, this);\n    },\n\n    notifyAfterRender: function(stats, opt = {}) {\n        let afterFn = opt.afterRender;\n        if (typeof afterFn !== 'function') {\n            afterFn = this.options.afterRender;\n        }\n        if (typeof afterFn === 'function') {\n            afterFn.call(this, stats, opt, this);\n        }\n        this.trigger('render:done', stats, opt);\n    },\n\n    updateViewsBatch: function(opt) {\n        opt || (opt = {});\n        var batchSize = opt.batchSize || UPDATE_BATCH_SIZE;\n        var updates = this._updates;\n        var updateCount = 0;\n        var postponeCount = 0;\n        var unmountCount = 0;\n        var mountCount = 0;\n        var maxPriority = MIN_PRIORITY;\n        var empty = true;\n        var options = this.options;\n        var priorities = updates.priorities;\n        var viewportFn = 'viewport' in opt ? opt.viewport : options.viewport;\n        if (typeof viewportFn !== 'function') viewportFn = null;\n        var postponeViewFn = options.onViewPostponed;\n        if (typeof postponeViewFn !== 'function') postponeViewFn = null;\n        var priorityIndexes = Object.keys(priorities); // convert priorities to a dense array\n        main: for (var i = 0, n = priorityIndexes.length; i < n; i++) {\n            var priority = +priorityIndexes[i];\n            var priorityUpdates = priorities[priority];\n            for (var cid in priorityUpdates) {\n                if (updateCount >= batchSize) {\n                    empty = false;\n                    break main;\n                }\n                var view = views[cid];\n                if (!view) {\n                    // This should not occur\n                    delete priorityUpdates[cid];\n                    continue;\n                }\n                var currentFlag = priorityUpdates[cid];\n                if ((currentFlag & view.FLAG_REMOVE) === 0) {\n                    // We should never check a view for viewport if we are about to remove the view\n                    var isDetached = cid in updates.unmounted;\n                    if (view.DETACHABLE && viewportFn && !viewportFn.call(this, view, !isDetached, this)) {\n                        // Unmount View\n                        if (!isDetached) {\n                            this.registerUnmountedView(view);\n                            this.detachView(view);\n                        }\n                        updates.unmounted[cid] |= currentFlag;\n                        delete priorityUpdates[cid];\n                        unmountCount++;\n                        continue;\n                    }\n                    // Mount View\n                    if (isDetached) {\n                        currentFlag |= view.FLAG_INSERT;\n                        mountCount++;\n                    }\n                    currentFlag |= this.registerMountedView(view);\n                }\n                var leftoverFlag = this.updateView(view, currentFlag, opt);\n                if (leftoverFlag > 0) {\n                    // View update has not finished completely\n                    priorityUpdates[cid] = leftoverFlag;\n                    if (!postponeViewFn || !postponeViewFn.call(this, view, leftoverFlag, this) || priorityUpdates[cid]) {\n                        postponeCount++;\n                        empty = false;\n                        continue;\n                    }\n                }\n                if (maxPriority > priority) maxPriority = priority;\n                updateCount++;\n                delete priorityUpdates[cid];\n            }\n        }\n        return {\n            priority: maxPriority,\n            updated: updateCount,\n            postponed: postponeCount,\n            unmounted: unmountCount,\n            mounted: mountCount,\n            empty: empty\n        };\n    },\n\n    getUnmountedViews: function() {\n        const updates = this._updates;\n        const unmountedCids = Object.keys(updates.unmounted);\n        const n = unmountedCids.length;\n        const unmountedViews = new Array(n);\n        for (var i = 0; i < n; i++) {\n            unmountedViews[i] = views[unmountedCids[i]];\n        }\n        return unmountedViews;\n    },\n\n    getMountedViews: function() {\n        const updates = this._updates;\n        const mountedCids = Object.keys(updates.mounted);\n        const n = mountedCids.length;\n        const mountedViews = new Array(n);\n        for (var i = 0; i < n; i++) {\n            mountedViews[i] = views[mountedCids[i]];\n        }\n        return mountedViews;\n    },\n\n    checkUnmountedViews: function(viewportFn, opt) {\n        opt || (opt  = {});\n        var mountCount = 0;\n        if (typeof viewportFn !== 'function') viewportFn = null;\n        var batchSize = 'mountBatchSize' in opt ? opt.mountBatchSize : Infinity;\n        var updates = this._updates;\n        var unmountedCids = updates.unmountedCids;\n        var unmounted = updates.unmounted;\n        for (var i = 0, n = Math.min(unmountedCids.length, batchSize); i < n; i++) {\n            var cid = unmountedCids[i];\n            if (!(cid in unmounted)) continue;\n            var view = views[cid];\n            if (!view) continue;\n            if (view.DETACHABLE && viewportFn && !viewportFn.call(this, view, false, this)) {\n                // Push at the end of all unmounted ids, so this can be check later again\n                unmountedCids.push(cid);\n                continue;\n            }\n            mountCount++;\n            var flag = this.registerMountedView(view);\n            if (flag) this.scheduleViewUpdate(view, flag, view.UPDATE_PRIORITY, { mounting: true });\n        }\n        // Get rid of views, that have been mounted\n        unmountedCids.splice(0, i);\n        return mountCount;\n    },\n\n    checkMountedViews: function(viewportFn, opt) {\n        opt || (opt = {});\n        var unmountCount = 0;\n        if (typeof viewportFn !== 'function') return unmountCount;\n        var batchSize = 'unmountBatchSize' in opt ? opt.unmountBatchSize : Infinity;\n        var updates = this._updates;\n        var mountedCids = updates.mountedCids;\n        var mounted = updates.mounted;\n        for (var i = 0, n = Math.min(mountedCids.length, batchSize); i < n; i++) {\n            var cid = mountedCids[i];\n            if (!(cid in mounted)) continue;\n            var view = views[cid];\n            if (!view) continue;\n            if (!view.DETACHABLE || viewportFn.call(this, view, true, this)) {\n                // Push at the end of all mounted ids, so this can be check later again\n                mountedCids.push(cid);\n                continue;\n            }\n            unmountCount++;\n            var flag = this.registerUnmountedView(view);\n            if (flag) this.detachView(view);\n        }\n        // Get rid of views, that have been unmounted\n        mountedCids.splice(0, i);\n        return unmountCount;\n    },\n\n    checkViewVisibility: function(cellView, opt = {}) {\n        let viewportFn = 'viewport' in opt ? opt.viewport : this.options.viewport;\n        if (typeof viewportFn !== 'function') viewportFn = null;\n        const updates = this._updates;\n        const { mounted, unmounted } = updates;\n        const visible = !cellView.DETACHABLE || !viewportFn || viewportFn.call(this, cellView, false, this);\n\n        let isUnmounted = false;\n        let isMounted = false;\n\n        if (cellView.cid in mounted && !visible) {\n            const flag = this.registerUnmountedView(cellView);\n            if (flag) this.detachView(cellView);\n            const i = updates.mountedCids.indexOf(cellView.cid);\n            updates.mountedCids.splice(i, 1);\n            isUnmounted = true;\n        }\n\n        if (!isUnmounted && cellView.cid in unmounted && visible) {\n            const i = updates.unmountedCids.indexOf(cellView.cid);\n            updates.unmountedCids.splice(i, 1);\n            var flag = this.registerMountedView(cellView);\n            if (flag) this.scheduleViewUpdate(cellView, flag, cellView.UPDATE_PRIORITY, { mounting: true });\n            isMounted = true;\n        }\n\n        return {\n            mounted: isMounted ? 1 : 0,\n            unmounted: isUnmounted ? 1 : 0\n        };\n    },\n\n    checkViewport: function(opt) {\n        var passingOpt = defaults({}, opt, {\n            mountBatchSize: Infinity,\n            unmountBatchSize: Infinity\n        });\n        var viewportFn = 'viewport' in passingOpt ? passingOpt.viewport : this.options.viewport;\n        var unmountedCount = this.checkMountedViews(viewportFn, passingOpt);\n        if (unmountedCount > 0) {\n            // Do not check views, that have been just unmounted and pushed at the end of the cids array\n            var unmountedCids = this._updates.unmountedCids;\n            passingOpt.mountBatchSize = Math.min(unmountedCids.length - unmountedCount, passingOpt.mountBatchSize);\n        }\n        var mountedCount = this.checkUnmountedViews(viewportFn, passingOpt);\n        return {\n            mounted: mountedCount,\n            unmounted: unmountedCount\n        };\n    },\n\n    freeze: function(opt) {\n        opt || (opt = {});\n        var updates = this._updates;\n        var key = opt.key;\n        var isFrozen = this.options.frozen;\n        var freezeKey = updates.freezeKey;\n        if (key && key !== freezeKey)  {\n            // key passed, but the paper is already freezed with another key\n            if (isFrozen && freezeKey) return;\n            updates.freezeKey = key;\n            updates.keyFrozen = isFrozen;\n        }\n        this.options.frozen = true;\n        var id = updates.id;\n        updates.id = null;\n        if (this.isAsync() && id) cancelFrame(id);\n    },\n\n    unfreeze: function(opt) {\n        opt || (opt = {});\n        var updates = this._updates;\n        var key = opt.key;\n        var freezeKey = updates.freezeKey;\n        // key passed, but the paper is already freezed with another key\n        if (key && freezeKey && key !== freezeKey) return;\n        updates.freezeKey = null;\n        // key passed, but the paper is already freezed\n        if (key && key === freezeKey && updates.keyFrozen) return;\n        if (this.isAsync()) {\n            this.freeze();\n            this.updateViewsAsync(opt);\n        } else {\n            this.updateViews(opt);\n        }\n        this.options.frozen = updates.keyFrozen = false;\n        if (updates.sort) {\n            this.sortViews();\n            updates.sort = false;\n        }\n    },\n\n    isAsync: function() {\n        return !!this.options.async;\n    },\n\n    isFrozen: function() {\n        return !!this.options.frozen;\n    },\n\n    isExactSorting: function() {\n        return this.options.sorting === sortingTypes.EXACT;\n    },\n\n    onRemove: function() {\n\n        this.freeze();\n        this._updates.disabled = true;\n        //clean up all DOM elements/views to prevent memory leaks\n        this.removeLayers();\n        this.removeViews();\n    },\n\n    getComputedSize: function() {\n\n        var options = this.options;\n        var w = options.width;\n        var h = options.height;\n        if (!isNumber(w)) w = this.el.clientWidth;\n        if (!isNumber(h)) h = this.el.clientHeight;\n        return { width: w, height: h };\n    },\n\n    setDimensions: function(width, height) {\n        const { options } = this;\n        const { width: currentWidth, height: currentHeight } = options;\n        let w = (width === undefined) ? currentWidth : width;\n        let h = (height === undefined) ? currentHeight : height;\n        if (currentWidth === w && currentHeight === h) return;\n        options.width = w;\n        options.height = h;\n        this._setDimensions();\n        const computedSize = this.getComputedSize();\n        this.trigger('resize', computedSize.width, computedSize.height);\n    },\n\n    _setDimensions: function() {\n        const { options } = this;\n        let w = options.width;\n        let h = options.height;\n        if (isNumber(w)) w = Math.round(w);\n        if (isNumber(h)) h = Math.round(h);\n        this.$el.css({\n            width: (w === null) ? '' : w,\n            height: (h === null) ? '' : h\n        });\n    },\n\n    setOrigin: function(ox, oy) {\n        return this.translate(ox || 0, oy || 0);\n    },\n\n    // Expand/shrink the paper to fit the content.\n    // Alternatively signature function(opt)\n    fitToContent: function(gridWidth, gridHeight, padding, opt) {\n\n        if (isObject(gridWidth)) {\n            // first parameter is an option object\n            opt = gridWidth;\n        } else {\n            // Support for a deprecated signature\n            opt = assign({ gridWidth, gridHeight, padding }, opt);\n        }\n\n        const { x, y, width, height } = this.getFitToContentArea(opt);\n        const { sx, sy } = this.scale();\n\n        this.setOrigin(-x * sx, -y * sy);\n        this.setDimensions(width * sx, height * sy);\n\n        return new Rect(x, y, width, height);\n    },\n\n    getFitToContentArea: function(opt = {}) {\n\n        // Calculate the paper size to accommodate all the graph's elements.\n\n        const gridWidth = opt.gridWidth || 1;\n        const gridHeight = opt.gridHeight || 1;\n        const padding = normalizeSides(opt.padding || 0);\n\n        const minWidth = Math.max(opt.minWidth || 0, gridWidth);\n        const minHeight = Math.max(opt.minHeight || 0, gridHeight);\n        const maxWidth = opt.maxWidth || Number.MAX_VALUE;\n        const maxHeight = opt.maxHeight || Number.MAX_VALUE;\n        const newOrigin = opt.allowNewOrigin;\n\n        const area = ('contentArea' in opt) ? new Rect(opt.contentArea) : this.getContentArea(opt);\n        const { sx, sy } = this.scale();\n        area.x *= sx;\n        area.y *= sy;\n        area.width *= sx;\n        area.height *= sy;\n\n        let calcWidth = Math.ceil((area.width + area.x) / gridWidth);\n        let calcHeight = Math.ceil((area.height + area.y) / gridHeight);\n        if (!opt.allowNegativeBottomRight) {\n            calcWidth = Math.max(calcWidth, 1);\n            calcHeight = Math.max(calcHeight, 1);\n        }\n        calcWidth *= gridWidth;\n        calcHeight *= gridHeight;\n\n        let tx = 0;\n        if ((newOrigin === 'negative' && area.x < 0) || (newOrigin === 'positive' && area.x >= 0) || newOrigin === 'any') {\n            tx = Math.ceil(-area.x / gridWidth) * gridWidth;\n            tx += padding.left;\n            calcWidth += tx;\n        }\n\n        let ty = 0;\n        if ((newOrigin === 'negative' && area.y < 0) || (newOrigin === 'positive' && area.y >= 0) || newOrigin === 'any') {\n            ty = Math.ceil(-area.y / gridHeight) * gridHeight;\n            ty += padding.top;\n            calcHeight += ty;\n        }\n\n        calcWidth += padding.right;\n        calcHeight += padding.bottom;\n\n        // Make sure the resulting width and height are greater than minimum.\n        calcWidth = Math.max(calcWidth, minWidth);\n        calcHeight = Math.max(calcHeight, minHeight);\n\n        // Make sure the resulting width and height are lesser than maximum.\n        calcWidth = Math.min(calcWidth, maxWidth);\n        calcHeight = Math.min(calcHeight, maxHeight);\n\n        return new Rect(-tx / sx, -ty / sy, calcWidth / sx, calcHeight / sy);\n    },\n\n    transformToFitContent: function(opt) {\n        opt || (opt = {});\n\n        let contentBBox, contentLocalOrigin;\n        if ('contentArea' in opt) {\n            const contentArea = opt.contentArea;\n            contentBBox = this.localToPaperRect(contentArea);\n            contentLocalOrigin = new Point(contentArea);\n        } else {\n            contentBBox = this.getContentBBox(opt);\n            contentLocalOrigin = this.paperToLocalPoint(contentBBox);\n        }\n\n        if (!contentBBox.width || !contentBBox.height) return;\n\n        defaults(opt, {\n            padding: 0,\n            preserveAspectRatio: true,\n            scaleGrid: null,\n            minScale: 0,\n            maxScale: Number.MAX_VALUE,\n            verticalAlign: 'top',\n            horizontalAlign: 'left',\n            //minScaleX\n            //minScaleY\n            //maxScaleX\n            //maxScaleY\n            //fittingBBox\n        });\n\n        const padding = normalizeSides(opt.padding);\n\n        const minScaleX = opt.minScaleX || opt.minScale;\n        const maxScaleX = opt.maxScaleX || opt.maxScale;\n        const minScaleY = opt.minScaleY || opt.minScale;\n        const maxScaleY = opt.maxScaleY || opt.maxScale;\n\n        let fittingBBox;\n        if (opt.fittingBBox) {\n            fittingBBox = opt.fittingBBox;\n        } else {\n            const currentTranslate = this.translate();\n            const computedSize = this.getComputedSize();\n            fittingBBox = {\n                x: currentTranslate.tx,\n                y: currentTranslate.ty,\n                width: computedSize.width,\n                height: computedSize.height\n            };\n        }\n\n        fittingBBox = new Rect(fittingBBox).moveAndExpand({\n            x: padding.left,\n            y: padding.top,\n            width: -padding.left - padding.right,\n            height: -padding.top - padding.bottom\n        });\n\n        const currentScale = this.scale();\n\n        let newSx = fittingBBox.width / contentBBox.width * currentScale.sx;\n        let newSy = fittingBBox.height / contentBBox.height * currentScale.sy;\n\n        if (opt.preserveAspectRatio) {\n            newSx = newSy = Math.min(newSx, newSy);\n        }\n\n        // snap scale to a grid\n        if (opt.scaleGrid) {\n\n            const gridSize = opt.scaleGrid;\n\n            newSx = gridSize * Math.floor(newSx / gridSize);\n            newSy = gridSize * Math.floor(newSy / gridSize);\n        }\n\n        // scale min/max boundaries\n        newSx = Math.min(maxScaleX, Math.max(minScaleX, newSx));\n        newSy = Math.min(maxScaleY, Math.max(minScaleY, newSy));\n\n        const scaleDiff = {\n            x: newSx / currentScale.sx,\n            y: newSy / currentScale.sy\n        };\n\n        const origin = this.options.origin;\n        let newOx = fittingBBox.x - contentLocalOrigin.x * newSx - origin.x;\n        let newOy = fittingBBox.y - contentLocalOrigin.y * newSy - origin.y;\n\n        switch (opt.verticalAlign) {\n            case 'middle':\n                newOy = newOy + (fittingBBox.height - contentBBox.height * scaleDiff.y) / 2;\n                break;\n            case 'bottom':\n                newOy = newOy + (fittingBBox.height - contentBBox.height * scaleDiff.y);\n                break;\n            case 'top':\n            default:\n                break;\n        }\n\n        switch (opt.horizontalAlign) {\n            case 'middle':\n                newOx = newOx + (fittingBBox.width - contentBBox.width * scaleDiff.x) / 2;\n                break;\n            case 'right':\n                newOx = newOx + (fittingBBox.width - contentBBox.width * scaleDiff.x);\n                break;\n            case 'left':\n            default:\n                break;\n        }\n\n        this.scale(newSx, newSy);\n        this.translate(newOx, newOy);\n    },\n\n    scaleContentToFit: function(opt) {\n        this.transformToFitContent(opt);\n    },\n\n    // Return the dimensions of the content area in local units (without transformations).\n    getContentArea: function(opt) {\n\n        if (opt && opt.useModelGeometry) {\n            return this.model.getBBox() || new Rect();\n        }\n\n        return V(this.cells).getBBox();\n    },\n\n    // Return the dimensions of the content bbox in the paper units (as it appears on screen).\n    getContentBBox: function(opt) {\n\n        return this.localToPaperRect(this.getContentArea(opt));\n    },\n\n    // Returns a geometry rectangle representing the entire\n    // paper area (coordinates from the left paper border to the right one\n    // and the top border to the bottom one).\n    getArea: function() {\n\n        return this.paperToLocalRect(this.getComputedSize());\n    },\n\n    getRestrictedArea: function(...args) {\n\n        const { restrictTranslate } = this.options;\n\n        let restrictedArea;\n        if (isFunction(restrictTranslate)) {\n            // A method returning a bounding box\n            restrictedArea = restrictTranslate.apply(this, args);\n        } else if (restrictTranslate === true) {\n            // The paper area\n            restrictedArea = this.getArea();\n        } else if (!restrictTranslate) {\n            // falsy value\n            restrictedArea = null;\n        } else {\n            // any other value\n            restrictedArea = new Rect(restrictTranslate);\n        }\n\n        return restrictedArea;\n    },\n\n    createViewForModel: function(cell) {\n\n        const { options } = this;\n        // A class taken from the paper options.\n        var optionalViewClass;\n\n        // A default basic class (either dia.ElementView or dia.LinkView)\n        var defaultViewClass;\n\n        // A special class defined for this model in the corresponding namespace.\n        // e.g. joint.shapes.basic.Rect searches for joint.shapes.basic.RectView\n        var namespace = options.cellViewNamespace;\n        var type = cell.get('type') + 'View';\n        var namespaceViewClass = getByPath(namespace, type, '.');\n\n        if (cell.isLink()) {\n            optionalViewClass = options.linkView;\n            defaultViewClass = LinkView;\n        } else {\n            optionalViewClass = options.elementView;\n            defaultViewClass = ElementView;\n        }\n\n        // a) the paper options view is a class (deprecated)\n        //  1. search the namespace for a view\n        //  2. if no view was found, use view from the paper options\n        // b) the paper options view is a function\n        //  1. call the function from the paper options\n        //  2. if no view was return, search the namespace for a view\n        //  3. if no view was found, use the default\n        var ViewClass = (optionalViewClass.prototype instanceof Backbone.View)\n            ? namespaceViewClass || optionalViewClass\n            : optionalViewClass.call(this, cell) || namespaceViewClass || defaultViewClass;\n\n        return new ViewClass({\n            model: cell,\n            interactive: options.interactive,\n            labelsLayer: options.labelsLayer === true ? LayersNames.LABELS : options.labelsLayer\n        });\n    },\n\n    removeView: function(cell) {\n\n        const { id } = cell;\n        const { _views, _updates } = this;\n        const view = _views[id];\n        if (view) {\n            var { cid } = view;\n            const { mounted, unmounted } = _updates;\n            view.remove();\n            delete _views[id];\n            delete mounted[cid];\n            delete unmounted[cid];\n        }\n        return view;\n    },\n\n    renderView: function(cell, opt) {\n\n        const { id } = cell;\n        const views = this._views;\n        let view, flag;\n        let create = true;\n        if (id in views) {\n            view = views[id];\n            if (view.model === cell) {\n                flag = view.FLAG_INSERT;\n                create = false;\n            } else {\n                // The view for this `id` already exist.\n                // The cell is a new instance of the model with identical id\n                // We simply remove the existing view and create a new one\n                this.removeView(cell);\n            }\n        }\n        if (create) {\n            view = views[id] = this.createViewForModel(cell);\n            view.paper = this;\n            flag = this.registerUnmountedView(view) | this.FLAG_INIT | view.getFlag(result(view, 'initFlag'));\n        }\n        this.requestViewUpdate(view, flag, view.UPDATE_PRIORITY, opt);\n        return view;\n    },\n\n    onImageDragStart: function() {\n        // This is the only way to prevent image dragging in Firefox that works.\n        // Setting -moz-user-select: none, draggable=\"false\" attribute or user-drag: none didn't help.\n\n        return false;\n    },\n\n    resetViews: function(cells, opt) {\n        opt || (opt = {});\n        cells || (cells = []);\n        this._resetUpdates();\n        // clearing views removes any event listeners\n        this.removeViews();\n        // Allows to unfreeze normally while in the idle state using autoFreeze option\n        const key = this.options.autoFreeze ? null : 'reset';\n        this.freeze({ key });\n        for (var i = 0, n = cells.length; i < n; i++) {\n            this.renderView(cells[i], opt);\n        }\n        this.unfreeze({ key });\n        this.sortViews();\n    },\n\n    removeViews: function() {\n\n        invoke(this._views, 'remove');\n\n        this._views = {};\n    },\n\n    sortViews: function() {\n\n        if (!this.isExactSorting()) {\n            // noop\n            return;\n        }\n        if (this.isFrozen()) {\n            // sort views once unfrozen\n            this._updates.sort = true;\n            return;\n        }\n        this.sortViewsExact();\n    },\n\n    sortViewsExact: function() {\n\n        // Run insertion sort algorithm in order to efficiently sort DOM elements according to their\n        // associated model `z` attribute.\n\n        var $cells = $(this.cells).children('[model-id]');\n        var cells = this.model.get('cells');\n\n        sortElements($cells, function(a, b) {\n            var cellA = cells.get(a.getAttribute('model-id'));\n            var cellB = cells.get(b.getAttribute('model-id'));\n            var zA = cellA.attributes.z || 0;\n            var zB = cellB.attributes.z || 0;\n            return (zA === zB) ? 0 : (zA < zB) ? -1 : 1;\n        });\n    },\n\n    insertView: function(view, isInitialInsert) {\n        const layerView = this.getLayerView(LayersNames.CELLS);\n        const { el, model } = view;\n        switch (this.options.sorting) {\n            case sortingTypes.APPROX:\n                layerView.insertSortedNode(el, model.get('z'));\n                break;\n            case sortingTypes.EXACT:\n            default:\n                layerView.insertNode(el);\n                break;\n        }\n        view.onMount(isInitialInsert);\n    },\n\n    detachView(view) {\n        view.unmount();\n        view.onDetach();\n    },\n\n    scale: function(sx, sy, ox, oy) {\n\n        // getter\n        if (sx === undefined) {\n            return V.matrixToScale(this.matrix());\n        }\n\n        // setter\n        if (sy === undefined) {\n            sy = sx;\n        }\n        if (ox === undefined) {\n            ox = 0;\n            oy = 0;\n        }\n\n        var translate = this.translate();\n\n        if (ox || oy || translate.tx || translate.ty) {\n            var newTx = translate.tx - ox * (sx - 1);\n            var newTy = translate.ty - oy * (sy - 1);\n            this.translate(newTx, newTy);\n        }\n\n        sx = Math.max(sx || 0, this.MIN_SCALE);\n        sy = Math.max(sy || 0, this.MIN_SCALE);\n\n        var ctm = this.matrix();\n        ctm.a = sx;\n        ctm.d = sy;\n\n        this.matrix(ctm);\n\n        this.trigger('scale', sx, sy, ox, oy);\n\n        return this;\n    },\n\n    // Experimental - do not use in production.\n    rotate: function(angle, cx, cy) {\n\n        // getter\n        if (angle === undefined) {\n            return V.matrixToRotate(this.matrix());\n        }\n\n        // setter\n\n        // If the origin is not set explicitely, rotate around the center. Note that\n        // we must use the plain bounding box (`this.el.getBBox()` instead of the one that gives us\n        // the real bounding box (`bbox()`) including transformations).\n        if (cx === undefined) {\n            var bbox = this.cells.getBBox();\n            cx = bbox.width / 2;\n            cy = bbox.height / 2;\n        }\n\n        var ctm = this.matrix().translate(cx, cy).rotate(angle).translate(-cx, -cy);\n        this.matrix(ctm);\n\n        return this;\n    },\n\n    translate: function(tx, ty) {\n\n        // getter\n        if (tx === undefined) {\n            return V.matrixToTranslate(this.matrix());\n        }\n\n        const { options } = this;\n        const { origin, drawGrid } = options;\n\n        // setter\n        tx || (tx = 0);\n        ty || (ty = 0);\n\n        const ctm = this.matrix();\n        if (ctm.e === tx && ctm.f === ty) return this;\n        ctm.e = tx;\n        ctm.f = ty;\n\n        this.matrix(ctm);\n\n        const { tx: ox, ty: oy } = this.translate();\n        origin.x = ox;\n        origin.y = oy;\n\n        this.trigger('translate', ox, oy);\n\n        if (drawGrid) {\n            this.drawGrid();\n        }\n\n        return this;\n    },\n\n    // Find the first view climbing up the DOM tree starting at element `el`. Note that `el` can also\n    // be a selector or a jQuery object.\n    findView: function($el) {\n\n        var el = isString($el)\n            ? this.cells.querySelector($el)\n            : $el instanceof $ ? $el[0] : $el;\n\n        var id = this.findAttribute('model-id', el);\n        if (id) return this._views[id];\n\n        return undefined;\n    },\n\n    // Find a view for a model `cell`. `cell` can also be a string or number representing a model `id`.\n    findViewByModel: function(cell) {\n\n        var id = (isString(cell) || isNumber(cell)) ? cell : (cell && cell.id);\n\n        return this._views[id];\n    },\n\n    // Find all views at given point\n    findViewsFromPoint: function(p) {\n\n        p = new Point(p);\n\n        var views = this.model.getElements().map(this.findViewByModel, this);\n\n        return views.filter(function(view) {\n            return view && view.vel.getBBox({ target: this.cells }).containsPoint(p);\n        }, this);\n    },\n\n    // Find all views in given area\n    findViewsInArea: function(rect, opt) {\n\n        opt = defaults(opt || {}, { strict: false });\n        rect = new Rect(rect);\n\n        var views = this.model.getElements().map(this.findViewByModel, this);\n        var method = opt.strict ? 'containsRect' : 'intersect';\n\n        return views.filter(function(view) {\n            return view && rect[method](view.vel.getBBox({ target: this.cells }));\n        }, this);\n    },\n\n    removeTools: function() {\n        this.dispatchToolsEvent('remove');\n        return this;\n    },\n\n    hideTools: function() {\n        this.dispatchToolsEvent('hide');\n        return this;\n    },\n\n    showTools: function() {\n        this.dispatchToolsEvent('show');\n        return this;\n    },\n\n    dispatchToolsEvent: function(event, ...args) {\n        if (typeof event !== 'string') return;\n        this.trigger('tools:event', event, ...args);\n    },\n\n\n    getModelById: function(id) {\n\n        return this.model.getCell(id);\n    },\n\n    snapToGrid: function(x, y) {\n\n        // Convert global coordinates to the local ones of the `viewport`. Otherwise,\n        // improper transformation would be applied when the viewport gets transformed (scaled/rotated).\n        return this.clientToLocalPoint(x, y).snapToGrid(this.options.gridSize);\n    },\n\n    localToPaperPoint: function(x, y) {\n        // allow `x` to be a point and `y` undefined\n        var localPoint = new Point(x, y);\n        var paperPoint = V.transformPoint(localPoint, this.matrix());\n        return paperPoint;\n    },\n\n    localToPaperRect: function(x, y, width, height) {\n        // allow `x` to be a rectangle and rest arguments undefined\n        var localRect = new Rect(x, y, width, height);\n        var paperRect = V.transformRect(localRect, this.matrix());\n        return paperRect;\n    },\n\n    paperToLocalPoint: function(x, y) {\n        // allow `x` to be a point and `y` undefined\n        var paperPoint = new Point(x, y);\n        var localPoint = V.transformPoint(paperPoint, this.matrix().inverse());\n        return localPoint;\n    },\n\n    paperToLocalRect: function(x, y, width, height) {\n        // allow `x` to be a rectangle and rest arguments undefined\n        var paperRect = new Rect(x, y, width, height);\n        var localRect = V.transformRect(paperRect, this.matrix().inverse());\n        return localRect;\n    },\n\n    localToClientPoint: function(x, y) {\n        // allow `x` to be a point and `y` undefined\n        var localPoint = new Point(x, y);\n        var clientPoint = V.transformPoint(localPoint, this.clientMatrix());\n        return clientPoint;\n    },\n\n    localToClientRect: function(x, y, width, height) {\n        // allow `x` to be a point and `y` undefined\n        var localRect = new Rect(x, y, width, height);\n        var clientRect = V.transformRect(localRect, this.clientMatrix());\n        return clientRect;\n    },\n\n    // Transform client coordinates to the paper local coordinates.\n    // Useful when you have a mouse event object and you'd like to get coordinates\n    // inside the paper that correspond to `evt.clientX` and `evt.clientY` point.\n    // Example: var localPoint = paper.clientToLocalPoint({ x: evt.clientX, y: evt.clientY });\n    clientToLocalPoint: function(x, y) {\n        // allow `x` to be a point and `y` undefined\n        var clientPoint = new Point(x, y);\n        var localPoint = V.transformPoint(clientPoint, this.clientMatrix().inverse());\n        return localPoint;\n    },\n\n    clientToLocalRect: function(x, y, width, height) {\n        // allow `x` to be a point and `y` undefined\n        var clientRect = new Rect(x, y, width, height);\n        var localRect = V.transformRect(clientRect, this.clientMatrix().inverse());\n        return localRect;\n    },\n\n    localToPagePoint: function(x, y) {\n\n        return this.localToPaperPoint(x, y).offset(this.pageOffset());\n    },\n\n    localToPageRect: function(x, y, width, height) {\n\n        return this.localToPaperRect(x, y, width, height).offset(this.pageOffset());\n    },\n\n    pageToLocalPoint: function(x, y) {\n\n        var pagePoint = new Point(x, y);\n        var paperPoint = pagePoint.difference(this.pageOffset());\n        return this.paperToLocalPoint(paperPoint);\n    },\n\n    pageToLocalRect: function(x, y, width, height) {\n\n        var pageOffset = this.pageOffset();\n        var paperRect = new Rect(x, y, width, height);\n        paperRect.x -= pageOffset.x;\n        paperRect.y -= pageOffset.y;\n        return this.paperToLocalRect(paperRect);\n    },\n\n    clientOffset: function() {\n\n        var clientRect = this.svg.getBoundingClientRect();\n        return new Point(clientRect.left, clientRect.top);\n    },\n\n    pageOffset: function() {\n\n        return this.clientOffset().offset(window.scrollX, window.scrollY);\n    },\n\n    linkAllowed: function(linkView) {\n\n        if (!(linkView instanceof LinkView)) {\n            throw new Error('Must provide a linkView.');\n        }\n\n        var link = linkView.model;\n        var paperOptions = this.options;\n        var graph = this.model;\n        var ns = graph.constructor.validations;\n\n        if (!paperOptions.multiLinks) {\n            if (!ns.multiLinks.call(this, graph, link)) return false;\n        }\n\n        if (!paperOptions.linkPinning) {\n            // Link pinning is not allowed and the link is not connected to the target.\n            if (!ns.linkPinning.call(this, graph, link)) return false;\n        }\n\n        if (typeof paperOptions.allowLink === 'function') {\n            if (!paperOptions.allowLink.call(this, linkView, this)) return false;\n        }\n\n        return true;\n    },\n\n    getDefaultLink: function(cellView, magnet) {\n\n        return isFunction(this.options.defaultLink)\n        // default link is a function producing link model\n            ? this.options.defaultLink.call(this, cellView, magnet)\n        // default link is the Backbone model\n            : this.options.defaultLink.clone();\n    },\n\n    // Cell highlighting.\n    // ------------------\n\n    resolveHighlighter: function(opt = {}) {\n\n        let { highlighter: highlighterDef, type } = opt;\n        const { highlighting,highlighterNamespace  } = this.options;\n\n        /*\n            Expecting opt.highlighter to have the following structure:\n            {\n                name: 'highlighter-name',\n                options: {\n                    some: 'value'\n                }\n            }\n        */\n        if (highlighterDef === undefined) {\n\n            // Is highlighting disabled?\n            if (!highlighting) return false;\n            // check for built-in types\n            if (type) {\n                highlighterDef = highlighting[type];\n                // Is a specific type highlight disabled?\n                if (highlighterDef === false) return false;\n            }\n            if (!highlighterDef) {\n                // Type not defined use default highlight\n                highlighterDef = highlighting['default'];\n            }\n        }\n\n        // Do nothing if opt.highlighter is falsy.\n        // This allows the case to not highlight cell(s) in certain cases.\n        // For example, if you want to NOT highlight when embedding elements\n        // or use a custom highlighter.\n        if (!highlighterDef) return false;\n\n        // Allow specifying a highlighter by name.\n        if (isString(highlighterDef)) {\n            highlighterDef = {\n                name: highlighterDef\n            };\n        }\n\n        const name = highlighterDef.name;\n        const highlighter = highlighterNamespace[name];\n\n        // Highlighter validation\n        if (!highlighter) {\n            throw new Error('Unknown highlighter (\"' + name + '\")');\n        }\n        if (typeof highlighter.highlight !== 'function') {\n            throw new Error('Highlighter (\"' + name + '\") is missing required highlight() method');\n        }\n        if (typeof highlighter.unhighlight !== 'function') {\n            throw new Error('Highlighter (\"' + name + '\") is missing required unhighlight() method');\n        }\n\n        return {\n            highlighter,\n            options: highlighterDef.options || {},\n            name\n        };\n    },\n\n    onCellHighlight: function(cellView, magnetEl, opt) {\n        const highlighterDescriptor = this.resolveHighlighter(opt);\n        if (!highlighterDescriptor) return;\n        const { highlighter, options } = highlighterDescriptor;\n        highlighter.highlight(cellView, magnetEl, options);\n    },\n\n    onCellUnhighlight: function(cellView, magnetEl, opt) {\n        const highlighterDescriptor = this.resolveHighlighter(opt);\n        if (!highlighterDescriptor) return;\n        const { highlighter, options } = highlighterDescriptor;\n        highlighter.unhighlight(cellView, magnetEl, options);\n    },\n\n    // Interaction.\n    // ------------\n\n    pointerdblclick: function(evt) {\n\n        evt.preventDefault();\n\n        // magnetpointerdblclick can stop propagation\n\n        evt = normalizeEvent(evt);\n\n        var view = this.findView(evt.target);\n        if (this.guard(evt, view)) return;\n\n        var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n\n        if (view) {\n            view.pointerdblclick(evt, localPoint.x, localPoint.y);\n\n        } else {\n            this.trigger('blank:pointerdblclick', evt, localPoint.x, localPoint.y);\n        }\n    },\n\n    pointerclick: function(evt) {\n\n        // magnetpointerclick can stop propagation\n\n        var data = this.eventData(evt);\n        // Trigger event only if mouse has not moved.\n        if (data.mousemoved <= this.options.clickThreshold) {\n\n            evt = normalizeEvent(evt);\n\n            var view = this.findView(evt.target);\n            if (this.guard(evt, view)) return;\n\n            var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n\n            if (view) {\n                view.pointerclick(evt, localPoint.x, localPoint.y);\n\n            } else {\n                this.trigger('blank:pointerclick', evt, localPoint.x, localPoint.y);\n            }\n        }\n    },\n\n    contextmenu: function(evt) {\n\n        if (this.options.preventContextMenu) evt.preventDefault();\n\n        if (this.contextMenuFired) {\n            this.contextMenuFired = false;\n            return;\n        }\n\n        evt = normalizeEvent(evt);\n\n        this.contextMenuTrigger(evt);\n    },\n\n    contextMenuTrigger: function(evt) {\n        var view = this.findView(evt.target);\n        if (this.guard(evt, view)) return;\n\n        var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n\n        if (view) {\n            view.contextmenu(evt, localPoint.x, localPoint.y);\n\n        } else {\n            this.trigger('blank:contextmenu', evt, localPoint.x, localPoint.y);\n        }\n    },\n\n    pointerdown: function(evt) {\n\n        evt = normalizeEvent(evt);\n\n        const { target, button } = evt;\n        const view = this.findView(target);\n        const isContextMenu = (button === 2);\n\n        if (view) {\n\n            if (!isContextMenu && this.guard(evt, view)) return;\n\n            const isTargetFormNode = this.FORM_CONTROL_TAG_NAMES.includes(target.tagName);\n\n            if (this.options.preventDefaultViewAction && !isTargetFormNode) {\n                // If the target is a form element, we do not want to prevent the default action.\n                // For example, we want to be able to select text in a text input or\n                // to be able to click on a checkbox.\n                evt.preventDefault();\n            }\n\n            if (isTargetFormNode) {\n                // If the target is a form element, we do not want to start dragging the element.\n                // For example, we want to be able to select text by dragging the mouse.\n                view.preventDefaultInteraction(evt);\n            }\n\n            const rootViewEl = view.el;\n\n            // Custom event\n            const eventNode = target.closest('[event]');\n            if (eventNode && rootViewEl !== eventNode && view.el.contains(eventNode)) {\n                const eventEvt = normalizeEvent($.Event(evt.originalEvent, {\n                    data: evt.data,\n                    // Originally the event listener was attached to the event element.\n                    currentTarget: eventNode\n                }));\n                this.onevent(eventEvt);\n                if (eventEvt.isDefaultPrevented()) {\n                    evt.preventDefault();\n                }\n                // `onevent` can stop propagation\n                if (eventEvt.isPropagationStopped()) return;\n                evt.data = eventEvt.data;\n            }\n\n            // Element magnet\n            const magnetNode = target.closest('[magnet]');\n            if (magnetNode && view.el !== magnetNode && view.el.contains(magnetNode)) {\n                const magnetEvt = normalizeEvent($.Event(evt.originalEvent, {\n                    data: evt.data,\n                    // Originally the event listener was attached to the magnet element.\n                    currentTarget: magnetNode\n                }));\n                this.onmagnet(magnetEvt);\n                if (magnetEvt.isDefaultPrevented()) {\n                    evt.preventDefault();\n                }\n                // `onmagnet` stops propagation when `addLinkFromMagnet` is allowed\n                if (magnetEvt.isPropagationStopped()) {\n                    // `magnet:pointermove` and `magnet:pointerup` events must be fired\n                    if (isContextMenu) return;\n                    this.delegateDragEvents(view, magnetEvt.data);\n                    return;\n                }\n                evt.data = magnetEvt.data;\n            }\n        }\n\n        if (isContextMenu) {\n            this.contextMenuFired = true;\n            const contextmenuEvt = $.Event(evt.originalEvent, { type: 'contextmenu', data: evt.data });\n            this.contextMenuTrigger(contextmenuEvt);\n        } else {\n            const localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n            if (view) {\n                view.pointerdown(evt, localPoint.x, localPoint.y);\n            } else {\n                if (this.options.preventDefaultBlankAction) {\n                    evt.preventDefault();\n                }\n                this.trigger('blank:pointerdown', evt, localPoint.x, localPoint.y);\n            }\n\n            this.delegateDragEvents(view, evt.data);\n        }\n\n    },\n\n    pointermove: function(evt) {\n\n        // mouse moved counter\n        var data = this.eventData(evt);\n        if (!data.mousemoved) {\n            data.mousemoved = 0;\n            // Make sure that events like `mouseenter` and `mouseleave` are\n            // not triggered while the user is dragging a cellView.\n            this.undelegateEvents();\n            // Note: the events are undelegated after the first `pointermove` event.\n            // Not on `pointerdown` to make sure that `dbltap` is recognized.\n        }\n\n        var mousemoved = ++data.mousemoved;\n\n        if (mousemoved <= this.options.moveThreshold) return;\n\n        evt = normalizeEvent(evt);\n\n        var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n\n        var view = data.sourceView;\n        if (view) {\n            view.pointermove(evt, localPoint.x, localPoint.y);\n        } else {\n            this.trigger('blank:pointermove', evt, localPoint.x, localPoint.y);\n        }\n\n        this.eventData(evt, data);\n    },\n\n    pointerup: function(evt) {\n\n        this.undelegateDocumentEvents();\n\n        var normalizedEvt = normalizeEvent(evt);\n\n        var localPoint = this.snapToGrid(normalizedEvt.clientX, normalizedEvt.clientY);\n\n        var view = this.eventData(evt).sourceView;\n        if (view) {\n            view.pointerup(normalizedEvt, localPoint.x, localPoint.y);\n        } else {\n            this.trigger('blank:pointerup', normalizedEvt, localPoint.x, localPoint.y);\n        }\n\n        if (!normalizedEvt.isPropagationStopped()) {\n            this.pointerclick($.Event(evt.originalEvent, { type: 'click', data: evt.data }));\n        }\n\n        this.delegateEvents();\n    },\n\n    mouseover: function(evt) {\n\n        evt = normalizeEvent(evt);\n\n        var view = this.findView(evt.target);\n        if (this.guard(evt, view)) return;\n\n        if (view) {\n            view.mouseover(evt);\n\n        } else {\n            if (this.el === evt.target) return; // prevent border of paper from triggering this\n            this.trigger('blank:mouseover', evt);\n        }\n    },\n\n    mouseout: function(evt) {\n\n        evt = normalizeEvent(evt);\n\n        var view = this.findView(evt.target);\n        if (this.guard(evt, view)) return;\n\n        if (view) {\n            view.mouseout(evt);\n\n        } else {\n            if (this.el === evt.target) return; // prevent border of paper from triggering this\n            this.trigger('blank:mouseout', evt);\n        }\n    },\n\n    mouseenter: function(evt) {\n\n        evt = normalizeEvent(evt);\n\n        const {\n            target, // The EventTarget the pointing device entered to\n            relatedTarget, // The EventTarget the pointing device exited from\n            currentTarget // The EventTarget on which the event listener was registered\n        } = evt;\n        const view = this.findView(target);\n        if (this.guard(evt, view)) return;\n        const relatedView = this.findView(relatedTarget);\n        if (view) {\n            if (relatedView === view) {\n                // Mouse left a cell tool\n                return;\n            }\n            view.mouseenter(evt);\n            if (this.el.contains(relatedTarget)) {\n                // The pointer remains inside the paper.\n                return;\n            }\n        }\n        if (relatedView) {\n            return;\n        }\n        // prevent double `mouseenter` event if the `relatedTarget` is outside the paper\n        // (mouseenter method would be fired twice)\n        if (currentTarget === this.el) {\n            // `paper` (more descriptive), not `blank`\n            this.trigger('paper:mouseenter', evt);\n        }\n    },\n\n    mouseleave: function(evt) {\n\n        evt = normalizeEvent(evt);\n\n        const {\n            target, // The EventTarget the pointing device exited from\n            relatedTarget, // The EventTarget the pointing device entered to\n            currentTarget // The EventTarget on which the event listener was registered\n        } = evt;\n        const view = this.findView(target);\n        if (this.guard(evt, view)) return;\n        const relatedView = this.findView(relatedTarget);\n        if (view) {\n            if (relatedView === view) {\n                // Mouse entered a cell tool\n                return;\n            }\n            view.mouseleave(evt);\n            if (this.el.contains(relatedTarget)) {\n                // The pointer has exited a cellView. The pointer is still inside of the paper.\n                return;\n            }\n        }\n        if (relatedView) {\n            // The pointer has entered a new cellView\n            return;\n        }\n        // prevent double `mouseleave` event if the `relatedTarget` is outside the paper\n        // (mouseleave method would be fired twice)\n        if (currentTarget === this.el) {\n            // There is no cellView under the pointer, nor the blank area of the paper\n            this.trigger('paper:mouseleave', evt);\n        }\n    },\n\n    _processMouseWheelEvtBuf: debounce(function() {\n        const { event, deltas } = this._mw_evt_buffer;\n        const deltaY = deltas.reduce((acc, deltaY) => acc + cap(deltaY, WHEEL_CAP), 0);\n\n        const scale = Math.pow(0.995, deltaY); // 1.005 for inverted pinch/zoom\n        const { x, y } = this.clientToLocalPoint(event.clientX, event.clientY);\n        this.trigger('paper:pinch', event, x, y, scale);\n\n        this._mw_evt_buffer = {\n            event: null,\n            deltas: [],\n        };\n    }, WHEEL_WAIT_MS, { maxWait: WHEEL_WAIT_MS }),\n\n    mousewheel: function(evt) {\n\n        evt = normalizeEvent(evt);\n\n        const view = this.findView(evt.target);\n        if (this.guard(evt, view)) return;\n\n        const originalEvent = evt.originalEvent;\n        const localPoint = this.snapToGrid(originalEvent.clientX, originalEvent.clientY);\n        const { deltaX, deltaY } = normalizeWheel(originalEvent);\n\n        const pinchHandlers = this._events['paper:pinch'];\n\n        // Touchpad devices will send a fake CTRL press when a pinch is performed\n        //\n        // We also check if there are any subscribers to paper:pinch event. If there are none,\n        // just skip the entire block of code (we don't want to blindly call\n        // .preventDefault() if we really don't have to).\n        if (evt.ctrlKey && pinchHandlers && pinchHandlers.length > 0) {\n            // This is a pinch gesture, it's safe to assume that we must call .preventDefault()\n            originalEvent.preventDefault();\n            this._mw_evt_buffer.event = originalEvent;\n            this._mw_evt_buffer.deltas.push(deltaY);\n            this._processMouseWheelEvtBuf();\n        } else {\n            const delta = Math.max(-1, Math.min(1, originalEvent.wheelDelta));\n            if (view) {\n                view.mousewheel(evt, localPoint.x, localPoint.y, delta);\n\n            } else {\n                this.trigger('blank:mousewheel', evt, localPoint.x, localPoint.y, delta);\n            }\n\n            this.trigger('paper:pan', evt, deltaX, deltaY);\n        }\n    },\n\n    onevent: function(evt) {\n\n        var eventNode = evt.currentTarget;\n        var eventName = eventNode.getAttribute('event');\n        if (eventName) {\n            var view = this.findView(eventNode);\n            if (view) {\n\n                evt = normalizeEvent(evt);\n                if (this.guard(evt, view)) return;\n\n                var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n                view.onevent(evt, eventName, localPoint.x, localPoint.y);\n            }\n        }\n    },\n\n    magnetEvent: function(evt, handler) {\n\n        var magnetNode = evt.currentTarget;\n        var magnetValue = magnetNode.getAttribute('magnet');\n        if (magnetValue) {\n            var view = this.findView(magnetNode);\n            if (view) {\n                evt = normalizeEvent(evt);\n                if (this.guard(evt, view)) return;\n                var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n                handler.call(this, view, evt, magnetNode, localPoint.x, localPoint.y);\n            }\n        }\n    },\n\n    onmagnet: function(evt) {\n\n        if (evt.button === 2) {\n            this.contextMenuFired = true;\n            this.magnetContextMenuFired = true;\n            const contextmenuEvt = $.Event(evt.originalEvent, {\n                type: 'contextmenu',\n                data: evt.data,\n                currentTarget: evt.currentTarget,\n            });\n            this.magnetContextMenuTrigger(contextmenuEvt);\n            if (contextmenuEvt.isPropagationStopped()) {\n                evt.stopPropagation();\n            }\n        } else {\n            this.magnetEvent(evt, function(view, evt, _, x, y) {\n                view.onmagnet(evt, x, y);\n            });\n        }\n    },\n\n    magnetpointerdblclick: function(evt) {\n\n        this.magnetEvent(evt, function(view, evt, magnet, x, y) {\n            view.magnetpointerdblclick(evt, magnet, x, y);\n        });\n    },\n\n    magnetcontextmenu: function(evt) {\n        if (this.options.preventContextMenu) evt.preventDefault();\n\n        if (this.magnetContextMenuFired) {\n            this.magnetContextMenuFired = false;\n            return;\n        }\n\n        this.magnetContextMenuTrigger(evt);\n    },\n\n    magnetContextMenuTrigger: function(evt) {\n        this.magnetEvent(evt, function(view, evt, magnet, x, y) {\n            view.magnetcontextmenu(evt, magnet, x, y);\n        });\n    },\n\n    onlabel: function(evt) {\n\n        var labelNode = evt.currentTarget;\n        var view = this.findView(labelNode);\n        if (view) {\n\n            evt = normalizeEvent(evt);\n            if (this.guard(evt, view)) return;\n\n            var localPoint = this.snapToGrid(evt.clientX, evt.clientY);\n            view.onlabel(evt, localPoint.x, localPoint.y);\n        }\n    },\n\n    getPointerArgs(evt) {\n        const normalizedEvt = normalizeEvent(evt);\n        const { x, y } = this.snapToGrid(normalizedEvt.clientX, normalizedEvt.clientY);\n        return [normalizedEvt, x, y];\n    },\n\n    delegateDragEvents: function(view, data) {\n\n        data || (data = {});\n        this.eventData({ data: data }, { sourceView: view || null, mousemoved: 0 });\n        this.delegateDocumentEvents(null, data);\n    },\n\n    // Guard the specified event. If the event should be ignored, guard returns `true`.\n    // Otherwise, it returns `false`.\n    guard: function(evt, view) {\n\n        if (evt.type === 'mousedown' && evt.button === 2) {\n            // handled as `contextmenu` type\n            return true;\n        }\n\n        if (this.options.guard && this.options.guard(evt, view)) {\n            return true;\n        }\n\n        if (evt.data && evt.data.guarded !== undefined) {\n            return evt.data.guarded;\n        }\n\n        const { target } = evt;\n\n        if (this.GUARDED_TAG_NAMES.includes(target.tagName)) {\n            return true;\n        }\n\n        if (view && view.model && (view.model instanceof Cell)) {\n            return false;\n        }\n\n        if (this.svg === target || this.el === target || $.contains(this.svg, target)) {\n            return false;\n        }\n\n        return true;    // Event guarded. Paper should not react on it in any way.\n    },\n\n    setGridSize: function(gridSize) {\n\n        const { options } = this;\n        options.gridSize = gridSize;\n\n        if (options.drawGrid && !options.drawGridSize) {\n            // Do not redraw the grid if the `drawGridSize` is set.\n            this.drawGrid();\n        }\n\n        return this;\n    },\n\n    clearGrid: function() {\n\n        if (this.$grid) {\n            this.$grid.css('backgroundImage', 'none');\n        }\n        return this;\n    },\n\n    _getGridRefs: function() {\n\n        if (!this._gridCache) {\n\n            this._gridCache = {\n                root: V('svg', { width: '100%', height: '100%' }, V('defs')),\n                patterns: {},\n                add: function(id, vel) {\n                    V(this.root.node.childNodes[0]).append(vel);\n                    this.patterns[id] = vel;\n                    this.root.append(V('rect', { width: '100%', height: '100%', fill: 'url(#' + id + ')' }));\n                },\n                get: function(id) {\n                    return this.patterns[id];\n                },\n                exist: function(id) {\n                    return this.patterns[id] !== undefined;\n                }\n            };\n        }\n\n        return this._gridCache;\n    },\n\n    setGrid: function(drawGrid) {\n\n        this.clearGrid();\n\n        this._gridCache = null;\n        this._gridSettings = [];\n\n        var optionsList = Array.isArray(drawGrid) ? drawGrid : [drawGrid || {}];\n        optionsList.forEach(function(item) {\n            this._gridSettings.push.apply(this._gridSettings, this._resolveDrawGridOption(item));\n        }, this);\n        return this;\n    },\n\n    _resolveDrawGridOption: function(opt) {\n\n        var namespace = this.constructor.gridPatterns;\n        if (isString(opt) && Array.isArray(namespace[opt])) {\n            return namespace[opt].map(function(item) {\n                return assign({}, item);\n            });\n        }\n\n        var options = opt || { args: [{}] };\n        var isArray = Array.isArray(options);\n        var name = options.name;\n\n        if (!isArray && !name && !options.markup) {\n            name = 'dot';\n        }\n\n        if (name && Array.isArray(namespace[name])) {\n            var pattern = namespace[name].map(function(item) {\n                return assign({}, item);\n            });\n\n            var args = Array.isArray(options.args) ? options.args : [options.args || {}];\n\n            defaults(args[0], omit(opt, 'args'));\n            for (var i = 0; i < args.length; i++) {\n                if (pattern[i]) {\n                    assign(pattern[i], args[i]);\n                }\n            }\n            return pattern;\n        }\n\n        return isArray ? options : [options];\n    },\n\n    drawGrid: function(opt) {\n\n        const gridSize = this.options.drawGridSize || this.options.gridSize;\n        if (gridSize <= 1) {\n            return this.clearGrid();\n        }\n\n        var localOptions = Array.isArray(opt) ? opt : [opt];\n\n        var ctm = this.matrix();\n        var refs = this._getGridRefs();\n\n        this._gridSettings.forEach(function(gridLayerSetting, index) {\n\n            var id = 'pattern_' + index;\n            var options = merge(gridLayerSetting, localOptions[index], {\n                sx: ctm.a || 1,\n                sy: ctm.d || 1,\n                ox: ctm.e || 0,\n                oy: ctm.f || 0\n            });\n\n            options.width = gridSize * (ctm.a || 1) * (options.scaleFactor || 1);\n            options.height = gridSize * (ctm.d || 1) * (options.scaleFactor || 1);\n\n            if (!refs.exist(id)) {\n                refs.add(id, V('pattern', { id: id, patternUnits: 'userSpaceOnUse' }, V(options.markup)));\n            }\n\n            var patternDefVel = refs.get(id);\n\n            if (isFunction(options.update)) {\n                options.update(patternDefVel.node.childNodes[0], options);\n            }\n\n            var x = options.ox % options.width;\n            if (x < 0) x += options.width;\n\n            var y = options.oy % options.height;\n            if (y < 0) y += options.height;\n\n            patternDefVel.attr({\n                x: x,\n                y: y,\n                width: options.width,\n                height: options.height\n            });\n        });\n\n        var patternUri = new XMLSerializer().serializeToString(refs.root.node);\n        patternUri = 'url(data:image/svg+xml;base64,' + btoa(patternUri) + ')';\n\n        this.$grid.css('backgroundImage', patternUri);\n\n        return this;\n    },\n\n    updateBackgroundImage: function(opt) {\n\n        opt = opt || {};\n\n        var backgroundPosition = opt.position || 'center';\n        var backgroundSize = opt.size || 'auto auto';\n\n        var currentScale = this.scale();\n        var currentTranslate = this.translate();\n\n        // backgroundPosition\n        if (isObject(backgroundPosition)) {\n            var x = currentTranslate.tx + (currentScale.sx * (backgroundPosition.x || 0));\n            var y = currentTranslate.ty + (currentScale.sy * (backgroundPosition.y || 0));\n            backgroundPosition = x + 'px ' + y + 'px';\n        }\n\n        // backgroundSize\n        if (isObject(backgroundSize)) {\n            backgroundSize = new Rect(backgroundSize).scale(currentScale.sx, currentScale.sy);\n            backgroundSize = backgroundSize.width + 'px ' + backgroundSize.height + 'px';\n        }\n\n        this.$background.css({\n            backgroundSize: backgroundSize,\n            backgroundPosition: backgroundPosition\n        });\n    },\n\n    drawBackgroundImage: function(img, opt) {\n\n        // Clear the background image if no image provided\n        if (!(img instanceof HTMLImageElement)) {\n            this.$background.css('backgroundImage', '');\n            return;\n        }\n\n        if (!this._background || this._background.id !== opt.id) {\n            // Draw only the last image requested (see drawBackground())\n            return;\n        }\n\n        opt = opt || {};\n\n        var backgroundImage;\n        var backgroundSize = opt.size;\n        var backgroundRepeat = opt.repeat || 'no-repeat';\n        var backgroundOpacity = opt.opacity || 1;\n        var backgroundQuality = Math.abs(opt.quality) || 1;\n        var backgroundPattern = this.constructor.backgroundPatterns[camelCase(backgroundRepeat)];\n\n        if (isFunction(backgroundPattern)) {\n            // 'flip-x', 'flip-y', 'flip-xy', 'watermark' and custom\n            img.width *= backgroundQuality;\n            img.height *= backgroundQuality;\n            var canvas = backgroundPattern(img, opt);\n            if (!(canvas instanceof HTMLCanvasElement)) {\n                throw new Error('dia.Paper: background pattern must return an HTML Canvas instance');\n            }\n\n            backgroundImage = canvas.toDataURL('image/png');\n            backgroundRepeat = 'repeat';\n            if (isObject(backgroundSize)) {\n                // recalculate the tile size if an object passed in\n                backgroundSize.width *= canvas.width / img.width;\n                backgroundSize.height *= canvas.height / img.height;\n            } else if (backgroundSize === undefined) {\n                // calculate the tile size if no provided\n                opt.size = {\n                    width: canvas.width / backgroundQuality,\n                    height: canvas.height / backgroundQuality\n                };\n            }\n        } else {\n            // backgroundRepeat:\n            // no-repeat', 'round', 'space', 'repeat', 'repeat-x', 'repeat-y'\n            backgroundImage = img.src;\n            if (backgroundSize === undefined) {\n                // pass the image size for  the backgroundSize if no size provided\n                opt.size = {\n                    width: img.width,\n                    height: img.height\n                };\n            }\n        }\n\n        this.$background.css({\n            opacity: backgroundOpacity,\n            backgroundRepeat: backgroundRepeat,\n            backgroundImage: 'url(' + backgroundImage + ')'\n        });\n\n        this.updateBackgroundImage(opt);\n    },\n\n    updateBackgroundColor: function(color) {\n\n        this.$el.css('backgroundColor', color || '');\n    },\n\n    drawBackground: function(opt) {\n\n        opt = opt || {};\n\n        this.updateBackgroundColor(opt.color);\n\n        if (opt.image) {\n            opt = this._background = cloneDeep(opt);\n            guid(opt);\n            var img = document.createElement('img');\n            img.onload = this.drawBackgroundImage.bind(this, img, opt);\n            img.src = opt.image;\n        } else {\n            this.drawBackgroundImage(null);\n            this._background = null;\n        }\n\n        return this;\n    },\n\n    setInteractivity: function(value) {\n\n        this.options.interactive = value;\n\n        invoke(this._views, 'setInteractivity', value);\n    },\n\n    // Paper definitions.\n    // ------------------\n\n    isDefined: function(defId) {\n\n        return !!this.svg.getElementById(defId);\n    },\n\n    defineFilter: function(filter) {\n\n        if (!isObject(filter)) {\n            throw new TypeError('dia.Paper: defineFilter() requires 1. argument to be an object.');\n        }\n\n        var filterId = filter.id;\n        var name = filter.name;\n        // Generate a hash code from the stringified filter definition. This gives us\n        // a unique filter ID for different definitions.\n        if (!filterId) {\n            filterId = name + this.svg.id + hashCode(JSON.stringify(filter));\n        }\n        // If the filter already exists in the document,\n        // we're done and we can just use it (reference it using `url()`).\n        // If not, create one.\n        if (!this.isDefined(filterId)) {\n\n            var namespace = _filter;\n            var filterSVGString = namespace[name] && namespace[name](filter.args || {});\n            if (!filterSVGString) {\n                throw new Error('Non-existing filter ' + name);\n            }\n\n            // Set the filter area to be 3x the bounding box of the cell\n            // and center the filter around the cell.\n            var filterAttrs = assign({\n                filterUnits: 'objectBoundingBox',\n                x: -1,\n                y: -1,\n                width: 3,\n                height: 3\n            }, filter.attrs, {\n                id: filterId\n            });\n\n            V(filterSVGString, filterAttrs).appendTo(this.defs);\n        }\n\n        return filterId;\n    },\n\n    defineGradient: function(gradient) {\n        if (!isObject(gradient)) {\n            throw new TypeError('dia.Paper: defineGradient() requires 1. argument to be an object.');\n        }\n        const { svg, defs } = this;\n        const {\n            type,\n            // Generate a hash code from the stringified filter definition. This gives us\n            // a unique filter ID for different definitions.\n            id = type + svg.id + hashCode(JSON.stringify(gradient)),\n            stops,\n            attrs = {}\n        } = gradient;\n        // If the gradient already exists in the document,\n        // we're done and we can just use it (reference it using `url()`).\n        if (this.isDefined(id)) return id;\n        // If not, create one.\n        const stopVEls = toArray(stops).map(({ offset, color, opacity }) => {\n            return V('stop').attr({\n                'offset': offset,\n                'stop-color': color,\n                'stop-opacity': Number.isFinite(opacity) ? opacity : 1\n            });\n        });\n        const gradientVEl = V(type, attrs, stopVEls);\n        gradientVEl.id = id;\n        gradientVEl.appendTo(defs);\n        return id;\n    },\n\n    definePattern: function(pattern) {\n        if (!isObject(pattern)) {\n            throw new TypeError('dia.Paper: definePattern() requires 1. argument to be an object.');\n        }\n        const { svg, defs } = this;\n        const {\n            // Generate a hash code from the stringified filter definition. This gives us\n            // a unique filter ID for different definitions.\n            id = svg.id + hashCode(JSON.stringify(pattern)),\n            markup,\n            attrs = {}\n        } = pattern;\n        if (!markup) {\n            throw new TypeError('dia.Paper: definePattern() requires markup.');\n        }\n        // If the gradient already exists in the document,\n        // we're done and we can just use it (reference it using `url()`).\n        if (this.isDefined(id)) return id;\n        // If not, create one.\n        const patternVEl = V('pattern', {\n            patternUnits: 'userSpaceOnUse'\n        });\n        patternVEl.id = id;\n        patternVEl.attr(attrs);\n        if (typeof markup === 'string') {\n            patternVEl.append(V(markup));\n        } else {\n            const { fragment } = parseDOMJSON(markup);\n            patternVEl.append(fragment);\n        }\n        patternVEl.appendTo(defs);\n        return id;\n    },\n\n    defineMarker: function(marker) {\n        if (!isObject(marker)) {\n            throw new TypeError('dia.Paper: defineMarker() requires the first argument to be an object.');\n        }\n        const { svg, defs } = this;\n        const {\n            // Generate a hash code from the stringified filter definition. This gives us\n            // a unique filter ID for different definitions.\n            id = svg.id + hashCode(JSON.stringify(marker)),\n            // user-provided markup\n            // (e.g. defined when creating link via `attrs/line/sourceMarker/markup`)\n            markup,\n            // user-provided attributes\n            // (e.g. defined when creating link via `attrs/line/sourceMarker/attrs`)\n            // note: `transform` attrs are ignored by browsers\n            attrs = {},\n            // deprecated - use `attrs/markerUnits` instead (which has higher priority)\n            markerUnits = 'userSpaceOnUse'\n        } = marker;\n        // If the marker already exists in the document,\n        // we're done and we can just use it (reference it using `url()`).\n        if (this.isDefined(id)) return id;\n        // If not, create one.\n        const markerVEl = V('marker', {\n            orient: 'auto',\n            overflow: 'visible',\n            markerUnits: markerUnits\n        });\n        markerVEl.id = id;\n        markerVEl.attr(attrs);\n        let markerContentVEl;\n        if (markup) {\n            let markupVEl;\n            if (typeof markup === 'string') {\n                // Marker object has a `markup` property of type string.\n                // - Construct V from the provided string.\n                markupVEl = V(markup);\n                // `markupVEl` is now either a single VEl, or an array of VEls.\n                // - Coerce it to an array.\n                markupVEl = (Array.isArray(markupVEl) ? markupVEl : [markupVEl]);\n            } else {\n                // Marker object has a `markup` property of type object.\n                // - Construct V from the object by parsing it as DOM JSON.\n                const { fragment } = parseDOMJSON(markup);\n                markupVEl = V(fragment).children();\n            }\n            // `markupVEl` is an array with one or more VEls inside.\n            // - If there are multiple VEls, wrap them in a newly-constructed <g> element\n            if (markupVEl.length > 1) {\n                markerContentVEl = V('g').append(markupVEl);\n            } else {\n                markerContentVEl = markupVEl[0];\n            }\n        } else {\n            // Marker object is a flat structure.\n            // - Construct a new V of type `marker.type`.\n            const { type = 'path' } = marker;\n            markerContentVEl = V(type);\n        }\n        // `markerContentVEl` is a single VEl.\n        // Assign additional attributes to it (= context attributes + marker attributes):\n        // - Attribute values are taken from non-special properties of `marker`.\n        const markerAttrs = omit(marker, 'type', 'id', 'markup', 'attrs', 'markerUnits');\n        const markerAttrsKeys = Object.keys(markerAttrs);\n        markerAttrsKeys.forEach((key) => {\n            const value = markerAttrs[key];\n            const markupValue = markerContentVEl.attr(key); // value coming from markupVEl (if any) = higher priority\n            if (markupValue == null) {\n                // Default logic:\n                markerContentVEl.attr(key, value);\n            } else {\n                // Properties with special logic should be added as cases to this switch block:\n                switch(key) {\n                    case 'transform':\n                        // - Prepend `transform` to existing value.\n                        markerContentVEl.attr(key, (value + ' ' + markupValue));\n                        break;\n                }\n            }\n        });\n        markerContentVEl.appendTo(markerVEl);\n        markerVEl.appendTo(defs);\n        return id;\n    }\n\n}, {\n\n    sorting: sortingTypes,\n\n    Layers: LayersNames,\n\n    backgroundPatterns: {\n\n        flipXy: function(img) {\n            // d b\n            // q p\n\n            var canvas = document.createElement('canvas');\n            var imgWidth = img.width;\n            var imgHeight = img.height;\n\n            canvas.width = 2 * imgWidth;\n            canvas.height = 2 * imgHeight;\n\n            var ctx = canvas.getContext('2d');\n            // top-left image\n            ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n            // xy-flipped bottom-right image\n            ctx.setTransform(-1, 0, 0, -1, canvas.width, canvas.height);\n            ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n            // x-flipped top-right image\n            ctx.setTransform(-1, 0, 0, 1, canvas.width, 0);\n            ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n            // y-flipped bottom-left image\n            ctx.setTransform(1, 0, 0, -1, 0, canvas.height);\n            ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n\n            return canvas;\n        },\n\n        flipX: function(img) {\n            // d b\n            // d b\n\n            var canvas = document.createElement('canvas');\n            var imgWidth = img.width;\n            var imgHeight = img.height;\n\n            canvas.width = imgWidth * 2;\n            canvas.height = imgHeight;\n\n            var ctx = canvas.getContext('2d');\n            // left image\n            ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n            // flipped right image\n            ctx.translate(2 * imgWidth, 0);\n            ctx.scale(-1, 1);\n            ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n\n            return canvas;\n        },\n\n        flipY: function(img) {\n            // d d\n            // q q\n\n            var canvas = document.createElement('canvas');\n            var imgWidth = img.width;\n            var imgHeight = img.height;\n\n            canvas.width = imgWidth;\n            canvas.height = imgHeight * 2;\n\n            var ctx = canvas.getContext('2d');\n            // top image\n            ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n            // flipped bottom image\n            ctx.translate(0, 2 * imgHeight);\n            ctx.scale(1, -1);\n            ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n\n            return canvas;\n        },\n\n        watermark: function(img, opt) {\n            //   d\n            // d\n\n            opt = opt || {};\n\n            var imgWidth = img.width;\n            var imgHeight = img.height;\n\n            var canvas = document.createElement('canvas');\n            canvas.width = imgWidth * 3;\n            canvas.height = imgHeight * 3;\n\n            var ctx = canvas.getContext('2d');\n            var angle = isNumber(opt.watermarkAngle) ? -opt.watermarkAngle : -20;\n            var radians = toRad(angle);\n            var stepX = canvas.width / 4;\n            var stepY = canvas.height / 4;\n\n            for (var i = 0; i < 4; i++) {\n                for (var j = 0; j < 4; j++) {\n                    if ((i + j) % 2 > 0) {\n                        // reset the current transformations\n                        ctx.setTransform(1, 0, 0, 1, (2 * i - 1) * stepX, (2 * j - 1) * stepY);\n                        ctx.rotate(radians);\n                        ctx.drawImage(img, -imgWidth / 2, -imgHeight / 2, imgWidth, imgHeight);\n                    }\n                }\n            }\n\n            return canvas;\n        }\n    },\n\n    gridPatterns: {\n        dot: [{\n            color: '#AAAAAA',\n            thickness: 1,\n            markup: 'rect',\n            update: function(el, opt) {\n                V(el).attr({\n                    width: opt.thickness * opt.sx,\n                    height: opt.thickness * opt.sy,\n                    fill: opt.color\n                });\n            }\n        }],\n        fixedDot: [{\n            color: '#AAAAAA',\n            thickness: 1,\n            markup: 'rect',\n            update: function(el, opt) {\n                var size = opt.sx <= 1 ? opt.thickness * opt.sx : opt.thickness;\n                V(el).attr({ width: size, height: size, fill: opt.color });\n            }\n        }],\n        mesh: [{\n            color: '#AAAAAA',\n            thickness: 1,\n            markup: 'path',\n            update: function(el, opt) {\n\n                var d;\n                var width = opt.width;\n                var height = opt.height;\n                var thickness = opt.thickness;\n\n                if (width - thickness >= 0 && height - thickness >= 0) {\n                    d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n                } else {\n                    d = 'M 0 0 0 0';\n                }\n\n                V(el).attr({ 'd': d, stroke: opt.color, 'stroke-width': opt.thickness });\n            }\n        }],\n        doubleMesh: [{\n            color: '#AAAAAA',\n            thickness: 1,\n            markup: 'path',\n            update: function(el, opt) {\n\n                var d;\n                var width = opt.width;\n                var height = opt.height;\n                var thickness = opt.thickness;\n\n                if (width - thickness >= 0 && height - thickness >= 0) {\n                    d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n                } else {\n                    d = 'M 0 0 0 0';\n                }\n\n                V(el).attr({ 'd': d, stroke: opt.color, 'stroke-width': opt.thickness });\n            }\n        }, {\n            color: '#000000',\n            thickness: 3,\n            scaleFactor: 4,\n            markup: 'path',\n            update: function(el, opt) {\n\n                var d;\n                var width = opt.width;\n                var height = opt.height;\n                var thickness = opt.thickness;\n\n                if (width - thickness >= 0 && height - thickness >= 0) {\n                    d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n                } else {\n                    d = 'M 0 0 0 0';\n                }\n\n                V(el).attr({ 'd': d, stroke: opt.color, 'stroke-width': opt.thickness });\n            }\n        }]\n    }\n});\n\n","import * as mvc from '../mvc/index.mjs';\n\nexport const ToolView = mvc.View.extend({\n    name: null,\n    tagName: 'g',\n    className: 'tool',\n    svgElement: true,\n    _visible: true,\n\n    init: function() {\n        var name = this.name;\n        if (name) this.vel.attr('data-tool-name', name);\n    },\n\n    configure: function(view, toolsView) {\n        this.relatedView = view;\n        this.paper = view.paper;\n        this.parentView = toolsView;\n        this.simulateRelatedView(this.el);\n        // Delegate events in case the ToolView was removed from the DOM and reused.\n        this.delegateEvents();\n        return this;\n    },\n\n    simulateRelatedView: function(el) {\n        if (el) el.setAttribute('model-id', this.relatedView.model.id);\n    },\n\n    getName: function() {\n        return this.name;\n    },\n\n    show: function() {\n        this.el.style.display = '';\n        this._visible = true;\n    },\n\n    hide: function() {\n        this.el.style.display = 'none';\n        this._visible = false;\n    },\n\n    isVisible: function() {\n        return !!this._visible;\n    },\n\n    focus: function() {\n        var opacity = this.options.focusOpacity;\n        if (isFinite(opacity)) this.el.style.opacity = opacity;\n        this.parentView.focusTool(this);\n    },\n\n    blur: function() {\n        this.el.style.opacity = '';\n        this.parentView.blurTool(this);\n    },\n\n    update: function() {\n        // to be overridden\n    },\n\n    guard: function(evt) {\n        // Let the context-menu event bubble up to the relatedView\n        const { paper, relatedView } = this;\n        if (!paper || !relatedView) return true;\n        return paper.guard(evt, relatedView);\n    }\n});\n\n","import * as mvc from '../mvc/index.mjs';\nimport * as util from '../util/index.mjs';\nimport { CellView } from './CellView.mjs';\nimport { LayersNames } from './PaperLayer.mjs';\nimport { ToolView } from './ToolView.mjs';\n\nexport const ToolsView = mvc.View.extend({\n    tagName: 'g',\n    className: 'tools',\n    svgElement: true,\n    tools: null,\n    isRendered: false,\n    options: {\n        tools: null,\n        relatedView: null,\n        name: null,\n        // layer?: LayersNames.TOOLS\n        // z?: number\n    },\n\n    configure: function(options) {\n        options = util.assign(this.options, options);\n        var tools = options.tools;\n        if (!Array.isArray(tools)) return this;\n        var relatedView = options.relatedView;\n        if (!(relatedView instanceof CellView)) return this;\n        var views = this.tools = [];\n        for (var i = 0, n = tools.length; i < n; i++) {\n            var tool = tools[i];\n            if (!(tool instanceof ToolView)) continue;\n            tool.configure(relatedView, this);\n            this.vel.append(tool.el);\n            views.push(tool);\n        }\n        this.isRendered = false;\n        relatedView.requestUpdate(relatedView.getFlag('TOOLS'));\n        return this;\n    },\n\n    getName: function() {\n        return this.options.name;\n    },\n\n    update: function(opt) {\n\n        opt || (opt = {});\n        var tools = this.tools;\n        if (!tools) return this;\n        var isRendered = this.isRendered;\n        for (var i = 0, n = tools.length; i < n; i++) {\n            var tool = tools[i];\n            if (!isRendered) {\n                // First update executes render()\n                tool.render();\n            } else if (opt.tool !== tool.cid && tool.isVisible()) {\n                tool.update();\n            }\n        }\n        if (!this.isMounted()) {\n            this.mount();\n        }\n        if (!isRendered) {\n            // Make sure tools are visible (if they were hidden and the tool removed)\n            this.blurTool();\n            this.isRendered = true;\n        }\n        return this;\n    },\n\n    focusTool: function(focusedTool) {\n\n        var tools = this.tools;\n        if (!tools) return this;\n        for (var i = 0, n = tools.length; i < n; i++) {\n            var tool = tools[i];\n            if (focusedTool === tool) {\n                tool.show();\n            } else {\n                tool.hide();\n            }\n        }\n        return this;\n    },\n\n    blurTool: function(blurredTool) {\n        var tools = this.tools;\n        if (!tools) return this;\n        for (var i = 0, n = tools.length; i < n; i++) {\n            var tool = tools[i];\n            if (tool !== blurredTool && !tool.isVisible()) {\n                tool.show();\n                tool.update();\n            }\n        }\n        return this;\n    },\n\n    hide: function() {\n        return this.focusTool(null);\n    },\n\n    show: function() {\n        return this.blurTool(null);\n    },\n\n    onRemove: function() {\n        var tools = this.tools;\n        if (!tools) return this;\n        for (var i = 0, n = tools.length; i < n; i++) {\n            tools[i].remove();\n        }\n        this.tools = null;\n    },\n\n    mount: function() {\n        const { options, el } = this;\n        const { relatedView, layer = LayersNames.TOOLS, z } = options;\n        if (relatedView) {\n            if (layer) {\n                relatedView.paper.getLayerView(layer).insertSortedNode(el, z);\n            } else {\n                relatedView.el.appendChild(el);\n            }\n        }\n        return this;\n    }\n\n});\n","export const env = {\n\n    _results: {},\n\n    _tests: {\n\n        svgforeignobject: function() {\n            return !!document.createElementNS &&\n                /SVGForeignObject/.test(({}).toString.call(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')));\n        }\n    },\n\n    addTest: function(name, fn) {\n\n        return this._tests[name] = fn;\n    },\n\n    test: function(name) {\n\n        var fn = this._tests[name];\n\n        if (!fn) {\n            throw new Error('Test not defined (\"' + name + '\"). Use `joint.env.addTest(name, fn) to add a new test.`');\n        }\n\n        var result = this._results[name];\n\n        if (typeof result !== 'undefined') {\n            return result;\n        }\n\n        try {\n            result = fn();\n        } catch (error) {\n            result = false;\n        }\n\n        // Cache the test result.\n        this._results[name] = result;\n\n        return result;\n    }\n};\n","import { Element } from '../dia/Element.mjs';\nimport { ElementView } from '../dia/ElementView.mjs';\nimport { omit, assign, sanitizeHTML, merge, has, breakText, setByPath } from '../util/index.mjs';\nimport { env } from '../env/index.mjs';\n\nexport const Generic = Element.define('basic.Generic', {\n    attrs: {\n        '.': { fill: '#ffffff', stroke: 'none' }\n    }\n});\n\nexport const Rect = Generic.define('basic.Rect', {\n    attrs: {\n        'rect': {\n            fill: '#ffffff',\n            stroke: '#000000',\n            width: 100,\n            height: 60\n        },\n        'text': {\n            fill: '#000000',\n            text: '',\n            'font-size': 14,\n            'ref-x': .5,\n            'ref-y': .5,\n            'text-anchor': 'middle',\n            'y-alignment': 'middle',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect/></g><text/></g>'\n});\n\nexport const TextView = ElementView.extend({\n\n    presentationAttributes: ElementView.addPresentationAttributes({\n        // The element view is not automatically re-scaled to fit the model size\n        // when the attribute 'attrs' is changed.\n        attrs: ['SCALE']\n    }),\n\n    confirmUpdate: function() {\n        var flags = ElementView.prototype.confirmUpdate.apply(this, arguments);\n        if (this.hasFlag(flags, 'SCALE')) {\n            this.resize();\n            flags = this.removeFlag(flags, 'SCALE');\n        }\n        return flags;\n    }\n});\n\nexport const Text = Generic.define('basic.Text', {\n    attrs: {\n        'text': {\n            'font-size': 18,\n            fill: '#000000'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><text/></g></g>',\n});\n\nexport const Circle = Generic.define('basic.Circle', {\n    size: { width: 60, height: 60 },\n    attrs: {\n        'circle': {\n            fill: '#ffffff',\n            stroke: '#000000',\n            r: 30,\n            cx: 30,\n            cy: 30\n        },\n        'text': {\n            'font-size': 14,\n            text: '',\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-y': .5,\n            'y-alignment': 'middle',\n            fill: '#000000',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle/></g><text/></g>',\n});\n\nexport const Ellipse = Generic.define('basic.Ellipse', {\n    size: { width: 60, height: 40 },\n    attrs: {\n        'ellipse': {\n            fill: '#ffffff',\n            stroke: '#000000',\n            rx: 30,\n            ry: 20,\n            cx: 30,\n            cy: 20\n        },\n        'text': {\n            'font-size': 14,\n            text: '',\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-y': .5,\n            'y-alignment': 'middle',\n            fill: '#000000',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><ellipse/></g><text/></g>',\n});\n\nexport const Polygon = Generic.define('basic.Polygon', {\n    size: { width: 60, height: 40 },\n    attrs: {\n        'polygon': {\n            fill: '#ffffff',\n            stroke: '#000000'\n        },\n        'text': {\n            'font-size': 14,\n            text: '',\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-dy': 20,\n            'y-alignment': 'middle',\n            fill: '#000000',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon/></g><text/></g>',\n});\n\nexport const Polyline = Generic.define('basic.Polyline', {\n    size: { width: 60, height: 40 },\n    attrs: {\n        'polyline': {\n            fill: '#ffffff',\n            stroke: '#000000'\n        },\n        'text': {\n            'font-size': 14,\n            text: '',\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-dy': 20,\n            'y-alignment': 'middle',\n            fill: '#000000',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><polyline/></g><text/></g>',\n});\n\nexport const Image = Generic.define('basic.Image', {\n    attrs: {\n        'text': {\n            'font-size': 14,\n            text: '',\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-dy': 20,\n            'y-alignment': 'middle',\n            fill: '#000000',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><image/></g><text/></g>',\n});\n\nexport const Path = Generic.define('basic.Path', {\n    size: { width: 60, height: 60 },\n    attrs: {\n        'path': {\n            fill: '#ffffff',\n            stroke: '#000000'\n        },\n        'text': {\n            'font-size': 14,\n            text: '',\n            'text-anchor': 'middle',\n            'ref': 'path',\n            'ref-x': .5,\n            'ref-dy': 10,\n            fill: '#000000',\n            'font-family': 'Arial, helvetica, sans-serif'\n        }\n    }\n\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><path/></g><text/></g>',\n});\n\nexport const Rhombus = Path.define('basic.Rhombus', {\n    attrs: {\n        'path': {\n            d: 'M 30 0 L 60 30 30 60 0 30 z'\n        },\n        'text': {\n            'ref-y': .5,\n            'ref-dy': null,\n            'y-alignment': 'middle'\n        }\n    }\n});\n\nconst svgForeignObjectSupported = env.test('svgforeignobject');\n\nexport const TextBlock = Generic.define('basic.TextBlock', {\n    // see joint.css for more element styles\n    attrs: {\n        rect: {\n            fill: '#ffffff',\n            stroke: '#000000',\n            width: 80,\n            height: 100\n        },\n        text: {\n            fill: '#000000',\n            'font-size': 14,\n            'font-family': 'Arial, helvetica, sans-serif'\n        },\n        '.content': {\n            text: '',\n            'ref-x': .5,\n            'ref-y': .5,\n            'y-alignment': 'middle',\n            'x-alignment': 'middle'\n        }\n    },\n\n    content: ''\n}, {\n    markup: [\n        '<g class=\"rotatable\">',\n        '<g class=\"scalable\"><rect/></g>',\n        svgForeignObjectSupported\n            ? '<foreignObject class=\"fobj\"><body xmlns=\"http://www.w3.org/1999/xhtml\"><div class=\"content\"/></body></foreignObject>'\n            : '<text class=\"content\"/>',\n        '</g>'\n    ].join(''),\n\n    initialize: function() {\n\n        this.listenTo(this, 'change:size', this.updateSize);\n        this.listenTo(this, 'change:content', this.updateContent);\n        this.updateSize(this, this.get('size'));\n        this.updateContent(this, this.get('content'));\n        Generic.prototype.initialize.apply(this, arguments);\n    },\n\n    updateSize: function(cell, size) {\n\n        // Selector `foreignObject' doesn't work across all browsers, we're using class selector instead.\n        // We have to clone size as we don't want attributes.div.style to be same object as attributes.size.\n        this.attr({\n            '.fobj': assign({}, size),\n            div: {\n                style: assign({}, size)\n            }\n        });\n    },\n\n    updateContent: function(cell, content) {\n\n        if (svgForeignObjectSupported) {\n\n            // Content element is a <div> element.\n            this.attr({\n                '.content': {\n                    html: sanitizeHTML(content)\n                }\n            });\n\n        } else {\n\n            // Content element is a <text> element.\n            // SVG elements don't have innerHTML attribute.\n            this.attr({\n                '.content': {\n                    text: content\n                }\n            });\n        }\n    },\n\n    // Here for backwards compatibility:\n    setForeignObjectSize: function() {\n\n        this.updateSize.apply(this, arguments);\n    },\n\n    // Here for backwards compatibility:\n    setDivContent: function() {\n\n        this.updateContent.apply(this, arguments);\n    }\n});\n\n// TextBlockView implements the fallback for IE when no foreignObject exists and\n// the text needs to be manually broken.\nexport const TextBlockView = ElementView.extend({\n\n    presentationAttributes: svgForeignObjectSupported\n        ? ElementView.prototype.presentationAttributes\n        : ElementView.addPresentationAttributes({\n            content: ['CONTENT'],\n            size: ['CONTENT']\n        }),\n\n    initFlag: ['RENDER', 'CONTENT'],\n\n    confirmUpdate: function() {\n        var flags = ElementView.prototype.confirmUpdate.apply(this, arguments);\n        if (this.hasFlag(flags, 'CONTENT')) {\n            this.updateContent(this.model);\n            flags = this.removeFlag(flags, 'CONTENT');\n        }\n        return flags;\n    },\n\n    update: function(_, renderingOnlyAttrs) {\n\n        var model = this.model;\n\n        if (!svgForeignObjectSupported) {\n\n            // Update everything but the content first.\n            var noTextAttrs = omit(renderingOnlyAttrs || model.get('attrs'), '.content');\n            ElementView.prototype.update.call(this, model, noTextAttrs);\n\n            if (!renderingOnlyAttrs || has(renderingOnlyAttrs, '.content')) {\n                // Update the content itself.\n                this.updateContent(model, renderingOnlyAttrs);\n            }\n\n        } else {\n\n            ElementView.prototype.update.call(this, model, renderingOnlyAttrs);\n        }\n    },\n\n    updateContent: function(cell, renderingOnlyAttrs) {\n\n        // Create copy of the text attributes\n        var textAttrs = merge({}, (renderingOnlyAttrs || cell.get('attrs'))['.content']);\n\n        textAttrs = omit(textAttrs, 'text');\n\n        // Break the content to fit the element size taking into account the attributes\n        // set on the model.\n        var text = breakText(cell.get('content'), cell.get('size'), textAttrs, {\n            // measuring sandbox svg document\n            svgDocument: this.paper.svg\n        });\n\n        // Create a new attrs with same structure as the model attrs { text: { *textAttributes* }}\n        var attrs = setByPath({}, '.content', textAttrs, '/');\n\n        // Replace text attribute with the one we just processed.\n        attrs['.content'].text = text;\n\n        // Update the view using renderingOnlyAttributes parameter.\n        ElementView.prototype.update.call(this, cell, attrs);\n    }\n});\n","import V from '../V/index.mjs';\nimport { Element } from '../dia/Element.mjs';\nimport { Link as LinkBase } from '../dia/Link.mjs';\nimport { isPercentage, assign } from '../util/index.mjs';\nimport { attributes } from '../dia/attributes/index.mjs';\nimport { env } from '../env/index.mjs';\n\n\n// ELEMENTS\n\nexport const Rectangle = Element.define('standard.Rectangle', {\n    attrs: {\n        body: {\n            refWidth: '100%',\n            refHeight: '100%',\n            strokeWidth: 2,\n            stroke: '#000000',\n            fill: '#FFFFFF'\n        },\n        label: {\n            textVerticalAnchor: 'middle',\n            textAnchor: 'middle',\n            refX: '50%',\n            refY: '50%',\n            fontSize: 14,\n            fill: '#333333'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'rect',\n        selector: 'body',\n    }, {\n        tagName: 'text',\n        selector: 'label'\n    }]\n});\n\nexport const Circle = Element.define('standard.Circle', {\n    attrs: {\n        body: {\n            refCx: '50%',\n            refCy: '50%',\n            refR: '50%',\n            strokeWidth: 2,\n            stroke: '#333333',\n            fill: '#FFFFFF'\n        },\n        label: {\n            textVerticalAnchor: 'middle',\n            textAnchor: 'middle',\n            refX: '50%',\n            refY: '50%',\n            fontSize: 14,\n            fill: '#333333'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'circle',\n        selector: 'body'\n    }, {\n        tagName: 'text',\n        selector: 'label'\n    }]\n});\n\nexport const Ellipse = Element.define('standard.Ellipse', {\n    attrs: {\n        body: {\n            refCx: '50%',\n            refCy: '50%',\n            refRx: '50%',\n            refRy: '50%',\n            strokeWidth: 2,\n            stroke: '#333333',\n            fill: '#FFFFFF'\n        },\n        label: {\n            textVerticalAnchor: 'middle',\n            textAnchor: 'middle',\n            refX: '50%',\n            refY: '50%',\n            fontSize: 14,\n            fill: '#333333'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'ellipse',\n        selector: 'body'\n    }, {\n        tagName: 'text',\n        selector: 'label'\n    }]\n});\n\nexport const Path = Element.define('standard.Path', {\n    attrs: {\n        body: {\n            refD: 'M 0 0 L 10 0 10 10 0 10 Z',\n            strokeWidth: 2,\n            stroke: '#333333',\n            fill: '#FFFFFF'\n        },\n        label: {\n            textVerticalAnchor: 'middle',\n            textAnchor: 'middle',\n            refX: '50%',\n            refY: '50%',\n            fontSize: 14,\n            fill: '#333333'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'path',\n        selector: 'body'\n    }, {\n        tagName: 'text',\n        selector: 'label'\n    }]\n});\n\nexport const Polygon = Element.define('standard.Polygon', {\n    attrs: {\n        body: {\n            refPoints: '0 0 10 0 10 10 0 10',\n            strokeWidth: 2,\n            stroke: '#333333',\n            fill: '#FFFFFF'\n        },\n        label: {\n            textVerticalAnchor: 'middle',\n            textAnchor: 'middle',\n            refX: '50%',\n            refY: '50%',\n            fontSize: 14,\n            fill: '#333333'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'polygon',\n        selector: 'body'\n    }, {\n        tagName: 'text',\n        selector: 'label'\n    }]\n});\n\nexport const Polyline = Element.define('standard.Polyline', {\n    attrs: {\n        body: {\n            refPoints: '0 0 10 0 10 10 0 10 0 0',\n            strokeWidth: 2,\n            stroke: '#333333',\n            fill: '#FFFFFF'\n        },\n        label: {\n            textVerticalAnchor: 'middle',\n            textAnchor: 'middle',\n            refX: '50%',\n            refY: '50%',\n            fontSize: 14,\n            fill: '#333333'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'polyline',\n        selector: 'body'\n    }, {\n        tagName: 'text',\n        selector: 'label'\n    }]\n});\n\nexport const Image = Element.define('standard.Image', {\n    attrs: {\n        image: {\n            refWidth: '100%',\n            refHeight: '100%',\n            // xlinkHref: '[URL]'\n        },\n        label: {\n            textVerticalAnchor: 'top',\n            textAnchor: 'middle',\n            refX: '50%',\n            refY: '100%',\n            refY2: 10,\n            fontSize: 14,\n            fill: '#333333'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'image',\n        selector: 'image'\n    }, {\n        tagName: 'text',\n        selector: 'label'\n    }]\n});\n\nexport const BorderedImage = Element.define('standard.BorderedImage', {\n    attrs: {\n        border: {\n            refWidth: '100%',\n            refHeight: '100%',\n            stroke: '#333333',\n            strokeWidth: 2\n        },\n        background: {\n            refWidth: -1,\n            refHeight: -1,\n            x: 0.5,\n            y: 0.5,\n            fill: '#FFFFFF'\n        },\n        image: {\n            // xlinkHref: '[URL]'\n            refWidth: -1,\n            refHeight: -1,\n            x: 0.5,\n            y: 0.5\n        },\n        label: {\n            textVerticalAnchor: 'top',\n            textAnchor: 'middle',\n            refX: '50%',\n            refY: '100%',\n            refY2: 10,\n            fontSize: 14,\n            fill: '#333333'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'rect',\n        selector: 'background',\n        attributes: {\n            'stroke': 'none'\n        }\n    }, {\n        tagName: 'image',\n        selector: 'image'\n    }, {\n        tagName: 'rect',\n        selector: 'border',\n        attributes: {\n            'fill': 'none'\n        }\n    }, {\n        tagName: 'text',\n        selector: 'label'\n    }]\n});\n\nexport const EmbeddedImage = Element.define('standard.EmbeddedImage', {\n    attrs: {\n        body: {\n            refWidth: '100%',\n            refHeight: '100%',\n            stroke: '#333333',\n            fill: '#FFFFFF',\n            strokeWidth: 2\n        },\n        image: {\n            // xlinkHref: '[URL]'\n            refWidth: '30%',\n            refHeight: -20,\n            x: 10,\n            y: 10,\n            preserveAspectRatio: 'xMidYMin'\n        },\n        label: {\n            textVerticalAnchor: 'top',\n            textAnchor: 'left',\n            refX: '30%',\n            refX2: 20, // 10 + 10\n            refY: 10,\n            fontSize: 14,\n            fill: '#333333'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'rect',\n        selector: 'body'\n    }, {\n        tagName: 'image',\n        selector: 'image'\n    }, {\n        tagName: 'text',\n        selector: 'label'\n    }]\n});\n\nexport const InscribedImage = Element.define('standard.InscribedImage', {\n    attrs: {\n        border: {\n            refRx: '50%',\n            refRy: '50%',\n            refCx: '50%',\n            refCy: '50%',\n            stroke: '#333333',\n            strokeWidth: 2\n        },\n        background: {\n            refRx: '50%',\n            refRy: '50%',\n            refCx: '50%',\n            refCy: '50%',\n            fill: '#FFFFFF'\n        },\n        image: {\n            // The image corners touch the border when its size is Math.sqrt(2) / 2 = 0.707.. ~= 70%\n            refWidth: '68%',\n            refHeight: '68%',\n            // The image offset is calculated as (100% - 68%) / 2\n            refX: '16%',\n            refY: '16%',\n            preserveAspectRatio: 'xMidYMid'\n            // xlinkHref: '[URL]'\n        },\n        label: {\n            textVerticalAnchor: 'top',\n            textAnchor: 'middle',\n            refX: '50%',\n            refY: '100%',\n            refY2: 10,\n            fontSize: 14,\n            fill: '#333333'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'ellipse',\n        selector: 'background'\n    }, {\n        tagName: 'image',\n        selector: 'image'\n    }, {\n        tagName: 'ellipse',\n        selector: 'border',\n        attributes: {\n            'fill': 'none'\n        }\n    }, {\n        tagName: 'text',\n        selector: 'label'\n    }]\n});\n\nexport const HeaderedRectangle = Element.define('standard.HeaderedRectangle', {\n    attrs: {\n        body: {\n            refWidth: '100%',\n            refHeight: '100%',\n            strokeWidth: 2,\n            stroke: '#000000',\n            fill: '#FFFFFF'\n        },\n        header: {\n            refWidth: '100%',\n            height: 30,\n            strokeWidth: 2,\n            stroke: '#000000',\n            fill: '#FFFFFF'\n        },\n        headerText: {\n            textVerticalAnchor: 'middle',\n            textAnchor: 'middle',\n            refX: '50%',\n            refY: 15,\n            fontSize: 16,\n            fill: '#333333'\n        },\n        bodyText: {\n            textVerticalAnchor: 'middle',\n            textAnchor: 'middle',\n            refX: '50%',\n            refY: '50%',\n            refY2: 15,\n            fontSize: 14,\n            fill: '#333333'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'rect',\n        selector: 'body'\n    }, {\n        tagName: 'rect',\n        selector: 'header'\n    }, {\n        tagName: 'text',\n        selector: 'headerText'\n    }, {\n        tagName: 'text',\n        selector: 'bodyText'\n    }]\n});\n\nvar CYLINDER_TILT = 10;\n\nexport const Cylinder = Element.define('standard.Cylinder', {\n    attrs: {\n        body: {\n            lateralArea: CYLINDER_TILT,\n            fill: '#FFFFFF',\n            stroke: '#333333',\n            strokeWidth: 2\n        },\n        top: {\n            refCx: '50%',\n            cy: CYLINDER_TILT,\n            refRx: '50%',\n            ry: CYLINDER_TILT,\n            fill: '#FFFFFF',\n            stroke: '#333333',\n            strokeWidth: 2\n        },\n        label: {\n            textVerticalAnchor: 'middle',\n            textAnchor: 'middle',\n            refX: '50%',\n            refY: '100%',\n            refY2: 15,\n            fontSize: 14,\n            fill: '#333333'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'path',\n        selector: 'body'\n    }, {\n        tagName: 'ellipse',\n        selector: 'top'\n    }, {\n        tagName: 'text',\n        selector: 'label'\n    }],\n\n    topRy: function(t, opt) {\n        // getter\n        if (t === undefined) return this.attr('body/lateralArea');\n\n        // setter\n        var isPercentageSetter = isPercentage(t);\n\n        var bodyAttrs = { lateralArea: t };\n        var topAttrs = isPercentageSetter\n            ? { refCy: t, refRy: t, cy: null, ry: null }\n            : { refCy: null, refRy: null, cy: t, ry: t };\n\n        return this.attr({ body: bodyAttrs, top: topAttrs }, opt);\n    }\n\n}, {\n    attributes: {\n        lateralArea: {\n            set: function(t, refBBox) {\n                var isPercentageSetter = isPercentage(t);\n                if (isPercentageSetter) t = parseFloat(t) / 100;\n\n                var x = refBBox.x;\n                var y = refBBox.y;\n                var w = refBBox.width;\n                var h = refBBox.height;\n\n                // curve control point variables\n                var rx = w / 2;\n                var ry = isPercentageSetter ? (h * t) : t;\n\n                var kappa = V.KAPPA;\n                var cx = kappa * rx;\n                var cy = kappa * (isPercentageSetter ? (h * t) : t);\n\n                // shape variables\n                var xLeft = x;\n                var xCenter = x + (w / 2);\n                var xRight = x + w;\n\n                var ySideTop = y + ry;\n                var yCurveTop = ySideTop - ry;\n                var ySideBottom = y + h - ry;\n                var yCurveBottom = y + h;\n\n                // return calculated shape\n                var data = [\n                    'M', xLeft, ySideTop,\n                    'L', xLeft, ySideBottom,\n                    'C', x, (ySideBottom + cy), (xCenter - cx), yCurveBottom, xCenter, yCurveBottom,\n                    'C', (xCenter + cx), yCurveBottom, xRight, (ySideBottom + cy), xRight, ySideBottom,\n                    'L', xRight, ySideTop,\n                    'C', xRight, (ySideTop - cy), (xCenter + cx), yCurveTop, xCenter, yCurveTop,\n                    'C', (xCenter - cx), yCurveTop, xLeft, (ySideTop - cy), xLeft, ySideTop,\n                    'Z'\n                ];\n                return { d: data.join(' ') };\n            }\n        }\n    }\n});\n\nvar foLabelMarkup = {\n    tagName: 'foreignObject',\n    selector: 'foreignObject',\n    attributes: {\n        'overflow': 'hidden'\n    },\n    children: [{\n        tagName: 'div',\n        namespaceURI: 'http://www.w3.org/1999/xhtml',\n        selector: 'label',\n        style: {\n            width: '100%',\n            height: '100%',\n            position: 'static',\n            backgroundColor: 'transparent',\n            textAlign: 'center',\n            margin: 0,\n            padding: '0px 5px',\n            boxSizing: 'border-box',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n        }\n    }]\n};\n\nvar svgLabelMarkup = {\n    tagName: 'text',\n    selector: 'label',\n    attributes: {\n        'text-anchor': 'middle'\n    }\n};\n\nvar labelMarkup = (env.test('svgforeignobject')) ? foLabelMarkup : svgLabelMarkup;\n\nexport const TextBlock = Element.define('standard.TextBlock', {\n    attrs: {\n        body: {\n            refWidth: '100%',\n            refHeight: '100%',\n            stroke: '#333333',\n            fill: '#ffffff',\n            strokeWidth: 2\n        },\n        foreignObject: {\n            refWidth: '100%',\n            refHeight: '100%'\n        },\n        label: {\n            style: {\n                fontSize: 14\n            }\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'rect',\n        selector: 'body'\n    }, labelMarkup]\n}, {\n    attributes: {\n        text: {\n            set: function(text, refBBox, node, attrs) {\n                if (node instanceof HTMLElement) {\n                    node.textContent = text;\n                } else {\n                    // No foreign object\n                    var style = attrs.style || {};\n                    var wrapValue = { text: text, width: -5, height: '100%' };\n                    var wrapAttrs = assign({ textVerticalAnchor: 'middle' }, style);\n                    attributes.textWrap.set.call(this, wrapValue, refBBox, node, wrapAttrs);\n                    return { fill: style.color || null };\n                }\n            },\n            position: function(text, refBBox, node) {\n                // No foreign object\n                if (node instanceof SVGElement) return refBBox.center();\n            }\n        }\n    }\n});\n\n// LINKS\n\nexport const Link = LinkBase.define('standard.Link', {\n    attrs: {\n        line: {\n            connection: true,\n            stroke: '#333333',\n            strokeWidth: 2,\n            strokeLinejoin: 'round',\n            targetMarker: {\n                'type': 'path',\n                'd': 'M 10 -5 0 0 10 5 z'\n            }\n        },\n        wrapper: {\n            connection: true,\n            strokeWidth: 10,\n            strokeLinejoin: 'round'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'path',\n        selector: 'wrapper',\n        attributes: {\n            'fill': 'none',\n            'cursor': 'pointer',\n            'stroke': 'transparent',\n            'stroke-linecap': 'round'\n        }\n    }, {\n        tagName: 'path',\n        selector: 'line',\n        attributes: {\n            'fill': 'none',\n            'pointer-events': 'none'\n        }\n    }]\n});\n\nexport const DoubleLink = LinkBase.define('standard.DoubleLink', {\n    attrs: {\n        line: {\n            connection: true,\n            stroke: '#DDDDDD',\n            strokeWidth: 4,\n            strokeLinejoin: 'round',\n            targetMarker: {\n                type: 'path',\n                stroke: '#000000',\n                d: 'M 10 -3 10 -10 -2 0 10 10 10 3'\n            }\n        },\n        outline: {\n            connection: true,\n            stroke: '#000000',\n            strokeWidth: 6,\n            strokeLinejoin: 'round'\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'path',\n        selector: 'outline',\n        attributes: {\n            'fill': 'none'\n        }\n    }, {\n        tagName: 'path',\n        selector: 'line',\n        attributes: {\n            'fill': 'none'\n        }\n    }]\n});\n\nexport const ShadowLink = LinkBase.define('standard.ShadowLink', {\n    attrs: {\n        line: {\n            connection: true,\n            stroke: '#FF0000',\n            strokeWidth: 20,\n            strokeLinejoin: 'round',\n            targetMarker: {\n                'type': 'path',\n                'stroke': 'none',\n                'd': 'M 0 -10 -10 0 0 10 z'\n            },\n            sourceMarker: {\n                'type': 'path',\n                'stroke': 'none',\n                'd': 'M -10 -10 0 0 -10 10 0 10 0 -10 z'\n            }\n        },\n        shadow: {\n            connection: true,\n            refX: 3,\n            refY: 6,\n            stroke: '#000000',\n            strokeOpacity: 0.2,\n            strokeWidth: 20,\n            strokeLinejoin: 'round',\n            targetMarker: {\n                'type': 'path',\n                'd': 'M 0 -10 -10 0 0 10 z',\n                'stroke': 'none'\n            },\n            sourceMarker: {\n                'type': 'path',\n                'stroke': 'none',\n                'd': 'M -10 -10 0 0 -10 10 0 10 0 -10 z'\n            }\n        }\n    }\n}, {\n    markup: [{\n        tagName: 'path',\n        selector: 'shadow',\n        attributes: {\n            'fill': 'none'\n        }\n    }, {\n        tagName: 'path',\n        selector: 'line',\n        attributes: {\n            'fill': 'none'\n        }\n    }]\n});\n","import { Generic } from './basic.mjs';\nimport { Link as LinkBase } from '../dia/Link.mjs';\nimport { uniq, difference, assign, toArray, without, isObject } from '../util/index.mjs';\n\n/**\n * @deprecated use the port api instead\n */\nexport const Model = Generic.define('devs.Model', {\n    inPorts: [],\n    outPorts: [],\n    size: {\n        width: 80,\n        height: 80\n    },\n    attrs: {\n        '.': {\n            magnet: false\n        },\n        '.label': {\n            text: 'Model',\n            'ref-x': .5,\n            'ref-y': 10,\n            'font-size': 18,\n            'text-anchor': 'middle',\n            fill: '#000'\n        },\n        '.body': {\n            'ref-width': '100%',\n            'ref-height': '100%',\n            stroke: '#000'\n        }\n    },\n    ports: {\n        groups: {\n            'in': {\n                position: {\n                    name: 'left'\n                },\n                attrs: {\n                    '.port-label': {\n                        fill: '#000'\n                    },\n                    '.port-body': {\n                        fill: '#fff',\n                        stroke: '#000',\n                        r: 10,\n                        magnet: true\n                    }\n                },\n                label: {\n                    position: {\n                        name: 'left',\n                        args: {\n                            y: 10\n                        }\n                    }\n                }\n            },\n            'out': {\n                position: {\n                    name: 'right'\n                },\n                attrs: {\n                    '.port-label': {\n                        fill: '#000'\n                    },\n                    '.port-body': {\n                        fill: '#fff',\n                        stroke: '#000',\n                        r: 10,\n                        magnet: true\n                    }\n                },\n                label: {\n                    position: {\n                        name: 'right',\n                        args: {\n                            y: 10\n                        }\n                    }\n                }\n            }\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><rect class=\"body\"/><text class=\"label\"/></g>',\n    portMarkup: '<circle class=\"port-body\"/>',\n    portLabelMarkup: '<text class=\"port-label\"/>',\n\n    initialize: function() {\n\n        Generic.prototype.initialize.apply(this, arguments);\n\n        this.on('change:inPorts change:outPorts', this.updatePortItems, this);\n        this.updatePortItems();\n    },\n\n    updatePortItems: function(model, changed, opt) {\n\n        // Make sure all ports are unique.\n        var inPorts = uniq(this.get('inPorts'));\n        var outPorts = difference(uniq(this.get('outPorts')), inPorts);\n\n        var inPortItems = this.createPortItems('in', inPorts);\n        var outPortItems = this.createPortItems('out', outPorts);\n\n        this.prop('ports/items', inPortItems.concat(outPortItems), assign({ rewrite: true }, opt));\n    },\n\n    createPortItem: function(group, port) {\n\n        return {\n            id: port,\n            group: group,\n            attrs: {\n                '.port-label': {\n                    text: port\n                }\n            }\n        };\n    },\n\n    createPortItems: function(group, ports) {\n\n        return toArray(ports).map(this.createPortItem.bind(this, group));\n    },\n\n    _addGroupPort: function(port, group, opt) {\n\n        var ports = this.get(group);\n        return this.set(group, Array.isArray(ports) ? ports.concat(port) : [port], opt);\n    },\n\n    addOutPort: function(port, opt) {\n\n        return this._addGroupPort(port, 'outPorts', opt);\n    },\n\n    addInPort: function(port, opt) {\n\n        return this._addGroupPort(port, 'inPorts', opt);\n    },\n\n    _removeGroupPort: function(port, group, opt) {\n\n        return this.set(group, without(this.get(group), port), opt);\n    },\n\n    removeOutPort: function(port, opt) {\n\n        return this._removeGroupPort(port, 'outPorts', opt);\n    },\n\n    removeInPort: function(port, opt) {\n\n        return this._removeGroupPort(port, 'inPorts', opt);\n    },\n\n    _changeGroup: function(group, properties, opt) {\n\n        return this.prop('ports/groups/' + group, isObject(properties) ? properties : {}, opt);\n    },\n\n    changeInGroup: function(properties, opt) {\n\n        return this._changeGroup('in', properties, opt);\n    },\n\n    changeOutGroup: function(properties, opt) {\n\n        return this._changeGroup('out', properties, opt);\n    }\n});\n\nexport const Atomic = Model.define('devs.Atomic', {\n    size: {\n        width: 80,\n        height: 80\n    },\n    attrs: {\n        '.label': {\n            text: 'Atomic'\n        }\n    }\n});\n\nexport const Coupled = Model.define('devs.Coupled', {\n    size: {\n        width: 200,\n        height: 300\n    },\n    attrs: {\n        '.label': {\n            text: 'Coupled'\n        }\n    }\n});\n\nexport const Link = LinkBase.define('devs.Link', {\n    attrs: {\n        '.connection': {\n            'stroke-width': 2\n        }\n    }\n});\n\n","import { Generic } from './basic.mjs';\nimport { Link } from '../dia/Link.mjs';\n\nexport const Gate = Generic.define('logic.Gate', {\n    size: { width: 80, height: 40 },\n    attrs: {\n        '.': { magnet: false },\n        '.body': { width: 100, height: 50 },\n        circle: { r: 7, stroke: 'black', fill: 'transparent', 'stroke-width': 2 }\n    }\n}, {\n    operation: function() {\n        return true;\n    }\n});\n\nexport const IO = Gate.define('logic.IO', {\n    size: { width: 60, height: 30 },\n    attrs: {\n        '.body': { fill: 'white', stroke: 'black', 'stroke-width': 2 },\n        '.wire': { ref: '.body', 'ref-y': .5, stroke: 'black' },\n        text: {\n            fill: 'black',\n            ref: '.body', 'ref-x': .5, 'ref-y': .5, 'y-alignment': 'middle',\n            'text-anchor': 'middle',\n            'font-weight': 'bold',\n            'font-variant': 'small-caps',\n            'text-transform': 'capitalize',\n            'font-size': '14px'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"body\"/></g><path class=\"wire\"/><circle/><text/></g>',\n});\n\nexport const Input = IO.define('logic.Input', {\n    attrs: {\n        '.wire': { 'ref-dx': 0, d: 'M 0 0 L 23 0' },\n        circle: { ref: '.body', 'ref-dx': 30, 'ref-y': 0.5, magnet: true, 'class': 'output', port: 'out' },\n        text: { text: 'input' }\n    }\n});\n\nexport const Output = IO.define('logic.Output', {\n    attrs: {\n        '.wire': { 'ref-x': 0, d: 'M 0 0 L -23 0' },\n        circle: { ref: '.body', 'ref-x': -30, 'ref-y': 0.5, magnet: 'passive', 'class': 'input', port: 'in' },\n        text: { text: 'output' }\n    }\n});\n\nexport const Gate11 = Gate.define('logic.Gate11', {\n    attrs: {\n        '.input': { ref: '.body', 'ref-x': -2, 'ref-y': 0.5, magnet: 'passive', port: 'in' },\n        '.output': { ref: '.body', 'ref-dx': 2, 'ref-y': 0.5, magnet: true, port: 'out' }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><image class=\"body\"/></g><circle class=\"input\"/><circle class=\"output\"/></g>',\n});\n\nexport const Gate21 = Gate.define('logic.Gate21', {\n    attrs: {\n        '.input1': { ref: '.body', 'ref-x': -2, 'ref-y': 0.3, magnet: 'passive', port: 'in1' },\n        '.input2': { ref: '.body', 'ref-x': -2, 'ref-y': 0.7, magnet: 'passive', port: 'in2' },\n        '.output': { ref: '.body', 'ref-dx': 2, 'ref-y': 0.5, magnet: true, port: 'out' }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><image class=\"body\"/></g><circle class=\"input input1\"/><circle  class=\"input input2\"/><circle class=\"output\"/></g>',\n});\n\nexport const Repeater = Gate11.define('logic.Repeater', {\n    attrs: { image: { 'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo=' }}\n}, {\n    operation: function(input) {\n        return input;\n    }\n});\n\nexport const Not = Gate11.define('logic.Not', {\n    attrs: { image: { 'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K' }}\n}, {\n    operation: function(input) {\n        return !input;\n    }\n});\n\nexport const Or = Gate21.define('logic.Or', {\n    attrs: { image: { 'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo=' }}\n}, {\n    operation: function(input1, input2) {\n        return input1 || input2;\n    }\n});\n\nexport const And = Gate21.define('logic.And', {\n    attrs: { image: { 'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg==' }}\n\n}, {\n    operation: function(input1, input2) {\n        return input1 && input2;\n    }\n});\n\nexport const Nor = Gate21.define('logic.Nor', {\n    attrs: { image: { 'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K' }}\n}, {\n    operation: function(input1, input2) {\n        return !(input1 || input2);\n    }\n});\n\nexport const Nand = Gate21.define('logic.Nand', {\n    attrs: { image: { 'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg==' }}\n}, {\n    operation: function(input1, input2) {\n        return !(input1 && input2);\n    }\n});\n\nexport const Xor = Gate21.define('logic.Xor', {\n    attrs: { image: { 'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K' }}\n}, {\n    operation: function(input1, input2) {\n        return (!input1 || input2) && (input1 || !input2);\n    }\n});\n\nexport const Xnor = Gate21.define('logic.Xnor', {\n    attrs: { image: { 'xlink:href': 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg==' }}\n}, {\n    operation: function(input1, input2) {\n        return (!input1 || !input2) && (input1 || input2);\n    }\n});\n\nexport const Wire = Link.define('logic.Wire', {\n    attrs: {\n        '.connection': { 'stroke-width': 2 },\n        '.marker-vertex': { r: 7 }\n    },\n\n    router: { name: 'orthogonal' },\n    connector: { name: 'rounded', args: { radius: 10 }}\n}, {\n    arrowheadMarkup: [\n        '<g class=\"marker-arrowhead-group marker-arrowhead-group-<%= end %>\">',\n        '<circle class=\"marker-arrowhead\" end=\"<%= end %>\" r=\"7\"/>',\n        '</g>'\n    ].join(''),\n\n    vertexMarkup: [\n        '<g class=\"marker-vertex-group\" transform=\"translate(<%= x %>, <%= y %>)\">',\n        '<circle class=\"marker-vertex\" idx=\"<%= idx %>\" r=\"10\" />',\n        '<g class=\"marker-vertex-remove-group\">',\n        '<path class=\"marker-vertex-remove-area\" idx=\"<%= idx %>\" d=\"M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z\" transform=\"translate(5, -33)\"/>',\n        '<path class=\"marker-vertex-remove\" idx=\"<%= idx %>\" transform=\"scale(.8) translate(9.5, -37)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\">',\n        '<title>Remove vertex.</title>',\n        '</path>',\n        '</g>',\n        '</g>'\n    ].join('')\n});\n","import { Generic } from './basic.mjs';\n\nexport const KingWhite = Generic.define('chess.KingWhite', {\n    size: { width: 42, height: 38 }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\"><path      d=\"M 22.5,11.63 L 22.5,6\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />    <path      d=\"M 20,8 L 25,8\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />    <path      d=\"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\"      style=\"fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;\" />    <path      d=\"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z \"      style=\"fill:#ffffff; stroke:#000000;\" />    <path      d=\"M 11.5,30 C 17,27 27,27 32.5,30\"      style=\"fill:none; stroke:#000000;\" />    <path      d=\"M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5\"      style=\"fill:none; stroke:#000000;\" />    <path      d=\"M 11.5,37 C 17,34 27,34 32.5,37\"      style=\"fill:none; stroke:#000000;\" />  </g></g></g>'\n});\n\nexport const KingBlack = Generic.define('chess.KingBlack', {\n    size: { width: 42, height: 38 }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path       d=\"M 22.5,11.63 L 22.5,6\"       style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\"       id=\"path6570\" />    <path       d=\"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\"       style=\"fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;\" />    <path       d=\"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z \"       style=\"fill:#000000; stroke:#000000;\" />    <path       d=\"M 20,8 L 25,8\"       style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />    <path       d=\"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37\"       style=\"fill:none; stroke:#ffffff;\" />  </g></g></g>'\n});\n\nexport const QueenWhite = Generic.define('chess.QueenWhite', {\n    size: { width: 42, height: 38 }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(-1,-1)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(15.5,-5.5)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(32,-1)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(7,-4.5)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(24,-4)\" />    <path      d=\"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 11.5,30 C 15,29 30,29 33.5,30\"      style=\"fill:none;\" />    <path      d=\"M 12,33.5 C 18,32.5 27,32.5 33,33.5\"      style=\"fill:none;\" />  </g></g></g>'\n});\n\nexport const QueenBlack = Generic.define('chess.QueenBlack', {\n    size: { width: 42, height: 38 }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <g style=\"fill:#000000; stroke:none;\">      <circle cx=\"6\"    cy=\"12\" r=\"2.75\" />      <circle cx=\"14\"   cy=\"9\"  r=\"2.75\" />      <circle cx=\"22.5\" cy=\"8\"  r=\"2.75\" />      <circle cx=\"31\"   cy=\"9\"  r=\"2.75\" />      <circle cx=\"39\"   cy=\"12\" r=\"2.75\" />    </g>    <path       d=\"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z\"       style=\"stroke-linecap:butt; stroke:#000000;\" />    <path       d=\"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z\"       style=\"stroke-linecap:butt;\" />    <path       d=\"M 11,38.5 A 35,35 1 0 0 34,38.5\"       style=\"fill:none; stroke:#000000; stroke-linecap:butt;\" />    <path       d=\"M 11,29 A 35,35 1 0 1 34,29\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 12.5,31.5 L 32.5,31.5\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5\"       style=\"fill:none; stroke:#ffffff;\" />  </g></g></g>'\n});\n\nexport const RookWhite = Generic.define('chess.RookWhite', {\n    size: { width: 32, height: 34 }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14\"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 34,14 L 31,17 L 14,17 L 11,14\" />    <path      d=\"M 31,17 L 31,29.5 L 14,29.5 L 14,17\"      style=\"stroke-linecap:butt; stroke-linejoin:miter;\" />    <path      d=\"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5\" />    <path      d=\"M 11,14 L 34,14\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />  </g></g></g>'\n});\n\nexport const RookBlack = Generic.define('chess.RookBlack', {\n    size: { width: 32, height: 34 }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z \"      style=\"stroke-linecap:butt;stroke-linejoin:miter;\" />    <path      d=\"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12,35.5 L 33,35.5 L 33,35.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 13,31.5 L 32,31.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 14,29.5 L 31,29.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 14,16.5 L 31,16.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 11,14 L 34,14\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />  </g></g></g>'\n});\n\nexport const BishopWhite = Generic.define('chess.BishopWhite', {\n    size: { width: 38, height: 38 }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <g style=\"fill:#ffffff; stroke:#000000; stroke-linecap:butt;\">       <path        d=\"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z\" />      <path        d=\"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\" />      <path        d=\"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\" />    </g>    <path      d=\"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />  </g></g></g>'\n});\n\nexport const BishopBlack = Generic.define('chess.BishopBlack', {\n    size: { width: 38, height: 38 }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <g style=\"fill:#000000; stroke:#000000; stroke-linecap:butt;\">       <path        d=\"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z\" />      <path        d=\"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\" />      <path        d=\"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\" />    </g>    <path       d=\"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\"       style=\"fill:none; stroke:#ffffff; stroke-linejoin:miter;\" />  </g></g></g>'\n});\n\nexport const KnightWhite = Generic.define('chess.KnightWhite', {\n    size: { width: 38, height: 37 }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\"      style=\"fill:#ffffff; stroke:#000000;\" />    <path      d=\"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\"      style=\"fill:#ffffff; stroke:#000000;\" />    <path      d=\"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\"      style=\"fill:#000000; stroke:#000000;\" />    <path      d=\"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\"      transform=\"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\"      style=\"fill:#000000; stroke:#000000;\" />  </g></g></g>'\n});\n\nexport const KnightBlack = Generic.define('chess.KnightBlack', {\n    size: { width: 38, height: 37 }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\"      style=\"fill:#000000; stroke:#000000;\" />    <path      d=\"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\"      style=\"fill:#000000; stroke:#000000;\" />    <path      d=\"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\"      style=\"fill:#ffffff; stroke:#ffffff;\" />    <path      d=\"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\"      transform=\"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\"      style=\"fill:#ffffff; stroke:#ffffff;\" />    <path      d=\"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z \"      style=\"fill:#ffffff; stroke:none;\" />  </g></g></g>'\n});\n\nexport const PawnWhite = Generic.define('chess.PawnWhite', {\n    size: { width: 28, height: 33 }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><path d=\"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z \"  style=\"opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\" /></g></g>'\n});\n\nexport const PawnBlack = Generic.define('chess.PawnBlack', {\n    size: { width: 28, height: 33 }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><path d=\"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z \"  style=\"opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\" /></g></g>'\n});\n\n","import { Element } from '../dia/Element.mjs';\nimport { Link } from '../dia/Link.mjs';\n\nexport const Entity = Element.define('erd.Entity', {\n    size: { width: 150, height: 60 },\n    attrs: {\n        '.outer': {\n            fill: '#2ECC71', stroke: '#27AE60', 'stroke-width': 2,\n            points: '100,0 100,60 0,60 0,0'\n        },\n        '.inner': {\n            fill: '#2ECC71', stroke: '#27AE60', 'stroke-width': 2,\n            points: '95,5 95,55 5,55 5,5',\n            display: 'none'\n        },\n        text: {\n            text: 'Entity',\n            'font-family': 'Arial', 'font-size': 14,\n            'ref-x': .5, 'ref-y': .5,\n            'y-alignment': 'middle', 'text-anchor': 'middle'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon class=\"outer\"/><polygon class=\"inner\"/></g><text/></g>',\n});\n\nexport const WeakEntity = Entity.define('erd.WeakEntity', {\n    attrs: {\n        '.inner': { display: 'auto' },\n        text: { text: 'Weak Entity' }\n    }\n});\n\nexport const Relationship = Element.define('erd.Relationship', {\n    size: { width: 80, height: 80 },\n    attrs: {\n        '.outer': {\n            fill: '#3498DB', stroke: '#2980B9', 'stroke-width': 2,\n            points: '40,0 80,40 40,80 0,40'\n        },\n        '.inner': {\n            fill: '#3498DB', stroke: '#2980B9', 'stroke-width': 2,\n            points: '40,5 75,40 40,75 5,40',\n            display: 'none'\n        },\n        text: {\n            text: 'Relationship',\n            'font-family': 'Arial', 'font-size': 12,\n            'ref-x': .5, 'ref-y': .5,\n            'y-alignment': 'middle', 'text-anchor': 'middle'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon class=\"outer\"/><polygon class=\"inner\"/></g><text/></g>',\n});\n\nexport const IdentifyingRelationship = Relationship.define('erd.IdentifyingRelationship', {\n    attrs: {\n        '.inner': { display: 'auto' },\n        text: { text: 'Identifying' }\n    }\n});\n\nexport const Attribute = Element.define('erd.Attribute', {\n    size: { width: 100, height: 50 },\n    attrs: {\n        'ellipse': {\n            transform: 'translate(50, 25)'\n        },\n        '.outer': {\n            stroke: '#D35400', 'stroke-width': 2,\n            cx: 0, cy: 0, rx: 50, ry: 25,\n            fill: '#E67E22'\n        },\n        '.inner': {\n            stroke: '#D35400', 'stroke-width': 2,\n            cx: 0, cy: 0, rx: 45, ry: 20,\n            fill: '#E67E22', display: 'none'\n        },\n        text: {\n            'font-family': 'Arial', 'font-size': 14,\n            'ref-x': .5, 'ref-y': .5,\n            'y-alignment': 'middle', 'text-anchor': 'middle'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><ellipse class=\"outer\"/><ellipse class=\"inner\"/></g><text/></g>',\n});\n\nexport const Multivalued = Attribute.define('erd.Multivalued', {\n    attrs: {\n        '.inner': { display: 'block' },\n        text: { text: 'multivalued' }\n    }\n});\n\nexport const Derived = Attribute.define('erd.Derived', {\n    attrs: {\n        '.outer': { 'stroke-dasharray': '3,5' },\n        text: { text: 'derived' }\n    }\n});\n\nexport const Key = Attribute.define('erd.Key', {\n    attrs: {\n        ellipse: { 'stroke-width': 4 },\n        text: { text: 'key', 'font-weight': '800', 'text-decoration': 'underline' }\n    }\n});\n\nexport const Normal = Attribute.define('erd.Normal', {\n    attrs: { text: { text: 'Normal' }}\n});\n\nexport const ISA = Element.define('erd.ISA', {\n    type: 'erd.ISA',\n    size: { width: 100, height: 50 },\n    attrs: {\n        polygon: {\n            points: '0,0 50,50 100,0',\n            fill: '#F1C40F', stroke: '#F39C12', 'stroke-width': 2\n        },\n        text: {\n            text: 'ISA', 'font-size': 18,\n            'ref-x': .5, 'ref-y': .3,\n            'y-alignment': 'middle', 'text-anchor': 'middle'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon/></g><text/></g>',\n});\n\nexport const Line = Link.define('erd.Line', {}, {\n    cardinality: function(value) {\n        this.set('labels', [{ position: -20, attrs: { text: { dy: -8, text: value }}}]);\n    }\n});\n","import { Circle } from './basic.mjs';\nimport { Element } from '../dia/Element.mjs';\nimport { Link } from '../dia/Link.mjs';\n\nexport const State = Circle.define('fsa.State', {\n    attrs: {\n        circle: { 'stroke-width': 3 },\n        text: { 'font-weight': '800' }\n    }\n});\n\nexport const StartState = Element.define('fsa.StartState', {\n    size: { width: 20, height: 20 },\n    attrs: {\n        circle: {\n            transform: 'translate(10, 10)',\n            r: 10,\n            fill: '#000000'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle/></g></g>',\n});\n\nexport const EndState = Element.define('fsa.EndState', {\n    size: { width: 20, height: 20 },\n    attrs: {\n        '.outer': {\n            transform: 'translate(10, 10)',\n            r: 10,\n            fill: '#ffffff',\n            stroke: '#000000'\n        },\n\n        '.inner': {\n            transform: 'translate(10, 10)',\n            r: 6,\n            fill: '#000000'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"outer\"/><circle class=\"inner\"/></g></g>',\n});\n\nexport const Arrow = Link.define('fsa.Arrow', {\n    attrs: { '.marker-target': { d: 'M 10 0 L 0 5 L 10 10 z' }},\n    smooth: true\n});\n\n\n","import { Element } from '../dia/Element.mjs';\nimport { Link } from '../dia/Link.mjs';\n\nexport const Member = Element.define('org.Member', {\n    size: { width: 180, height: 70 },\n    attrs: {\n        rect: { width: 170, height: 60 },\n\n        '.card': {\n            fill: '#FFFFFF', stroke: '#000000', 'stroke-width': 2,\n            'pointer-events': 'visiblePainted', rx: 10, ry: 10\n        },\n\n        image: {\n            width: 48, height: 48,\n            ref: '.card', 'ref-x': 10, 'ref-y': 5\n        },\n\n        '.rank': {\n            'text-decoration': 'underline',\n            ref: '.card', 'ref-x': 0.9, 'ref-y': 0.2,\n            'font-family': 'Courier New', 'font-size': 14,\n            'text-anchor': 'end'\n        },\n\n        '.name': {\n            'font-weight': '800',\n            ref: '.card', 'ref-x': 0.9, 'ref-y': 0.6,\n            'font-family': 'Courier New', 'font-size': 14,\n            'text-anchor': 'end'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"card\"/><image/></g><text class=\"rank\"/><text class=\"name\"/></g>',\n});\n\nexport const Arrow = Link.define('org.Arrow', {\n    source: { selector: '.card' }, target: { selector: '.card' },\n    attrs: { '.connection': { stroke: '#585858', 'stroke-width': 3 }},\n    z: -1\n});\n\n","import { Generic } from './basic.mjs';\nimport { ElementView } from '../dia/ElementView.mjs';\nimport V from '../V/index.mjs';\nimport { Link as diaLink } from '../dia/Link.mjs';\n\nexport const Place = Generic.define('pn.Place', {\n    size: { width: 50, height: 50 },\n    attrs: {\n        '.root': {\n            r: 25,\n            fill: '#ffffff',\n            stroke: '#000000',\n            transform: 'translate(25, 25)'\n        },\n        '.label': {\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-y': -20,\n            ref: '.root',\n            fill: '#000000',\n            'font-size': 12\n        },\n        '.tokens > circle': {\n            fill: '#000000',\n            r: 5\n        },\n        '.tokens.one > circle': { transform: 'translate(25, 25)' },\n\n        '.tokens.two > circle:nth-child(1)': { transform: 'translate(19, 25)' },\n        '.tokens.two > circle:nth-child(2)': { transform: 'translate(31, 25)' },\n\n        '.tokens.three > circle:nth-child(1)': { transform: 'translate(18, 29)' },\n        '.tokens.three > circle:nth-child(2)': { transform: 'translate(25, 19)' },\n        '.tokens.three > circle:nth-child(3)': { transform: 'translate(32, 29)' },\n\n        '.tokens.alot > text': {\n            transform: 'translate(25, 18)',\n            'text-anchor': 'middle',\n            fill: '#000000'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"root\"/><g class=\"tokens\" /></g><text class=\"label\"/></g>',\n});\n\nexport const PlaceView = ElementView.extend({\n\n    presentationAttributes: ElementView.addPresentationAttributes({\n        tokens: ['TOKENS']\n    }),\n\n    initFlag: ElementView.prototype.initFlag.concat(['TOKENS']),\n\n    confirmUpdate: function(...args) {\n        let flags = ElementView.prototype.confirmUpdate.call(this, ...args);\n        if (this.hasFlag(flags, 'TOKENS')) {\n            this.renderTokens();\n            this.update();\n            flags = this.removeFlag(flags, 'TOKENS');\n        }\n        return flags;\n    },\n\n    renderTokens: function() {\n\n        const vTokens = this.vel.findOne('.tokens').empty();\n        ['one', 'two', 'three', 'alot'].forEach(function(className) {\n            vTokens.removeClass(className);\n        });\n\n        var tokens = this.model.get('tokens');\n        if (!tokens) return;\n\n        switch (tokens) {\n\n            case 1:\n                vTokens.addClass('one');\n                vTokens.append(V('circle'));\n                break;\n\n            case 2:\n                vTokens.addClass('two');\n                vTokens.append([V('circle'), V('circle')]);\n                break;\n\n            case 3:\n                vTokens.addClass('three');\n                vTokens.append([V('circle'), V('circle'), V('circle')]);\n                break;\n\n            default:\n                vTokens.addClass('alot');\n                vTokens.append(V('text').text(tokens + ''));\n                break;\n        }\n    }\n});\n\nexport const Transition = Generic.define('pn.Transition', {\n    size: { width: 12, height: 50 },\n    attrs: {\n        'rect': {\n            width: 12,\n            height: 50,\n            fill: '#000000',\n            stroke: '#000000'\n        },\n        '.label': {\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-y': -20,\n            ref: 'rect',\n            fill: '#000000',\n            'font-size': 12\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"root\"/></g></g><text class=\"label\"/>',\n});\n\nexport const Link = diaLink.define('pn.Link', {\n    attrs: { '.marker-target': { d: 'M 10 0 L 0 5 L 10 10 z' }}\n});\n","import { ElementView } from '../dia/ElementView.mjs';\nimport { Link } from '../dia/Link.mjs';\nimport { Generic, Circle } from './basic.mjs';\n\nexport const Class = Generic.define('uml.Class', {\n    attrs: {\n        rect: { 'width': 200 },\n\n        '.uml-class-name-rect': { 'stroke': 'black', 'stroke-width': 2, 'fill': '#3498db' },\n        '.uml-class-attrs-rect': { 'stroke': 'black', 'stroke-width': 2, 'fill': '#2980b9' },\n        '.uml-class-methods-rect': { 'stroke': 'black', 'stroke-width': 2, 'fill': '#2980b9' },\n\n        '.uml-class-name-text': {\n            'ref': '.uml-class-name-rect',\n            'ref-y': .5,\n            'ref-x': .5,\n            'text-anchor': 'middle',\n            'y-alignment': 'middle',\n            'font-weight': 'bold',\n            'fill': 'black',\n            'font-size': 12,\n            'font-family': 'Times New Roman'\n        },\n        '.uml-class-attrs-text': {\n            'ref': '.uml-class-attrs-rect', 'ref-y': 5, 'ref-x': 5,\n            'fill': 'black', 'font-size': 12, 'font-family': 'Times New Roman'\n        },\n        '.uml-class-methods-text': {\n            'ref': '.uml-class-methods-rect', 'ref-y': 5, 'ref-x': 5,\n            'fill': 'black', 'font-size': 12, 'font-family': 'Times New Roman'\n        }\n    },\n\n    name: [],\n    attributes: [],\n    methods: []\n}, {\n    markup: [\n        '<g class=\"rotatable\">',\n        '<g class=\"scalable\">',\n        '<rect class=\"uml-class-name-rect\"/><rect class=\"uml-class-attrs-rect\"/><rect class=\"uml-class-methods-rect\"/>',\n        '</g>',\n        '<text class=\"uml-class-name-text\"/><text class=\"uml-class-attrs-text\"/><text class=\"uml-class-methods-text\"/>',\n        '</g>'\n    ].join(''),\n\n    initialize: function() {\n\n        this.on('change:name change:attributes change:methods', function() {\n            this.updateRectangles();\n            this.trigger('uml-update');\n        }, this);\n\n        this.updateRectangles();\n\n        Generic.prototype.initialize.apply(this, arguments);\n    },\n\n    getClassName: function() {\n        return this.get('name');\n    },\n\n    updateRectangles: function() {\n\n        var attrs = this.get('attrs');\n\n        var rects = [\n            { type: 'name', text: this.getClassName() },\n            { type: 'attrs', text: this.get('attributes') },\n            { type: 'methods', text: this.get('methods') }\n        ];\n\n        var offsetY = 0;\n\n        rects.forEach(function(rect) {\n\n            var lines = Array.isArray(rect.text) ? rect.text : [rect.text];\n            var rectHeight = lines.length * 20 + 20;\n\n            attrs['.uml-class-' + rect.type + '-text'].text = lines.join('\\n');\n            attrs['.uml-class-' + rect.type + '-rect'].height = rectHeight;\n            attrs['.uml-class-' + rect.type + '-rect'].transform = 'translate(0,' + offsetY + ')';\n\n            offsetY += rectHeight;\n        });\n    }\n\n});\n\nexport const ClassView = ElementView.extend({\n\n    initialize: function() {\n\n        ElementView.prototype.initialize.apply(this, arguments);\n\n        this.listenTo(this.model, 'uml-update', function() {\n            this.update();\n            this.resize();\n        });\n    }\n});\n\nexport const Abstract = Class.define('uml.Abstract', {\n    attrs: {\n        '.uml-class-name-rect': { fill: '#e74c3c' },\n        '.uml-class-attrs-rect': { fill: '#c0392b' },\n        '.uml-class-methods-rect': { fill: '#c0392b' }\n    }\n}, {\n\n    getClassName: function() {\n        return ['<<Abstract>>', this.get('name')];\n    }\n\n});\nexport const AbstractView = ClassView;\n\nexport const Interface = Class.define('uml.Interface', {\n    attrs: {\n        '.uml-class-name-rect': { fill: '#f1c40f' },\n        '.uml-class-attrs-rect': { fill: '#f39c12' },\n        '.uml-class-methods-rect': { fill: '#f39c12' }\n    }\n}, {\n    getClassName: function() {\n        return ['<<Interface>>', this.get('name')];\n    }\n});\nexport const InterfaceView = ClassView;\n\nexport const Generalization = Link.define('uml.Generalization', {\n    attrs: { '.marker-target': { d: 'M 20 0 L 0 10 L 20 20 z', fill: 'white' }}\n});\n\nexport const Implementation = Link.define('uml.Implementation', {\n    attrs: {\n        '.marker-target': { d: 'M 20 0 L 0 10 L 20 20 z', fill: 'white' },\n        '.connection': { 'stroke-dasharray': '3,3' }\n    }\n});\n\nexport const Aggregation = Link.define('uml.Aggregation', {\n    attrs: { '.marker-target': { d: 'M 40 10 L 20 20 L 0 10 L 20 0 z', fill: 'white' }}\n});\n\nexport const Composition = Link.define('uml.Composition', {\n    attrs: { '.marker-target': { d: 'M 40 10 L 20 20 L 0 10 L 20 0 z', fill: 'black' }}\n});\n\nexport const Association = Link.define('uml.Association');\n\n// Statechart\n\nexport const State = Generic.define('uml.State', {\n    attrs: {\n        '.uml-state-body': {\n            'width': 200, 'height': 200, 'rx': 10, 'ry': 10,\n            'fill': '#ecf0f1', 'stroke': '#bdc3c7', 'stroke-width': 3\n        },\n        '.uml-state-separator': {\n            'stroke': '#bdc3c7', 'stroke-width': 2\n        },\n        '.uml-state-name': {\n            'ref': '.uml-state-body', 'ref-x': .5, 'ref-y': 5, 'text-anchor': 'middle',\n            'fill': '#000000', 'font-family': 'Courier New', 'font-size': 14\n        },\n        '.uml-state-events': {\n            'ref': '.uml-state-separator', 'ref-x': 5, 'ref-y': 5,\n            'fill': '#000000', 'font-family': 'Courier New', 'font-size': 14\n        }\n    },\n\n    name: 'State',\n    events: []\n\n}, {\n    markup: [\n        '<g class=\"rotatable\">',\n        '<g class=\"scalable\">',\n        '<rect class=\"uml-state-body\"/>',\n        '</g>',\n        '<path class=\"uml-state-separator\"/>',\n        '<text class=\"uml-state-name\"/>',\n        '<text class=\"uml-state-events\"/>',\n        '</g>'\n    ].join(''),\n\n    initialize: function() {\n\n        this.on({\n            'change:name': this.updateName,\n            'change:events': this.updateEvents,\n            'change:size': this.updatePath\n        }, this);\n\n        this.updateName();\n        this.updateEvents();\n        this.updatePath();\n\n        Generic.prototype.initialize.apply(this, arguments);\n    },\n\n    updateName: function() {\n\n        this.attr('.uml-state-name/text', this.get('name'));\n    },\n\n    updateEvents: function() {\n\n        this.attr('.uml-state-events/text', this.get('events').join('\\n'));\n    },\n\n    updatePath: function() {\n\n        var d = 'M 0 20 L ' + this.get('size').width + ' 20';\n\n        // We are using `silent: true` here because updatePath() is meant to be called\n        // on resize and there's no need to to update the element twice (`change:size`\n        // triggers also an update).\n        this.attr('.uml-state-separator/d', d, { silent: true });\n    }\n});\n\nexport const StartState = Circle.define('uml.StartState', {\n    type: 'uml.StartState',\n    attrs: { circle: { 'fill': '#34495e', 'stroke': '#2c3e50', 'stroke-width': 2, 'rx': 1 }}\n});\n\nexport const EndState = Generic.define('uml.EndState', {\n    size: { width: 20, height: 20 },\n    attrs: {\n        'circle.outer': {\n            transform: 'translate(10, 10)',\n            r: 10,\n            fill: '#ffffff',\n            stroke: '#2c3e50'\n        },\n\n        'circle.inner': {\n            transform: 'translate(10, 10)',\n            r: 6,\n            fill: '#34495e'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"outer\"/><circle class=\"inner\"/></g></g>',\n});\n\nexport const Transition = Link.define('uml.Transition', {\n    attrs: {\n        '.marker-target': { d: 'M 10 0 L 0 5 L 10 10 z', fill: '#34495e', stroke: '#2c3e50' },\n        '.connection': { stroke: '#2c3e50' }\n    }\n});\n","import * as connectionStrategies from '../connectionStrategies/index.mjs';\n\nexport function getViewBBox(view, useModelGeometry) {\n    const { model } = view;\n    if (useModelGeometry) return model.getBBox();\n    return (model.isLink()) ? view.getConnection().bbox() : view.getNodeUnrotatedBBox(view.el);\n}\n\nexport function getAnchor(coords, view, magnet) {\n    // take advantage of an existing logic inside of the\n    // pin relative connection strategy\n    var end = connectionStrategies.pinRelative.call(\n        this.paper,\n        {},\n        view,\n        magnet,\n        coords,\n        this.model\n    );\n    return end.anchor;\n}\n\nexport function snapAnchor(coords, view, magnet, type, relatedView, toolView) {\n    var snapRadius = toolView.options.snapRadius;\n    var isSource = (type === 'source');\n    var refIndex = (isSource ? 0 : -1);\n    var ref = this.model.vertex(refIndex) || this.getEndAnchor(isSource ? 'target' : 'source');\n    if (ref) {\n        if (Math.abs(ref.x - coords.x) < snapRadius) coords.x = ref.x;\n        if (Math.abs(ref.y - coords.y) < snapRadius) coords.y = ref.y;\n    }\n    return coords;\n}\n","import * as g from '../g/index.mjs';\nimport V from '../V/index.mjs';\nimport * as util from '../util/index.mjs';\nimport { ToolView } from '../dia/ToolView.mjs';\n\n// End Markers\nconst Arrowhead = ToolView.extend({\n    tagName: 'path',\n    xAxisVector: new g.Point(1, 0),\n    events: {\n        mousedown: 'onPointerDown',\n        touchstart: 'onPointerDown'\n    },\n    documentEvents: {\n        mousemove: 'onPointerMove',\n        touchmove: 'onPointerMove',\n        mouseup: 'onPointerUp',\n        touchend: 'onPointerUp',\n        touchcancel: 'onPointerUp'\n    },\n    options: {\n        scale: null\n    },\n    onRender: function() {\n        this.update();\n    },\n    update: function() {\n        var ratio = this.ratio;\n        var view = this.relatedView;\n        var tangent = view.getTangentAtRatio(ratio);\n        var position, angle;\n        if (tangent) {\n            position = tangent.start;\n            angle = tangent.vector().vectorAngle(this.xAxisVector) || 0;\n        } else {\n            position = view.getPointAtRatio(ratio);\n            angle = 0;\n        }\n        if (!position) return this;\n        var matrix = V.createSVGMatrix().translate(position.x, position.y).rotate(angle);\n        const { scale } = this.options;\n        if (scale) matrix = matrix.scale(scale);\n        this.vel.transform(matrix, { absolute: true });\n        return this;\n    },\n    onPointerDown: function(evt) {\n        if (this.guard(evt)) return;\n        evt.stopPropagation();\n        evt.preventDefault();\n        var relatedView = this.relatedView;\n        relatedView.model.startBatch('arrowhead-move', { ui: true, tool: this.cid });\n        if (relatedView.can('arrowheadMove')) {\n            relatedView.startArrowheadMove(this.arrowheadType);\n            this.delegateDocumentEvents();\n            relatedView.paper.undelegateEvents();\n        }\n        this.focus();\n        this.el.style.pointerEvents = 'none';\n    },\n    onPointerMove: function(evt) {\n        var normalizedEvent = util.normalizeEvent(evt);\n        var coords = this.paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n        this.relatedView.pointermove(normalizedEvent, coords.x, coords.y);\n    },\n    onPointerUp: function(evt) {\n        this.undelegateDocumentEvents();\n        var relatedView = this.relatedView;\n        var paper = relatedView.paper;\n        var normalizedEvent = util.normalizeEvent(evt);\n        var coords = paper.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n        relatedView.pointerup(normalizedEvent, coords.x, coords.y);\n        paper.delegateEvents();\n        this.blur();\n        this.el.style.pointerEvents = '';\n        relatedView.model.stopBatch('arrowhead-move', { ui: true, tool: this.cid });\n    }\n});\n\nexport const TargetArrowhead = Arrowhead.extend({\n    name: 'target-arrowhead',\n    ratio: 1,\n    arrowheadType: 'target',\n    attributes: {\n        'd': 'M -10 -8 10 0 -10 8 Z',\n        'fill': '#33334F',\n        'stroke': '#FFFFFF',\n        'stroke-width': 2,\n        'cursor': 'move',\n        'class': 'target-arrowhead'\n    }\n});\n\nexport const SourceArrowhead = Arrowhead.extend({\n    name: 'source-arrowhead',\n    ratio: 0,\n    arrowheadType: 'source',\n    attributes: {\n        'd': 'M 10 -8 -10 0 10 8 Z',\n        'fill': '#33334F',\n        'stroke': '#FFFFFF',\n        'stroke-width': 2,\n        'cursor': 'move',\n        'class': 'source-arrowhead'\n    }\n});\n","\nimport * as util from '../util/index.mjs';\nimport { ToolView } from '../dia/ToolView.mjs';\nimport { getViewBBox } from './helpers.mjs';\n\nexport const Boundary = ToolView.extend({\n    name: 'boundary',\n    tagName: 'rect',\n    options: {\n        padding: 10,\n        useModelGeometry: false,\n    },\n    attributes: {\n        'fill': 'none',\n        'stroke': '#33334F',\n        'stroke-width': .5,\n        'stroke-dasharray': '5, 5',\n        'pointer-events': 'none'\n    },\n    onRender: function() {\n        this.update();\n    },\n    update: function() {\n        const { relatedView: view, options, vel } = this;\n        const { useModelGeometry, rotate } = options;\n        const padding = util.normalizeSides(options.padding);\n        let bbox = getViewBBox(view, useModelGeometry).moveAndExpand({\n            x: -padding.left,\n            y: -padding.top,\n            width: padding.left + padding.right,\n            height: padding.top + padding.bottom\n        });\n        var model = view.model;\n        if (model.isElement()) {\n            var angle = model.angle();\n            if (angle) {\n                if (rotate) {\n                    var origin = model.getBBox().center();\n                    vel.rotate(angle, origin.x, origin.y, { absolute: true });\n                } else {\n                    bbox = bbox.bbox(angle);\n                }\n            }\n        }\n        vel.attr(bbox.toJSON());\n        return this;\n    }\n});\n","import { ToolView } from '../dia/ToolView.mjs';\nimport * as util from '../util/index.mjs';\n\nexport const Control = ToolView.extend({\n    tagName: 'g',\n    children: [{\n        tagName: 'circle',\n        selector: 'handle',\n        attributes: {\n            'cursor': 'pointer',\n            'stroke-width': 2,\n            'stroke': '#FFFFFF',\n            'fill': '#33334F',\n            'r': 6\n        }\n    }, {\n        tagName: 'rect',\n        selector: 'extras',\n        attributes: {\n            'pointer-events': 'none',\n            'fill': 'none',\n            'stroke': '#33334F',\n            'stroke-dasharray': '2,4',\n            'rx': 5,\n            'ry': 5\n        }\n    }],\n    events: {\n        mousedown: 'onPointerDown',\n        touchstart: 'onPointerDown',\n        dblclick: 'onPointerDblClick',\n        dbltap: 'onPointerDblClick'\n    },\n    documentEvents: {\n        mousemove: 'onPointerMove',\n        touchmove: 'onPointerMove',\n        mouseup: 'onPointerUp',\n        touchend: 'onPointerUp',\n        touchcancel: 'onPointerUp'\n    },\n    options: {\n        handleAttributes: null,\n        selector: 'root',\n        padding: 6,\n        scale: null\n    },\n\n    getPosition: function() {\n        // To be overridden\n    },\n    setPosition: function() {\n        // To be overridden\n    },\n    resetPosition: function() {\n        // To be overridden\n    },\n    onRender: function() {\n        this.renderChildren();\n        this.toggleExtras(false);\n        this.update();\n    },\n    update: function() {\n        const { handle, extras } = this.childNodes;\n        if (handle) {\n            this.updateHandle(handle);\n        } else {\n            throw new Error('Control: markup selector `handle` is required');\n        }\n        if (extras) {\n            this.updateExtras(extras);\n        }\n        return this;\n    },\n    updateHandle: function(handleNode) {\n        const { relatedView, options } = this;\n        const { model } = relatedView;\n        const relativePos = this.getPosition(relatedView, this);\n        const absolutePos = model.getAbsolutePointFromRelative(relativePos);\n        const { handleAttributes, scale } = options;\n        let transformString =  `translate(${absolutePos.x},${absolutePos.y})`;\n        if (scale) {\n            transformString += ` scale(${scale})`;\n        }\n        handleNode.setAttribute('transform', transformString);\n        if (handleAttributes) {\n            for (let attrName in handleAttributes) {\n                handleNode.setAttribute(attrName, handleAttributes[attrName]);\n            }\n        }\n    },\n    updateExtras: function(extrasNode) {\n        const { relatedView, options } = this;\n        const { selector } = this.options;\n        if (!selector) {\n            this.toggleExtras(false);\n            return;\n        }\n        const [magnet] = relatedView.findBySelector(selector);\n        if (!magnet) throw new Error('Control: invalid selector.');\n        let padding = options.padding;\n        if (!isFinite(padding)) padding = 0;\n        const bbox = relatedView.getNodeUnrotatedBBox(magnet);\n        const model = relatedView.model;\n        const angle = model.angle();\n        const center = bbox.center();\n        if (angle) center.rotate(model.getBBox().center(), -angle);\n        bbox.inflate(padding);\n        extrasNode.setAttribute('x', -bbox.width / 2);\n        extrasNode.setAttribute('y', -bbox.height / 2);\n        extrasNode.setAttribute('width', bbox.width);\n        extrasNode.setAttribute('height', bbox.height);\n        extrasNode.setAttribute('transform', `translate(${center.x},${center.y}) rotate(${angle})`);\n    },\n    toggleExtras: function(visible) {\n        const { extras } = this.childNodes;\n        if (!extras) return;\n        extras.style.display = (visible) ? '' : 'none';\n    },\n    onPointerDown: function(evt) {\n        const { relatedView, paper } = this;\n        if (this.guard(evt)) return;\n        evt.stopPropagation();\n        evt.preventDefault();\n        paper.undelegateEvents();\n        this.delegateDocumentEvents();\n        this.focus();\n        this.toggleExtras(true);\n        relatedView.model.startBatch('control-move', { ui: true, tool: this.cid });\n    },\n    onPointerMove: function(evt) {\n        const { relatedView, paper } = this;\n        const { model } = relatedView;\n        const { clientX, clientY } = util.normalizeEvent(evt);\n        const coords = paper.clientToLocalPoint(clientX, clientY);\n        const relativeCoords = model.getRelativePointFromAbsolute(coords);\n        this.setPosition(relatedView, relativeCoords, this);\n        this.update();\n    },\n    onPointerUp: function(_evt) {\n        const { relatedView, paper } = this;\n        paper.delegateEvents();\n        this.undelegateDocumentEvents();\n        this.blur();\n        this.toggleExtras(false);\n        relatedView.model.stopBatch('control-move', { ui: true, tool: this.cid });\n    },\n    onPointerDblClick: function() {\n        const { relatedView } = this;\n        this.resetPosition(relatedView, this);\n        this.update();\n    }\n\n});\n","/**\r\n * @description  link \r\n * @author  42020306\r\n * @since 2023/9/16\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\nimport { linkTools, dia, shapes } from \"jointjs\";\r\n\r\n/**\r\n * Primary Link\r\n */\r\nexport const PrimaryLink = shapes.standard.Link.define(\r\n  \"PrimaryLink\",\r\n  {\r\n    router: { name: \"manhattan\" },\r\n    attrs: {\r\n      line: {\r\n        fill: \"none\",\r\n        stroke: \"#333333\",\r\n        strokeWidth: 2\r\n      }\r\n    }\r\n  },\r\n  {\r\n    updateLabelText(linkView: dia.LinkView, textInput: HTMLInputElement) {\r\n      // @ts-ignore\r\n      const { model } = linkView;\r\n      const label = model.label(0);\r\n      const cellText = label?.attrs?.text?.text || \"\";\r\n\r\n      const bbox = linkView.getBBox();\r\n      const centerX = bbox.x + bbox.width / 2;\r\n      const centerY = bbox.y + bbox.height / 2;\r\n      const oneThirdWidth = bbox.width / 3;\r\n      textInput.value = cellText;\r\n\r\n      textInput.style.top = centerY - 10 + \"px\";\r\n      textInput.style.left = centerX - oneThirdWidth / 2 + \"px\";\r\n      textInput.style.width = oneThirdWidth + \"px\";\r\n      textInput.style.height = 20 + \"px\";\r\n      textInput.style.display = \"block\";\r\n\r\n      function handleKeydownEvent(event: any) {\r\n        if (event.key === \"Enter\") {\r\n          let newCellText = textInput.value;\r\n\r\n          model.label(0, {\r\n            position: 0.5,\r\n            attrs: { text: { text: newCellText } }\r\n          });\r\n\r\n          textInput.style.display = \"none\";\r\n          textInput.removeEventListener(\"keydown\", handleKeydownEvent);\r\n        }\r\n      }\r\n\r\n      textInput.value = \"\";\r\n      textInput.addEventListener(\"keydown\", handleKeydownEvent);\r\n      textInput.focus();\r\n    },\r\n    addTools(linkView: any) {\r\n      const tools = [\r\n        // new linkTools.Vertices(),\r\n        new linkTools.SourceArrowhead(),\r\n        new linkTools.TargetArrowhead()\r\n      ];\r\n\r\n      linkView.addTools(\r\n        new dia.ToolsView({\r\n          name: \"link-tools\",\r\n          tools: tools\r\n        })\r\n      );\r\n    },\r\n    removeTools(linkView: any) {\r\n      if (linkView.hasTools(\"link-tools\")) {\r\n        linkView.removeTools();\r\n      }\r\n    }\r\n  }\r\n);\r\n","/**\r\n * @description jointjs \r\n * @author  42020306\r\n * @since 2023/9/9\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\nimport { PrimaryLink } from \"./shapes/link\";\r\nimport { dia, shapes } from \"jointjs\";\r\n\r\n/**\r\n *  jointjs\r\n *\r\n * @param config  jointjs\r\n * @returns paper, graph\r\n */\r\nexport function initJointJs(config: {\r\n  el: string;\r\n  bgColor: string;\r\n  height: string;\r\n  width: string;\r\n  isPreventLinkFromInputPorts?: boolean;\r\n  isPreventLinkFromOutputToInputWithinOneElement?: boolean;\r\n  isPreventLinkToOutputPorts?: boolean;\r\n}) {\r\n  const namespace = shapes;\r\n  const graph = new dia.Graph({}, { cellNamespace: namespace });\r\n\r\n  const paper = new dia.Paper({\r\n    el: document.getElementById(config.el),\r\n    model: graph,\r\n    height: config.height,\r\n    width: config.width,\r\n    gridSize: 15,\r\n    drawGrid: true,\r\n    background: {\r\n      color: config.bgColor\r\n    },\r\n    snapLabels: true,\r\n    snapLinks: { radius: 5 },\r\n    interactive: {\r\n      linkMove: false,\r\n      labelMove: true,\r\n      arrowheadMove: false,\r\n      vertexMove: false,\r\n      vertexAdd: false,\r\n      vertexRemove: false,\r\n      useLinkTools: false\r\n    },\r\n    cellViewNamespace: namespace,\r\n    defaultLink: () => new PrimaryLink(),\r\n    defaultConnectionPoint: { name: \"boundary\" },\r\n    validateConnection: function (cellViewS, magnetS, cellViewT, magnetT, end, linkView) {\r\n      if (config.isPreventLinkFromInputPorts || false) {\r\n        if (magnetS && magnetS.getAttribute(\"port-group\") === \"in\") return false;\r\n      }\r\n\r\n      if (config.isPreventLinkFromOutputToInputWithinOneElement || false) {\r\n        if (cellViewS === cellViewT) return false;\r\n      }\r\n\r\n      if (config.isPreventLinkToOutputPorts || false) {\r\n        return magnetT && magnetT.getAttribute(\"port-group\") === \"in\";\r\n      }\r\n\r\n      return true;\r\n    }\r\n  });\r\n\r\n  return {\r\n    paper,\r\n    graph\r\n  };\r\n}\r\n","/**\r\n * @description  jointjs elementTools\r\n * @author  42020306\r\n * @since 2023/9/23\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\nimport { dia, elementTools } from \"jointjs\";\r\n\r\n/**\r\n * Rect \r\n *\r\n * @link https://resources.jointjs.com/docs/jointjs/v3.7/joint.html#elementTools.Control\r\n */\r\nexport class NormalResizeTool extends elementTools.Control {\r\n  constructor() {\r\n    super();\r\n\r\n    this.children = [\r\n      {\r\n        tagName: \"rect\",\r\n        selector: \"handle\",\r\n        attributes: {\r\n          cursor: \"nwse-resize\",\r\n          width: 10,\r\n          height: 10,\r\n          x: 0,\r\n          y: 0,\r\n          fill: \"#001DFF\"\r\n        }\r\n      }\r\n    ];\r\n  }\r\n\r\n  protected getPosition(view: dia.ElementView): dia.Point {\r\n    // @ts-ignore\r\n    const model = view.model;\r\n    const { width, height } = model.size();\r\n    return { x: width, y: height };\r\n  }\r\n\r\n  protected setPosition(view: dia.ElementView, coordinates: dia.Point): void {\r\n    // @ts-ignore\r\n    const model = view.model;\r\n    model.resize(Math.max(coordinates.x - 10, 1), Math.max(coordinates.y - 10, 1));\r\n  }\r\n}\r\n\r\n/**\r\n * Circle \r\n *\r\n * @link https://resources.jointjs.com/docs/jointjs/v3.7/joint.html#elementTools.Control\r\n */\r\nexport class CircleResizeTool extends elementTools.Control {\r\n  constructor() {\r\n    super();\r\n\r\n    this.children = [\r\n      {\r\n        tagName: \"rect\",\r\n        selector: \"handle\",\r\n        attributes: {\r\n          cursor: \"nwse-resize\",\r\n          width: 10,\r\n          height: 10,\r\n          x: 0,\r\n          y: 0,\r\n          fill: \"#001DFF\"\r\n        }\r\n      }\r\n    ];\r\n  }\r\n\r\n  protected getPosition(view: dia.ElementView): dia.Point {\r\n    // @ts-ignore\r\n    const model = view.model;\r\n    const { width, height } = model.size();\r\n    return { x: width, y: height };\r\n  }\r\n\r\n  protected setPosition(view: dia.ElementView, coordinates: dia.Point): void {\r\n    // @ts-ignore\r\n    const model = view.model;\r\n    model.resize(coordinates.x, coordinates.y);\r\n  }\r\n}\r\n\r\n/**\r\n * Shape \r\n *\r\n * @link https://resources.jointjs.com/docs/jointjs/v3.7/joint.html#elementTools.Control\r\n */\r\n// @ts-ignore\r\nexport class RotateTool extends elementTools.Control {\r\n  constructor() {\r\n    super();\r\n\r\n    this.children = [\r\n      {\r\n        tagName: \"rect\",\r\n        selector: \"handle\",\r\n        attributes: {\r\n          cursor: \"nwse-resize\",\r\n          width: 10,\r\n          height: 10,\r\n          x: -10,\r\n          y: -10,\r\n          fill: \"#333333\"\r\n        }\r\n      }\r\n    ];\r\n  }\r\n\r\n  protected setPosition(view: dia.ElementView, coordinates: dia.Point): void {\r\n    // @ts-ignore\r\n    const { model } = view;\r\n    //  x,y (0,0)\r\n    const degrees = Math.atan2(coordinates.x, coordinates.y);\r\n    model.rotate(degrees);\r\n  }\r\n}\r\n\r\nexport function getPorts() {\r\n  const port = {\r\n    attrs: { body: { magnet: true, r: 5 } },\r\n    markup: [{ tagName: \"circle\", selector: \"body\" }]\r\n  };\r\n\r\n  const top = Object.assign({ position: { name: \"top\" } }, port);\r\n  const bottom = Object.assign({ position: { name: \"bottom\" } }, port);\r\n  const left = Object.assign({ position: { name: \"left\" } }, port);\r\n  const right = Object.assign({ position: { name: \"right\" } }, port);\r\n\r\n  return { top, bottom, left, right };\r\n}\r\n\r\n/**\r\n *  label \r\n *\r\n * @param elementView\r\n * @param textInput\r\n */\r\nexport function updateLabelText(elementView: dia.ElementView, textInput: HTMLInputElement) {\r\n  // @ts-ignore\r\n  const { model } = elementView;\r\n  const { position, size } = model.attributes;\r\n\r\n  const cellText = model.attr(\"label/text\");\r\n  textInput.value = cellText;\r\n\r\n  textInput.style.top = position.y + \"px\";\r\n  textInput.style.left = position.x + \"px\";\r\n  textInput.style.width = size.width + \"px\";\r\n  textInput.style.height = size.height + \"px\";\r\n  textInput.style.display = \"block\";\r\n\r\n  function handleKeydownEvent(event: any) {\r\n    if (event.key === \"Enter\") {\r\n      let newCellText = textInput.value;\r\n      model.attr(\"label/text\", newCellText);\r\n      textInput.style.display = \"none\";\r\n      textInput.removeEventListener(\"keydown\", handleKeydownEvent);\r\n    }\r\n  }\r\n\r\n  textInput.value = \"\";\r\n  textInput.addEventListener(\"keydown\", handleKeydownEvent);\r\n  textInput.focus();\r\n}\r\n","/**\r\n * @description \r\n * @author  42020306\r\n * @since 2023/9/9\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\nimport { dia, shapes, elementTools } from \"jointjs\";\r\nimport { NormalResizeTool, RotateTool, getPorts, updateLabelText } from \"../eletools\";\r\n\r\n/**\r\n * \r\n */\r\nexport const PrimaryRect = shapes.standard.Rectangle.define(\r\n  \"PrimaryRect\",\r\n  {\r\n    attrs: {\r\n      body: {\r\n        width: \"calc(w)\",\r\n        height: \"calc(h)\",\r\n        fill: \"#fcfcfc\",\r\n        stroke: \"#333333\",\r\n        strokeWidth: 1.5,\r\n        cursor: \"grab\",\r\n        \"stroke-dasharray\": \"none\"\r\n      },\r\n      label: {\r\n        text: \"\",\r\n        textVerticalAnchor: \"middle\",\r\n        textAnchor: \"middle\",\r\n        fill: \"#333333\",\r\n        fontWeight: \"normal\",\r\n        fontSize: 18,\r\n        fontFamily: \"\",\r\n        refX: \"50%\",\r\n        refY: \"50%\"\r\n      }\r\n    }\r\n  },\r\n  {\r\n    updateLabelText,\r\n    addTools(elementView: dia.ElementView) {\r\n      const boundaryTool = new elementTools.Boundary();\r\n      const resizeTool = new NormalResizeTool();\r\n      const rotateTool = new RotateTool();\r\n\r\n      elementView.addTools(\r\n        new dia.ToolsView({\r\n          name: \"rect-tools\",\r\n          tools: [boundaryTool, resizeTool, rotateTool]\r\n        })\r\n      );\r\n    },\r\n    removeTools(elementView: dia.ElementView) {\r\n      if (elementView.hasTools(\"rect-tools\")) {\r\n        elementView.removeTools();\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\n/**\r\n *  rect\r\n *\r\n * @param graph joint.Graph \r\n * @param config \r\n */\r\nexport function createPrimaryRectangle(\r\n  graph: dia.Graph,\r\n  config?: {\r\n    x?: number;\r\n    y?: number;\r\n    width?: number;\r\n    height?: number;\r\n    attrs?: {\r\n      body: any;\r\n    };\r\n  }\r\n) {\r\n  const rect = new PrimaryRect({\r\n    position: { x: config?.x || 30, y: config?.y || 30 },\r\n    ports: {\r\n      groups: getPorts()\r\n    },\r\n    attrs: config?.attrs || {}\r\n  });\r\n\r\n  rect.resize(config?.width || 140, config?.height || 70);\r\n  rect.addPorts([{ group: \"top\" }, { group: \"bottom\" }, { group: \"left\" }, { group: \"right\" }]);\r\n\r\n  graph.addCell(rect);\r\n}\r\n","/**\r\n * @description \r\n * @author  42020306\r\n * @since 2023/9/24\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\nimport { dia, shapes, elementTools } from \"jointjs\";\r\nimport { CircleResizeTool, RotateTool, getPorts, updateLabelText } from \"../eletools\";\r\n\r\n/**\r\n * Primary \r\n */\r\nconst PrimaryCircle = shapes.standard.Ellipse.define(\r\n  \"PrimaryCircle\",\r\n  {\r\n    attrs: {\r\n      body: {\r\n        width: \"calc(w)\",\r\n        height: \"calc(h)\",\r\n        fill: \"#fcfcfc\",\r\n        stroke: \"#333333\",\r\n        strokeWidth: 1.5,\r\n        cursor: \"grab\",\r\n        \"stroke-dasharray\": \"none\"\r\n      },\r\n      label: {\r\n        text: \"\",\r\n        textVerticalAnchor: \"middle\",\r\n        textAnchor: \"middle\",\r\n        fill: \"#333333\",\r\n        fontWeight: \"normal\",\r\n        fontSize: 18,\r\n        fontFamily: \"\",\r\n        refX: \"50%\",\r\n        refY: \"50%\"\r\n      }\r\n    }\r\n  },\r\n  {\r\n    updateLabelText,\r\n    addTools(elementView: dia.ElementView) {\r\n      const boundaryTool = new elementTools.Boundary();\r\n      const resizeTool = new CircleResizeTool();\r\n      const rotateTool = new RotateTool();\r\n\r\n      elementView.addTools(\r\n        new dia.ToolsView({\r\n          name: \"circle-tools\",\r\n          tools: [boundaryTool, resizeTool, rotateTool]\r\n        })\r\n      );\r\n    },\r\n    removeTools(elementView: dia.ElementView) {\r\n      if (elementView.hasTools(\"circle-tools\")) {\r\n        elementView.removeTools();\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\n/**\r\n *  circle\r\n * \r\n * @param graph \r\n * @param config \r\n */\r\nexport function createPrimaryCircle(\r\n  graph: dia.Graph,\r\n  config?: {\r\n    x?: number;\r\n    y?: number;\r\n    width?: number;\r\n    height?: number;\r\n  }\r\n) {\r\n  const circle = new PrimaryCircle({\r\n    position: { x: config?.x || 30, y: config?.y || 30 },\r\n    ports: {\r\n      groups: getPorts()\r\n    }\r\n  });\r\n\r\n  circle.resize(config?.width || 80, config?.height || 80);\r\n  circle.addPorts([{ group: \"top\" }, { group: \"bottom\" }, { group: \"left\" }, { group: \"right\" }]);\r\n\r\n  graph.addCell(circle);\r\n}\r\n","/**\r\n * @description \r\n * @author  42020306\r\n * @since 2023/9/24\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\nimport { dia, shapes, elementTools } from \"jointjs\";\r\nimport { NormalResizeTool, RotateTool, getPorts, updateLabelText } from \"../eletools\";\r\n\r\n/**\r\n * Primary \r\n */\r\nconst PrimaryPolygon = shapes.standard.Polygon.define(\r\n  \"PrimaryPolygon\",\r\n  {\r\n    attrs: {\r\n      body: {\r\n        width: \"calc(w)\",\r\n        height: \"calc(h)\",\r\n        fill: \"#fcfcfc\",\r\n        stroke: \"#333333\",\r\n        strokeWidth: 1.5,\r\n        cursor: \"grab\",\r\n        \"stroke-dasharray\": \"none\",\r\n        refPoints: \"0,10 10,0 20,10 10,20\"\r\n      },\r\n      label: {\r\n        text: \"\",\r\n        textVerticalAnchor: \"middle\",\r\n        textAnchor: \"middle\",\r\n        fill: \"#333333\",\r\n        fontWeight: \"normal\",\r\n        fontSize: 18,\r\n        fontFamily: \"\",\r\n        refX: \"50%\",\r\n        refY: \"50%\"\r\n      }\r\n    }\r\n  },\r\n  {\r\n    updateLabelText,\r\n    addTools(elementView: dia.ElementView) {\r\n      const boundaryTool = new elementTools.Boundary();\r\n      const resizeTool = new NormalResizeTool();\r\n      const rotateTool = new RotateTool();\r\n\r\n      elementView.addTools(\r\n        new dia.ToolsView({\r\n          name: \"polygon-tools\",\r\n          tools: [boundaryTool, resizeTool, rotateTool]\r\n        })\r\n      );\r\n    },\r\n    removeTools(elementView: dia.ElementView) {\r\n      if (elementView.hasTools(\"polygon-tools\")) {\r\n        elementView.removeTools();\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\n/**\r\n *  polygon\r\n * \r\n * @param graph \r\n * @param config \r\n */\r\nexport function createPrimaryPolygon(\r\n  graph: dia.Graph,\r\n  config?: {\r\n    x?: number;\r\n    y?: number;\r\n    width?: number;\r\n    height?: number;\r\n  }\r\n) {\r\n  const polygon = new PrimaryPolygon({\r\n    position: { x: config?.x || 30, y: config?.y || 30 },\r\n    ports: {\r\n      groups: getPorts()\r\n    }\r\n  });\r\n\r\n  polygon.resize(config?.width || 100, config?.height || 80);\r\n  polygon.addPorts([{ group: \"top\" }, { group: \"bottom\" }, { group: \"left\" }, { group: \"right\" }]);\r\n\r\n  graph.addCell(polygon);\r\n}\r\n","/**\r\n * @description \r\n * @author  42020306\r\n * @since 2023/9/24\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\nimport { dia, shapes, elementTools } from \"jointjs\";\r\nimport { NormalResizeTool, RotateTool, getPorts, updateLabelText } from \"../eletools\";\r\n\r\nconst PrimaryPath = shapes.standard.Path.define(\r\n  \"PrimaryPath\",\r\n  {\r\n    attrs: {\r\n      body: {\r\n        width: \"calc(w)\",\r\n        height: \"calc(h)\",\r\n        fill: \"#fcfcfc\",\r\n        stroke: \"#333333\",\r\n        strokeWidth: 1.5,\r\n        cursor: \"grab\",\r\n        \"stroke-dasharray\": \"none\"\r\n      },\r\n      label: {\r\n        text: \"\",\r\n        textVerticalAnchor: \"middle\",\r\n        textAnchor: \"middle\",\r\n        fill: \"#333333\",\r\n        fontWeight: \"normal\",\r\n        fontSize: 18,\r\n        fontFamily: \"\",\r\n        refX: \"50%\",\r\n        refY: \"50%\"\r\n      }\r\n    }\r\n  },\r\n  {\r\n    updateLabelText,\r\n    addTools(elementView: dia.ElementView) {\r\n      const boundaryTool = new elementTools.Boundary();\r\n      const resizeTool = new NormalResizeTool();\r\n      const rotateTool = new RotateTool();\r\n\r\n      elementView.addTools(\r\n        new dia.ToolsView({\r\n          name: \"path-tools\",\r\n          tools: [boundaryTool, resizeTool, rotateTool]\r\n        })\r\n      );\r\n    },\r\n    removeTools(elementView: dia.ElementView) {\r\n      if (elementView.hasTools(\"path-tools\")) {\r\n        elementView.removeTools();\r\n      }\r\n    }\r\n  }\r\n);\r\n\r\n/**\r\n *  path\r\n *\r\n * @param graph\r\n * @param config\r\n */\r\nexport function createPrimaryPath(\r\n  graph: dia.Graph,\r\n  config?: {\r\n    x?: number;\r\n    y?: number;\r\n    width?: number;\r\n    height?: number;\r\n    refD?: string;\r\n  }\r\n) {\r\n  const polygon = new PrimaryPath({\r\n    position: { x: config?.x || 30, y: config?.y || 30 },\r\n    ports: {\r\n      groups: getPorts()\r\n    },\r\n    attrs: {\r\n      body: {\r\n        refD: config?.refD || \"\"\r\n      }\r\n    }\r\n  });\r\n\r\n  polygon.resize(config?.width || 140, config?.height || 70);\r\n  polygon.addPorts([{ group: \"top\" }, { group: \"bottom\" }, { group: \"left\" }, { group: \"right\" }]);\r\n\r\n  graph.addCell(polygon);\r\n}\r\n","/**\r\n * @description Diagraming \r\n * @author  42020306\r\n * @since 2023/9/18\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\n/**\r\n * Link \r\n */\r\nexport const linkConnectorOptions = [\r\n  {\r\n    value: \"straight\",\r\n    label: \"straight\"\r\n  },\r\n  {\r\n    value: \"jumpover\",\r\n    label: \"jumpover\"\r\n  },\r\n  {\r\n    value: \"normal\",\r\n    label: \"normal\"\r\n  },\r\n  {\r\n    value: \"rounded\",\r\n    label: \"rounded\"\r\n  },\r\n  {\r\n    value: \"smooth\",\r\n    label: \"smooth\"\r\n  },\r\n  {\r\n    value: \"curve\",\r\n    label: \"curve\"\r\n  }\r\n];\r\n\r\n/**\r\n * Link \r\n */\r\nexport const linkConnectorConfig = ref({\r\n  name: \"normal\"\r\n});\r\n\r\n/**\r\n * Link  name \r\n */\r\nexport const linkRouterOptions = [\r\n  {\r\n    value: \"manhattan\",\r\n    label: \"manhattan\"\r\n  },\r\n  {\r\n    value: \"metro\",\r\n    label: \"metro\"\r\n  },\r\n  {\r\n    value: \"normal\",\r\n    label: \"normal\"\r\n  },\r\n  {\r\n    value: \"orthogonal\",\r\n    label: \"orthogonal\"\r\n  },\r\n  {\r\n    value: \"rightAngle\",\r\n    label: \"rightAngle\"\r\n  }\r\n];\r\n\r\n/**\r\n * Link \r\n */\r\nexport const linkRouterConfig = ref({\r\n  name: \"normal\"\r\n});\r\n\r\n/**\r\n *  View View  model \r\n */\r\nexport const clickedLastView = ref({\r\n  view: null,\r\n  model: null\r\n});\r\n\r\n/**\r\n *  View\r\n */\r\nexport const clickedCurrView = ref(null);\r\n\r\n/**\r\n * \r\n */\r\nexport const textColor = ref(\"\");\r\n\r\n/**\r\n * \r\n */\r\nexport const textSize = ref(14);\r\n\r\n/**\r\n * \r\n */\r\nexport const fontFamilyOptions = [\r\n  {\r\n    value: \"\",\r\n    label: \"\"\r\n  },\r\n  {\r\n    value: \"Arial\",\r\n    label: \"Arial\"\r\n  },\r\n  {\r\n    value: \"Bahnschrift\",\r\n    label: \"Bahnschrift\"\r\n  },\r\n  {\r\n    value: \"BIZ UDGothic\",\r\n    label: \"BIZ UDGothic\"\r\n  },\r\n  {\r\n    value: \"Calibri\",\r\n    label: \"Calibri\"\r\n  },\r\n  {\r\n    value: \"Cambria\",\r\n    label: \"Cambria\"\r\n  },\r\n  {\r\n    value: \"Candara\",\r\n    label: \"Candara\"\r\n  },\r\n  {\r\n    value: \"Comic Sans MS\",\r\n    label: \"Comic Sans MS\"\r\n  },\r\n  {\r\n    value: \"Consolas\",\r\n    label: \"Consolas\"\r\n  },\r\n  {\r\n    value: \"Constantia\",\r\n    label: \"Constantia\"\r\n  },\r\n  {\r\n    value: \"Corbel\",\r\n    label: \"Corbel\"\r\n  }\r\n];\r\n\r\n// \r\nexport const fontFamily = ref(\"\");\r\n\r\n/**\r\n * \r\n */\r\nexport const shapeStrokeWidthOptions = [\r\n  {\r\n    value: 0,\r\n    label: \"0px\"\r\n  },\r\n  {\r\n    value: 0.5,\r\n    label: \"0.5px\"\r\n  },\r\n  {\r\n    value: 1,\r\n    label: \"1px\"\r\n  },\r\n  {\r\n    value: 1.5,\r\n    label: \"1.5px\"\r\n  },\r\n  {\r\n    value: 2,\r\n    label: \"2px\"\r\n  },\r\n  {\r\n    value: 3,\r\n    label: \"3px\"\r\n  },\r\n  {\r\n    value: 4,\r\n    label: \"4px\"\r\n  },\r\n  {\r\n    value: 5,\r\n    label: \"5px\"\r\n  },\r\n  {\r\n    value: 6,\r\n    label: \"6px\"\r\n  },\r\n  {\r\n    value: 8,\r\n    label: \"8px\"\r\n  },\r\n  {\r\n    value: 10,\r\n    label: \"10px\"\r\n  }\r\n];\r\n\r\n/**\r\n *  stroke \r\n */\r\nexport const shapeStrokeWidth = ref(1.5);\r\n\r\n/**\r\n * \r\n */\r\nexport const shapeBackground = ref(\"white\");\r\n\r\n/**\r\n *  stroke \r\n */\r\nexport const shapeBorderStyle = ref(\"solid\");\r\n\r\n/**\r\n *  paper \r\n */\r\nexport const currentScale = ref(1);\r\n\r\n/**\r\n *  slider \r\n */\r\nexport const calcCurrentScale = computed({\r\n  get() {\r\n    return Number((currentScale.value * 100).toFixed(0));\r\n  },\r\n  set(value) {\r\n    currentScale.value = value / 100;\r\n  }\r\n});\r\n\r\n/**\r\n *  paper \r\n */\r\nexport const currentOffsetX = ref(0);\r\n\r\n/**\r\n *  paper \r\n */\r\nexport const currentOffsetY = ref(0);\r\n\r\n/**\r\n *  Link \r\n */\r\nexport const isClickedLink = ref(false);\r\n\r\n/**\r\n *  Element \r\n */\r\nexport const isClickedElement = ref(false);\r\n","/**\r\n * @description Diagraming \r\n * @author  42020306\r\n * @since 2023/9/22\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\nexport function getLinkOrElementAttr(model: any, attrKey: string) {\r\n  if (model.isLink()) {\r\n    attrKey = \"line/\" + attrKey;\r\n  } else {\r\n    attrKey = \"body/\" + attrKey;\r\n  }\r\n  return attrKey;\r\n}\r\n","/**\r\n * @description link  element \r\n * @author  42020306\r\n * @since 2023/9/24\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\nimport { dia } from \"@mainapp/lib\";\r\nimport { getLinkOrElementAttr } from \"./utils\";\r\n\r\n/**\r\n * \r\n *\r\n * @param config\r\n * @param paper\r\n */\r\nexport function changeRouterConfig(config: Ref<any>, paper: dia.Paper) {\r\n  if (!paper?.options?.defaultRouter) return;\r\n  paper.options.defaultRouter = config.value;\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param config\r\n * @param paper\r\n */\r\nexport function changeConnectorConfig(config: Ref<any>, paper: dia.Paper) {\r\n  if (!paper?.options?.defaultConnector) return;\r\n  paper.options.defaultConnector = config.value;\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param currView \r\n */\r\nexport function changeTextBold(currView: dia.ElementView) {\r\n  // @ts-ignore\r\n  const model = currView.model;\r\n  const isLink = model.isLink();\r\n  let weight = \"normal\";\r\n\r\n  if (isLink) {\r\n    weight = model.label(0).attrs.text.fontWeight || \"normal\";\r\n  } else {\r\n    weight = model.attr(\"label/fontWeight\");\r\n  }\r\n\r\n  if (weight === \"bold\") {\r\n    weight = \"normal\";\r\n  } else weight = \"bold\";\r\n\r\n  if (isLink) {\r\n    model.label(0, {\r\n      attrs: {\r\n        text: {\r\n          fontWeight: weight\r\n        }\r\n      }\r\n    });\r\n  } else {\r\n    model.attr(\"label/fontWeight\", weight);\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param currView \r\n */\r\nexport function changeTextItalic(currView: dia.ElementView) {\r\n  // @ts-ignore\r\n  const model = currView.model;\r\n  const isLink = model.isLink();\r\n\r\n  let style = \"normal\";\r\n\r\n  if (isLink) {\r\n    style = model.label(0).attrs.text.fontStyle || \"normal\";\r\n  } else {\r\n    style = model.attr(\"label/fontStyle\");\r\n  }\r\n\r\n  if (style === \"italic\") {\r\n    style = \"normal\";\r\n  } else style = \"italic\";\r\n\r\n  if (isLink) {\r\n    model.label(0, {\r\n      attrs: {\r\n        text: {\r\n          fontStyle: style\r\n        }\r\n      }\r\n    });\r\n  } else {\r\n    model.attr(\"label/fontStyle\", style);\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param currView \r\n */\r\nexport function changeTextUnderline(currView: dia.ElementView) {\r\n  // @ts-ignore\r\n  const model = currView.model;\r\n  const isLink = model.isLink();\r\n\r\n  let style = \"normal\";\r\n\r\n  if (isLink) {\r\n    style = model.label(0).attrs.text.textDecoration || \"normal\";\r\n  } else {\r\n    style = model.attr(\"label/textDecoration\");\r\n  }\r\n\r\n  if (style === \"underline\") {\r\n    style = \"normal\";\r\n  } else style = \"underline\";\r\n\r\n  if (isLink) {\r\n    model.label(0, {\r\n      attrs: {\r\n        text: {\r\n          textDecoration: style\r\n        }\r\n      }\r\n    });\r\n  } else {\r\n    model.attr(\"label/textDecoration\", style);\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param currView \r\n * @param color\r\n */\r\nexport function changeTextColor(currView: dia.ElementView, color: string) {\r\n  // @ts-ignore\r\n  const model = currView.model;\r\n  const isLink = model.isLink();\r\n\r\n  if (isLink) {\r\n    model.label(0, {\r\n      attrs: {\r\n        text: {\r\n          fill: color\r\n        }\r\n      }\r\n    });\r\n  } else {\r\n    model.attr(\"label/fill\", color);\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param currView \r\n * @param size\r\n */\r\nexport function changeTextSize(currView: dia.ElementView, size: number) {\r\n  // @ts-ignore\r\n  const model = currView.model;\r\n  const isLink = model.isLink();\r\n\r\n  if (isLink) {\r\n    model.label(0, {\r\n      attrs: {\r\n        text: {\r\n          fontSize: size\r\n        }\r\n      }\r\n    });\r\n  } else {\r\n    model.attr(\"label/fontSize\", size);\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param currView \r\n * @param family\r\n */\r\nexport function changeTextFamily(currView: dia.ElementView, family: string) {\r\n  // @ts-ignore\r\n  const model = currView.model;\r\n  const isLink = model.isLink();\r\n\r\n  if (isLink) {\r\n    model.label(0, {\r\n      attrs: {\r\n        text: {\r\n          fontFamily: family\r\n        }\r\n      }\r\n    });\r\n  } else {\r\n    model.attr(\"label/fontFamily\", family);\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param currView \r\n * @param strokeWidth\r\n */\r\nexport function changeStrokeWidth(currView: dia.ElementView, strokeWidth: number) {\r\n  // @ts-ignore\r\n  const model = currView.model;\r\n\r\n  const attrKey = getLinkOrElementAttr(model, \"strokeWidth\");\r\n  model.attr(attrKey, strokeWidth);\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param currView \r\n * @param style \"solid\" | \"dashed\" | \"dotted\" | \"dashed-dotted\"\r\n */\r\nexport function changeBorderStyle(\r\n  currView: dia.ElementView,\r\n  style: \"solid\" | \"dashed\" | \"dotted\" | \"dashed-dotted\"\r\n) {\r\n  // @ts-ignore\r\n  const model = currView.model;\r\n  const attrKey = getLinkOrElementAttr(model, \"strokeDasharray\");\r\n\r\n  let lattice = \"none\";\r\n\r\n  if (style === \"dashed-dotted\") {\r\n    lattice = \"5,2,1,2\";\r\n  } else if (style === \"dotted\") {\r\n    lattice = \"1,2\";\r\n  } else if (style === \"dashed\") {\r\n    lattice = \"5,2\";\r\n  } else {\r\n    lattice = \"none\";\r\n  }\r\n\r\n  model.attr(attrKey, lattice);\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param currView \r\n * @param color rgbrgba\r\n */\r\nexport function changeBackground(currView: dia.ElementView, color: string) {\r\n  // @ts-ignore\r\n  const model = currView.model;\r\n  model.attr(\"body/fill\", color);\r\n}\r\n\r\n/**\r\n *  Link \r\n *\r\n * @param currView \r\n * @param color rgbrgba\r\n */\r\nexport function changeLinkColor(currView: dia.ElementView, color: string) {\r\n  // @ts-ignore\r\n  const model = currView.model;\r\n\r\n  const attrKey = getLinkOrElementAttr(model, \"stroke\");\r\n  model.attr(attrKey, color);\r\n}\r\n\r\n/**\r\n * \r\n */\r\nexport function closeColorPicker(el: any) {\r\n  setTimeout(() => {\r\n    el.hide();\r\n  }, 200);\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param el ref \r\n */\r\nexport function openColorPicker(el: any) {\r\n  setTimeout(() => {\r\n    el.show();\r\n  }, 100);\r\n}\r\n","/**\r\n * @description \r\n * @author  42020306\r\n * @since 2023/9/24\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\nimport { dia, Rect, Circle, Polygon, Path } from \"@mainapp/lib\";\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addFlow(graph: dia.Graph) {\r\n  Rect.createPrimaryRectangle(graph, { x: 30, y: 30 });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addDecision(graph: dia.Graph) {\r\n  Polygon.createPrimaryPolygon(graph, { x: 30, y: 30 });\r\n}\r\n\r\n/**\r\n * /\r\n *\r\n * @param graph\r\n */\r\nexport function addStartOrEnd(graph: dia.Graph) {\r\n  Rect.createPrimaryRectangle(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    attrs: {\r\n      body: {\r\n        rx: \"calc(h / 2)\",\r\n        ry: \"calc(h / 2)\"\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addDocument(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    refD: \"M 0 0 L 20 0 L 20 9 C 16 7 15 7 11 8 C 5 10 4 10 0 9 Z\"\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addData(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    refD: \"M 0 0 L 20 0 L 17 11 L -3 11 Z\"\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addChildFlow(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    refD: \"M 0 0 V 10 H 14 V 0 Z M 16 0 L 16 0 V 10 H 14 V 0 Z M -2 0 V 10 H 0 V 0 Z\"\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addExtraData(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    refD: \"M 0 0 H 11 C 9 2 9 5 11 7 H 0 C -2 5 -2 2 0 0 Z\"\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addInnerStore(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    refD: \"M 0 0 H 2 V 2 H 0 Z M 2 0 H 13 V 2 H 2 Z M 0 2 V 8 H 2 V 2 Z M 13 8 V 2 H 2 V 8 Z\"\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addQueueData(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 80,\r\n    height: 80,\r\n    refD: \"M 0 0 A 1 1 0 0 0 0 8 A 1 1 0 0 0 0 0 Z M 0 8 L 4 8 Z\"\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addDatabase1(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 100,\r\n    height: 70,\r\n    refD: \"M 0 0 H 11 C 10 1 10 5 11 6 H 0 C -1 5 -1 1 0 0 Z M 11 0 C 12 1 12 5 11 6 C 10 5 10 1 11 0 Z\"\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addDatabase2(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    height: 100,\r\n    width: 70,\r\n    refD: \"M 0 0 L 0 10 C 1 11 7 11 8 10 L 8 0 C 7 1 1 1 0 0 M 0 0 C 1 -1 7 -1 8 0 C 7 1 1 1 0 0 Z\"\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addManualInput(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 100,\r\n    refD: \"M 0 0 L 13 -2 V 6 H 0 Z\"\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addCard(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 100,\r\n    refD: \"M 0 3 V 8 H 11 V 0 H 5 L 0 3 Z\"\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addCassette(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 100,\r\n    refD: \"M 0 0 V 5 C 4 5 8 7 12 6 V 1 C 8 2 4 0 0 0 Z\"\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addDisplay(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 100,\r\n    refD: \"M 0 4 L 2 0 H 9 C 9 3 9 5 9 8 H 2 L 0 4 Z\"\r\n  });\r\n}\r\n\r\nexport function addManualOperation(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 100,\r\n    refD: \"M 0 0 H 9 L 7 5 H 2 L 0 0 Z\"\r\n  });\r\n}\r\n\r\nexport function addPrepare(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 100,\r\n    refD: \"M 0 0 L 7 0 L 9 3 L 7 6 L 0 6 L -2 3 Z\"\r\n  });\r\n}\r\n\r\nexport function addParallelMode(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 100,\r\n    refD: \"M 0 0 H 11 L 11 6 H 0 L 0 0 M 0 -1 L 11 -1 Z M 0 7 L 11 7 Z\"\r\n  });\r\n}\r\n\r\nexport function addCycleLimit(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 100,\r\n    refD: \"M 3 0 H 7 L 9 2 V 6 H 1 V 2 Z\"\r\n  });\r\n}\r\n\r\nexport function addOr(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 100,\r\n    height: 100,\r\n    refD: \"M 0 0 A 1 1 0 0 0 0 6 A 1 1 0 0 0 0 0 Z M -3 3 L 3 3 Z M 0 0 L 0 6 Z\"\r\n  });\r\n}\r\n\r\nexport function addCalcSum(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 100,\r\n    height: 100,\r\n    refD: \"M 0 0 A 1 1 0 0 0 0 6 A 1 1 0 0 0 0 0 Z M -2.5 1.4 L 2.5 4.6 Z M 2.5 1.4 L -2.5 4.6\"\r\n  });\r\n}\r\n\r\nexport function addOffPageReference(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 100,\r\n    refD: \"M 0 0 H 6 V 3 L 3 5 L 0 3 Z\"\r\n  });\r\n}\r\n\r\nexport function addSorting(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 100,\r\n    height: 100,\r\n    refD: \"M 4 0 L 0 4 L 4 8 L 8 4 Z M 0 4 L 8 4 Z\"\r\n  });\r\n}\r\n\r\nexport function addMerge(graph: dia.Graph) {\r\n  Path.createPrimaryPath(graph, {\r\n    x: 30,\r\n    y: 30,\r\n    width: 80,\r\n    height: 80,\r\n    refD: \"M 0 0 H 6 L 3 5 Z\"\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param graph\r\n */\r\nexport function addOnPageReference(graph: dia.Graph) {\r\n  Circle.createPrimaryCircle(graph, { x: 30, y: 30 });\r\n}\r\n","/**\r\n * @description jointjs  change \r\n * @author  42020306\r\n * @since 2023/9/24\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\nimport { dia } from \"@mainapp/lib\";\r\nimport * as Data from \"../data\";\r\n\r\n/**\r\n *  Link \r\n *\r\n * @param currView  Link\r\n */\r\nexport function installLinkTools(\r\n  currView: dia.LinkView,\r\n  clickedLastView: Ref<{ model: any; view: dia.LinkView }>\r\n) {\r\n  if (clickedLastView.value.model) {\r\n    clickedLastView.value.model.removeTools(clickedLastView.value.view);\r\n  }\r\n\r\n  // @ts-ignore\r\n  currView.model.addTools(currView);\r\n\r\n  clickedLastView.value = {\r\n    // @ts-ignore\r\n    model: currView.model,\r\n    view: currView\r\n  };\r\n}\r\n\r\n/**\r\n *  Link \r\n *\r\n * @param clickedLastView  Link\r\n */\r\nexport function uninstallLinkTools(clickedLastView: Ref<{ model: any; view: dia.ElementView }>) {\r\n  if (clickedLastView.value.model) {\r\n    clickedLastView.value.model.removeTools(clickedLastView.value.view);\r\n  }\r\n\r\n  clickedLastView.value = {\r\n    model: null,\r\n    view: null\r\n  };\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param currView \r\n * @param clickedLastView \r\n */\r\nexport function installShapeTools(\r\n  currView: dia.ElementView,\r\n  clickedLastView: Ref<{ model: any; view: dia.ElementView }>\r\n) {\r\n  if (clickedLastView.value.model) {\r\n    clickedLastView.value.model.removeTools(clickedLastView.value.view);\r\n  }\r\n\r\n  // @ts-ignore\r\n  currView.model.addTools(currView);\r\n\r\n  clickedLastView.value = {\r\n    // @ts-ignore\r\n    model: currView.model,\r\n    view: currView\r\n  };\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param clickedLastView \r\n */\r\nexport function uninstallShapeTools(clickedLastView: Ref<{ model: any; view: dia.ElementView }>) {\r\n  if (clickedLastView.value.model) {\r\n    clickedLastView.value.model.removeTools(clickedLastView.value.view);\r\n  }\r\n\r\n  clickedLastView.value = {\r\n    model: null,\r\n    view: null\r\n  };\r\n}\r\n\r\n/**\r\n *  paper  Link \r\n */\r\nexport function onBlankClick() {\r\n  //  disabled\r\n  Data.isClickedElement.value = false;\r\n  Data.isClickedLink.value = false;\r\n\r\n  uninstallShapeTools(Data.clickedLastView);\r\n  uninstallLinkTools(Data.clickedLastView);\r\n}\r\n\r\n/**\r\n *  Link \r\n *\r\n * @param view\r\n */\r\nexport function onElemClick(view: dia.ElementView) {\r\n  //  disabled\r\n  Data.isClickedElement.value = true;\r\n  Data.isClickedLink.value = false;\r\n\r\n  // \r\n  Data.clickedCurrView.value = view;\r\n\r\n  // \r\n  installShapeTools(view, Data.clickedLastView);\r\n}\r\n\r\n/**\r\n *  Link \r\n *\r\n * @param view\r\n */\r\nexport function onLinkClick(view: dia.LinkView) {\r\n  //  disabled\r\n  Data.isClickedLink.value = true;\r\n  Data.isClickedElement.value = false;\r\n\r\n  // \r\n  Data.clickedCurrView.value = view;\r\n  //  link \r\n  installLinkTools(view, Data.clickedLastView);\r\n}\r\n\r\n/**\r\n *  paper \r\n *\r\n * @param evt\r\n * @param paper\r\n */\r\nexport function onBlankMousewheel(evt: any, paper: dia.Paper) {\r\n  evt.preventDefault(); // \r\n  const delta = evt.originalEvent.deltaY; // \r\n  const scrollFactor = 30; // \r\n  const scaleFactor = 0.1; // \r\n\r\n  if (evt.ctrlKey) {\r\n    if (delta > 0) {\r\n      // \r\n      Data.currentScale.value -= scaleFactor;\r\n    } else {\r\n      // \r\n      Data.currentScale.value += scaleFactor;\r\n    }\r\n\r\n    // \r\n    paper.scale(Data.currentScale.value, Data.currentScale.value);\r\n  } else if (evt.shiftKey) {\r\n    if (delta > 0) {\r\n      // \r\n      Data.currentOffsetX.value += scrollFactor;\r\n    } else {\r\n      // \r\n      Data.currentOffsetX.value -= scrollFactor;\r\n    }\r\n  } else {\r\n    if (delta > 0) {\r\n      // \r\n      Data.currentOffsetY.value -= scrollFactor;\r\n    } else {\r\n      // \r\n      Data.currentOffsetY.value += scrollFactor;\r\n    }\r\n  }\r\n\r\n  paper.setOrigin(Data.currentOffsetX.value, Data.currentOffsetY.value); // \r\n}\r\n\r\n/**\r\n *  delete \r\n */\r\nexport function onDelCell() {\r\n  document.addEventListener(\"keydown\", event => {\r\n    if (event.key === \"Backspace\" || event.key === \"Delete\") {\r\n      if (Data.clickedCurrView.value?.model) {\r\n        Data.isClickedElement.value = false;\r\n        Data.isClickedLink.value = false;\r\n        Data.clickedCurrView.value.model.remove();\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @param currView\r\n * @param input\r\n */\r\nexport function onDbClickCell(currView: dia.ElementView | dia.LinkView, input: HTMLInputElement) {\r\n  Data.clickedCurrView.value = null;\r\n\r\n  // @ts-ignore\r\n  const { model } = currView;\r\n  if (model?.updateLabelText) {\r\n    model.updateLabelText(currView, input);\r\n  }\r\n}\r\n","<script setup lang=\"ts\">\r\n/**\r\n * @description Flowchat \r\n * @author  42020306\r\n * @since 2023/9/21\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\nimport { dia } from \"@mainapp/lib\";\r\nimport * as Data from \"../data\";\r\nimport { CellService } from \"../service\";\r\n\r\ndefineProps({\r\n  paper: {\r\n    type: dia.Paper\r\n  },\r\n  graph: {\r\n    type: dia.Graph\r\n  },\r\n  isClickedElement: {\r\n    type: Boolean,\r\n    default: false\r\n  },\r\n  isClickedLink: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n});\r\n\r\nconst textColorPickerRef = ref();\r\nconst linkColorPickerRef = ref();\r\nconst shapeBgColorPickerRef = ref();\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"bleuon__flowchat-header-tools border-#dfe2e5 border-b-1 border-b-solid f-c-s px-4 py-4\">\r\n    <div class=\"tools__text\">\r\n      <div class=\"tools__title\"></div>\r\n      <div class=\"tools__items f-c-c\">\r\n        <div class=\"font-tool\">\r\n          <el-tooltip content=\"\" placement=\"bottom\">\r\n            <el-select\r\n              :disabled=\"!isClickedElement && !isClickedLink\"\r\n              style=\"width: 100px\"\r\n              @change=\"value => CellService.changeTextFamily(Data.clickedCurrView.value, value)\"\r\n              v-model=\"Data.fontFamily.value\"\r\n              placeholder=\"\">\r\n              <el-option\r\n                v-for=\"item in Data.fontFamilyOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\" />\r\n            </el-select>\r\n          </el-tooltip>\r\n        </div>\r\n        <div class=\"bold-tool ml-2\">\r\n          <el-tooltip content=\"\" placement=\"bottom\">\r\n            <el-button\r\n              :disabled=\"!isClickedElement && !isClickedLink\"\r\n              text\r\n              bg\r\n              @click=\"CellService.changeTextBold(Data.clickedCurrView.value)\">\r\n              <template #icon>\r\n                <div class=\"i-tabler-bold\"></div>\r\n              </template>\r\n            </el-button>\r\n          </el-tooltip>\r\n        </div>\r\n        <div class=\"italic-tool ml-2\">\r\n          <el-tooltip content=\"\" placement=\"bottom\">\r\n            <el-button\r\n              :disabled=\"!isClickedElement && !isClickedLink\"\r\n              text\r\n              bg\r\n              @click=\"CellService.changeTextItalic(Data.clickedCurrView.value)\">\r\n              <template #icon>\r\n                <div class=\"i-tabler-italic\"></div>\r\n              </template>\r\n            </el-button>\r\n          </el-tooltip>\r\n        </div>\r\n        <div class=\"underline-tool ml-2\">\r\n          <el-tooltip content=\"\" placement=\"bottom\">\r\n            <el-button\r\n              :disabled=\"!isClickedElement && !isClickedLink\"\r\n              text\r\n              bg\r\n              @click=\"CellService.changeTextUnderline(Data.clickedCurrView.value)\">\r\n              <template #icon>\r\n                <div class=\"i-tabler-underline\"></div>\r\n              </template>\r\n            </el-button>\r\n          </el-tooltip>\r\n        </div>\r\n        <div class=\"font-color-tool ml-2\">\r\n          <el-tooltip content=\"\" placement=\"bottom\">\r\n            <el-button\r\n              :disabled=\"!isClickedElement && !isClickedLink\"\r\n              text\r\n              bg\r\n              @click=\"CellService.openColorPicker(textColorPickerRef)\">\r\n              <template #icon>\r\n                <div class=\"i-tabler-text-color\"></div>\r\n              </template>\r\n            </el-button>\r\n          </el-tooltip>\r\n          <div class=\"hidden\">\r\n            <el-color-picker\r\n              ref=\"textColorPickerRef\"\r\n              @change=\"value => CellService.changeTextColor(Data.clickedCurrView.value, value)\"\r\n              v-model=\"Data.textColor.value\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"font-size-tool ml-2\">\r\n          <el-tooltip content=\"(px)\" placement=\"bottom\">\r\n            <el-input-number\r\n              :disabled=\"!isClickedElement && !isClickedLink\"\r\n              style=\"width: 85px\"\r\n              v-model=\"Data.textSize.value\"\r\n              :min=\"14\"\r\n              :max=\"30\"\r\n              controls-position=\"right\"\r\n              @change=\"value => CellService.changeTextSize(Data.clickedCurrView.value, value)\" />\r\n          </el-tooltip>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"mx-4 left-divider\"></div>\r\n    <div class=\"tools__cellview\">\r\n      <div class=\"tools__title\"></div>\r\n      <div class=\"tools__items f-c-c\">\r\n        <div class=\"border-bold-tool\">\r\n          <el-tooltip content=\"\" placement=\"bottom\">\r\n            <el-select\r\n              :disabled=\"!isClickedElement && !isClickedLink\"\r\n              style=\"width: 85px\"\r\n              @change=\"value => CellService.changeStrokeWidth(Data.clickedCurrView.value, value)\"\r\n              v-model=\"Data.shapeStrokeWidth.value\"\r\n              placeholder=\"\">\r\n              <el-option\r\n                v-for=\"item in Data.shapeStrokeWidthOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\" />\r\n            </el-select>\r\n          </el-tooltip>\r\n        </div>\r\n        <div class=\"border-style-tool ml-2\">\r\n          <el-tooltip content=\"\" placement=\"bottom\">\r\n            <el-select\r\n              :disabled=\"!isClickedElement && !isClickedLink\"\r\n              style=\"width: 130px\"\r\n              @change=\"value => CellService.changeBorderStyle(Data.clickedCurrView.value, value)\"\r\n              v-model=\"Data.shapeBorderStyle.value\"\r\n              placeholder=\"\">\r\n              <el-option label=\"\" value=\"solid\">\r\n                <img\r\n                  class=\"object-cover w-100% h-100%\"\r\n                  src=\"https://www.processon.com/v5_editor/compile/zhixian.ee583027.png\" />\r\n              </el-option>\r\n              <el-option label=\"\" value=\"dashed\">\r\n                <img\r\n                  class=\"object-cover w-100% h-100%\"\r\n                  src=\"https://www.processon.com/v5_editor/compile/xuxian.a1d63600.png\" />\r\n              </el-option>\r\n              <el-option label=\"\" value=\"dotted\">\r\n                <img\r\n                  class=\"object-cover w-100% h-100%\"\r\n                  src=\"https://www.processon.com/v5_editor/compile/dianxian.5180ceef.png\" />\r\n              </el-option>\r\n              <el-option label=\"\" value=\"dashed-dotted\">\r\n                <img\r\n                  class=\"object-cover w-100% h-100%\"\r\n                  src=\"https://www.processon.com/v5_editor/compile/dianhuaxian.ab5e6f5b.png\" />\r\n              </el-option>\r\n            </el-select>\r\n          </el-tooltip>\r\n        </div>\r\n        <div class=\"shape-bg-tool ml-2\">\r\n          <el-tooltip content=\"\" placement=\"bottom\">\r\n            <el-button\r\n              :disabled=\"!isClickedElement\"\r\n              text\r\n              bg\r\n              @click=\"CellService.openColorPicker(shapeBgColorPickerRef)\">\r\n              <template #icon>\r\n                <div class=\"i-tabler-paint\"></div>\r\n              </template>\r\n            </el-button>\r\n          </el-tooltip>\r\n          <div class=\"hidden\">\r\n            <el-color-picker\r\n              ref=\"shapeBgColorPickerRef\"\r\n              @change=\"value => CellService.changeBackground(Data.clickedCurrView.value, value)\"\r\n              v-model=\"Data.shapeBackground.value\" />\r\n          </div>\r\n        </div>\r\n        <div class=\"link-color-tool ml-2\">\r\n          <el-tooltip content=\"\" placement=\"bottom\">\r\n            <el-button\r\n              :disabled=\"!isClickedElement && !isClickedLink\"\r\n              text\r\n              bg\r\n              @click=\"CellService.openColorPicker(linkColorPickerRef)\">\r\n              <template #icon>\r\n                <div class=\"i-tabler-pencil-minus\"></div>\r\n              </template>\r\n            </el-button>\r\n          </el-tooltip>\r\n          <div class=\"hidden\">\r\n            <el-color-picker\r\n              ref=\"linkColorPickerRef\"\r\n              @change=\"value => CellService.changeLinkColor(Data.clickedCurrView.value, value)\"\r\n              v-model=\"Data.textColor.value\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"mx-4 left-divider\"></div>\r\n    <div class=\"tools__config\">\r\n      <div class=\"tools__title\"></div>\r\n      <div class=\"tools__items f-c-c\">\r\n        <div class=\"router-config-tool\">\r\n          <el-tooltip content=\"\" placement=\"bottom\">\r\n            <el-select\r\n              style=\"width: 90px\"\r\n              @change=\"CellService.changeRouterConfig(Data.linkRouterConfig, paper)\"\r\n              v-model=\"Data.linkRouterConfig.value.name\"\r\n              placeholder=\"\">\r\n              <el-option\r\n                v-for=\"item in Data.linkRouterOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\" />\r\n            </el-select>\r\n          </el-tooltip>\r\n        </div>\r\n        <div class=\"link-config-tool ml-2\">\r\n          <el-tooltip content=\"\" placement=\"bottom\">\r\n            <el-select\r\n              style=\"width: 90px\"\r\n              @change=\"CellService.changeConnectorConfig(Data.linkConnectorConfig, paper)\"\r\n              v-model=\"Data.linkConnectorConfig.value.name\"\r\n              placeholder=\"\">\r\n              <el-option\r\n                v-for=\"item in Data.linkConnectorOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\" />\r\n            </el-select>\r\n          </el-tooltip>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n.left-divider {\r\n  height: 30px;\r\n  width: 0;\r\n  border-left: 1px solid #dfe2e5;\r\n}\r\n\r\n.tools__title {\r\n  --uno: text-gray-700 mb-2;\r\n}\r\n</style>\r\n","<script setup lang=\"ts\">\r\n/**\r\n * @description Flowchat \r\n * @author  42020306\r\n * @since 2023/9/24\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\nimport { dia } from \"@mainapp/lib\";\r\nimport * as Data from \"../data\";\r\n\r\nconst props = defineProps({\r\n  paper: {\r\n    type: dia.Paper\r\n  },\r\n  graph: {\r\n    type: dia.Graph\r\n  }\r\n});\r\n\r\n/**\r\n *  slider  paper  scale\r\n */\r\nfunction onSliderChange() {\r\n  props.paper.scale(Data.currentScale.value, Data.currentScale.value);\r\n}\r\n\r\n/**\r\n *  slider  paper sacle \r\n */\r\nfunction resetSlider() {\r\n  Data.currentScale.value = 1;\r\n  props.paper.scale(Data.currentScale.value, Data.currentScale.value);\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"bleuon__flowchat-footer-tools border-#dfe2e5 border-t-1 border-t-solid bg-#f6f7f8 f-c-e px-4\">\r\n    <div class=\"scale-tool f-c-c\">\r\n      <div class=\"w-50 mr-4\">\r\n        <el-slider\r\n          @change=\"onSliderChange\"\r\n          v-model=\"Data.calcCurrentScale.value\"\r\n          size=\"small\"\r\n          :min=\"80\"\r\n          :max=\"200\" />\r\n      </div>\r\n      <el-tooltip content=\"\" placement=\"top\">\r\n        <div class=\"cursor-pointer\" @click=\"resetSlider\">{{ Data.calcCurrentScale.value }}%</div>\r\n      </el-tooltip>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\"></style>\r\n","export default \"__VITE_PUBLIC_ASSET__14c41810__\"","export default \"__VITE_PUBLIC_ASSET__f3bef748__\"","export default \"__VITE_PUBLIC_ASSET__fce9206c__\"","export default \"__VITE_PUBLIC_ASSET__14f2fd03__\"","export default \"__VITE_PUBLIC_ASSET__6abda8a8__\"","export default \"__VITE_PUBLIC_ASSET__9a1d2390__\"","export default \"__VITE_PUBLIC_ASSET__21323277__\"","export default \"__VITE_PUBLIC_ASSET__9ff4a96b__\"","export default \"__VITE_PUBLIC_ASSET__3eaa2e71__\"","export default \"__VITE_PUBLIC_ASSET__01e5630d__\"","export default \"__VITE_PUBLIC_ASSET__875cfe7c__\"","export default \"__VITE_PUBLIC_ASSET__cbb74d70__\"","export default \"__VITE_PUBLIC_ASSET__4a022222__\"","export default \"__VITE_PUBLIC_ASSET__f801e0ca__\"","export default \"__VITE_PUBLIC_ASSET__e325cb60__\"","export default \"__VITE_PUBLIC_ASSET__9cca58e5__\"","export default \"__VITE_PUBLIC_ASSET__8c19b20a__\"","export default \"__VITE_PUBLIC_ASSET__04fe136c__\"","export default \"__VITE_PUBLIC_ASSET__fc0dde09__\"","export default \"__VITE_PUBLIC_ASSET__46ebeab3__\"","export default \"__VITE_PUBLIC_ASSET__1885174a__\"","export default \"__VITE_PUBLIC_ASSET__e3d5956d__\"","export default \"__VITE_PUBLIC_ASSET__cc5b20d4__\"","export default \"__VITE_PUBLIC_ASSET__7f327522__\"","export default \"__VITE_PUBLIC_ASSET__740aad88__\"","<script setup lang=\"ts\">\r\n/**\r\n * @description Flowchart \r\n * @author  42020306\r\n * @since 2023/9/9\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\n\r\nimport { dia, initJointJs } from \"@mainapp/lib\";\r\nimport \"jointjs/css/layout.css\";\r\nimport \"jointjs/css/themes/default.css\";\r\nimport * as Data from \"./data\";\r\nimport { ListenerService } from \"./service\";\r\nimport FlowchartHeaderTools from \"./components/FlowchartHeaderTools.vue\";\r\nimport FlowchartFooterTools from \"./components/FlowchartFooterTools.vue\";\r\nimport FlowchartSidebar from \"./components/FlowchartSidebar.vue\";\r\n\r\nconst paper = shallowRef<dia.Paper>(null);\r\nconst graph = shallowRef<dia.Graph>(null);\r\n\r\nconst textInputRef = ref<HTMLInputElement>();\r\n\r\nonMounted(() => {\r\n  const jointjs = initJointJs({\r\n    el: \"bleuon__flowchat-content\",\r\n    width: \"85vw\",\r\n    height: \"75vh\",\r\n    bgColor: \"#ffffff\"\r\n  });\r\n\r\n  paper.value = jointjs.paper;\r\n  graph.value = jointjs.graph;\r\n\r\n  paper.value.options.defaultConnector = Data.linkConnectorConfig.value;\r\n  paper.value.options.defaultRouter = Data.linkRouterConfig.value;\r\n\r\n  paper.value.on({\r\n    \"element:pointerclick\": view => {\r\n      ListenerService.onElemClick(view);\r\n    },\r\n    \"element:pointerdblclick\": view => {\r\n      ListenerService.onDbClickCell(view, textInputRef.value);\r\n    },\r\n    \"link:pointerclick\": view => {\r\n      ListenerService.onLinkClick(view);\r\n    },\r\n    \"link:pointerdblclick\": view => {\r\n      ListenerService.onDbClickCell(view, textInputRef.value);\r\n    },\r\n    \"blank:pointerclick\": evt => {\r\n      ListenerService.onBlankClick();\r\n    },\r\n    \"blank:mousewheel\": evt => {\r\n      ListenerService.onBlankMousewheel(evt, paper.value);\r\n    }\r\n  });\r\n\r\n  ListenerService.onDelCell();\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div class=\"bleuon__flowchat-container\">\r\n    <div class=\"bleuon__flowchat-header border-#dfe2e5 border-b-1 border-b-solid bg-#f6f7f8 h-20vh\">\r\n      <div></div>\r\n      <FlowchartHeaderTools\r\n        :paper=\"paper\"\r\n        :graph=\"graph\"\r\n        :is-clicked-element=\"Data.isClickedElement.value\"\r\n        :is-clicked-link=\"Data.isClickedLink.value\" />\r\n    </div>\r\n    <div class=\"bleuon__flowchat-wrapper f-c-b\">\r\n      <FlowchartSidebar class=\"w-15vw h-80vh\" :paper=\"paper\" :graph=\"graph\" />\r\n      <div class=\"bleuon__flowchat-body relative\">\r\n        <div id=\"bleuon__flowchat-content\"></div>\r\n        <FlowchartFooterTools class=\"w-100% h-5vh\" :paper=\"paper\" :graph=\"graph\" />\r\n        <div class=\"bleuon__flowchat-extra\">\r\n          <input ref=\"textInputRef\" type=\"text\" class=\"bleuon__flowchat-input absolute hidden\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.joint-element {\r\n  .joint-port {\r\n    circle {\r\n      fill: transparent;\r\n      stroke: transparent;\r\n      stroke-width: 0;\r\n      stroke-dasharray: none;\r\n      --uno: transition-all-300;\r\n    }\r\n  }\r\n\r\n  &:hover {\r\n    .joint-port {\r\n      circle {\r\n        fill: white !important;\r\n        stroke: black;\r\n        stroke-width: 1px;\r\n        stroke-dasharray: none;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.active [joint-selector=\"line\"] {\r\n  stroke: #4666e5;\r\n}\r\n</style>\r\n"],"names":["getClientXY","event","clientX","clientY","REPEAT_INTERVAL","REPEAT_DELAY","vRepeatClick","el","binding","value","interval","delay","isFunction","intervalId","delayId","handler","clear","evt","alphaSliderProps","buildProps","definePropType","isDragging","draggable","element","options","isClient","moveFn","_a","upFn","downFn","useAlphaSlider","props","instance","getCurrentInstance","thumb","shallowRef","bar","handleClick","handleDrag","rect","top","left","useAlphaSliderDOM","ns","useNamespace","thumbLeft","ref","thumbTop","background","getThumbLeft","alpha","getThumbTop","getBackground","r","g","b","update","onMounted","dragConfig","watch","rootKls","computed","barKls","thumbKls","barStyle","thumbStyle","addUnit","COMPONENT_NAME","__default__","defineComponent","_sfc_main","__props","expose","_ctx","_cache","openBlock","createElementBlock","normalizeClass","unref","createElementVNode","normalizeStyle","args","AlphaSlider","_export_sfc","hueValue","hue","_sfc_render","$props","$setup","$data","$options","HueSlider","colorPickerProps","useSizeProp","colorPickerEmits","UPDATE_MODEL_EVENT","val","isString","isNil","CHANGE_EVENT","colorPickerContextKey","hsv2hsl","sat","isOnePointZero","n","isPercentage","bound01","max","processPercent","INT_HEX_MAP","hexOne","high","low","toHex","HEX_INT_MAP","parseHexChannel","hex","hsl2hsv","light","smin","lmin","v","sv","rgb2hsv","min","h","d","s","hsv2rgb","i","f","p","q","t","mod","Color","option","hasOwn","prop","fromHSV","parts","index","color","_hue","_saturation","_value","_alpha","format","hsl","currentColor","inject","rgbaColors","parseColors","item","watchEffect","handleSelect","colors","c","_hoisted_1","Fragment","renderList","$event","Predefine","cursorTop","cursorLeft","colorValue","saturation","width","height","_hoisted_2","SvPanel","emit","useLocale","formItem","useFormItem","colorSize","useFormSize","colorDisabled","useFormDisabled","buttonId","isLabeledByFormItem","useFormItemInputId","popper","shouldActiveChange","reactive","showPicker","showPanelColor","customInput","displayedColor","displayedRgb","buttonAriaLabel","buttonAriaLabelledby","btnKls","color2","showAlpha","setShowPicker","debounceSetShowPicker","debounce","show","hide","resetColor","nextTick","handleTrigger","handleConfirm","confirmValue","err","debugWarn","newColor","newVal","_b","_c","provide","createBlock","ElTooltip","withCtx","withDirectives","createVNode","createCommentVNode","ElInput","withKeys","ElButton","createTextVNode","toDisplayString","ClickOutside","ElIcon","ArrowDown","vShow","Close","ColorPicker","ElColorPicker","withInstall","inputNumberProps","isNumber","inputNumberEmits","cur","prev","e","INPUT_EVENT","input","data","minDisabled","maxDisabled","numPrecision","stepPrecision","getPrecision","isUndefined","controlsAtRight","inputNumberSize","inputNumberDisabled","displayValue","currentValue","toPrecision","num","pre","snum","pointPos","length","valueString","dotPosition","precision","ensurePrecision","coefficient","increase","setCurrentValue","decrease","verifyValue","step","stepStrictly","valueOnClear","throwError","emitChange","oldVal","handleInput","handleInputChange","focus","blur","handleFocus","handleBlur","userInput","newValue","modelValue","innerInput","onUpdated","withModifiers","Minus","ArrowUp","Plus","InputNumber","ElInputNumber","sliderContextKey","sliderProps","placements","isValidValue","isArray","sliderEmits","useLifecycle","initData","resetSize","sliderWrapper","useEventListener","useMarks","a","point","useSlide","elForm","elFormItem","slider","firstButton","secondButton","buttonRefs","sliderDisabled","minValue","maxValue","barSize","barStart","runwayStyle","getButtonRefByPercent","percent","targetValue","buttonRefName","setPosition","buttonRef","setFirstValue","firstValue","_emit","setSecondValue","secondValue","handleSliderPointerEvent","_d","_e","_f","newPercent","sliderOffsetLeft","down","right","up","home","end","pageUp","pageDown","EVENT_CODE","useTooltip","formatTooltip","showTooltip","tooltip","tooltipVisible","enableFormat","formatValue","displayTooltip","hideTooltip","useSliderButton","disabled","sliderSize","updateDragging","button","currentPosition","wrapperStyle","handleMouseEnter","handleMouseLeave","onButtonDown","onDragStart","onDragging","onDragEnd","incrementPosition","amount","onLeftKeyDown","onRightKeyDown","onPageDownKeyDown","onPageUpKeyDown","onHomeKeyDown","onEndKeyDown","onKeyDown","isPreventDefault","diff","newPosition","lengthPerStep","useStops","stopCount","stepWidth","result","_","position","useWatch","valueChanged","setValues","sliderButtonProps","sliderButtonEmits","hovering","dragging","toRefs","SliderButton","sliderMarkerProps","SliderMarker","label","style","onSliderWrapperPrevent","onSliderClick","onSliderDown","stops","getStopStyle","inputId","sliderWrapperSize","sliderInputSize","groupLabel","firstButtonLabel","firstValueText","secondButtonLabel","secondValueText","sliderKls","markList","precisions","decimal","key","Slider","ElSlider","propsList","numberPattern","findSpacesRegex","parseExpressionRegExp","throwInvalid","expression","evalCalcExpression","bbox","match","multiply","property","divide","add","x","y","evalAddExpression","addExpression","sign","isCalcAttribute","calcStart","calcStartOffset","evalCalcAttribute","attributeValue","refBBox","startSearchIndex","calcIndex","calcEndIndex","brackets","findClosingBracket","calcValue","round","floor","PI","scale","domain","range","domainSpan","rangeSpan","normalizeAngle","angle","snapToGrid","gridSize","toDeg","rad","toRad","deg","over360","random","temp","cos","sin","atan2","bearing","lat1","lat2","lon1","lon2","dLon","brng","bearings","squaredLength","start","x0","y0","x1","y1","types","abs","sqrt","pow","Point","xy","distance","origin","x2","y2","points","closest","minSqrDistance","sqrDistance","p1","p2","angleBetween","dx","dy","theta","offset","cosAngle","sinAngle","sx","sy","gx","gy","o","zero","Line","horizontalPoint","bottom","Rect","product","cpNormalizedLength","ratio","dividerPoint","l","shape","opt","intersection","line","pt1Dir","pt2Dir","det","deltaPt","beta","eRef","sRef","fromStart","lineLength","determinant","currentLength","scaleFactor","tangentStart","tangentLine","tx","ty","Ellipse","ellipse","intersections","a1","a2","rx","ry","dir","mDir","mDiff","root","ta","tb","m","mSquared","aSquared","bSquared","refPointDelta","center","q1","q3","w","minX","minY","maxX","maxY","rects","mX","mY","st","ct","r0","r1","w0","h0","w1","h1","mr","nr","myOrigin","myCorner","rOrigin","rCorner","rectLines","dedupeArr","pt","sides","connector","sx1","sx2","sx3","sx4","sy1","sy2","sy3","sy4","ox","oy","p3","p4","newx","newy","newwidth","newheight","side","distToLeft","distToRight","distToTop","distToBottom","corner","parsePoints","svgString","trimmedString","coords","numCoords","clonePoints","numPoints","newPoints","convexHull","startPoint","sortedPointRecords","entry","record1","record2","sortOutput","startPointRecord","insidePoints","hullPointRecords","currentPointRecord","currentPoint","lastHullPointRecord","lastHullPoint","secondLastHullPointRecord","secondLastHullPoint","correctTurnFound","crossProduct","THRESHOLD","lowestHullIndex","indexOfLowestHullIndexRecord","currentHullIndex","hullPointRecordsReordered","newFirstChunk","newSecondChunk","hullPoints","Polyline","cpLength","cp","startIndex","endIndex","numIntersections","segment","ray","rayEnd","xDifference","otherPoints","otherPoint","l2","int","polylineLength","lastPoint","threshold","currentIndex","firstIndex","middleIndex","lastIndex","firstPoint","middlePoint","lastValidLine","output","Curve","getCurveControlPoints","knots","firstControlPoints","secondControlPoints","rhs","getFirstControlPoints","tmp","controlPoints","curves","controlPoint1","controlPoint2","x3","y3","tvalues","bounds","t1","t2","b2ac","sqrtb2ac","j","jlen","mt","subdivisions","localOpt","investigatedSubdivision","investigatedSubdivisionStartT","investigatedSubdivisionEndT","distFromStart","distFromEnd","chordLength","minSumDist","subdivisionSize","currentSubdivision","startDist","endDist","sumDist","precisionRatio","startPrecisionRatio","endPrecisionRatio","hasRequiredPrecision","hasMinimalStartDistance","hasMinimalEndDistance","hasMinimalDistance","divided","startDist1","endDist1","sumDist1","startDist2","endDist2","sumDist2","polyline","dividerPoints","startControl1","startControl2","divider","dividerControl1","dividerControl2","control1","control2","midpoint1","midpoint2","midpoint3","subControl1","subControl2","isPoint","previousLength","minIterations","isLine","iteration","newSubdivisions","numSubdivisions","numNewSubdivisions","currentNewSubdivision","observedPrecisionRatio","subCurve","subCurveLength","skeletonPoints","curveLength","baselinePointDistFromStart","baselinePointDistFromEnd","newBaselinePointDistFromStart","newBaselinePointDistFromEnd","baseline1Length","baseline2Length","extend","obj","child","src","inheritedProperty","Path","arg","acc","previousObj","pathData","path","commandRe","commands","numCommands","command","argRe","type","segmentConstructor","applyToNew","segments","numSegments","currentSegment","previousSegment","nextSegment","currentArg","segmentBBox","lastSegment","segmentSubdivisions","closestPointT","minSquaredDistance","segmentClosestPointT","segmentClosestPoint","squaredDistance","closestPointTangent","polylines","numPolylines","pathLength","dividedSegmentIndex","lastValidSegment","lastValidSegmentIndex","pathCopy","divisionStartIndex","divisionMidIndex","divisionEndIndex","movetoEnd","secondPathSegmentIndexConversion","originalSegment","convertedSegment","firstPath","secondPath","otherSegments","otherSegment","subpaths","polylineIntersection","isValid","segmentIndex","tValue","lastVisibleSegment","updateSubpathStart","removedSegment","replacedSegment","lastVisibleSegmentIndex","partialPoints","currentSegmentSubdivisions","subdivisionPoints","curve","constructor","argsArray","segmentPrototype","Lineto","outputArray","segmentCoords","segmentPoint","linetoPrototype","Curveto","segmentPoints","curvetoPrototype","c1","c2","Moveto","movetoPrototype","Closepath","closepathPrototype","segmentTypes","bezier","p0","Polygon","exists","shape1","shape2","shape1opt","shape2opt","lineWithLine","ellipseWithLine","ellipseWithEllipse","rectWithLine","rectWithEllipse","rectWithRect","polylineWithLine","polylineWithEllipse","polylineWithRect","polylineWithPolyline","polygonWithLine","polygonWithEllipse","polygonWithRect","polygonWithPolyline","polygonWithPolygon","pathWithLine","pathWithEllipse","pathWithRect","pathWithPolyline","pathWithPolygon","pathWithPath","line1","line2","x4","y4","s1x","s1y","s2x","s2y","s3x","s3y","rex","rey","xe","ye","rex_2","rey_2","A","B","C","D","ellipse1","ellipse2","_ellipsesIntersection","rect1","rect2","_polylineWithLine","_polylineWithEllipse","_polylineWithRect","polyline1","polyline2","_polylineWithPolyline","polygon","polygon1","polygon2","_polylineWithPolygon","pathOpt","subpath","_pathWithPolyline","path1","path2","pathOpt1","pathOpt2","interior","thisPoints","thisPolyline","e1","e2","w2","sinW1","cosW1","sinW2","cosW2","sinW1s","cosW1s","sinCos1","sinW2s","cosW2s","sinCos2","a1s","b1s","a2s","b2s","A1","A2","B1","B2","C1","C2","D1","D2","E1","E2","F1","F2","l3","det3","l0","l1","delta1","det2","delta2","delta3","_intersection","VERSION","ArrayProto","ObjProto","SymbolProto","push","slice","toString","hasOwnProperty","supportsArrayBuffer","supportsDataView","nativeIsArray","nativeKeys","nativeCreate","nativeIsView","_isNaN","_isFinite","hasEnumBug","nonEnumerableProps","MAX_ARRAY_INDEX","restArguments","func","rest","isObject","isNull","isBoolean","isElement","tagTester","name","tag","isString$1","isNumber$1","isDate","isRegExp","isError","isSymbol$1","isArrayBuffer","nodelist","isFunction$2","hasObjectTag","hasStringTagBug","isIE11","isDataView","ie10IsDataView","isDataView$1","has","isArguments","isArguments$2","isFinite","isSymbol","isNaN","constant","createSizePropertyCheck","getSizeProperty","collection","sizeProperty","shallowProperty","getByteLength","isBufferLike","typedArrayPattern","isTypedArray","isTypedArray$2","getLength","emulatedSet","keys","hash","collectNonEnumProps","nonEnumIdx","proto","isEmpty","isMatch","object","attrs","_keys","toBufferView","bufferSource","tagDataView","eq","aStack","bStack","deepEq","className","areArrays","byteLength","aCtor","bCtor","isEqual","allKeys","ie11fingerprint","methods","weakMapMethods","forEachName","hasName","commonInit","mapTail","mapMethods","setMethods","isMap$1","isWeakMap","isSet$1","isWeakSet","values","pairs","invert","functions","names","createAssigner","keysFunc","defaults","source","defaults$1","ctor","baseCreate","prototype","Ctor","create","extendOwn","clone","tap","interceptor","toPath","deepGet","get","defaultValue","_has","identity","matcher","optimizeCb","context","argCount","accumulator","baseIteratee","iteratee","cb","mapObject","results","currentKey","noop","propertyOf","times","accum","now","createEscaper","map","escaper","testRegexp","replaceRegexp","string","escapeMap","escape","unescapeMap","unescape$1","noMatch","escapes","escapeRegExp","escapeChar","bareIdentifier","template","text","settings","oldSettings","interpolate","evaluate","argument","render","fallback","idCounter","uniqueId","prefix","id","chain","executeBound","sourceFunc","boundFunc","callingContext","self","partial","boundArgs","placeholder","bound","bind","callArgs","isArrayLike$1","flatten","depth","strict","idx","isArrayLike","len","bindAll","memoize","hasher","cache","address","wait","defer","throttle","timeout","previous","later","throttled","_now","remaining","immediate","passed","debounced","_args","wrap","wrapper","negate","predicate","compose","after","before","memo","once","findKey","createPredicateIndexFinder","array","findIndex","findLastIndex","sortedIndex","mid","createIndexFinder","predicateFind","indexOf","lastIndexOf","find","keyFinder","findWhere","each","createReduce","reducer","initial","reduce$1","reduceRight","filter","list","reject","every","some","contains","fromIndex","guard","invoke$1","contextPath","method","pluck","where","lastComputed","reStrSymbol","toArray","sample","last","rand","shuffle","sortBy","group","behavior","partition","groupBy$1","indexBy","countBy","pass","size","keyInObj","pick$1","omit$1","pick","first","compact","_flatten","difference$1","without$1","otherArrays","difference","uniq","isSorted","seen","union$1","arrays","argsLength","unzip","zip","stop","chunk","count","chainResult","mixin","allExports","global","factory","module","this","window","noGlobal","arr","getProto","flat","class2type","fnToString","ObjectFunctionString","support","isWindow","document","preservedScriptAttributes","DOMEval","code","node","doc","script","toType","version","jQuery","selector","elems","ret","callback","elem","_elem","copy","copyIsArray","target","deep","msg","second","callbackInverse","matches","callbackExpect","_i","Sizzle","Expr","getText","isXML","tokenize","compile","select","outermostContext","sortInput","hasDuplicate","setDocument","docElem","documentIsHTML","rbuggyQSA","rbuggyMatches","expando","preferredDoc","dirruns","done","classCache","createCache","tokenCache","compilerCache","nonnativeSelectorCache","sortOrder","pop","pushNative","booleans","whitespace","identifier","attributes","pseudos","rwhitespace","rtrim","rcomma","rleadingCombinator","rdescend","rpseudo","ridentifier","matchExpr","rhtml","rinputs","rheader","rnative","rquickExpr","rsibling","runescape","funescape","nonHex","rcssescape","fcssescape","ch","asCodePoint","unloadHandler","inDisabledFieldset","addCombinator","els","seed","nid","groups","newSelector","newContext","nodeType","testContext","toSelector","markFunction","fn","assert","addHandle","siblingCheck","createInputPseudo","createButtonPseudo","createDisabledPseudo","createPositionalPseudo","matchIndexes","namespace","hasCompare","subWindow","attrId","adown","bup","compare","aup","ap","bp","expr","elements","sel","duplicates","excess","unquoted","nodeNameSelector","nodeName","pattern","operator","check","what","_argument","simple","forward","ofType","_context","xml","uniqueCache","outerCache","nodeIndex","parent","useCache","pseudo","matched","unmatched","lang","elemLang","attr","_matchIndexes","setFilters","parseOnly","tokens","soFar","preFilters","cached","combinator","base","skip","checkNonElements","doneName","oldCache","newCache","elementMatcher","matchers","multipleContexts","contexts","condense","newUnmatched","mapped","setMatcher","preFilter","postFilter","postFinder","postSelector","preMap","postMap","preexisting","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","matcherFromGroupMatchers","elementMatchers","setMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","token","compiled","_name","until","truncate","siblings","rneedsContext","rsingleTag","winnow","qualifier","not","rootjQuery","init","rparentsprev","guaranteedUnique","targets","selectors","sibling","rnothtmlwhite","createOptions","flag","firing","memory","fired","locked","queue","firingIndex","fire","Identity","Thrower","ex","adoptValue","resolve","noValue","tuples","state","promise","deferred","fns","newDefer","tuple","returned","onFulfilled","onRejected","onProgress","maxDepth","special","that","mightThrow","then","process","stateString","singleValue","resolveContexts","resolveValues","primary","updateFunc","rerrorNames","error","stack","readyList","completed","access","chainable","emptyGet","raw","bulk","_key","rmsPrefix","rdashAlpha","fcamelCase","_all","letter","camelCase","acceptData","owner","Data","dataPriv","dataUser","rbrace","rmultiDash","getData","dataAttr","startLength","hooks","next","setter","pnum","rcssNum","cssExpand","documentElement","isAttached","composed","isHiddenWithinTree","adjustCSS","valueParts","tween","adjusted","maxIterations","unit","initialInUnit","defaultDisplayMap","getDefaultDisplay","display","showHide","rcheckableType","rtagName","rscriptType","fragment","div","wrapMap","getAll","setGlobalEval","refElements","buildFragment","scripts","selection","ignored","attached","nodes","rtypenamespace","returnTrue","returnFalse","expectSync","safeActiveElement","on","one","origFn","handleObjIn","eventHandle","events","handleObj","handlers","namespaces","origType","elemData","mappedTypes","origCount","nativeEvent","handlerQueue","matchedHandlers","matchedSelectors","delegateCount","hook","originalEvent","leverageNative","notAsync","saved","handle","delegateType","orig","fix","related","rnoInnerhtml","rchecked","rcleanScript","manipulationTarget","content","disableScript","restoreScript","cloneCopyEvent","dest","pdataOld","udataOld","udataCur","fixInput","domManip","hasScripts","iNoClone","valueIsFunction","remove","keepData","html","dataAndEvents","deepDataAndEvents","srcElements","destElements","inPage","original","insert","rnumnonpx","rcustomProp","getStyles","view","swap","old","rboxStyle","rtrimCSS","computeStyleTests","container","divStyle","pixelPositionVal","reliableMarginLeftVal","roundPixelMeasures","pixelBoxStylesVal","boxSizingReliableVal","scrollboxSizeVal","measure","reliableTrDimensionsVal","table","tr","trChild","trStyle","curCSS","minWidth","maxWidth","isCustomProp","addGetHookIf","conditionFn","hookFn","cssPrefixes","emptyStyle","vendorProps","vendorPropName","capName","finalPropName","final","rdisplayswap","cssShow","cssNormalTransform","setPositiveNumber","subtract","boxModelAdjustment","dimension","box","isBorderBox","styles","computedVal","extra","delta","getWidthOrHeight","boxSizingNeeded","valueIsBorderBox","offsetProp","origName","scrollboxSizeBuggy","suffix","expanded","Tween","easing","eased","fxNow","inProgress","rfxtypes","rrun","schedule","createFxNow","genFx","includeWidth","which","createTween","animation","Animation","defaultPrefilter","opts","toggle","oldfire","propTween","restoreDisplay","isBox","anim","hidden","dataShow","propFilter","specialEasing","properties","stopped","tick","currentTime","gotoEnd","prepend","speed","to","empty","optall","doAnimation","clearQueue","stopQueue","dequeue","timers","cssFn","timer","time","boolHook","attrHandle","nType","attrNames","getter","lowercaseName","rfocusable","rclickable","tabindex","stripAndCollapse","getClass","classesToArray","classNames","curValue","finalValue","stateVal","rreturn","optionSet","rfocusMorph","stopPropagationCallback","onlyHandlers","bubbleType","ontype","lastElement","eventPath","attaches","location","nonce","rquery","parserErrorElem","rbracket","rCRLF","rsubmitterTypes","rsubmittable","buildParams","traditional","valueOrFunction","r20","rhash","rantiCache","rheaders","rlocalProtocol","rnoContent","rprotocol","prefilters","transports","allTypes","originAnchor","addToPrefiltersOrTransports","structure","dataTypeExpression","dataType","dataTypes","inspectPrefiltersOrTransports","originalOptions","jqXHR","inspected","seekingTransport","inspect","selected","prefilterOrFactory","dataTypeOrTransport","ajaxExtend","flatOptions","ajaxHandleResponses","responses","finalDataType","firstDataType","contents","ajaxConvert","response","isSuccess","conv2","current","conv","converters","url","transport","cacheURL","responseHeadersString","responseHeaders","timeoutTimer","urlAnchor","fireGlobals","uncached","callbackContext","globalEventContext","completeDeferred","statusCode","requestHeaders","requestHeadersNames","strAbort","statusText","finalText","status","nativeStatusText","headers","success","modified","htmlIsFunction","xhrSuccessStatus","xhrSupported","errorCallback","complete","xhr","oldCallbacks","rjsonp","originalSettings","callbackName","overwritten","responseContainer","jsonProp","body","keepScripts","parsed","params","off","responseText","curPosition","curLeft","curCSSTop","curTop","curOffset","curCSSLeft","calculatePosition","curElem","win","offsetParent","parentOffset","defaultExtra","funcName","margin","fnOver","fnOut","proxy","hold","_jQuery","_$","require$$0","$","require$$1","exports","Backbone","previousBackbone","Events","eventSplitter","_listening","eventsApi","onApi","listeners","listeningTo","listening","Listening","tryCatchOn","ctx","offApi","ids","onceMap","offer","triggerApi","objEvents","allEvents","triggerEvents","ev","a3","listener","cleanup","Model","unset","silent","changes","changing","changed","prevId","hasChanged","model","resp","serverAttrs","wrapError","destroy","urlError","Collection","models","setOptions","addOptions","splice","at","tail","singular","removed","set","toAdd","toMerge","toRemove","modelMap","merge","sort","sortable","sortAttr","existing","orderChanged","replace","comparator","callbackOpts","idAttribute","CollectionIterator","ITERATOR_VALUES","ITERATOR_KEYS","ITERATOR_KEYSVALUES","$$iterator","kind","View","viewOptions","delegateEventSplitter","eventName","tagName","addMethod","attribute","defaultVal","addUnderscoreMethods","Class","modelMatcher","collectionMethods","modelMethods","config","Base","mappings","methodMap","beforeSend","textStatus","errorThrown","Router","optionalParam","namedParam","splatParam","route","router","routes","optional","param","History","routeStripper","rootStripper","pathStripper","rootPath","iWindow","addEventListener","removeEventListener","decodedFragment","href","protoProps","staticProps","V","hasSvg","SVGVersion","math","children","svgDoc","arrayOfVels","childNode","VPrototype","targetCTM","nodeCTM","matrix","svgTransform","transformAttr","transform","newTx","newTy","newTranslate","cx","cy","newAngle","newOrigin","newRotate","newScale","withoutTransformations","ownerSVGElement","g.Rect","outputBBox","currentChild","childBBox","createTextPathNode","vel","textPathElement","linkedPath","annotateTextLine","lineNode","lineAnnotations","includeAnnotationIndices","eol","lineHeight","baseSize","maxFontSize","fontMetrics","lastJ","annotation","fontSize","annotationAttrs","vTSpan","tspanNode","annotationClass","emRegex","convertEmToPx","em","numerical","calculateDY","alignment","linesMetrics","baseSizePx","lineMetrics","flMaxFont","rLineHeights","lineHeightPx","iLineHeight","llMaxFont","displayEmpty","textPath","verticalAnchor","namedVerticalAnchor","iai","annotations","defaultLineHeight","autoLineHeight","containerNode","lines","annotatedY","lastI","lineClassName","lineNodeStyle","lineFontSize","fs","rh","qualifiedName","attrName","defsNode","found","vels","terminator","svg","globalPoint","globalToLocalMatrix","reference","g.Point","translateToOrigin","rotateAroundOrigin","translateFromOrigin","finalPosition","ctm","animateMotion","mpath","animationID","animator","noHTMLWhitespaceRegex","getTokenList","str","samples","g.Ellipse","g.Polyline","g.Path","g.Line","spot","gRect","rectMatrix","rectMatrixComponents","resetRotation","pathNode","minDistance","closestSamples","gp","centerDistance","refDistance","XMLString","stylesheet","parser","combinedKey","transformationMatrix","transformMatches","numMatches","transformFunctionMatch","transformFunction","translate","rotate","separator","decomposedMatrix","transformations","translateMatch","rotateMatch","scaleMatch","px","py","skewX","skewY","g.normalizeAngle","g.toDeg","svgDocument","svgMatrix","component","corner1","corner2","corner3","corner4","inPoints","outPoints","styleString","pair","innerRadius","outerRadius","startAngle","endAngle","svgArcMax","a0","da","df","c0","s0","s1","compacted","batch","nodePoints","circle","cd","cdx","cdy","topRx","bottomRx","topRy","bottomRy","spaces","pathCommand","pathValues","tan","asin","q2c","ax","ay","_13","_23","X","Y","a2c","large_arc_flag","sweep_flag","recursive","_120","res","f1","f2","rx2","ry2","k","f2old","x2old","y2old","s2","hx","hy","m1","m2","m3","m4","newres","ii","parsePathString","pathString","paramCounts","pathToAbsolute","pathArray","mx","my","pa0","pa","jj","kk","normalize","processPath","pcom","nx","ny","fixArc","pp","pi","pcoms","pfirst","seg","seglen","V$1","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","mapTag","numberTag","nullTag","objectTag","regexpTag","setTag","stringTag","symbolTag","undefinedTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","CLONEABLE_TAGS","rsAstralRange","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboMarksExtendedRange","rsComboMarksSupplementRange","rsComboRange","rsDingbatRange","rsLowerRange","rsMathOpRange","rsNonCharRange","rsPunctuationRange","rsSpaceRange","rsUpperRange","rsVarRange","rsBreakRange","rsApos","rsBreak","rsCombo","rsDigit","rsDingbat","rsLower","rsMisc","rsFitz","rsModifier","rsNonAstral","rsRegional","rsSurrPair","rsUpper","rsZWJ","rsMiscLower","rsMiscUpper","rsOptContrLower","rsOptContrUpper","reOptMod","rsOptVar","rsOptJoin","rsOrdLower","rsOrdUpper","rsSeq","rsEmoji","reUnicodeWords","LARGE_ARRAY_SIZE","HASH_UNDEFINED","reTypedTag","rsAstral","rsNonAstralCombo","rsSymbol","reUnicode","reIsDeepProp","reIsPlainProp","charCodeOfDot","reEscapeChar","rePropName","reIsUint","hasUnicodeWord","reAsciiWord","hasUnicode","unicodeToArray","asciiToArray","stringToArray","arrayLikeKeys","baseKeys","isPrototype","inherited","isArr","isArg","isObjectLike","getTag","isType","skipIndexes","isIndex","assocIndexOf","other","isIterateeCall","isSet","isMap","assignValue","objValue","copyObject","initCloneArray","copyArray","cloneArrayBuffer","arrayBuffer","cloneTypedArray","typedArray","isDeep","buffer","cloneRegExp","regexp","initCloneObject","getSymbols","symbol","copySymbols","cloneDataView","dataView","initCloneByTag","Constructor","getAllKeys","getSymbolsIn","getAllKeysIn","getMapData","__data__","isKeyable","equalObjects","equalFunc","objProps","objLength","othLength","objStacked","othStacked","skipCtor","othValue","objCtor","othCtor","baseIsEqual","baseIsEqualDeep","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","Stack","equalArrays","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","compareUnordered","arrLength","arrStacked","SetCache","arrValue","othIndex","cacheHas","compareArrayBufferTag","convert","mapToArray","setToArray","stacked","isKey","stringToPath","quote","subString","castPath","toKey","compareAscending","valIsDefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","compareMultiple","orders","objCriteria","othCriteria","ordersLength","order","includes","isCommon","valuesLength","outer","valuesIndex","baseClone","isFlat","isFull","customizer","isFunc","copySymbolsIn","subValue","keysIn","nested","toPlainObject","safeGet","assigner","isMerge","sources","baseMerge","srcIndex","forIn","srcValue","baseMergeDeep","assignMergeValue","mergeFunc","isTyped","isPlainObject","baseFor","iterable","baseForOwn","baseEach","createSet","customDefaultsMerge","baseOrderBy","iteratees","criteriaIndex","eachIndex","criteria","baseSortBy","comparer","isStrictComparable","matchesStrictComparable","hasIn","hasPath","baseHasIn","baseMatchesProperty","baseMatches","matchData","getMatchData","baseIsMatch","noCustomizer","baseProperty","basePropertyDeep","getIteratee","arrayReduce","initAccum","baseReduce","eachFunc","reduce","isFlattenable","baseFlatten","isStrict","basePick","paths","basePickBy","isLength","hasFunc","asciiWords","unicodeWords","words","castSlice","upperFirst","createCaseFirst","methodName","strSymbols","chr","trailing","entries","ListCache","MapCache","Hash","assign","supplement","propsLength","propsIndex","deepSupplement","defaultsDeep","invoke","invokeProperty","valIsNaN","valIsUndefined","setLow","seenIndex","cloneDeep","iterator","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","useRaf","invokeFunc","thisArg","startTimer","pendingFunc","cancelTimer","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","isInvoking","groupBy","flattenDeep","without","union","omit","word","addClassNamePrefix","_className","removeClassNamePrefix","parseDOMJSON","json","groupSelectors","svgNamespace","parseNode","siblingsDef","parentNode","nodeDef","textNode","nodeSelector","nodeGroups","nodeGroup","childrenDef","hashCode","getByPath","delimiter","isGetSafe","setByPath","diver","unsetByPath","uuid","guid","toKebabCase","normalizeEvent","touch","useElement","normalizeWheel","sX","sY","pX","pY","cap","nextFrame","raf","lastTime","currTime","timeToCall","cancelFrame","caf","client","parseCssNumeric","restrictUnits","getUnit","validUnitExp","number","NO_SPACE","splitWordWithEOL","eolWords","jl","replacement","getLineHeight","heightValue","textElement","breakText","textSpan","preserveSpaces","space","hyphen","maxLineCount","full","isEol","nextWord","hyphenIndex","lastL","ellipsis","lastLine","lastLineWithOmission","lastChar","separatorChar","sanitizeHTML","currentNode","currentAttribute","attrValue","sortElements","$elements","sortElement","nextSibling","normalizeSides","timing","t3","ca","ra","rd","ga","gd","ba","bd","ma","mb","tpl","regex","_attr","attrArray","cloneCells","cells","cloneMap","cell","embeds","newEmbeds","embed","validPropertiesList","validProperties","props$1","setWrapper","isValuePercentage","positionWrapper","axis","valuePercentage","refOrigin","offsetWrapper","nodeBBox","shapeWrapper","shapeConstructor","cacheName","resetOffset","$node","cachedShape","shapeBBox","shapeOrigin","fitScale","dWrapper","pathConstructor","pointsWrapper","atConnectionWrapper","zeroVector","tangent","setIfChangedWrapper","isTextInUse","_node","isLinkView","contextMarker","marker","stroke","strokeOpacity","setPaintURL","def","paper","attributesNS","_text","textAttrs","fontSizeAttr","textHash","pathSelector","wrappedText","breakTextFn","title","firstChild","titleNode","port","widthFn","heightFn","diagonalLength","rValue","stubs","sourceParts","targetParts","Cell","defaultAttrs","finalAttrs","defaultAttr","value2","name2","previousPorts","ports","removedPorts","inboundLinks","link","outboundLinks","graph","parentCell","embeddedCells","sortedCells","z","shouldUpdate","batchName","parentId","ancestors","embeddedIds","sortSiblings","cellId","delim","_isString","pathArrayLength","initializer","prevProperty","pathItem","isArrayIndex","baseAttributes","nestedPath","propertyValue","firstFrameTime","interpolatingFunction","runtime","progress","_scheduledTransitionIds","initialId","initiator","transitions","transitionId","_transitionIds","defNS","globalDefNS","wrapWith","wrappers","Positions","getRectPoint","portTransformAttrs","trans","util.defaults","lineLayout","elBBox","argTransform","g.line","ellipseLayout","stepFn","util.isPercentage","argPoint","absolute","transformation","ellipseSpread","stepAngle","labelAttributes","opt1","opt2","util.defaultsDeep","getBBoxAngles","tl","bl","br","outsideLayout","portPosition","autoOrient","textAnchor","orientAngle","topLeftAngle","bottomLeftAngle","bottomRightAngle","topRightAngle","insideLayout","radialLayout","portCenterOffset","g.point","manual","_portPosition","_elBBox","outsideOriented","outside","insideOriented","inside","radial","radialOriented","Link","setSource","setOpt","isCellProvided","isPointProvided","setTarget","isRouterProvided","localRouter","isConnectorProvided","localConnector","labels","vertex","vertices","setVertex","setVertices","sourceCell","targetCell","newParent","prevParent","sourceId","targetId","loop","sourceElement","targetElement","visited","connectionAncestor","ancestor","defaultLabel","portsEqual","PortData","clonedData","util.cloneDeep","Port","PortLabel","groupName","groupPosition","groupPositionName","groupArgs","portsArgs","groupPortTransformations","util.toArray","portTransformation","labelPosition","util.isObject","util.merge","evaluated","util.assign","util.isNumber","setDefault","positionName","util.isFunction","util.isString","setDefaults","elementPortPrototype","currentItemsMap","util.isEmpty","groupPorts","portsMetrics","positions","metrics","portId","util.isPlainObject","portsAttr","errorMessages","util.uniq","portsForRemoval","newPorts","rp","rpId","prevPortData","curPortData","added","prevPort","curPort","elementViewPortPrototype","elementReferences","portsGropsByZ","util.groupBy","withoutZKey","portElement","groupNames","refs","containerElement","portElements","portCache","portRoot","portSelectors","groupsNames","util.invoke","labelElement","labelSelectors","portContainerElement","portMarkup","portDoc","portFragment","labelMarkupDef","childCount","portContainerSelectors","portRootSelector","labelRootSelector","labelTextSelector","labelNode","labelTextNode","elementBBox","labelTransformation","transformData","initialAngle","Element","isSetter","parentRelative","restrictedArea","parentPosition","elementPosition","translatedPosition","currentSize","quadrant","fixedPoint","imageFixedPoint","radius","scaledBBox","childElements","parentElement","siblingElements","elementsBBox","expandOnly","shrinkOnly","resultBBox","intersectionBBox","endType","endDef","portGroup","portsPositions","portCenter","GraphCells","util.has","ModelClass","util.getByPath","Graph","prevSource","prevTarget","util.omit","firstCell","lastCell","util.flattenDeep","preparedCells","indirect","inbound","outbound","links","edges","addOutbounds","addInbounds","util.forIn","edge","outCell","inCell","embeddedElements","edgeCell","neighbors","cellsAncestors","commonAncestor","cellAncestors","subgraph","cellMap","neighbor","sinks","elementA","elementB","isSuccessor","isPredecessor","isNeighbor","searchBy","util.getRectPoint","batches","sourceModel","connectedLinks","sameLinks","_link","_source","_target","_graph","views","util.addClassNamePrefix","util.result","isSVG","util.parseDOMJSON","attributeName","prefixedClassName","theme","oldTheme","newTheme","eventNS","currentData","renderFn","DoubleTapEventName","maxDelay","minDelay","targetData","LayersNames","PaperLayer","pivotNodes","pivotNode","neighborZ","currentZ","neighborPivot","HighlighterView","mvc.View","cellView","isLink","layer","rotatableNode","nodeMatrix","MOUNTABLE","transformGroup","detachedTransformGroup","postponedUpdate","cellViewRoot","layerName","vGroup","updateRequested","translateMatrix","rotateMatrix","transformMatrix","prevNode","_cellView","cid","_views","hid","previousView","dirty","HighlightingTypes","Flags","CellView","flags","shift","presentationAttributes","initFlag","markup","rootSelector","feature","interactive","magnet","magnetMatrix","rootNode","magnetAttribute","isMagnetRoot","proxyNode","prevSelector","nthChild","connectionStrategy","strategy","linkView","magnetThreshold","currentTarget","targetMagnet","attrVal","normalAttrs","setAttrs","positionAttrs","offsetAttrs","relatives","rawAttrs","nodeAttrs","setResult","nodeTransform","nodePosition","translation","nodeScale","positioned","offseted","nodeBoundingRect","scalableNode","selectorCache","nodeId","nodesAttrs","mergeIds","unique","prevNodeAttrs","selectedLength","sortIndex","bboxCache","relativeItems","relativeRefItems","nodeData","processedAttrs","roAttrs","nodesAllAttrs","nodeAllAttrs","refSelector","refNode","itemIndex","refNodeId","getCommonAncestorNode","roProcessedAttrs","isInitialMount","toolsView","defaultInteractionPrevented","sourceView","targetView","node1","node2","DragActions","ElementView","useCSSSelectors","transformHighlighters","updateHighlighters","renderingOnlyAttrs","modelAttrs","rotateString","scalable","scalableBBox","rotatable","rotation","rotatableBBox","initialZIndices","maxZ","findParentBy","frontParentOnly","validateEmbedding","candidates","newCandidateView","prevCandidateView","candidate","candidateView","validateUnembedding","initialParentId","whenNotAllowed","initialPosition","proxyPortNode","action","delegatedView","isPropagationAlreadyStopped","grid","pointerOffset","embedding","elX","elY","normal","oneSide","padding","util.normalizeSides","sourceBBox","targetBBox","sourcePoint","targetPoint","coordinate","direction","opposites","radians","freeJoin","getBBoxSize","getBearing","from","getPointBox","getPaddingBox","getSourceBBox","getTargetBBox","getSourceAnchor","getTargetAnchor","vertexVertex","d1","d2","opposite","elementVertex","fromBBox","vertexElement","toBBox","freePoints","freeBearingPoints","util.difference","elementElement","fromBorder","toBorder","startRoute","endRoute","insideElement","boundary","reversed","g.toRad","orthogonal","sourceAnchor","targetAnchor","orthogonalVertices","isOrthogonal","isOrthogonalLoop","cost","ObstacleMap","excludedEnds","excludedAncestors","util.union","mapGridSize","isExcludedType","isExcludedEnd","excluded","isExcludedAncestor","isExcluded","gridKey","mapKey","obstacle","SortedSet","util.sortedIndex","getDirectionAngle","numDirections","angleTheta","fixAngleEnd","normalizedAngle","diffX","diffY","gridStepsX","gridStepsY","distanceX","distanceY","getDirectionChange","angle1","angle2","directionChange","getGridOffsets","directions","getGrid","getGridDimension","absDiff","numSteps","roundedDiff","remainder","stepCorrection","snappedX","g.snapToGrid","snappedY","align","getKey","normalizePoint","reconstructRoute","parents","tailPoint","prevDiff","leadPoint","fromDiff","estimateCost","endPoints","getRectPoints","anchor","directionList","directionMap","anchorCenterVector","dirList","rectPoints","endpoint","intersectionLine","farthestIntersectionDistance","farthestIntersection","currentIntersection","findRoute","isPointObstacle","startPoints","openSet","costs","previousRouteDirectionAngle","isPathBeginning","endPointsKeys","endPoint","loopsRemaining","currentParent","currentCost","isRouteBeginning","isStart","previousDirectionAngle","samePoints","skipEndCheck","directionAngle","neighborPoint","neighborKey","isNeighborEnd","endDirectionAngle","endDirectionChange","neighborCost","neighborPenalty","costFromStart","resolveOptions","point1","point2","oldVertices","newVertices","partialRoute","isEndingAtPoint","dragFrom","dragTo","manhattan","diagonalCost","intersectionPoint","directionFrom","metro","Directions","DEFINED_DIRECTIONS","getDirectionForLinkConnection","linkOrigin","connectionPoint","rightAngleRouter","_vertices","sourceDirection","targetDirection","isSourcePort","isTargetPort","sx0","sy0","sourceWidth","sourceHeight","tx0","ty0","targetWidth","targetHeight","tx1","ty1","smx0","smx1","smy0","smy1","tmx0","tmx1","tmy0","tmy1","sourceOutsidePoint","sourceSide","sourceLinkAnchorBBox","targetOutsidePoint","targetSide","targetLinkAnchorBBox","sox","soy","tox","toy","tcx","tcy","scx","scy","middleOfVerticalSides","middleOfHorizontalSides","rightAngle","CornerTypes","DEFINED_CORNER_TYPES","CORNER_RADIUS","PRECISION","straight","routePoints","cornerType","cornerRadius","cornerPreserveAspectRatio","nextDistance","routePointsLength","curr","prevDistance","startMove","endMove","cornerStart","cornerEnd","JUMP_SIZE","JUMP_TYPES","RADIUS","CLOSE_PROXIMITY_PADDING","IGNORED_CONNECTORS","sortPointsAscending","overlapExists","xMatch","yMatch","createLines","resultLines","nextPoint","setupUpdating","jumpOverLinkView","updateList","updateJumpOver","updateFlag","findLineIntersections","crossCheckLines","crossCheckLine","sortPoints","createJumps","jumpSize","jumpStart","jumpEnd","endDistance","startDistance","jumpLine","buildPath","jumpType","xAxisRotate","midpoint","centerLine","halfLine","xOffset","yOffset","nextLine","buildRoundedSegment","roundedStart","roundedEnd","jumpover","ignoreConnectors","allLinks","thisModel","thisIndex","defaultConnector","linkViews","thisLines","linkLines","jumpingLines","thisLine","linkLinesToTest","overlapIndex","lineIntersections","rounded","smooth","g.Curve","controlPointX","controlPointY","TangentDirections","completeRoute","sourceTangent","getSourceTangentDirection","tangentLength","pointsVector","angleBetweenVectors","updatedLength","targetTangent","getTargetTangentDirection","bezierCurves","createCatmullRomCurves","catmullRomToBezier","getHorizontalSourceDirection","unrotatedBBox","getHorizontalTargetDirection","getVerticalSourceDirection","getVerticalTargetDirection","getAutoSourceDirection","getAutoTargetDirection","getClosestPointSourceDirection","getClosestPointTargetDirection","getOutwardsSourceDirection","sourceCenter","getOutwardsTargetDirection","targetCenter","rotateVector","vector","v1","v2","tau","coeff","distances","tangents","catmullRomCurves","tpPrev","tpNext","vAngle","rot","vectorDeterminant","pointsDeterminant","scaleFactor1","scaleFactor2","bcp1","bcp2","LinkView","updateLabels","updateLegacyTools","updateAll","updateConnector","previousLabels","labelExists","_labels","labelMarkup","vNode","childNodes","vLabels","labelCache","labelsCount","builtinDefaultLabel","builtinDefaultLabelMarkup","defaultLabelMarkup","defaultMarkup","_V","labelIndex","labelRoot","hasCustomMarkup","labelAttrs","defaultLabelAttrs","builtinDefaultLabelAttrs","labelSize","defaultLabelSize","canLabelMove","$tools","toolTemplate","tool","tool2","$markerVertices","markupTemplate","$markerArrowheads","numRoutePoints","polylinePoints","numPolylinePoints","anchors","connectionPoints","markerPoints","firstWaypoint","lastWaypoint","sourceMarkerPoint","targetMarkerPoint","firstEndType","firstRef","secondEndType","secondRef","firstAnchor","secondAnchor","firstAnchorRef","secondAnchorRef","firstDef","secondDef","firstView","secondView","firstMagnet","secondMagnet","firstVertex","lastVertex","sourceDef","targetDef","paperOptions","sourceMagnet","sourceConnectionPointDef","sourcePointRef","sourceLine","targetConnectionPointDef","targetPointRef","targetLine","anchorDef","isConnection","anchorFn","anchorName","anchorNamespace","connectionPointDef","linkConnectionMagnet","connectionPointFn","connectionPointName","builtinDefaultLabelPosition","defaultLabelPosition","normalizedLabelPosition","normalizedDefaultLabelPosition","_labelSelectors","connectionLength","toolPosition","doubleLinkToolsOffset","endViewProperty","endId","endModel","endView","endMagnetProperty","connectedMagnet","sourceArrow","targetArrow","labelPositionArgs","defaultLabelPositionArgs","localX","localY","localAngle","positionArgs","onAnimationEnd","vToken","duration","isReversed","animationAttributes","connection","routers","defaultRouter","routerFn","connectors","connectorFn","isDistanceRelative","isDistanceAbsoluteReverse","isOffsetAbsolute","labelPoint","labelDistance","labelOffset","closestPoint","labelOffsetDiff","labelAngle","labelOffsetCoordinates","positionOffset","isKeepGradient","isEnsureLegibility","vertexLength","currentVertex","currentVertexLength","dragData","linkTool","stopPropagation","vertexIdx","labelIdx","initialLabelPosition","positionAngle","vertexNode","removeNode","arrowheadNode","arrowheadType","arrowhead","initialEnd","currentEnd","endChanged","snapPoint","closestPointX","closestDistanceX","closestPointY","closestDistanceY","distX","distY","snapLinksSelf","snapLinks","isSnapped","viewsInArea","prevClosestView","prevClosestMagnet","prevMagnetProxy","pointer","magnetProxy","closestView","closestMagnet","newClosestMagnet","prevEnd","prevX","prevY","viewUnderPointer","magnetUnderPointer","oppositeArrowhead","validateConnectionArgs","isMagnetAvailable","validate","magnets","availableMagnets","markedKeys","markedMagnets","useFirstSubpath","secondSubpathIndex","highlightMatrix","paddingMatrix","MASK_CLIP","forEachDescendant","descendants","descendant","mask","childEl","MASK_CHILD_ATTRIBUTE_BLACKLIST","MASK_REPLACE_TAGS","MASK_REMOVE_TAGS","childTagName","originalChild","originalNode","rootEl","MASK_ROOT_ATTRIBUTE_BLACKLIST","maskRoot","maskChild","VISIBLE","INVISIBLE","strokeWidth","hasNodeFill","magnetStrokeWidth","minStrokeWidth","maxStrokeWidth","maskEl","maskNode","maskClip","highlighterBBox","opacity","addClass","elementView","gap","normalizedSize","isRowDirection","itemWidth","items","prevItems","comparison","unchanged","prevEls","itemsEls","prevEl","itemEl","itemsCount","listSize","connectionRatio","_magnet","_refPoint","_connectionPerpendicular","refPoint","OFFSET","verticalLine","horizontalLine","verticalIntersections","horizontalIntersections","getPointAtLink","connectionClosest","_connectionClosest","_opt","resolveRef","refView","parsedValue","connectionPerpendicular","offsetPoint","alignLine","anchorConnectionPoint","_view","alignOffset","bboxIntersection","rectangleIntersection","bboxWORotation","lineWORotation","findShapeNode","BNDR_SUBDIVISIONS","BNDR_SHAPE_BBOX","boundaryIntersection","localShape","targetMatrix","localMatrix","localLine","localRef","localBBox","cpOffset","rectangle","bboxWrapper","dxPercentage","dyPercentage","_perpendicular","topLeft","bottomRight","_midSide","_modelCenter","topRight","bottomLeft","perpendicular","midSide","modelCenter","sortingTypes","WHEEL_CAP","WHEEL_WAIT_MS","MOUNT_BATCH_SIZE","UPDATE_BATCH_SIZE","MIN_PRIORITY","defaultHighlighting","defaultLayers","Paper","_evt","cellViewS","_magnetS","cellViewT","_magnetT","_linkView","childView","parentView","priority","highlighters","linkAnchors","updateDelayingBatches","sortDelayingBatches","defaultConnectionPoint","defaultAnchor","defaultLinkAnchor","highlighting","cellViewNamespace","_layers","defs","layers","sorted","layerView","cellsLayerView","toolsLayerView","labelsLayerView","viewport","transformString","ctmString","flagLabels","nextPriority","dumpOptions","sourceFlag","targetFlag","isAsync","stats","updates","FLAG_REMOVE","FLAG_INSERT","UPDATE_PRIORITY","priorityUpdates","prevPriorityUpdates","currentType","viewUpdateFn","shouldNotify","leftover","FLAG_INIT","isInitialInsert","passingOpt","batchStats","updateCount","batchCount","priorities","priorityIndexes","checkStats","unmountCount","mountCount","processed","total","progressFn","beforeFn","afterFn","batchSize","postponeCount","maxPriority","viewportFn","postponeViewFn","main","currentFlag","isDetached","leftoverFlag","unmountedCids","unmountedViews","mountedCids","mountedViews","unmounted","mounted","visible","isUnmounted","isMounted","unmountedCount","mountedCount","isFrozen","freezeKey","currentWidth","currentHeight","computedSize","gridWidth","gridHeight","minHeight","maxHeight","area","calcWidth","calcHeight","contentBBox","contentLocalOrigin","contentArea","minScaleX","maxScaleX","minScaleY","maxScaleY","fittingBBox","currentTranslate","currentScale","newSx","newSy","scaleDiff","newOx","newOy","restrictTranslate","optionalViewClass","defaultViewClass","namespaceViewClass","ViewClass","_updates","$cells","cellA","cellB","zA","zB","drawGrid","$el","localPoint","paperPoint","localRect","paperRect","clientPoint","clientRect","pagePoint","pageOffset","highlighterDef","highlighterNamespace","highlighter","magnetEl","highlighterDescriptor","isContextMenu","isTargetFormNode","rootViewEl","eventNode","eventEvt","magnetNode","magnetEvt","contextmenuEvt","mousemoved","normalizedEvt","relatedTarget","relatedView","deltas","deltaY","deltaX","pinchHandlers","magnetValue","optionsList","localOptions","gridLayerSetting","patternDefVel","patternUri","backgroundPosition","backgroundSize","img","backgroundImage","backgroundRepeat","backgroundOpacity","backgroundQuality","backgroundPattern","canvas","defId","filterId","_filter","filterSVGString","filterAttrs","gradient","stopVEls","gradientVEl","patternVEl","markerUnits","markerVEl","markerContentVEl","markupVEl","markerAttrs","markupValue","imgWidth","imgHeight","stepX","stepY","thickness","ToolView","ToolsView","tools","isRendered","focusedTool","blurredTool","env","Generic","TextView","Text","Circle","Image","Rhombus","svgForeignObjectSupported","TextBlock","TextBlockView","noTextAttrs","Rectangle","BorderedImage","EmbeddedImage","InscribedImage","HeaderedRectangle","CYLINDER_TILT","Cylinder","isPercentageSetter","bodyAttrs","topAttrs","kappa","xLeft","xCenter","xRight","ySideTop","yCurveTop","ySideBottom","yCurveBottom","foLabelMarkup","svgLabelMarkup","wrapValue","wrapAttrs","LinkBase","DoubleLink","ShadowLink","inPorts","outPorts","inPortItems","outPortItems","Atomic","Coupled","Gate","IO","Input","Output","Gate11","Gate21","Repeater","Not","Or","input1","input2","And","Nor","Nand","Xor","Xnor","Wire","KingWhite","KingBlack","QueenWhite","QueenBlack","RookWhite","RookBlack","BishopWhite","BishopBlack","KnightWhite","KnightBlack","PawnWhite","PawnBlack","Entity","WeakEntity","Relationship","IdentifyingRelationship","Attribute","Multivalued","Derived","Key","Normal","ISA","State","StartState","EndState","Arrow","Member","Place","PlaceView","vTokens","Transition","diaLink","offsetY","rectHeight","ClassView","Abstract","AbstractView","Interface","InterfaceView","Generalization","Implementation","Aggregation","Composition","Association","getViewBBox","useModelGeometry","Arrowhead","normalizedEvent","util.normalizeEvent","TargetArrowhead","SourceArrowhead","Boundary","Control","extras","handleNode","relativePos","absolutePos","handleAttributes","extrasNode","relativeCoords","PrimaryLink","shapes.standard.Link","textInput","cellText","centerX","centerY","oneThirdWidth","handleKeydownEvent","newCellText","linkTools.SourceArrowhead","linkTools.TargetArrowhead","dia.ToolsView","initJointJs","shapes","dia.Graph","dia.Paper","magnetS","magnetT","NormalResizeTool","elementTools.Control","coordinates","CircleResizeTool","RotateTool","degrees","getPorts","updateLabelText","PrimaryRect","shapes.standard.Rectangle","boundaryTool","elementTools.Boundary","resizeTool","rotateTool","createPrimaryRectangle","PrimaryCircle","shapes.standard.Ellipse","createPrimaryCircle","PrimaryPolygon","shapes.standard.Polygon","createPrimaryPolygon","PrimaryPath","shapes.standard.Path","createPrimaryPath","linkConnectorOptions","linkConnectorConfig","linkRouterOptions","linkRouterConfig","clickedLastView","clickedCurrView","textColor","textSize","fontFamilyOptions","fontFamily","shapeStrokeWidthOptions","shapeStrokeWidth","shapeBackground","shapeBorderStyle","calcCurrentScale","currentOffsetX","currentOffsetY","isClickedLink","isClickedElement","getLinkOrElementAttr","attrKey","changeRouterConfig","changeConnectorConfig","changeTextBold","currView","weight","changeTextItalic","changeTextUnderline","changeTextColor","changeTextSize","changeTextFamily","family","changeStrokeWidth","changeBorderStyle","lattice","changeBackground","changeLinkColor","closeColorPicker","openColorPicker","addFlow","Rect.createPrimaryRectangle","addDecision","Polygon.createPrimaryPolygon","addStartOrEnd","addDocument","Path.createPrimaryPath","addData","addChildFlow","addExtraData","addInnerStore","addQueueData","addDatabase1","addDatabase2","addManualInput","addCard","addCassette","addDisplay","addManualOperation","addPrepare","addParallelMode","addCycleLimit","addOr","addCalcSum","addOffPageReference","addSorting","addMerge","addOnPageReference","Circle.createPrimaryCircle","installLinkTools","uninstallLinkTools","installShapeTools","uninstallShapeTools","onBlankClick","Data.isClickedElement","Data.isClickedLink","Data.clickedLastView","onElemClick","Data.clickedCurrView","onLinkClick","onBlankMousewheel","scrollFactor","Data.currentScale","Data.currentOffsetX","Data.currentOffsetY","onDelCell","onDbClickCell","textColorPickerRef","linkColorPickerRef","shapeBgColorPickerRef","onSliderChange","resetSlider","_imports_0","_imports_1","_imports_2","_imports_3","_imports_4","_imports_5","_imports_6","_imports_7","_imports_8","_imports_9","_imports_10","_imports_11","_imports_12","_imports_13","_imports_14","_imports_15","_imports_16","_imports_17","_imports_18","_imports_19","_imports_20","_imports_21","_imports_22","_imports_23","_imports_24","textInputRef","jointjs","Data.linkConnectorConfig","Data.linkRouterConfig","ListenerService.onElemClick","ListenerService.onDbClickCell","ListenerService.onLinkClick","ListenerService.onBlankClick","ListenerService.onBlankMousewheel","ListenerService.onDelCell"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268]}
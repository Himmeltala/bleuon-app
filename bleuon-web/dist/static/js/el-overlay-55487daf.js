import{S as te,aZ as de,b1 as fe,aX as K,k as me,Z as q,b2 as ve,aW as se,aO as J,_ as U,aK as pe,b3 as ye,b4 as ge,b5 as be,b6 as W,V as Z,W as _,d as Y,b as R,B as h,b7 as Ce,a$ as he,aF as ke,Y as G,a6 as T,o as O,c as X,a as V,n as w,u as o,v as we,w as D,t as j,K as Ee,a8 as Me,z as x,a1 as ne,a2 as le,b8 as Se,as as Be,b9 as De,j as I,ba as Ie,$ as Te,a3 as Le,bb as $e,bc as Q,ai as Ae,ad as Fe,al as Oe,aJ as Pe,bd as ze,am as Ne,aN as Re,be as Ye,an as Ve}from"./mainapp-08e4e16e.js";import{P as H}from"./vnode-c2d158cc.js";import{F as We,a as Xe}from"./el-popper-5620694e.js";import{d as He}from"./el-dropdown-item-1395b2e6.js";import{U as ae}from"./event-9519ab40.js";import{c as ee,u as oe}from"./_plugin-vue_export-helper-5392fbfa.js";import{t as Ke}from"./error-3ede30a0.js";import{g as Ue}from"./el-select-e493f370.js";const _e=(e,t,c)=>{let l={offsetX:0,offsetY:0};const i=n=>{const u=n.clientX,v=n.clientY,{offsetX:f,offsetY:g}=l,m=e.value.getBoundingClientRect(),r=m.left,C=m.top,L=m.width,P=m.height,z=document.documentElement.clientWidth,$=document.documentElement.clientHeight,N=-r+f,A=-C+g,E=z-r-L+f,M=$-C-P+g,F=k=>{const s=Math.min(Math.max(f+k.clientX-u,N),E),b=Math.min(Math.max(g+k.clientY-v,A),M);l={offsetX:s,offsetY:b},e.value.style.transform=`translate(${K(s)}, ${K(b)})`},p=()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",p)};document.addEventListener("mousemove",F),document.addEventListener("mouseup",p)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",i)},a=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",i)};te(()=>{de(()=>{c.value?d():a()})}),fe(()=>{a()})},je=(e,t={})=>{me(e)||Ke("[useLockscreen]","You need to pass a ref param to this function");const c=t.ns||q("popup"),l=ve(()=>c.bm("parent","hidden"));if(!se||J(document.body,l.value))return;let i=0,d=!1,a="0";const n=()=>{setTimeout(()=>{be(document==null?void 0:document.body,l.value),d&&document&&(document.body.style.width=a)},200)};U(e,u=>{if(!u){n();return}d=!J(document.body,l.value),d&&(a=document.body.style.width),i=Ue(c.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=pe(document.body,"overflowY");i>0&&(v||f==="scroll")&&d&&(document.body.style.width=`calc(100% - ${i}px)`),ye(document.body,l.value)}),ge(()=>n())},re=e=>{if(!e)return{onClick:W,onMousedown:W,onMouseup:W};let t=!1,c=!1;return{onClick:a=>{t&&c&&e(a),t=c=!1},onMousedown:a=>{t=a.target===a.currentTarget},onMouseup:a=>{c=a.target===a.currentTarget}}},xe=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:_([String,Array,Object])},zIndex:{type:_([String,Number])}}),qe={click:e=>e instanceof MouseEvent},Ze="overlay";var Je=Y({name:"ElOverlay",props:xe,emits:qe,setup(e,{slots:t,emit:c}){const l=q(Ze),i=u=>{c("click",u)},{onClick:d,onMousedown:a,onMouseup:n}=re(e.customMaskEvent?void 0:i);return()=>e.mask?R("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:a,onMouseup:n},[h(t,"default")],H.STYLE|H.CLASS|H.PROPS,["onClick","onMouseup","onMousedown"]):Ce("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[h(t,"default")])}});const Ge=Je,ie=Symbol("dialogInjectionKey"),ue=Z({center:Boolean,alignCenter:Boolean,closeIcon:{type:he},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Qe={close:()=>!0},eo=["aria-level"],oo=["aria-label"],to=["id"],so=Y({name:"ElDialogContent"}),no=Y({...so,props:ue,emits:Qe,setup(e){const t=e,{t:c}=ke(),{Close:l}=Se,{dialogRef:i,headerRef:d,bodyId:a,ns:n,style:u}=G(ie),{focusTrapRef:v}=G(We),f=T(()=>[n.b(),n.is("fullscreen",t.fullscreen),n.is("draggable",t.draggable),n.is("align-center",t.alignCenter),{[n.m("center")]:t.center},t.customClass]),g=He(v,i),m=T(()=>t.draggable);return _e(i,d,m),(r,C)=>(O(),X("div",{ref:o(g),class:w(o(f)),style:ne(o(u)),tabindex:"-1"},[V("header",{ref_key:"headerRef",ref:d,class:w(o(n).e("header"))},[h(r.$slots,"header",{},()=>[V("span",{role:"heading","aria-level":r.ariaLevel,class:w(o(n).e("title"))},we(r.title),11,eo)]),r.showClose?(O(),X("button",{key:0,"aria-label":o(c)("el.dialog.close"),class:w(o(n).e("headerbtn")),type:"button",onClick:C[0]||(C[0]=L=>r.$emit("close"))},[R(o(Me),{class:w(o(n).e("close"))},{default:D(()=>[(O(),j(Ee(r.closeIcon||o(l))))]),_:1},8,["class"])],10,oo)):x("v-if",!0)],2),V("div",{id:o(a),class:w(o(n).e("body"))},[h(r.$slots,"default")],10,to),r.$slots.footer?(O(),X("footer",{key:0,class:w(o(n).e("footer"))},[h(r.$slots,"footer")],2)):x("v-if",!0)],6))}});var lo=le(no,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ao=Z({...ue,appendToBody:Boolean,beforeClose:{type:_(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),ro={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>Be(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},io=(e,t)=>{const l=Le().emit,{nextZIndex:i}=De();let d="";const a=ee(),n=ee(),u=I(!1),v=I(!1),f=I(!1),g=I(e.zIndex||i());let m,r;const C=Ie("namespace",$e),L=T(()=>{const y={},B=`--${C.value}-dialog`;return e.fullscreen||(e.top&&(y[`${B}-margin-top`]=e.top),e.width&&(y[`${B}-width`]=K(e.width))),y}),P=T(()=>e.alignCenter?{display:"flex"}:{});function z(){l("opened")}function $(){l("closed"),l(ae,!1),e.destroyOnClose&&(f.value=!1)}function N(){l("close")}function A(){r==null||r(),m==null||m(),e.openDelay&&e.openDelay>0?{stop:m}=Q(()=>p(),e.openDelay):p()}function E(){m==null||m(),r==null||r(),e.closeDelay&&e.closeDelay>0?{stop:r}=Q(()=>k(),e.closeDelay):k()}function M(){function y(B){B||(v.value=!0,u.value=!1)}e.beforeClose?e.beforeClose(y):E()}function F(){e.closeOnClickModal&&M()}function p(){se&&(u.value=!0)}function k(){u.value=!1}function s(){l("openAutoFocus")}function b(){l("closeAutoFocus")}function S(y){var B;((B=y.detail)==null?void 0:B.focusReason)==="pointer"&&y.preventDefault()}e.lockScroll&&je(u);function ce(){e.closeOnPressEscape&&M()}return U(()=>e.modelValue,y=>{y?(v.value=!1,A(),f.value=!0,g.value=e.zIndex?g.value++:i(),Te(()=>{l("open"),t.value&&(t.value.scrollTop=0)})):u.value&&E()}),U(()=>e.fullscreen,y=>{t.value&&(y?(d=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=d)}),te(()=>{e.modelValue&&(u.value=!0,f.value=!0,A())}),{afterEnter:z,afterLeave:$,beforeLeave:N,handleClose:M,onModalClick:F,close:E,doClose:k,onOpenAutoFocus:s,onCloseAutoFocus:b,onCloseRequested:ce,onFocusoutPrevented:S,titleId:a,bodyId:n,closed:v,style:L,overlayDialogStyle:P,rendered:f,visible:u,zIndex:g}},uo=["aria-label","aria-labelledby","aria-describedby"],co=Y({name:"ElDialog",inheritAttrs:!1}),fo=Y({...co,props:ao,emits:ro,setup(e,{expose:t}){const c=e,l=Ae();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},T(()=>!!l.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},T(()=>!!c.customClass));const i=q("dialog"),d=I(),a=I(),n=I(),{visible:u,titleId:v,bodyId:f,style:g,overlayDialogStyle:m,rendered:r,zIndex:C,afterEnter:L,afterLeave:P,beforeLeave:z,handleClose:$,onModalClick:N,onOpenAutoFocus:A,onCloseAutoFocus:E,onCloseRequested:M,onFocusoutPrevented:F}=io(c,d);Fe(ie,{dialogRef:d,headerRef:a,bodyId:f,ns:i,rendered:r,style:g});const p=re(N),k=T(()=>c.draggable&&!c.fullscreen);return t({visible:u,dialogContentRef:n}),(s,b)=>(O(),j(Ye,{to:"body",disabled:!s.appendToBody},[R(Re,{name:"dialog-fade",onAfterEnter:o(L),onAfterLeave:o(P),onBeforeLeave:o(z),persisted:""},{default:D(()=>[Oe(R(o(Ge),{"custom-mask-event":"",mask:s.modal,"overlay-class":s.modalClass,"z-index":o(C)},{default:D(()=>[V("div",{role:"dialog","aria-modal":"true","aria-label":s.title||void 0,"aria-labelledby":s.title?void 0:o(v),"aria-describedby":o(f),class:w(`${o(i).namespace.value}-overlay-dialog`),style:ne(o(m)),onClick:b[0]||(b[0]=(...S)=>o(p).onClick&&o(p).onClick(...S)),onMousedown:b[1]||(b[1]=(...S)=>o(p).onMousedown&&o(p).onMousedown(...S)),onMouseup:b[2]||(b[2]=(...S)=>o(p).onMouseup&&o(p).onMouseup(...S))},[R(o(Xe),{loop:"",trapped:o(u),"focus-start-el":"container",onFocusAfterTrapped:o(A),onFocusAfterReleased:o(E),onFocusoutPrevented:o(F),onReleaseRequested:o(M)},{default:D(()=>[o(r)?(O(),j(lo,Pe({key:0,ref_key:"dialogContentRef",ref:n},s.$attrs,{"custom-class":s.customClass,center:s.center,"align-center":s.alignCenter,"close-icon":s.closeIcon,draggable:o(k),fullscreen:s.fullscreen,"show-close":s.showClose,title:s.title,"aria-level":s.headerAriaLevel,onClose:o($)}),ze({header:D(()=>[s.$slots.title?h(s.$slots,"title",{key:1}):h(s.$slots,"header",{key:0,close:o($),titleId:o(v),titleClass:o(i).e("title")})]),default:D(()=>[h(s.$slots,"default")]),_:2},[s.$slots.footer?{name:"footer",fn:D(()=>[h(s.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):x("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,uo)]),_:3},8,["mask","overlay-class","z-index"]),[[Ne,o(u)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var mo=le(fo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const wo=Ve(mo);export{wo as E};
//# sourceMappingURL=el-overlay-55487daf.js.map

import{d as R,u as W,r as c,m as $,o as _,c as w,b as o,w as d,i as e,a as n,t as M,n as I,q as z,s as Z,K as G,p as Y,g as ee,f as X,E as K,v as te,j as D}from"./mainapp-3c0275ba.js";import{E as N,a as L}from"./el-form-item-ee156093.js";import{E as F,_ as se}from"./_plugin-vue_export-helper-96a6bebf.js";import{E as S}from"./el-input-07841055.js";import{a as oe,b as O,v as T,c as ae,r as re}from"./api-user-27ecda90.js";import"./event-e06a23af.js";import"./isNil-c75b1b34.js";function k(i){return(s,l,t)=>{/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(l)?l===""?(i.value=!1,t(new Error("请输入邮箱地址"))):(i.value=!0,t()):(i.value=!1,t(new Error("请输入正确的邮箱格式")))}}function q(i){return(s,l,t)=>{l.length<6?(i.value=!1,t(new Error("请输入 6 位数的验证码"))):l===""?(i.value=!1,t(new Error("请输入验证码"))):(i.value=!0,t())}}function j(i,s,l,t){t(()=>{i=setInterval(()=>{s.value--,s.value<0&&(clearInterval(i),l.value=!1,s.value=60)},1e3)}),l.value=!0}async function B(i,s,l){i&&await i.validate((t,a)=>{if(t)s&&s(t,a);else return l&&l(t,a),!1})}function J(i){return(s,l,t)=>{/^(?![_-])[\u4e00-\u9fa5a-zA-Z][\u4e00-\u9fa5a-zA-Z0-9_-]{4,16}$/.test(l)?l===""?(i.value=!1,t(new Error("请输入用户名"))):(i.value=!0,t()):(i.value=!1,t(new Error("字母、中文、-、_，不能以数字开头、-、_开头，长度在4~16")))}}function A(i){return(s,l,t)=>{/^[a-zA-Z0-9.]{8,16}$/.test(l)?l===""?(i.value=!1,t(new Error("请输入密码"))):(i.value=!0,t()):(i.value=!1,t(new Error("英文、.、数字，长度在8~16")))}}function U(i,s){return(l,t,a)=>{/^[a-zA-Z0-9.]{8,16}$/.test(t)?t===""?(i.value=!1,a(new Error("请输入密码"))):s.rePasswd!==s.password?(i.value=!1,a(new Error("两次密码输入不一致"))):(i.value=!0,a()):(i.value=!1,a(new Error("英文、.、数字，长度在8~16")))}}function Q(i){return(s,l,t)=>{/^(?:[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}|(?![_-])[\u4e00-\u9fa5a-zA-Z][\u4e00-\u9fa5a-zA-Z0-9_-]{4,16}|(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8})$/.test(l)?(i.value=!0,t()):(i.value=!1,t(new Error("请输入手机号、电子邮箱、用户名的格式")))}}const le=n("span",{class:"font-bold"},"登录",-1),ne=R({__name:"AccountLogin",setup(i){const s=W(),l=c(!1),t=c(!1),a=c(),r=$({username:"",password:""}),p=$({username:[{required:!0,message:"请输入账号信息",trigger:"blur"},{validator:Q(l),trigger:"change"},{validator:Q(l),trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:A(t),trigger:"change"},{validator:A(t),trigger:"blur"}]});function y(){B(a.value,async()=>{await oe(r,()=>{s.push("/home")})})}return(f,u)=>{const v=S,g=N,h=F,b=L;return _(),w("div",null,[o(b,{ref_key:"formRef",ref:a,rules:e(p),model:e(r)},{default:d(()=>[o(g,{prop:"username"},{default:d(()=>[o(v,{clearable:"",size:"large",modelValue:e(r).username,"onUpdate:modelValue":u[0]||(u[0]=m=>e(r).username=m),placeholder:"请输入手机号/邮箱/用户名"},null,8,["modelValue"])]),_:1}),o(g,{prop:"password"},{default:d(()=>[o(v,{clearable:"",maxlength:16,minlength:8,size:"large",modelValue:e(r).password,"onUpdate:modelValue":u[1]||(u[1]=m=>e(r).password=m),placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),o(g,null,{default:d(()=>[o(h,{disabled:!e(l)||!e(t),onClick:y,size:"large",class:"w-100%",type:"primary"},{default:d(()=>[le]),_:1},8,["disabled"])]),_:1})]),_:1},8,["rules","model"])])}}}),ie={class:"f-c-b w-100%"},de={class:"w-70%"},ue={class:"w-30% f-c-e"},me={key:0},ce={key:1},pe=n("span",{class:"font-bold"},"登录",-1),_e=R({__name:"EmailLogin",setup(i){const s=W();let l;const t=c(60),a=c(!1),r=c(!1),p=c(!1),y=c(),f=$({email:"",code:""}),u=$({email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{validator:k(r),trigger:"change"},{validator:k(r),trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:q(p),trigger:"change"},{validator:q(p),trigger:"blur"}]});function v(){j(l,t,a,async h=>{await O(f.email,"login",()=>h())})}function g(){B(y.value,async()=>{await T(f,f.code,"login",()=>{s.push("/home")})})}return(h,b)=>{const m=S,C=N,x=F,E=L;return _(),w("div",null,[o(E,{ref_key:"formRef",ref:y,model:e(f),rules:e(u)},{default:d(()=>[o(C,{prop:"email"},{default:d(()=>[o(m,{clearable:"",size:"large",modelValue:e(f).email,"onUpdate:modelValue":b[0]||(b[0]=P=>e(f).email=P),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),o(C,{prop:"code"},{default:d(()=>[n("div",ie,[n("div",de,[o(m,{maxlength:6,minlength:6,clearable:"",class:"w-100%",size:"large",modelValue:e(f).code,"onUpdate:modelValue":b[1]||(b[1]=P=>e(f).code=P),placeholder:"请输入验证码"},null,8,["modelValue"])]),n("div",ue,[o(x,{disabled:e(a)||!e(r),size:"large",onClick:v},{default:d(()=>[e(t)<60&&e(t)>=0?(_(),w("span",me," 请等待 "+M(e(t))+"s ",1)):(_(),w("span",ce,"获取验证码"))]),_:1},8,["disabled"])])])]),_:1}),o(C,null,{default:d(()=>[o(x,{onClick:g,disabled:!e(r)||!e(p),size:"large",class:"w-100%",type:"primary"},{default:d(()=>[pe]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"])])}}}),H=i=>(Y("data-v-8d879669"),i=i(),ee(),i),fe={class:"login w-100% h-100% relative f-c-c"},ge={class:"w-40%"},be=H(()=>n("div",{class:"mb-10 text-1.6rem"},"欢迎使用 BleuOn",-1)),ve={class:"mb-10 f-c-s"},we={class:"f-c-b"},ye=H(()=>n("div",{class:"other-login mt-15 f-c-c text-b"},[n("div",null,"其他方式登录")],-1)),he=H(()=>n("div",{class:"absolute text-center bottom-5 w-40% text-0.8rem text-b"},[X(" 登录即表示您已同意"),n("span",{class:"hover"},[n("u",null,"服务条款")])],-1)),xe=R({__name:"Login",props:{dynamicCompName:{type:String,required:!0}},emits:["update:dynamicCompName"],setup(i){const s=c("AccountLogin"),l={AccountLogin:ne,EmailLogin:_e};function t(a){s.value=a}return(a,r)=>(_(),w("div",fe,[n("div",ge,[be,n("div",ve,[n("div",{onClick:r[0]||(r[0]=p=>t("AccountLogin")),class:I(["mr-10 cursor-pointer pb-4 text-1.1rem",e(s)==="AccountLogin"?"active font-bold b-b-solid b-b-primary b-b-2":"text-b"])}," 账号登录 ",2),n("div",{onClick:r[1]||(r[1]=p=>t("EmailLogin")),class:I(["cursor-pointer pb-4 text-1.1rem",e(s)==="EmailLogin"?"active font-bold b-b-solid b-b-primary b-b-2":"text-b"])}," 邮箱登录 ",2)]),(_(),z(G,null,[(_(),z(Z(l[e(s)])))],1024)),n("div",we,[n("div",{class:"text-b cursor-pointer",onClick:r[2]||(r[2]=p=>a.$emit("update:dynamicCompName","FindAccount"))}," 忘记密码？ "),n("div",{class:"text-primary cursor-pointer",onClick:r[3]||(r[3]=p=>a.$emit("update:dynamicCompName","Register"))}," 新用户账号注册 ")]),ye]),he]))}});const Ve=se(xe,[["__scopeId","data-v-8d879669"]]),$e=n("span",{class:"font-bold"},"注册",-1),Ce=n("div",{class:"text-b text-0.8rem text-end mb-4"},"注：注册后请尽快绑定邮箱，以防账号丢失。",-1),Re=R({__name:"AccountRegister",setup(i){const s=$({username:"",password:"",rePasswd:""}),l=c(!1),t=c(!1),a=c(!1),r=c(),p=$({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:J(l),trigger:"change"},{validator:J(l),trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:A(t),trigger:"change"},{validator:A(t),trigger:"blur"}],rePasswd:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:U(a,s),trigger:"change"},{validator:U(a,s),trigger:"blur"}]});function y(){B(r.value,async()=>{await ae(s,()=>{K({type:"success",message:"恭喜您，请返回登录页面进行登录！",grouping:!0})})})}return(f,u)=>{const v=S,g=N,h=F,b=L;return _(),w("div",null,[o(b,{ref_key:"formRef",ref:r,model:e(s),rules:e(p)},{default:d(()=>[o(g,{prop:"username"},{default:d(()=>[o(v,{maxlength:16,minlength:4,clearable:"",size:"large",modelValue:e(s).username,"onUpdate:modelValue":u[0]||(u[0]=m=>e(s).username=m),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),o(g,{prop:"password"},{default:d(()=>[o(v,{clearable:"",maxlength:16,minlength:8,size:"large",modelValue:e(s).password,"onUpdate:modelValue":u[1]||(u[1]=m=>e(s).password=m),placeholder:"设置密码：支持任何字符","show-password":""},null,8,["modelValue"])]),_:1}),o(g,{prop:"rePasswd"},{default:d(()=>[o(v,{clearable:"",maxlength:16,minlength:8,size:"large",modelValue:e(s).rePasswd,"onUpdate:modelValue":u[2]||(u[2]=m=>e(s).rePasswd=m),placeholder:"确认密码：两次密码保持一致","show-password":""},null,8,["modelValue"])]),_:1}),o(g,null,{default:d(()=>[o(h,{disabled:!e(l)||!e(t)||!e(a),onClick:y,size:"large",class:"w-100%",type:"primary"},{default:d(()=>[$e]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"]),Ce])}}}),ze={class:"f-c-b w-100%"},Ee={class:"w-70%"},Ae={class:"w-30% f-c-e"},Pe={key:0},ke={key:1},qe=n("span",{class:"font-bold"},"注册",-1),Ue=n("div",{class:"text-b text-0.8rem text-end mb-4"},"注：注册后可立即前往登录。",-1),Ne=R({__name:"EmailRegister",setup(i){const s=c(60);let l;const t=c(!1),a=c(!1),r=c(!1),p=c(!1),y=c(!1),f=c(),u=$({email:"",code:"",password:"",rePasswd:""}),v=$({email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{validator:k(a),trigger:"change"},{validator:k(a),trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:q(r),trigger:"change"},{validator:q(r),trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:A(p),trigger:"change"},{validator:A(p),trigger:"blur"}],rePasswd:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:U(y,u),trigger:"change"},{validator:U(y,u),trigger:"blur"}]});function g(){j(l,s,t,async b=>{await O(u.email,"register",()=>b())})}function h(){B(f.value,async()=>{await T(u,u.code,"register",()=>{K({type:"success",message:"恭喜您，请返回登录页面进行邮箱登录！",grouping:!0})})})}return(b,m)=>{const C=S,x=N,E=F,P=L;return _(),w("div",null,[o(P,{ref_key:"formRef",ref:f,model:e(u),rules:e(v)},{default:d(()=>[o(x,{prop:"email"},{default:d(()=>[o(C,{clearable:"",size:"large",modelValue:e(u).email,"onUpdate:modelValue":m[0]||(m[0]=V=>e(u).email=V),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),o(x,{prop:"code"},{default:d(()=>[n("div",ze,[n("div",Ee,[o(C,{maxlength:6,minlength:6,clearable:"",class:"w-100%",size:"large",modelValue:e(u).code,"onUpdate:modelValue":m[1]||(m[1]=V=>e(u).code=V),placeholder:"请输入验证码"},null,8,["modelValue"])]),n("div",Ae,[o(E,{disabled:e(t)||!e(a),size:"large",onClick:g},{default:d(()=>[e(s)<60&&e(s)>=0?(_(),w("span",Pe," 请等待 "+M(e(s))+"s ",1)):(_(),w("span",ke,"获取验证码"))]),_:1},8,["disabled"])])])]),_:1}),o(x,{prop:"password"},{default:d(()=>[o(C,{clearable:"",maxlength:16,minlength:8,size:"large",modelValue:e(u).password,"onUpdate:modelValue":m[2]||(m[2]=V=>e(u).password=V),placeholder:"设置密码：支持任何字符","show-password":""},null,8,["modelValue"])]),_:1}),o(x,{prop:"rePasswd"},{default:d(()=>[o(C,{clearable:"",maxlength:16,minlength:8,size:"large",modelValue:e(u).rePasswd,"onUpdate:modelValue":m[3]||(m[3]=V=>e(u).rePasswd=V),placeholder:"确认密码：两次密码保持一致","show-password":""},null,8,["modelValue"])]),_:1}),o(x,null,{default:d(()=>[o(E,{onClick:h,disabled:!e(a)||!e(r)||!e(p)||!e(y),size:"large",class:"w-100%",type:"primary"},{default:d(()=>[qe]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"]),Ue])}}}),Le={class:"register w-100% h-100% relative f-c-c"},Fe={class:"w-40%"},Se=n("div",{class:"mb-10 text-1.6rem"},"欢迎注册 BleuOn",-1),Be={class:"mb-10 f-c-s"},Ie=n("div",{class:"absolute text-center bottom-5 w-40% text-0.8rem text-b"},[X(" 登录即表示您已同意"),n("span",{class:"hover"},[n("u",null,"服务条款")])],-1),Ze=R({__name:"Register",props:{dynamicCompName:{type:String,required:!0}},emits:["update:dynamicCompName"],setup(i){const s=c("EmailRegister"),l={AccountRegister:Re,EmailRegister:Ne};return(t,a)=>(_(),w("div",Le,[n("div",Fe,[Se,n("div",Be,[n("div",{onClick:a[0]||(a[0]=r=>s.value="EmailRegister"),class:I(["mr-10 cursor-pointer pb-4 text-1.1rem",e(s)==="EmailRegister"?"active font-bold b-b-solid b-b-primary b-b-2":"text-b"])}," 邮箱注册 ",2),n("div",{onClick:a[1]||(a[1]=r=>s.value="AccountRegister"),class:I(["cursor-pointer pb-4 text-1.1rem",e(s)==="AccountRegister"?"active font-bold b-b-solid b-b-primary b-b-2":"text-b"])}," 账号注册 ",2)]),(_(),z(G,null,[(_(),z(Z(l[e(s)])))],1024)),n("div",{class:"text-primary cursor-pointer f-c-e",onClick:a[2]||(a[2]=r=>t.$emit("update:dynamicCompName","Login"))}," 已经有账号？ ")]),Ie]))}}),De={class:"f-c-b w-100%"},Me={class:"w-70%"},Ge={class:"w-30% f-c-e"},Ke={key:0},Oe={key:1},Te=n("span",{class:"font-bold"},"点击校验",-1),je=n("span",{class:"font-bold"},"点击下一步",-1),He=R({__name:"FindAccountVerifyCode",props:{dynamicCompName:{type:String,required:!0},email:{type:String}},emits:["update:dynamicCompName","update:email"],setup(i,{emit:s}){let l;const t=c(60),a=c(!1),r=c(!1),p=c(!1),y=c(),f=$({email:"",code:""}),u=$({email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{validator:k(r),trigger:"change"},{validator:k(r),trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:q(p),trigger:"change"},{validator:q(p),trigger:"blur"}]});function v(){j(l,t,a,async b=>{await O(f.email,"reset",()=>b())})}const g=c(!1);function h(){B(y.value,async()=>{await T(f,f.code,"reset",()=>{g.value=!0,s("update:email",f.email)})})}return(b,m)=>{const C=S,x=N,E=F,P=L;return _(),w("div",null,[o(P,{ref_key:"formRef",ref:y,model:e(f),rules:e(u)},{default:d(()=>[o(x,{prop:"email"},{default:d(()=>[o(C,{clearable:"",size:"large",modelValue:e(f).email,"onUpdate:modelValue":m[0]||(m[0]=V=>e(f).email=V),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),o(x,{prop:"code"},{default:d(()=>[n("div",De,[n("div",Me,[o(C,{maxlength:6,minlength:6,clearable:"",class:"w-100%",size:"large",modelValue:e(f).code,"onUpdate:modelValue":m[1]||(m[1]=V=>e(f).code=V),placeholder:"请输入验证码"},null,8,["modelValue"])]),n("div",Ge,[o(E,{disabled:e(a)||!e(r),size:"large",onClick:v},{default:d(()=>[e(t)<60&&e(t)>=0?(_(),w("span",Ke," 请等待 "+M(e(t))+"s ",1)):(_(),w("span",Oe,"获取验证码"))]),_:1},8,["disabled"])])])]),_:1}),o(x,null,{default:d(()=>[e(g)?(_(),z(E,{key:1,onClick:m[2]||(m[2]=V=>b.$emit("update:dynamicCompName","FindAccountRsetPassword")),disabled:!e(r)||!e(p),size:"large",class:"w-100%",type:"success"},{default:d(()=>[je]),_:1},8,["disabled"])):(_(),z(E,{key:0,onClick:h,disabled:!e(r)||!e(p),size:"large",class:"w-100%",type:"primary"},{default:d(()=>[Te]),_:1},8,["disabled"]))]),_:1})]),_:1},8,["model","rules"])])}}}),Je=n("span",{class:"font-bold"},"确定重置密码",-1),Qe=n("div",{class:"text-b text-0.8rem text-end mb-4"},"注：重置后可立即前往登录。",-1),We=R({__name:"FindAccountResetPassword",props:{email:{type:String}},setup(i){const s=i,l=c(),t=$({email:"",password:"",rePasswd:""}),a=c(!1),r=c(!1),p=$({password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:A(a),trigger:"change"},{validator:A(a),trigger:"blur"}],rePasswd:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:U(r,t),trigger:"change"},{validator:U(r,t),trigger:"blur"}]});te(()=>{t.email=s.email});function y(){B(l.value,async()=>{await re(t,()=>{K.success("密码重置成功，请返回登录！")})})}return(f,u)=>{const v=S,g=N,h=F,b=L;return _(),w("div",null,[o(b,{ref_key:"formRef",ref:l,model:e(t),rules:e(p)},{default:d(()=>[o(g,{prop:"email"},{default:d(()=>[o(v,{disabled:"",clearable:"",size:"large",modelValue:e(t).email,"onUpdate:modelValue":u[0]||(u[0]=m=>e(t).email=m)},null,8,["modelValue"])]),_:1}),o(g,{prop:"password"},{default:d(()=>[o(v,{clearable:"",maxlength:16,minlength:8,size:"large",modelValue:e(t).password,"onUpdate:modelValue":u[1]||(u[1]=m=>e(t).password=m),placeholder:"设置密码：支持任何字符","show-password":""},null,8,["modelValue"])]),_:1}),o(g,{prop:"rePasswd"},{default:d(()=>[o(v,{clearable:"",maxlength:16,minlength:8,size:"large",modelValue:e(t).rePasswd,"onUpdate:modelValue":u[2]||(u[2]=m=>e(t).rePasswd=m),placeholder:"确认密码：两次密码保持一致","show-password":""},null,8,["modelValue"])]),_:1}),o(g,null,{default:d(()=>[o(h,{onClick:y,disabled:!e(a)||!e(r),size:"large",class:"w-100%",type:"primary"},{default:d(()=>[Je]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"]),Qe])}}}),Xe={class:"find-account w-100% h-100% relative f-c-c"},Ye={class:"w-40%"},et=n("div",{class:"mb-10 text-1.6rem"},"找回您的密码",-1),tt=R({__name:"FindAccount",props:{dynamicCompName:{type:String,required:!0}},emits:["update:dynamicCompName"],setup(i){const s=c("FindAccountVerifyCode"),l={FindAccountRsetPassword:We,FindAccountVerifyCode:He},t=c("");return(a,r)=>(_(),w("div",Xe,[n("div",Ye,[et,(_(),z(G,null,[(_(),z(Z(l[e(s)]),{"dynamic-comp-name":e(s),"onUpdate:dynamicCompName":r[0]||(r[0]=p=>D(s)?s.value=p:null),email:e(t),"onUpdate:email":r[1]||(r[1]=p=>D(t)?t.value=p:null)},null,40,["dynamic-comp-name","email"]))],1024)),n("div",{class:"f-c-e text-primary cursor-pointer",onClick:r[2]||(r[2]=p=>a.$emit("update:dynamicCompName","Login"))}," 想起密码？返回登录 ")])]))}}),st={class:"entrance f-c-c h-100vh"},ot=n("div",{class:"w-30% h-100% bg-#f0f0f0"},null,-1),at={class:"w-70% h-100%"},ct=R({__name:"Entrance",setup(i){const s={Login:Ve,Register:Ze,FindAccount:tt},l=c("Login");return(t,a)=>(_(),w("div",st,[ot,n("div",at,[(_(),z(Z(s[e(l)]),{"dynamic-comp-name":e(l),"onUpdate:dynamicCompName":a[0]||(a[0]=r=>D(l)?l.value=r:null)},null,40,["dynamic-comp-name"]))])]))}});export{ct as default};
//# sourceMappingURL=Entrance-5fe2ab82.js.map

import{d as N,j as b,o as h,c as y,a as e,x as U,v as a,f as m,z as k,A as R,p as T,g as L,b as d,w as r,y as w,C as G,l as W,D as J,F as P,E as Q,h as X,G as B}from"./mainapp-b6e8cfa4.js";import{E as Y,f as Z,d as ee}from"./el-overlay-ca182831.js";import{E as I}from"./el-button-0338fa73.js";import{E as M,a as te,b as le}from"./el-form-item-c34b0799.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";import"./parse-1c471e4f.js";import{q as g,u as oe,a as ae,d as ie}from"./api-flowchart-d15db8f3.js";import{f as z}from"./form-validators-13740f61.js";import{M as ne,E as de}from"./MenuAvatar-e34cf1a8.js";import{E as re,a as ce}from"./el-select-6235e6e1.js";import"./vnode-6865ae2b.js";import"./api-user-1de515ff.js";const p=l=>(T("data-v-b2bfbd5b"),l=l(),L(),l),ue={class:"file relative"},me=p(()=>e("div",{class:"i-tabler-dots text-white"},null,-1)),pe=[me],fe=p(()=>e("div",{class:"i-tabler-eye mr-2"},null,-1)),_e=p(()=>e("div",{class:"i-tabler-edit mr-2"},null,-1)),ve=p(()=>e("div",{class:"i-tabler-share mr-2"},null,-1)),be=p(()=>e("div",{class:"i-tabler-send mr-2"},null,-1)),he=p(()=>e("div",{class:"i-tabler-download mr-2"},null,-1)),ye=p(()=>e("div",{class:"i-tabler-copy mr-2"},null,-1)),xe=p(()=>e("div",{class:"i-tabler-trash-x mr-2"},null,-1)),$e=["src"],we={key:1,class:"w-100% h-100% rd-2 cursor-pointer bg-white"},ge={class:"f-c-s flex-nowrap mt-4 w-100%"},ke=p(()=>e("div",{class:"mr-2 i-tabler-chart-bubble text-theme-primary"},null,-1)),Ne={class:"text-0.9rem text-ellipsis line-clamp-1"},Ce={class:"text-text-secondary text-0.8rem mt-2 f-c-s"},Fe=p(()=>e("div",{class:"i-tabler-clock-edit mr-1"},null,-1)),Ve={key:0,class:"text-text-secondary text-0.8rem mt-1 f-c-s"},Ee=p(()=>e("div",{class:"i-tabler-clock-edit mr-1"},null,-1)),De=N({__name:"File",props:{disabled:{type:Boolean,required:!0},index:{type:Number,required:!0},path:{type:String,required:!0},lastIndex:{type:Number,required:!0},fileImage:{type:String},fileName:{type:String,required:!0},modifyDate:{type:String,required:!0},createDate:{type:String}},emits:["update:lastIndex","publish","download","copy","delete","resetFileName","share"],setup(l,{emit:f}){const c=l,s=b(1);function _(){c.disabled||(s.value=1),s.value>0?s.value=0:s.value++,f("update:lastIndex",c.index)}return(i,t)=>(h(),y("div",ue,[e("div",{class:U(["options",l.disabled&&a(s)<=0?"block":"hidden"])},[e("div",{onClick:_,class:"options__icon f-c-c absolute top-2 right-2 cursor-pointer w-10 h-6 rd-2 bg-#383838cc"},pe)],2),e("div",{class:U(["options__panel select-none p-1 z-2 absolute top-10 right-2 w-80% bg-white rd-2",l.disabled&&a(s)<=0?"block":"hidden"])},[e("div",{class:"text-0.9rem f-c-s",onClick:t[0]||(t[0]=o=>i.$router.push(l.path))},[fe,m(" 预览 ")]),e("div",{class:"text-0.9rem f-c-s",onClick:t[1]||(t[1]=o=>i.$emit("resetFileName"))},[_e,m(" 重命名 ")]),e("div",{class:"text-0.9rem f-c-s",onClick:t[2]||(t[2]=o=>i.$emit("share"))},[ve,m(" 分享 ")]),e("div",{class:"text-0.9rem f-c-s",onClick:t[3]||(t[3]=o=>i.$emit("publish"))},[be,m(" 发布 ")]),e("div",{class:"text-0.9rem f-c-s",onClick:t[4]||(t[4]=o=>i.$emit("download"))},[he,m(" 下载 ")]),e("div",{class:"text-0.9rem f-c-s",onClick:t[5]||(t[5]=o=>i.$emit("copy"))},[ye,m(" 复制 ")]),e("div",{class:"text-0.9rem f-c-s",onClick:t[6]||(t[6]=o=>i.$emit("delete"))},[xe,m(" 删除 ")])],2),e("div",{class:"image h-50 rd-2",onClick:t[7]||(t[7]=o=>i.$router.push(l.path))},[l.fileImage?(h(),y("img",{key:0,class:"w-100% h-100% rd-2 object-fill cursor-pointer bg-white",src:l.fileImage},null,8,$e)):(h(),y("div",we))]),e("div",ge,[ke,e("div",Ne,k(l.fileName),1)]),e("div",Ce,[Fe,m(" 更新于 "+k(l.modifyDate),1)]),l.createDate?(h(),y("div",Ve,[Ee,m(" 创建于 "+k(l.createDate),1)])):R("",!0)]))}});const Ie=se(De,[["__scopeId","data-v-b2bfbd5b"]]),Se={class:"header f-c-b mt-5 mb-10"},qe={class:"w-120"},Ue=e("div",{class:"i-tabler-search"},null,-1),Be={class:"f-c-c"},ze={class:"mr-5"},Me=e("div",{class:"i-tabler-bell"},null,-1),Ae=N({__name:"Header",props:{value:{type:String,required:!0}},emits:["update:value","enterSearch"],setup(l,{emit:f}){const c=b(""),s=b("file");function _(t){f("update:value",t)}function i(){f("enterSearch",c.value)}return(t,o)=>{const C=re,F=ce,V=M,E=I;return h(),y("div",Se,[e("div",qe,[d(V,{modelValue:a(c),"onUpdate:modelValue":o[1]||(o[1]=x=>w(c)?c.value=x:null),onKeyup:G(i,["enter"]),onInput:_,placeholder:"搜索文件/文件夹"},{suffix:r(()=>[Ue]),prepend:r(()=>[d(F,{modelValue:a(s),"onUpdate:modelValue":o[0]||(o[0]=x=>w(s)?s.value=x:null),placeholder:"搜索的类型",style:{width:"115px"}},{default:r(()=>[d(C,{label:"文件",value:"file"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","onKeyup"])]),e("div",Be,[e("div",ze,[d(E,{text:"",bg:"",size:"small"},{icon:r(()=>[Me]),_:1})]),d(ne)])])}}}),Oe={class:"f-c-b"},je={class:"f-c-c"},He=e("div",{class:"i-tabler-filter"},null,-1),Ke=N({__name:"FilterFiles",props:{title:{type:String,required:!0}},setup(l){return(f,c)=>{const s=I,_=de;return h(),y("div",Oe,[e("div",null,k(l.title),1),e("div",je,[e("div",null,[d(_,{content:"筛选",placement:"bottom"},{default:r(()=>[d(s,{onClick:c[0]||(c[0]=()=>{}),size:"small"},{icon:r(()=>[He]),_:1})]),_:1})])])])}}}),Re={class:"myrecent h-100%"},Te=e("div",{class:"mt-5 text-text-secondary text-0.9rem"},"文件",-1),Le={class:"file-list mt-5 f-c-s flex-wrap flex-gap-5"},Ge={class:"dialog-footer"},We=e("div",{class:"i-tabler-check"},null,-1),Je=e("div",{class:"i-tabler-x"},null,-1),nt=N({__name:"Flowcharts",async setup(l){let f,c;const s=b({}),_=b(([f,c]=W(()=>g()),f=await f,c(),f)),i=b(-1),t=b(!1),o=b(!1),C=J({fileName:[{validator:z(o),trigger:"blur"},{validator:z(o),trigger:"change"}]});function F(){oe(s.value,()=>{t.value=!t.value})}function V(v){ee(v,"jpeg",()=>{B.success("下载成功！")},()=>{B.error("下载失败！")})}function E(v){v.fileName="复制_"+v.fileName,ae(v,async()=>{_.value=await g()})}function x(v){ie({id:v},async()=>{_.value=await g()})}const D=b("");async function A(v){_.value=await g({fileName:v})}return(v,u)=>{const O=M,j=te,H=le,S=I,K=Y;return h(),y("div",Re,[d(Ae,{value:a(D),"onUpdate:value":u[0]||(u[0]=n=>w(D)?D.value=n:null),onEnterSearch:A},null,8,["value"]),d(Ke,{title:"我的流程图"}),Te,e("div",Le,[(h(!0),y(P,null,Q(a(_),(n,q)=>(h(),X(Ie,{key:n.id,index:q,disabled:a(i)==q,"last-index":a(i),"onUpdate:lastIndex":u[1]||(u[1]=$=>w(i)?i.value=$:null),"file-name":n.fileName,"file-image":n.dataUri,"modify-date":a(Z)("MM-dd HH:mm:ss",new Date(n.modifyDate)),path:"/flowchart/"+n.id,onDownload:$=>V(n),onCopy:$=>E(n),onDelete:$=>x(n.id),onResetFileName:u[2]||(u[2]=$=>t.value=!a(t))},null,8,["index","disabled","last-index","file-name","file-image","modify-date","path","onDownload","onCopy","onDelete"]))),128))]),d(K,{modelValue:a(t),"onUpdate:modelValue":u[5]||(u[5]=n=>w(t)?t.value=n:null),title:"修改文件名称",width:"30%"},{footer:r(()=>[e("span",Ge,[d(S,{disabled:!a(o),type:"primary",onClick:F},{icon:r(()=>[We]),default:r(()=>[m(" 确定 ")]),_:1},8,["disabled"]),d(S,{onClick:u[4]||(u[4]=n=>t.value=!1)},{icon:r(()=>[Je]),default:r(()=>[m(" 取消 ")]),_:1})])]),default:r(()=>[d(H,{model:a(s),rules:a(C)},{default:r(()=>[d(j,{prop:"fileName"},{default:r(()=>[d(O,{modelValue:a(s).fileName,"onUpdate:modelValue":u[3]||(u[3]=n=>a(s).fileName=n),placeholder:"请输入文件名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});export{nt as default};
//# sourceMappingURL=Flowcharts-ce4eca0e.js.map

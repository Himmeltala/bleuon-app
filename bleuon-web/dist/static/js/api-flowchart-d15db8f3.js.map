{"version":3,"file":"api-flowchart-d15db8f3.js","sources":["../../../node_modules/.pnpm/qs@6.11.2/node_modules/qs/lib/index.js","../../../apps/mainapp/apis/api-flowchart.ts"],"sourcesContent":["'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n","/**\r\n * @description FlowChart API\r\n * @author 郑人滏 42020306\r\n * @since 2023/9/28\r\n * @link https://github.com/himmelbleu/bleuon-app\r\n */\r\nimport qs from \"qs\";\r\nimport request from \"./use-axios\";\r\n\r\n/**\r\n * 更新当前流程图\r\n *\r\n * @param json\r\n */\r\nexport function updateOne(data: FlowchartData, success?: (data: R) => void, error?: Function) {\r\n  request\r\n    .post<R>(\"/flowchart/update/one\", data)\r\n    .then(({ data }) => {\r\n      success && success(data);\r\n    })\r\n    .catch(err => {\r\n      error && error(err);\r\n    });\r\n}\r\n\r\n/**\r\n * 获取流程图\r\n */\r\nexport async function queryOne(params: { id: string }) {\r\n  const { data } = await request.get<R<FlowchartData>>(\"/flowchart/query/one\", { params });\r\n  return data.data;\r\n}\r\n\r\n/**\r\n * 获取流程图\r\n */\r\nexport async function exposeQueryOne(params: { id: string }, error?: Function) {\r\n  try {\r\n    const { data } = await request.get<R<FlowchartData>>(\"/expose/flowchart/query/one\", { params });\r\n    return data.data;\r\n  } catch (err) {\r\n    error && error(err);\r\n  }\r\n}\r\n\r\n/**\r\n * 获取用户所有的流程图\r\n */\r\nexport async function queryAll(params?: {\r\n  collate?: \"asc\" | \"desc\";\r\n  cols?: string[];\r\n  fileName?: string;\r\n}) {\r\n  const { data } = await request.get<R<FlowchartData[]>>(\"/flowchart/query/all\", {\r\n    params,\r\n    paramsSerializer: params => {\r\n      return qs.stringify(params, { arrayFormat: \"repeat\" });\r\n    }\r\n  });\r\n  return data.data;\r\n}\r\n\r\n/**\r\n * 创建一个流程图\r\n */\r\nexport function createOne(success: (data: FlowchartData) => void, error?: Function) {\r\n  request\r\n    .post<R<FlowchartData>>(\"/flowchart/create/one\")\r\n    .then(({ data }) => {\r\n      success && success(data.data);\r\n    })\r\n    .catch(err => {\r\n      error && error(err);\r\n    });\r\n}\r\n\r\n/**\r\n * 复制一个流程图\r\n */\r\nexport function copyOne(\r\n  data: FlowchartData,\r\n  success: (data: FlowchartData) => void,\r\n  error?: Function\r\n) {\r\n  request\r\n    .post<R<FlowchartData>>(\"/flowchart/copy/one\", data)\r\n    .then(({ data }) => {\r\n      success && success(data.data);\r\n    })\r\n    .catch(err => {\r\n      error && error(err);\r\n    });\r\n}\r\n\r\n/**\r\n * 删除一个流程图\r\n *\r\n * @param params\r\n */\r\nexport function deleteOne(params: { id?: string }, success: Function, error?: Function) {\r\n  request\r\n    .delete<R<void>>(\"/flowchart/delete/one\", {\r\n      params\r\n    })\r\n    .then(() => {\r\n      success && success();\r\n    })\r\n    .catch(err => {\r\n      error && error(err);\r\n    });\r\n}\r\n"],"names":["stringify","require$$0","parse","require$$1","formats","require$$2","lib","updateOne","data","success","error","request","err","queryOne","params","exposeQueryOne","queryAll","qs","createOne","copyOne","deleteOne"],"mappings":"0DAEA,IAAIA,EAAYC,EACZC,EAAQC,EACRC,EAAUC,EAEdC,EAAiB,CACb,QAASF,EACT,MAAOF,EACP,UAAWF,CACf,eCIgB,SAAAO,EAAUC,EAAqBC,EAA6BC,EAAkB,CAEzFC,EAAA,KAAQ,wBAAyBH,CAAI,EACrC,KAAK,CAAC,CAAE,KAAAA,KAAW,CAClBC,GAAWA,EAAQD,CAAI,CAAA,CACxB,EACA,MAAaI,GAAA,CACZF,GAASA,EAAME,CAAG,CAAA,CACnB,CACL,CAKA,eAAsBC,EAASC,EAAwB,CAC/C,KAAA,CAAE,KAAAN,CAAS,EAAA,MAAMG,EAAQ,IAAsB,uBAAwB,CAAE,OAAAG,CAAA,CAAQ,EACvF,OAAON,EAAK,IACd,CAKsB,eAAAO,EAAeD,EAAwBJ,EAAkB,CACzE,GAAA,CACI,KAAA,CAAE,KAAAF,CAAS,EAAA,MAAMG,EAAQ,IAAsB,8BAA+B,CAAE,OAAAG,CAAA,CAAQ,EAC9F,OAAON,EAAK,WACLI,EAAK,CACZF,GAASA,EAAME,CAAG,CACpB,CACF,CAKA,eAAsBI,EAASF,EAI5B,CACD,KAAM,CAAE,KAAAN,CAAK,EAAI,MAAMG,EAAQ,IAAwB,uBAAwB,CAC7E,OAAAG,EACA,iBAAkBA,GACTG,EAAG,UAAUH,EAAQ,CAAE,YAAa,SAAU,CACvD,CACD,EACD,OAAON,EAAK,IACd,CAKgB,SAAAU,EAAUT,EAAwCC,EAAkB,CAClFC,EACG,KAAuB,uBAAuB,EAC9C,KAAK,CAAC,CAAE,KAAAH,KAAW,CACPC,GAAAA,EAAQD,EAAK,IAAI,CAAA,CAC7B,EACA,MAAaI,GAAA,CACZF,GAASA,EAAME,CAAG,CAAA,CACnB,CACL,CAKgB,SAAAO,EACdX,EACAC,EACAC,EACA,CAEGC,EAAA,KAAuB,sBAAuBH,CAAI,EAClD,KAAK,CAAC,CAAE,KAAAA,KAAW,CACPC,GAAAA,EAAQD,EAAK,IAAI,CAAA,CAC7B,EACA,MAAaI,GAAA,CACZF,GAASA,EAAME,CAAG,CAAA,CACnB,CACL,CAOgB,SAAAQ,EAAUN,EAAyBL,EAAmBC,EAAkB,CACtFC,EACG,OAAgB,wBAAyB,CACxC,OAAAG,CAAA,CACD,EACA,KAAK,IAAM,CACVL,GAAWA,EAAQ,CAAA,CACpB,EACA,MAAaG,GAAA,CACZF,GAASA,EAAME,CAAG,CAAA,CACnB,CACL","x_google_ignoreList":[0]}
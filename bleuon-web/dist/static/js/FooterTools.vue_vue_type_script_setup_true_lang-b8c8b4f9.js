import{u as kn,t as ve,i as Rt,b as Xe,c as ce,$ as Ee,p as oo,e as je,V as R,h as ut,j as Fa,P as X,k as Vn,l as Le,B as St,m as lo,r as ft,n as Fe,o as Nt,q as wn,s as At,v as dn,w as co,x as Ct,y as Li,z as er,A as mt,C as tr,D as Ur,F as Xn,G as nr,H as ir,I as rr,R as he,J as Ar,K as Yt,L as uo,M as Ha,N as ze,O as Mn,Q as Ja,S as ar,T as xt,U as ht,W as go,X as Pt,Y as Dn,Z as xn,_ as tn,a0 as ho,a1 as cn,a2 as Et,a3 as Ka,a4 as sr,a5 as fo,a6 as mo,a7 as $a,a8 as Ai,a9 as Vr,aa as Qa,ab as wt,ac as qa,ad as po,ae as ti,af as Bn,ag as Io,ah as $e,ai as vo,aj as Ao,ak as Co,al as ni,am as bo,an as yo,ao as es,ap as wo,aq as Mo,ar as No,as as ko,E as Do,f as xo,at as To}from"./el-overlay-ca182831.js";import{ae as Xr,af as So,ag as ts,ah as Fr,ai as Qe,J as Ve,L as Ne,aj as zo,ak as Cr,d as Se,al as br,am as It,O as Ue,N as dt,j as ee,W as Q,P as Ye,Q as tt,an as Lo,ao as Oo,v as g,ap as Po,k as Ci,o as _,h as be,w as te,x as E,S as _t,aq as ct,Y as De,H as En,A as Ie,c as ne,a as B,a3 as gn,z as Me,ar as ns,_ as nt,a1 as _e,as as Fn,at as Bo,m as zn,F as Ze,E as Je,f as qe,aa as He,b as V,au as is,av as yr,a4 as Rn,aw as Zo,ax as jo,s as Hr,ay as Jr,T as Ln,a5 as gi,az as Kr,aA as Go,D as Di,C as pt,ab as zt,a0 as Eo,ac as wr,aB as rs,a7 as as,aC as Tn,aD as Hn,Z as or,$ as hi,aE as Jn,a6 as Tt,X as Ro,aF as Yo,a2 as _o,aG as Wo,B as Mr,p as Uo,g as Vo,aH as Xo,y as $r,n as Fo,q as Ho,G as pn,aI as Jo}from"./mainapp-b6e8cfa4.js";import{i as Ko,c as $o,E as Bt,a as Qo,b as qo}from"./el-form-item-c34b0799.js";import{a as Nr,b as kr,c as ss,d as el,E as nn}from"./el-button-0338fa73.js";import{E as $n,T as tl,M as nl}from"./MenuAvatar-e34cf1a8.js";import{i as il,d as os,b as rl,C as bi,E as al,a as sl}from"./el-select-6235e6e1.js";import{d as Sn,U as qt,i as en,C as Dr,I as fi,t as ol}from"./api-user-1de515ff.js";import{_ as ll}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as cl}from"./bleuon-icon-ae86a734.js";import{c as Wt,g as Ut}from"./parse-1c471e4f.js";import{u as Qr,a as ul}from"./api-flowchart-d15db8f3.js";const xr=e=>{let t,n;return e.type==="touchend"?(n=e.changedTouches[0].clientY,t=e.changedTouches[0].clientX):e.type.startsWith("touch")?(n=e.touches[0].clientY,t=e.touches[0].clientX):(n=e.clientY,t=e.clientX),{clientX:t,clientY:n}};var qr=Xr?Xr.isConcatSpreadable:void 0;function dl(e){return So(e)||Ko(e)||!!(qr&&e&&e[qr])}function ls(e,t,n,i,r){var a=-1,s=e.length;for(n||(n=dl),r||(r=[]);++a<s;){var o=e[a];t>0&&n(o)?t>1?ls(o,t-1,n,i,r):$o(r,o):i||(r[r.length]=o)}return r}function gl(e){var t=e==null?0:e.length;return t?ls(e,1):[]}const hl=["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"],un=e=>!e&&e!==0?[]:Array.isArray(e)?e:[e];var cs={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Wt,function(){var n=1e3,i=6e4,r=36e5,a="millisecond",s="second",o="minute",l="hour",c="day",u="week",d="month",f="quarter",h="year",m="date",p="Invalid Date",A=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var k=["th","st","nd","rd"],O=M%100;return"["+M+(k[(O-20)%10]||k[O]||k[0])+"]"}},w=function(M,k,O){var K=String(M);return!K||K.length>=k?M:""+Array(k+1-K.length).join(O)+M},S={s:w,z:function(M){var k=-M.utcOffset(),O=Math.abs(k),K=Math.floor(O/60),T=O%60;return(k<=0?"+":"-")+w(K,2,"0")+":"+w(T,2,"0")},m:function M(k,O){if(k.date()<O.date())return-M(O,k);var K=12*(O.year()-k.year())+(O.month()-k.month()),T=k.clone().add(K,d),P=O-T<0,I=k.clone().add(K+(P?-1:1),d);return+(-(K+(O-T)/(P?T-I:I-T))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:d,y:h,w:u,d:c,D:m,h:l,m:o,s,ms:a,Q:f}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},L="en",z={};z[L]=v;var Z=function(M){return M instanceof q},Y=function M(k,O,K){var T;if(!k)return L;if(typeof k=="string"){var P=k.toLowerCase();z[P]&&(T=P),O&&(z[P]=O,T=P);var I=k.split("-");if(!T&&I.length>1)return M(I[0])}else{var N=k.name;z[N]=k,T=N}return!K&&T&&(L=T),T||!K&&L},W=function(M,k){if(Z(M))return M.clone();var O=typeof k=="object"?k:{};return O.date=M,O.args=arguments,new q(O)},H=S;H.l=Y,H.i=Z,H.w=function(M,k){return W(M,{locale:k.$L,utc:k.$u,x:k.$x,$offset:k.$offset})};var q=function(){function M(O){this.$L=Y(O.locale,null,!0),this.parse(O)}var k=M.prototype;return k.parse=function(O){this.$d=function(K){var T=K.date,P=K.utc;if(T===null)return new Date(NaN);if(H.u(T))return new Date;if(T instanceof Date)return new Date(T);if(typeof T=="string"&&!/Z$/i.test(T)){var I=T.match(A);if(I){var N=I[2]-1||0,D=(I[7]||"0").substring(0,3);return P?new Date(Date.UTC(I[1],N,I[3]||1,I[4]||0,I[5]||0,I[6]||0,D)):new Date(I[1],N,I[3]||1,I[4]||0,I[5]||0,I[6]||0,D)}}return new Date(T)}(O),this.$x=O.x||{},this.init()},k.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},k.$utils=function(){return H},k.isValid=function(){return this.$d.toString()!==p},k.isSame=function(O,K){var T=W(O);return this.startOf(K)<=T&&T<=this.endOf(K)},k.isAfter=function(O,K){return W(O)<this.startOf(K)},k.isBefore=function(O,K){return this.endOf(K)<W(O)},k.$g=function(O,K,T){return H.u(O)?this[K]:this.set(T,O)},k.unix=function(){return Math.floor(this.valueOf()/1e3)},k.valueOf=function(){return this.$d.getTime()},k.startOf=function(O,K){var T=this,P=!!H.u(K)||K,I=H.p(O),N=function(Oe,ye){var ke=H.w(T.$u?Date.UTC(T.$y,ye,Oe):new Date(T.$y,ye,Oe),T);return P?ke:ke.endOf(c)},D=function(Oe,ye){return H.w(T.toDate()[Oe].apply(T.toDate("s"),(P?[0,0,0,0]:[23,59,59,999]).slice(ye)),T)},y=this.$W,x=this.$M,j=this.$D,U="set"+(this.$u?"UTC":"");switch(I){case h:return P?N(1,0):N(31,11);case d:return P?N(1,x):N(0,x+1);case u:var Ce=this.$locale().weekStart||0,fe=(y<Ce?y+7:y)-Ce;return N(P?j-fe:j+(6-fe),x);case c:case m:return D(U+"Hours",0);case l:return D(U+"Minutes",1);case o:return D(U+"Seconds",2);case s:return D(U+"Milliseconds",3);default:return this.clone()}},k.endOf=function(O){return this.startOf(O,!1)},k.$set=function(O,K){var T,P=H.p(O),I="set"+(this.$u?"UTC":""),N=(T={},T[c]=I+"Date",T[m]=I+"Date",T[d]=I+"Month",T[h]=I+"FullYear",T[l]=I+"Hours",T[o]=I+"Minutes",T[s]=I+"Seconds",T[a]=I+"Milliseconds",T)[P],D=P===c?this.$D+(K-this.$W):K;if(P===d||P===h){var y=this.clone().set(m,1);y.$d[N](D),y.init(),this.$d=y.set(m,Math.min(this.$D,y.daysInMonth())).$d}else N&&this.$d[N](D);return this.init(),this},k.set=function(O,K){return this.clone().$set(O,K)},k.get=function(O){return this[H.p(O)]()},k.add=function(O,K){var T,P=this;O=Number(O);var I=H.p(K),N=function(x){var j=W(P);return H.w(j.date(j.date()+Math.round(x*O)),P)};if(I===d)return this.set(d,this.$M+O);if(I===h)return this.set(h,this.$y+O);if(I===c)return N(1);if(I===u)return N(7);var D=(T={},T[o]=i,T[l]=r,T[s]=n,T)[I]||1,y=this.$d.getTime()+O*D;return H.w(y,this)},k.subtract=function(O,K){return this.add(-1*O,K)},k.format=function(O){var K=this,T=this.$locale();if(!this.isValid())return T.invalidDate||p;var P=O||"YYYY-MM-DDTHH:mm:ssZ",I=H.z(this),N=this.$H,D=this.$m,y=this.$M,x=T.weekdays,j=T.months,U=function(ye,ke,xe,F){return ye&&(ye[ke]||ye(K,P))||xe[ke].slice(0,F)},Ce=function(ye){return H.s(N%12||12,ye,"0")},fe=T.meridiem||function(ye,ke,xe){var F=ye<12?"AM":"PM";return xe?F.toLowerCase():F},Oe={YY:String(this.$y).slice(-2),YYYY:H.s(this.$y,4,"0"),M:y+1,MM:H.s(y+1,2,"0"),MMM:U(T.monthsShort,y,j,3),MMMM:U(j,y),D:this.$D,DD:H.s(this.$D,2,"0"),d:String(this.$W),dd:U(T.weekdaysMin,this.$W,x,2),ddd:U(T.weekdaysShort,this.$W,x,3),dddd:x[this.$W],H:String(N),HH:H.s(N,2,"0"),h:Ce(1),hh:Ce(2),a:fe(N,D,!0),A:fe(N,D,!1),m:String(D),mm:H.s(D,2,"0"),s:String(this.$s),ss:H.s(this.$s,2,"0"),SSS:H.s(this.$ms,3,"0"),Z:I};return P.replace(b,function(ye,ke){return ke||Oe[ye]||I.replace(":","")})},k.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},k.diff=function(O,K,T){var P,I=H.p(K),N=W(O),D=(N.utcOffset()-this.utcOffset())*i,y=this-N,x=H.m(this,N);return x=(P={},P[h]=x/12,P[d]=x,P[f]=x/3,P[u]=(y-D)/6048e5,P[c]=(y-D)/864e5,P[l]=y/r,P[o]=y/i,P[s]=y/n,P)[I]||y,T?x:H.a(x)},k.daysInMonth=function(){return this.endOf(d).$D},k.$locale=function(){return z[this.$L]},k.locale=function(O,K){if(!O)return this.$L;var T=this.clone(),P=Y(O,K,!0);return P&&(T.$L=P),T},k.clone=function(){return H.w(this.$d,this)},k.toDate=function(){return new Date(this.valueOf())},k.toJSON=function(){return this.isValid()?this.toISOString():null},k.toISOString=function(){return this.$d.toISOString()},k.toString=function(){return this.$d.toUTCString()},M}(),oe=q.prototype;return W.prototype=oe,[["$ms",a],["$s",s],["$m",o],["$H",l],["$W",c],["$M",d],["$y",h],["$D",m]].forEach(function(M){oe[M[1]]=function(k){return this.$g(k,M[0],M[1])}}),W.extend=function(M,k){return M.$i||(M(k,q,W),M.$i=!0),W},W.locale=Y,W.isDayjs=Z,W.unix=function(M){return W(1e3*M)},W.en=z[L],W.Ls=z,W.p={},W})})(cs);var fl=cs.exports;const le=Ut(fl);var us={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Wt,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,a=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,o={},l=function(p){return(p=+p)+(p>68?1900:2e3)},c=function(p){return function(A){this[p]=+A}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(A){if(!A||A==="Z")return 0;var b=A.match(/([+-]|\d\d)/g),v=60*b[1]+(+b[2]||0);return v===0?0:b[0]==="+"?-v:v}(p)}],d=function(p){var A=o[p];return A&&(A.indexOf?A:A.s.concat(A.f))},f=function(p,A){var b,v=o.meridiem;if(v){for(var w=1;w<=24;w+=1)if(p.indexOf(v(w,0,A))>-1){b=w>12;break}}else b=p===(A?"pm":"PM");return b},h={A:[s,function(p){this.afternoon=f(p,!1)}],a:[s,function(p){this.afternoon=f(p,!0)}],S:[/\d/,function(p){this.milliseconds=100*+p}],SS:[r,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[a,c("seconds")],ss:[a,c("seconds")],m:[a,c("minutes")],mm:[a,c("minutes")],H:[a,c("hours")],h:[a,c("hours")],HH:[a,c("hours")],hh:[a,c("hours")],D:[a,c("day")],DD:[r,c("day")],Do:[s,function(p){var A=o.ordinal,b=p.match(/\d+/);if(this.day=b[0],A)for(var v=1;v<=31;v+=1)A(v).replace(/\[|\]/g,"")===p&&(this.day=v)}],M:[a,c("month")],MM:[r,c("month")],MMM:[s,function(p){var A=d("months"),b=(d("monthsShort")||A.map(function(v){return v.slice(0,3)})).indexOf(p)+1;if(b<1)throw new Error;this.month=b%12||b}],MMMM:[s,function(p){var A=d("months").indexOf(p)+1;if(A<1)throw new Error;this.month=A%12||A}],Y:[/[+-]?\d+/,c("year")],YY:[r,function(p){this.year=l(p)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function m(p){var A,b;A=p,b=o&&o.formats;for(var v=(p=A.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(W,H,q){var oe=q&&q.toUpperCase();return H||b[q]||n[q]||b[oe].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(M,k,O){return k||O.slice(1)})})).match(i),w=v.length,S=0;S<w;S+=1){var L=v[S],z=h[L],Z=z&&z[0],Y=z&&z[1];v[S]=Y?{regex:Z,parser:Y}:L.replace(/^\[|\]$/g,"")}return function(W){for(var H={},q=0,oe=0;q<w;q+=1){var M=v[q];if(typeof M=="string")oe+=M.length;else{var k=M.regex,O=M.parser,K=W.slice(oe),T=k.exec(K)[0];O.call(H,T),W=W.replace(T,"")}}return function(P){var I=P.afternoon;if(I!==void 0){var N=P.hours;I?N<12&&(P.hours+=12):N===12&&(P.hours=0),delete P.afternoon}}(H),H}}return function(p,A,b){b.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(l=p.parseTwoDigitYear);var v=A.prototype,w=v.parse;v.parse=function(S){var L=S.date,z=S.utc,Z=S.args;this.$u=z;var Y=Z[1];if(typeof Y=="string"){var W=Z[2]===!0,H=Z[3]===!0,q=W||H,oe=Z[2];H&&(oe=Z[2]),o=this.$locale(),!W&&oe&&(o=b.Ls[oe]),this.$d=function(K,T,P){try{if(["x","X"].indexOf(T)>-1)return new Date((T==="X"?1e3:1)*K);var I=m(T)(K),N=I.year,D=I.month,y=I.day,x=I.hours,j=I.minutes,U=I.seconds,Ce=I.milliseconds,fe=I.zone,Oe=new Date,ye=y||(N||D?1:Oe.getDate()),ke=N||Oe.getFullYear(),xe=0;N&&!D||(xe=D>0?D-1:Oe.getMonth());var F=x||0,$=j||0,se=U||0,vt=Ce||0;return fe?new Date(Date.UTC(ke,xe,ye,F,$,se,vt+60*fe.offset*1e3)):P?new Date(Date.UTC(ke,xe,ye,F,$,se,vt)):new Date(ke,xe,ye,F,$,se,vt)}catch{return new Date("")}}(L,Y,z),this.init(),oe&&oe!==!0&&(this.$L=this.locale(oe).$L),q&&L!=this.format(Y)&&(this.$d=new Date("")),o={}}else if(Y instanceof Array)for(var M=Y.length,k=1;k<=M;k+=1){Z[1]=Y[k-1];var O=b.apply(this,Z);if(O.isValid()){this.$d=O.$d,this.$L=O.$L,this.init();break}k===M&&(this.$d=new Date(""))}else w.call(this,S)}}})})(us);var ml=us.exports;const pl=Ut(ml),ea=["hours","minutes","seconds"],ta="HH:mm:ss",bn="YYYY-MM-DD",Il={date:bn,dates:bn,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${bn} ${ta}`,monthrange:"YYYY-MM",daterange:bn,datetimerange:`${bn} ${ta}`},Oi=(e,t)=>[e>0?e-1:void 0,e,e<t?e+1:void 0],ds=e=>Array.from(Array.from({length:e}).keys()),gs=e=>e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),hs=e=>e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),na=function(e,t){const n=Fr(e),i=Fr(t);return n&&i?e.getTime()===t.getTime():!n&&!i?e===t:!1},ia=function(e,t){const n=Qe(e),i=Qe(t);return n&&i?e.length!==t.length?!1:e.every((r,a)=>na(r,t[a])):!n&&!i?na(e,t):!1},ra=function(e,t,n){const i=ts(t)||t==="x"?le(e).locale(n):le(e,t).locale(n);return i.isValid()?i:void 0},aa=function(e,t,n){return ts(t)?e:t==="x"?+e:le(e).locale(n).format(t)},Pi=(e,t)=>{var n;const i=[],r=t==null?void 0:t();for(let a=0;a<e;a++)i.push((n=r==null?void 0:r.includes(a))!=null?n:!1);return i},fs=Ve({disabledHours:{type:Ne(Function)},disabledMinutes:{type:Ne(Function)},disabledSeconds:{type:Ne(Function)}}),vl=Ve({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),ms=Ve({id:{type:Ne([Array,String])},name:{type:Ne([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:Ne([String,Object]),default:zo},editable:{type:Boolean,default:!0},prefixIcon:{type:Ne([String,Object]),default:""},size:Cr,readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},popperOptions:{type:Ne(Object),default:()=>({})},modelValue:{type:Ne([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:Ne([Date,Array])},defaultTime:{type:Ne([Date,Array])},isRange:{type:Boolean,default:!1},...fs,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:{type:Boolean,default:!1},label:{type:String,default:void 0},tabindex:{type:Ne([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean}),Al=["id","name","placeholder","value","disabled","readonly"],Cl=["id","name","placeholder","value","disabled","readonly"],bl=Se({name:"Picker"}),yl=Se({...bl,props:ms,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change","visible-change","keydown"],setup(e,{expose:t,emit:n}){const i=e,r=br(),{lang:a}=It(),s=Ue("date"),o=Ue("input"),l=Ue("range"),{form:c,formItem:u}=Nr(),d=dt("ElPopperOptions",{}),f=ee(),h=ee(),m=ee(!1),p=ee(!1),A=ee(null);let b=!1,v=!1;const w=Q(()=>[s.b("editor"),s.bm("editor",i.type),o.e("wrapper"),s.is("disabled",y.value),s.is("active",m.value),l.b("editor"),Xt?l.bm("editor",Xt.value):"",r.class]),S=Q(()=>[o.e("icon"),l.e("close-icon"),ye.value?"":l.e("close-icon--hidden")]);Ye(m,C=>{C?tt(()=>{C&&(A.value=i.modelValue)}):(pe.value=null,tt(()=>{L(i.modelValue)}))});const L=(C,ie)=>{(ie||!ia(C,A.value))&&(n("change",C),i.validateEvent&&(u==null||u.validate("change").catch(ge=>Sn())))},z=C=>{if(!ia(i.modelValue,C)){let ie;Qe(C)?ie=C.map(ge=>aa(ge,i.valueFormat,a.value)):C&&(ie=aa(C,i.valueFormat,a.value)),n("update:modelValue",C&&ie,a.value)}},Z=C=>{n("keydown",C)},Y=Q(()=>{if(h.value){const C=et.value?h.value:h.value.$el;return Array.from(C.querySelectorAll("input"))}return[]}),W=(C,ie,ge)=>{const Pe=Y.value;Pe.length&&(!ge||ge==="min"?(Pe[0].setSelectionRange(C,ie),Pe[0].focus()):ge==="max"&&(Pe[1].setSelectionRange(C,ie),Pe[1].focus()))},H=()=>{P(!0,!0),tt(()=>{v=!1})},q=(C="",ie=!1)=>{ie||(v=!0),m.value=ie;let ge;Qe(C)?ge=C.map(Pe=>Pe.toDate()):ge=C&&C.toDate(),pe.value=null,z(ge)},oe=()=>{p.value=!0},M=()=>{n("visible-change",!0)},k=C=>{(C==null?void 0:C.key)===_e.esc&&P(!0,!0)},O=()=>{p.value=!1,m.value=!1,v=!1,n("visible-change",!1)},K=()=>{m.value=!0},T=()=>{m.value=!1},P=(C=!0,ie=!1)=>{v=ie;const[ge,Pe]=g(Y);let Mt=ge;!C&&et.value&&(Mt=Pe),Mt&&Mt.focus()},I=C=>{i.readonly||y.value||m.value||v||(m.value=!0,n("focus",C))};let N;const D=C=>{const ie=async()=>{setTimeout(()=>{var ge;N===ie&&(!((ge=f.value)!=null&&ge.isFocusInsideContent()&&!b)&&Y.value.filter(Pe=>Pe.contains(document.activeElement)).length===0&&(an(),m.value=!1,n("blur",C),i.validateEvent&&(u==null||u.validate("blur").catch(Pe=>Sn()))),b=!1)},0)};N=ie,ie()},y=Q(()=>i.disabled||(c==null?void 0:c.disabled)),x=Q(()=>{let C;if(xe.value?G.value.getDefaultValue&&(C=G.value.getDefaultValue()):Qe(i.modelValue)?C=i.modelValue.map(ie=>ra(ie,i.valueFormat,a.value)):C=ra(i.modelValue,i.valueFormat,a.value),G.value.getRangeAvailableTime){const ie=G.value.getRangeAvailableTime(C);il(ie,C)||(C=ie,z(Qe(C)?C.map(ge=>ge.toDate()):C.toDate()))}return Qe(C)&&C.some(ie=>!ie)&&(C=[]),C}),j=Q(()=>{if(!G.value.panelReady)return"";const C=Ht(x.value);return Qe(pe.value)?[pe.value[0]||C&&C[0]||"",pe.value[1]||C&&C[1]||""]:pe.value!==null?pe.value:!Ce.value&&xe.value||!m.value&&xe.value?"":C?fe.value?C.join(", "):C:""}),U=Q(()=>i.type.includes("time")),Ce=Q(()=>i.type.startsWith("time")),fe=Q(()=>i.type==="dates"),Oe=Q(()=>i.prefixIcon||(U.value?Lo:Oo)),ye=ee(!1),ke=C=>{i.readonly||y.value||ye.value&&(C.stopPropagation(),H(),z(null),L(null,!0),ye.value=!1,m.value=!1,G.value.handleClear&&G.value.handleClear())},xe=Q(()=>{const{modelValue:C}=i;return!C||Qe(C)&&!C.filter(Boolean).length}),F=async C=>{var ie;i.readonly||y.value||(((ie=C.target)==null?void 0:ie.tagName)!=="INPUT"||Y.value.includes(document.activeElement))&&(m.value=!0)},$=()=>{i.readonly||y.value||!xe.value&&i.clearable&&(ye.value=!0)},se=()=>{ye.value=!1},vt=C=>{var ie;i.readonly||y.value||(((ie=C.touches[0].target)==null?void 0:ie.tagName)!=="INPUT"||Y.value.includes(document.activeElement))&&(m.value=!0)},et=Q(()=>i.type.includes("range")),Xt=kr(),mn=Q(()=>{var C,ie;return(ie=(C=g(f))==null?void 0:C.popperRef)==null?void 0:ie.contentRef}),gt=Q(()=>{var C;return g(et)?g(h):(C=g(h))==null?void 0:C.$el});Po(gt,C=>{const ie=g(mn),ge=g(gt);ie&&(C.target===ie||C.composedPath().includes(ie))||C.target===ge||C.composedPath().includes(ge)||(m.value=!1)});const pe=ee(null),an=()=>{if(pe.value){const C=Ft(j.value);C&&jt(C)&&(z(Qe(C)?C.map(ie=>ie.toDate()):C.toDate()),pe.value=null)}pe.value===""&&(z(null),L(null),pe.value=null)},Ft=C=>C?G.value.parseUserInput(C):null,Ht=C=>C?G.value.formatToString(C):null,jt=C=>G.value.isValidValue(C),sn=async C=>{if(i.readonly||y.value)return;const{code:ie}=C;if(Z(C),ie===_e.esc){m.value===!0&&(m.value=!1,C.preventDefault(),C.stopPropagation());return}if(ie===_e.down&&(G.value.handleFocusPicker&&(C.preventDefault(),C.stopPropagation()),m.value===!1&&(m.value=!0,await tt()),G.value.handleFocusPicker)){G.value.handleFocusPicker();return}if(ie===_e.tab){b=!0;return}if(ie===_e.enter||ie===_e.numpadEnter){(pe.value===null||pe.value===""||jt(Ft(j.value)))&&(an(),m.value=!1),C.stopPropagation();return}if(pe.value){C.stopPropagation();return}G.value.handleKeydownInput&&G.value.handleKeydownInput(C)},Jt=C=>{pe.value=C,m.value||(m.value=!0)},Kt=C=>{const ie=C.target;pe.value?pe.value=[ie.value,pe.value[1]]:pe.value=[ie.value,null]},On=C=>{const ie=C.target;pe.value?pe.value=[pe.value[0],ie.value]:pe.value=[null,ie.value]},on=()=>{var C;const ie=pe.value,ge=Ft(ie&&ie[0]),Pe=g(x);if(ge&&ge.isValid()){pe.value=[Ht(ge),((C=j.value)==null?void 0:C[1])||null];const Mt=[ge,Pe&&(Pe[1]||null)];jt(Mt)&&(z(Mt),pe.value=null)}},$t=()=>{var C;const ie=g(pe),ge=Ft(ie&&ie[1]),Pe=g(x);if(ge&&ge.isValid()){pe.value=[((C=g(j))==null?void 0:C[0])||null,Ht(ge)];const Mt=[Pe&&Pe[0],ge];jt(Mt)&&(z(Mt),pe.value=null)}},G=ee({}),re=C=>{G.value[C[0]]=C[1],G.value.panelReady=!0},J=C=>{n("calendar-change",C)},ae=(C,ie,ge)=>{n("panel-change",C,ie,ge)};return Ci("EP_PICKER_BASE",{props:i}),t({focus:P,handleFocusInput:I,handleBlurInput:D,handleOpen:K,handleClose:T,onPick:q}),(C,ie)=>(_(),be(g($n),ns({ref_key:"refPopper",ref:f,visible:m.value,effect:"light",pure:"",trigger:"click"},C.$attrs,{role:"dialog",teleported:"",transition:`${g(s).namespace.value}-zoom-in-top`,"popper-class":[`${g(s).namespace.value}-picker__popper`,C.popperClass],"popper-options":g(d),"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:oe,onShow:M,onHide:O}),{default:te(()=>[g(et)?(_(),ne("div",{key:1,ref_key:"inputRef",ref:h,class:E(g(w)),style:_t(C.$attrs.style),onClick:I,onMouseenter:$,onMouseleave:se,onTouchstart:vt,onKeydown:sn},[g(Oe)?(_(),be(g(De),{key:0,class:E([g(o).e("icon"),g(l).e("icon")]),onMousedown:ct(F,["prevent"]),onTouchstart:vt},{default:te(()=>[(_(),be(En(g(Oe))))]),_:1},8,["class","onMousedown"])):Ie("v-if",!0),B("input",{id:C.id&&C.id[0],autocomplete:"off",name:C.name&&C.name[0],placeholder:C.startPlaceholder,value:g(j)&&g(j)[0],disabled:g(y),readonly:!C.editable||C.readonly,class:E(g(l).b("input")),onMousedown:F,onInput:Kt,onChange:on,onFocus:I,onBlur:D},null,42,Al),gn(C.$slots,"range-separator",{},()=>[B("span",{class:E(g(l).b("separator"))},Me(C.rangeSeparator),3)]),B("input",{id:C.id&&C.id[1],autocomplete:"off",name:C.name&&C.name[1],placeholder:C.endPlaceholder,value:g(j)&&g(j)[1],disabled:g(y),readonly:!C.editable||C.readonly,class:E(g(l).b("input")),onMousedown:F,onFocus:I,onBlur:D,onInput:On,onChange:$t},null,42,Cl),C.clearIcon?(_(),be(g(De),{key:1,class:E(g(S)),onClick:ke},{default:te(()=>[(_(),be(En(C.clearIcon)))]),_:1},8,["class"])):Ie("v-if",!0)],38)):(_(),be(g(Bt),{key:0,id:C.id,ref_key:"inputRef",ref:h,"container-role":"combobox","model-value":g(j),name:C.name,size:g(Xt),disabled:g(y),placeholder:C.placeholder,class:E([g(s).b("editor"),g(s).bm("editor",C.type),C.$attrs.class]),style:_t(C.$attrs.style),readonly:!C.editable||C.readonly||g(fe)||C.type==="week",label:C.label,tabindex:C.tabindex,"validate-event":!1,onInput:Jt,onFocus:I,onBlur:D,onKeydown:sn,onChange:an,onMousedown:F,onMouseenter:$,onMouseleave:se,onTouchstart:vt,onClick:ie[0]||(ie[0]=ct(()=>{},["stop"]))},{prefix:te(()=>[g(Oe)?(_(),be(g(De),{key:0,class:E(g(o).e("icon")),onMousedown:ct(F,["prevent"]),onTouchstart:vt},{default:te(()=>[(_(),be(En(g(Oe))))]),_:1},8,["class","onMousedown"])):Ie("v-if",!0)]),suffix:te(()=>[ye.value&&C.clearIcon?(_(),be(g(De),{key:0,class:E(`${g(o).e("icon")} clear-icon`),onClick:ct(ke,["stop"])},{default:te(()=>[(_(),be(En(C.clearIcon)))]),_:1},8,["class","onClick"])):Ie("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","label","tabindex","onKeydown"]))]),content:te(()=>[gn(C.$slots,"default",{visible:m.value,actualVisible:p.value,parsedValue:g(x),format:C.format,unlinkPanels:C.unlinkPanels,type:C.type,defaultValue:C.defaultValue,onPick:q,onSelectRange:W,onSetPickerOption:re,onCalendarChange:J,onPanelChange:ae,onKeydown:k,onMousedown:ie[1]||(ie[1]=ct(()=>{},["stop"]))})]),_:3},16,["visible","transition","popper-class","popper-options"]))}});var wl=nt(yl,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/common/picker.vue"]]);const Ml=Ve({...vl,datetimeRole:String,parsedValue:{type:Ne(Object)}}),Nl=({getAvailableHours:e,getAvailableMinutes:t,getAvailableSeconds:n})=>{const i=(s,o,l,c)=>{const u={hour:e,minute:t,second:n};let d=s;return["hour","minute","second"].forEach(f=>{if(u[f]){let h;const m=u[f];switch(f){case"minute":{h=m(d.hour(),o,c);break}case"second":{h=m(d.hour(),d.minute(),o,c);break}default:{h=m(o,c);break}}if(h!=null&&h.length&&!h.includes(d[f]())){const p=l?0:h.length-1;d=d[f](h[p])}}}),d},r={};return{timePickerOptions:r,getAvailableTime:i,onSetOption:([s,o])=>{r[s]=o}}},Bi=e=>{const t=(i,r)=>i||r,n=i=>i!==!0;return e.map(t).filter(n)},ps=(e,t,n)=>({getHoursList:(s,o)=>Pi(24,e&&(()=>e==null?void 0:e(s,o))),getMinutesList:(s,o,l)=>Pi(60,t&&(()=>t==null?void 0:t(s,o,l))),getSecondsList:(s,o,l,c)=>Pi(60,n&&(()=>n==null?void 0:n(s,o,l,c)))}),kl=(e,t,n)=>{const{getHoursList:i,getMinutesList:r,getSecondsList:a}=ps(e,t,n);return{getAvailableHours:(c,u)=>Bi(i(c,u)),getAvailableMinutes:(c,u,d)=>Bi(r(c,u,d)),getAvailableSeconds:(c,u,d,f)=>Bi(a(c,u,d,f))}},Dl=e=>{const t=ee(e.parsedValue);return Ye(()=>e.visible,n=>{n||(t.value=e.parsedValue)}),t},xl=100,Tl=600,yi={beforeMount(e,t){const n=t.value,{interval:i=xl,delay:r=Tl}=Fn(n)?{}:n;let a,s;const o=()=>Fn(n)?n():n.handler(),l=()=>{s&&(clearTimeout(s),s=void 0),a&&(clearInterval(a),a=void 0)};e.addEventListener("mousedown",c=>{c.button===0&&(l(),o(),document.addEventListener("mouseup",()=>l(),{once:!0}),s=setTimeout(()=>{a=setInterval(()=>{o()},i)},r))})}},Sl=Ve({role:{type:String,required:!0},spinnerDate:{type:Ne(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:Ne(String),default:""},...fs}),zl=["onClick"],Ll=["onMouseenter"],Ol=Se({__name:"basic-time-spinner",props:Sl,emits:["change","select-range","set-option"],setup(e,{emit:t}){const n=e,i=Ue("time"),{getHoursList:r,getMinutesList:a,getSecondsList:s}=ps(n.disabledHours,n.disabledMinutes,n.disabledSeconds);let o=!1;const l=ee(),c=ee(),u=ee(),d=ee(),f={hours:c,minutes:u,seconds:d},h=Q(()=>n.showSeconds?ea:ea.slice(0,2)),m=Q(()=>{const{spinnerDate:I}=n,N=I.hour(),D=I.minute(),y=I.second();return{hours:N,minutes:D,seconds:y}}),p=Q(()=>{const{hours:I,minutes:N}=g(m);return{hours:r(n.role),minutes:a(I,n.role),seconds:s(I,N,n.role)}}),A=Q(()=>{const{hours:I,minutes:N,seconds:D}=g(m);return{hours:Oi(I,23),minutes:Oi(N,59),seconds:Oi(D,59)}}),b=os(I=>{o=!1,S(I)},200),v=I=>{if(!!!n.amPmMode)return"";const D=n.amPmMode==="A";let y=I<12?" am":" pm";return D&&(y=y.toUpperCase()),y},w=I=>{let N;switch(I){case"hours":N=[0,2];break;case"minutes":N=[3,5];break;case"seconds":N=[6,8];break}const[D,y]=N;t("select-range",D,y),l.value=I},S=I=>{Z(I,g(m)[I])},L=()=>{S("hours"),S("minutes"),S("seconds")},z=I=>I.querySelector(`.${i.namespace.value}-scrollbar__wrap`),Z=(I,N)=>{if(n.arrowControl)return;const D=g(f[I]);D&&D.$el&&(z(D.$el).scrollTop=Math.max(0,N*Y(I)))},Y=I=>{const N=g(f[I]),D=N==null?void 0:N.$el.querySelector("li");return D&&Number.parseFloat(Bo(D,"height"))||0},W=()=>{q(1)},H=()=>{q(-1)},q=I=>{l.value||w("hours");const N=l.value,D=g(m)[N],y=l.value==="hours"?24:60,x=oe(N,D,I,y);M(N,x),Z(N,x),tt(()=>w(N))},oe=(I,N,D,y)=>{let x=(N+D+y)%y;const j=g(p)[I];for(;j[x]&&x!==N;)x=(x+D+y)%y;return x},M=(I,N)=>{if(g(p)[I][N])return;const{hours:x,minutes:j,seconds:U}=g(m);let Ce;switch(I){case"hours":Ce=n.spinnerDate.hour(N).minute(j).second(U);break;case"minutes":Ce=n.spinnerDate.hour(x).minute(N).second(U);break;case"seconds":Ce=n.spinnerDate.hour(x).minute(j).second(N);break}t("change",Ce)},k=(I,{value:N,disabled:D})=>{D||(M(I,N),w(I),Z(I,N))},O=I=>{o=!0,b(I);const N=Math.min(Math.round((z(g(f[I]).$el).scrollTop-(K(I)*.5-10)/Y(I)+3)/Y(I)),I==="hours"?23:59);M(I,N)},K=I=>g(f[I]).$el.offsetHeight,T=()=>{const I=N=>{const D=g(f[N]);D&&D.$el&&(z(D.$el).onscroll=()=>{O(N)})};I("hours"),I("minutes"),I("seconds")};zn(()=>{tt(()=>{!n.arrowControl&&T(),L(),n.role==="start"&&w("hours")})});const P=(I,N)=>{f[N].value=I};return t("set-option",[`${n.role}_scrollDown`,q]),t("set-option",[`${n.role}_emitSelectRange`,w]),Ye(()=>n.spinnerDate,()=>{o||L()}),(I,N)=>(_(),ne("div",{class:E([g(i).b("spinner"),{"has-seconds":I.showSeconds}])},[I.arrowControl?Ie("v-if",!0):(_(!0),ne(Ze,{key:0},Je(g(h),D=>(_(),be(g(rl),{key:D,ref_for:!0,ref:y=>P(y,D),class:E(g(i).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":g(i).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:y=>w(D),onMousemove:y=>S(D)},{default:te(()=>[(_(!0),ne(Ze,null,Je(g(p)[D],(y,x)=>(_(),ne("li",{key:x,class:E([g(i).be("spinner","item"),g(i).is("active",x===g(m)[D]),g(i).is("disabled",y)]),onClick:j=>k(D,{value:x,disabled:y})},[D==="hours"?(_(),ne(Ze,{key:0},[qe(Me(("0"+(I.amPmMode?x%12||12:x)).slice(-2))+Me(v(x)),1)],64)):(_(),ne(Ze,{key:1},[qe(Me(("0"+x).slice(-2)),1)],64))],10,zl))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),I.arrowControl?(_(!0),ne(Ze,{key:1},Je(g(h),D=>(_(),ne("div",{key:D,class:E([g(i).be("spinner","wrapper"),g(i).is("arrow")]),onMouseenter:y=>w(D)},[He((_(),be(g(De),{class:E(["arrow-up",g(i).be("spinner","arrow")])},{default:te(()=>[V(g(is))]),_:1},8,["class"])),[[g(yi),H]]),He((_(),be(g(De),{class:E(["arrow-down",g(i).be("spinner","arrow")])},{default:te(()=>[V(g(yr))]),_:1},8,["class"])),[[g(yi),W]]),B("ul",{class:E(g(i).be("spinner","list"))},[(_(!0),ne(Ze,null,Je(g(A)[D],(y,x)=>(_(),ne("li",{key:x,class:E([g(i).be("spinner","item"),g(i).is("active",y===g(m)[D]),g(i).is("disabled",g(p)[D][y])])},[typeof y=="number"?(_(),ne(Ze,{key:0},[D==="hours"?(_(),ne(Ze,{key:0},[qe(Me(("0"+(I.amPmMode?y%12||12:y)).slice(-2))+Me(v(y)),1)],64)):(_(),ne(Ze,{key:1},[qe(Me(("0"+y).slice(-2)),1)],64))],64)):Ie("v-if",!0)],2))),128))],2)],42,Ll))),128)):Ie("v-if",!0)],2))}});var Pl=nt(Ol,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/basic-time-spinner.vue"]]);const Bl=Se({__name:"panel-time-pick",props:Ml,emits:["pick","select-range","set-picker-option"],setup(e,{emit:t}){const n=e,i=dt("EP_PICKER_BASE"),{arrowControl:r,disabledHours:a,disabledMinutes:s,disabledSeconds:o,defaultValue:l}=i.props,{getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}=kl(a,s,o),f=Ue("time"),{t:h,lang:m}=It(),p=ee([0,2]),A=Dl(n),b=Q(()=>Rn(n.actualVisible)?`${f.namespace.value}-zoom-in-top`:""),v=Q(()=>n.format.includes("ss")),w=Q(()=>n.format.includes("A")?"A":n.format.includes("a")?"a":""),S=P=>{const I=le(P).locale(m.value),N=k(I);return I.isSame(N)},L=()=>{t("pick",A.value,!1)},z=(P=!1,I=!1)=>{I||t("pick",n.parsedValue,P)},Z=P=>{if(!n.visible)return;const I=k(P).millisecond(0);t("pick",I,!0)},Y=(P,I)=>{t("select-range",P,I),p.value=[P,I]},W=P=>{const I=[0,3].concat(v.value?[6]:[]),N=["hours","minutes"].concat(v.value?["seconds"]:[]),y=(I.indexOf(p.value[0])+P+I.length)%I.length;q.start_emitSelectRange(N[y])},H=P=>{const I=P.code,{left:N,right:D,up:y,down:x}=_e;if([N,D].includes(I)){W(I===N?-1:1),P.preventDefault();return}if([y,x].includes(I)){const j=I===y?-1:1;q.start_scrollDown(j),P.preventDefault();return}},{timePickerOptions:q,onSetOption:oe,getAvailableTime:M}=Nl({getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}),k=P=>M(P,n.datetimeRole||"",!0),O=P=>P?le(P,n.format).locale(m.value):null,K=P=>P?P.format(n.format):null,T=()=>le(l).locale(m.value);return t("set-picker-option",["isValidValue",S]),t("set-picker-option",["formatToString",K]),t("set-picker-option",["parseUserInput",O]),t("set-picker-option",["handleKeydownInput",H]),t("set-picker-option",["getRangeAvailableTime",k]),t("set-picker-option",["getDefaultValue",T]),(P,I)=>(_(),be(Zo,{name:g(b)},{default:te(()=>[P.actualVisible||P.visible?(_(),ne("div",{key:0,class:E(g(f).b("panel"))},[B("div",{class:E([g(f).be("panel","content"),{"has-seconds":g(v)}])},[V(Pl,{ref:"spinner",role:P.datetimeRole||"start","arrow-control":g(r),"show-seconds":g(v),"am-pm-mode":g(w),"spinner-date":P.parsedValue,"disabled-hours":g(a),"disabled-minutes":g(s),"disabled-seconds":g(o),onChange:Z,onSetOption:g(oe),onSelectRange:Y},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),B("div",{class:E(g(f).be("panel","footer"))},[B("button",{type:"button",class:E([g(f).be("panel","btn"),"cancel"]),onClick:L},Me(g(h)("el.datepicker.cancel")),3),B("button",{type:"button",class:E([g(f).be("panel","btn"),"confirm"]),onClick:I[0]||(I[0]=N=>z())},Me(g(h)("el.datepicker.confirm")),3)],2)],2)):Ie("v-if",!0)]),_:1},8,["name"]))}});var lr=nt(Bl,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-pick.vue"]]),Is={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Wt,function(){return function(n,i,r){var a=i.prototype,s=function(d){return d&&(d.indexOf?d:d.s)},o=function(d,f,h,m,p){var A=d.name?d:d.$locale(),b=s(A[f]),v=s(A[h]),w=b||v.map(function(L){return L.slice(0,m)});if(!p)return w;var S=A.weekStart;return w.map(function(L,z){return w[(z+(S||0))%7]})},l=function(){return r.Ls[r.locale()]},c=function(d,f){return d.formats[f]||function(h){return h.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(m,p,A){return p||A.slice(1)})}(d.formats[f.toUpperCase()])},u=function(){var d=this;return{months:function(f){return f?f.format("MMMM"):o(d,"months")},monthsShort:function(f){return f?f.format("MMM"):o(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):o(d,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):o(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):o(d,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return c(d.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};a.localeData=function(){return u.bind(this)()},r.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return r.weekdays()},weekdaysShort:function(){return r.weekdaysShort()},weekdaysMin:function(){return r.weekdaysMin()},months:function(){return r.months()},monthsShort:function(){return r.monthsShort()},longDateFormat:function(f){return c(d,f)},meridiem:d.meridiem,ordinal:d.ordinal}},r.months=function(){return o(l(),"months")},r.monthsShort=function(){return o(l(),"monthsShort","months",3)},r.weekdays=function(d){return o(l(),"weekdays",null,null,d)},r.weekdaysShort=function(d){return o(l(),"weekdaysShort","weekdays",3,d)},r.weekdaysMin=function(d){return o(l(),"weekdaysMin","weekdays",2,d)}}})})(Is);var Zl=Is.exports;const jl=Ut(Zl),Gl=Ve({color:{type:Ne(Object),required:!0},vertical:{type:Boolean,default:!1}});let Zi=!1;function Kn(e,t){if(!jo)return;const n=function(a){var s;(s=t.drag)==null||s.call(t,a)},i=function(a){var s;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",i),document.onselectstart=null,document.ondragstart=null,Zi=!1,(s=t.end)==null||s.call(t,a)},r=function(a){var s;Zi||(a.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",i),document.addEventListener("touchmove",n),document.addEventListener("touchend",i),Zi=!0,(s=t.start)==null||s.call(t,a))};e.addEventListener("mousedown",r),e.addEventListener("touchstart",r)}const El=e=>{const t=Ln(),n=Hr(),i=Hr();function r(s){s.target!==n.value&&a(s)}function a(s){if(!i.value||!n.value)return;const l=t.vnode.el.getBoundingClientRect(),{clientX:c,clientY:u}=xr(s);if(e.vertical){let d=u-l.top;d=Math.max(n.value.offsetHeight/2,d),d=Math.min(d,l.height-n.value.offsetHeight/2),e.color.set("alpha",Math.round((d-n.value.offsetHeight/2)/(l.height-n.value.offsetHeight)*100))}else{let d=c-l.left;d=Math.max(n.value.offsetWidth/2,d),d=Math.min(d,l.width-n.value.offsetWidth/2),e.color.set("alpha",Math.round((d-n.value.offsetWidth/2)/(l.width-n.value.offsetWidth)*100))}}return{thumb:n,bar:i,handleDrag:a,handleClick:r}},Rl=(e,{bar:t,thumb:n,handleDrag:i})=>{const r=Ln(),a=Ue("color-alpha-slider"),s=ee(0),o=ee(0),l=ee();function c(){if(!n.value||e.vertical)return 0;const v=r.vnode.el,w=e.color.get("alpha");return v?Math.round(w*(v.offsetWidth-n.value.offsetWidth/2)/100):0}function u(){if(!n.value)return 0;const v=r.vnode.el;if(!e.vertical)return 0;const w=e.color.get("alpha");return v?Math.round(w*(v.offsetHeight-n.value.offsetHeight/2)/100):0}function d(){if(e.color&&e.color.value){const{r:v,g:w,b:S}=e.color.toRgb();return`linear-gradient(to right, rgba(${v}, ${w}, ${S}, 0) 0%, rgba(${v}, ${w}, ${S}, 1) 100%)`}return""}function f(){s.value=c(),o.value=u(),l.value=d()}zn(()=>{if(!t.value||!n.value)return;const v={drag:w=>{i(w)},end:w=>{i(w)}};Kn(t.value,v),Kn(n.value,v),f()}),Ye(()=>e.color.get("alpha"),()=>f()),Ye(()=>e.color.value,()=>f());const h=Q(()=>[a.b(),a.is("vertical",e.vertical)]),m=Q(()=>a.e("bar")),p=Q(()=>a.e("thumb")),A=Q(()=>({background:l.value})),b=Q(()=>({left:Jr(s.value),top:Jr(o.value)}));return{rootKls:h,barKls:m,barStyle:A,thumbKls:p,thumbStyle:b,update:f}},Yl="ElColorAlphaSlider",_l=Se({name:Yl}),Wl=Se({..._l,props:Gl,setup(e,{expose:t}){const n=e,{bar:i,thumb:r,handleDrag:a,handleClick:s}=El(n),{rootKls:o,barKls:l,barStyle:c,thumbKls:u,thumbStyle:d,update:f}=Rl(n,{bar:i,thumb:r,handleDrag:a});return t({update:f,bar:i,thumb:r}),(h,m)=>(_(),ne("div",{class:E(g(o))},[B("div",{ref_key:"bar",ref:i,class:E(g(l)),style:_t(g(c)),onClick:m[0]||(m[0]=(...p)=>g(s)&&g(s)(...p))},null,6),B("div",{ref_key:"thumb",ref:r,class:E(g(u)),style:_t(g(d))},null,6)],2))}});var Ul=nt(Wl,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const Vl=Se({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=Ue("color-hue-slider"),n=Ln(),i=ee(),r=ee(),a=ee(0),s=ee(0),o=Q(()=>e.color.get("hue"));Ye(()=>o.value,()=>{f()});function l(h){h.target!==i.value&&c(h)}function c(h){if(!r.value||!i.value)return;const p=n.vnode.el.getBoundingClientRect(),{clientX:A,clientY:b}=xr(h);let v;if(e.vertical){let w=b-p.top;w=Math.min(w,p.height-i.value.offsetHeight/2),w=Math.max(i.value.offsetHeight/2,w),v=Math.round((w-i.value.offsetHeight/2)/(p.height-i.value.offsetHeight)*360)}else{let w=A-p.left;w=Math.min(w,p.width-i.value.offsetWidth/2),w=Math.max(i.value.offsetWidth/2,w),v=Math.round((w-i.value.offsetWidth/2)/(p.width-i.value.offsetWidth)*360)}e.color.set("hue",v)}function u(){if(!i.value)return 0;const h=n.vnode.el;if(e.vertical)return 0;const m=e.color.get("hue");return h?Math.round(m*(h.offsetWidth-i.value.offsetWidth/2)/360):0}function d(){if(!i.value)return 0;const h=n.vnode.el;if(!e.vertical)return 0;const m=e.color.get("hue");return h?Math.round(m*(h.offsetHeight-i.value.offsetHeight/2)/360):0}function f(){a.value=u(),s.value=d()}return zn(()=>{if(!r.value||!i.value)return;const h={drag:m=>{c(m)},end:m=>{c(m)}};Kn(r.value,h),Kn(i.value,h),f()}),{bar:r,thumb:i,thumbLeft:a,thumbTop:s,hueValue:o,handleClick:l,update:f,ns:t}}});function Xl(e,t,n,i,r,a){return _(),ne("div",{class:E([e.ns.b(),e.ns.is("vertical",e.vertical)])},[B("div",{ref:"bar",class:E(e.ns.e("bar")),onClick:t[0]||(t[0]=(...s)=>e.handleClick&&e.handleClick(...s))},null,2),B("div",{ref:"thumb",class:E(e.ns.e("thumb")),style:_t({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}var Fl=nt(Vl,[["render",Xl],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const Hl=Ve({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Cr,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:Ne(Array)},validateEvent:{type:Boolean,default:!0}}),Jl={[qt]:e=>gi(e)||en(e),[Dr]:e=>gi(e)||en(e),activeChange:e=>gi(e)||en(e)},vs=Symbol("colorPickerContextKey"),sa=function(e,t,n){return[e,t*n/((e=(2-t)*n)<1?e:2-e)||0,e/2]},Kl=function(e){return typeof e=="string"&&e.includes(".")&&Number.parseFloat(e)===1},$l=function(e){return typeof e=="string"&&e.includes("%")},Nn=function(e,t){Kl(e)&&(e="100%");const n=$l(e);return e=Math.min(t,Math.max(0,Number.parseFloat(`${e}`))),n&&(e=Number.parseInt(`${e*t}`,10)/100),Math.abs(e-t)<1e-6?1:e%t/Number.parseFloat(t)},oa={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},mi=e=>{e=Math.min(Math.round(e),255);const t=Math.floor(e/16),n=e%16;return`${oa[t]||t}${oa[n]||n}`},la=function({r:e,g:t,b:n}){return Number.isNaN(+e)||Number.isNaN(+t)||Number.isNaN(+n)?"":`#${mi(e)}${mi(t)}${mi(n)}`},ji={A:10,B:11,C:12,D:13,E:14,F:15},ln=function(e){return e.length===2?(ji[e[0].toUpperCase()]||+e[0])*16+(ji[e[1].toUpperCase()]||+e[1]):ji[e[1].toUpperCase()]||+e[1]},Ql=function(e,t,n){t=t/100,n=n/100;let i=t;const r=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,i*=r<=1?r:2-r;const a=(n+t)/2,s=n===0?2*i/(r+i):2*t/(n+t);return{h:e,s:s*100,v:a*100}},ca=(e,t,n)=>{e=Nn(e,255),t=Nn(t,255),n=Nn(n,255);const i=Math.max(e,t,n),r=Math.min(e,t,n);let a;const s=i,o=i-r,l=i===0?0:o/i;if(i===r)a=0;else{switch(i){case e:{a=(t-n)/o+(t<n?6:0);break}case t:{a=(n-e)/o+2;break}case n:{a=(e-t)/o+4;break}}a/=6}return{h:a*360,s:l*100,v:s*100}},Zn=function(e,t,n){e=Nn(e,360)*6,t=Nn(t,100),n=Nn(n,100);const i=Math.floor(e),r=e-i,a=n*(1-t),s=n*(1-r*t),o=n*(1-(1-r)*t),l=i%6,c=[n,s,a,a,o,n][l],u=[o,n,n,s,a,a][l],d=[a,a,o,n,n,s][l];return{r:Math.round(c*255),g:Math.round(u*255),b:Math.round(d*255)}};class _n{constructor(t={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const n in t)Kr(t,n)&&(this[n]=t[n]);t.value?this.fromString(t.value):this.doOnChange()}set(t,n){if(arguments.length===1&&typeof t=="object"){for(const i in t)Kr(t,i)&&this.set(i,t[i]);return}this[`_${t}`]=n,this.doOnChange()}get(t){return t==="alpha"?Math.floor(this[`_${t}`]):this[`_${t}`]}toRgb(){return Zn(this._hue,this._saturation,this._value)}fromString(t){if(!t){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(i,r,a)=>{this._hue=Math.max(0,Math.min(360,i)),this._saturation=Math.max(0,Math.min(100,r)),this._value=Math.max(0,Math.min(100,a)),this.doOnChange()};if(t.includes("hsl")){const i=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,a)=>a>2?Number.parseFloat(r):Number.parseInt(r,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:r,s:a,v:s}=Ql(i[0],i[1],i[2]);n(r,a,s)}}else if(t.includes("hsv")){const i=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,a)=>a>2?Number.parseFloat(r):Number.parseInt(r,10));i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3&&n(i[0],i[1],i[2])}else if(t.includes("rgb")){const i=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,a)=>a>2?Number.parseFloat(r):Number.parseInt(r,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:r,s:a,v:s}=ca(i[0],i[1],i[2]);n(r,a,s)}}else if(t.includes("#")){const i=t.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(i))return;let r,a,s;i.length===3?(r=ln(i[0]+i[0]),a=ln(i[1]+i[1]),s=ln(i[2]+i[2])):(i.length===6||i.length===8)&&(r=ln(i.slice(0,2)),a=ln(i.slice(2,4)),s=ln(i.slice(4,6))),i.length===8?this._alpha=ln(i.slice(6))/255*100:(i.length===3||i.length===6)&&(this._alpha=100);const{h:o,s:l,v:c}=ca(r,a,s);n(o,l,c)}}compare(t){return Math.abs(t._hue-this._hue)<2&&Math.abs(t._saturation-this._saturation)<1&&Math.abs(t._value-this._value)<1&&Math.abs(t._alpha-this._alpha)<1}doOnChange(){const{_hue:t,_saturation:n,_value:i,_alpha:r,format:a}=this;if(this.enableAlpha)switch(a){case"hsl":{const s=sa(t,n/100,i/100);this.value=`hsla(${t}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${t}, ${Math.round(n)}%, ${Math.round(i)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${la(Zn(t,n,i))}${mi(r*255/100)}`;break}default:{const{r:s,g:o,b:l}=Zn(t,n,i);this.value=`rgba(${s}, ${o}, ${l}, ${this.get("alpha")/100})`}}else switch(a){case"hsl":{const s=sa(t,n/100,i/100);this.value=`hsl(${t}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${t}, ${Math.round(n)}%, ${Math.round(i)}%)`;break}case"rgb":{const{r:s,g:o,b:l}=Zn(t,n,i);this.value=`rgb(${s}, ${o}, ${l})`;break}default:this.value=la(Zn(t,n,i))}}}const ql=Se({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const t=Ue("color-predefine"),{currentColor:n}=dt(vs),i=ee(a(e.colors,e.color));Ye(()=>n.value,s=>{const o=new _n;o.fromString(s),i.value.forEach(l=>{l.selected=o.compare(l)})}),Go(()=>{i.value=a(e.colors,e.color)});function r(s){e.color.fromString(e.colors[s])}function a(s,o){return s.map(l=>{const c=new _n;return c.enableAlpha=!0,c.format="rgba",c.fromString(l),c.selected=c.value===o.value,c})}return{rgbaColors:i,handleSelect:r,ns:t}}}),ec=["onClick"];function tc(e,t,n,i,r,a){return _(),ne("div",{class:E(e.ns.b())},[B("div",{class:E(e.ns.e("colors"))},[(_(!0),ne(Ze,null,Je(e.rgbaColors,(s,o)=>(_(),ne("div",{key:e.colors[o],class:E([e.ns.e("color-selector"),e.ns.is("alpha",s._alpha<100),{selected:s.selected}]),onClick:l=>e.handleSelect(o)},[B("div",{style:_t({backgroundColor:s.value})},null,4)],10,ec))),128))],2)],2)}var nc=nt(ql,[["render",tc],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const ic=Se({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=Ue("color-svpanel"),n=Ln(),i=ee(0),r=ee(0),a=ee("hsl(0, 100%, 50%)"),s=Q(()=>{const c=e.color.get("hue"),u=e.color.get("value");return{hue:c,value:u}});function o(){const c=e.color.get("saturation"),u=e.color.get("value"),d=n.vnode.el,{clientWidth:f,clientHeight:h}=d;r.value=c*f/100,i.value=(100-u)*h/100,a.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function l(c){const d=n.vnode.el.getBoundingClientRect(),{clientX:f,clientY:h}=xr(c);let m=f-d.left,p=h-d.top;m=Math.max(0,m),m=Math.min(m,d.width),p=Math.max(0,p),p=Math.min(p,d.height),r.value=m,i.value=p,e.color.set({saturation:m/d.width*100,value:100-p/d.height*100})}return Ye(()=>s.value,()=>{o()}),zn(()=>{Kn(n.vnode.el,{drag:c=>{l(c)},end:c=>{l(c)}}),o()}),{cursorTop:i,cursorLeft:r,background:a,colorValue:s,handleDrag:l,update:o,ns:t}}}),rc=B("div",null,null,-1),ac=[rc];function sc(e,t,n,i,r,a){return _(),ne("div",{class:E(e.ns.b()),style:_t({backgroundColor:e.background})},[B("div",{class:E(e.ns.e("white"))},null,2),B("div",{class:E(e.ns.e("black"))},null,2),B("div",{class:E(e.ns.e("cursor")),style:_t({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},ac,6)],6)}var oc=nt(ic,[["render",sc],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const lc=["id","aria-label","aria-labelledby","aria-description","tabindex","onKeydown"],cc=Se({name:"ElColorPicker"}),uc=Se({...cc,props:Hl,emits:Jl,setup(e,{expose:t,emit:n}){const i=e,{t:r}=It(),a=Ue("color"),{formItem:s}=Nr(),o=kr(),l=ss(),{inputId:c,isLabeledByFormItem:u}=el(i,{formItemContext:s}),d=ee(),f=ee(),h=ee(),m=ee();let p=!0;const A=Di(new _n({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue})),b=ee(!1),v=ee(!1),w=ee(""),S=Q(()=>!i.modelValue&&!v.value?"transparent":W(A,i.showAlpha)),L=Q(()=>!i.modelValue&&!v.value?"":A.value),z=Q(()=>u.value?void 0:i.label||r("el.colorpicker.defaultLabel")),Z=Q(()=>u.value?s==null?void 0:s.labelId:void 0),Y=Q(()=>[a.b("picker"),a.is("disabled",l.value),a.bm("picker",o.value)]);function W(I,N){if(!(I instanceof _n))throw new TypeError("color should be instance of _color Class");const{r:D,g:y,b:x}=I.toRgb();return N?`rgba(${D}, ${y}, ${x}, ${I.get("alpha")/100})`:`rgb(${D}, ${y}, ${x})`}function H(I){b.value=I}const q=os(H,100);function oe(){l.value||H(!0)}function M(){q(!1),k()}function k(){tt(()=>{i.modelValue?A.fromString(i.modelValue):(A.value="",tt(()=>{v.value=!1}))})}function O(){l.value||q(!b.value)}function K(){A.fromString(w.value)}function T(){const I=A.value;n(qt,I),n("change",I),i.validateEvent&&(s==null||s.validate("change").catch(N=>Sn())),q(!1),tt(()=>{const N=new _n({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue});A.compare(N)||k()})}function P(){q(!1),n(qt,null),n("change",null),i.modelValue!==null&&i.validateEvent&&(s==null||s.validate("change").catch(I=>Sn())),k()}return zn(()=>{i.modelValue&&(w.value=L.value)}),Ye(()=>i.modelValue,I=>{I?I&&I!==A.value&&(p=!1,A.fromString(I)):v.value=!1}),Ye(()=>L.value,I=>{w.value=I,p&&n("activeChange",I),p=!0}),Ye(()=>A.value,()=>{!i.modelValue&&!v.value&&(v.value=!0)}),Ye(()=>b.value,()=>{tt(()=>{var I,N,D;(I=d.value)==null||I.update(),(N=f.value)==null||N.update(),(D=h.value)==null||D.update()})}),Ci(vs,{currentColor:L}),t({color:A,show:oe,hide:M}),(I,N)=>(_(),be(g($n),{ref_key:"popper",ref:m,visible:b.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[g(a).be("picker","panel"),g(a).b("dropdown"),I.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${g(a).namespace.value}-zoom-in-top`,persistent:""},{content:te(()=>[He((_(),ne("div",null,[B("div",{class:E(g(a).be("dropdown","main-wrapper"))},[V(Fl,{ref_key:"hue",ref:d,class:"hue-slider",color:g(A),vertical:""},null,8,["color"]),V(oc,{ref_key:"sv",ref:f,color:g(A)},null,8,["color"])],2),I.showAlpha?(_(),be(Ul,{key:0,ref_key:"alpha",ref:h,color:g(A)},null,8,["color"])):Ie("v-if",!0),I.predefine?(_(),be(nc,{key:1,ref:"predefine",color:g(A),colors:I.predefine},null,8,["color","colors"])):Ie("v-if",!0),B("div",{class:E(g(a).be("dropdown","btns"))},[B("span",{class:E(g(a).be("dropdown","value"))},[V(g(Bt),{modelValue:w.value,"onUpdate:modelValue":N[0]||(N[0]=D=>w.value=D),"validate-event":!1,size:"small",onKeyup:pt(K,["enter"]),onBlur:K},null,8,["modelValue","onKeyup"])],2),V(g(nn),{class:E(g(a).be("dropdown","link-btn")),text:"",size:"small",onClick:P},{default:te(()=>[qe(Me(g(r)("el.colorpicker.clear")),1)]),_:1},8,["class"]),V(g(nn),{plain:"",size:"small",class:E(g(a).be("dropdown","btn")),onClick:T},{default:te(()=>[qe(Me(g(r)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)])),[[g(bi),M]])]),default:te(()=>[B("div",{id:g(c),class:E(g(Y)),role:"button","aria-label":g(z),"aria-labelledby":g(Z),"aria-description":g(r)("el.colorpicker.description",{color:I.modelValue||""}),tabindex:I.tabindex,onKeydown:pt(O,["enter"])},[g(l)?(_(),ne("div",{key:0,class:E(g(a).be("picker","mask"))},null,2)):Ie("v-if",!0),B("div",{class:E(g(a).be("picker","trigger")),onClick:O},[B("span",{class:E([g(a).be("picker","color"),g(a).is("alpha",I.showAlpha)])},[B("span",{class:E(g(a).be("picker","color-inner")),style:_t({backgroundColor:g(S)})},[He(V(g(De),{class:E([g(a).be("picker","icon"),g(a).is("icon-arrow-down")])},{default:te(()=>[V(g(yr))]),_:1},8,["class"]),[[zt,I.modelValue||v.value]]),He(V(g(De),{class:E([g(a).be("picker","empty"),g(a).is("icon-close")])},{default:te(()=>[V(g(Eo))]),_:1},8,["class"]),[[zt,!I.modelValue&&!v.value]])],6)],2)],2)],42,lc)]),_:1},8,["visible","popper-class","transition"]))}});var dc=nt(uc,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]]);const gc=wr(dc);var As={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Wt,function(){return function(n,i){var r=i.prototype,a=r.format;r.format=function(s){var o=this,l=this.$locale();if(!this.isValid())return a.bind(this)(s);var c=this.$utils(),u=(s||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((o.$M+1)/3);case"Do":return l.ordinal(o.$D);case"gggg":return o.weekYear();case"GGGG":return o.isoWeekYear();case"wo":return l.ordinal(o.week(),"W");case"w":case"ww":return c.s(o.week(),d==="w"?1:2,"0");case"W":case"WW":return c.s(o.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return c.s(String(o.$H===0?24:o.$H),d==="k"?1:2,"0");case"X":return Math.floor(o.$d.getTime()/1e3);case"x":return o.$d.getTime();case"z":return"["+o.offsetName()+"]";case"zzz":return"["+o.offsetName("long")+"]";default:return d}});return a.bind(this)(u)}}})})(As);var hc=As.exports;const fc=Ut(hc);var Cs={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Wt,function(){var n="week",i="year";return function(r,a,s){var o=a.prototype;o.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=s(this).startOf(i).add(1,i).date(c),d=s(this).endOf(n);if(u.isBefore(d))return 1}var f=s(this).startOf(i).date(c).startOf(n).subtract(1,"millisecond"),h=this.diff(f,n,!0);return h<0?s(this).startOf("week").week():Math.ceil(h)},o.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(Cs);var mc=Cs.exports;const pc=Ut(mc);var bs={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Wt,function(){return function(n,i){i.prototype.weekYear=function(){var r=this.month(),a=this.week(),s=this.year();return a===1&&r===11?s+1:r===0&&a>=52?s-1:s}}})})(bs);var Ic=bs.exports;const vc=Ut(Ic);var ys={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Wt,function(){return function(n,i,r){i.prototype.dayOfYear=function(a){var s=Math.round((r(this).startOf("day")-r(this).startOf("year"))/864e5)+1;return a==null?s:this.add(a-s,"day")}}})})(ys);var Ac=ys.exports;const Cc=Ut(Ac);var ws={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Wt,function(){return function(n,i){i.prototype.isSameOrAfter=function(r,a){return this.isSame(r,a)||this.isAfter(r,a)}}})})(ws);var bc=ws.exports;const yc=Ut(bc);var Ms={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Wt,function(){return function(n,i){i.prototype.isSameOrBefore=function(r,a){return this.isSame(r,a)||this.isBefore(r,a)}}})})(Ms);var wc=Ms.exports;const Mc=Ut(wc),Tr=Symbol(),Nc=Ve({...ms,type:{type:Ne(String),default:"date"}}),kc=["date","dates","year","month","week","range"],Sr=Ve({disabledDate:{type:Ne(Function)},date:{type:Ne(Object),required:!0},minDate:{type:Ne(Object)},maxDate:{type:Ne(Object)},parsedValue:{type:Ne([Object,Array])},rangeState:{type:Ne(Object),default:()=>({endDate:null,selecting:!1})}}),Ns=Ve({type:{type:Ne(String),required:!0,values:hl}}),ks=Ve({unlinkPanels:Boolean,parsedValue:{type:Ne(Array)}}),Ds=e=>({type:String,values:kc,default:e}),Dc=Ve({...Ns,parsedValue:{type:Ne([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),xc=Ve({...Sr,cellClassName:{type:Ne(Function)},showWeekNumber:Boolean,selectionMode:Ds("date")}),Tc=["changerange","pick","select"],cr=e=>{if(!Qe(e))return!1;const[t,n]=e;return le.isDayjs(t)&&le.isDayjs(n)&&t.isSameOrBefore(n)},xs=(e,{lang:t,unit:n,unlinkPanels:i})=>{let r;if(Qe(e)){let[a,s]=e.map(o=>le(o).locale(t));return i||(s=a.add(1,n)),[a,s]}else e?r=le(e):r=le();return r=r.locale(t),[r,r.add(1,n)]},Sc=(e,t,{columnIndexOffset:n,startDate:i,nextEndDate:r,now:a,unit:s,relativeDateGetter:o,setCellMetadata:l,setRowMetadata:c})=>{for(let u=0;u<e.row;u++){const d=t[u];for(let f=0;f<e.column;f++){let h=d[f+n];h||(h={row:u,column:f,type:"normal",inRange:!1,start:!1,end:!1});const m=u*e.column+f,p=o(m);h.dayjs=p,h.date=p.toDate(),h.timestamp=p.valueOf(),h.type="normal",h.inRange=!!(i&&p.isSameOrAfter(i,s)&&r&&p.isSameOrBefore(r,s))||!!(i&&p.isSameOrBefore(i,s)&&r&&p.isSameOrAfter(r,s)),i!=null&&i.isSameOrAfter(r)?(h.start=!!r&&p.isSame(r,s),h.end=i&&p.isSame(i,s)):(h.start=!!i&&p.isSame(i,s),h.end=!!r&&p.isSame(r,s)),p.isSame(a,s)&&(h.type="today"),l==null||l(h,{rowIndex:u,columnIndex:f}),d[f+n]=h}c==null||c(d)}},ur=(e="")=>["normal","today"].includes(e),zc=(e,t)=>{const{lang:n}=It(),i=ee(),r=ee(),a=ee(),s=ee(),o=ee([[],[],[],[],[],[]]);let l=!1;const c=e.date.$locale().weekStart||7,u=e.date.locale("en").localeData().weekdaysShort().map(I=>I.toLowerCase()),d=Q(()=>c>3?7-c:-c),f=Q(()=>{const I=e.date.startOf("month");return I.subtract(I.day()||7,"day")}),h=Q(()=>u.concat(u).slice(c,c+7)),m=Q(()=>gl(g(S)).some(I=>I.isCurrent)),p=Q(()=>{const I=e.date.startOf("month"),N=I.day()||7,D=I.daysInMonth(),y=I.subtract(1,"month").daysInMonth();return{startOfMonthDay:N,dateCountOfMonth:D,dateCountOfLastMonth:y}}),A=Q(()=>e.selectionMode==="dates"?un(e.parsedValue):[]),b=(I,{count:N,rowIndex:D,columnIndex:y})=>{const{startOfMonthDay:x,dateCountOfMonth:j,dateCountOfLastMonth:U}=g(p),Ce=g(d);if(D>=0&&D<=1){const fe=x+Ce<0?7+x+Ce:x+Ce;if(y+D*7>=fe)return I.text=N,!0;I.text=U-(fe-y%7)+1+D*7,I.type="prev-month"}else return N<=j?I.text=N:(I.text=N-j,I.type="next-month"),!0;return!1},v=(I,{columnIndex:N,rowIndex:D},y)=>{const{disabledDate:x,cellClassName:j}=e,U=g(A),Ce=b(I,{count:y,rowIndex:D,columnIndex:N}),fe=I.dayjs.toDate();return I.selected=U.find(Oe=>Oe.valueOf()===I.dayjs.valueOf()),I.isSelected=!!I.selected,I.isCurrent=z(I),I.disabled=x==null?void 0:x(fe),I.customClass=j==null?void 0:j(fe),Ce},w=I=>{if(e.selectionMode==="week"){const[N,D]=e.showWeekNumber?[1,7]:[0,6],y=P(I[N+1]);I[N].inRange=y,I[N].start=y,I[D].inRange=y,I[D].end=y}},S=Q(()=>{const{minDate:I,maxDate:N,rangeState:D,showWeekNumber:y}=e,x=g(d),j=g(o),U="day";let Ce=1;if(y)for(let fe=0;fe<6;fe++)j[fe][0]||(j[fe][0]={type:"week",text:g(f).add(fe*7+1,U).week()});return Sc({row:6,column:7},j,{startDate:I,columnIndexOffset:y?1:0,nextEndDate:D.endDate||N||D.selecting&&I||null,now:le().locale(g(n)).startOf(U),unit:U,relativeDateGetter:fe=>g(f).add(fe-x,U),setCellMetadata:(...fe)=>{v(...fe,Ce)&&(Ce+=1)},setRowMetadata:w}),j});Ye(()=>e.date,async()=>{var I;(I=g(i))!=null&&I.contains(document.activeElement)&&(await tt(),await L())});const L=async()=>{var I;return(I=g(r))==null?void 0:I.focus()},z=I=>e.selectionMode==="date"&&ur(I.type)&&Z(I,e.parsedValue),Z=(I,N)=>N?le(N).locale(g(n)).isSame(e.date.date(Number(I.text)),"day"):!1,Y=(I,N)=>{const D=I*7+(N-(e.showWeekNumber?1:0))-g(d);return g(f).add(D,"day")},W=I=>{var N;if(!e.rangeState.selecting)return;let D=I.target;if(D.tagName==="SPAN"&&(D=(N=D.parentNode)==null?void 0:N.parentNode),D.tagName==="DIV"&&(D=D.parentNode),D.tagName!=="TD")return;const y=D.parentNode.rowIndex-1,x=D.cellIndex;g(S)[y][x].disabled||(y!==g(a)||x!==g(s))&&(a.value=y,s.value=x,t("changerange",{selecting:!0,endDate:Y(y,x)}))},H=I=>!g(m)&&(I==null?void 0:I.text)===1&&I.type==="normal"||I.isCurrent,q=I=>{l||g(m)||e.selectionMode!=="date"||T(I,!0)},oe=I=>{I.target.closest("td")&&(l=!0)},M=I=>{I.target.closest("td")&&(l=!1)},k=I=>{!e.rangeState.selecting||!e.minDate?(t("pick",{minDate:I,maxDate:null}),t("select",!0)):(I>=e.minDate?t("pick",{minDate:e.minDate,maxDate:I}):t("pick",{minDate:I,maxDate:e.minDate}),t("select",!1))},O=I=>{const N=I.week(),D=`${I.year()}w${N}`;t("pick",{year:I.year(),week:N,value:D,date:I.startOf("week")})},K=(I,N)=>{const D=N?un(e.parsedValue).filter(y=>(y==null?void 0:y.valueOf())!==I.valueOf()):un(e.parsedValue).concat([I]);t("pick",D)},T=(I,N=!1)=>{const D=I.target.closest("td");if(!D)return;const y=D.parentNode.rowIndex-1,x=D.cellIndex,j=g(S)[y][x];if(j.disabled||j.type==="week")return;const U=Y(y,x);switch(e.selectionMode){case"range":{k(U);break}case"date":{t("pick",U,N);break}case"week":{O(U);break}case"dates":{K(U,!!j.selected);break}}},P=I=>{if(e.selectionMode!=="week")return!1;let N=e.date.startOf("day");if(I.type==="prev-month"&&(N=N.subtract(1,"month")),I.type==="next-month"&&(N=N.add(1,"month")),N=N.date(Number.parseInt(I.text,10)),e.parsedValue&&!Array.isArray(e.parsedValue)){const D=(e.parsedValue.day()-c+7)%7-1;return e.parsedValue.subtract(D,"day").isSame(N,"day")}return!1};return{WEEKS:h,rows:S,tbodyRef:i,currentCellRef:r,focus:L,isCurrent:z,isWeekActive:P,isSelectedCell:H,handlePickDate:T,handleMouseUp:M,handleMouseDown:oe,handleMouseMove:W,handleFocus:q}},Lc=(e,{isCurrent:t,isWeekActive:n})=>{const i=Ue("date-table"),{t:r}=It(),a=Q(()=>[i.b(),{"is-week-mode":e.selectionMode==="week"}]),s=Q(()=>r("el.datepicker.dateTablePrompt")),o=Q(()=>r("el.datepicker.week"));return{tableKls:a,tableLabel:s,weekLabel:o,getCellClasses:u=>{const d=[];return ur(u.type)&&!u.disabled?(d.push("available"),u.type==="today"&&d.push("today")):d.push(u.type),t(u)&&d.push("current"),u.inRange&&(ur(u.type)||e.selectionMode==="week")&&(d.push("in-range"),u.start&&d.push("start-date"),u.end&&d.push("end-date")),u.disabled&&d.push("disabled"),u.selected&&d.push("selected"),u.customClass&&d.push(u.customClass),d.join(" ")},getRowKls:u=>[i.e("row"),{current:n(u)}],t:r}},Oc=Ve({cell:{type:Ne(Object)}});var Pc=Se({name:"ElDatePickerCell",props:Oc,setup(e){const t=Ue("date-table-cell"),{slots:n}=dt(Tr);return()=>{const{cell:i}=e;if(n.default){const r=n.default(i).filter(a=>a.patchFlag!==-2&&a.type.toString()!=="Symbol(Comment)");if(r.length)return r}return V("div",{class:t.b()},[V("span",{class:t.e("text")},[i==null?void 0:i.text])])}}});const Bc=["aria-label"],Zc={key:0,scope:"col"},jc=["aria-label"],Gc=["aria-current","aria-selected","tabindex"],Ec=Se({__name:"basic-date-table",props:xc,emits:Tc,setup(e,{expose:t,emit:n}){const i=e,{WEEKS:r,rows:a,tbodyRef:s,currentCellRef:o,focus:l,isCurrent:c,isWeekActive:u,isSelectedCell:d,handlePickDate:f,handleMouseUp:h,handleMouseDown:m,handleMouseMove:p,handleFocus:A}=zc(i,n),{tableLabel:b,tableKls:v,weekLabel:w,getCellClasses:S,getRowKls:L,t:z}=Lc(i,{isCurrent:c,isWeekActive:u});return t({focus:l}),(Z,Y)=>(_(),ne("table",{"aria-label":g(b),class:E(g(v)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:Y[1]||(Y[1]=(...W)=>g(f)&&g(f)(...W)),onMousemove:Y[2]||(Y[2]=(...W)=>g(p)&&g(p)(...W)),onMousedown:Y[3]||(Y[3]=ct((...W)=>g(m)&&g(m)(...W),["prevent"])),onMouseup:Y[4]||(Y[4]=(...W)=>g(h)&&g(h)(...W))},[B("tbody",{ref_key:"tbodyRef",ref:s},[B("tr",null,[Z.showWeekNumber?(_(),ne("th",Zc,Me(g(w)),1)):Ie("v-if",!0),(_(!0),ne(Ze,null,Je(g(r),(W,H)=>(_(),ne("th",{key:H,"aria-label":g(z)("el.datepicker.weeksFull."+W),scope:"col"},Me(g(z)("el.datepicker.weeks."+W)),9,jc))),128))]),(_(!0),ne(Ze,null,Je(g(a),(W,H)=>(_(),ne("tr",{key:H,class:E(g(L)(W[1]))},[(_(!0),ne(Ze,null,Je(W,(q,oe)=>(_(),ne("td",{key:`${H}.${oe}`,ref_for:!0,ref:M=>g(d)(q)&&(o.value=M),class:E(g(S)(q)),"aria-current":q.isCurrent?"date":void 0,"aria-selected":q.isCurrent,tabindex:g(d)(q)?0:-1,onFocus:Y[0]||(Y[0]=(...M)=>g(A)&&g(A)(...M))},[V(g(Pc),{cell:q},null,8,["cell"])],42,Gc))),128))],2))),128))],512)],42,Bc))}});var dr=nt(Ec,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-date-table.vue"]]);const Rc=Ve({...Sr,selectionMode:Ds("month")}),Yc=["aria-label"],_c=["aria-selected","aria-label","tabindex","onKeydown"],Wc={class:"cell"},Uc=Se({__name:"basic-month-table",props:Rc,emits:["changerange","pick","select"],setup(e,{expose:t,emit:n}){const i=e,r=(S,L,z)=>{const Z=le().locale(z).startOf("month").month(L).year(S),Y=Z.daysInMonth();return ds(Y).map(W=>Z.add(W,"day").toDate())},a=Ue("month-table"),{t:s,lang:o}=It(),l=ee(),c=ee(),u=ee(i.date.locale("en").localeData().monthsShort().map(S=>S.toLowerCase())),d=ee([[],[],[]]),f=ee(),h=ee(),m=Q(()=>{var S,L;const z=d.value,Z=le().locale(o.value).startOf("month");for(let Y=0;Y<3;Y++){const W=z[Y];for(let H=0;H<4;H++){const q=W[H]||(W[H]={row:Y,column:H,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});q.type="normal";const oe=Y*4+H,M=i.date.startOf("year").month(oe),k=i.rangeState.endDate||i.maxDate||i.rangeState.selecting&&i.minDate||null;q.inRange=!!(i.minDate&&M.isSameOrAfter(i.minDate,"month")&&k&&M.isSameOrBefore(k,"month"))||!!(i.minDate&&M.isSameOrBefore(i.minDate,"month")&&k&&M.isSameOrAfter(k,"month")),(S=i.minDate)!=null&&S.isSameOrAfter(k)?(q.start=!!(k&&M.isSame(k,"month")),q.end=i.minDate&&M.isSame(i.minDate,"month")):(q.start=!!(i.minDate&&M.isSame(i.minDate,"month")),q.end=!!(k&&M.isSame(k,"month"))),Z.isSame(M)&&(q.type="today"),q.text=oe,q.disabled=((L=i.disabledDate)==null?void 0:L.call(i,M.toDate()))||!1}}return z}),p=()=>{var S;(S=c.value)==null||S.focus()},A=S=>{const L={},z=i.date.year(),Z=new Date,Y=S.text;return L.disabled=i.disabledDate?r(z,Y,o.value).every(i.disabledDate):!1,L.current=un(i.parsedValue).findIndex(W=>le.isDayjs(W)&&W.year()===z&&W.month()===Y)>=0,L.today=Z.getFullYear()===z&&Z.getMonth()===Y,S.inRange&&(L["in-range"]=!0,S.start&&(L["start-date"]=!0),S.end&&(L["end-date"]=!0)),L},b=S=>{const L=i.date.year(),z=S.text;return un(i.date).findIndex(Z=>Z.year()===L&&Z.month()===z)>=0},v=S=>{var L;if(!i.rangeState.selecting)return;let z=S.target;if(z.tagName==="A"&&(z=(L=z.parentNode)==null?void 0:L.parentNode),z.tagName==="DIV"&&(z=z.parentNode),z.tagName!=="TD")return;const Z=z.parentNode.rowIndex,Y=z.cellIndex;m.value[Z][Y].disabled||(Z!==f.value||Y!==h.value)&&(f.value=Z,h.value=Y,n("changerange",{selecting:!0,endDate:i.date.startOf("year").month(Z*4+Y)}))},w=S=>{var L;const z=(L=S.target)==null?void 0:L.closest("td");if((z==null?void 0:z.tagName)!=="TD"||rs(z,"disabled"))return;const Z=z.cellIndex,W=z.parentNode.rowIndex*4+Z,H=i.date.startOf("year").month(W);i.selectionMode==="range"?i.rangeState.selecting?(i.minDate&&H>=i.minDate?n("pick",{minDate:i.minDate,maxDate:H}):n("pick",{minDate:H,maxDate:i.minDate}),n("select",!1)):(n("pick",{minDate:H,maxDate:null}),n("select",!0)):n("pick",W)};return Ye(()=>i.date,async()=>{var S,L;(S=l.value)!=null&&S.contains(document.activeElement)&&(await tt(),(L=c.value)==null||L.focus())}),t({focus:p}),(S,L)=>(_(),ne("table",{role:"grid","aria-label":g(s)("el.datepicker.monthTablePrompt"),class:E(g(a).b()),onClick:w,onMousemove:v},[B("tbody",{ref_key:"tbodyRef",ref:l},[(_(!0),ne(Ze,null,Je(g(m),(z,Z)=>(_(),ne("tr",{key:Z},[(_(!0),ne(Ze,null,Je(z,(Y,W)=>(_(),ne("td",{key:W,ref_for:!0,ref:H=>b(Y)&&(c.value=H),class:E(A(Y)),"aria-selected":`${b(Y)}`,"aria-label":g(s)(`el.datepicker.month${+Y.text+1}`),tabindex:b(Y)?0:-1,onKeydown:[pt(ct(w,["prevent","stop"]),["space"]),pt(ct(w,["prevent","stop"]),["enter"])]},[B("div",null,[B("span",Wc,Me(g(s)("el.datepicker.months."+u.value[Y.text])),1)])],42,_c))),128))]))),128))],512)],42,Yc))}});var gr=nt(Uc,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-month-table.vue"]]);const{date:Vc,disabledDate:Xc,parsedValue:Fc}=Sr,Hc=Ve({date:Vc,disabledDate:Xc,parsedValue:Fc}),Jc=["aria-label"],Kc=["aria-selected","tabindex","onKeydown"],$c={class:"cell"},Qc={key:1},qc=Se({__name:"basic-year-table",props:Hc,emits:["pick"],setup(e,{expose:t,emit:n}){const i=e,r=(p,A)=>{const b=le(String(p)).locale(A).startOf("year"),w=b.endOf("year").dayOfYear();return ds(w).map(S=>b.add(S,"day").toDate())},a=Ue("year-table"),{t:s,lang:o}=It(),l=ee(),c=ee(),u=Q(()=>Math.floor(i.date.year()/10)*10),d=()=>{var p;(p=c.value)==null||p.focus()},f=p=>{const A={},b=le().locale(o.value);return A.disabled=i.disabledDate?r(p,o.value).every(i.disabledDate):!1,A.current=un(i.parsedValue).findIndex(v=>v.year()===p)>=0,A.today=b.year()===p,A},h=p=>p===u.value&&i.date.year()<u.value&&i.date.year()>u.value+9||un(i.date).findIndex(A=>A.year()===p)>=0,m=p=>{const b=p.target.closest("td");if(b&&b.textContent){if(rs(b,"disabled"))return;const v=b.textContent||b.innerText;n("pick",Number(v))}};return Ye(()=>i.date,async()=>{var p,A;(p=l.value)!=null&&p.contains(document.activeElement)&&(await tt(),(A=c.value)==null||A.focus())}),t({focus:d}),(p,A)=>(_(),ne("table",{role:"grid","aria-label":g(s)("el.datepicker.yearTablePrompt"),class:E(g(a).b()),onClick:m},[B("tbody",{ref_key:"tbodyRef",ref:l},[(_(),ne(Ze,null,Je(3,(b,v)=>B("tr",{key:v},[(_(),ne(Ze,null,Je(4,(w,S)=>(_(),ne(Ze,{key:v+"_"+S},[v*4+S<10?(_(),ne("td",{key:0,ref_for:!0,ref:L=>h(g(u)+v*4+S)&&(c.value=L),class:E(["available",f(g(u)+v*4+S)]),"aria-selected":`${h(g(u)+v*4+S)}`,tabindex:h(g(u)+v*4+S)?0:-1,onKeydown:[pt(ct(m,["prevent","stop"]),["space"]),pt(ct(m,["prevent","stop"]),["enter"])]},[B("span",$c,Me(g(u)+v*4+S),1)],42,Kc)):(_(),ne("td",Qc))],64))),64))])),64))],512)],10,Jc))}});var eu=nt(qc,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-year-table.vue"]]);const tu=["onClick"],nu=["aria-label"],iu=["aria-label"],ru=["aria-label"],au=["aria-label"],su=Se({__name:"panel-date-pick",props:Dc,emits:["pick","set-picker-option","panel-change"],setup(e,{emit:t}){const n=e,i=(G,re,J)=>!0,r=Ue("picker-panel"),a=Ue("date-picker"),s=br(),o=as(),{t:l,lang:c}=It(),u=dt("EP_PICKER_BASE"),d=dt(tl),{shortcuts:f,disabledDate:h,cellClassName:m,defaultTime:p}=u.props,A=Tn(u.props,"defaultValue"),b=ee(),v=ee(le().locale(c.value)),w=ee(!1);let S=!1;const L=Q(()=>le(p).locale(c.value)),z=Q(()=>v.value.month()),Z=Q(()=>v.value.year()),Y=ee([]),W=ee(null),H=ee(null),q=G=>Y.value.length>0?i(G,Y.value,n.format||"HH:mm:ss"):!0,oe=G=>p&&!se.value&&!w.value&&!S?L.value.year(G.year()).month(G.month()).date(G.date()):Ce.value?G.millisecond(0):G.startOf("day"),M=(G,...re)=>{if(!G)t("pick",G,...re);else if(Qe(G)){const J=G.map(oe);t("pick",J,...re)}else t("pick",oe(G),...re);W.value=null,H.value=null,w.value=!1,S=!1},k=(G,re)=>{if(N.value==="date"){G=G;let J=n.parsedValue?n.parsedValue.year(G.year()).month(G.month()).date(G.date()):G;q(J)||(J=Y.value[0][0].year(G.year()).month(G.month()).date(G.date())),v.value=J,M(J,Ce.value||re)}else N.value==="week"?M(G.date):N.value==="dates"&&M(G,!0)},O=G=>{const re=G?"add":"subtract";v.value=v.value[re](1,"month"),$t("month")},K=G=>{const re=v.value,J=G?"add":"subtract";v.value=T.value==="year"?re[J](10,"year"):re[J](1,"year"),$t("year")},T=ee("date"),P=Q(()=>{const G=l("el.datepicker.year");if(T.value==="year"){const re=Math.floor(Z.value/10)*10;return G?`${re} ${G} - ${re+9} ${G}`:`${re} - ${re+9}`}return`${Z.value} ${G}`}),I=G=>{const re=Fn(G.value)?G.value():G.value;if(re){S=!0,M(le(re).locale(c.value));return}G.onClick&&G.onClick({attrs:s,slots:o,emit:t})},N=Q(()=>{const{type:G}=n;return["week","month","year","dates"].includes(G)?G:"date"}),D=Q(()=>N.value==="date"?T.value:N.value),y=Q(()=>!!f.length),x=async G=>{v.value=v.value.startOf("month").month(G),N.value==="month"?M(v.value,!1):(T.value="date",["month","year","date","week"].includes(N.value)&&(M(v.value,!0),await tt(),Kt())),$t("month")},j=async G=>{N.value==="year"?(v.value=v.value.startOf("year").year(G),M(v.value,!1)):(v.value=v.value.year(G),T.value="month",["month","year","date","week"].includes(N.value)&&(M(v.value,!0),await tt(),Kt())),$t("year")},U=async G=>{T.value=G,await tt(),Kt()},Ce=Q(()=>n.type==="datetime"||n.type==="datetimerange"),fe=Q(()=>Ce.value||N.value==="dates"),Oe=Q(()=>h?n.parsedValue?Qe(n.parsedValue)?h(n.parsedValue[0].toDate()):h(n.parsedValue.toDate()):!0:!1),ye=()=>{if(N.value==="dates")M(n.parsedValue);else{let G=n.parsedValue;if(!G){const re=le(p).locale(c.value),J=Jt();G=re.year(J.year()).month(J.month()).date(J.date())}v.value=G,M(G)}},ke=Q(()=>h?h(le().locale(c.value).toDate()):!1),xe=()=>{const re=le().locale(c.value).toDate();w.value=!0,(!h||!h(re))&&q(re)&&(v.value=le().locale(c.value),M(v.value))},F=Q(()=>hs(n.format)),$=Q(()=>gs(n.format)),se=Q(()=>{if(H.value)return H.value;if(!(!n.parsedValue&&!A.value))return(n.parsedValue||v.value).format(F.value)}),vt=Q(()=>{if(W.value)return W.value;if(!(!n.parsedValue&&!A.value))return(n.parsedValue||v.value).format($.value)}),et=ee(!1),Xt=()=>{et.value=!0},mn=()=>{et.value=!1},gt=G=>({hour:G.hour(),minute:G.minute(),second:G.second(),year:G.year(),month:G.month(),date:G.date()}),pe=(G,re,J)=>{const{hour:ae,minute:C,second:ie}=gt(G),ge=n.parsedValue?n.parsedValue.hour(ae).minute(C).second(ie):G;v.value=ge,M(v.value,!0),J||(et.value=re)},an=G=>{const re=le(G,F.value).locale(c.value);if(re.isValid()&&q(re)){const{year:J,month:ae,date:C}=gt(v.value);v.value=re.year(J).month(ae).date(C),H.value=null,et.value=!1,M(v.value,!0)}},Ft=G=>{const re=le(G,$.value).locale(c.value);if(re.isValid()){if(h&&h(re.toDate()))return;const{hour:J,minute:ae,second:C}=gt(v.value);v.value=re.hour(J).minute(ae).second(C),W.value=null,M(v.value,!0)}},Ht=G=>le.isDayjs(G)&&G.isValid()&&(h?!h(G.toDate()):!0),jt=G=>N.value==="dates"?G.map(re=>re.format(n.format)):G.format(n.format),sn=G=>le(G,n.format).locale(c.value),Jt=()=>{const G=le(A.value).locale(c.value);if(!A.value){const re=L.value;return le().hour(re.hour()).minute(re.minute()).second(re.second()).locale(c.value)}return G},Kt=async()=>{var G;["week","month","year","date"].includes(N.value)&&((G=b.value)==null||G.focus(),N.value==="week"&&on(_e.down))},On=G=>{const{code:re}=G;[_e.up,_e.down,_e.left,_e.right,_e.home,_e.end,_e.pageUp,_e.pageDown].includes(re)&&(on(re),G.stopPropagation(),G.preventDefault()),[_e.enter,_e.space,_e.numpadEnter].includes(re)&&W.value===null&&H.value===null&&(G.preventDefault(),M(v.value,!1))},on=G=>{var re;const{up:J,down:ae,left:C,right:ie,home:ge,end:Pe,pageUp:Mt,pageDown:ao}=_e,so={year:{[J]:-4,[ae]:4,[C]:-1,[ie]:1,offset:(Te,Dt)=>Te.setFullYear(Te.getFullYear()+Dt)},month:{[J]:-4,[ae]:4,[C]:-1,[ie]:1,offset:(Te,Dt)=>Te.setMonth(Te.getMonth()+Dt)},week:{[J]:-1,[ae]:1,[C]:-1,[ie]:1,offset:(Te,Dt)=>Te.setDate(Te.getDate()+Dt*7)},date:{[J]:-7,[ae]:7,[C]:-1,[ie]:1,[ge]:Te=>-Te.getDay(),[Pe]:Te=>-Te.getDay()+6,[Mt]:Te=>-new Date(Te.getFullYear(),Te.getMonth(),0).getDate(),[ao]:Te=>new Date(Te.getFullYear(),Te.getMonth()+1,0).getDate(),offset:(Te,Dt)=>Te.setDate(Te.getDate()+Dt)}},Pn=v.value.toDate();for(;Math.abs(v.value.diff(Pn,"year",!0))<1;){const Te=so[D.value];if(!Te)return;if(Te.offset(Pn,Fn(Te[G])?Te[G](Pn):(re=Te[G])!=null?re:0),h&&h(Pn))break;const Dt=le(Pn).locale(c.value);v.value=Dt,t("pick",Dt,!0);break}},$t=G=>{t("panel-change",v.value.toDate(),G,T.value)};return Ye(()=>N.value,G=>{if(["month","year"].includes(G)){T.value=G;return}T.value="date"},{immediate:!0}),Ye(()=>T.value,()=>{d==null||d.updatePopper()}),Ye(()=>A.value,G=>{G&&(v.value=Jt())},{immediate:!0}),Ye(()=>n.parsedValue,G=>{if(G){if(N.value==="dates"||Array.isArray(G))return;v.value=G}else v.value=Jt()},{immediate:!0}),t("set-picker-option",["isValidValue",Ht]),t("set-picker-option",["formatToString",jt]),t("set-picker-option",["parseUserInput",sn]),t("set-picker-option",["handleFocusPicker",Kt]),(G,re)=>(_(),ne("div",{class:E([g(r).b(),g(a).b(),{"has-sidebar":G.$slots.sidebar||g(y),"has-time":g(Ce)}])},[B("div",{class:E(g(r).e("body-wrapper"))},[gn(G.$slots,"sidebar",{class:E(g(r).e("sidebar"))}),g(y)?(_(),ne("div",{key:0,class:E(g(r).e("sidebar"))},[(_(!0),ne(Ze,null,Je(g(f),(J,ae)=>(_(),ne("button",{key:ae,type:"button",class:E(g(r).e("shortcut")),onClick:C=>I(J)},Me(J.text),11,tu))),128))],2)):Ie("v-if",!0),B("div",{class:E(g(r).e("body"))},[g(Ce)?(_(),ne("div",{key:0,class:E(g(a).e("time-header"))},[B("span",{class:E(g(a).e("editor-wrap"))},[V(g(Bt),{placeholder:g(l)("el.datepicker.selectDate"),"model-value":g(vt),size:"small","validate-event":!1,onInput:re[0]||(re[0]=J=>W.value=J),onChange:Ft},null,8,["placeholder","model-value"])],2),He((_(),ne("span",{class:E(g(a).e("editor-wrap"))},[V(g(Bt),{placeholder:g(l)("el.datepicker.selectTime"),"model-value":g(se),size:"small","validate-event":!1,onFocus:Xt,onInput:re[1]||(re[1]=J=>H.value=J),onChange:an},null,8,["placeholder","model-value"]),V(g(lr),{visible:et.value,format:g(F),"parsed-value":v.value,onPick:pe},null,8,["visible","format","parsed-value"])],2)),[[g(bi),mn]])],2)):Ie("v-if",!0),He(B("div",{class:E([g(a).e("header"),(T.value==="year"||T.value==="month")&&g(a).e("header--bordered")])},[B("span",{class:E(g(a).e("prev-btn"))},[B("button",{type:"button","aria-label":g(l)("el.datepicker.prevYear"),class:E(["d-arrow-left",g(r).e("icon-btn")]),onClick:re[2]||(re[2]=J=>K(!1))},[V(g(De),null,{default:te(()=>[V(g(Hn))]),_:1})],10,nu),He(B("button",{type:"button","aria-label":g(l)("el.datepicker.prevMonth"),class:E([g(r).e("icon-btn"),"arrow-left"]),onClick:re[3]||(re[3]=J=>O(!1))},[V(g(De),null,{default:te(()=>[V(g(or))]),_:1})],10,iu),[[zt,T.value==="date"]])],2),B("span",{role:"button",class:E(g(a).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:re[4]||(re[4]=pt(J=>U("year"),["enter"])),onClick:re[5]||(re[5]=J=>U("year"))},Me(g(P)),35),He(B("span",{role:"button","aria-live":"polite",tabindex:"0",class:E([g(a).e("header-label"),{active:T.value==="month"}]),onKeydown:re[6]||(re[6]=pt(J=>U("month"),["enter"])),onClick:re[7]||(re[7]=J=>U("month"))},Me(g(l)(`el.datepicker.month${g(z)+1}`)),35),[[zt,T.value==="date"]]),B("span",{class:E(g(a).e("next-btn"))},[He(B("button",{type:"button","aria-label":g(l)("el.datepicker.nextMonth"),class:E([g(r).e("icon-btn"),"arrow-right"]),onClick:re[8]||(re[8]=J=>O(!0))},[V(g(De),null,{default:te(()=>[V(g(hi))]),_:1})],10,ru),[[zt,T.value==="date"]]),B("button",{type:"button","aria-label":g(l)("el.datepicker.nextYear"),class:E([g(r).e("icon-btn"),"d-arrow-right"]),onClick:re[9]||(re[9]=J=>K(!0))},[V(g(De),null,{default:te(()=>[V(g(Jn))]),_:1})],10,au)],2)],2),[[zt,T.value!=="time"]]),B("div",{class:E(g(r).e("content")),onKeydown:On},[T.value==="date"?(_(),be(dr,{key:0,ref_key:"currentViewRef",ref:b,"selection-mode":g(N),date:v.value,"parsed-value":G.parsedValue,"disabled-date":g(h),"cell-class-name":g(m),onPick:k},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):Ie("v-if",!0),T.value==="year"?(_(),be(eu,{key:1,ref_key:"currentViewRef",ref:b,date:v.value,"disabled-date":g(h),"parsed-value":G.parsedValue,onPick:j},null,8,["date","disabled-date","parsed-value"])):Ie("v-if",!0),T.value==="month"?(_(),be(gr,{key:2,ref_key:"currentViewRef",ref:b,date:v.value,"parsed-value":G.parsedValue,"disabled-date":g(h),onPick:x},null,8,["date","parsed-value","disabled-date"])):Ie("v-if",!0)],34)],2)],2),He(B("div",{class:E(g(r).e("footer"))},[He(V(g(nn),{text:"",size:"small",class:E(g(r).e("link-btn")),disabled:g(ke),onClick:xe},{default:te(()=>[qe(Me(g(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[zt,g(N)!=="dates"]]),V(g(nn),{plain:"",size:"small",class:E(g(r).e("link-btn")),disabled:g(Oe),onClick:ye},{default:te(()=>[qe(Me(g(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[zt,g(fe)&&T.value==="date"]])],2))}});var ou=nt(su,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-pick.vue"]]);const lu=Ve({...Ns,...ks}),cu=e=>{const{emit:t}=Ln(),n=br(),i=as();return a=>{const s=Fn(a.value)?a.value():a.value;if(s){t("pick",[le(s[0]).locale(e.value),le(s[1]).locale(e.value)]);return}a.onClick&&a.onClick({attrs:n,slots:i,emit:t})}},Ts=(e,{defaultValue:t,leftDate:n,rightDate:i,unit:r,onParsedValueChanged:a})=>{const{emit:s}=Ln(),{pickerNs:o}=dt(Tr),l=Ue("date-range-picker"),{t:c,lang:u}=It(),d=cu(u),f=ee(),h=ee(),m=ee({endDate:null,selecting:!1}),p=w=>{m.value=w},A=(w=!1)=>{const S=g(f),L=g(h);cr([S,L])&&s("pick",[S,L],w)},b=w=>{m.value.selecting=w,w||(m.value.endDate=null)},v=()=>{const[w,S]=xs(g(t),{lang:g(u),unit:r,unlinkPanels:e.unlinkPanels});f.value=void 0,h.value=void 0,n.value=w,i.value=S};return Ye(t,w=>{w&&v()},{immediate:!0}),Ye(()=>e.parsedValue,w=>{if(Qe(w)&&w.length===2){const[S,L]=w;f.value=S,n.value=S,h.value=L,a(g(f),g(h))}else v()},{immediate:!0}),{minDate:f,maxDate:h,rangeState:m,lang:u,ppNs:o,drpNs:l,handleChangeRange:p,handleRangeConfirm:A,handleShortcutClick:d,onSelect:b,t:c}},uu=["onClick"],du=["aria-label"],gu=["aria-label"],hu=["disabled","aria-label"],fu=["disabled","aria-label"],mu=["disabled","aria-label"],pu=["disabled","aria-label"],Iu=["aria-label"],vu=["aria-label"],ii="month",Au=Se({__name:"panel-date-range",props:lu,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(e,{emit:t}){const n=e,i=dt("EP_PICKER_BASE"),{disabledDate:r,cellClassName:a,format:s,defaultTime:o,clearable:l}=i.props,c=Tn(i.props,"shortcuts"),u=Tn(i.props,"defaultValue"),{lang:d}=It(),f=ee(le().locale(d.value)),h=ee(le().locale(d.value).add(1,ii)),{minDate:m,maxDate:p,rangeState:A,ppNs:b,drpNs:v,handleChangeRange:w,handleRangeConfirm:S,handleShortcutClick:L,onSelect:z,t:Z}=Ts(n,{defaultValue:u,leftDate:f,rightDate:h,unit:ii,onParsedValueChanged:re}),Y=ee({min:null,max:null}),W=ee({min:null,max:null}),H=Q(()=>`${f.value.year()} ${Z("el.datepicker.year")} ${Z(`el.datepicker.month${f.value.month()+1}`)}`),q=Q(()=>`${h.value.year()} ${Z("el.datepicker.year")} ${Z(`el.datepicker.month${h.value.month()+1}`)}`),oe=Q(()=>f.value.year()),M=Q(()=>f.value.month()),k=Q(()=>h.value.year()),O=Q(()=>h.value.month()),K=Q(()=>!!c.value.length),T=Q(()=>Y.value.min!==null?Y.value.min:m.value?m.value.format(y.value):""),P=Q(()=>Y.value.max!==null?Y.value.max:p.value||m.value?(p.value||m.value).format(y.value):""),I=Q(()=>W.value.min!==null?W.value.min:m.value?m.value.format(D.value):""),N=Q(()=>W.value.max!==null?W.value.max:p.value||m.value?(p.value||m.value).format(D.value):""),D=Q(()=>hs(s)),y=Q(()=>gs(s)),x=J=>cr(J)&&(r?!r(J[0].toDate())&&!r(J[1].toDate()):!0),j=()=>{f.value=f.value.subtract(1,"year"),n.unlinkPanels||(h.value=f.value.add(1,"month")),F("year")},U=()=>{f.value=f.value.subtract(1,"month"),n.unlinkPanels||(h.value=f.value.add(1,"month")),F("month")},Ce=()=>{n.unlinkPanels?h.value=h.value.add(1,"year"):(f.value=f.value.add(1,"year"),h.value=f.value.add(1,"month")),F("year")},fe=()=>{n.unlinkPanels?h.value=h.value.add(1,"month"):(f.value=f.value.add(1,"month"),h.value=f.value.add(1,"month")),F("month")},Oe=()=>{f.value=f.value.add(1,"year"),F("year")},ye=()=>{f.value=f.value.add(1,"month"),F("month")},ke=()=>{h.value=h.value.subtract(1,"year"),F("year")},xe=()=>{h.value=h.value.subtract(1,"month"),F("month")},F=J=>{t("panel-change",[f.value.toDate(),h.value.toDate()],J)},$=Q(()=>{const J=(M.value+1)%12,ae=M.value+1>=12?1:0;return n.unlinkPanels&&new Date(oe.value+ae,J)<new Date(k.value,O.value)}),se=Q(()=>n.unlinkPanels&&k.value*12+O.value-(oe.value*12+M.value+1)>=12),vt=Q(()=>!(m.value&&p.value&&!A.value.selecting&&cr([m.value,p.value]))),et=Q(()=>n.type==="datetime"||n.type==="datetimerange"),Xt=(J,ae)=>{if(J)return o?le(o[ae]||o).locale(d.value).year(J.year()).month(J.month()).date(J.date()):J},mn=(J,ae=!0)=>{const C=J.minDate,ie=J.maxDate,ge=Xt(C,0),Pe=Xt(ie,1);p.value===Pe&&m.value===ge||(t("calendar-change",[C.toDate(),ie&&ie.toDate()]),p.value=Pe,m.value=ge,!(!ae||et.value)&&S())},gt=ee(!1),pe=ee(!1),an=()=>{gt.value=!1},Ft=()=>{pe.value=!1},Ht=(J,ae)=>{Y.value[ae]=J;const C=le(J,y.value).locale(d.value);if(C.isValid()){if(r&&r(C.toDate()))return;ae==="min"?(f.value=C,m.value=(m.value||f.value).year(C.year()).month(C.month()).date(C.date()),!n.unlinkPanels&&(!p.value||p.value.isBefore(m.value))&&(h.value=C.add(1,"month"),p.value=m.value.add(1,"month"))):(h.value=C,p.value=(p.value||h.value).year(C.year()).month(C.month()).date(C.date()),!n.unlinkPanels&&(!m.value||m.value.isAfter(p.value))&&(f.value=C.subtract(1,"month"),m.value=p.value.subtract(1,"month")))}},jt=(J,ae)=>{Y.value[ae]=null},sn=(J,ae)=>{W.value[ae]=J;const C=le(J,D.value).locale(d.value);C.isValid()&&(ae==="min"?(gt.value=!0,m.value=(m.value||f.value).hour(C.hour()).minute(C.minute()).second(C.second()),(!p.value||p.value.isBefore(m.value))&&(p.value=m.value)):(pe.value=!0,p.value=(p.value||h.value).hour(C.hour()).minute(C.minute()).second(C.second()),h.value=p.value,p.value&&p.value.isBefore(m.value)&&(m.value=p.value)))},Jt=(J,ae)=>{W.value[ae]=null,ae==="min"?(f.value=m.value,gt.value=!1):(h.value=p.value,pe.value=!1)},Kt=(J,ae,C)=>{W.value.min||(J&&(f.value=J,m.value=(m.value||f.value).hour(J.hour()).minute(J.minute()).second(J.second())),C||(gt.value=ae),(!p.value||p.value.isBefore(m.value))&&(p.value=m.value,h.value=J))},On=(J,ae,C)=>{W.value.max||(J&&(h.value=J,p.value=(p.value||h.value).hour(J.hour()).minute(J.minute()).second(J.second())),C||(pe.value=ae),p.value&&p.value.isBefore(m.value)&&(m.value=p.value))},on=()=>{f.value=xs(g(u),{lang:g(d),unit:"month",unlinkPanels:n.unlinkPanels})[0],h.value=f.value.add(1,"month"),t("pick",null)},$t=J=>Qe(J)?J.map(ae=>ae.format(s)):J.format(s),G=J=>Qe(J)?J.map(ae=>le(ae,s).locale(d.value)):le(J,s).locale(d.value);function re(J,ae){if(n.unlinkPanels&&ae){const C=(J==null?void 0:J.year())||0,ie=(J==null?void 0:J.month())||0,ge=ae.year(),Pe=ae.month();h.value=C===ge&&ie===Pe?ae.add(1,ii):ae}else h.value=f.value.add(1,ii),ae&&(h.value=h.value.hour(ae.hour()).minute(ae.minute()).second(ae.second()))}return t("set-picker-option",["isValidValue",x]),t("set-picker-option",["parseUserInput",G]),t("set-picker-option",["formatToString",$t]),t("set-picker-option",["handleClear",on]),(J,ae)=>(_(),ne("div",{class:E([g(b).b(),g(v).b(),{"has-sidebar":J.$slots.sidebar||g(K),"has-time":g(et)}])},[B("div",{class:E(g(b).e("body-wrapper"))},[gn(J.$slots,"sidebar",{class:E(g(b).e("sidebar"))}),g(K)?(_(),ne("div",{key:0,class:E(g(b).e("sidebar"))},[(_(!0),ne(Ze,null,Je(g(c),(C,ie)=>(_(),ne("button",{key:ie,type:"button",class:E(g(b).e("shortcut")),onClick:ge=>g(L)(C)},Me(C.text),11,uu))),128))],2)):Ie("v-if",!0),B("div",{class:E(g(b).e("body"))},[g(et)?(_(),ne("div",{key:0,class:E(g(v).e("time-header"))},[B("span",{class:E(g(v).e("editors-wrap"))},[B("span",{class:E(g(v).e("time-picker-wrap"))},[V(g(Bt),{size:"small",disabled:g(A).selecting,placeholder:g(Z)("el.datepicker.startDate"),class:E(g(v).e("editor")),"model-value":g(T),"validate-event":!1,onInput:ae[0]||(ae[0]=C=>Ht(C,"min")),onChange:ae[1]||(ae[1]=C=>jt(C,"min"))},null,8,["disabled","placeholder","class","model-value"])],2),He((_(),ne("span",{class:E(g(v).e("time-picker-wrap"))},[V(g(Bt),{size:"small",class:E(g(v).e("editor")),disabled:g(A).selecting,placeholder:g(Z)("el.datepicker.startTime"),"model-value":g(I),"validate-event":!1,onFocus:ae[2]||(ae[2]=C=>gt.value=!0),onInput:ae[3]||(ae[3]=C=>sn(C,"min")),onChange:ae[4]||(ae[4]=C=>Jt(C,"min"))},null,8,["class","disabled","placeholder","model-value"]),V(g(lr),{visible:gt.value,format:g(D),"datetime-role":"start","parsed-value":f.value,onPick:Kt},null,8,["visible","format","parsed-value"])],2)),[[g(bi),an]])],2),B("span",null,[V(g(De),null,{default:te(()=>[V(g(hi))]),_:1})]),B("span",{class:E([g(v).e("editors-wrap"),"is-right"])},[B("span",{class:E(g(v).e("time-picker-wrap"))},[V(g(Bt),{size:"small",class:E(g(v).e("editor")),disabled:g(A).selecting,placeholder:g(Z)("el.datepicker.endDate"),"model-value":g(P),readonly:!g(m),"validate-event":!1,onInput:ae[5]||(ae[5]=C=>Ht(C,"max")),onChange:ae[6]||(ae[6]=C=>jt(C,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"])],2),He((_(),ne("span",{class:E(g(v).e("time-picker-wrap"))},[V(g(Bt),{size:"small",class:E(g(v).e("editor")),disabled:g(A).selecting,placeholder:g(Z)("el.datepicker.endTime"),"model-value":g(N),readonly:!g(m),"validate-event":!1,onFocus:ae[7]||(ae[7]=C=>g(m)&&(pe.value=!0)),onInput:ae[8]||(ae[8]=C=>sn(C,"max")),onChange:ae[9]||(ae[9]=C=>Jt(C,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"]),V(g(lr),{"datetime-role":"end",visible:pe.value,format:g(D),"parsed-value":h.value,onPick:On},null,8,["visible","format","parsed-value"])],2)),[[g(bi),Ft]])],2)],2)):Ie("v-if",!0),B("div",{class:E([[g(b).e("content"),g(v).e("content")],"is-left"])},[B("div",{class:E(g(v).e("header"))},[B("button",{type:"button",class:E([g(b).e("icon-btn"),"d-arrow-left"]),"aria-label":g(Z)("el.datepicker.prevYear"),onClick:j},[V(g(De),null,{default:te(()=>[V(g(Hn))]),_:1})],10,du),B("button",{type:"button",class:E([g(b).e("icon-btn"),"arrow-left"]),"aria-label":g(Z)("el.datepicker.prevMonth"),onClick:U},[V(g(De),null,{default:te(()=>[V(g(or))]),_:1})],10,gu),J.unlinkPanels?(_(),ne("button",{key:0,type:"button",disabled:!g(se),class:E([[g(b).e("icon-btn"),{"is-disabled":!g(se)}],"d-arrow-right"]),"aria-label":g(Z)("el.datepicker.nextYear"),onClick:Oe},[V(g(De),null,{default:te(()=>[V(g(Jn))]),_:1})],10,hu)):Ie("v-if",!0),J.unlinkPanels?(_(),ne("button",{key:1,type:"button",disabled:!g($),class:E([[g(b).e("icon-btn"),{"is-disabled":!g($)}],"arrow-right"]),"aria-label":g(Z)("el.datepicker.nextMonth"),onClick:ye},[V(g(De),null,{default:te(()=>[V(g(hi))]),_:1})],10,fu)):Ie("v-if",!0),B("div",null,Me(g(H)),1)],2),V(dr,{"selection-mode":"range",date:f.value,"min-date":g(m),"max-date":g(p),"range-state":g(A),"disabled-date":g(r),"cell-class-name":g(a),onChangerange:g(w),onPick:mn,onSelect:g(z)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),B("div",{class:E([[g(b).e("content"),g(v).e("content")],"is-right"])},[B("div",{class:E(g(v).e("header"))},[J.unlinkPanels?(_(),ne("button",{key:0,type:"button",disabled:!g(se),class:E([[g(b).e("icon-btn"),{"is-disabled":!g(se)}],"d-arrow-left"]),"aria-label":g(Z)("el.datepicker.prevYear"),onClick:ke},[V(g(De),null,{default:te(()=>[V(g(Hn))]),_:1})],10,mu)):Ie("v-if",!0),J.unlinkPanels?(_(),ne("button",{key:1,type:"button",disabled:!g($),class:E([[g(b).e("icon-btn"),{"is-disabled":!g($)}],"arrow-left"]),"aria-label":g(Z)("el.datepicker.prevMonth"),onClick:xe},[V(g(De),null,{default:te(()=>[V(g(or))]),_:1})],10,pu)):Ie("v-if",!0),B("button",{type:"button","aria-label":g(Z)("el.datepicker.nextYear"),class:E([g(b).e("icon-btn"),"d-arrow-right"]),onClick:Ce},[V(g(De),null,{default:te(()=>[V(g(Jn))]),_:1})],10,Iu),B("button",{type:"button",class:E([g(b).e("icon-btn"),"arrow-right"]),"aria-label":g(Z)("el.datepicker.nextMonth"),onClick:fe},[V(g(De),null,{default:te(()=>[V(g(hi))]),_:1})],10,vu),B("div",null,Me(g(q)),1)],2),V(dr,{"selection-mode":"range",date:h.value,"min-date":g(m),"max-date":g(p),"range-state":g(A),"disabled-date":g(r),"cell-class-name":g(a),onChangerange:g(w),onPick:mn,onSelect:g(z)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),g(et)?(_(),ne("div",{key:0,class:E(g(b).e("footer"))},[g(l)?(_(),be(g(nn),{key:0,text:"",size:"small",class:E(g(b).e("link-btn")),onClick:on},{default:te(()=>[qe(Me(g(Z)("el.datepicker.clear")),1)]),_:1},8,["class"])):Ie("v-if",!0),V(g(nn),{plain:"",size:"small",class:E(g(b).e("link-btn")),disabled:g(vt),onClick:ae[10]||(ae[10]=C=>g(S)(!1))},{default:te(()=>[qe(Me(g(Z)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2)):Ie("v-if",!0)],2))}});var Cu=nt(Au,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-range.vue"]]);const bu=Ve({...ks}),yu=["pick","set-picker-option","calendar-change"],wu=({unlinkPanels:e,leftDate:t,rightDate:n})=>{const{t:i}=It(),r=()=>{t.value=t.value.subtract(1,"year"),e.value||(n.value=n.value.subtract(1,"year"))},a=()=>{e.value||(t.value=t.value.add(1,"year")),n.value=n.value.add(1,"year")},s=()=>{t.value=t.value.add(1,"year")},o=()=>{n.value=n.value.subtract(1,"year")},l=Q(()=>`${t.value.year()} ${i("el.datepicker.year")}`),c=Q(()=>`${n.value.year()} ${i("el.datepicker.year")}`),u=Q(()=>t.value.year()),d=Q(()=>n.value.year()===t.value.year()?t.value.year()+1:n.value.year());return{leftPrevYear:r,rightNextYear:a,leftNextYear:s,rightPrevYear:o,leftLabel:l,rightLabel:c,leftYear:u,rightYear:d}},Mu=["onClick"],Nu=["disabled"],ku=["disabled"],ri="year",Du=Se({name:"DatePickerMonthRange"}),xu=Se({...Du,props:bu,emits:yu,setup(e,{emit:t}){const n=e,{lang:i}=It(),r=dt("EP_PICKER_BASE"),{shortcuts:a,disabledDate:s,format:o}=r.props,l=Tn(r.props,"defaultValue"),c=ee(le().locale(i.value)),u=ee(le().locale(i.value).add(1,ri)),{minDate:d,maxDate:f,rangeState:h,ppNs:m,drpNs:p,handleChangeRange:A,handleRangeConfirm:b,handleShortcutClick:v,onSelect:w}=Ts(n,{defaultValue:l,leftDate:c,rightDate:u,unit:ri,onParsedValueChanged:K}),S=Q(()=>!!a.length),{leftPrevYear:L,rightNextYear:z,leftNextYear:Z,rightPrevYear:Y,leftLabel:W,rightLabel:H,leftYear:q,rightYear:oe}=wu({unlinkPanels:Tn(n,"unlinkPanels"),leftDate:c,rightDate:u}),M=Q(()=>n.unlinkPanels&&oe.value>q.value+1),k=(T,P=!0)=>{const I=T.minDate,N=T.maxDate;f.value===N&&d.value===I||(t("calendar-change",[I.toDate(),N&&N.toDate()]),f.value=N,d.value=I,P&&b())},O=T=>T.map(P=>P.format(o));function K(T,P){if(n.unlinkPanels&&P){const I=(T==null?void 0:T.year())||0,N=P.year();u.value=I===N?P.add(1,ri):P}else u.value=c.value.add(1,ri)}return t("set-picker-option",["formatToString",O]),(T,P)=>(_(),ne("div",{class:E([g(m).b(),g(p).b(),{"has-sidebar":!!T.$slots.sidebar||g(S)}])},[B("div",{class:E(g(m).e("body-wrapper"))},[gn(T.$slots,"sidebar",{class:E(g(m).e("sidebar"))}),g(S)?(_(),ne("div",{key:0,class:E(g(m).e("sidebar"))},[(_(!0),ne(Ze,null,Je(g(a),(I,N)=>(_(),ne("button",{key:N,type:"button",class:E(g(m).e("shortcut")),onClick:D=>g(v)(I)},Me(I.text),11,Mu))),128))],2)):Ie("v-if",!0),B("div",{class:E(g(m).e("body"))},[B("div",{class:E([[g(m).e("content"),g(p).e("content")],"is-left"])},[B("div",{class:E(g(p).e("header"))},[B("button",{type:"button",class:E([g(m).e("icon-btn"),"d-arrow-left"]),onClick:P[0]||(P[0]=(...I)=>g(L)&&g(L)(...I))},[V(g(De),null,{default:te(()=>[V(g(Hn))]),_:1})],2),T.unlinkPanels?(_(),ne("button",{key:0,type:"button",disabled:!g(M),class:E([[g(m).e("icon-btn"),{[g(m).is("disabled")]:!g(M)}],"d-arrow-right"]),onClick:P[1]||(P[1]=(...I)=>g(Z)&&g(Z)(...I))},[V(g(De),null,{default:te(()=>[V(g(Jn))]),_:1})],10,Nu)):Ie("v-if",!0),B("div",null,Me(g(W)),1)],2),V(gr,{"selection-mode":"range",date:c.value,"min-date":g(d),"max-date":g(f),"range-state":g(h),"disabled-date":g(s),onChangerange:g(A),onPick:k,onSelect:g(w)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),B("div",{class:E([[g(m).e("content"),g(p).e("content")],"is-right"])},[B("div",{class:E(g(p).e("header"))},[T.unlinkPanels?(_(),ne("button",{key:0,type:"button",disabled:!g(M),class:E([[g(m).e("icon-btn"),{"is-disabled":!g(M)}],"d-arrow-left"]),onClick:P[2]||(P[2]=(...I)=>g(Y)&&g(Y)(...I))},[V(g(De),null,{default:te(()=>[V(g(Hn))]),_:1})],10,ku)):Ie("v-if",!0),B("button",{type:"button",class:E([g(m).e("icon-btn"),"d-arrow-right"]),onClick:P[3]||(P[3]=(...I)=>g(z)&&g(z)(...I))},[V(g(De),null,{default:te(()=>[V(g(Jn))]),_:1})],2),B("div",null,Me(g(H)),1)],2),V(gr,{"selection-mode":"range",date:u.value,"min-date":g(d),"max-date":g(f),"range-state":g(h),"disabled-date":g(s),onChangerange:g(A),onPick:k,onSelect:g(w)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var Tu=nt(xu,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-month-range.vue"]]);const Su=function(e){switch(e){case"daterange":case"datetimerange":return Cu;case"monthrange":return Tu;default:return ou}};le.extend(jl);le.extend(fc);le.extend(pl);le.extend(pc);le.extend(vc);le.extend(Cc);le.extend(yc);le.extend(Mc);var zu=Se({name:"ElDatePicker",install:null,props:Nc,emits:["update:modelValue"],setup(e,{expose:t,emit:n,slots:i}){const r=Ue("picker-panel");Ci("ElPopperOptions",Di(Tn(e,"popperOptions"))),Ci(Tr,{slots:i,pickerNs:r});const a=ee();t({focus:(l=!0)=>{var c;(c=a.value)==null||c.focus(l)},handleOpen:()=>{var l;(l=a.value)==null||l.handleOpen()},handleClose:()=>{var l;(l=a.value)==null||l.handleClose()}});const o=l=>{n("update:modelValue",l)};return()=>{var l;const c=(l=e.format)!=null?l:Il[e.type]||bn,u=Su(e.type);return V(wl,ns(e,{format:c,type:e.type,ref:a,"onUpdate:modelValue":o}),{default:d=>V(u,d,null),"range-separator":i["range-separator"]})}}});const pi=zu;pi.install=e=>{e.component(pi.name,pi)};const Lu=pi,Ou=Ve({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Cr,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>e===null||Tt(e)||["min","max"].includes(e),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0}}),Pu={[Dr]:(e,t)=>t!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[fi]:e=>Tt(e)||en(e),[qt]:e=>Tt(e)||en(e)},Bu=["aria-label","onKeydown"],Zu=["aria-label","onKeydown"],ju=Se({name:"ElInputNumber"}),Gu=Se({...ju,props:Ou,emits:Pu,setup(e,{expose:t,emit:n}){const i=e,{t:r}=It(),a=Ue("input-number"),s=ee(),o=Di({currentValue:i.modelValue,userInput:null}),{formItem:l}=Nr(),c=Q(()=>Tt(i.modelValue)&&i.modelValue<=i.min),u=Q(()=>Tt(i.modelValue)&&i.modelValue>=i.max),d=Q(()=>{const M=b(i.step);return Rn(i.precision)?Math.max(b(i.modelValue),M):(M>i.precision,i.precision)}),f=Q(()=>i.controls&&i.controlsPosition==="right"),h=kr(),m=ss(),p=Q(()=>{if(o.userInput!==null)return o.userInput;let M=o.currentValue;if(en(M))return"";if(Tt(M)){if(Number.isNaN(M))return"";Rn(i.precision)||(M=M.toFixed(i.precision))}return M}),A=(M,k)=>{if(Rn(k)&&(k=d.value),k===0)return Math.round(M);let O=String(M);const K=O.indexOf(".");if(K===-1||!O.replace(".","").split("")[K+k])return M;const I=O.length;return O.charAt(I-1)==="5"&&(O=`${O.slice(0,Math.max(0,I-1))}6`),Number.parseFloat(Number(O).toFixed(k))},b=M=>{if(en(M))return 0;const k=M.toString(),O=k.indexOf(".");let K=0;return O!==-1&&(K=k.length-O-1),K},v=(M,k=1)=>Tt(M)?A(M+i.step*k):o.currentValue,w=()=>{if(i.readonly||m.value||u.value)return;const M=Number(p.value)||0,k=v(M);z(k),n(fi,o.currentValue)},S=()=>{if(i.readonly||m.value||c.value)return;const M=Number(p.value)||0,k=v(M,-1);z(k),n(fi,o.currentValue)},L=(M,k)=>{const{max:O,min:K,step:T,precision:P,stepStrictly:I,valueOnClear:N}=i;O<K&&ol("InputNumber","min should not be greater than max.");let D=Number(M);if(en(M)||Number.isNaN(D))return null;if(M===""){if(N===null)return null;D=gi(N)?{min:K,max:O}[N]:N}return I&&(D=A(Math.round(D/T)*T,P)),Rn(P)||(D=A(D,P)),(D>O||D<K)&&(D=D>O?O:K,k&&n(qt,D)),D},z=(M,k=!0)=>{var O;const K=o.currentValue,T=L(M);if(!k){n(qt,T);return}K!==T&&(o.userInput=null,n(qt,T),n(Dr,T,K),i.validateEvent&&((O=l==null?void 0:l.validate)==null||O.call(l,"change").catch(P=>Sn())),o.currentValue=T)},Z=M=>{o.userInput=M;const k=M===""?null:Number(M);n(fi,k),z(k,!1)},Y=M=>{const k=M!==""?Number(M):"";(Tt(k)&&!Number.isNaN(k)||M==="")&&z(k),o.userInput=null},W=()=>{var M,k;(k=(M=s.value)==null?void 0:M.focus)==null||k.call(M)},H=()=>{var M,k;(k=(M=s.value)==null?void 0:M.blur)==null||k.call(M)},q=M=>{n("focus",M)},oe=M=>{var k;n("blur",M),i.validateEvent&&((k=l==null?void 0:l.validate)==null||k.call(l,"blur").catch(O=>Sn()))};return Ye(()=>i.modelValue,M=>{const k=L(o.userInput),O=L(M,!0);!Tt(k)&&(!k||k!==O)&&(o.currentValue=O,o.userInput=null)},{immediate:!0}),zn(()=>{var M;const{min:k,max:O,modelValue:K}=i,T=(M=s.value)==null?void 0:M.input;if(T.setAttribute("role","spinbutton"),Number.isFinite(O)?T.setAttribute("aria-valuemax",String(O)):T.removeAttribute("aria-valuemax"),Number.isFinite(k)?T.setAttribute("aria-valuemin",String(k)):T.removeAttribute("aria-valuemin"),T.setAttribute("aria-valuenow",o.currentValue||o.currentValue===0?String(o.currentValue):""),T.setAttribute("aria-disabled",String(m.value)),!Tt(K)&&K!=null){let P=Number(K);Number.isNaN(P)&&(P=null),n(qt,P)}}),Ro(()=>{var M,k;const O=(M=s.value)==null?void 0:M.input;O==null||O.setAttribute("aria-valuenow",`${(k=o.currentValue)!=null?k:""}`)}),t({focus:W,blur:H}),(M,k)=>(_(),ne("div",{class:E([g(a).b(),g(a).m(g(h)),g(a).is("disabled",g(m)),g(a).is("without-controls",!M.controls),g(a).is("controls-right",g(f))]),onDragstart:k[1]||(k[1]=ct(()=>{},["prevent"]))},[M.controls?He((_(),ne("span",{key:0,role:"button","aria-label":g(r)("el.inputNumber.decrease"),class:E([g(a).e("decrease"),g(a).is("disabled",g(c))]),onKeydown:pt(S,["enter"])},[V(g(De),null,{default:te(()=>[g(f)?(_(),be(g(yr),{key:0})):(_(),be(g(Yo),{key:1}))]),_:1})],42,Bu)),[[g(yi),S]]):Ie("v-if",!0),M.controls?He((_(),ne("span",{key:1,role:"button","aria-label":g(r)("el.inputNumber.increase"),class:E([g(a).e("increase"),g(a).is("disabled",g(u))]),onKeydown:pt(w,["enter"])},[V(g(De),null,{default:te(()=>[g(f)?(_(),be(g(is),{key:0})):(_(),be(g(_o),{key:1}))]),_:1})],42,Zu)),[[g(yi),w]]):Ie("v-if",!0),V(g(Bt),{id:M.id,ref_key:"input",ref:s,type:"number",step:M.step,"model-value":g(p),placeholder:M.placeholder,readonly:M.readonly,disabled:g(m),size:g(h),max:M.max,min:M.min,name:M.name,label:M.label,"validate-event":!1,onWheel:k[0]||(k[0]=ct(()=>{},["prevent"])),onKeydown:[pt(ct(w,["prevent"]),["up"]),pt(ct(S,["prevent"]),["down"])],onBlur:oe,onFocus:q,onInput:Z,onChange:Y},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var Eu=nt(Gu,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Ru=wr(Eu),Yu=Ve({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:Wo}}),_u={click:e=>e instanceof MouseEvent},Wu=["href"],Uu=Se({name:"ElLink"}),Vu=Se({...Uu,props:Yu,emits:_u,setup(e,{emit:t}){const n=e,i=Ue("link"),r=Q(()=>[i.b(),i.m(n.type),i.is("disabled",n.disabled),i.is("underline",n.underline&&!n.disabled)]);function a(s){n.disabled||t("click",s)}return(s,o)=>(_(),ne("a",{class:E(g(r)),href:s.disabled||!s.href?void 0:s.href,onClick:a},[s.icon?(_(),be(g(De),{key:0},{default:te(()=>[(_(),be(En(s.icon)))]),_:1})):Ie("v-if",!0),s.$slots.default?(_(),ne("span",{key:1,class:E(g(i).e("inner"))},[gn(s.$slots,"default")],2)):Ie("v-if",!0),s.$slots.icon?gn(s.$slots,"icon",{key:2}):Ie("v-if",!0)],10,Wu))}});var Xu=nt(Vu,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const Fu=wr(Xu);const Gt={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},Hu=Object.keys(Gt).map(e=>Gt[e]).join(""),Gi="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",Ju=/\s/g,ua=new RegExp(`^(${Gi}\\*)?([${Hu}])(/${Gi})?([-+]{1,2}${Gi})?$`,"g");function Ss(e){throw new Error(`Invalid calc() expression: ${e}`)}function Ku(e,t){const n=ua.exec(e.replace(Ju,""));n||Ss(e),ua.lastIndex=0;const[,i,r,a,s]=n,{x:o,y:l,width:c,height:u}=t;let d=0;switch(r){case Gt.width:{d=c;break}case Gt.height:{d=u;break}case Gt.x:{d=o;break}case Gt.y:{d=l;break}case Gt.minimum:{d=Math.min(u,c);break}case Gt.maximum:{d=Math.max(u,c);break}case Gt.diagonal:{d=Math.sqrt(u*u+c*c);break}}return i&&(d*=parseFloat(i)),a&&(d/=parseFloat(a.slice(1))),s&&(d+=$u(s)),d}function $u(e){if(!e)return 0;const[t]=e;switch(t){case"+":return parseFloat(e.substr(1));case"-":return-parseFloat(e.substr(1))}return parseFloat(e)}function Lt(e){return typeof e=="string"&&e.includes("calc")}const zs="calc(",da=zs.length;function Ot(e,t){let n=e,i=0;do{let r=n.indexOf(zs,i);if(r===-1)return n;let a=r+da,s=1;e:do{switch(n[a]){case"(":{s++;break}case")":{if(s--,s===0)break e;break}case void 0:Ss(n)}a++}while(!0);let o=n.slice(r+da,a);Lt(o)&&(o=Ot(o,t));const l=String(Ku(o,t));n=n.slice(0,r)+l+n.slice(a+1),i=r+l.length}while(!0)}function Ls(e){e=kn(e);const t=ve(e).reduce(function(n,i){return n[i.id]=i.clone(),n},{});return ve(e).forEach(function(n){const i=t[n.id];if(i.isLink()){const s=i.source(),o=i.target();s.id&&t[s.id]&&i.prop("source/id",t[s.id].id),o.id&&t[o.id]&&i.prop("target/id",t[o.id].id)}const r=n.get("parent");r&&t[r]&&i.set("parent",t[r].id);const a=ve(n.get("embeds")).reduce(function(s,o){return t[o]&&s.push(t[o].id),s},[]);Rt(a)||i.set("embeds",a)}),t}const Qu=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"],qu=Qu.reduce((e,t)=>(e[t]=!0,e),{}),ed={qualify:function(e){return Xe(e)},set:function(e,t,n){Object.keys(e).forEach(function(i){if(qu[i]&&i in n){const r=e[i];n.tagName==="SELECT"&&Array.isArray(r)?Array.from(n.options).forEach(function(a,s){a.selected=r.includes(a.value)}):n[i]=r}})}},td=ed;function Qt(e,t){return function(n,i){var r=ut(n);n=parseFloat(n),r&&(n/=100);var a={};if(isFinite(n)){var s=r||n>=0&&n<=1?n*i[t]:Math.max(n+i[t],0);a[e]=s}return a}}function ai(e,t,n){return function(i,r){var a=ut(i);i=parseFloat(i),a&&(i/=100);var s;if(isFinite(i)){var o=r[n]();a||i>0&&i<1?s=o[e]+r[t]*i:s=o[e]+i}var l=X();return l[e]=s||0,l}}function ga(e,t,n){return function(i,r){var a;i==="middle"?a=r[t]/2:i===n?a=r[t]:isFinite(i)?a=i>-1&&i<1?-r[t]*i:-i:ut(i)?a=r[t]*parseFloat(i)/100:a=0;var s=X();return s[e]=-(r[e]+a),s}}function Os(e,t){var n="joint-shape",i=t&&t.resetOffset;return function(r,a,s){var o=Ee(s),l=o.data(n);if(!l||l.value!==r){var c=e(r);l={value:r,shape:c,shapeBBox:c.bbox()},o.data(n,l)}var u=l.shape.clone(),d=l.shapeBBox.clone(),f=d.origin(),h=a.origin();d.x=h.x,d.y=h.y;var m=a.maxRectScaleToFit(d,h),p=d.width===0||a.width===0?1:m.sx,A=d.height===0||a.height===0?1:m.sy;return u.scale(p,A,f),i&&u.translate(-f.x,-f.y),u}}function ha(e){function t(i){return new Le(R.normalizePathData(i))}var n=Os(t,e);return function(i,r,a){var s=n(i,r,a);return{d:s.serialize()}}}function fa(e){var t=Os(Vn,e);return function(n,i,r){var a=t(n,i,r);return{points:a.serialize()}}}function si(e,t){var n=new X(1,0);return function(i){var r,a,s=this[e](i);return s?(a=t.rotate?s.vector().vectorAngle(n):0,r=s.start):(r=this.path.start,a=0),a===0?{transform:"translate("+r.x+","+r.y+")"}:{transform:"translate("+r.x+","+r.y+") rotate("+a+")"}}}function ma(e){return function(n,i,r){const a=R(r);a.attr(e)!==n&&a.attr(e,n)}}function In(e,t,n){return n.text!==void 0}function jn(){return this.model.isLink()}function Ei(e){var t={},n=e.stroke;typeof n=="string"&&(t.stroke=n,t.fill=n);var i=e.strokeOpacity;return i===void 0&&(i=e["stroke-opacity"]),i===void 0&&(i=e.opacity),i!==void 0&&(t["stroke-opacity"]=i,t["fill-opacity"]=i),t}function pa(e){const{paper:t}=this;return`url(#${e.type==="pattern"?t.definePattern(e):t.defineGradient(e)})`}const de={xlinkShow:{set:"xlink:show"},xlinkRole:{set:"xlink:role"},xlinkType:{set:"xlink:type"},xlinkArcrole:{set:"xlink:arcrole"},xlinkTitle:{set:"xlink:title"},xlinkActuate:{set:"xlink:actuate"},xmlSpace:{set:"xml:space"},xmlBase:{set:"xml:base"},xmlLang:{set:"xml:lang"},preserveAspectRatio:{set:"preserveAspectRatio"},requiredExtension:{set:"requiredExtension"},requiredFeatures:{set:"requiredFeatures"},systemLanguage:{set:"systemLanguage"},externalResourcesRequired:{set:"externalResourceRequired"},href:{set:ma("href")},xlinkHref:{set:ma("xlink:href")},filter:{qualify:Xe,set:function(e){return"url(#"+this.paper.defineFilter(e)+")"}},fill:{qualify:Xe,set:pa},stroke:{qualify:Xe,set:pa},sourceMarker:{qualify:Xe,set:function(e,t,n,i){return e=ce(Ei(i),e),{"marker-start":"url(#"+this.paper.defineMarker(e)+")"}}},targetMarker:{qualify:Xe,set:function(e,t,n,i){return e=ce(Ei(i),{transform:"rotate(180)"},e),{"marker-end":"url(#"+this.paper.defineMarker(e)+")"}}},vertexMarker:{qualify:Xe,set:function(e,t,n,i){return e=ce(Ei(i),e),{"marker-mid":"url(#"+this.paper.defineMarker(e)+")"}}},text:{qualify:function(e,t,n){return!n.textWrap||!Xe(n.textWrap)},set:function(e,t,n,i){var r=Ee(n),a="joint-text",s=r.data(a),o=oo(i,"lineHeight","annotations","textPath","x","textVerticalAnchor","eol","displayEmpty");const{x:l}=o;Lt(l)&&(o.x=Ot(l,t));let c=i["font-size"]||i.fontSize;Lt(c)&&(c=Ot(c,t));var u=o.fontSize=c,d=JSON.stringify([e,o]);if(s===void 0||s!==d){u&&n.setAttribute("font-size",u);var f=o.textPath;if(je(f)){var h=f.selector;if(typeof h=="string"){var m=this.findBySelector(h)[0];m instanceof SVGPathElement&&(o.textPath=ce({"xlink:href":"#"+m.id},f))}}R(n).text(""+e,o),r.data(a,d)}}},textWrap:{qualify:Xe,set:function(e,t,n,i){var r={},a=e.width||0;ut(a)?r.width=t.width*parseFloat(a)/100:Lt(a)?r.width=Number(Ot(a,t)):e.width===null?r.width=1/0:a<=0?r.width=t.width+a:r.width=a;var s=e.height||0;ut(s)?r.height=t.height*parseFloat(s)/100:Lt(s)?r.height=Number(Ot(s,t)):e.height===null||(s<=0?r.height=t.height+s:r.height=s);var o,l=e.text;if(l===void 0&&(l=i.text),l!==void 0){const c=e.breakText||Fa,u=i["font-size"]||i.fontSize;o=c(""+l,r,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":Lt(u)?Ot(u,t):u,"font-family":i["font-family"]||i.fontFamily,lineHeight:i.lineHeight,"letter-spacing":"letter-spacing"in i?i["letter-spacing"]:i.letterSpacing},{svgDocument:this.paper.svg,ellipsis:e.ellipsis,hyphen:e.hyphen,maxLineCount:e.maxLineCount,preserveSpaces:e.preserveSpaces})}else o="";de.text.set.call(this,o,t,n,i)}},title:{qualify:function(e,t){return t instanceof SVGElement},set:function(e,t,n){var i=Ee(n),r="joint-title",a=i.data(r);if(a===void 0||a!==e){if(i.data(r,e),n.tagName==="title"){n.textContent=e;return}var s=n.firstElementChild;if(s&&s.tagName==="title")s.textContent=e;else{var o=document.createElementNS(n.namespaceURI,"title");o.textContent=e,n.insertBefore(o,s)}}}},lineHeight:{qualify:In},textVerticalAnchor:{qualify:In},textPath:{qualify:In},annotations:{qualify:In},eol:{qualify:In},displayEmpty:{qualify:In},port:{set:function(e){return e===null||e.id===void 0?e:e.id}},style:{qualify:Xe,set:function(e,t,n){Ee(n).css(e)}},html:{set:function(e,t,n){Ee(n).html(e+"")}},props:td,ref:{},refX:{position:ai("x","width","origin")},refY:{position:ai("y","height","origin")},refDx:{position:ai("x","width","corner")},refDy:{position:ai("y","height","corner")},refWidth:{set:Qt("width","width")},refHeight:{set:Qt("height","height")},refRx:{set:Qt("rx","width")},refRy:{set:Qt("ry","height")},refRInscribed:{set:function(e){var t=Qt(e,"width"),n=Qt(e,"height");return function(i,r){var a=r.height>r.width?t:n;return a(i,r)}}("r")},refRCircumscribed:{set:function(e,t){var n=ut(e);e=parseFloat(e),n&&(e/=100);var i=Math.sqrt(t.height*t.height+t.width*t.width),r;return isFinite(e)&&(n||e>=0&&e<=1?r=e*i:r=Math.max(e+i,0)),{r}}},refCx:{set:Qt("cx","width")},refCy:{set:Qt("cy","height")},xAlignment:{offset:ga("x","width","right")},yAlignment:{offset:ga("y","height","bottom")},resetOffset:{offset:function(e,t){return e?{x:-t.x,y:-t.y}:{x:0,y:0}}},refDResetOffset:{set:ha({resetOffset:!0})},refDKeepOffset:{set:ha({resetOffset:!1})},refPointsResetOffset:{set:fa({resetOffset:!0})},refPointsKeepOffset:{set:fa({resetOffset:!1})},connection:{qualify:jn,set:function({stubs:e=0}){let t;if(isFinite(e)&&e!==0){let n;e<0?n=(this.getConnectionLength()+e)/2:n=e;const i=this.getConnection(),r=this.getConnectionSubdivisions(),a=i.divideAtLength(n,{segmentSubdivisions:r}),s=i.divideAtLength(-n,{segmentSubdivisions:r});a&&s&&(t=`${a[0].serialize()} ${s[1].serialize()}`)}return{d:t||this.getSerializedConnection()}}},atConnectionLengthKeepGradient:{qualify:jn,set:si("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient:{qualify:jn,set:si("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient:{qualify:jn,set:si("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient:{qualify:jn,set:si("getTangentAtRatio",{rotate:!1})}};de["xlink:href"]=de.xlinkHref;["transform","d","points","cx","cy","x1","x2","y1","y2","x","y","dx","dy"].forEach(e=>{de[e]={qualify:Lt,set:function(n,i){return{[e]:Ot(n,i)}}}});["width","height","r","rx","ry","font-size","stroke-width"].forEach(e=>{de[e]={qualify:Lt,set:function(n,i){return{[e]:Math.max(0,Ot(n,i))}}}});de.refR=de.refRInscribed;de.refD=de.refDResetOffset;de.refPoints=de.refPointsResetOffset;de.atConnectionLength=de.atConnectionLengthKeepGradient;de.atConnectionRatio=de.atConnectionRatioKeepGradient;de.fontSize=de["font-size"];de.strokeWidth=de["stroke-width"];de.refX2=de.refX;de.refY2=de.refY;de.refWidth2=de.refWidth;de.refHeight2=de.refHeight;de["ref-x"]=de.refX;de["ref-y"]=de.refY;de["ref-dy"]=de.refDy;de["ref-dx"]=de.refDx;de["ref-width"]=de.refWidth;de["ref-height"]=de.refHeight;de["x-alignment"]=de.xAlignment;de["y-alignment"]=de.yAlignment;const Ps=de,Zt=St.Model.extend({constructor:function(e,t){var n,i=e||{};typeof this.preinitialize=="function"&&this.preinitialize.apply(this,arguments),this.cid=lo("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(i=this.parse(i,t)||{}),(n=ft(this,"defaults"))&&(i=Fe({},n,i)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},translate:function(e,t,n){throw new Error("Must define a translate() method.")},toJSON:function(){const t=ft(this.constructor.prototype,"defaults").attrs||{},n=this.attributes.attrs,i={};Nt(n,function(a,s){const o=t[s];Nt(a,function(l,c){je(l)&&!Array.isArray(l)?Nt(l,function(u,d){(!o||!o[c]||!wn(o[c][d],u))&&(i[s]=i[s]||{},(i[s][c]||(i[s][c]={}))[d]=u)}):(!o||!wn(o[c],l))&&(i[s]=i[s]||{},i[s][c]=l)})});const r=At(dn(this.attributes,"attrs"));return r.attrs=i,r},initialize:function(e){const t=this.getIdAttribute();(!e||e[t]===void 0)&&this.set(t,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return co()},processPorts:function(){var e=this.ports,t={};Nt(this.get("attrs"),function(a,s){a&&a.port&&(a.port.id!==void 0?t[a.port.id]=a.port:t[a.port]={id:a.port})});var n={};if(Nt(e,function(a,s){t[s]||(n[s]=!0)}),this.graph&&!Rt(n)){var i=this.graph.getConnectedLinks(this,{inbound:!0});i.forEach(function(a){n[a.get("target").port]&&a.remove()});var r=this.graph.getConnectedLinks(this,{outbound:!0});r.forEach(function(a){n[a.get("source").port]&&a.remove()})}this.ports=t},remove:function(e={}){const{graph:t,collection:n}=this;if(!t)return n&&n.remove(this,e),this;t.startBatch("remove");const i=this.getParentCell();i&&i.unembed(this,e);const r=this.getEmbeddedCells();for(let a=0,s=r.length;a<s;a++){const o=r[a];o&&o.remove(e)}return this.trigger("remove",this,t.attributes.cells,e),t.stopBatch("remove"),this},toFront:function(e){var t=this.graph;if(t){e=Ct(e||{},{foregroundEmbeds:!0});let n;e.deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),n.unshift(this)):n=[this];const i=e.foregroundEmbeds?n:Li(n,l=>l.z());let a=t.maxZIndex()-n.length+1;const s=t.get("cells");let o=s.indexOf(i[0])!==s.length-n.length;o||(o=i.some(function(l,c){return l.z()!==a+c})),o&&(this.startBatch("to-front"),a=a+n.length,i.forEach(function(l,c){l.set("z",a+c,e)}),this.stopBatch("to-front"))}return this},toBack:function(e){var t=this.graph;if(t){e=Ct(e||{},{foregroundEmbeds:!0});let i;e.deep?(i=this.getEmbeddedCells({deep:!0,breadthFirst:e.breadthFirst!==!1,sortSiblings:e.foregroundEmbeds}),i.unshift(this)):i=[this];const r=e.foregroundEmbeds?i:Li(i,o=>o.z());let a=t.minZIndex();var n=t.get("cells");let s=n.indexOf(r[0])!==0;s||(s=r.some(function(o,l){return o.z()!==a+l})),s&&(this.startBatch("to-back"),a-=i.length,r.forEach(function(o,l){o.set("z",a+l,e)}),this.stopBatch("to-back"))}return this},parent:function(e,t){return e===void 0?this.get("parent"):this.set("parent",e,t)},embed:function(e,t){const n=Array.isArray(e)?e:[e];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");if(n.some(i=>i.isEmbedded()&&this.id!==i.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(n,t),this},unembed:function(e,t){const n=Array.isArray(e)?e:[e];return this._unembedCells(n,t),this},canEmbed:function(e){return(Array.isArray(e)?e:[e]).every(n=>this!==n&&!this.isEmbeddedIn(n))},_embedCells:function(e,t){const n="embed";this.startBatch(n);const i=ce([],this.get("embeds"));e.forEach(r=>{i[r.isLink()?"unshift":"push"](r.id),r.parent(this.id,t)}),this.set("embeds",kn(i),t),this.stopBatch(n)},_unembedCells:function(e,t){const n="unembed";this.startBatch(n),e.forEach(i=>i.unset("parent",t)),this.set("embeds",er(this.get("embeds"),...e.map(i=>i.id)),t),this.stopBatch(n)},getParentCell:function(){var e=this.parent(),t=this.graph;return e&&t&&t.getCell(e)||null},getAncestors:function(){var e=[];if(!this.graph)return e;for(var t=this.getParentCell();t;)e.push(t),t=t.getParentCell();return e},getEmbeddedCells:function(e){if(e=e||{},!this.graph)return[];if(e.deep)return e.breadthFirst?this._getEmbeddedCellsBfs(e.sortSiblings):this._getEmbeddedCellsDfs(e.sortSiblings);const t=this.get("embeds");if(Rt(t))return[];let n=t.map(this.graph.getCell,this.graph);return e.sortSiblings&&(n=Li(n,i=>i.z())),n},_getEmbeddedCellsBfs:function(e){const t=[],n=[];for(n.push(this);n.length>0;){const i=n.shift();t.push(i);const r=i.getEmbeddedCells({sortSiblings:e});n.push(...r)}return t.shift(),t},_getEmbeddedCellsDfs:function(e){const t=[],n=[];for(n.push(this);n.length>0;){const i=n.pop();t.push(i);const r=i.getEmbeddedCells({sortSiblings:e});for(let a=r.length-1;a>=0;--a)n.push(r[a])}return t.shift(),t},isEmbeddedIn:function(e,t){var n=mt(e)?e:e.id,i=this.parent();if(t=ce({deep:!0},t),this.graph&&t.deep){for(;i;){if(i===n)return!0;i=this.graph.getCell(i).parent()}return!1}else return i===n},isEmbedded:function(){return!!this.parent()},clone:function(e){if(e=e||{},e.deep)return ve(Ls([this].concat(this.getEmbeddedCells({deep:!0}))));var t=St.Model.prototype.clone.apply(this,arguments);return t.set(this.getIdAttribute(),this.generateId()),t.unset("embeds"),t.unset("parent"),t},prop:function(e,t,n){var i="/",r=mt(e);if(r||Array.isArray(e))if(arguments.length>1){var a,s;r?(a=e,s=a.split("/")):(a=e.join(i),s=e.slice());var o=s[0],l=s.length;const v=n||{};v.propertyPath=a,v.propertyValue=t,v.propertyPathArray=s,"rewrite"in v||(v.rewrite=!1);for(var c={},u=c,d=o,f=1;f<l;f++){var h=s[f],m=Number.isFinite(r?Number(h):h);u=u[d]=m?[]:{},d=h}c=tr(c,s,t,"/");var p=Fe({},this.attributes);v.rewrite&&Ur(p,a,"/");var A=Fe(p,c);return this.set(o,A[o],v)}else return Xn(this.attributes,e,i);const b=t||{};return b.propertyPath=null,b.propertyValue=e,b.propertyPathArray=[],"rewrite"in b||(b.rewrite=!1),this.set(Fe({},this.attributes,e),b)},removeProp:function(e,t){t=t||{};var n=Array.isArray(e)?e:e.split("/"),i=n[0];if(i==="attrs"&&(t.dirty=!0),n.length===1)return this.unset(e,t);var r=n.slice(1),a=this.get(i);return a==null?this:(a=At(a),Ur(a,r,"/"),this.set(i,a,t))},attr:function(e,t,n){var i=Array.from(arguments);return i.length===0?this.get("attrs"):(Array.isArray(e)?i[0]=["attrs"].concat(e):mt(e)?i[0]="attrs/"+e:i[0]={attrs:e},this.prop.apply(this,i))},removeAttr:function(e,t){return Array.isArray(e)?this.removeProp(["attrs"].concat(e)):this.removeProp("attrs/"+e,t)},transition:function(e,t,n,i){i=i||"/";var r={duration:100,delay:10,timingFunction:uo.linear,valueFunction:Ha.number};n=ce(r,n);var a=0,s,o=(function(d){var f,h,m;a=a||d,d-=a,h=d/n.duration,h<1?this._transitionIds[e]=f=nr(o):(h=1,delete this._transitionIds[e]),m=s(n.timingFunction(h)),n.transitionId=f,this.prop(e,m,n),f||this.trigger("transition:end",this,e)}).bind(this);const{_scheduledTransitionIds:l}=this;let c;var u=d=>{l[e]&&(l[e]=er(l[e],c),l[e].length===0&&delete l[e]),this.stopPendingTransitions(e,i),s=n.valueFunction(Xn(this.attributes,e,i),t),this._transitionIds[e]=nr(d),this.trigger("transition:start",this,e)};return c=setTimeout(u,n.delay,o),l[e]||(l[e]=[]),l[e].push(c),c},getTransitions:function(){return ir(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(e,t="/"){const{_scheduledTransitionIds:n={}}=this;let i=Object.keys(n);if(e){const r=e.split(t);i=i.filter(a=>wn(r,a.split(t).slice(0,r.length)))}return i.forEach(r=>{n[r].forEach(s=>clearTimeout(s)),delete n[r]}),this},stopPendingTransitions(e,t="/"){const{_transitionIds:n={}}=this;let i=Object.keys(n);if(e){const r=e.split(t);i=i.filter(a=>wn(r,a.split(t).slice(0,r.length)))}i.forEach(r=>{const a=n[r];rr(a),delete n[r],this.trigger("transition:end",this,r)})},stopTransitions:function(e,t="/"){return this.stopScheduledTransitions(e,t),this.stopPendingTransitions(e,t),this},addTo:function(e,t){return e.addCell(this,t),this},findView:function(e){return e.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(e,t){return this.graph&&this.graph.startBatch(e,ce({},t,{cell:this})),this},stopBatch:function(e,t){return this.graph&&this.graph.stopBatch(e,ce({},t,{cell:this})),this},getChangeFlag:function(e){var t=0;if(!e)return t;for(var n in e)!e.hasOwnProperty(n)||!this.hasChanged(n)||(t|=e[n]);return t},angle:function(){return 0},position:function(){return new X(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new X},getBBox:function(){return new he(0,0,0,0)},getPointRotatedAroundCenter(e,t,n){const i=new X(t,n);return e&&i.rotate(this.getBBox().center(),e),i},getAbsolutePointFromRelative(e,t){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(e,t))},getRelativePointFromAbsolute(e,t){return this.getPointRotatedAroundCenter(this.angle(),e,t).difference(this.position())}},{getAttributeDefinition:function(e){var t=this.attributes,n=Ps;return t&&t[e]||n[e]},define:function(e,t,n,i){n=ce({defaults:Ar({type:e},t,this.prototype.defaults)},n);var r=this.extend(n,i);return typeof joint<"u"&&Yt(joint,"shapes")&&tr(joint.shapes,e,r,"."),r}}),nd=function(e,t,n){if(mt(n)){if(!hr[n])throw new Error('Unknown wrapper: "'+n+'"');n=hr[n]}if(!ze(n))throw new Error("Wrapper must be a function.");ve(t).forEach(function(i){e[i]=n(e[i])})},hr={cells:function(e){return function(){var t=Array.from(arguments),n=t.length,i=n>0&&t[0]||[],r=n>1&&t[n-1]||{};return Array.isArray(i)||(r instanceof Zt?i=t:i instanceof Zt&&(t.length>1&&t.pop(),i=t)),r instanceof Zt&&(r={}),e.call(this,i,r)}}},Re={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function Bs(e,t){const n=new he(e);switch(t){case void 0:throw new Error("Position required");case Re.LEFT:case"leftMiddle":return n.leftMiddle();case Re.RIGHT:case"rightMiddle":return n.rightMiddle();case Re.TOP:case"topMiddle":return n.topMiddle();case Re.BOTTOM:case"bottomMiddle":return n.bottomMiddle();case Re.TOP_LEFT:case"topLeft":case"origin":return n.topLeft();case Re.TOP_RIGHT:case"topRight":return n.topRight();case Re.BOTTOM_LEFT:case"bottomLeft":return n.bottomLeft();case Re.BOTTOM_RIGHT:case"bottomRight":case"corner":return n.bottomRight();case Re.CENTER:return n.center();default:throw new Error(`Unknown position: ${t}`)}}function Zs(e,t,n){var i=e.toJSON();return i.angle=t||0,Ct({},n,i)}function Qn(e,t,n,i){return e.map(function(r,a,s){var o=this.pointAt((a+.5)/s.length);return(r.dx||r.dy)&&o.offset(r.dx||0,r.dy||0),Zs(o.round(),0,zr(i,r))},Mn(t,n))}function js(e,t,n,i){var r=t.center(),a=t.width/t.height,s=t.topMiddle(),o=Ja.fromRect(t);return e.map(function(l,c,u){var d=n+i(c,u.length),f=s.clone().rotate(r,-d).scale(a,1,r),h=l.compensateRotation?-o.tangentTheta(f):0;return(l.dx||l.dy)&&f.offset(l.dx||0,l.dy||0),l.dr&&f.move(r,l.dr),Zs(f.round(),h,zr(t,l))})}function zr(e,t){let{x:n,y:i,angle:r}=t;return ut(n)?n=parseFloat(n)/100*e.width:Lt(n)&&(n=Number(Ot(n,e))),ut(i)?i=parseFloat(i)/100*e.height:Lt(i)&&(i=Number(Ot(i,e))),{x:n,y:i,angle:r}}function fr(e,t){const{x:n,y:i}=zr(e,t);return new X(n||0,i||0)}const id=function(e,t){return e.map(n=>{const i=fr(t,n).round().toJSON();return i.angle=n.angle||0,i})},rd=function(e,t,n){return n.fn(e,t,n)},ad=function(e,t,n){var i=fr(t,n.start||t.origin()),r=fr(t,n.end||t.corner());return Qn(e,i,r,t)},sd=function(e,t,n){return Qn(e,t.origin(),t.bottomLeft(),t)},od=function(e,t,n){return Qn(e,t.topRight(),t.corner(),t)},ld=function(e,t,n){return Qn(e,t.origin(),t.topRight(),t)},cd=function(e,t,n){return Qn(e,t.bottomLeft(),t.corner(),t)},ud=function(e,t,n){var i=n.startAngle||0,r=n.step||360/e.length;return js(e,t,i,function(a){return a*r})},dd=function(e,t,n){var i=n.startAngle||0,r=n.step||20;return js(e,t,i,function(a,s){return(a+.5-s/2)*r})},gd=Object.freeze(Object.defineProperty({__proto__:null,absolute:id,bottom:cd,ellipse:dd,ellipseSpread:ud,fn:rd,left:sd,line:ad,right:od,top:ld},Symbol.toStringTag,{value:"Module"}));function rn(e,t){return Ar({},e,t,{x:0,y:0,angle:0,attrs:{}})}function Gs(e){var t=e.center(),n=t.theta(e.origin()),i=t.theta(e.bottomLeft()),r=t.theta(e.corner()),a=t.theta(e.topRight());return[n,a,r,i]}function Es(e,t,n,i){i=Ct({},i,{offset:15});var r=t.center().theta(e),a,s,o,l,c=i.offset,u=0;const[d,f,h,m]=Gs(t);r<f||r>h?(o=".3em",a=c,s=0,l="start"):r<d?(a=0,s=-c,n?(u=-90,l="start",o=".3em"):(l="middle",o="0")):r<m?(o=".3em",a=-c,s=0,l="end"):(a=0,s=c,n?(u=90,l="start",o=".3em"):(l="middle",o=".6em"));var p=Math.round;return rn(i,{x:p(a),y:p(s),angle:u,attrs:{labelText:{y:o,textAnchor:l}}})}function Rs(e,t,n,i){i=Ct({},i,{offset:15});var r=t.center().theta(e),a,s,o,l,c=i.offset,u=0;const[d,f,h,m]=Gs(t);r<f||r>h?(o=".3em",a=-c,s=0,l="end"):r<d?(a=0,s=c,n?(u=90,l="start",o=".3em"):(l="middle",o=".6em")):r<m?(o=".3em",a=c,s=0,l="start"):(a=0,s=-c,n?(u=-90,l="start",o=".3em"):(l="middle",o="0"));var p=Math.round;return rn(i,{x:p(a),y:p(s),angle:u,attrs:{labelText:{y:o,textAnchor:l}}})}function Ys(e,t,n){n=Ct({},n,{offset:20});var i=ar(0,0),r=-e.theta(i),a=r,s=e.clone().move(i,n.offset).difference(e).round(),o=".3em",l;(r+90)%180===0?(l=t?"end":"middle",!t&&r===-270&&(o="0em")):r>-270&&r<-90?(l="start",a=r-180):l="end";var c=Math.round;return rn(n,{x:c(s.x),y:c(s.y),angle:t?a:0,attrs:{labelText:{y:o,textAnchor:l}}})}const hd=function(e,t,n){return rn(n)},fd=function(e,t,n){return rn(n,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},md=function(e,t,n){return rn(n,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},pd=function(e,t,n){return rn(n,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},Id=function(e,t,n){return rn(n,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},vd=function(e,t,n){return Es(e,t,!0,n)},Ad=function(e,t,n){return Es(e,t,!1,n)},Cd=function(e,t,n){return Rs(e,t,!0,n)},bd=function(e,t,n){return Rs(e,t,!1,n)},yd=function(e,t,n){return Ys(e.difference(t.center()),!1,n)},wd=function(e,t,n){return Ys(e.difference(t.center()),!0,n)},Md=Object.freeze(Object.defineProperty({__proto__:null,bottom:Id,inside:bd,insideOriented:Cd,left:fd,manual:hd,outside:Ad,outsideOriented:vd,radial:yd,radialOriented:wd,right:md,top:pd},Symbol.toStringTag,{value:"Module"})),Ke=Zt.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),doubleToolMarkup:void 0,vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",yAlignment:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}}},defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(e){return this.set({source:{x:0,y:0},target:{x:0,y:0}},e)},source:function(e,t,n){if(e===void 0)return xt(this.get("source"));var i,r,a=e instanceof Zt;if(a)return i=xt(t)||{},i.id=e.id,r=n,this.set("source",i,r);var s=!Xe(e);return s?(i=xt(t)||{},i.x=e.x,i.y=e.y,r=n,this.set("source",i,r)):(i=e,r=t,this.set("source",i,r))},target:function(e,t,n){if(e===void 0)return xt(this.get("target"));var i,r,a=e instanceof Zt;if(a)return i=xt(t)||{},i.id=e.id,r=n,this.set("target",i,r);var s=!Xe(e);return s?(i=xt(t)||{},i.x=e.x,i.y=e.y,r=n,this.set("target",i,r)):(i=e,r=t,this.set("target",i,r))},router:function(e,t,n){if(e===void 0){var i=this.get("router");return i?typeof i=="object"?xt(i):i:this.get("manhattan")?{name:"orthogonal"}:null}var r=typeof e=="object"||typeof e=="function",a=r?e:{name:e,args:t},s=r?t:n;return this.set("router",a,s)},connector:function(e,t,n){if(e===void 0){var i=this.get("connector");return i?typeof i=="object"?xt(i):i:this.get("smooth")?{name:"smooth"}:null}var r=typeof e=="object"||typeof e=="function",a=r?e:{name:e,args:t},s=r?t:n;return this.set("connector",a,s)},label:function(e,t,n){var i=this.labels();return e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=i.length+e),arguments.length<=1?this.prop(["labels",e]):this.prop(["labels",e],t,n)},labels:function(e,t){return arguments.length===0?(e=this.get("labels"),Array.isArray(e)?e.slice():[]):(Array.isArray(e)||(e=[]),this.set("labels",e,t))},hasLabels:function(){const{labels:e}=this.attributes;return Array.isArray(e)&&e.length>0},insertLabel:function(e,t,n){if(!t)throw new Error("dia.Link: no label provided");var i=this.labels(),r=i.length;return e=isFinite(e)&&e!==null?e|0:r,e<0&&(e=r+e+1),i.splice(e,0,t),this.labels(i,n)},appendLabel:function(e,t){return this.insertLabel(-1,e,t)},removeLabel:function(e,t){var n=this.labels();return e=isFinite(e)&&e!==null?e|0:-1,n.splice(e,1),this.labels(n,t)},vertex:function(e,t,n){var i=this.vertices();if(e=isFinite(e)&&e!==null?e|0:0,e<0&&(e=i.length+e),arguments.length<=1)return this.prop(["vertices",e]);var r=this._normalizeVertex(t);return this.prop(["vertices",e],r,n)},vertices:function(e,t){if(arguments.length===0)return e=this.get("vertices"),Array.isArray(e)?e.slice():[];Array.isArray(e)||(e=[]);for(var n=[],i=0;i<e.length;i++){var r=e[i],a=this._normalizeVertex(r);n.push(a)}return this.set("vertices",n,t)},insertVertex:function(e,t,n){if(!t)throw new Error("dia.Link: no vertex provided");var i=this.vertices(),r=i.length;e=isFinite(e)&&e!==null?e|0:r,e<0&&(e=r+e+1);var a=this._normalizeVertex(t);return i.splice(e,0,a),this.vertices(i,n)},removeVertex:function(e,t){var n=this.vertices();return e=isFinite(e)&&e!==null?e|0:-1,n.splice(e,1),this.vertices(n,t)},_normalizeVertex:function(e){var t=!Xe(e);return t?{x:e.x,y:e.y}:e},translate:function(e,t,n){return n=n||{},n.translateBy=n.translateBy||this.id,n.tx=e,n.ty=t,this.applyToPoints(function(i){return{x:(i.x||0)+e,y:(i.y||0)+t}},n)},scale:function(e,t,n,i){return this.applyToPoints(function(r){return X(r).scale(e,t,n).toJSON()},i)},applyToPoints:function(e,t){if(!ze(e))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:i,target:r}=this.attributes;i.id||(n.source=e(i)),r.id||(n.target=e(r));var a=this.vertices();return a.length>0&&(n.vertices=a.map(e)),this.set(n,t)},getSourcePoint:function(){var e=this.getSourceCell();return e?e.getPointFromConnectedLink(this,"source"):new X(this.source())},getTargetPoint:function(){var e=this.getTargetCell();return e?e.getPointFromConnectedLink(this,"target"):new X(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const e=[this.getSourcePoint(),...this.vertices().map(X),this.getTargetPoint()];return new Vn(e)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(e){var t;if(this.graph){var n=this.getSourceElement(),i=this.getTargetElement(),r=this.getParentCell();n&&i&&(n===i||n.isEmbeddedIn(i)?t=i:i.isEmbeddedIn(n)?t=n:t=this.graph.getCommonAncestor(n,i)),r&&(!t||t.id!==r.id)&&r.unembed(this,e),t&&t.embed(this,e)}return t},hasLoop:function(e){e=e||{};var{source:t,target:n}=this.attributes,i=t.id,r=n.id;if(!i||!r)return!1;var a=i===r;if(!a&&e.deep&&this.graph){var s=this.getSourceCell(),o=this.getTargetCell();a=s.isEmbeddedIn(o)||o.isEmbeddedIn(s)}return a},getSourceCell:function(){const{graph:e,attributes:t}=this;var n=t.source;return n&&n.id&&e&&e.getCell(n.id)||null},getSourceElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getSourceCell()}while(e&&e.isLink());return e},getTargetCell:function(){const{graph:e,attributes:t}=this;var n=t.target;return n&&n.id&&e&&e.getCell(n.id)||null},getTargetElement:function(){var e=this,t={};do{if(t[e.id])return null;t[e.id]=!0,e=e.getTargetCell()}while(e&&e.isLink());return e},getRelationshipAncestor:function(){var e;if(this.graph){var t=[this,this.getSourceElement(),this.getTargetElement()].filter(function(n){return!!n});e=this.graph.getCommonAncestor.apply(this.graph,t)}return e||null},isRelationshipEmbeddedIn:function(e){var t=mt(e)||ht(e)?e:e.id,n=this.getRelationshipAncestor();return!!n&&(n.id===t||n.isEmbeddedIn(t))},_getDefaultLabel:function(){var e=this.get("defaultLabel")||this.defaultLabel||{},t={};return t.markup=e.markup||this.get("labelMarkup")||this.labelMarkup,t.position=e.position,t.attrs=e.attrs,t.size=e.size,t}},{endsEqual:function(e,t){var n=e.port===t.port||!e.port&&!t.port;return e.id===t.id&&n}});var _s=function(e){var t=At(e)||{};this.ports=[],this.groups={},this.portLayoutNamespace=gd,this.portLabelLayoutNamespace=Md,this._init(t)};_s.prototype={getPorts:function(){return this.ports},getGroup:function(e){return this.groups[e]||{}},getPortsByGroup:function(e){return this.ports.filter(function(t){return t.group===e})},getGroupPortsMetrics:function(e,t){var n=this.getGroup(e),i=this.getPortsByGroup(e),r=n.position||{},a=r.name,s=this.portLayoutNamespace;s[a]||(a="left");var o=r.args||{},l=i.map(function(d){return d&&d.position&&d.position.args}),c=s[a](l,t,o),u={ports:i,result:[]};return ve(c).reduce((function(d,f,h){var m=d.ports[h];return d.result.push({portId:m.id,portTransformation:f,labelTransformation:this._getPortLabelLayout(m,X(f),t),portAttrs:m.attrs,portSize:m.size,labelSize:m.label.size}),d}).bind(this),u),u.result},_getPortLabelLayout:function(e,t,n){var i=this.portLabelLayoutNamespace,r=e.label.position.name||"left";return i[r]?i[r](t,n,e.label.position.args):null},_init:function(e){if(je(e.groups))for(var t=Object.keys(e.groups),n=0,i=t.length;n<i;n++){var r=t[n];this.groups[r]=this._evaluateGroup(e.groups[r])}for(var a=ve(e.items),s=0,o=a.length;s<o;s++)this.ports.push(this._evaluatePort(a[s]))},_evaluateGroup:function(e){return Fe(e,{position:this._getPosition(e.position,!0),label:this._getLabel(e,!0)})},_evaluatePort:function(e){var t=ce({},e),n=this.getGroup(e.group);return t.markup=t.markup||n.markup,t.attrs=Fe({},n.attrs,t.attrs),t.position=this._createPositionNode(n,t),t.label=Fe({},n.label,this._getLabel(t)),t.z=this._getZIndex(n,t),t.size=ce({},n.size,t.size),t},_getZIndex:function(e,t){return ht(t.z)?t.z:ht(e.z)||e.z==="auto"?e.z:"auto"},_createPositionNode:function(e,t){return Fe({name:"left",args:{}},e.position,{args:t.args})},_getPosition:function(e,t){var n={},i;ze(e)?(i="fn",n.fn=e):mt(e)?i=e:e===void 0?i=t?"left":null:Array.isArray(e)?(i="absolute",n.x=e[0],n.y=e[1]):je(e)&&(i=e.name,ce(n,e.args));var r={args:n};return i&&(r.name=i),r},_getLabel:function(e,t){var n=e.label||{},i=n;return i.position=this._getPosition(n.position,t),i}};const Nd={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var e=this.get("ports")||{},t={};ve(e.items).forEach(function(o){t[o.id]=!0});var n=this.previous("ports")||{},i={};ve(n.items).forEach(function(o){t[o.id]||(i[o.id]=!0)});var r=this.graph;if(r&&!Rt(i)){var a=r.getConnectedLinks(this,{inbound:!0});a.forEach(function(o){i[o.get("target").port]&&o.remove()});var s=r.getConnectedLinks(this,{outbound:!0});s.forEach(function(o){i[o.get("source").port]&&o.remove()})}},hasPorts:function(){var e=this.prop("ports/items");return Array.isArray(e)&&e.length>0},hasPort:function(e){return this.getPortIndex(e)!==-1},getPorts:function(){return At(this.prop("ports/items"))||[]},getGroupPorts:function(e){const t=ve(this.prop(["ports","items"])).filter(n=>n.group===e);return At(t)},getPort:function(e){return At(ve(this.prop("ports/items")).find(function(t){return t.id&&t.id===e}))},getPortsPositions:function(e){var t=this._portSettingsData.getGroupPortsMetrics(e,he(this.size()));return t.reduce(function(n,i){var r=i.portTransformation;return n[i.portId]={x:r.x,y:r.y,angle:r.angle},n},{})},getPortIndex:function(e){var t=je(e)?e.id:e;return this._isValidPortId(t)?ve(this.prop("ports/items")).findIndex(function(n){return n.id===t}):-1},addPort:function(e,t){if(!je(e)||Array.isArray(e))throw new Error("Element: addPort requires an object.");var n=ce([],this.prop("ports/items"));return n.push(e),this.prop("ports/items",n,t),this},insertPort:function(e,t,n){const i=typeof e=="number"?e:this.getPortIndex(e);if(!je(t)||Array.isArray(t))throw new Error("dia.Element: insertPort requires an object.");const r=ce([],this.prop("ports/items"));return r.splice(i,0,t),this.prop("ports/items",r,n),this},portProp:function(e,t,n,i){var r=this.getPortIndex(e);if(r===-1)throw new Error("Element: unable to find port with id "+e);var a=Array.prototype.slice.call(arguments,1);return Array.isArray(t)?a[0]=["ports","items",r].concat(t):mt(t)?a[0]=["ports/items/",r,"/",t].join(""):(a=["ports/items/"+r],Xe(t)&&(a.push(t),a.push(n))),this.prop.apply(this,a)},_validatePorts:function(){var e=this.get("ports")||{},t=[];e=e||{};var n=ve(e.items);return n.forEach(function(i){typeof i!="object"&&t.push("Element: invalid port ",i),this._isValidPortId(i.id)||(i.id=this.generatePortId())},this),kn(n,"id").length!==n.length&&t.push("Element: found id duplicities in ports."),t},generatePortId:function(){return this.generateId()},_isValidPortId:function(e){return e!=null&&!je(e)},addPorts:function(e,t){return e.length&&this.prop("ports/items",ce([],this.prop("ports/items")).concat(e),t),this},removePort:function(e,t){const n=t||{},i=this.getPortIndex(e);if(i!==-1){const r=ce([],this.prop(["ports","items"]));r.splice(i,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],r,n),this.stopBatch("port-remove")}return this},removePorts:function(e,t){let n,i;if(Array.isArray(e)){if(n=t||{},e.length===0)return this.this;i=ce([],this.prop(["ports","items"])).filter(function(a){return!e.some(function(s){const o=je(s)?s.id:s;return a.id===o})})}else n=e||{},i=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],i,n),this.stopBatch("port-remove"),this},_createPortData:function(){var e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));var t;this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new _s(this.get("ports"));var n=this._portSettingsData.getPorts();if(t){var i=n.filter(function(a){if(!t.find(function(s){return s.id===a.id}))return a}),r=t.filter(function(a){if(!n.find(function(s){return s.id===a.id}))return a});r.length>0&&this.trigger("ports:remove",this,r),i.length>0&&this.trigger("ports:add",this,i)}}},kd={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var e=[],t=this._getContainerElement(),n=0,i=t.node.childNodes.length;n<i;n++)e.push(t.node.childNodes[n]);var r=go(this.model._portSettingsData.getPorts(),"z"),a="auto";ve(r[a]).forEach(function(u){var d=this._getPortElement(u);t.append(d),e.push(d)},this);for(var s=Object.keys(r),o=0;o<s.length;o++){var l=s[o];if(l!==a){var c=parseInt(l,10);this._appendPorts(r[l],c,e)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(e,t,n){var i=this._getContainerElement(),r=ve(e).map(this._getPortElement,this);n[t]||t<0?R(n[Math.max(t,0)]).before(r):i.append(r)},_getPortElement:function(e){return this._portElementsCache[e.id]?this._portElementsCache[e.id].portElement:this._createPortElement(e)},findPortNode:function(e,t){const n=this._portElementsCache[e];if(!n)return null;if(!t)return n.portContentElement.node;const i=n.portElement.node,r=n.portSelectors,[a=null]=this.findBySelector(t,i,r);return a},_updatePorts:function(){this._updatePortGroup(void 0);var e=Object.keys(this.model._portSettingsData.groups);e.forEach(this._updatePortGroup,this)},_removePorts:function(){Pt(this._portElementsCache,"portElement.remove")},_createPortElement:function(e){let t,n,i,r;var a=R(this.portContainerMarkup).addClass("joint-port"),s=this._getPortMarkup(e);if(Array.isArray(s)){var o=this.parseDOMJSON(s,a.node),l=o.fragment;l.childNodes.length>1?t=R("g").append(l):t=R(l.firstChild),r=o.selectors}else t=R(s),Array.isArray(t)&&(t=R("g").append(t));if(!t)throw new Error("ElementView: Invalid port markup.");t.attr({port:e.id,"port-group":e.group});const c=this._getPortLabelMarkup(e.label);if(Array.isArray(c)){const{fragment:p,selectors:A}=this.parseDOMJSON(c,a.node),b=p.childNodes.length;b>0&&(i=A,n=b===1?R(p.firstChild):R("g").append(p))}else n=R(c),Array.isArray(n)&&(n=R("g").append(n));var u;if(r&&i){for(var d in i)if(r[d]&&d!==this.selector)throw new Error("ElementView: selectors within port must be unique.");u=ce({},r,i)}else u=r||i||{};const f="portRoot",h="labelRoot",m="labelText";if(f in u||(u[f]=t.node),n){const p=n.node;if(h in u||(u[h]=p),!(m in u)){const A=n.tagName()==="TEXT"?p:Array.from(p.querySelectorAll("text"));u[m]=A,i||(i={}),i[m]=A}}return a.append(t.addClass("joint-port-body")),n&&a.append(n.addClass("joint-port-label")),this._portElementsCache[e.id]={portElement:a,portLabelElement:n,portSelectors:u,portLabelSelectors:i,portContentElement:t,portContentSelectors:r},a},_updatePortGroup:function(e){for(var t=he(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(e,t),i=0,r=n.length;i<r;i++){var a=n[i],s=a.portId,o=this._portElementsCache[s]||{},l=a.portTransformation,c=a.labelTransformation;c&&o.portLabelElement&&(this.updateDOMSubtreeAttributes(o.portLabelElement.node,c.attrs,{rootBBox:new he(a.labelSize),selectors:o.portLabelSelectors}),this.applyPortTransform(o.portLabelElement,c,-l.angle||0)),this.updateDOMSubtreeAttributes(o.portElement.node,a.portAttrs,{rootBBox:new he(a.portSize),selectors:o.portSelectors}),this.applyPortTransform(o.portElement,l)}},applyPortTransform:function(e,t,n){var i=R.createSVGMatrix().rotate(n||0).translate(t.x||0,t.y||0).rotate(t.angle||0);e.transform(i,{absolute:!0})},_getPortMarkup:function(e){return e.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(e){return e.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Ge=Zt.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),Zt.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(e,t,n){const i=ht(t);n=(i?n:e)||{};const{parentRelative:r,deep:a,restrictedArea:s}=n;let o;if(r){if(!this.graph)throw new Error("Element must be part of a graph.");const l=this.getParentCell();l&&!l.isLink()&&(o=l.get("position"))}if(i){if(o&&(e+=o.x,t+=o.y),a||s){const{x:l,y:c}=this.get("position");this.translate(e-l,t-c,n)}else this.set("position",{x:e,y:t},n);return this}else{const l=X(this.get("position"));return r?l.difference(o):l}},translate:function(e,t,n){if(e=e||0,t=t||0,e===0&&t===0)return this;n=n||{},n.translateBy=n.translateBy||this.id;var i=this.get("position")||{x:0,y:0},r=n.restrictedArea;if(r&&n.translateBy===this.id)if(typeof r=="function"){var a=r.call(this,i.x+e,i.y+t,n);e=a.x-i.x,t=a.y-i.y}else{var s=this.getBBox({deep:!0}),o=i.x-s.x,l=i.y-s.y,c=Math.max(r.x+o,Math.min(r.x+r.width+o-s.width,i.x+e)),u=Math.max(r.y+l,Math.min(r.y+r.height+l-s.height,i.y+t));e=c-i.x,t=u-i.y}var d={x:i.x+e,y:i.y+t};return n.tx=e,n.ty=t,n.transition?(je(n.transition)||(n.transition={}),this.transition("position",d,ce({},n.transition,{valueFunction:Ha.object})),Pt(this.getEmbeddedCells(),"translate",e,t,n)):(this.startBatch("translate",n),this.set("position",d,n),Pt(this.getEmbeddedCells(),"translate",e,t,n),this.stopBatch("translate",n)),this},size:function(e,t,n){var i=this.get("size");return e===void 0?{width:i.width,height:i.height}:(je(e)&&(n=t,t=ht(e.height)?e.height:i.height,e=ht(e.width)?e.width:i.width),this.resize(e,t,n))},resize:function(e,t,n){if(n=n||{},this.startBatch("resize",n),n.direction){var i=this.get("size");switch(n.direction){case"left":case"right":t=i.height;break;case"top":case"bottom":e=i.width;break}var r=Dn(this.get("angle")||0),a=this.getBBox(),s;if(r){var o={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(o+=Math.floor((r+45)/90),o%=4);var l=a[["bottomLeft","corner","topRight","origin"][o]](),c=X(l).rotate(a.center(),-r),u=Math.sqrt(e*e+t*t)/2,d=o*Math.PI/2;d+=Math.atan(o%2==0?t/e:e/t),d-=xn(r);var f=X.fromPolar(u,d,c);s=X(f).offset(e/-2,t/-2)}else switch(s=a.topLeft(),n.direction){case"top":case"top-right":s.offset(0,a.height-t);break;case"left":case"bottom-left":s.offset(a.width-e,0);break;case"top-left":s.offset(a.width-e,a.height-t);break}this.set("size",{width:e,height:t},n),this.position(s.x,s.y,n)}else this.set("size",{width:e,height:t},n);return this.stopBatch("resize",n),this},scale:function(e,t,n,i){var r=this.getBBox().scale(e,t,n);return this.startBatch("scale",i),this.position(r.x,r.y,i),this.resize(r.width,r.height,i),this.stopBatch("scale"),this},fitEmbeds:function(e){return this.fitToChildren(e)},fitToChildren:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter(i=>i.isElement());return n.length===0?this:(this.startBatch("fit-embeds",e),e.deep&&Pt(n,"fitToChildren",e),this._fitToElements(Object.assign({elements:n},e)),this.stopBatch("fit-embeds"),this)},fitParent:function(e={}){const{graph:t}=this;if(!t)throw new Error("Element must be part of a graph.");if(e.deep&&e.terminator&&(e.terminator===this||e.terminator===this.id))return this;const n=this.getParentCell();if(!n||!n.isElement())return this;const i=n.getEmbeddedCells().filter(r=>r.isElement());return i.length===0?this:(this.startBatch("fit-parent",e),n._fitToElements(Object.assign({elements:i},e)),e.deep&&n.fitParent(e),this.stopBatch("fit-parent"),this)},_fitToElements:function(e={}){const t=this.graph.getCellsBBox(e.elements);if(!t)return;const{expandOnly:n,shrinkOnly:i}=e;if(n&&i)return;let{x:r,y:a,width:s,height:o}=t;const{left:l,right:c,top:u,bottom:d}=tn(e.padding);r-=l,a-=u,s+=l+c,o+=d+u;let f=new he(r,a,s,o);if(n)f=this.getBBox().union(f);else if(i){const h=this.getBBox().intersect(f);if(!h)return;f=h}this.set({position:{x:f.x,y:f.y},size:{width:f.width,height:f.height}},e)},rotate:function(e,t,n,i){if(n){var r=this.getBBox().center(),a=this.get("size"),s=this.get("position");r.rotate(n,this.get("angle")-e);var o=r.x-a.width/2-s.x,l=r.y-a.height/2-s.y;this.startBatch("rotate",{angle:e,absolute:t,origin:n}),this.position(s.x+o,s.y+l,i),this.rotate(e,t,null,i),this.stopBatch("rotate")}else this.set("angle",t?e:(this.get("angle")+e)%360,i);return this},angle:function(){return Dn(this.get("angle")||0)},getBBox:function(e={}){const{graph:t,attributes:n}=this,{deep:i,rotate:r}=e;if(i&&t){const d=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return d.push(this),t.getCellsBBox(d,e)}const{angle:a=0,position:{x:s,y:o},size:{width:l,height:c}}=n,u=new he(s,o,l,c);return r&&u.rotateAroundCenter(a),u},getPointFromConnectedLink:function(e,t){var n=this.getBBox(),i=n.center(),r=e.get(t);if(!r)return i;var a=r.port;if(!a||!this.hasPort(a))return i;var s=this.portProp(a,["group"]),o=this.getPortsPositions(s),l=new X(o[a]).offset(n.origin()),c=this.angle();return c&&l.rotate(i,-c),l}});ce(Ge.prototype,Nd);const Dd=St.Collection.extend({initialize:function(e,t){t.cellNamespace?this.cellNamespace=t.cellNamespace:this.cellNamespace=typeof joint<"u"&&Yt(joint,"shapes")?joint.shapes:null,this.graph=t.graph},model:function(e,t){var n=t.collection,i=n.cellNamespace,r=e.type==="link"?Ke:Xn(i,e.type,".")||Ge,a=new r(e,t);return t.dry||(a.graph=n.graph),a},comparator:function(e){return e.get("z")||0}}),Lr=St.Model.extend({initialize:function(e,t){t=t||{};var n=new Dd([],{model:t.cellModel,cellNamespace:t.cellNamespace,graph:this});St.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(e){if(e.isLink()){this._edges[e.id]=!0;var{source:t,target:n}=e.attributes;t.id&&((this._out[t.id]||(this._out[t.id]={}))[e.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[e.id]=!0)}else this._nodes[e.id]=!0},_restructureOnRemove:function(e){if(e.isLink()){delete this._edges[e.id];var{source:t,target:n}=e.attributes;t.id&&this._out[t.id]&&this._out[t.id][e.id]&&delete this._out[t.id][e.id],n.id&&this._in[n.id]&&this._in[n.id][e.id]&&delete this._in[n.id][e.id]}else delete this._nodes[e.id]},_restructureOnReset:function(e){e=e.models,this._out={},this._in={},this._nodes={},this._edges={},e.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(e){var t=e.previous("source");t.id&&this._out[t.id]&&delete this._out[t.id][e.id];var n=e.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[e.id]=!0)},_restructureOnChangeTarget:function(e){var t=e.previous("target");t.id&&this._in[t.id]&&delete this._in[t.id][e.id];var n=e.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[e.id]=!0)},getOutboundEdges:function(e){return this._out&&this._out[e]||{}},getInboundEdges:function(e){return this._in&&this._in[e]||{}},toJSON:function(){var e=St.Model.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(),e},fromJSON:function(e,t){if(!e.cells)throw new Error("Graph JSON must contain cells array.");return this.set(e,t)},set:function(e,t,n){var i;return typeof e=="object"?(i=e,n=t):(i={})[e]=t,i.hasOwnProperty("cells")&&(this.resetCells(i.cells,n),i=dn(i,"cells")),St.Model.prototype.set.call(this,i,n)},clear:function(e){e=ce({},e,{clear:!0});var t=this.get("cells");if(t.length===0)return this;this.startBatch("clear",e);var n=t.sortBy(function(i){return i.isLink()?1:2});do n.shift().remove(e);while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(e,t){var n;if(e instanceof St.Model?(n=e.attributes,!e.graph&&(!t||!t.dry)&&(e.graph=this)):n=e,!mt(n.type))throw new TypeError("dia.Graph: cell type must be a string.");return e},minZIndex:function(){var e=this.get("cells").first();return e&&e.get("z")||0},maxZIndex:function(){var e=this.get("cells").last();return e&&e.get("z")||0},addCell:function(e,t){return Array.isArray(e)?this.addCells(e,t):(e instanceof St.Model?e.has("z")||e.set("z",this.maxZIndex()+1):e.z===void 0&&(e.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(e,t),t||{}),this)},addCells:function(e,t){return e.length===0?this:(e=ho(e),t.maxPosition=t.position=e.length-1,this.startBatch("add",t),e.forEach(function(n){this.addCell(n,t),t.position--},this),this.stopBatch("add",t),this)},resetCells:function(e,t){var n=ve(e).map(function(i){return this._prepareCell(i,t)},this);return this.get("cells").reset(n,t),this},removeCells:function(e,t){return e.length&&(this.startBatch("remove"),Pt(e,"remove",t),this.stopBatch("remove")),this},_removeCell:function(e,t,n){n=n||{},n.clear||(n.disconnectLinks?this.disconnectLinks(e,n):this.removeLinks(e,n)),this.get("cells").remove(e,{silent:!0}),e.graph===this&&(e.graph=null)},getCell:function(e){return this.get("cells").get(e)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").filter(e=>e.isElement())},getLinks:function(){return this.get("cells").filter(e=>e.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(e,t){t=t||{};var n=t.indirect,i=t.inbound,r=t.outbound;i===void 0&&r===void 0&&(i=r=!0);var a=[],s={};r&&o(this,e),i&&l(this,e);function o(d,f){if(Nt(d.getOutboundEdges(f.id),(function(m,p){if(!s[p]){var A=d.getCell(p);a.push(A),s[p]=!0,n&&(i&&l(d,A),r&&o(d,A))}}).bind(d)),n&&f.isLink()){var h=f.getTargetCell();h&&h.isLink()&&(s[h.id]||(a.push(h),o(d,h)))}}function l(d,f){if(Nt(d.getInboundEdges(f.id),(function(m,p){if(!s[p]){var A=d.getCell(p);a.push(A),s[p]=!0,n&&(i&&l(d,A),r&&o(d,A))}}).bind(d)),n&&f.isLink()){var h=f.getSourceCell();h&&h.isLink()&&(s[h.id]||(a.push(h),l(d,h)))}}if(t.deep){var c=e.getEmbeddedCells({deep:!0}),u={};c.forEach(function(d){d.isElement()&&(u[d.id]=!0)}),c.forEach(function(d){d.isLink()||(r&&Nt(this.getOutboundEdges(d.id),(function(f,h){if(!s[h]){var m=this.getCell(h),{source:p,target:A}=m.attributes,b=p.id,v=A.id;if(!t.includeEnclosed&&b&&u[b]&&v&&u[v])return;a.push(this.getCell(h)),s[h]=!0}}).bind(this)),i&&Nt(this.getInboundEdges(d.id),(function(f,h){if(!s[h]){var m=this.getCell(h),{source:p,target:A}=m.attributes,b=p.id,v=A.id;if(!t.includeEnclosed&&b&&u[b]&&v&&u[v])return;a.push(this.getCell(h)),s[h]=!0}}).bind(this)))},this)}return a},getNeighbors:function(e,t){t||(t={});var n=t.inbound,i=t.outbound;n===void 0&&i===void 0&&(n=i=!0);var r=this.getConnectedLinks(e,t).reduce((function(o,l){var{source:c,target:u}=l.attributes,d=l.hasLoop(t);if(n&&Yt(c,"id")&&!o[c.id]){var f=this.getCell(c.id);f.isElement()&&(d||f&&f!==e&&(!t.deep||!f.isEmbeddedIn(e)))&&(o[c.id]=f)}if(i&&Yt(u,"id")&&!o[u.id]){var h=this.getCell(u.id);h.isElement()&&(d||h&&h!==e&&(!t.deep||!h.isEmbeddedIn(e)))&&(o[u.id]=h)}return o}).bind(this),{});if(e.isLink()){if(n){var a=e.getSourceCell();a&&a.isElement()&&!r[a.id]&&(r[a.id]=a)}if(i){var s=e.getTargetCell();s&&s.isElement()&&!r[s.id]&&(r[s.id]=s)}}return ve(r)},getCommonAncestor:function(){var e=Array.from(arguments).map(function(n){for(var i=[],r=n.get("parent");r;)i.push(r),r=this.getCell(r).get("parent");return i},this);e=e.sort(function(n,i){return n.length-i.length});var t=ve(e.shift()).find(function(n){return e.every(function(i){return i.includes(n)})});return this.getCell(t)},getSuccessors:function(e,t){t=t||{};var n=[];return this.search(e,function(i){i!==e&&n.push(i)},ce({},t,{outbound:!0})),n},cloneCells:Ls,cloneSubgraph:function(e,t){var n=this.getSubgraph(e,t);return this.cloneCells(n)},getSubgraph:function(e,t){t=t||{};var n=[],i={},r=[],a=[];return ve(e).forEach(function(s){if(i[s.id]||(n.push(s),i[s.id]=s,s.isLink()?a.push(s):r.push(s)),t.deep){var o=s.getEmbeddedCells({deep:!0});o.forEach(function(l){i[l.id]||(n.push(l),i[l.id]=l,l.isLink()?a.push(l):r.push(l))})}}),a.forEach(function(s){var{source:o,target:l}=s.attributes;if(o.id&&!i[o.id]){var c=this.getCell(o.id);n.push(c),i[c.id]=c,r.push(c)}if(l.id&&!i[l.id]){var u=this.getCell(l.id);n.push(this.getCell(l.id)),i[u.id]=u,r.push(u)}},this),r.forEach(function(s){var o=this.getConnectedLinks(s,t);o.forEach(function(l){var{source:c,target:u}=l.attributes;!i[l.id]&&c.id&&i[c.id]&&u.id&&i[u.id]&&(n.push(l),i[l.id]=l)})},this),n},getPredecessors:function(e,t){t=t||{};var n=[];return this.search(e,function(i){i!==e&&n.push(i)},ce({},t,{inbound:!0})),n},search:function(e,t,n){n=n||{},n.breadthFirst?this.bfs(e,t,n):this.dfs(e,t,n)},bfs:function(e,t,n={}){const i={},r={},a=[];for(a.push(e),r[e.id]=0;a.length>0;){var s=a.shift();if(i[s.id]||(i[s.id]=!0,t.call(this,s,r[s.id])===!1))continue;const o=this.getNeighbors(s,n);for(let l=0,c=o.length;l<c;l++){const u=o[l];r[u.id]=r[s.id]+1,a.push(u)}}},dfs:function(e,t,n={}){const i={},r={},a=[];for(a.push(e),r[e.id]=0;a.length>0;){const s=a.pop();if(i[s.id]||(i[s.id]=!0,t.call(this,s,r[s.id])===!1))continue;const o=this.getNeighbors(s,n),l=a.length;for(let c=0,u=o.length;c<u;c++){const d=o[c];r[d.id]=r[s.id]+1,a.splice(l,0,d)}}},getSources:function(){var e=[];return Nt(this._nodes,(function(t,n){(!this._in[n]||Rt(this._in[n]))&&e.push(this.getCell(n))}).bind(this)),e},getSinks:function(){var e=[];return Nt(this._nodes,(function(t,n){(!this._out[n]||Rt(this._out[n]))&&e.push(this.getCell(n))}).bind(this)),e},isSource:function(e){return!this._in[e.id]||Rt(this._in[e.id])},isSink:function(e){return!this._out[e.id]||Rt(this._out[e.id])},isSuccessor:function(e,t){var n=!1;return this.search(e,function(i){if(i===t&&i!==e)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(e,t){var n=!1;return this.search(e,function(i){if(i===t&&i!==e)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(e,t,n){n=n||{};var i=n.inbound,r=n.outbound;i===void 0&&r===void 0&&(i=r=!0);var a=!1;return this.getConnectedLinks(e,n).forEach(function(s){var{source:o,target:l}=s.attributes;if(i&&Yt(o,"id")&&o.id===t.id||r&&Yt(l,"id")&&l.id===t.id)return a=!0,!1}),a},disconnectLinks:function(e,t){this.getConnectedLinks(e).forEach(function(n){n.set(n.attributes.source.id===e.id?"source":"target",{x:0,y:0},t)})},removeLinks:function(e,t){Pt(this.getConnectedLinks(e),"remove",t)},findModelsFromPoint:function(e){return this.getElements().filter(t=>t.getBBox({rotate:!0}).containsPoint(e))},findModelsInArea:function(e,t={}){const n=new he(e),{strict:i=!1}=t,r=i?"containsRect":"intersect";return this.getElements().filter(a=>n[r](a.getBBox({rotate:!0})))},findModelsUnderElement:function(e,t={}){const{searchBy:n="bbox"}=t,i=e.getBBox().rotateAroundCenter(e.angle());return(n==="bbox"?this.findModelsInArea(i):this.findModelsFromPoint(Bs(i,n))).filter(a=>e.id!==a.id&&!a.isEmbeddedIn(e))},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(e,t={}){const{rotate:n=!0}=t;return ve(e).reduce(function(i,r){const a=r.getBBox({rotate:n});return a?i?i.union(a):a:i},null)},translate:function(e,t,n){var i=this.getCells().filter(function(r){return!r.isEmbedded()});return Pt(i,"translate",e,t,n),this},resize:function(e,t,n){return this.resizeCells(e,t,this.getCells(),n)},resizeCells:function(e,t,n,i){var r=this.getCellsBBox(n);if(r){var a=Math.max(e/r.width,0),s=Math.max(t/r.height,0);Pt(n,"scale",a,s,r.origin(),i)}return this},startBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)+1,this.trigger("batch:start",ce({},t,{batchName:e}))},stopBatch:function(e,t){return t=t||{},this._batches[e]=(this._batches[e]||0)-1,this.trigger("batch:stop",ce({},t,{batchName:e}))},hasActiveBatch:function(e){const t=this._batches;let n;return arguments.length===0?n=Object.keys(t):Array.isArray(e)?n=e:n=[e],n.some(i=>t[i]>0)}},{validations:{multiLinks:function(e,t){var{source:n,target:i}=t.attributes;if(n.id&&i.id){var r=t.getSourceCell();if(r){var a=e.getConnectedLinks(r,{outbound:!0}),s=a.filter(function(o){var{source:l,target:c}=o.attributes;return l&&l.id===n.id&&(!l.port||l.port===n.port)&&c&&c.id===i.id&&(!c.port||c.port===i.port)});if(s.length>1)return!1}}return!0},linkPinning:function(e,t){var{source:n,target:i}=t.attributes;return n.id&&i.id}}});nd(Lr.prototype,["resetCells","addCells","removeCells"],hr.cells);const bt={CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},xd=cn.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return Et(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(e,t){this.el.insertBefore(e,this.insertPivot(t))},insertNode:function(e){const{el:t}=this;e.parentNode!==t&&t.appendChild(e)},insertPivot:function(e){const{el:t,pivotNodes:n}=this;e=+e,e||(e=0);let i=n[e];if(i)return i;i=n[e]=document.createComment("z-index:"+(e+1));let r=-1/0;for(let a in n)a=+a,a<e&&a>r&&(r=a,e-1);if(r!==-1/0){const a=n[r];t.insertBefore(i,a.nextSibling)}else t.insertBefore(i,t.firstChild);return i},removePivots:function(){const{el:e,pivotNodes:t}=this;for(let n in t)e.removeChild(t[n]);this.pivotNodes={}}});function Gn(e){return e?Array.isArray(e)?e:[e]:[]}const kt=cn.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(e,t){const{paper:n}=e;this.cellView=e,this.nodeSelector=t,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:e,nodeSelector:t}=this;return e.isMounted()?(this.update(e,t),this.mount(),this.transform(),0):(this.postponedUpdate=!0,0)},findNode(e,t=null){let n;if(typeof t=="string")[n]=e.findBySelector(t);else if(Xe(t)){const i=e.model.isLink(),{label:r=null,port:a,selector:s}=t;i&&r!==null?n=e.findLabelNode(r,s):!i&&a?n=e.findPortNode(a,s):[n]=e.findBySelector(s)}else t&&(n=R.toNode(t),n instanceof SVGElement||(n=null));return n||null},getNodeMatrix(e,t){const{options:n}=this,{layer:i}=n,{rotatableNode:r}=e,a=e.getNodeMatrix(t);return r?i?r.contains(t)?a:e.getRootRotateMatrix().inverse().multiply(a):e.getNodeRotateMatrix(t).multiply(a):a},mount(){const{MOUNTABLE:e,cellView:t,el:n,options:i,transformGroup:r,detachedTransformGroup:a,postponedUpdate:s,nodeSelector:o}=this;if(!e||r)return;if(s){this.update(t,o),this.transform();return}const{vel:l,paper:c}=t,{layer:u}=i;if(u){let d;a?(d=a,this.detachedTransformGroup=null):d=R("g").addClass("highlight-transform").append(n),this.transformGroup=d,c.getLayerView(u).insertSortedNode(d.node,i.z)}else(!n.parentNode||n.nextSibling)&&l.append(n)},unmount(){const{MOUNTABLE:e,transformGroup:t,vel:n}=this;e&&(t?(this.transformGroup=null,this.detachedTransformGroup=t,t.remove()):n.remove())},transform(){const{transformGroup:e,cellView:t,updateRequested:n}=this;if(!e||t.model.isLink()||n)return;const i=t.getRootTranslateMatrix(),r=t.getRootRotateMatrix(),a=i.multiply(r);e.attr("transform",R.matrixToTransformString(a))},update(){const{node:e,cellView:t,nodeSelector:n,updateRequested:i,id:r}=this;if(i)return;this.postponedUpdate=!1;const a=this.node=this.findNode(t,n);e&&this.unhighlight(t,e),a?(this.highlight(t,a),this.mount()):(this.unmount(),t.notify("cell:highlight:invalid",r,this))},onRemove(){const{node:e,cellView:t,id:n,constructor:i}=this;e&&this.unhighlight(t,e),this.unmount(),i._removeRef(t,n)},highlight(e,t){},unhighlight(e,t){},listenToUpdateAttributes(e){const t=ft(this,"UPDATE_ATTRIBUTES");!Array.isArray(t)||t.length===0||this.listenTo(e.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:e}=this;if(!e)return;const{model:t,paper:n}=e;ft(this,"UPDATE_ATTRIBUTES").some(r=>t.hasChanged(r))&&n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(e,t,n){const i=this.uniqueId(t,n);this.add(e,t,i,n)},unhighlight:function(e,t,n){const i=this.uniqueId(t,n);this.remove(e,i)},get(e,t=null){const{cid:n}=e,{_views:i}=this,r=i[n];if(t===null){const a=[];if(!r)return a;for(let s in r){const o=r[s];o instanceof this&&a.push(o)}return a}else{if(!r)return null;if(t in r){const a=r[t];if(a instanceof this)return a}return null}},add(e,t,n,i={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const r=kt.get(e,n);r&&r.remove();const a=new this(i);return a.id=n,this._addRef(e,n,a),a.requestUpdate(e,t),a.listenToUpdateAttributes(e),a},_addRef(e,t,n){const{cid:i}=e,{_views:r}=this;let a=r[i];a||(a=r[i]={}),a[t]=n},_removeRef(e,t){const{cid:n}=e,{_views:i}=this,r=i[n];if(r){t&&delete r[t];for(let a in r)return;delete i[n]}},remove(e,t=null){Gn(this.get(e,t)).forEach(n=>{n.remove()})},removeAll(e,t=null){const{_views:n}=this;for(let i in n)for(let r in n[i]){const a=n[i][r];a.cellView.paper===e&&a instanceof this&&(t===null||r===t)&&a.remove()}},update(e,t=null,n=!1){Gn(this.get(e,t)).forEach(i=>{(n||i.UPDATABLE)&&i.update()})},transform(e,t=null){Gn(this.get(e,t)).forEach(n=>{n.UPDATABLE&&n.transform()})},unmount(e,t=null){Gn(this.get(e,t)).forEach(n=>n.unmount())},mount(e,t=null){Gn(this.get(e,t)).forEach(n=>n.mount())},uniqueId(e,t=""){return R.ensureId(e)+JSON.stringify(t)}}),vn={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Td={TOOLS:"TOOLS"},me=cn.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var e=["cell"],t=this.model.get("type");return t&&t.toLowerCase().split(".").forEach(function(n,i,r){e.push("type-"+r.slice(0,i+1).join("-"))}),e.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var e={},t={},n=0,i,r,a,s=ft(this,"presentationAttributes");for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];for(Array.isArray(l)||(l=[l]),i=0,r=l.length;i<r;i++){a=l[i];var c=e[a];c||(c=e[a]=1<<n++),t[o]|=c}}var u=ft(this,"initFlag");for(Array.isArray(u)||(u=[u]),i=0,r=u.length;i<r;i++)a=u[i],e[a]||(e[a]=1<<n++);if(n>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=e,this._presentationAttributes=t},hasFlag:function(e,t){return e&this.getFlag(t)},removeFlag:function(e,t){return e^e&this.getFlag(t)},getFlag:function(e){var t=this._flags;if(!t)return 0;var n=0;if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++)n|=t[e[i]];else n|=t[e];return n},attributes:function(){var e=this.model;return{"model-id":e.id,"data-type":e.attributes.type}},constructor:function(e){e.id=e.id||Ka(this),cn.call(this,e)},initialize:function(){this.setFlags(),cn.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.$el.data("view",this),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(e,t){var n=e.getChangeFlag(this._presentationAttributes);t.updateHandled||!n||(t.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),t.tool&&(t.async=!1),this.requestUpdate(n,t))},requestUpdate:function(e,t){const{paper:n}=this;n&&e>0&&n.requestViewUpdate(this,e,this.UPDATE_PRIORITY,t)},parseDOMJSON:function(e,t){var n=sr(e),i=n.selectors,r=n.groupSelectors;for(var a in r){if(i[a])throw new Error("dia.CellView: ambiguous group selector");i[a]=r[a]}if(t){var s=this.selector;if(i[s])throw new Error("dia.CellView: ambiguous root selector.");i[s]=t}return{fragment:n.fragment,selectors:i}},can:function(e){var t=ze(this.options.interactive)?this.options.interactive(this):this.options.interactive;return je(t)&&t[e]!==!1||fo(t)&&t!==!1},findBySelector:function(e,t,n){if(t||(t=this.el),n||(n=this.selectors),!e||e===".")return[t];if(n){var i=n[e];if(i)return Array.isArray(i)?i:[i]}return Ee(t).find(e).toArray()},notify:function(e){if(this.paper){var t=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[e].concat(t)),this.paper.trigger.apply(this.paper,[e,this].concat(t))}},getBBox:function(e){var t;if(e&&e.useModelGeometry){var n=this.model;t=n.getBBox().bbox(n.angle())}else t=this.getNodeBBox(this.el);return this.paper.localToPaperRect(t)},getNodeBBox:function(e){const t=this.getNodeBoundingRect(e),n=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(e)),i=this.getNodeMatrix(e);return R.transformRect(t,n.multiply(i))},getNodeRotateMatrix(e){return!this.rotatableNode||this.rotatableNode.contains(e)?this.getRootRotateMatrix():R.createSVGMatrix()},getNodeUnrotatedBBox:function(e){var t=this.getNodeBoundingRect(e),n=this.getNodeMatrix(e),i=this.getRootTranslateMatrix();return R.transformRect(t,i.multiply(n))},getRootTranslateMatrix:function(){var e=this.model,t=e.position(),n=R.createSVGMatrix().translate(t.x,t.y);return n},getRootRotateMatrix:function(){var e=R.createSVGMatrix(),t=this.model,n=t.angle();if(n){var i=t.getBBox(),r=i.width/2,a=i.height/2;e=e.translate(r,a).rotate(n).translate(-r,-a)}return e},_notifyHighlight:function(e,t,n={}){const{el:i}=this;let r;if(typeof t=="string"?[r=i]=this.findBySelector(t):[r=i]=this.$(t),n.partial=r!==i,n.type===void 0){let a;switch(!0){case n.embedding:a=vn.EMBEDDING;break;case n.connecting:a=vn.CONNECTING;break;case n.magnetAvailability:a=vn.MAGNET_AVAILABILITY;break;case n.elementAvailability:a=vn.ELEMENT_AVAILABILITY;break;default:a=vn.DEFAULT;break}n.type=a}return this.notify(e,r,n),this},highlight:function(e,t){return this._notifyHighlight("cell:highlight",e,t)},unhighlight:function(e,t={}){return this._notifyHighlight("cell:unhighlight",e,t)},findMagnet:function(e){const t=this.el;let n=this.$(e)[0];n||(n=t);do{const i=n.getAttribute("magnet"),r=n===t;if((i||r)&&i!=="false")return n;if(r)return;n=n.parentNode}while(n)},findProxyNode:function(e,t){e||(e=this.el);const n=e.getAttribute(`${t}-selector`);if(n){const[i]=this.findBySelector(n);if(i)return i}return e},getSelector:function(e,t){var n;if(e===this.el)return typeof t=="string"&&(n="> "+t),n;if(e){var i=R(e).index()+1;n=e.tagName+":nth-child("+i+")",t&&(n+=" > "+t),n=this.getSelector(e.parentNode,n)}return n},addLinkFromMagnet:function(e,t,n){var i=this.paper,r=i.model,a=i.getDefaultLink(this,e);return a.set({source:this.getLinkEnd(e,t,n,a,"source"),target:{x:t,y:n}}).addTo(r,{async:!1,ui:!0}),a.findView(i)},getLinkEnd:function(e,...t){var n=this.model,i=n.id,r=this.findAttribute("port",e),a=e.getAttribute("joint-selector"),s={id:i};return a!=null&&(s.magnet=a),r!=null?(s.port=r,!n.hasPort(r)&&!a&&(s.selector=this.getSelector(e))):a==null&&this.el!==e&&(s.selector=this.getSelector(e)),this.customizeLinkEnd(s,e,...t)},customizeLinkEnd:function(e,t,n,i,r,a){const{paper:s}=this,{connectionStrategy:o}=s.options;if(typeof o=="function"){var l=o.call(s,e,this,t,new X(n,i),r,a,s);if(l)return l}return e},getMagnetFromLinkEnd:function(e){var t=this.el,n=e.port,i=e.magnet,r=this.model,a;return n!=null&&r.isElement()&&r.hasPort(n)?a=this.findPortNode(n,i)||t:(i||(i=e.selector),!i&&n!=null&&(i='[port="'+n+'"]'),a=this.findBySelector(i,t,this.selectors)[0]),this.findProxyNode(a,"magnet")},dragLinkStart:function(e,t,n,i){this.model.startBatch("add-link");const r=this.addLinkFromMagnet(t,n,i);r.notifyPointerdown(e,n,i),r.eventData(e,r.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(e,{linkView:r})},dragLink:function(e,t,n){var i=this.eventData(e),r=i.linkView;if(r)r.pointermove(e,t,n);else{var a=this.paper,s=a.options.magnetThreshold,o=this.getEventTarget(e),l=i.targetMagnet;if(s==="onleave"){if(l===o||R(l).contains(o))return}else if(a.eventData(e).mousemoved<=s)return;this.dragLinkStart(e,l,t,n)}},dragLinkEnd:function(e,t,n){var i=this.eventData(e),r=i.linkView;r&&(r.pointerup(e,t,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(e){return this.model.constructor.getAttributeDefinition(e)},setNodeAttributes:function(e,t){Rt(t)||(e instanceof SVGElement?R(e).attr(t):Ee(e).attr(t))},processNodeAttributes:function(e,t){var n,i,r,a,s,o,l,c,u,d=[];for(n in t)t.hasOwnProperty(n)&&(i=t[n],r=this.getAttributeDefinition(n),r&&(!ze(r.qualify)||r.qualify.call(this,i,e,t,this))?(mt(r.set)&&(o||(o={}),o[r.set]=i),i!==null&&d.push(n,r)):(o||(o={}),o[mo(n)]=i));for(a=0,s=d.length;a<s;a+=2)n=d[a],r=d[a+1],i=t[n],ze(r.set)&&(l||(l={}),l[n]=i),ze(r.position)&&(c||(c={}),c[n]=i),ze(r.offset)&&(u||(u={}),u[n]=i);return{raw:t,normal:o,set:l,position:c,offset:u}},updateRelativeAttributes:function(e,t,n,i){i||(i={});var r,a,s,o=t.raw||{},l=t.normal||{},c=t.set,u=t.position,d=t.offset;for(r in c){a=c[r],s=this.getAttributeDefinition(r);var f=s.set.call(this,a,n.clone(),e,o,this);je(f)?ce(l,f):f!==void 0&&(l[r]=f)}if(e instanceof HTMLElement){this.setNodeAttributes(e,l);return}var h=l.transform,m=R.transformStringToMatrix(h),p=X(m.e,m.f);h&&(l=dn(l,"transform"),m.e=m.f=0);var A,b,v;if(u||d){var w=this.getNodeScale(e,i.scalableNode);A=w.sx,b=w.sy}var S=!1;for(r in u)a=u[r],s=this.getAttributeDefinition(r),v=s.position.call(this,a,n.clone(),e,o,this),v&&(p.offset(X(v).scale(A,b)),S||(S=!0));this.setNodeAttributes(e,l);var L=!1;if(d){var z=this.getNodeBoundingRect(e);if(z.width>0&&z.height>0){var Z=R.transformRect(z,m).scale(1/A,1/b);for(r in d)a=d[r],s=this.getAttributeDefinition(r),v=s.offset.call(this,a,Z,e,o,this),v&&(p.offset(X(v).scale(A,b)),L||(L=!0))}}(h!==void 0||S||L)&&(p.round(1),m.e=p.x,m.f=p.y,e.setAttribute("transform",R.matrixToTransformString(m)))},getNodeScale:function(e,t){var n,i;if(t&&t.contains(e)){var r=t.scale();n=1/r.sx,i=1/r.sy}else n=1,i=1;return{sx:n,sy:i}},cleanNodesCache:function(){this.metrics={}},nodeCache:function(e){var t=this.metrics;if(!t)return{};var n=R.ensureId(e),i=t[n];return i||(i=t[n]={}),i},getNodeData:function(e){var t=this.nodeCache(e);return t.data||(t.data={}),t.data},getNodeBoundingRect:function(e){var t=this.nodeCache(e);return t.boundingRect===void 0&&(t.boundingRect=R(e).getBBox()),new he(t.boundingRect)},getNodeMatrix:function(e){const t=this.nodeCache(e);if(t.magnetMatrix===void 0){const{rotatableNode:n,el:i}=this;let r;n&&n.contains(e)?r=n:r=i,t.magnetMatrix=R(e).getTransformToElement(r)}return R.createSVGMatrix(t.magnetMatrix)},getNodeShape:function(e){var t=this.nodeCache(e);return t.geometryShape===void 0&&(t.geometryShape=R(e).toGeometryShape()),t.geometryShape.clone()},isNodeConnection:function(e){return this.model.isLink()&&(!e||e===this.el)},findNodesAttributes:function(e,t,n,i){var r,a,s,o,l={},c=[];for(var u in e)if(e.hasOwnProperty(u)&&(s=e[u],!!Xe(s))){var d=n[u]=this.findBySelector(u,t,i);for(r=0,a=d.length;r<a;r++){var f=d[r];o=R.ensureId(f);var h=i&&i[u]===f,m=l[o];if(m){m.array||(c.push(o),m.array=!0,m.attributes=[m.attributes],m.selectedLength=[m.selectedLength]);var p=m.attributes,A=m.selectedLength;if(h)p.unshift(s),A.unshift(-1);else{var b=$a(A,a);p.splice(b,0,s),A.splice(b,0,a)}}else l[o]={attributes:s,selectedLength:h?-1:a,node:f,array:!1}}}for(r=0,a=c.length;r<a;r++)o=c[r],s=l[o],s.attributes=Fe({},...s.attributes.reverse());return l},getEventTarget:function(e,t={}){const{target:n,type:i,clientX:r=0,clientY:a=0}=e;return t.fromPoint||i==="touchmove"||i==="touchend"||"pointerId"in e&&n.hasPointerCapture(e.pointerId)?document.elementFromPoint(r,a):n},updateDOMSubtreeAttributes:function(e,t,n){n||(n={}),n.rootBBox||(n.rootBBox=he()),n.selectors||(n.selectors=this.selectors);var i={},r={},a=[],s=[],o,l,c,u,d,f=n.roAttributes,h=this.findNodesAttributes(f||t,e,i,n.selectors),m=f?this.findNodesAttributes(t,e,i,n.selectors):h;for(var p in h)if(u=h[p],c=u.attributes,l=u.node,d=this.processNodeAttributes(l,c),!d.set&&!d.position&&!d.offset)this.setNodeAttributes(l,d.normal);else{var A=m[p]&&m[p].attributes,b=A&&c.ref===void 0?A.ref:c.ref,v;if(b){if(v=(i[b]||this.findBySelector(b,e,n.selectors))[0],!v)throw new Error('dia.CellView: "'+b+'" reference does not exist.')}else v=null;if(o={node:l,refNode:v,processedAttributes:d,allAttributes:A},v){var w=s.findIndex(function(S){return S.refNode===l});w>-1?s.splice(w,0,o):s.push(o)}else a.push(o)}a.push(...s);for(let S=0,L=a.length;S<L;S++){o=a[S],l=o.node,v=o.refNode;const z=v?R.ensureId(v):"";let Z=r[z];Z||(Z=r[z]=v?R(v).getBBox({target:Sd(l,v)}):n.rootBBox),f?(d=this.processNodeAttributes(l,o.allAttributes),this.mergeProcessedAttributes(d,o.processedAttributes)):d=o.processedAttributes,this.updateRelativeAttributes(l,d,Z,n)}},mergeProcessedAttributes:function(e,t){e.set||(e.set={}),e.position||(e.position={}),e.offset||(e.offset={}),ce(e.set,t.set),ce(e.position,t.position),ce(e.offset,t.offset);var n=e.normal&&e.normal.transform;n!==void 0&&t.normal&&(t.normal.transform=n),e.normal=t.normal},onMount(e){e||(this.mountTools(),kt.mount(this))},onDetach(){this.unmountTools(),kt.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(e){var t=this._toolsView;return t?e?t.getName()===e:!0:!1},addTools:function(e){return this.removeTools(),e&&(this._toolsView=e,e.configure({relatedView:this}),e.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const e=this._toolsView;return e&&e.unmount(),this},mountTools(){const e=this._toolsView;return e&&!e.isMounted()&&e.mount(),this},updateTools:function(e){var t=this._toolsView;return t&&t.update(e),this},removeTools:function(){var e=this._toolsView;return e&&(e.remove(),this._toolsView=null),this},hideTools:function(){var e=this._toolsView;return e&&e.hide(),this},showTools:function(){var e=this._toolsView;return e&&e.show(),this},onToolEvent:function(e){switch(e){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools();break}},removeHighlighters:function(){kt.remove(this)},updateHighlighters:function(e=!1){kt.update(this,null,e)},transformHighlighters:function(){kt.transform(this)},preventDefaultInteraction(e){this.eventData(e,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(e){const{defaultInteractionPrevented:t=!1}=this.eventData(e);return t},pointerdblclick:function(e,t,n){this.notify("cell:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){this.notify("cell:pointerclick",e,t,n)},contextmenu:function(e,t,n){this.notify("cell:contextmenu",e,t,n)},pointerdown:function(e,t,n){const{model:i}=this,{graph:r}=i;r&&(i.startBatch("pointer"),this.eventData(e,{graph:r})),this.notify("cell:pointerdown",e,t,n)},pointermove:function(e,t,n){this.notify("cell:pointermove",e,t,n)},pointerup:function(e,t,n){const{graph:i}=this.eventData(e);this.notify("cell:pointerup",e,t,n),i&&i.stopBatch("pointer",{cell:this.model})},mouseover:function(e){this.notify("cell:mouseover",e)},mouseout:function(e){this.notify("cell:mouseout",e)},mouseenter:function(e){this.notify("cell:mouseenter",e)},mouseleave:function(e){this.notify("cell:mouseleave",e)},mousewheel:function(e,t,n,i){this.notify("cell:mousewheel",e,t,n,i)},onevent:function(e,t,n,i){this.notify(t,e,n,i)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(e){const{paper:t,model:n}=this;if(t.isAsync()){if(n.isLink()){const a=n.getSourceElement();if(a){const o=t.findViewByModel(a);o&&(t.dumpView(o),t.checkViewVisibility(o))}const s=n.getTargetElement();if(s){const o=t.findViewByModel(s);o&&(t.dumpView(o),t.checkViewVisibility(o))}}t.dumpView(this),t.checkViewVisibility(this)}const i=this.getEventTarget(e,{fromPoint:!0}),r=t.findView(i);r!==this&&(this.mouseleave(e),r&&r.mouseenter(e))},setInteractivity:function(e){this.options.interactive=e}},{Flags:Td,Highlighting:vn,addPresentationAttributes:function(e){return Fe({},ft(this.prototype,"presentationAttributes"),e,function(t,n){if(!(!t||!n)&&(typeof t=="string"&&(t=[t]),typeof n=="string"&&(n=[n]),Array.isArray(t)&&Array.isArray(n)))return kn(t.concat(n))})}});function Sd(e,t){let n=e;do{if(n.contains(t))return n;n=n.parentNode}while(n);return null}const Ae={TOOLS:me.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},An={MOVE:"move",MAGNET:"magnet"},We=me.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var e=me.prototype.className.apply(this).split(" ");return e.push("element"),e.join(" ")},initialize:function(){me.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Ae.UPDATE],position:[Ae.TRANSLATE,Ae.TOOLS],size:[Ae.RESIZE,Ae.PORTS,Ae.TOOLS],angle:[Ae.ROTATE,Ae.TOOLS],markup:[Ae.RENDER],ports:[Ae.PORTS]},initFlag:[Ae.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(e,t){const{useCSSSelectors:n}=Vr;this.hasFlag(e,Ae.PORTS)&&(this._removePorts(),this._cleanPortsCache());let i=!1;if(this.hasFlag(e,Ae.RENDER))this.render(),this.updateTools(t),this.updateHighlighters(!0),i=!0,e=this.removeFlag(e,[Ae.RENDER,Ae.UPDATE,Ae.RESIZE,Ae.TRANSLATE,Ae.ROTATE,Ae.PORTS,Ae.TOOLS]);else{let r=!1;this.hasFlag(e,Ae.RESIZE)&&(this.resize(t),r=!0,e=this.removeFlag(e,[Ae.RESIZE,Ae.UPDATE]),n&&(e=this.removeFlag(e,Ae.PORTS))),this.hasFlag(e,Ae.UPDATE)&&(this.update(this.model,null,t),e=this.removeFlag(e,Ae.UPDATE),r=!0,n&&(e=this.removeFlag(e,Ae.PORTS))),this.hasFlag(e,Ae.TRANSLATE)&&(this.translate(),e=this.removeFlag(e,Ae.TRANSLATE),i=!0),this.hasFlag(e,Ae.ROTATE)&&(this.rotate(),e=this.removeFlag(e,Ae.ROTATE),i=!0),this.hasFlag(e,Ae.PORTS)&&(this._renderPorts(),r=!0,e=this.removeFlag(e,Ae.PORTS)),r&&this.updateHighlighters(!1)}return i&&this.transformHighlighters(),this.hasFlag(e,Ae.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,Ae.TOOLS)),e},_initializePorts:function(){},update:function(e,t){this.cleanNodesCache();const{useCSSSelectors:n}=Vr;n&&this._removePorts();var i=this.model,r=i.attr();this.updateDOMSubtreeAttributes(this.el,r,{rootBBox:new he(i.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:t===r?null:t}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.ElementView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el),n=this.selectors=t.selectors;this.rotatableNode=R(n[this.rotatableSelector])||null,this.scalableNode=R(n[this.scalableSelector])||null,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=this.vel;t.append(R(e)),this.rotatableNode=t.findOne(".rotatable"),this.scalableNode=t.findOne(".scalable");var n=this.selectors={};n[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this},resize:function(e){if(this.scalableNode)return this.sgResize(e);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode){this.rgRotate(),this.update();return}this.updateTransformation()},updateTransformation:function(){var e=this.getTranslateString(),t=this.getRotateString();t&&(e+=" "+t),this.vel.attr("transform",e)},getTranslateString:function(){var e=this.model.attributes.position;return"translate("+e.x+","+e.y+")"},getRotateString:function(){var e=this.model.attributes,t=e.angle;if(!t)return null;var n=e.size;return"rotate("+t+","+n.width/2+","+n.height/2+")"},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(e){var t=this.model,n=t.angle(),i=t.size(),r=this.scalableNode,a=!1;r.node.getElementsByTagName("path").length>0&&(a=!0);var s=r.getBBox({recursive:a}),o=i.width/(s.width||1),l=i.height/(s.height||1);r.attr("transform","scale("+o+","+l+")");var c=this.rotatableNode,u=c&&c.attr("transform");if(u){c.attr("transform",u+" rotate("+-n+","+i.width/2+","+i.height/2+")");var d=r.getBBox({target:this.paper.cells});t.set("position",{x:d.x,y:d.y},ce({updateHandled:!0},e)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(e={}){const t=e.model||this.model,i=(e.paper||this.paper).model,r=e.initialZIndices={},a=t.getEmbeddedCells({deep:!0}),s=i.getConnectedLinks(t,{deep:!0,includeEnclosed:!0});[t,...a,...s].forEach(c=>r[c.id]=c.attributes.z),t.startBatch("to-front"),t.toFront({deep:!0,ui:!0});const o=i.getElements().reduce((c,u)=>Math.max(c,u.attributes.z||0),0);s.forEach(c=>{c.attributes.z<=o&&c.set("z",o+1,{ui:!0})}),t.stopBatch("to-front");const l=t.parent();l?(i.getCell(l).unembed(t,{ui:!0}),e.initialParentId=l):e.initialParentId=null},processEmbedding:function(e={},t,n,i){const r=e.model||this.model,a=e.paper||this.paper,s=a.model,{findParentBy:o,frontParentOnly:l,validateEmbedding:c}=a.options;let u;ze(o)?u=ve(o.call(s,this,t,n,i)):o==="pointer"?u=ve(s.findModelsFromPoint({x:n,y:i})):u=s.findModelsUnderElement(r,{searchBy:o}),u=u.filter(h=>h instanceof Zt&&r.id!==h.id&&!h.isEmbeddedIn(r)),l&&(u=u.slice(-1));let d=null;const f=e.candidateEmbedView;for(let h=u.length-1;h>=0;h--){const m=u[h];if(f&&f.model.id==m.id){d=f;break}else{const p=m.findView(a);if(!ze(c)||c.call(a,this,p)){d=p;break}}}d&&d!=f&&(this.clearEmbedding(e),e.candidateEmbedView=d.highlight(d.findProxyNode(null,"container"),{embedding:!0})),!d&&f&&this.clearEmbedding(e)},clearEmbedding:function(e){e||(e={});var t=e.candidateEmbedView;t&&(t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null)},finalizeEmbedding:function(e={}){const t=e.candidateEmbedView,n=e.model||this.model,i=e.paper||this.paper;if(t)t.model.embed(n,{ui:!0}),t.unhighlight(t.findProxyNode(null,"container"),{embedding:!0}),e.candidateEmbedView=null;else{const{validateUnembedding:r}=i.options,{initialParentId:a}=e;if(a&&typeof r=="function"&&!r.call(i,this)){this._disallowUnembed(e);return}}i.model.getConnectedLinks(n,{deep:!0}).forEach(r=>{r.reparent({ui:!0})})},_disallowUnembed:function(e){const{model:t,whenNotAllowed:n="revert"}=e,i=t||this.model,a=(e.paper||this.paper).model;switch(n){case"remove":{i.remove({ui:!0});break}case"revert":{const{initialParentId:s,initialPosition:o,initialZIndices:l}=e;if(o){const{x:u,y:d}=o;i.position(u,d,{deep:!0,ui:!0})}l&&Object.keys(l).forEach(u=>{const d=a.getCell(u);d&&d.set("z",l[u],{ui:!0})});const c=a.getCell(s);c&&c.embed(i,{ui:!0});break}}},getDelegatedView:function(){for(var e=this,t=e.model,n=e.paper;e&&!t.isLink();){if(!t.isEmbedded()||e.can("stopDelegation"))return e;t=t.getParentCell(),e=n.findViewByModel(t)}return null},findProxyNode:function(e,t){e||(e=this.el);const n=e.getAttribute(`${t}-selector`);if(n){const i=this.findAttribute("port",e);if(i){const r=this.findPortNode(i,n);if(r)return r}else{const[r]=this.findBySelector(n);if(r)return r}}return e},notifyPointerdown(e,t,n){me.prototype.pointerdown.call(this,e,t,n),this.notify("element:pointerdown",e,t,n)},notifyPointermove(e,t,n){me.prototype.pointermove.call(this,e,t,n),this.notify("element:pointermove",e,t,n)},notifyPointerup(e,t,n){this.notify("element:pointerup",e,t,n),me.prototype.pointerup.call(this,e,t,n)},pointerdblclick:function(e,t,n){me.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){me.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",e,t,n)},contextmenu:function(e,t,n){me.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",e,t,n)},pointerdown:function(e,t,n){this.notifyPointerdown(e,t,n),this.dragStart(e,t,n)},pointermove:function(e,t,n){const i=this.eventData(e),{targetMagnet:r,action:a,delegatedView:s}=i;switch(r&&this.magnetpointermove(e,r,t,n),a){case An.MAGNET:this.dragMagnet(e,t,n);break;case An.MOVE:(s||this).drag(e,t,n);default:if(i.preventPointerEvents)break;this.notifyPointermove(e,t,n);break}this.eventData(e,i)},pointerup:function(e,t,n){const i=this.eventData(e),{targetMagnet:r,action:a,delegatedView:s}=i;switch(r&&this.magnetpointerup(e,r,t,n),a){case An.MAGNET:this.dragMagnetEnd(e,t,n);break;case An.MOVE:(s||this).dragEnd(e,t,n);default:if(i.preventPointerEvents)break;this.notifyPointerup(e,t,n)}r&&this.magnetpointerclick(e,r,t,n),this.checkMouseleave(e)},mouseover:function(e){me.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",e)},mouseout:function(e){me.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",e)},mouseenter:function(e){me.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",e)},mouseleave:function(e){me.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",e)},mousewheel:function(e,t,n,i){me.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",e,t,n,i)},onmagnet:function(e,t,n){const{currentTarget:i}=e;this.magnetpointerdown(e,i,t,n),this.eventData(e,{targetMagnet:i}),this.dragMagnetStart(e,t,n)},magnetpointerdown:function(e,t,n,i){this.notify("element:magnet:pointerdown",e,t,n,i)},magnetpointermove:function(e,t,n,i){this.notify("element:magnet:pointermove",e,t,n,i)},magnetpointerup:function(e,t,n,i){this.notify("element:magnet:pointerup",e,t,n,i)},magnetpointerdblclick:function(e,t,n,i){this.notify("element:magnet:pointerdblclick",e,t,n,i)},magnetcontextmenu:function(e,t,n,i){this.notify("element:magnet:contextmenu",e,t,n,i)},dragStart:function(e,t,n){if(this.isDefaultInteractionPrevented(e))return;var i=this.getDelegatedView();if(!i||!i.can("elementMove"))return;this.eventData(e,{action:An.MOVE,delegatedView:i});const r=i.model.position();i.eventData(e,{initialPosition:r,pointerOffset:r.difference(t,n),restrictedArea:this.paper.getRestrictedArea(i,t,n)})},dragMagnetStart:function(e,t,n){const{paper:i}=this,r=e.isPropagationStopped();if(r&&this.eventData(e,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(e)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:a=e.currentTarget}=this.eventData(e);if(e.stopPropagation(),!i.options.validateMagnet.call(i,this,a,e)){r?this.dragStart(e,t,n):this.pointerdown(e,t,n);return}i.options.magnetThreshold<=0&&this.dragLinkStart(e,a,t,n),this.eventData(e,{action:An.MAGNET})},drag:function(e,t,n){var i=this.paper,r=i.options.gridSize,a=this.model,s=this.eventData(e),{pointerOffset:o,restrictedArea:l,embedding:c}=s,u=Ai(t+o.x,r),d=Ai(n+o.y,r);a.position(u,d,{restrictedArea:l,deep:!0,ui:!0}),i.options.embeddingMode&&(c||(this.prepareEmbedding(s),c=!0),this.processEmbedding(s,e,t,n)),this.eventData(e,{embedding:c})},dragMagnet:function(e,t,n){this.dragLink(e,t,n)},dragEnd:function(e,t,n){var i=this.eventData(e);i.embedding&&this.finalizeEmbedding(i)},dragMagnetEnd:function(e,t,n){this.dragLinkEnd(e,t,n)},magnetpointerclick:function(e,t,n,i){var r=this.paper;r.eventData(e).mousemoved>r.options.clickThreshold||this.notify("element:magnet:pointerclick",e,t,n,i)}},{Flags:Ae});ce(We.prototype,kd);const zd=function(e,t,n){return e},Ld=function(e,t,n){var i=t.side||"bottom",r=tn(t.padding||40),a=n.sourceBBox,s=n.targetBBox,o=a.center(),l=s.center(),c,u,d;switch(i){case"bottom":d=1,c="y",u="height";break;case"top":d=-1,c="y",u="height";break;case"left":d=-1,c="x",u="width";break;case"right":d=1,c="x",u="width";break;default:throw new Error("Router: invalid side")}return o[c]+=d*(a[u]/2+r[i]),l[c]+=d*(s[u]/2+r[i]),d*(o[c]-l[c])>0?l[c]=o[c]:o[c]=l[c],[o].concat(e,l)};var Od={N:"S",S:"N",E:"W",W:"E"},Pd={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function wi(e,t,n){var i=new X(e.x,t.y);return n.containsPoint(i)&&(i=new X(t.x,e.y)),i}function mr(e,t){return e[t==="W"||t==="E"?"width":"height"]}function ot(e,t){return e.x===t.x?e.y>t.y?"N":"S":e.y===t.y?e.x>t.x?"W":"E":null}function oi(e){return new he(e.x,e.y,0,0)}function Mi(e){var t=tn(e.padding||e.elementPadding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function Ws(e,t){return e.sourceBBox.clone().moveAndExpand(Mi(t))}function Us(e,t){return e.targetBBox.clone().moveAndExpand(Mi(t))}function Bd(e,t){if(e.sourceAnchor)return e.sourceAnchor;var n=Ws(e,t);return n.center()}function Zd(e,t){if(e.targetAnchor)return e.targetAnchor;var n=Us(e,t);return n.center()}function Vs(e,t,n){var i=new X(e.x,t.y),r=new X(t.x,e.y),a=ot(e,i),s=ot(e,r),o=Od[n],l=a===n||a!==o&&(s===o||s!==n)?i:r;return{points:[l],direction:ot(l,t)}}function Ii(e,t,n){var i=wi(e,t,n);return{points:[i],direction:ot(i,t)}}function jd(e,t,n,i){var r={},a=[new X(e.x,t.y),new X(t.x,e.y)],s=a.filter(function(d){return!n.containsPoint(d)}),o=s.filter(function(d){return ot(d,e)!==i}),l;if(o.length>0)l=o.filter(function(d){return ot(e,d)===i}).pop(),l=l||o[0],r.points=[l],r.direction=ot(l,t);else{l=Qa(a,s)[0];var c=new X(t).move(l,-mr(n,i)/2),u=wi(c,e,n);r.points=[u,c],r.direction=ot(c,t)}return r}function Gd(e,t,n,i){var r=Ii(t,e,i),a=r.points[0];if(n.containsPoint(a)){r=Ii(e,t,n);var s=r.points[0];if(i.containsPoint(s)){var o=new X(e).move(s,-mr(n,ot(e,s))/2),l=new X(t).move(a,-mr(i,ot(t,a))/2),c=new wt(o,l).midpoint(),u=Ii(e,c,n),d=Vs(c,t,u.direction);r.points=[u.points[0],d.points[0]],r.direction=d.direction}}return r}function Ri(e,t,n,i,r){var a={},s=n.union(i).inflate(1),o=s.center().distance(t)>s.center().distance(e),l=o?t:e,c=o?e:t,u,d,f;return r?(u=X.fromPolar(s.width+s.height,Pd[r],l),u=s.pointNearestToPoint(u).move(u,-1)):u=s.pointNearestToPoint(l).move(l,1),d=wi(u,c,s),u.round().equals(d.round())?(d=X.fromPolar(s.width+s.height,xn(u.theta(l))+Math.PI/2,c),d=s.pointNearestToPoint(d).move(c,1).round(),f=wi(u,d,s),a.points=o?[d,f,u]:[u,f,d]):a.points=o?[d,u]:[u,d],a.direction=ot(o?u:d,t),a}function pr(e,t,n){var i=Ws(n,t),r=Us(n,t),a=Bd(n,t),s=Zd(n,t);i=i.union(oi(a)),r=r.union(oi(s)),e=ve(e).map(X),e.unshift(a),e.push(s);for(var o,l=[],c=0,u=e.length-1;c<u;c++){var d=null,f=e[c],h=e[c+1],m=!!ot(f,h);if(c===0)c+1===u?i.intersect(r.clone().inflate(1))?d=Ri(f,h,i,r):m||(d=Gd(f,h,i,r)):i.containsPoint(h)?d=Ri(f,h,i,oi(h).moveAndExpand(Mi(t))):m||(d=Ii(f,h,i));else if(c+1===u){var p=m&&ot(h,f)===o;r.containsPoint(f)||p?d=Ri(f,h,oi(f).moveAndExpand(Mi(t)),r,o):m||(d=jd(f,h,r,o))}else m||(d=Vs(f,h,o));d?(Array.prototype.push.apply(l,d.points),o=d.direction):o=ot(f,h),c+1<u&&l.push(h)}return l}var Xs={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var e=this.step,t=this.cost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:-e,offsetY:0,cost:t},{offsetX:0,offsetY:e,cost:t},{offsetX:0,offsetY:-e,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var e=this.step;return{x:-e,y:-e,width:2*e,height:2*e}},isPointObstacle:null,fallbackRouter:function(e,t,n){if(!ze(pr))throw new Error("Manhattan requires the orthogonal router as default fallback.");return pr(e,ce({},Xs,t),n)},fallbackRoute:function(e,t,n){return null},draggingRoute:null};function Or(e){this.map={},this.options=e,this.mapGridSize=100}Or.prototype.build=function(e,t){var n=this.options,i=ve(n.excludeEnds).reduce(function(l,c){var u=t.get(c);if(u){var d=e.getCell(u.id);d&&l.push(d)}return l},[]),r=[],a=e.getCell(t.get("source").id);a&&(r=ir(r,a.getAncestors().map(function(l){return l.id})));var s=e.getCell(t.get("target").id);s&&(r=ir(r,s.getAncestors().map(function(l){return l.id})));var o=this.mapGridSize;return e.getElements().reduce(function(l,c){var u=ve(n.excludeTypes).includes(c.get("type")),d=i.find(function(S){return S.id===c.id}),f=r.includes(c.id),h=u||d||f;if(!h)for(var m=c.getBBox().moveAndExpand(n.paddingBox),p=m.origin().snapToGrid(o),A=m.corner().snapToGrid(o),b=p.x;b<=A.x;b+=o)for(var v=p.y;v<=A.y;v+=o){var w=b+"@"+v;l[w]=l[w]||[],l[w].push(m)}return l},this.map),this};Or.prototype.isPointAccessible=function(e){var t=e.clone().snapToGrid(this.mapGridSize).toString();return ve(this.map[t]).every(function(n){return!n.containsPoint(e)})};function hn(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}hn.prototype.add=function(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=this.OPEN,this.values[e]=t;var n=$a(this.items,e,(function(i){return this.values[i]}).bind(this));this.items.splice(n,0,e)};hn.prototype.remove=function(e){this.hash[e]=this.CLOSE};hn.prototype.isOpen=function(e){return this.hash[e]===this.OPEN};hn.prototype.isClose=function(e){return this.hash[e]===this.CLOSE};hn.prototype.isEmpty=function(){return this.items.length===0};hn.prototype.pop=function(){var e=this.items.shift();return this.remove(e),e};function Fs(e,t){return t&&t.paddingBox?e.sourceBBox.clone().moveAndExpand(t.paddingBox):e.sourceBBox.clone()}function Hs(e,t){return t&&t.paddingBox?e.targetBBox.clone().moveAndExpand(t.paddingBox):e.targetBBox.clone()}function Js(e,t){if(e.sourceAnchor)return e.sourceAnchor;var n=Fs(e,t);return n.center()}function Ed(e,t){if(e.targetAnchor)return e.targetAnchor;var n=Hs(e,t);return n.center()}function Yi(e,t,n,i,r){var a=360/n,s=e.theta(Rd(e,t,i,r)),o=Dn(s+a/2);return a*Math.floor(o/a)}function Rd(e,t,n,i){var r=i.step,a=t.x-e.x,s=t.y-e.y,o=a/n.x,l=s/n.y,c=o*r,u=l*r;return new X(e.x+c,e.y+u)}function Ia(e,t){var n=Math.abs(e-t);return n>180?360-n:n}function Yd(e,t,n){var i=n.step;ve(n.directions).forEach(function(r){r.gridOffsetX=r.offsetX/i*t.x,r.gridOffsetY=r.offsetY/i*t.y})}function _d(e,t,n){return{source:t.clone(),x:va(n.x-t.x,e),y:va(n.y-t.y,e)}}function va(e,t){if(!e)return t;var n=Math.abs(e),i=Math.round(n/t);if(!i)return n;var r=i*t,a=n-r,s=a/i;return t+s}function Wd(e,t){var n=t.source,i=Ai(e.x-n.x,t.x)+n.x,r=Ai(e.y-n.y,t.y)+n.y;return new X(i,r)}function Yn(e,t){return e.round(t)}function vi(e,t,n){return Yn(Wd(e.clone(),t),n)}function Wn(e){return e.clone().toString()}function _i(e){return new X(e.x===0?0:Math.abs(e.x)/e.x,e.y===0?0:Math.abs(e.y)/e.y)}function Ud(e,t,n,i,r,a,s){for(var o=[],l=_i(r.difference(n)),c=Wn(n),u=e[c],d;u;){d=t[c];var f=_i(d.difference(u));f.equals(l)||(o.unshift(d),l=f),c=Wn(u),u=e[c]}var h=t[c],m=_i(h.difference(i));return m.equals(l)||o.unshift(h),o}function Aa(e,t){for(var n=1/0,i=0,r=t.length;i<r;i++){var a=e.manhattanDistance(t[i]);a<n&&(n=a)}return n}function Ca(e,t,n,i,r){var a=r.precision,s=r.directionMap,o=e.difference(t.center()),l=je(s)?Object.keys(s):[],c=ve(n),u=l.reduce(function(d,f){if(c.includes(f)){for(var h=s[f],m=new X(e.x+h.x*(Math.abs(o.x)+t.width),e.y+h.y*(Math.abs(o.y)+t.height)),p=new wt(e,m),A=p.intersect(t)||[],b=A.length,v,w=null,S=0;S<b;S++){var L=A[S],z=e.squaredDistance(L);(v===void 0||z>v)&&(v=z,w=L)}if(w){var Z=vi(w,i,a);t.containsPoint(Z)&&(Z=vi(Z.offset(h.x*i.x,h.y*i.y),i,a)),d.push(Z)}}return d},[]);return t.containsPoint(e)||u.push(vi(e,i,a)),u}function Vd(e,t,n,i){var r=i.precision,a,s;e instanceof he?a=Yn(Js(this,i).clone(),r):a=Yn(e.clone(),r),t instanceof he?s=Yn(Ed(this,i).clone(),r):s=Yn(t.clone(),r);var o=_d(i.step,a,s),l,c,u,d;if(e instanceof he?(l=a,u=Ca(l,e,i.startDirections,o,i)):(l=a,u=[l]),t instanceof he?(c=s,d=Ca(s,t,i.endDirections,o,i)):(c=s,d=[c]),u=u.filter(xe=>!n(xe)),d=d.filter(xe=>!n(xe)),u.length>0&&d.length>0){for(var f=new hn,h={},m={},p={},A=0,b=u.length;A<b;A++){var v=u[A],w=Wn(v);f.add(w,Aa(v,d)),h[w]=v,p[w]=0}var S=i.previousDirectionAngle,L=S===void 0,z,Z,Y=i.directions;Yd(Y,o,i);for(var W=Y.length,H=ve(d).reduce(function(xe,F){var $=Wn(F);return xe.push($),xe},[]),q=i.maximumLoops;!f.isEmpty()&&q>0;){var oe=f.pop(),M=h[oe],k=m[oe],O=p[oe],K=k===void 0,T=M.equals(l),P;K?L?T?P=null:P=Yi(l,M,W,o,i):P=S:P=Yi(k,M,W,o,i);var I=u.length===d.length;if(I){for(var N=0;N<u.length;N++)if(!u[N].equals(d[N])){I=!1;break}}var D=K&&I;if(!D&&H.indexOf(oe)>=0)return i.previousDirectionAngle=P,Ud(m,h,M,l,c);for(A=0;A<W;A++){z=Y[A];var y=z.angle;if(Z=Ia(P,y),!(!(L&&T)&&Z>i.maxAllowedDirectionChange)){var x=vi(M.clone().offset(z.gridOffsetX,z.gridOffsetY),o,r),j=Wn(x);if(!(f.isClose(j)||n(x))){if(H.indexOf(j)>=0){var U=x.equals(c);if(!U){var Ce=Yi(x,c,W,o,i),fe=Ia(y,Ce);if(fe>i.maxAllowedDirectionChange)continue}}var Oe=z.cost,ye=T?0:i.penalties[Z],ke=O+Oe+ye;(!f.isOpen(j)||ke<p[j])&&(h[j]=x,m[j]=M,p[j]=ke,f.add(j,ke+Aa(x,d)))}}}q--}}return i.fallbackRoute.call(this,l,c,i)}function Xd(e){if(e.directions=ft(e,"directions"),e.penalties=ft(e,"penalties"),e.paddingBox=ft(e,"paddingBox"),e.padding=ft(e,"padding"),e.padding){var t=tn(e.padding);e.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}ve(e.directions).forEach(function(n){var i=new X(0,0),r=new X(n.offsetX,n.offsetY);n.angle=Dn(i.theta(r))})}function Fd(e,t,n){Xd(t),n.options.perpendicular=!!t.perpendicular;var i=Fs(n,t),r=Hs(n,t),a=Js(n,t);let s;if(typeof t.isPointObstacle=="function")s=t.isPointObstacle;else{const w=new Or(t);w.build(n.paper.model,n.model),s=S=>!w.isPointAccessible(S)}for(var o=ve(e).map(X),l=[],c=a,u,d,f=0,h=o.length;f<=h;f++){var m=null;if(d=u||i,u=o[f],!u){u=r;var p=!n.model.get("source").id||!n.model.get("target").id;if(p&&ze(t.draggingRoute)){var A=d===i?a:d,b=u.origin();m=t.draggingRoute.call(n,A,b,t)}}if(m=m||Vd.call(n,d,u,s,t),m===null)return t.fallbackRouter(e,t,n);var v=m[0];v&&v.equals(c)&&m.shift(),c=m[m.length-1]||c,Array.prototype.push.apply(l,m)}return l}const Ir=function(e,t,n){return Fd(e,ce({},Xs,t),n)};var Hd={maxAllowedDirectionChange:45,diagonalCost:function(){var e=this.step;return Math.ceil(Math.sqrt(e*e<<1))},directions:function(){var e=this.step,t=this.cost(),n=this.diagonalCost();return[{offsetX:e,offsetY:0,cost:t},{offsetX:e,offsetY:e,cost:n},{offsetX:0,offsetY:e,cost:t},{offsetX:-e,offsetY:e,cost:n},{offsetX:-e,offsetY:0,cost:t},{offsetX:-e,offsetY:-e,cost:n},{offsetX:0,offsetY:-e,cost:t},{offsetX:e,offsetY:-e,cost:n}]},fallbackRoute:function(e,t,n){var i=e.theta(t),r=[],a={x:t.x,y:e.y},s={x:e.x,y:t.y};if(i%180>90){var o=a;a=s,s=o}var l=i%90<45?a:s,c=new wt(e,l),u=90*Math.ceil(i/90),d=X.fromPolar(c.squaredLength(),xn(u+135),l),f=new wt(t,d),h=c.intersection(f),m=h||t,p=h?m:e,A=360/n.directions.length,b=p.theta(t),v=Dn(b+A/2),w=A*Math.floor(v/A);return n.previousDirectionAngle=w,m&&r.push(m.round()),r.push(t),r}};const Jd=function(e,t,n){if(!ze(Ir))throw new Error("Metro requires the manhattan router.");return Ir(e,ce({},Hd,t),n)},Be={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},ba=[Be.LEFT,Be.RIGHT,Be.TOP,Be.BOTTOM];function ya(e,t,n){const i=n.getTangentAtLength(n.getClosestPointLength(t));switch(Math.round(i.angle()/90)*90){case 0:case 360:return e.y<t.y?Be.TOP:Be.BOTTOM;case 90:return e.x<t.x?Be.LEFT:Be.RIGHT;case 180:return e.y<t.y?Be.TOP:Be.BOTTOM;case 270:return e.x<t.x?Be.LEFT:Be.RIGHT}}function Ks(e,t,n){const i=t.margin||20;let{sourceDirection:r=Be.AUTO,targetDirection:a=Be.AUTO}=t;const s=n.sourceView,o=n.targetView,l=!!n.model.source().port,c=!!n.model.target().port;r===Be.AUTO&&(r=l?Be.MAGNET_SIDE:Be.ANCHOR_SIDE),a===Be.AUTO&&(a=c?Be.MAGNET_SIDE:Be.ANCHOR_SIDE);const u=n.sourceBBox,d=n.targetBBox,f=n.sourceAnchor,h=n.targetAnchor;let{x:m,y:p,width:A=0,height:b=0}=s&&s.model.isElement()?he.fromRectUnion(u,s.model.getBBox()):n.sourceAnchor,{x:v,y:w,width:S=0,height:L=0}=o&&o.model.isElement()?he.fromRectUnion(d,o.model.getBBox()):n.targetAnchor;const z=v+S,Z=w+L,Y=m+A,W=p+b,H=m-i,q=Y+i,oe=p-i,M=W+i,k=v-i,O=z+i,K=w-i,T=Z+i,P=f.clone();let I;if(s)s.model.isLink()?I=ya(h,f,s):r===Be.ANCHOR_SIDE?I=u.sideNearestToPoint(f):r===Be.MAGNET_SIDE?I=s.model.getBBox().sideNearestToPoint(f):I=r;else{const F=new he(m,p,0,0);I=ba.includes(r)?r:F.sideNearestToPoint(h)}switch(I){case"left":P.x=H;break;case"right":P.x=q;break;case"top":P.y=oe;break;case"bottom":P.y=M;break}const N=h.clone();let D;if(o)o.model.isLink()?D=ya(f,h,o):a===Be.ANCHOR_SIDE?D=d.sideNearestToPoint(h):a===Be.MAGNET_SIDE?D=o.model.getBBox().sideNearestToPoint(h):D=a;else{const F=new he(v,w,0,0);D=ba.includes(a)?a:F.sideNearestToPoint(f)}switch(D){case"left":N.x=k;break;case"right":N.x=O;break;case"top":N.y=K;break;case"bottom":N.y=T;break}const{x:y,y:x}=P,{x:j,y:U}=N,Ce=(v+z)/2,fe=(w+Z)/2,Oe=(m+Y)/2,ye=(p+W)/2,ke=(Oe<Ce?Y+v:z+m)/2,xe=(ye<fe?W+w:Z+p)/2;if(I==="left"&&D==="right"){if(H<=z){let $=xe;return Y<=v&&(Z>=oe&&U<x?$=Math.min(K,oe):w<=M&&U>=x&&($=Math.max(T,M))),[{x:y,y:x},{x:y,y:$},{x:j,y:$},{x:j,y:U}]}const F=(y+j)/2;return[{x:F,y:x},{x:F,y:U}]}else if(I==="right"&&D==="left"){if(q>=v){let $=xe;return y>z&&(Z>=oe&&U<x?$=Math.min(K,oe):w<=M&&U>=x&&($=Math.max(T,M))),[{x:y,y:x},{x:y,y:$},{x:j,y:$},{x:j,y:U}]}const F=(y+j)/2;return[{x:F,y:x},{x:F,y:U}]}else if(I==="top"&&D==="bottom"){if(x<U){let $=ke,se=x;return x<w&&(z>=H&&j<y?$=Math.min(k,H):v<=q&&j>=y&&($=Math.max(O,q))),[{x:y,y:se},{x:$,y:se},{x:$,y:U},{x:j,y:U}]}const F=(x+U)/2;return[{x:y,y:F},{x:j,y:F}]}else if(I==="bottom"&&D==="top"){if(x-i>U){let $=ke,se=x;return x>Z&&(z>=H&&j<y?$=Math.min(k,H):v<=q&&j>=y&&($=Math.max(O,q))),[{x:y,y:se},{x:$,y:se},{x:$,y:U},{x:j,y:U}]}const F=(x+U)/2;return[{x:y,y:F},{x:j,y:F}]}else if(I==="top"&&D==="top"){let F,$=Math.min((W+w)/2,U),se=Math.min((p+Z)/2,x);if(U<x){if(y>=O||y<=k)return[{x:y,y:Math.min(x,U)},{x:j,y:Math.min(x,U)}];j>y?F=Math.min(y,k):F=Math.max(y,O)}else{if(j>=q||j<=H)return[{x:y,y:Math.min(x,U)},{x:j,y:Math.min(x,U)}];j>=y?F=Math.max(j,q):F=Math.min(j,H)}return[{x:y,y:se},{x:F,y:se},{x:F,y:$},{x:j,y:$}]}else if(I==="bottom"&&D==="bottom"){if(v>=y+i||z<=y-i)return[{x:y,y:Math.max(x,U)},{x:j,y:Math.max(x,U)}];let F,$,se;return U>x?($=Math.max((W+w)/2,U),se=Math.max((W+w)/2,x),j>y?F=Math.min(y,k):F=Math.max(y,O)):($=Math.max((p+Z)/2,U),se=Math.max((p+Z)/2,x),j>y?F=Math.min(j,H):F=Math.max(j,q)),[{x:y,y:se},{x:F,y:se},{x:F,y:$},{x:j,y:$}]}else if(I==="left"&&D==="left"){let F,$=Math.min((Y+v)/2,j),se=Math.min((m+z)/2,y);return j>y?U<=x?F=Math.min(oe,U):F=Math.max(M,U):U>=x?F=Math.min(K,x):F=Math.max(T,x),[{x:se,y:x},{x:se,y:F},{x:$,y:F},{x:$,y:U}]}else if(I==="right"&&D==="right"){let F,$=Math.max((m+z)/2,j),se=Math.max((Y+v)/2,y);return j<y?U<=x?F=Math.min(oe,U):F=Math.max(M,U):U>=x?F=Math.min(K,x):F=Math.max(T,x),[{x:se,y:x},{x:se,y:F},{x:$,y:F},{x:$,y:U}]}else if(I==="top"&&D==="right"){if(x>U){if(y<j){let $=(p+Z)/2;return $>fe&&$<T&&y<k&&($=K),[{x:y,y:$},{x:j,y:$},{x:j,y:U}]}return[{x:y,y:U}]}const F=(m+z)/2;if(y>j&&W>=U)return[{x:y,y:x},{x:F,y:x},{x:F,y:U}];if(F>H&&x<Z){const $=Math.min(p,w)-i,se=Math.max(Y,z)+i;return[{x:y,y:$},{x:se,y:$},{x:se,y:U}]}return[{x:y,y:x},{x:F,y:x},{x:F,y:U}]}else if(I==="top"&&D==="left"){if(x>U){if(y>j){let $=(p+Z)/2;return $>fe&&$<T&&y>O&&($=K),[{x:y,y:$},{x:j,y:$},{x:j,y:U}]}return[{x:y,y:U}]}const F=(Y+v)/2;if(y<j&&W>=U)return[{x:y,y:x},{x:F,y:x},{x:F,y:U}];if(F<q&&x<Z){const $=Math.min(p,w)-i,se=Math.min(m,v)-i;return[{x:y,y:$},{x:se,y:$},{x:se,y:U}]}return[{x:y,y:x},{x:F,y:x},{x:F,y:U}]}else if(I==="bottom"&&D==="right"){if(x<U){if(y<j){let $=(W+w)/2;return $<fe&&$>K&&y<k&&($=T),[{x:y,y:$},{x:j,y:$},{x:j,y:U}]}return[{x:y,y:U}]}else if(m<j){const $=Math.max(W,Z)+i,se=Math.max(Y,z)+i;return[{x:y,y:$},{x:se,y:$},{x:se,y:U}]}const F=ke;return[{x:y,y:x},{x:F,y:x},{x:F,y:U}]}else if(I==="bottom"&&D==="left"){if(x<U){if(y>j){let $=(W+w)/2;return $<fe&&$>K&&y>O&&($=T),[{x:y,y:$},{x:j,y:$},{x:j,y:U}]}return[{x:y,y:U}]}else if(Y>j){const $=Math.max(W,Z)+i,se=Math.min(m,v)-i;return[{x:y,y:$},{x:se,y:$},{x:se,y:U}]}const F=ke;return[{x:y,y:x},{x:F,y:x},{x:F,y:U}]}else if(I==="left"&&D==="bottom"){if(y>j&&x>=T)return[{x:j,y:x}];if(y>=z&&x<U){const se=(Y+v)/2;return[{x:se,y:x},{x:se,y:U},{x:j,y:U}]}if(j<Y&&Z<=p){const se=(p+Z)/2;return[{x:y,y:x},{x:y,y:se},{x:j,y:se}]}const F=Math.min(k,y),$=Math.max(W,Z)+i;return[{x:F,y:x},{x:F,y:$},{x:j,y:$}]}else if(I==="left"&&D==="top"){if(y>j&&x<K)return[{x:j,y:x}];if(y>=z&&x>U){const se=(m+z)/2;return[{x:se,y:x},{x:se,y:U},{x:j,y:U}]}if(j<=Y&&U>x){const se=(w+W)/2;return[{x:y,y:x},{x:y,y:se},{x:j,y:se}]}const F=U<x?Math.min(m,v)-i:H,$=Math.min(p,w)-i;return[{x:F,y:x},{x:F,y:$},{x:j,y:$}]}else if(I==="right"&&D==="top"){if(y<j&&x<K)return[{x:j,y:x}];if(Y<v&&x>U){let se=(Y+v)/2;return[{x:se,y:x},{x:se,y:U},{x:j,y:U}]}if(j<y&&w>W){const se=(W+w)/2;return[{x:y,y:x},{x:y,y:se},{x:j,y:se}]}const F=Math.max(Y,z)+i,$=Math.min(p,w)-i;return[{x:F,y:x},{x:F,y:$},{x:j,y:$}]}else if(I==="right"&&D==="bottom"){if(y<j&&x>=T)return[{x:j,y:x}];if(y<=v&&x<U){const se=(Y+v)/2;return[{x:se,y:x},{x:se,y:U},{x:j,y:U}]}if(j>m&&Z<p){const se=(p+Z)/2;return[{x:y,y:x},{x:y,y:se},{x:j,y:se}]}const F=Math.max(O,y),$=Math.max(W,Z)+i;return[{x:F,y:x},{x:F,y:$},{x:j,y:$}]}}Ks.Directions=Be;const Kd=Ks,$d=Object.freeze(Object.defineProperty({__proto__:null,manhattan:Ir,metro:Jd,normal:zd,oneSide:Ld,orthogonal:pr,rightAngle:Kd},Symbol.toStringTag,{value:"Module"})),yn={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},Qd=Object.values(yn),qd=10,eg=1,Pr=function(e,t,n=[],i={}){const{cornerType:r=yn.POINT,cornerRadius:a=qd,cornerPreserveAspectRatio:s=!1,precision:o=eg,raw:l=!1}=i;if(Qd.indexOf(r)===-1)throw new Error("Invalid `cornerType` provided to `straight` connector.");let c;if(r===yn.POINT||!a){const u=[e].concat(n).concat([t]),d=new Vn(u);c=new Le(d)}else{c=new Le,c.appendSegment(Le.createSegment("M",e));let u;const d=n.length;for(let f=0;f<d;f++){const h=new X(n[f]),m=n[f-1]||e,p=n[f+1]||t,A=u||h.distance(m)/2;u=h.distance(p)/2;let b,v;s?b=v=-Math.min(a,A,u):(b=-Math.min(a,A),v=-Math.min(a,u));const w=h.clone().move(m,b).round(o),S=h.clone().move(p,v).round(o);switch(c.appendSegment(Le.createSegment("L",w)),r){case yn.CUBIC:{const L=.3333333333333333,z=2/3,Z=new X(L*w.x+z*h.x,z*h.y+L*w.y),Y=new X(L*S.x+z*h.x,z*h.y+L*S.y);c.appendSegment(Le.createSegment("C",Z,Y,S));break}case yn.LINE:{c.appendSegment(Le.createSegment("L",S));break}case yn.GAP:{c.appendSegment(Le.createSegment("M",S));break}}}c.appendSegment(Le.createSegment("L",t))}return l?c:c.serialize()};var tg=5,wa=["arc","gap","cubic"],ng=0,Ma=1,ig=["smooth"],li=1/3,ci=2/3;function Na(e,t){let{x:n,y:i}=e,{x:r,y:a}=t;if(n>r){let s=n;n=r,r=s,s=i,i=a,a=s}if(i>a){let s=n;n=r,r=s,s=i,i=a,a=s}return[new X(n,i),new X(r,a)]}function rg(e,t){const[{x:n,y:i},{x:r,y:a}]=Na(e.start,e.end),[{x:s,y:o},{x:l,y:c}]=Na(t.start,t.end),u=n<=l&&s<=r,d=i<=c&&o<=a;return u&&d}function Wi(e,t,n){var i=[].concat(e,n,t);return i.reduce(function(r,a,s){var o=i[s+1];return o!=null&&(r[s]=Mn(a,o)),r},[])}function ag(e){var t=e.paper,n=t._jumpOverUpdateList;if(n==null){n=t._jumpOverUpdateList=[];var i=t.model;i.on("batch:stop",function(){this.hasActiveBatch()||sg(t)}),i.on("reset",function(){n=t._jumpOverUpdateList=[]})}n.indexOf(e)<0&&(n.push(e),e.listenToOnce(e.model,"change:connector remove",function(){n.splice(n.indexOf(e),1)}))}function sg(e){for(var t=e._jumpOverUpdateList,n=0;n<t.length;n++){const i=t[n],r=i.getFlag(i.constructor.Flags.CONNECTOR);i.requestUpdate(r)}}function og(e,t){return ve(t).reduce(function(n,i){var r=e.intersection(i);return r&&n.push(r),n},[])}function ka(e,t){return Mn(e,t).squaredLength()}function lg(e,t,n){return t.reduce(function(i,r,a){if(r.skip===!0)return i;var s=i.pop()||e,o=ar(r).move(s.start,-n),l=ar(r).move(s.start,+n),c=t[a+1];if(c!=null){var u=l.distance(c);u<=n&&(l=c.move(s.start,u),c.skip=!0)}else{var d=o.distance(s.end);if(d<n*2+Ma)return i.push(s),i}var f=l.distance(s.start);if(f<n*2+Ma)return i.push(s),i;var h=Mn(o,l);return h.isJump=!0,i.push(Mn(s.start,o),h,Mn(l,s.end)),i},[])}function Da(e,t,n,i){var r=new Le,a;return a=Le.createSegment("M",e[0].start),r.appendSegment(a),ve(e).forEach(function(s,o){if(s.isJump){var l,c,u,d;if(n==="arc"){l=-90,c=s.start.difference(s.end);var f=+(c.x<0||c.x===0&&c.y<0);f&&(l+=180);var h=s.midpoint(),m=new wt(h,s.end).rotate(h,l),p;p=new wt(s.start,h),u=p.pointAt(2/3).rotate(s.start,l),d=m.pointAt(1/3).rotate(m.end,-l),a=Le.createSegment("C",u,d,m.end),r.appendSegment(a),p=new wt(h,s.end),u=m.pointAt(1/3).rotate(m.end,l),d=p.pointAt(1/3).rotate(s.end,-l),a=Le.createSegment("C",u,d,s.end),r.appendSegment(a)}else if(n==="gap")a=Le.createSegment("M",s.end),r.appendSegment(a);else if(n==="cubic"){l=s.start.theta(s.end);var A=t*.6,b=t*1.35;c=s.start.difference(s.end),f=+(c.x<0||c.x===0&&c.y<0),f&&(b*=-1),u=X(s.start.x+A,s.start.y+b).rotate(s.start,l),d=X(s.end.x-A,s.end.y+b).rotate(s.end,l),a=Le.createSegment("C",u,d,s.end),r.appendSegment(a)}}else{var v=e[o+1];i==0||!v||v.isJump?(a=Le.createSegment("L",s.end),r.appendSegment(a)):cg(i,r,s.end,s.start,v.end)}}),r}function cg(e,t,n,i,r){var a=n.distance(i)/2,s=n.distance(r)/2,o=-Math.min(e,a),l=-Math.min(e,s),c=n.clone().move(i,o).round(),u=n.clone().move(r,l).round(),d=new X(li*c.x+ci*n.x,ci*n.y+li*c.y),f=new X(li*u.x+ci*n.x,ci*n.y+li*u.y),h;h=Le.createSegment("L",c),t.appendSegment(h),h=Le.createSegment("C",d,f,u),t.appendSegment(h)}const ug=function(e,t,n,i){ag(this);var r=i.raw,a=i.size||tg,s=i.jump&&(""+i.jump).toLowerCase(),o=i.radius||ng,l=i.ignoreConnectors||ig;wa.indexOf(s)===-1&&(s=wa[0]);var c=this.paper,u=c.model,d=u.getLinks();if(d.length===1)return Da(Wi(e,t,n),a,s,o);var f=this.model,h=d.indexOf(f),m=c.options.defaultConnector||{},p=d.filter(function(L,z){var Z=L.get("connector")||m;return ve(l).includes(Z.name)?!1:z>h?Z.name!=="jumpover":!0}),A=p.map(function(L){return c.findViewByModel(L)}),b=Wi(e,t,n),v=A.map(function(L){return L==null?[]:L===this?b:Wi(L.sourcePoint,L.targetPoint,L.route)},this),w=b.reduce(function(L,z){var Z=p.reduce(function(Y,W,H){if(W!==f){const q=v[H].slice(),oe=q.findIndex(k=>rg(z,k));oe>-1&&z.containsPoint(q[oe].end)&&q.splice(oe+1,1);const M=og(z,q);Y.push.apply(Y,M)}return Y},[]).sort(function(Y,W){return ka(z.start,Y)-ka(z.start,W)});return Z.length>0?L.push.apply(L,lg(z,Z,a)):L.push(z),L},[]),S=Da(w,a,s,o);return r?S:S.serialize()},dg=function(e,t,n=[],i={}){const{raw:r}=i;return Pr(e,t,n,{cornerType:"point",raw:r})},gg=10,hg=0,fg=function(e,t,n=[],i={}){const{radius:r=gg,raw:a}=i;return Pr(e,t,n,{cornerType:"cubic",cornerRadius:r,precision:hg,raw:a})},mg=function(e,t,n,i){var r=i&&i.raw,a;if(n&&n.length!==0){var s=[e].concat(n).concat([t]),o=qa.throughPoints(s);a=new Le(o)}else{a=new Le;var l;if(l=Le.createSegment("M",e),a.appendSegment(l),Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)){var c=(e.x+t.x)/2;l=Le.createSegment("C",c,e.y,c,t.y,t.x,t.y),a.appendSegment(l)}else{var u=(e.y+t.y)/2;l=Le.createSegment("C",e.x,u,t.x,u,t.x,t.y),a.appendSegment(l)}}return r?a:a.serialize()},yt={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},st={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Br=function(e,t,n=[],i={},r){const a=!!i.raw,{direction:s=yt.AUTO,precision:o=3}=i,l={coeff:i.distanceCoefficient||.6,angleTangentCoefficient:i.angleTangentCoefficient||80,tau:i.tension||.5,sourceTangent:i.sourceTangent?new X(i.sourceTangent):null,targetTangent:i.targetTangent?new X(i.targetTangent):null,rotate:!!i.rotate};typeof i.sourceDirection=="string"?l.sourceDirection=i.sourceDirection:typeof i.sourceDirection=="number"?l.sourceDirection=new X(1,0).rotate(null,i.sourceDirection):l.sourceDirection=i.sourceDirection?new X(i.sourceDirection).normalize():null,typeof i.targetDirection=="string"?l.targetDirection=i.targetDirection:typeof i.targetDirection=="number"?l.targetDirection=new X(1,0).rotate(null,i.targetDirection):l.targetDirection=i.targetDirection?new X(i.targetDirection).normalize():null;const c=[e,...n,t].map(p=>new X(p));let u;if(l.sourceTangent)u=l.sourceTangent;else{const p=Cg(r,c,s,l),A=c[0].distance(c[1])*l.coeff,b=c[1].difference(c[0]).normalize(),v=vr(p,b);if(v>Math.PI/4){const w=A+(v-Math.PI/4)*l.angleTangentCoefficient;u=p.clone().scale(w,w)}else u=p.clone().scale(A,A)}let d;if(l.targetTangent)d=l.targetTangent;else{const p=bg(r,c,s,l),A=c.length-1,b=c[A-1].distance(c[A])*l.coeff,v=c[A-1].difference(c[A]).normalize(),w=vr(p,v);if(w>Math.PI/4){const S=b+(w-Math.PI/4)*l.angleTangentCoefficient;d=p.clone().scale(S,S)}else d=p.clone().scale(b,b)}const h=wg(c,u,d,l).map(p=>Mg(p,l)),m=new Le(h).round(o);return a?m:m.serialize()};Br.Directions=yt;Br.TangentDirections=st;function pg(e,t,n){const{sourceBBox:i}=e;let r,a;if(!e.sourceView)i.x>t[1].x?r="right":r="left";else if(a=e.sourceView.model.angle(),n.rotate&&a){const o=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),l=t[0].clone();l.rotate(i.center(),a),r=o.sideNearestToPoint(l)}else r=i.sideNearestToPoint(t[0]);let s;switch(r){case"left":s=new X(-1,0);break;case"right":default:s=new X(1,0);break}return n.rotate&&a&&s.rotate(null,-a),s}function Ig(e,t,n){const{targetBBox:i}=e;let r,a;if(!e.targetView)i.x>t[t.length-2].x?r="left":r="right";else if(a=e.targetView.model.angle(),n.rotate&&a){const o=e.targetView.getNodeUnrotatedBBox(e.targetView.el),l=t[t.length-1].clone();l.rotate(i.center(),a),r=o.sideNearestToPoint(l)}else r=i.sideNearestToPoint(t[t.length-1]);let s;switch(r){case"left":s=new X(-1,0);break;case"right":default:s=new X(1,0);break}return n.rotate&&a&&s.rotate(null,-a),s}function vg(e,t,n){const{sourceBBox:i}=e;let r,a;if(!e.sourceView)i.y>t[1].y?r="bottom":r="top";else if(a=e.sourceView.model.angle(),n.rotate&&a){const o=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),l=t[0].clone();l.rotate(i.center(),a),r=o.sideNearestToPoint(l)}else r=i.sideNearestToPoint(t[0]);let s;switch(r){case"top":s=new X(0,-1);break;case"bottom":default:s=new X(0,1);break}return n.rotate&&a&&s.rotate(null,-a),s}function Ag(e,t,n){const{targetBBox:i}=e;let r,a;if(!e.targetView)i.y>t[t.length-2].y?r="top":r="bottom";else if(a=e.targetView.model.angle(),n.rotate&&a){const o=e.targetView.getNodeUnrotatedBBox(e.targetView.el),l=t[t.length-1].clone();l.rotate(i.center(),a),r=o.sideNearestToPoint(l)}else r=i.sideNearestToPoint(t[t.length-1]);let s;switch(r){case"top":s=new X(0,-1);break;case"bottom":default:s=new X(0,1);break}return n.rotate&&a&&s.rotate(null,-a),s}function xa(e,t,n){const{sourceBBox:i}=e;let r,a;if(!e.sourceView)r=i.sideNearestToPoint(t[1]);else if(a=e.sourceView.model.angle(),n.rotate&&a){const o=e.sourceView.getNodeUnrotatedBBox(e.sourceView.el),l=t[0].clone();l.rotate(i.center(),a),r=o.sideNearestToPoint(l)}else r=i.sideNearestToPoint(t[0]);let s;switch(r){case"top":s=new X(0,-1);break;case"bottom":s=new X(0,1);break;case"right":s=new X(1,0);break;case"left":s=new X(-1,0);break}return n.rotate&&a&&s.rotate(null,-a),s}function Ta(e,t,n){const{targetBBox:i}=e;let r,a;if(!e.targetView)r=i.sideNearestToPoint(t[t.length-2]);else if(a=e.targetView.model.angle(),n.rotate&&a){const o=e.targetView.getNodeUnrotatedBBox(e.targetView.el),l=t[t.length-1].clone();l.rotate(i.center(),a),r=o.sideNearestToPoint(l)}else r=i.sideNearestToPoint(t[t.length-1]);let s;switch(r){case"top":s=new X(0,-1);break;case"bottom":s=new X(0,1);break;case"right":s=new X(1,0);break;case"left":s=new X(-1,0);break}return n.rotate&&a&&s.rotate(null,-a),s}function Sa(e,t,n){return t[1].difference(t[0]).normalize()}function za(e,t,n){const i=t.length-1;return t[i-1].difference(t[i]).normalize()}function La(e,t,n){const{sourceBBox:i}=e,r=i.center();return t[0].difference(r).normalize()}function Oa(e,t,n){const{targetBBox:i}=e,r=i.center();return t[t.length-1].difference(r).normalize()}function Cg(e,t,n,i){if(i.sourceDirection)switch(i.sourceDirection){case st.UP:return new X(0,-1);case st.DOWN:return new X(0,1);case st.LEFT:return new X(-1,0);case st.RIGHT:return new X(1,0);case st.AUTO:return xa(e,t,i);case st.CLOSEST_POINT:return Sa(e,t);case st.OUTWARDS:return La(e,t);default:return i.sourceDirection}switch(n){case yt.HORIZONTAL:return pg(e,t,i);case yt.VERTICAL:return vg(e,t,i);case yt.CLOSEST_POINT:return Sa(e,t);case yt.OUTWARDS:return La(e,t);case yt.AUTO:default:return xa(e,t,i)}}function bg(e,t,n,i){if(i.targetDirection)switch(i.targetDirection){case st.UP:return new X(0,-1);case st.DOWN:return new X(0,1);case st.LEFT:return new X(-1,0);case st.RIGHT:return new X(0,1);case st.AUTO:return Ta(e,t,i);case st.CLOSEST_POINT:return za(e,t);case st.OUTWARDS:return Oa(e,t);default:return i.targetDirection}switch(n){case yt.HORIZONTAL:return Ig(e,t,i);case yt.VERTICAL:return Ag(e,t,i);case yt.CLOSEST_POINT:return za(e,t);case yt.OUTWARDS:return Oa(e,t);case yt.AUTO:default:return Ta(e,t,i)}}function yg(e,t){const n=Math.cos(t),i=Math.sin(t),r=n*e.x-i*e.y,a=i*e.x+n*e.y;e.x=r,e.y=a}function vr(e,t){let n=e.dot(t)/(e.magnitude()*t.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function Pa(e,t){return e.x*t.y-e.y*t.x}function wg(e,t,n,i){const{tau:r,coeff:a}=i,s=[],o=[],l=[],c=e.length-1;for(let u=0;u<c;u++)s[u]=e[u].distance(e[u+1]);o[0]=t,o[c]=n;for(let u=1;u<c;u++){let d,f;u===1?d=e[u-1].clone().offset(o[u-1].x,o[u-1].y):d=e[u-1].clone(),u===c-1?f=e[u+1].clone().offset(o[u+1].x,o[u+1].y):f=e[u+1].clone();const h=d.difference(e[u]).normalize(),m=f.difference(e[u]).normalize(),p=vr(h,m);let A=(Math.PI-p)/2,b;const v=Pa(h,m);let w;w=Pa(e[u].difference(e[u+1]),e[u].difference(e[u-1])),v<0&&(A=-A),p<Math.PI/2&&(A<0&&w<0||A>0&&w>0)&&(A=A-Math.PI),b=m.clone(),yg(b,A);const S=b.clone(),L=b.clone(),z=s[u-1]*a,Z=s[u]*a;S.scale(z,z),L.scale(Z,Z),o[u]=[S,L]}for(let u=0;u<c;u++){let d,f;u===0?d=e[u+1].difference(o[u].x/r,o[u].y/r):d=e[u+1].difference(o[u][1].x/r,o[u][1].y/r),u===c-1?f=e[u].clone().offset(o[u+1].x/r,o[u+1].y/r):f=e[u].difference(o[u+1][0].x/r,o[u+1][0].y/r),l[u]=[d,e[u],e[u+1],f]}return l}function Mg(e,t){const{tau:n}=t,i=new X;i.x=e[1].x+(e[2].x-e[0].x)/(6*n),i.y=e[1].y+(e[2].y-e[0].y)/(6*n);const r=new X;return r.x=e[2].x+(e[3].x-e[1].x)/(6*n),r.y=e[2].y+(e[3].y-e[1].y)/(6*n),new qa(e[1],i,r,e[2])}const Ng=Object.freeze(Object.defineProperty({__proto__:null,curve:Br,jumpover:ug,normal:dg,rounded:fg,smooth:mg,straight:Pr},Symbol.toStringTag,{value:"Module"})),ue={TOOLS:me.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LEGACY_TOOLS:"LEGACY_TOOLS",LABELS:"LABELS",VERTICES:"VERTICES",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Un=me.extend({className:function(){var e=me.prototype.className.apply(this).split(" ");return e.push("link"),e.join(" ")},options:{shortLinkLength:105,doubleLinkTools:!1,longLinkLength:155,linkToolsOffset:40,doubleLinkToolsOffset:65,sampleInterval:50},_labelCache:null,_labelSelectors:null,_markerCache:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){me.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._markerCache={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[ue.RENDER],attrs:[ue.UPDATE],router:[ue.UPDATE],connector:[ue.CONNECTOR],smooth:[ue.UPDATE],manhattan:[ue.UPDATE],toolMarkup:[ue.LEGACY_TOOLS],labels:[ue.LABELS],labelMarkup:[ue.LABELS],vertices:[ue.VERTICES,ue.UPDATE],vertexMarkup:[ue.VERTICES],source:[ue.SOURCE,ue.UPDATE],target:[ue.TARGET,ue.UPDATE]},initFlag:[ue.RENDER,ue.SOURCE,ue.TARGET,ue.TOOLS],UPDATE_PRIORITY:1,confirmUpdate:function(e,t){if(t||(t={}),this.hasFlag(e,ue.SOURCE)){if(!this.updateEndProperties("source"))return e;e=this.removeFlag(e,ue.SOURCE)}if(this.hasFlag(e,ue.TARGET)){if(!this.updateEndProperties("target"))return e;e=this.removeFlag(e,ue.TARGET)}const{paper:n,sourceView:i,targetView:r}=this;if(n&&(i&&!n.isViewMounted(i)||r&&!n.isViewMounted(r)))return e;if(this.hasFlag(e,ue.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(t),e=this.removeFlag(e,[ue.RENDER,ue.UPDATE,ue.VERTICES,ue.LABELS,ue.TOOLS,ue.LEGACY_TOOLS,ue.CONNECTOR]),e;let a=!1;this.hasFlag(e,ue.VERTICES)&&(this.renderVertexMarkers(),e=this.removeFlag(e,ue.VERTICES));const{model:s}=this,{attributes:o}=s;let l=this.hasFlag(e,ue.LABELS),c=this.hasFlag(e,ue.LEGACY_TOOLS);l&&(this.onLabelsChange(s,o.labels,t),e=this.removeFlag(e,ue.LABELS),a=!0),c&&(this.renderTools(),e=this.removeFlag(e,ue.LEGACY_TOOLS));const u=this.hasFlag(e,ue.UPDATE),d=this.hasFlag(e,ue.CONNECTOR);return(u||d)&&(u?t.translateBy&&s.isRelationshipEmbeddedIn(t.translateBy)?this.translate(t.tx,t.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(t),e=this.removeFlag(e,[ue.UPDATE,ue.TOOLS,ue.CONNECTOR]),l=!1,c=!1,a=!0),l&&this.updateLabelPositions(),c&&this.updateToolsPosition(),a&&this.updateHighlighters(),this.hasFlag(e,ue.TOOLS)&&(this.updateTools(t),e=this.removeFlag(e,ue.TOOLS)),e},requestConnectionUpdate:function(e){this.requestUpdate(this.getFlag(ue.UPDATE),e)},isLabelsRenderRequired:function(e={}){const t=this.model.previous("labels");if(!t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){var n=e.propertyPathArray||[],i=n.length;if(i>1){var r=!!t[n[1]];if(r){if(i===2)return"markup"in Object(e.propertyValue);if(n[2]!=="markup")return!1}}}return!0},onLabelsChange:function(e,t,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var e=this.model,t=e.get("markup")||e.markup;if(!t)throw new Error("dia.LinkView: markup required");if(Array.isArray(t))return this.renderJSONMarkup(t);if(typeof t=="string")return this.renderStringMarkup(t);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(e){var t=this.parseDOMJSON(e,this.el);this.selectors=t.selectors,this.vel.append(t.fragment)},renderStringMarkup:function(e){var t=R(e);Array.isArray(t)||(t=[t]);for(var n=this._V,i=0,r=t.length;i<r;i++){var a=t[i],s=a.attr("class");s&&(s=po(s),n[Ee.camelCase(s)]=a)}this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(t)},_getLabelMarkup:function(e){if(e){if(Array.isArray(e))return this.parseDOMJSON(e,null);if(typeof e=="string")return this._getLabelStringMarkup(e);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(e){var t=R(e),n=document.createDocumentFragment();if(!Array.isArray(t))n.appendChild(t.node);else for(var i=0,r=t.length;i<r;i++){var a=t[i].node;n.appendChild(a)}return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(e){if(e){var t=e.fragment;if(!(e.fragment instanceof DocumentFragment)||!e.fragment.hasChildNodes())throw new Error("dia.LinkView: invalid label markup.");var n,i=t.childNodes;return i.length>1||i[0].nodeName.toUpperCase()!=="G"?n=R("g").append(t):n=R(i[0]),n.addClass("label"),{node:n.node,selectors:e.selectors}}},renderLabels:function(){var e=this._V,t=e.labels,n=this._labelCache={},i=this._labelSelectors={},r=this.model,a=r.attributes.labels||[],s=a.length;if(s===0)return t&&t.remove(),this;t?t.empty():(t=e.labels=R("g").addClass("labels"),this.options.labelsLayer&&(t.addClass(Et(ft(this,"className"))),t.attr("model-id",r.id)));for(var o=0;o<s;o++){var l=a[o],c=this._normalizeLabelMarkup(this._getLabelMarkup(l.markup)),u,d;if(c)u=c.node,d=c.selectors;else{var f=r._builtins.defaultLabel,h=this._normalizeLabelMarkup(this._getLabelMarkup(f.markup)),m=r._getDefaultLabel(),p=this._normalizeLabelMarkup(this._getLabelMarkup(m.markup)),A=p||h;u=A.node,d=A.selectors}u.setAttribute("label-idx",o),t.append(u),n[o]=u;var b=this.selector;if(d[b])throw new Error("dia.LinkView: ambiguous label root selector.");d[b]=u,i[o]=d}return t.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:e,paper:t,model:n,_V:i,options:r}=this,{labels:a}=i;if(!a||!n.hasLabels())return;const{node:s}=a;r.labelsLayer?t.getLayerView(r.labelsLayer).insertSortedNode(s,n.get("z")):s.parentNode!==e&&e.appendChild(s)},unmountLabels:function(){const{options:e,_V:t}=this;if(!t)return;const{labels:n}=t;n&&e.labelsLayer&&n.remove()},findLabelNode:function(e,t){const n=this._labelCache[e];if(!n)return null;const i=this._labelSelectors[e],[r=null]=this.findBySelector(t,n,i);return r},_mergeLabelAttrs:function(e,t,n,i){return t===null?null:t===void 0?n===null?null:n===void 0?e?void 0:i:e?n:Fe({},i,n):e?Fe({},n,t):Fe({},i,n,t)},_mergeLabelSize:function(e,t){return e===null?null:e===void 0?t===null?null:t===void 0?void 0:t:Fe({},t,e)},updateLabels:function(){if(!this._V.labels)return this;for(var e=this.model,t=e.get("labels")||[],n=this.can("labelMove"),i=e._builtins.defaultLabel,r=i.attrs,a=e._getDefaultLabel(),s=a.markup,o=a.attrs,l=a.size,c=0,u=t.length;c<u;c++){var d=this._labelCache[c];d.setAttribute("cursor",n?"move":"default");var f=this._labelSelectors[c],h=t[c],m=h.markup,p=h.attrs,A=h.size,b=this._mergeLabelAttrs(m||s,p,o,r),v=this._mergeLabelSize(A,l);this.updateDOMSubtreeAttributes(d,b,{rootBBox:new he(v),selectors:f})}return this},renderTools:function(){if(!this._V.linkTools)return this;var e=Ee(this._V.linkTools.node).empty(),t=ti(this.model.get("toolMarkup")||this.model.toolMarkup),n=R(t());if(e.append(n.node),this._toolCache=n,this.options.doubleLinkTools){var i;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(t=ti(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),i=R(t())):i=n.clone(),e.append(i.node),this._tool2Cache=i}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var e=Ee(this._V.markerVertices.node).empty(),t=ti(this.model.get("vertexMarkup")||this.model.vertexMarkup);return this.model.vertices().forEach(function(n,i){e.append(R(t(ce({idx:i},n))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var e=Ee(this._V.markerArrowheads.node);e.empty();var t=ti(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=R(t({end:"source"})),this._V.targetArrowhead=R(t({end:"target"})),e.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},removeRedundantLinearVertices:function(e){const n=this.model,i=n.vertices(),r=[this.sourceAnchor,...i,this.targetAnchor],a=r.length,s=new Vn(r);s.simplify({threshold:.001});const o=s.points.map(c=>c.toJSON()),l=o.length;return a===l?0:(n.vertices(o.slice(1,l-1),e),a-l)},updateDefaultConnectionPath:function(){var e=this._V;e.connection&&e.connection.attr("d",this.getSerializedConnection()),e.connectionWrap&&e.connectionWrap.attr("d",this.getSerializedConnection()),e.markerSource&&e.markerTarget&&this._translateAndAutoOrientArrows(e.markerSource,e.markerTarget)},getEndView:function(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(e){switch(e){case"source":return new X(this.sourceAnchor);case"target":return new X(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(e){switch(e){case"source":return new X(this.sourcePoint);case"target":return new X(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(e){switch(e){case"source":var t=this.sourceView;if(!t)break;return this.sourceMagnet||t.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(e=0,t=0){const{route:n,path:i}=this;if(!n||!i)return;const r=new Vn(n);r.translate(e,t),this.route=r.points,this._translateConnectionPoints(e,t),i.translate(e,t),this.updateDOM()},updateDOM(){const{el:e,model:t,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(e,t.attr(),{selectors:n}),this.updateDefaultConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null},updateRoute:function(){const{model:e}=this,t=e.vertices(),n=this.findAnchors(t),i=this.sourceAnchor=n.source,r=this.targetAnchor=n.target,a=this.findRoute(t);this.route=a;var s=this.findConnectionPoints(a,i,r);this.sourcePoint=s.source,this.targetPoint=s.target},updatePath:function(){const{route:e,sourcePoint:t,targetPoint:n}=this,i=this.findMarkerPoints(e,t,n),r=this.findPath(e,i.source||t,i.target||n);this.path=r},findMarkerPoints:function(e,t,n){var i=e[0],r=e[e.length-1],a=this._markerCache,s,o;return this._V.markerSource&&(a.sourceBBox=a.sourceBBox||this._V.markerSource.getBBox(),s=X(t).move(i||n,a.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(a.targetBBox=a.targetBBox||this._V.markerTarget.getBBox(),o=X(n).move(r||t,a.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),a.sourcePoint=s||t.clone(),a.targetPoint=o||n.clone(),{source:s,target:o}},findAnchorsOrdered:function(e,t,n,i){var r,a,s,o,l=this.model,c=l.get(e),u=l.get(n),d=this.getEndView(e),f=this.getEndView(n),h=this.getEndMagnet(e),m=this.getEndMagnet(n);d?(t?s=new X(t):f?s=m:s=new X(u),r=this.getAnchor(c.anchor,d,h,s,e)):r=new X(c),f?(o=new X(i||r),a=this.getAnchor(u.anchor,f,m,o,n)):a=new X(u);var p={};return p[e]=r,p[n]=a,p},findAnchors:function(e){var t=this.model,n=e[0],i=e[e.length-1];return t.target().priority&&!t.source().priority?this.findAnchorsOrdered("target",i,"source",n):this.findAnchorsOrdered("source",n,"target",i)},findConnectionPoints:function(e,t,n){var i=e[0],r=e[e.length-1],a=this.model,s=a.get("source"),o=a.get("target"),l=this.sourceView,c=this.targetView,u=this.paper.options,d,f,h;if(l&&!l.isNodeConnection(this.sourceMagnet)){d=this.sourceMagnet||l.el;var m=s.connectionPoint||u.defaultConnectionPoint,p=i||n,A=new wt(p,t);h=this.getConnectionPoint(m,l,d,A,"source")}else h=t;var b;if(c&&!c.isNodeConnection(this.targetMagnet)){f=this.targetMagnet||c.el;var v=o.connectionPoint||u.defaultConnectionPoint,w=r||t,S=new wt(w,n);b=this.getConnectionPoint(v,c,f,S,"target")}else b=n;return{source:h,target:b}},getAnchor:function(e,t,n,i,r){var a=t.isNodeConnection(n),s=this.paper.options;if(e||(a?e=s.defaultLinkAnchor:s.perpendicularLinks||this.options.perpendicular?e={name:"perpendicular"}:e=s.defaultAnchor),!e)throw new Error("Anchor required.");var o;if(typeof e=="function")o=e;else{var l=e.name,c=a?"linkAnchorNamespace":"anchorNamespace";if(o=s[c][l],typeof o!="function")throw new Error("Unknown anchor: "+l)}var u=o.call(this,t,n,i,e.args||{},r,this);return u?u.round(this.decimalsRounding):new X},getConnectionPoint:function(e,t,n,i,r){var a,s=i.end,o=this.paper.options;if(typeof o.linkConnectionPoint=="function"){var l=n===t.el?void 0:n;if(a=o.linkConnectionPoint(this,t,l,i.start,r),a)return a}if(!e)return s;var c;if(typeof e=="function")c=e;else{var u=e.name;if(c=o.connectionPointNamespace[u],typeof c!="function")throw new Error("Unknown connection point: "+u)}return a=c.call(this,i,t,n,e.args||{},r,this),a?a.round(this.decimalsRounding):s},_translateConnectionPoints:function(e,t){var n=this._markerCache;n.sourcePoint.offset(e,t),n.targetPoint.offset(e,t),this.sourcePoint.offset(e,t),this.targetPoint.offset(e,t),this.sourceAnchor.offset(e,t),this.targetAnchor.offset(e,t)},_getDefaultLabelPositionProperty:function(){var e=this.model,t=e._builtins.defaultLabel,n=t.position,i=e._getDefaultLabel(),r=this._normalizeLabelPosition(i.position);return Fe({},n,r)},_normalizeLabelPosition:function(e){return typeof e=="number"?{distance:e,offset:null,angle:0,args:null}:e},_mergeLabelPositionProperty:function(e,t){return e===null?null:e===void 0?t===null?null:t:Fe({},t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var e=this.path;if(!e)return this;var t=this.model,n=t.get("labels")||[];if(!n.length)return this;for(var i=this._getDefaultLabelPositionProperty(),r=0,a=n.length;r<a;r++){var s=this._labelCache[r];if(s){var o=n[r],l=this._normalizeLabelPosition(o.position),c=this._mergeLabelPositionProperty(l,i),u=this._getLabelTransformationMatrix(c);s.setAttribute("transform",R.matrixToTransformString(u)),this._cleanLabelMatrices(r)}}return this},_cleanLabelMatrices:function(e){const{metrics:t,_labelSelectors:n}=this,i=n[e];if(i)for(let r in i){const{id:a}=i[r];a&&a in t&&delete t[a].magnetMatrix}},updateToolsPosition:function(){if(!this._V.linkTools)return this;var e="",t=this.options.linkToolsOffset,n=this.getConnectionLength();if(!Number.isNaN(n)){n<this.options.shortLinkLength&&(e="scale(.5)",t/=2);var i=this.getPointAtLength(t);if(this._toolCache.attr("transform","translate("+i.x+", "+i.y+") "+e),this.options.doubleLinkTools&&n>=this.options.longLinkLength){var r=this.options.doubleLinkToolsOffset||t;i=this.getPointAtLength(n-r),this._tool2Cache.attr("transform","translate("+i.x+", "+i.y+") "+e),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if(Ee.css(this._V.markerArrowheads.node,"display")==="none")return this;var e=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(e),this._V.targetArrowhead.scale(e),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},updateEndProperties:function(e){const{model:t,paper:n}=this,i=`${e}View`,r=t.get(e),a=r&&r.id;if(!a)return this[i]=null,this.updateEndMagnet(e),!0;const s=n.getModelById(a);if(!s)throw new Error("LinkView: invalid "+e+" cell.");const o=s.findView(n);return o?(this[i]=o,this.updateEndMagnet(e),!0):!1},updateEndMagnet:function(e){const t=`${e}Magnet`,n=this.getEndView(e);if(n){let i=n.getMagnetFromLinkEnd(this.model.get(e));i===n.el&&(i=null),this[t]=i}else this[t]=null},_translateAndAutoOrientArrows:function(e,t){var n=ve(this.route);e&&e.translateAndAutoOrient(this.sourcePoint,n[0]||this.targetPoint,this.paper.cells),t&&t.translateAndAutoOrient(this.targetPoint,n[n.length-1]||this.sourcePoint,this.paper.cells)},_getLabelPositionProperty:function(e){return this.model.label(e).position||{}},_getLabelPositionAngle:function(e){var t=this._getLabelPositionProperty(e);return t.angle||0},_getLabelPositionArgs:function(e){var t=this._getLabelPositionProperty(e);return t.args},_getDefaultLabelPositionArgs:function(){var e=this.model._getDefaultLabel(),t=e.position||{};return t.args},_mergeLabelPositionArgs:function(e,t){return e===null?null:e===void 0?t===null?null:t:Fe({},t,e)},addLabel:function(e,t,n,i){var r,a,s=0,o;typeof e!="number"?(r=e.x,a=e.y,typeof t=="number"?(s=t,o=n):o=t):(r=e,a=t,typeof n=="number"?(s=n,o=i):o=n);var l=this._getDefaultLabelPositionArgs(),c=o,u=this._mergeLabelPositionArgs(c,l),d={position:this.getLabelPosition(r,a,s,u)},f=-1;return this.model.insertLabel(f,d,o),f},addVertex:function(e,t,n){var i=typeof e!="number",r=i?e.x:e,a=i?e.y:t,s=i?t:n,o={x:r,y:a},l=this.getVertexIndex(r,a);return this.model.insertVertex(l,o,s),l},sendToken:function(e,t,n){function i(d,f){return function(){d.remove(),typeof f=="function"&&f()}}var r,a,s;je(t)?(r=t.duration,a=t.direction==="reverse",s=t.connection):(r=t,a=!1,s=null),r=r||1e3;var o={dur:r+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};a&&(o.keyPoints="1;0",o.keyTimes="0;1");var l=R(e),c;if(typeof s=="string")c=this.findBySelector(s,this.el,this.selectors)[0];else{var u=this._V;c=u.connection?u.connection.node:this.el.querySelector("path")}if(!(c instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");l.appendTo(this.paper.cells).animateAlongPath(o,c),setTimeout(i(l,n),r)},findRoute:function(e){e||(e=[]);var t=this.paper.options.routerNamespace||$d,n=this.model.router(),i=this.paper.options.defaultRouter;if(!n)if(i)n=i;else return e.map(X);var r=ze(n)?n:t[n.name];if(!ze(r))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');var a=n.args||{},s=r.call(this,e,a,this);return s||e.map(X)},findPath:function(e,t,n){var i=this.paper.options.connectorNamespace||Ng,r=this.model.connector(),a=this.paper.options.defaultConnector;r||(r=a||{});var s=ze(r)?r:i[r.name];if(!ze(s))throw new Error('dia.LinkView: unknown connector: "'+r.name+'".');var o=xt(r.args||{});o.raw=!0;var l=s.call(this,t,n,e,o,this);return typeof l=="string"&&(l=new Le(R.normalizePathData(l))),l},getConnection:function(){var e=this.path;return e?e.clone():null},getSerializedConnection:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("data"))return t.data;var n=e.serialize();return t.data=n,n},getConnectionSubdivisions:function(){var e=this.path;if(!e)return null;var t=this.metrics;if(t.hasOwnProperty("segmentSubdivisions"))return t.segmentSubdivisions;var n=e.getSegmentSubdivisions();return t.segmentSubdivisions=n,n},getConnectionLength:function(){var e=this.path;if(!e)return 0;var t=this.metrics;if(t.hasOwnProperty("length"))return t.length;var n=e.length({segmentSubdivisions:this.getConnectionSubdivisions()});return t.length=n,n},getPointAtLength:function(e){var t=this.path;return t?t.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(e){var t=this.path;return t?(ut(e)&&(e=parseFloat(e)/100),t.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(e){var t=this.path;return t?t.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(e){var t=this.path;return t?t.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(e){var t=this.path;return t?t.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(e){var t=this.path;return t?t.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(e){var t=this.path;return t?t.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(e,t,n,i){var r={},a=0,s;typeof n=="number"?(a=n,s=i):s=n,s&&(r.args=s);var o=!(s&&s.absoluteDistance),l=s&&s.absoluteDistance&&s.reverseDistance,c=s&&s.absoluteOffset,u=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},f=new X(e,t),h=u.closestPointT(f,d),m=u.lengthAtT(h,d);o&&(m=m/this.getConnectionLength()||0),l&&(m=-1*(this.getConnectionLength()-m)||1),r.distance=m;var p;c||(p=u.tangentAtT(h));var A;if(p)A=p.pointOffset(f);else{var b=u.pointAtT(h),v=f.difference(b);A={x:v.x,y:v.y}}return r.offset=A,r.angle=a,r},_getLabelTransformationMatrix:function(e){var t,n=0,i={};if(typeof e=="number")t=e;else if(typeof e.distance=="number")i=e.args||{},t=e.distance,n=e.angle||0;else throw new Error("dia.LinkView: invalid label position distance.");var r=t>0&&t<=1,a=0,s={x:0,y:0};if(e.offset){var o=e.offset;typeof o=="number"&&(a=o),o.x&&(s.x=o.x),o.y&&(s.y=o.y)}var l=s.x!==0||s.y!==0||a===0,c=i.keepGradient,u=i.ensureLegibility,d=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},h=r?t*this.getConnectionLength():t,m=d.tangentAtLength(h,f),p,A=n;if(m){if(l)p=m.start.clone(),p.offset(s);else{var b=m.clone();b.rotate(m.start,-90),b.setLength(a),p=b.end}c&&(A=m.angle()+n,u&&(A=Dn((A+90)%180-90)))}else p=d.start.clone(),l&&p.offset(s);return R.createSVGMatrix().translate(p.x,p.y).rotate(A)},getLabelCoordinates:function(e){var t=this._getLabelTransformationMatrix(e);return new X(t.e,t.f)},getVertexIndex:function(e,t){for(var n=this.model,i=n.vertices(),r=this.getClosestPointLength(new X(e,t)),a=0,s=i.length;a<s;a++){var o=i[a],l=this.getClosestPointLength(o);if(r<l)break}return a},notifyPointerdown(e,t,n){me.prototype.pointerdown.call(this,e,t,n),this.notify("link:pointerdown",e,t,n)},notifyPointermove(e,t,n){me.prototype.pointermove.call(this,e,t,n),this.notify("link:pointermove",e,t,n)},notifyPointerup(e,t,n){this.notify("link:pointerup",e,t,n),me.prototype.pointerup.call(this,e,t,n)},pointerdblclick:function(e,t,n){me.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",e,t,n)},pointerclick:function(e,t,n){me.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",e,t,n)},contextmenu:function(e,t,n){me.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",e,t,n)},pointerdown:function(e,t,n){this.notifyPointerdown(e,t,n);var i=e.target.getAttribute("class");switch(i){case"marker-vertex":this.dragVertexStart(e,t,n);return;case"marker-vertex-remove":case"marker-vertex-remove-area":this.dragVertexRemoveStart(e,t,n);return;case"marker-arrowhead":this.dragArrowheadStart(e,t,n);return;case"connection":case"connection-wrap":this.dragConnectionStart(e,t,n);return;case"marker-source":case"marker-target":return}this.dragStart(e,t,n)},pointermove:function(e,t,n){var i=this._dragData;i&&this.eventData(e,i);var r=this.eventData(e);switch(r.action){case"vertex-move":this.dragVertex(e,t,n);break;case"label-move":this.dragLabel(e,t,n);break;case"arrowhead-move":this.dragArrowhead(e,t,n);break;case"move":this.drag(e,t,n);break}i&&ce(i,this.eventData(e)),this.notifyPointermove(e,t,n)},pointerup:function(e,t,n){var i=this._dragData;i&&(this.eventData(e,i),this._dragData=null);var r=this.eventData(e);switch(r.action){case"vertex-move":this.dragVertexEnd(e,t,n);break;case"label-move":this.dragLabelEnd(e,t,n);break;case"arrowhead-move":this.dragArrowheadEnd(e,t,n);break;case"move":this.dragEnd(e,t,n)}this.notifyPointerup(e,t,n),this.checkMouseleave(e)},mouseover:function(e){me.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",e)},mouseout:function(e){me.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",e)},mouseenter:function(e){me.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",e)},mouseleave:function(e){me.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",e)},mousewheel:function(e,t,n,i){me.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",e,t,n,i)},onevent:function(e,t,n,i){var r=R(e.target).findParentByClass("link-tool",this.el);if(r){if(e.stopPropagation(),this.can("useLinkTools"))if(t==="remove"){this.model.remove({ui:!0});return}else this.notify(t,e,n,i);this.notifyPointerdown(e,n,i),this.paper.delegateDragEvents(this,e.data)}else me.prototype.onevent.apply(this,arguments)},onlabel:function(e,t,n){this.notifyPointerdown(e,t,n),this.dragLabelStart(e,t,n);var i=this.eventData(e).stopPropagation;i&&e.stopPropagation()},dragConnectionStart:function(e,t,n){if(this.can("vertexAdd")){var i=this.addVertex({x:t,y:n},{ui:!0});this.eventData(e,{action:"vertex-move",vertexIdx:i})}},dragLabelStart:function(e,t,n){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(e))return;var i=e.currentTarget,r=parseInt(i.getAttribute("label-idx"),10),a=this._getDefaultLabelPositionProperty(),s=this._normalizeLabelPosition(this._getLabelPositionProperty(r)),o=this._mergeLabelPositionProperty(s,a),l=this.getLabelCoordinates(o),c=l.x-t,u=l.y-n,d=this._getLabelPositionAngle(r),f=this._getLabelPositionArgs(r),h=this._getDefaultLabelPositionArgs(),m=this._mergeLabelPositionArgs(f,h);this.eventData(e,{action:"label-move",labelIdx:r,dx:c,dy:u,positionAngle:d,positionArgs:m,stopPropagation:!0})}else this.eventData(e,{stopPropagation:!0});this.paper.delegateDragEvents(this,e.data)},dragVertexStart:function(e,t,n){if(this.can("vertexMove")){var i=e.target,r=parseInt(i.getAttribute("idx"),10);this.eventData(e,{action:"vertex-move",vertexIdx:r})}},dragVertexRemoveStart:function(e,t,n){if(this.can("vertexRemove")){var i=e.target,r=parseInt(i.getAttribute("idx"),10);this.model.removeVertex(r)}},dragArrowheadStart:function(e,t,n){if(this.can("arrowheadMove")){var i=e.target,r=i.getAttribute("end"),a=this.startArrowheadMove(r,{ignoreBackwardsCompatibility:!0});this.eventData(e,a)}},dragStart:function(e,t,n){this.isDefaultInteractionPrevented(e)||this.can("linkMove")&&this.eventData(e,{action:"move",dx:t,dy:n})},dragLabel:function(e,t,n){var i=this.eventData(e),r={position:this.getLabelPosition(t+i.dx,n+i.dy,i.positionAngle,i.positionArgs)};this.paper.options.snapLabels&&delete r.position.offset;const a={ui:!0};this.paper.isAsync()&&e.type==="touchmove"&&(a.async=!1),this.model.label(i.labelIdx,r,a)},dragVertex:function(e,t,n){var i=this.eventData(e);this.model.vertex(i.vertexIdx,{x:t,y:n},{ui:!0})},dragArrowhead:function(e,t,n){this.paper.options.snapLinks?!this._snapArrowhead(e,t,n)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(e,t,n):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(e,t,n):this._connectArrowhead(this.getEventTarget(e),t,n,this.eventData(e))},drag:function(e,t,n){var i=this.eventData(e);this.model.translate(t-i.dx,n-i.dy,{ui:!0}),this.eventData(e,{dx:t,dy:n})},dragLabelEnd:function(){},dragVertexEnd:function(){},dragArrowheadEnd:function(e,t,n){var i=this.eventData(e),r=this.paper;r.options.snapLinks?this._snapArrowheadEnd(i):this._connectArrowheadEnd(i,t,n),r.linkAllowed(this)?(this._finishEmbedding(i),this._notifyConnectEvent(i,e)):this._disallow(i),this._afterArrowheadMove(i)},dragEnd:function(){},_disallow:function(e){switch(e.whenNotAllowed){case"remove":this.model.remove({ui:!0});break;case"revert":default:this.model.set(e.arrowhead,e.initialEnd,{ui:!0});break}},_finishEmbedding:function(e){this.paper.options.embeddingMode&&this.model.reparent()&&(e.z=null)},_notifyConnectEvent:function(e,t){var n=e.arrowhead,i=e.initialEnd,r=this.model.prop(n),a=r&&!Ke.endsEqual(i,r);if(a){var s=this.paper;i.id&&this.notify("link:disconnect",t,s.findViewByModel(i.id),e.initialMagnet,n),r.id&&this.notify("link:connect",t,s.findViewByModel(r.id),e.magnetUnderPointer,n)}},_snapToPoints:function(e,t,n){let i=null,r=1/0,a=null,s=1/0,o=e.x,l=e.y;for(let c=0;c<t.length;c++){const u=Math.abs(t[c].x-e.x);u<r&&(r=u,i=t[c]);const d=Math.abs(t[c].y-e.y);d<s&&(s=d,a=t[c])}return r<n&&(o=i.x),s<n&&(l=a.y),{x:o,y:l}},_snapArrowheadSelf:function(e,t,n){const{paper:i,model:r}=this,{snapLinksSelf:a}=i.options,s=this.eventData(e),o=a.radius||20,l=this.getEndAnchor(s.arrowhead==="source"?"target":"source"),c=r.vertices(),u=[l,...c],d=this._snapToPoints({x:t,y:n},u,o),f=i.localToClientPoint(d);this._connectArrowhead(document.elementFromPoint(f.x,f.y),d.x,d.y,this.eventData(e))},_snapArrowhead:function(e,t,n){const{paper:i}=this,{snapLinks:r,connectionStrategy:a}=i.options,s=this.eventData(e);let o=!1;var l=r.radius||50,c=i.findViewsInArea({x:t-l,y:n-l,width:2*l,height:2*l}),u=s.closestView||null,d=s.closestMagnet||null,f=s.magnetProxy||null;s.closestView=s.closestMagnet=s.magnetProxy=null;var h=Number.MAX_VALUE,m=new X(t,n);c.forEach(function(L){const z=[];L.el.getAttribute("magnet")!=="false"&&z.push({bbox:L.model.getBBox(),magnet:L.el}),L.$("[magnet]").toArray().forEach(Z=>{z.push({bbox:L.getNodeBBox(Z),magnet:Z})}),z.forEach(Z=>{const{magnet:Y,bbox:W}=Z,H=W.center().squaredDistance(m);H<h&&(d===Y||i.options.validateConnection.apply(i,s.validateConnectionArgs(L,L.el===Y?null:Y)))&&(h=H,s.closestView=L,s.closestMagnet=Y)})},this);var p,A=null,b=s.closestView,v=s.closestMagnet;v&&(A=s.magnetProxy=b.findProxyNode(v,"highlighter"));var w=s.arrowhead,S=d!==v;if(u&&S&&u.unhighlight(f,{connecting:!0,snapping:!0}),b){const{prevEnd:L,prevX:z,prevY:Z}=s;if(s.prevX=t,s.prevY=n,o=!0,!S&&(typeof a!="function"||z===t&&Z===n)||(p=b.getLinkEnd(v,t,n,this.model,w),!S&&wn(L,p)))return o;s.prevEnd=p,S&&b.highlight(A,{connecting:!0,snapping:!0})}else p={x:t,y:n};return this.model.set(w,p||{x:t,y:n},{ui:!0}),u&&this.notify("link:snap:disconnect",e,u,d,w),b&&this.notify("link:snap:connect",e,b,v,w),o},_snapArrowheadEnd:function(e){var t=e.closestView,n=e.closestMagnet;t&&n&&(t.unhighlight(e.magnetProxy,{connecting:!0,snapping:!0}),e.magnetUnderPointer=t.findMagnet(n)),e.closestView=e.closestMagnet=null},_connectArrowhead:function(e,t,n,i){const{paper:r,model:a}=this;if(i.eventTarget!==e){i.magnetProxy&&i.viewUnderPointer.unhighlight(i.magnetProxy,{connecting:!0});const s=i.viewUnderPointer=r.findView(e);if(s){const o=i.magnetUnderPointer=s.findMagnet(e),l=i.magnetProxy=s.findProxyNode(o,"highlighter");o&&this.paper.options.validateConnection.apply(r,i.validateConnectionArgs(s,o))?l&&s.highlight(l,{connecting:!0}):(i.magnetUnderPointer=null,i.magnetProxy=null)}else i.magnetUnderPointer=null,i.magnetProxy=null}i.eventTarget=e,a.set(i.arrowhead,{x:t,y:n},{ui:!0})},_connectArrowheadEnd:function(e={},t,n){const{model:i}=this,{viewUnderPointer:r,magnetUnderPointer:a,magnetProxy:s,arrowhead:o}=e;if(!a||!s||!r)return;r.unhighlight(s,{connecting:!0});const l=r.getLinkEnd(a,t,n,i,o);i.set(o,l,{ui:!0})},_beforeArrowheadMove:function(e){e.z=this.model.get("z"),this.model.toFront();var t=this.el.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(e)},_afterArrowheadMove:function(e){e.z!==null&&(this.model.set("z",e.z,{ui:!0}),e.z=null),this.el.style.pointerEvents=e.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(e)},_createValidateConnectionArgs:function(e){var t=[];t[4]=e,t[5]=this;var n,i=0,r=0;e==="source"?(i=2,n="target"):(r=2,n="source");var a=this.model.get(n);if(a.id){var s=t[i]=this.paper.findViewByModel(a.id),o=s.getMagnetFromLinkEnd(a);o===s.el&&(o=void 0),t[i+1]=o}function l(c,u){return t[r]=c,t[r+1]=c.el===u?void 0:u,t}return l},_markAvailableMagnets:function(e){function t(d,f){var h=d.paper,m=h.options.validateConnection;return m.apply(h,this.validateConnectionArgs(d,f))}var n=this.paper,i=n.model.getCells();e.marked={};for(var r=0,a=i.length;r<a;r++){var s=i[r].findView(n);if(s){var o=Array.prototype.slice.call(s.el.querySelectorAll("[magnet]"));s.el.getAttribute("magnet")!=="false"&&o.push(s.el);var l=o.filter(t.bind(e,s));if(l.length>0){for(var c=0,u=l.length;c<u;c++)s.highlight(l[c],{magnetAvailability:!0});s.highlight(null,{elementAvailability:!0}),e.marked[s.model.id]=l}}}},_unmarkAvailableMagnets:function(e){for(var t=Object.keys(e.marked),n,i,r=0,a=t.length;r<a;r++){n=t[r],i=e.marked[n];var s=this.paper.findViewByModel(n);if(s){for(var o=0,l=i.length;o<l;o++)s.unhighlight(i[o],{magnetAvailability:!0});s.unhighlight(null,{elementAvailability:!0})}}e.marked=null},startArrowheadMove:function(e,t){t||(t={});var n={action:"arrowhead-move",arrowhead:e,whenNotAllowed:t.whenNotAllowed||"revert",initialMagnet:this[e+"Magnet"]||(this[e+"View"]?this[e+"View"].el:null),initialEnd:xt(this.model.get(e)),validateConnectionArgs:this._createValidateConnectionArgs(e)};return this._beforeArrowheadMove(n),t.ignoreBackwardsCompatibility!==!0&&(this._dragData=n),n},onMount:function(){me.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){me.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){me.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:ue});Object.defineProperty(Un.prototype,"sourceBBox",{enumerable:!0,get:function(){var e=this.sourceView;if(!e){var t=this.model.source();return new he(t.x,t.y)}var n=this.sourceMagnet;return e.isNodeConnection(n)?new he(this.sourceAnchor):e.getNodeBBox(n||e.el)}});Object.defineProperty(Un.prototype,"targetBBox",{enumerable:!0,get:function(){var e=this.targetView;if(!e){var t=this.model.target();return new he(t.x,t.y)}var n=this.targetMagnet;return e.isNodeConnection(n)?new he(this.targetAnchor):e.getNodeBBox(n||e.el)}});const kg=kt.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(e,t){const{options:n}=this,{useFirstSubpath:i}=n;let r;try{const a=R(t);if(r=a.convertToPathData().trim(),a.tagName()==="PATH"&&i){const s=r.search(/.M/i)+1;s>0&&(r=r.substr(0,s))}}catch{const s=e.getNodeBoundingRect(t);r=R.rectToPath(ce({},n,s.toJSON()))}return r},highlightConnection(e){this.vel.attr("d",e.getSerializedConnection())},highlightNode(e,t){const{vel:n,options:i}=this,{padding:r,layer:a}=i;let s=this.getNodeMatrix(e,t);if(r){!a&&t===e.el&&n.remove();let o=e.getNodeBoundingRect(t);const l=o.x+o.width/2,c=o.y+o.height/2;o=R.transformRect(o,s);const u=Math.max(o.width,1),d=Math.max(o.height,1),f=(u+r)/u,h=(d+r)/d,m=R.createSVGMatrix({a:f,b:0,c:0,d:h,e:l-f*l,f:c-h*c});s=s.multiply(m)}n.attr({d:this.getPathData(e,t),transform:R.matrixToTransformString(s)})},highlight(e,t){const{vel:n,options:i}=this;n.attr(i.attrs),e.isNodeConnection(t)?this.highlightConnection(e):this.highlightNode(e,t)}}),Ba=20;function Dg(e,t){const n=e.children();for(;n.length>0;){const i=n.shift();t(i)&&n.push(...i.children())}}const xg=kt.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:Ba,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(e,t){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:i,MASK_REMOVE_TAGS:r}=this,a=t.tagName();if(!R.isSVGGraphicsElement(t)||r.includes(a))return t.remove(),!1;if(i.includes(a)){const s=e.vel.findOne(`#${t.id}`);if(s){const{node:o}=s;let l=e.getNodeBoundingRect(o);e.model.isElement()&&(l=R.transformRect(l,e.getNodeMatrix(o)));const c=R("rect",l.toJSON()),{x:u,y:d}=l.center(),{angle:f,cx:h=u,cy:m=d}=s.rotate();f&&c.rotate(f,h,m),t.parent().append(c)}return t.remove(),!1}return n.forEach(s=>{s==="fill"&&t.attr("fill")==="none"||t.removeAttr(s)}),!0},transformMaskRoot(e,t){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach(i=>{t.removeAttr(i)})},getMaskShape(e,t){const{options:n,MASK_REPLACE_TAGS:i}=this,{deep:r}=n,a=t.tagName();let s;if(a==="G"){if(!r)return null;s=t.clone(),Dg(s,o=>this.transformMaskChild(e,o))}else{if(i.includes(a))return null;s=t.clone()}return this.transformMaskRoot(e,s),s},getMaskId(){return`highlight-mask-${this.cid}`},getMask(e,t){const{VISIBLE:n,INVISIBLE:i,options:r}=this,{padding:a,attrs:s}=r,o="stroke-width"in s?s["stroke-width"]:1,l=t.attr("fill")!=="none";let c=parseFloat(t.attr("stroke-width"));isNaN(c)&&(c=1);const u=c+a*2,d=u+o*2;let f=this.getMaskShape(e,t);if(!f){const h=e.getNodeBoundingRect(t.node);h.inflate(h.width?0:.5,h.height?0:.5),f=R("rect",h.toJSON())}return f.attr(s),R("mask",{id:this.getMaskId()}).append([f.clone().attr({fill:l?n:"none",stroke:n,"stroke-width":d}),f.clone().attr({fill:l?i:"none",stroke:i,"stroke-width":u})])},removeMask(e){const t=e.svg.getElementById(this.getMaskId());t&&e.defs.removeChild(t)},addMask(e,t){e.defs.appendChild(t.node)},highlight(e,t){const{options:n,vel:i}=this,{padding:r,attrs:a,maskClip:s=Ba,layer:o}=n,l="stroke"in a?a.stroke:"#000000";!o&&t===e.el&&i.remove();const c=e.getNodeBoundingRect(t).inflate(r+s),u=this.getNodeMatrix(e,t),d=this.getMask(e,R(t));this.addMask(e.paper,d),i.attr(c.toJSON()),i.attr({transform:R.matrixToTransformString(u),mask:`url(#${d.id})`,fill:l})},unhighlight(e){this.removeMask(e.paper)}}),Tg=kt.extend({UPDATABLE:!1,MOUNTABLE:!1,opacityClassName:Et("highlight-opacity"),highlight:function(e,t){R(t).addClass(this.opacityClassName)},unhighlight:function(e,t){R(t).removeClass(this.opacityClassName)}}),Za=Et("highlighted"),Sg=kt.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Za},highlight:function(e,t){R(t).addClass(this.options.className)},unhighlight:function(e,t){R(t).removeClass(this.options.className)}},{className:Za}),Ui={ROW:"row",COLUMN:"column"},zg=kt.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(e,t){const n=e.model,{attribute:i,size:r=20,gap:a=5,direction:s=Ui.ROW}=this.options;if(!i)throw new Error("List: attribute is required");const o=typeof r=="number"?{width:r,height:r}:r,l=s===Ui.ROW,c=l?o.width:o.height;let u=n.get(i);Array.isArray(u)||(u=[]);const d=this._prevItems||[],f=u.map((A,b)=>wn(d[b],u[b]));if(d.length!==u.length||f.some(A=>!A)){const A=this.vel.children(),b=u.map((v,w)=>{const S=w in A?A[w].node:null;if(f[w])return S;const L=this.createListItem(v,o,S);if(!L)return null;if(!(L instanceof SVGElement))throw new Error("List: item must be an SVGElement");L.dataset.index=w,L.dataset.attribute=i;const z=w*(c+a);return L.setAttribute("transform",l?`translate(${z}, 0)`:`translate(0, ${z})`),L});this.vel.empty().append(b),this._prevItems=u}const h=u.length,m=h===0?0:h*c+(h-1)*a,p=l?{width:m,height:o.height}:{width:o.width,height:m};this.position(n,p)},position(e,t){const{vel:n,options:i}=this,{margin:r=5,position:a="top-left"}=i,{width:s,height:o}=e.size(),{left:l,right:c,top:u,bottom:d}=tn(r),f=new he(l,u,s-(l+c),o-(u+d));let{x:h,y:m}=Bs(f,a);switch(a){case Re.CENTER:case Re.TOP:case Re.BOTTOM:{h-=t.width/2;break}case Re.RIGHT:case Re.BOTTOM_RIGHT:case Re.TOP_RIGHT:{h-=t.width;break}}switch(a){case Re.CENTER:case Re.RIGHT:case Re.LEFT:{m-=t.height/2;break}case Re.BOTTOM:case Re.BOTTOM_RIGHT:case Re.BOTTOM_LEFT:{m-=t.height;break}}n.attr("transform",`translate(${h}, ${m})`)}},{Directions:Ui,Positions:Re}),Lg=Object.freeze(Object.defineProperty({__proto__:null,addClass:Sg,list:zg,mask:xg,opacity:Tg,stroke:kg},Symbol.toStringTag,{value:"Module"}));function Og(e,t,n,i){var r="ratio"in i?i.ratio:.5;return e.getPointAtRatio(r)}function Pg(e,t,n,i){var r="length"in i?i.length:20;return e.getPointAtLength(r)}function Bg(e,t,n,i){var r=1e6,a=e.getConnection(),s=e.getConnectionSubdivisions(),o=new wt(n.clone().offset(0,r),n.clone().offset(0,-r)),l=new wt(n.clone().offset(r,0),n.clone().offset(-r,0)),c=o.intersect(a,{segmentSubdivisions:s}),u=l.intersect(a,{segmentSubdivisions:s}),d=[];return c&&Array.prototype.push.apply(d,c),u&&Array.prototype.push.apply(d,u),d.length>0?n.chooseClosest(d):"fallbackAt"in i?$s(e,i.fallbackAt):Qs(e,t,n,i)}function Zg(e,t,n,i){var r=e.getClosestPoint(n);return r||new X}function qn(e){return function(t,n,i,r){if(i instanceof Element){var a=this.paper.findView(i),s;if(a)if(a.isNodeConnection(i)){var o="fixedAt"in r?r.fixedAt:"50%";s=$s(a,o)}else s=a.getNodeBBox(i).center();else s=new X;return e.call(this,t,n,s,r)}return e.apply(this,arguments)}}function $s(e,t){var n=parseFloat(t);return ut(t)?e.getPointAtRatio(n/100):e.getPointAtLength(n)}const jg=qn(Bg),Qs=qn(Zg),Gg=Object.freeze(Object.defineProperty({__proto__:null,connectionClosest:Qs,connectionLength:Pg,connectionPerpendicular:jg,connectionRatio:Og,resolveRef:qn},Symbol.toStringTag,{value:"Module"}));function xi(e,t,n){if(Xe(n)){const{x:r,y:a}=n;if(isFinite(a)){const s=new wt(t,e),{start:o,end:l}=s.parallel(a);t=o,e=l}n=r}if(!isFinite(n))return e;var i=e.distance(t);return n===0&&i>0?e:e.move(t,-Math.min(n,i-1))}function Zr(e){var t=e.getAttribute("stroke-width");return t===null?0:parseFloat(t)||0}function Eg(e,t,n=0){let i,r,a,s;const{start:o,end:l}=e;switch(t){case"left":i="x",r=l,a=o,s=-1;break;case"right":i="x",r=o,a=l,s=1;break;case"top":i="y",r=l,a=o,s=-1;break;case"bottom":i="y",r=o,a=l,s=1;break;default:return}o[i]<l[i]?r[i]=a[i]:a[i]=r[i],isFinite(n)&&(r[i]+=s*n,a[i]+=s*n)}function Rg(e,t,n,i){let{offset:r,alignOffset:a,align:s}=i;return s&&Eg(e,s,a),xi(e.end,e.start,r)}function qs(e,t,n,i){var r=t.getNodeBBox(n);i.stroke&&r.inflate(Zr(n)/2);var a=e.intersect(r),s=a?e.start.chooseClosest(a):e.end;return xi(s,e.start,i.offset)}function Yg(e,t,n,i){var r=t.model.angle();if(r===0)return qs(e,t,n,i);var a=t.getNodeUnrotatedBBox(n);i.stroke&&a.inflate(Zr(n)/2);var s=a.center(),o=e.clone().rotate(s,r),l=o.setLength(1e6).intersect(a),c=l?o.start.chooseClosest(l).rotate(s,-r):e.end;return xi(c,e.start,i.offset)}function _g(e){if(!e)return null;var t=e;do{var n=t.tagName;if(typeof n!="string")return null;if(n=n.toUpperCase(),n==="G")t=t.firstElementChild;else if(n==="TITLE")t=t.nextElementSibling;else break}while(t);return t}var Vi="segmentSubdivisons",Xi="shapeBBox";function Wg(e,t,n,i){var r,a,s=i.selector,o=e.end;if(typeof s=="string"?r=t.findBySelector(s)[0]:s===!1?r=n:Array.isArray(s)?r=Xn(n,s):r=_g(n),!R.isSVGGraphicsElement(r)){if(r===n||!R.isSVGGraphicsElement(n))return o;r=n}var l=t.getNodeShape(r),c=t.getNodeMatrix(r),u=t.getRootTranslateMatrix(),d=t.getRootRotateMatrix(),f=u.multiply(d).multiply(c),h=f.inverse(),m=R.transformLine(e,h),p=m.start.clone(),A=t.getNodeData(r);if(i.insideout===!1){A[Xi]||(A[Xi]=l.bbox());var b=A[Xi];if(b.containsPoint(p))return o}var v;if(l instanceof Le){var w=i.precision||2;A[Vi]||(A[Vi]=l.getSegmentSubdivisions({precision:w})),v={precision:w,segmentSubdivisions:A[Vi]}}i.extrapolate===!0&&m.setLength(1e6),a=m.intersect(l,v),a?R.isArray(a)&&(a=p.chooseClosest(a)):i.sticky===!0&&(l instanceof he?a=l.pointNearestToPoint(p):l instanceof Ja?a=l.intersectionWithLineFromCenterToPoint(p):a=l.closestPoint(p,v));var S=a?R.transformPoint(a,f):o,L=i.offset||0;return i.stroke&&(L+=Zr(r)/2),xi(S,e.start,L)}const Ug=Rg,Vg=qs,Xg=Yg,Fg=Wg,Hg=Object.freeze(Object.defineProperty({__proto__:null,anchor:Ug,bbox:Vg,boundary:Fg,rectangle:Xg},Symbol.toStringTag,{value:"Module"}));function Vt(e){return function(t,n,i,r){var a=!!r.rotate,s=a?t.getNodeUnrotatedBBox(n):t.getNodeBBox(n),o=s[e](),l=r.dx;if(l){var c=ut(l);l=parseFloat(l),isFinite(l)&&(c&&(l/=100,l*=s.width),o.x+=l)}var u=r.dy;if(u){var d=ut(u);u=parseFloat(u),isFinite(u)&&(d&&(u/=100,u*=s.height),o.y+=u)}return a?o.rotate(t.model.getBBox().center(),-t.model.angle()):o}}function Jg(e,t,n,i){var r=e.model.angle(),a=e.getNodeBBox(t),s=a.center(),o=a.origin(),l=a.corner(),c=i.padding;if(isFinite(c)||(c=0),o.y+c<=n.y&&n.y<=l.y-c){var u=n.y-s.y;s.x+=r===0||r===180?0:u*1/Math.tan(xn(r)),s.y+=u}else if(o.x+c<=n.x&&n.x<=l.x-c){var d=n.x-s.x;s.y+=r===90||r===270?0:d*Math.tan(xn(r)),s.x+=d}return s}function Kg(e,t,n,i){var r=!!i.rotate,a,s,o;r?(a=e.getNodeUnrotatedBBox(t),o=e.model.getBBox().center(),s=e.model.angle()):a=e.getNodeBBox(t);var l=i.padding;isFinite(l)&&a.inflate(l),r&&n.rotate(o,s);var c=a.sideNearestToPoint(n),u;switch(c){case"left":u=a.leftMiddle();break;case"right":u=a.rightMiddle();break;case"top":u=a.topMiddle();break;case"bottom":u=a.bottomMiddle();break}return r?u.rotate(o,-s):u}function $g(e,t,n,i,r){return e.model.getPointFromConnectedLink(this.model,r).offset(i.dx,i.dy)}const Qg=Vt("center"),qg=Vt("topMiddle"),eh=Vt("bottomMiddle"),th=Vt("leftMiddle"),nh=Vt("rightMiddle"),ih=Vt("origin"),rh=Vt("topRight"),ah=Vt("bottomLeft"),sh=Vt("corner"),oh=qn(Jg),lh=qn(Kg),ch=$g,uh=Object.freeze(Object.defineProperty({__proto__:null,bottom:eh,bottomLeft:ah,bottomRight:sh,center:Qg,left:th,midSide:lh,modelCenter:ch,perpendicular:oh,right:nh,top:qg,topLeft:ih,topRight:rh},Symbol.toStringTag,{value:"Module"})),Cn={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},dh=50,ja=20,Ga=1e3,gh=1/0,ui=9007199254740991,Fi=me.Highlighting,Ea={[Fi.DEFAULT]:{name:"stroke",options:{padding:3}},[Fi.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[Fi.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},hh=[{name:bt.BACK},{name:bt.CELLS},{name:bt.LABELS},{name:bt.FRONT},{name:bt.TOOLS}],fh=cn.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,perpendicularLinks:!1,elementView:We,linkView:Un,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(e,t){return!1},highlighting:Ea,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new Ke,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"bbox"},connectionStrategy:null,validateMagnet:function(e,t,n){return t.getAttribute("magnet")!=="passive"},validateConnection:function(e,t,n,i,r,a){return(r==="target"?n:e)instanceof We},embeddingMode:!1,validateEmbedding:function(e,t){return!0},validateUnembedding:function(e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:Cn.EXACT,frozen:!1,autoFreeze:!1,onViewUpdate:function(e,t,n,i,r){t&(e.FLAG_INSERT|e.FLAG_REMOVE)||i.mounting||i.isolate||r.requestConnectedLinksUpdate(e,n,i)},onViewPostponed:function(e,t,n){return n.forcePostponedViewUpdate(e,t)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:Lg,anchorNamespace:uh,linkAnchorNamespace:Gg,connectionPointNamespace:Hg,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},svg:null,viewport:null,defs:null,tools:null,$background:null,layers:null,$grid:null,$document:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,init:function(){const{options:e,el:t}=this;e.cellViewNamespace||(e.cellViewNamespace=typeof joint<"u"&&Yt(joint,"shapes")?joint.shapes:null);const n=this.model=e.model||new Lr;this._layers={},this.setGrid(e.drawGrid),this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.$document=Ee(t.ownerDocument),this.resetViews(n.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var e=this.model;this.listenTo(e,"add",this.onCellAdded).listenTo(e,"remove",this.onCellRemoved).listenTo(e,"change",this.onCellChange).listenTo(e,"reset",this.onGraphReset).listenTo(e,"sort",this.onGraphSort).listenTo(e,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("scale translate",this.update)},onCellAdded:function(e,t,n){var i=n.position;this.isAsync()||!ht(i)?this.renderView(e,n):(n.maxPosition===i&&this.freeze({key:"addCells"}),this.renderView(e,n),i===0&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(e,t,n){const i=this.findViewByModel(e);i&&this.requestViewUpdate(i,i.FLAG_REMOVE,i.UPDATE_PRIORITY,n)},onCellChange:function(e,t){if(e!==this.model.attributes.cells&&e.hasChanged("z")&&this.options.sorting===Cn.APPROX){const n=this.findViewByModel(e);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,t)}},onGraphReset:function(e,t){this.resetLayers(),this.resetViews(e.models,t)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(e){if(!this.isFrozen()){var t=e&&e.batchName,n=this.model;if(!this.isAsync()){var i=this.UPDATE_DELAYING_BATCHES;i.includes(t)&&!n.hasActiveBatch(i)&&this.updateViews(e)}var r=this.SORT_DELAYING_BATCHES;r.includes(t)&&!n.hasActiveBatch(r)&&this.sortViews()}},cloneOptions:function(){const{options:e}=this,{defaultConnector:t,defaultRouter:n,defaultConnectionPoint:i,defaultAnchor:r,defaultLinkAnchor:a,origin:s,highlighting:o,cellViewNamespace:l,interactive:c}=e;!l&&typeof joint<"u"&&Yt(joint,"shapes")&&(e.cellViewNamespace=joint.shapes),ze(t)||(e.defaultConnector=At(t)),ze(n)||(e.defaultRouter=At(n)),ze(i)||(e.defaultConnectionPoint=At(i)),ze(r)||(e.defaultAnchor=At(r)),ze(a)||(e.defaultLinkAnchor=At(a)),Xe(c)&&(e.interactive=ce({},c)),Xe(o)&&(e.highlighting=Ar({},o,Ea)),e.origin=ce({},s)},children:function(){var e=R.namespace;return[{namespaceURI:e.xhtml,tagName:"div",className:Et("paper-background"),selector:"background"},{namespaceURI:e.xhtml,tagName:"div",className:Et("paper-grid"),selector:"grid"},{namespaceURI:e.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":e.xlink},selector:"svg",children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:Et("layers"),selector:"layers"}]}]},hasLayerView(e){return e in this._layers},getLayerView(e){const{_layers:t}=this;if(e in t)return t[e];throw new Error(`dia.Paper: Unknown layer "${e}"`)},getLayerNode(e){return this.getLayerView(e).el},render:function(){this.renderChildren();const{childNodes:e,options:t}=this,{svg:n,defs:i,layers:r,background:a,grid:s}=e;return n.style.overflow=t.overflow?"visible":"hidden",this.svg=n,this.defs=i,this.layers=r,this.$background=Ee(a),this.$grid=Ee(s),this.renderLayers(),R.ensureId(n),t.background&&this.drawBackground(t.background),t.drawGrid&&this.drawGrid(),this},renderLayers:function(e=hh){this.removeLayers(),e.forEach(({name:r,sorted:a})=>{const s=new xd({name:r});this.layers.appendChild(s.el),this._layers[r]=s});const t=this.getLayerView(bt.CELLS),n=this.getLayerView(bt.TOOLS),i=this.getLayerView(bt.LABELS);this.tools=n.el,this.cells=this.viewport=t.el,t.vel.addClass(Et("viewport")),i.vel.addClass(Et("viewport"))},removeLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].remove(),delete e[t]})},resetLayers:function(){const{_layers:e}=this;Object.keys(e).forEach(t=>{e[t].removePivots()})},update:function(){return this.options.drawGrid&&this.drawGrid(),this._background&&this.updateBackgroundImage(this._background),this},matrix:function(e){var t=this.layers;if(e===void 0){var n=t.getAttribute("transform");return(this._viewportTransformString||null)===n?e=this._viewportMatrix:(e=t.getCTM(),this._viewportMatrix=e,this._viewportTransformString=n),R.createSVGMatrix(e)}e=R.createSVGMatrix(e);var i=R.matrixToTransformString(e);return t.setAttribute("transform",i),this._viewportMatrix=e,this._viewportTransformString=t.getAttribute("transform"),this},clientMatrix:function(){return R.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(e,t,n){if(e instanceof me)for(var i=e.model,r=this.model.getConnectedLinks(i),a=0,s=r.length;a<s;a++){var o=r[a],l=this.findViewByModel(o);if(l){var c=["UPDATE"];o.getTargetCell()===i&&c.push("TARGET"),o.getSourceCell()===i&&c.push("SOURCE");var u=Math.max(t+1,l.UPDATE_PRIORITY);this.scheduleViewUpdate(l,l.getFlag(c),u,n)}}},forcePostponedViewUpdate:function(e,t){if(!e||!(e instanceof me))return!1;var n=e.model;if(n.isElement())return!1;if(!(t&e.getFlag(["SOURCE","TARGET"]))){var i={silent:!0},r=0,a=this.findViewByModel(n.getSourceCell());a&&!this.isViewMounted(a)&&(r=this.dumpView(a,i),e.updateEndMagnet("source"));var s=0,o=this.findViewByModel(n.getTargetCell());if(o&&!this.isViewMounted(o)&&(s=this.dumpView(o,i),e.updateEndMagnet("target")),r===0&&s===0)return!this.dumpView(e,i)}return!1},requestViewUpdate:function(e,t,n,i){i||(i={}),this.scheduleViewUpdate(e,t,n,i);var r=this.isAsync();if(!(this.isFrozen()||r&&i.async!==!1)&&!this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES)){var a=this.updateViews(i);r&&this.notifyAfterRender(a,i)}},scheduleViewUpdate:function(e,t,n,i){const{_updates:r,options:a}=this;r.idle&&a.autoFreeze&&(r.idle=!1,this.unfreeze());const{FLAG_REMOVE:s,FLAG_INSERT:o,UPDATE_PRIORITY:l,cid:c}=e;let u=r.priorities[n];if(u||(u=r.priorities[n]={}),n>l)for(let h=n-1;h>=l;h--){const m=r.priorities[h];!m||!(c in m)||(u[c]|=m[c],delete m[c])}let d=u[c]||0;if((d&t)===t)return;d||r.count++,t&s&&d&o?u[c]^=o:t&o&&d&s&&(u[c]^=s),u[c]|=t;const f=a.onViewUpdate;typeof f=="function"&&f.call(this,e,t,n,i||{},this)},dumpViewUpdate:function(e){if(!e)return 0;var t=this._updates,n=e.cid,i=t.priorities[e.UPDATE_PRIORITY],r=this.registerMountedView(e)|i[n];return delete i[n],r},dumpView:function(e,t={}){const n=this.dumpViewUpdate(e);if(!n)return 0;const i=!t.silent;i&&this.notifyBeforeRender(t);const r=this.updateView(e,n,t);if(i){const a={updated:1,priority:e.UPDATE_PRIORITY};this.notifyAfterRender(a,t)}return r},updateView:function(e,t,n){if(!e)return 0;const{FLAG_REMOVE:i,FLAG_INSERT:r,FLAG_INIT:a,model:s}=e;if(e instanceof me){if(t&i)return this.removeView(s),0;if(t&r){const o=!!(t&a);o&&(t^=a),this.insertView(e,o),t^=r}}return t?e.confirmUpdate(t,n||{}):0},requireView:function(e,t){var n=this.findViewByModel(e);return n?(this.dumpView(n,t),n):null},registerUnmountedView:function(e){var t=e.cid,n=this._updates;if(t in n.unmounted)return 0;var i=n.unmounted[t]|=e.FLAG_INSERT;return n.unmountedCids.push(t),delete n.mounted[t],i},registerMountedView:function(e){var t=e.cid,n=this._updates;if(t in n.mounted)return 0;n.mounted[t]=!0,n.mountedCids.push(t);var i=n.unmounted[t]||0;return delete n.unmounted[t],i},isViewMounted:function(e){if(!e)return!1;var t=e.cid,n=this._updates;return t in n.mounted},dumpViews:function(e){var t=Ct({},e,{viewport:null});this.checkViewport(t),this.updateViews(t)},updateViews:function(e){this.notifyBeforeRender(e);let t,n=0,i=0,r=ui;do i++,t=this.updateViewsBatch(e),n+=t.updated,r=Math.min(t.priority,r);while(!t.empty);const a={updated:n,batches:i,priority:r};return this.notifyAfterRender(a,e),a},hasScheduledUpdates:function(){const e=this._updates.priorities,t=Object.keys(e);let n=t.length;for(;n>0&&n--;)for(let i in e[t[n]])return!0;return!1},updateViewsAsync:function(e,t){e||(e={}),t||(t={processed:0,priority:ui});const{_updates:n,options:i}=this,r=n.id;if(r){rr(r),t.processed===0&&this.hasScheduledUpdates()&&this.notifyBeforeRender(e);const a=this.updateViewsBatch(e),s=Ct({},e,{mountBatchSize:Ga-a.mounted,unmountBatchSize:Ga-a.unmounted}),o=this.checkViewport(s),l=o.unmounted,c=o.mounted;let u=t.processed;const d=n.count;a.updated>0?(u+=a.updated+a.unmounted,a.processed=u,t.priority=Math.min(a.priority,t.priority),a.empty&&c===0?(a.unmounted+=l,a.mounted+=c,a.priority=t.priority,this.notifyAfterRender(a,e),t.processed=0,t.priority=ui,n.count=0):t.processed=u):n.idle||i.autoFreeze&&(this.freeze(),n.idle=!0,this.trigger("render:idle",e));const f=e.progress;if(d&&typeof f=="function"&&f.call(this,a.empty,u,d,a,this),n.id!==r)return}if(n.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");n.id=nr(this.updateViewsAsync,this,e,t)},notifyBeforeRender:function(e={}){let t=e.beforeRender;typeof t!="function"&&(t=this.options.beforeRender,typeof t!="function")||t.call(this,e,this)},notifyAfterRender:function(e,t={}){let n=t.afterRender;typeof n!="function"&&(n=this.options.afterRender),typeof n=="function"&&n.call(this,e,t,this),this.trigger("render:done",e,t)},updateViewsBatch:function(e){e||(e={});var t=e.batchSize||gh,n=this._updates,i=0,r=0,a=0,s=0,o=ui,l=!0,c=this.options,u=n.priorities,d="viewport"in e?e.viewport:c.viewport;typeof d!="function"&&(d=null);var f=c.onViewPostponed;typeof f!="function"&&(f=null);var h=Object.keys(u);e:for(var m=0,p=h.length;m<p;m++){var A=+h[m],b=u[A];for(var v in b){if(i>=t){l=!1;break e}var w=Bn[v];if(!w){delete b[v];continue}var S=b[v];if(!(S&w.FLAG_REMOVE)){var L=v in n.unmounted;if(w.DETACHABLE&&d&&!d.call(this,w,!L,this)){L||(this.registerUnmountedView(w),this.detachView(w)),n.unmounted[v]|=S,delete b[v],a++;continue}L&&(S|=w.FLAG_INSERT,s++),S|=this.registerMountedView(w)}var z=this.updateView(w,S,e);if(z>0&&(b[v]=z,!f||!f.call(this,w,z,this)||b[v])){r++,l=!1;continue}o>A&&(o=A),i++,delete b[v]}}return{priority:o,updated:i,postponed:r,unmounted:a,mounted:s,empty:l}},getUnmountedViews:function(){const e=this._updates,t=Object.keys(e.unmounted),n=t.length,i=new Array(n);for(var r=0;r<n;r++)i[r]=Bn[t[r]];return i},getMountedViews:function(){const e=this._updates,t=Object.keys(e.mounted),n=t.length,i=new Array(n);for(var r=0;r<n;r++)i[r]=Bn[t[r]];return i},checkUnmountedViews:function(e,t){t||(t={});var n=0;typeof e!="function"&&(e=null);for(var i=("mountBatchSize"in t)?t.mountBatchSize:1/0,r=this._updates,a=r.unmountedCids,s=r.unmounted,o=0,l=Math.min(a.length,i);o<l;o++){var c=a[o];if(c in s){var u=Bn[c];if(u){if(u.DETACHABLE&&e&&!e.call(this,u,!1,this)){a.push(c);continue}n++;var d=this.registerMountedView(u);d&&this.scheduleViewUpdate(u,d,u.UPDATE_PRIORITY,{mounting:!0})}}}return a.splice(0,o),n},checkMountedViews:function(e,t){t||(t={});var n=0;if(typeof e!="function")return n;for(var i=("unmountBatchSize"in t)?t.unmountBatchSize:1/0,r=this._updates,a=r.mountedCids,s=r.mounted,o=0,l=Math.min(a.length,i);o<l;o++){var c=a[o];if(c in s){var u=Bn[c];if(u){if(!u.DETACHABLE||e.call(this,u,!0,this)){a.push(c);continue}n++;var d=this.registerUnmountedView(u);d&&this.detachView(u)}}}return a.splice(0,o),n},checkViewVisibility:function(e,t={}){let n="viewport"in t?t.viewport:this.options.viewport;typeof n!="function"&&(n=null);const i=this._updates,{mounted:r,unmounted:a}=i,s=!e.DETACHABLE||!n||n.call(this,e,!1,this);let o=!1,l=!1;if(e.cid in r&&!s){this.registerUnmountedView(e)&&this.detachView(e);const d=i.mountedCids.indexOf(e.cid);i.mountedCids.splice(d,1),o=!0}if(!o&&e.cid in a&&s){const u=i.unmountedCids.indexOf(e.cid);i.unmountedCids.splice(u,1);var c=this.registerMountedView(e);c&&this.scheduleViewUpdate(e,c,e.UPDATE_PRIORITY,{mounting:!0}),l=!0}return{mounted:l?1:0,unmounted:o?1:0}},checkViewport:function(e){var t=Ct({},e,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in t?t.viewport:this.options.viewport,i=this.checkMountedViews(n,t);if(i>0){var r=this._updates.unmountedCids;t.mountBatchSize=Math.min(r.length-i,t.mountBatchSize)}var a=this.checkUnmountedViews(n,t);return{mounted:a,unmounted:i}},freeze:function(e){e||(e={});var t=this._updates,n=e.key,i=this.options.frozen,r=t.freezeKey;if(n&&n!==r){if(i&&r)return;t.freezeKey=n,t.keyFrozen=i}this.options.frozen=!0;var a=t.id;t.id=null,this.isAsync()&&a&&rr(a)},unfreeze:function(e){e||(e={});var t=this._updates,n=e.key,i=t.freezeKey;n&&i&&n!==i||(t.freezeKey=null,!(n&&n===i&&t.keyFrozen)&&(this.isAsync()?(this.freeze(),this.updateViewsAsync(e)):this.updateViews(e),this.options.frozen=t.keyFrozen=!1,t.sort&&(this.sortViews(),t.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===Cn.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var e=this.options,t=e.width,n=e.height;return ht(t)||(t=this.el.clientWidth),ht(n)||(n=this.el.clientHeight),{width:t,height:n}},setDimensions:function(e,t){const{options:n}=this,{width:i,height:r}=n;let a=e===void 0?i:e,s=t===void 0?r:t;if(i===a&&r===s)return;n.width=a,n.height=s,this._setDimensions();const o=this.getComputedSize();this.trigger("resize",o.width,o.height)},_setDimensions:function(){const{options:e}=this;let t=e.width,n=e.height;ht(t)&&(t=Math.round(t)),ht(n)&&(n=Math.round(n)),this.$el.css({width:t===null?"":t,height:n===null?"":n})},setOrigin:function(e,t){return this.translate(e||0,t||0)},fitToContent:function(e,t,n,i){je(e)?i=e:i=ce({gridWidth:e,gridHeight:t,padding:n},i);const{x:r,y:a,width:s,height:o}=this.getFitToContentArea(i),{sx:l,sy:c}=this.scale();return this.setOrigin(-r*l,-a*c),this.setDimensions(s*l,o*c),new he(r,a,s,o)},getFitToContentArea:function(e={}){const t=e.gridWidth||1,n=e.gridHeight||1,i=tn(e.padding||0),r=Math.max(e.minWidth||0,t),a=Math.max(e.minHeight||0,n),s=e.maxWidth||Number.MAX_VALUE,o=e.maxHeight||Number.MAX_VALUE,l=e.allowNewOrigin,c="contentArea"in e?new he(e.contentArea):this.getContentArea(e),{sx:u,sy:d}=this.scale();c.x*=u,c.y*=d,c.width*=u,c.height*=d;let f=Math.ceil((c.width+c.x)/t),h=Math.ceil((c.height+c.y)/n);e.allowNegativeBottomRight||(f=Math.max(f,1),h=Math.max(h,1)),f*=t,h*=n;let m=0;(l==="negative"&&c.x<0||l==="positive"&&c.x>=0||l==="any")&&(m=Math.ceil(-c.x/t)*t,m+=i.left,f+=m);let p=0;return(l==="negative"&&c.y<0||l==="positive"&&c.y>=0||l==="any")&&(p=Math.ceil(-c.y/n)*n,p+=i.top,h+=p),f+=i.right,h+=i.bottom,f=Math.max(f,r),h=Math.max(h,a),f=Math.min(f,s),h=Math.min(h,o),new he(-m/u,-p/d,f/u,h/d)},transformToFitContent:function(e){e||(e={});let t,n;if("contentArea"in e){const A=e.contentArea;t=this.localToPaperRect(A),n=new X(A)}else t=this.getContentBBox(e),n=this.paperToLocalPoint(t);if(!t.width||!t.height)return;Ct(e,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const i=tn(e.padding),r=e.minScaleX||e.minScale,a=e.maxScaleX||e.maxScale,s=e.minScaleY||e.minScale,o=e.maxScaleY||e.maxScale;let l;if(e.fittingBBox)l=e.fittingBBox;else{const A=this.translate(),b=this.getComputedSize();l={x:A.tx,y:A.ty,width:b.width,height:b.height}}l=new he(l).moveAndExpand({x:i.left,y:i.top,width:-i.left-i.right,height:-i.top-i.bottom});const c=this.scale();let u=l.width/t.width*c.sx,d=l.height/t.height*c.sy;if(e.preserveAspectRatio&&(u=d=Math.min(u,d)),e.scaleGrid){const A=e.scaleGrid;u=A*Math.floor(u/A),d=A*Math.floor(d/A)}u=Math.min(a,Math.max(r,u)),d=Math.min(o,Math.max(s,d));const f={x:u/c.sx,y:d/c.sy},h=this.options.origin;let m=l.x-n.x*u-h.x,p=l.y-n.y*d-h.y;switch(e.verticalAlign){case"middle":p=p+(l.height-t.height*f.y)/2;break;case"bottom":p=p+(l.height-t.height*f.y);break}switch(e.horizontalAlign){case"middle":m=m+(l.width-t.width*f.x)/2;break;case"right":m=m+(l.width-t.width*f.x);break}this.scale(u,d),this.translate(m,p)},scaleContentToFit:function(e){this.transformToFitContent(e)},getContentArea:function(e){return e&&e.useModelGeometry?this.model.getBBox()||new he:R(this.cells).getBBox()},getContentBBox:function(e){return this.localToPaperRect(this.getContentArea(e))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...e){const{restrictTranslate:t}=this.options;let n;return ze(t)?n=t.apply(this,e):t===!0?n=this.getArea():t?n=new he(t):n=null,n},createViewForModel:function(e){const{options:t}=this;var n,i,r=t.cellViewNamespace,a=e.get("type")+"View",s=Xn(r,a,".");e.isLink()?(n=t.linkView,i=Un):(n=t.elementView,i=We);var o=n.prototype instanceof St.View?s||n:n.call(this,e)||s||i;return new o({model:e,interactive:t.interactive,labelsLayer:t.labelsLayer===!0?bt.LABELS:t.labelsLayer})},removeView:function(e){const{id:t}=e,{_views:n,_updates:i}=this,r=n[t];if(r){var{cid:a}=r;const{mounted:s,unmounted:o}=i;r.remove(),delete n[t],delete s[a],delete o[a]}return r},renderView:function(e,t){const{id:n}=e,i=this._views;let r,a,s=!0;return n in i&&(r=i[n],r.model===e?(a=r.FLAG_INSERT,s=!1):this.removeView(e)),s&&(r=i[n]=this.createViewForModel(e),r.paper=this,a=this.registerUnmountedView(r)|this.FLAG_INIT|r.getFlag(ft(r,"initFlag"))),this.requestViewUpdate(r,a,r.UPDATE_PRIORITY,t),r},onImageDragStart:function(){return!1},resetViews:function(e,t){t||(t={}),e||(e=[]),this._resetUpdates(),this.removeViews();const n=this.options.autoFreeze?null:"reset";this.freeze({key:n});for(var i=0,r=e.length;i<r;i++)this.renderView(e[i],t);this.unfreeze({key:n}),this.sortViews()},removeViews:function(){Pt(this._views,"remove"),this._views={}},sortViews:function(){if(this.isExactSorting()){if(this.isFrozen()){this._updates.sort=!0;return}this.sortViewsExact()}},sortViewsExact:function(){var e=Ee(this.cells).children("[model-id]"),t=this.model.get("cells");Io(e,function(n,i){var r=t.get(n.getAttribute("model-id")),a=t.get(i.getAttribute("model-id")),s=r.attributes.z||0,o=a.attributes.z||0;return s===o?0:s<o?-1:1})},insertView:function(e,t){const n=this.getLayerView(bt.CELLS),{el:i,model:r}=e;switch(this.options.sorting){case Cn.APPROX:n.insertSortedNode(i,r.get("z"));break;case Cn.EXACT:default:n.insertNode(i);break}e.onMount(t)},detachView(e){e.unmount(),e.onDetach()},scale:function(e,t,n,i){if(e===void 0)return R.matrixToScale(this.matrix());t===void 0&&(t=e),n===void 0&&(n=0,i=0);var r=this.translate();if(n||i||r.tx||r.ty){var a=r.tx-n*(e-1),s=r.ty-i*(t-1);this.translate(a,s)}e=Math.max(e||0,this.MIN_SCALE),t=Math.max(t||0,this.MIN_SCALE);var o=this.matrix();return o.a=e,o.d=t,this.matrix(o),this.trigger("scale",e,t,n,i),this},rotate:function(e,t,n){if(e===void 0)return R.matrixToRotate(this.matrix());if(t===void 0){var i=this.cells.getBBox();t=i.width/2,n=i.height/2}var r=this.matrix().translate(t,n).rotate(e).translate(-t,-n);return this.matrix(r),this},translate:function(e,t){if(e===void 0)return R.matrixToTranslate(this.matrix());const{options:n}=this,{origin:i,drawGrid:r}=n;e||(e=0),t||(t=0);const a=this.matrix();if(a.e===e&&a.f===t)return this;a.e=e,a.f=t,this.matrix(a);const{tx:s,ty:o}=this.translate();return i.x=s,i.y=o,this.trigger("translate",s,o),r&&this.drawGrid(),this},findView:function(e){var t=mt(e)?this.cells.querySelector(e):e instanceof Ee?e[0]:e,n=this.findAttribute("model-id",t);if(n)return this._views[n]},findViewByModel:function(e){var t=mt(e)||ht(e)?e:e&&e.id;return this._views[t]},findViewsFromPoint:function(e){e=new X(e);var t=this.model.getElements().map(this.findViewByModel,this);return t.filter(function(n){return n&&n.vel.getBBox({target:this.cells}).containsPoint(e)},this)},findViewsInArea:function(e,t){t=Ct(t||{},{strict:!1}),e=new he(e);var n=this.model.getElements().map(this.findViewByModel,this),i=t.strict?"containsRect":"intersect";return n.filter(function(r){return r&&e[i](r.vel.getBBox({target:this.cells}))},this)},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(e,...t){typeof e=="string"&&this.trigger("tools:event",e,...t)},getModelById:function(e){return this.model.getCell(e)},snapToGrid:function(e,t){return this.clientToLocalPoint(e,t).snapToGrid(this.options.gridSize)},localToPaperPoint:function(e,t){var n=new X(e,t),i=R.transformPoint(n,this.matrix());return i},localToPaperRect:function(e,t,n,i){var r=new he(e,t,n,i),a=R.transformRect(r,this.matrix());return a},paperToLocalPoint:function(e,t){var n=new X(e,t),i=R.transformPoint(n,this.matrix().inverse());return i},paperToLocalRect:function(e,t,n,i){var r=new he(e,t,n,i),a=R.transformRect(r,this.matrix().inverse());return a},localToClientPoint:function(e,t){var n=new X(e,t),i=R.transformPoint(n,this.clientMatrix());return i},localToClientRect:function(e,t,n,i){var r=new he(e,t,n,i),a=R.transformRect(r,this.clientMatrix());return a},clientToLocalPoint:function(e,t){var n=new X(e,t),i=R.transformPoint(n,this.clientMatrix().inverse());return i},clientToLocalRect:function(e,t,n,i){var r=new he(e,t,n,i),a=R.transformRect(r,this.clientMatrix().inverse());return a},localToPagePoint:function(e,t){return this.localToPaperPoint(e,t).offset(this.pageOffset())},localToPageRect:function(e,t,n,i){return this.localToPaperRect(e,t,n,i).offset(this.pageOffset())},pageToLocalPoint:function(e,t){var n=new X(e,t),i=n.difference(this.pageOffset());return this.paperToLocalPoint(i)},pageToLocalRect:function(e,t,n,i){var r=this.pageOffset(),a=new he(e,t,n,i);return a.x-=r.x,a.y-=r.y,this.paperToLocalRect(a)},clientOffset:function(){var e=this.svg.getBoundingClientRect();return new X(e.left,e.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(e){if(!(e instanceof Un))throw new Error("Must provide a linkView.");var t=e.model,n=this.options,i=this.model,r=i.constructor.validations;return!(!n.multiLinks&&!r.multiLinks.call(this,i,t)||!n.linkPinning&&!r.linkPinning.call(this,i,t)||typeof n.allowLink=="function"&&!n.allowLink.call(this,e,this))},getDefaultLink:function(e,t){return ze(this.options.defaultLink)?this.options.defaultLink.call(this,e,t):this.options.defaultLink.clone()},resolveHighlighter:function(e={}){let{highlighter:t,type:n}=e;const{highlighting:i,highlighterNamespace:r}=this.options;if(t===void 0){if(!i||n&&(t=i[n],t===!1))return!1;t||(t=i.default)}if(!t)return!1;mt(t)&&(t={name:t});const a=t.name,s=r[a];if(!s)throw new Error('Unknown highlighter ("'+a+'")');if(typeof s.highlight!="function")throw new Error('Highlighter ("'+a+'") is missing required highlight() method');if(typeof s.unhighlight!="function")throw new Error('Highlighter ("'+a+'") is missing required unhighlight() method');return{highlighter:s,options:t.options||{},name:a}},onCellHighlight:function(e,t,n){const i=this.resolveHighlighter(n);if(!i)return;const{highlighter:r,options:a}=i;r.highlight(e,t,a)},onCellUnhighlight:function(e,t,n){const i=this.resolveHighlighter(n);if(!i)return;const{highlighter:r,options:a}=i;r.unhighlight(e,t,a)},pointerdblclick:function(e){e.preventDefault(),e=$e(e);var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.snapToGrid(e.clientX,e.clientY);t?t.pointerdblclick(e,n.x,n.y):this.trigger("blank:pointerdblclick",e,n.x,n.y)}},pointerclick:function(e){var t=this.eventData(e);if(t.mousemoved<=this.options.clickThreshold){e=$e(e);var n=this.findView(e.target);if(this.guard(e,n))return;var i=this.snapToGrid(e.clientX,e.clientY);n?n.pointerclick(e,i.x,i.y):this.trigger("blank:pointerclick",e,i.x,i.y)}},contextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.contextMenuFired){this.contextMenuFired=!1;return}e=$e(e),this.contextMenuTrigger(e)},contextMenuTrigger:function(e){var t=this.findView(e.target);if(!this.guard(e,t)){var n=this.snapToGrid(e.clientX,e.clientY);t?t.contextmenu(e,n.x,n.y):this.trigger("blank:contextmenu",e,n.x,n.y)}},pointerdown:function(e){e=$e(e);const{target:t,button:n}=e,i=this.findView(t),r=n===2;if(i){if(!r&&this.guard(e,i))return;const a=this.FORM_CONTROL_TAG_NAMES.includes(t.tagName);this.options.preventDefaultViewAction&&!a&&e.preventDefault(),a&&i.preventDefaultInteraction(e);const s=i.el,o=t.closest("[event]");if(o&&s!==o&&i.el.contains(o)){const c=$e(Ee.Event(e.originalEvent,{data:e.data,currentTarget:o}));if(this.onevent(c),c.isDefaultPrevented()&&e.preventDefault(),c.isPropagationStopped())return;e.data=c.data}const l=t.closest("[magnet]");if(l&&i.el!==l&&i.el.contains(l)){const c=$e(Ee.Event(e.originalEvent,{data:e.data,currentTarget:l}));if(this.onmagnet(c),c.isDefaultPrevented()&&e.preventDefault(),c.isPropagationStopped()){if(r)return;this.delegateDragEvents(i,c.data);return}e.data=c.data}}if(r){this.contextMenuFired=!0;const a=Ee.Event(e.originalEvent,{type:"contextmenu",data:e.data});this.contextMenuTrigger(a)}else{const a=this.snapToGrid(e.clientX,e.clientY);i?i.pointerdown(e,a.x,a.y):(this.options.preventDefaultBlankAction&&e.preventDefault(),this.trigger("blank:pointerdown",e,a.x,a.y)),this.delegateDragEvents(i,e.data)}},pointermove:function(e){var t=this.eventData(e);t.mousemoved||(t.mousemoved=0,this.undelegateEvents());var n=++t.mousemoved;if(!(n<=this.options.moveThreshold)){e=$e(e);var i=this.snapToGrid(e.clientX,e.clientY),r=t.sourceView;r?r.pointermove(e,i.x,i.y):this.trigger("blank:pointermove",e,i.x,i.y),this.eventData(e,t)}},pointerup:function(e){this.undelegateDocumentEvents();var t=$e(e),n=this.snapToGrid(t.clientX,t.clientY),i=this.eventData(e).sourceView;i?i.pointerup(t,n.x,n.y):this.trigger("blank:pointerup",t,n.x,n.y),t.isPropagationStopped()||this.pointerclick(Ee.Event(e.originalEvent,{type:"click",data:e.data})),this.delegateEvents()},mouseover:function(e){e=$e(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseover(e);else{if(this.el===e.target)return;this.trigger("blank:mouseover",e)}},mouseout:function(e){e=$e(e);var t=this.findView(e.target);if(!this.guard(e,t))if(t)t.mouseout(e);else{if(this.el===e.target)return;this.trigger("blank:mouseout",e)}},mouseenter:function(e){e=$e(e);const{target:t,relatedTarget:n,currentTarget:i}=e,r=this.findView(t);if(this.guard(e,r))return;const a=this.findView(n);r&&(a===r||(r.mouseenter(e),this.el.contains(n)))||a||i===this.el&&this.trigger("paper:mouseenter",e)},mouseleave:function(e){e=$e(e);const{target:t,relatedTarget:n,currentTarget:i}=e,r=this.findView(t);if(this.guard(e,r))return;const a=this.findView(n);r&&(a===r||(r.mouseleave(e),this.el.contains(n)))||a||i===this.el&&this.trigger("paper:mouseleave",e)},_processMouseWheelEvtBuf:vo(function(){const{event:e,deltas:t}=this._mw_evt_buffer,n=t.reduce((s,o)=>s+bo(o,dh),0),i=Math.pow(.995,n),{x:r,y:a}=this.clientToLocalPoint(e.clientX,e.clientY);this.trigger("paper:pinch",e,r,a,i),this._mw_evt_buffer={event:null,deltas:[]}},ja,{maxWait:ja}),mousewheel:function(e){e=$e(e);const t=this.findView(e.target);if(this.guard(e,t))return;const n=e.originalEvent,i=this.snapToGrid(n.clientX,n.clientY),{deltaX:r,deltaY:a}=Ao(n),s=this._events["paper:pinch"];if(e.ctrlKey&&s&&s.length>0)n.preventDefault(),this._mw_evt_buffer.event=n,this._mw_evt_buffer.deltas.push(a),this._processMouseWheelEvtBuf();else{const o=Math.max(-1,Math.min(1,n.wheelDelta));t?t.mousewheel(e,i.x,i.y,o):this.trigger("blank:mousewheel",e,i.x,i.y,o),this.trigger("paper:pan",e,r,a)}},onevent:function(e){var t=e.currentTarget,n=t.getAttribute("event");if(n){var i=this.findView(t);if(i){if(e=$e(e),this.guard(e,i))return;var r=this.snapToGrid(e.clientX,e.clientY);i.onevent(e,n,r.x,r.y)}}},magnetEvent:function(e,t){var n=e.currentTarget,i=n.getAttribute("magnet");if(i){var r=this.findView(n);if(r){if(e=$e(e),this.guard(e,r))return;var a=this.snapToGrid(e.clientX,e.clientY);t.call(this,r,e,n,a.x,a.y)}}},onmagnet:function(e){if(e.button===2){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const t=Ee.Event(e.originalEvent,{type:"contextmenu",data:e.data,currentTarget:e.currentTarget});this.magnetContextMenuTrigger(t),t.isPropagationStopped()&&e.stopPropagation()}else this.magnetEvent(e,function(t,n,i,r,a){t.onmagnet(n,r,a)})},magnetpointerdblclick:function(e){this.magnetEvent(e,function(t,n,i,r,a){t.magnetpointerdblclick(n,i,r,a)})},magnetcontextmenu:function(e){if(this.options.preventContextMenu&&e.preventDefault(),this.magnetContextMenuFired){this.magnetContextMenuFired=!1;return}this.magnetContextMenuTrigger(e)},magnetContextMenuTrigger:function(e){this.magnetEvent(e,function(t,n,i,r,a){t.magnetcontextmenu(n,i,r,a)})},onlabel:function(e){var t=e.currentTarget,n=this.findView(t);if(n){if(e=$e(e),this.guard(e,n))return;var i=this.snapToGrid(e.clientX,e.clientY);n.onlabel(e,i.x,i.y)}},getPointerArgs(e){const t=$e(e),{x:n,y:i}=this.snapToGrid(t.clientX,t.clientY);return[t,n,i]},delegateDragEvents:function(e,t){t||(t={}),this.eventData({data:t},{sourceView:e||null,mousemoved:0}),this.delegateDocumentEvents(null,t)},guard:function(e,t){if(e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t))return!0;if(e.data&&e.data.guarded!==void 0)return e.data.guarded;const{target:n}=e;return this.GUARDED_TAG_NAMES.includes(n.tagName)?!0:!(t&&t.model&&t.model instanceof Zt||this.svg===n||this.el===n||Ee.contains(this.svg,n))},setGridSize:function(e){const{options:t}=this;return t.gridSize=e,t.drawGrid&&!t.drawGridSize&&this.drawGrid(),this},clearGrid:function(){return this.$grid&&this.$grid.css("backgroundImage","none"),this},_getGridRefs:function(){return this._gridCache||(this._gridCache={root:R("svg",{width:"100%",height:"100%"},R("defs")),patterns:{},add:function(e,t){R(this.root.node.childNodes[0]).append(t),this.patterns[e]=t,this.root.append(R("rect",{width:"100%",height:"100%",fill:"url(#"+e+")"}))},get:function(e){return this.patterns[e]},exist:function(e){return this.patterns[e]!==void 0}}),this._gridCache},setGrid:function(e){this.clearGrid(),this._gridCache=null,this._gridSettings=[];var t=Array.isArray(e)?e:[e||{}];return t.forEach(function(n){this._gridSettings.push.apply(this._gridSettings,this._resolveDrawGridOption(n))},this),this},_resolveDrawGridOption:function(e){var t=this.constructor.gridPatterns;if(mt(e)&&Array.isArray(t[e]))return t[e].map(function(l){return ce({},l)});var n=e||{args:[{}]},i=Array.isArray(n),r=n.name;if(!i&&!r&&!n.markup&&(r="dot"),r&&Array.isArray(t[r])){var a=t[r].map(function(l){return ce({},l)}),s=Array.isArray(n.args)?n.args:[n.args||{}];Ct(s[0],dn(e,"args"));for(var o=0;o<s.length;o++)a[o]&&ce(a[o],s[o]);return a}return i?n:[n]},drawGrid:function(e){const t=this.options.drawGridSize||this.options.gridSize;if(t<=1)return this.clearGrid();var n=Array.isArray(e)?e:[e],i=this.matrix(),r=this._getGridRefs();this._gridSettings.forEach(function(s,o){var l="pattern_"+o,c=Fe(s,n[o],{sx:i.a||1,sy:i.d||1,ox:i.e||0,oy:i.f||0});c.width=t*(i.a||1)*(c.scaleFactor||1),c.height=t*(i.d||1)*(c.scaleFactor||1),r.exist(l)||r.add(l,R("pattern",{id:l,patternUnits:"userSpaceOnUse"},R(c.markup)));var u=r.get(l);ze(c.update)&&c.update(u.node.childNodes[0],c);var d=c.ox%c.width;d<0&&(d+=c.width);var f=c.oy%c.height;f<0&&(f+=c.height),u.attr({x:d,y:f,width:c.width,height:c.height})});var a=new XMLSerializer().serializeToString(r.root.node);return a="url(data:image/svg+xml;base64,"+btoa(a)+")",this.$grid.css("backgroundImage",a),this},updateBackgroundImage:function(e){e=e||{};var t=e.position||"center",n=e.size||"auto auto",i=this.scale(),r=this.translate();if(je(t)){var a=r.tx+i.sx*(t.x||0),s=r.ty+i.sy*(t.y||0);t=a+"px "+s+"px"}je(n)&&(n=new he(n).scale(i.sx,i.sy),n=n.width+"px "+n.height+"px"),this.$background.css({backgroundSize:n,backgroundPosition:t})},drawBackgroundImage:function(e,t){if(!(e instanceof HTMLImageElement)){this.$background.css("backgroundImage","");return}if(!(!this._background||this._background.id!==t.id)){t=t||{};var n,i=t.size,r=t.repeat||"no-repeat",a=t.opacity||1,s=Math.abs(t.quality)||1,o=this.constructor.backgroundPatterns[Co(r)];if(ze(o)){e.width*=s,e.height*=s;var l=o(e,t);if(!(l instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=l.toDataURL("image/png"),r="repeat",je(i)?(i.width*=l.width/e.width,i.height*=l.height/e.height):i===void 0&&(t.size={width:l.width/s,height:l.height/s})}else n=e.src,i===void 0&&(t.size={width:e.width,height:e.height});this.$background.css({opacity:a,backgroundRepeat:r,backgroundImage:"url("+n+")"}),this.updateBackgroundImage(t)}},updateBackgroundColor:function(e){this.$el.css("backgroundColor",e||"")},drawBackground:function(e){if(e=e||{},this.updateBackgroundColor(e.color),e.image){e=this._background=At(e),Ka(e);var t=document.createElement("img");t.onload=this.drawBackgroundImage.bind(this,t,e),t.src=e.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(e){this.options.interactive=e,Pt(this._views,"setInteractivity",e)},isDefined:function(e){return!!this.svg.getElementById(e)},defineFilter:function(e){if(!je(e))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var t=e.id,n=e.name;if(t||(t=n+this.svg.id+ni(JSON.stringify(e))),!this.isDefined(t)){var i=yo,r=i[n]&&i[n](e.args||{});if(!r)throw new Error("Non-existing filter "+n);var a=ce({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3},e.attrs,{id:t});R(r,a).appendTo(this.defs)}return t},defineGradient:function(e){if(!je(e))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:t,defs:n}=this,{type:i,id:r=i+t.id+ni(JSON.stringify(e)),stops:a,attrs:s={}}=e;if(this.isDefined(r))return r;const o=ve(a).map(({offset:c,color:u,opacity:d})=>R("stop").attr({offset:c,"stop-color":u,"stop-opacity":Number.isFinite(d)?d:1})),l=R(i,s,o);return l.id=r,l.appendTo(n),r},definePattern:function(e){if(!je(e))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:t,defs:n}=this,{id:i=t.id+ni(JSON.stringify(e)),markup:r,attrs:a={}}=e;if(!r)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(i))return i;const s=R("pattern",{patternUnits:"userSpaceOnUse"});if(s.id=i,s.attr(a),typeof r=="string")s.append(R(r));else{const{fragment:o}=sr(r);s.append(o)}return s.appendTo(n),i},defineMarker:function(e){if(!je(e))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:t,defs:n}=this,{id:i=t.id+ni(JSON.stringify(e)),markup:r,attrs:a={},markerUnits:s="userSpaceOnUse"}=e;if(this.isDefined(i))return i;const o=R("marker",{orient:"auto",overflow:"visible",markerUnits:s});o.id=i,o.attr(a);let l;if(r){let d;if(typeof r=="string")d=R(r),d=Array.isArray(d)?d:[d];else{const{fragment:f}=sr(r);d=R(f).children()}d.length>1?l=R("g").append(d):l=d[0]}else{const{type:d="path"}=e;l=R(d)}const c=dn(e,"type","id","markup","attrs","markerUnits");return Object.keys(c).forEach(d=>{const f=c[d],h=l.attr(d);if(h==null)l.attr(d,f);else switch(d){case"transform":l.attr(d,f+" "+h);break}}),l.appendTo(o),o.appendTo(n),i}},{sorting:Cn,Layers:bt,backgroundPatterns:{flipXy:function(e){var t=document.createElement("canvas"),n=e.width,i=e.height;t.width=2*n,t.height=2*i;var r=t.getContext("2d");return r.drawImage(e,0,0,n,i),r.setTransform(-1,0,0,-1,t.width,t.height),r.drawImage(e,0,0,n,i),r.setTransform(-1,0,0,1,t.width,0),r.drawImage(e,0,0,n,i),r.setTransform(1,0,0,-1,0,t.height),r.drawImage(e,0,0,n,i),t},flipX:function(e){var t=document.createElement("canvas"),n=e.width,i=e.height;t.width=n*2,t.height=i;var r=t.getContext("2d");return r.drawImage(e,0,0,n,i),r.translate(2*n,0),r.scale(-1,1),r.drawImage(e,0,0,n,i),t},flipY:function(e){var t=document.createElement("canvas"),n=e.width,i=e.height;t.width=n,t.height=i*2;var r=t.getContext("2d");return r.drawImage(e,0,0,n,i),r.translate(0,2*i),r.scale(1,-1),r.drawImage(e,0,0,n,i),t},watermark:function(e,t){t=t||{};var n=e.width,i=e.height,r=document.createElement("canvas");r.width=n*3,r.height=i*3;for(var a=r.getContext("2d"),s=ht(t.watermarkAngle)?-t.watermarkAngle:-20,o=xn(s),l=r.width/4,c=r.height/4,u=0;u<4;u++)for(var d=0;d<4;d++)(u+d)%2>0&&(a.setTransform(1,0,0,1,(2*u-1)*l,(2*d-1)*c),a.rotate(o),a.drawImage(e,-n/2,-i/2,n,i));return r}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){R(e).attr({width:t.thickness*t.sx,height:t.thickness*t.sy,fill:t.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",update:function(e,t){var n=t.sx<=1?t.thickness*t.sx:t.thickness;R(e).attr({width:n,height:n,fill:t.color})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var n,i=t.width,r=t.height,a=t.thickness;i-a>=0&&r-a>=0?n=["M",i,0,"H0 M0 0 V0",r].join(" "):n="M 0 0 0 0",R(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",update:function(e,t){var n,i=t.width,r=t.height,a=t.thickness;i-a>=0&&r-a>=0?n=["M",i,0,"H0 M0 0 V0",r].join(" "):n="M 0 0 0 0",R(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",update:function(e,t){var n,i=t.width,r=t.height,a=t.thickness;i-a>=0&&r-a>=0?n=["M",i,0,"H0 M0 0 V0",r].join(" "):n="M 0 0 0 0",R(e).attr({d:n,stroke:t.color,"stroke-width":t.thickness})}}]}}),Ra=cn.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(e){e=ce(this.options,e);var t=e.tools;if(!Array.isArray(t))return this;var n=e.relatedView;if(!(n instanceof me))return this;for(var i=this.tools=[],r=0,a=t.length;r<a;r++){var s=t[r];s instanceof es&&(s.configure(n,this),this.vel.append(s.el),i.push(s))}return this.isRendered=!1,n.requestUpdate(n.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(e){e||(e={});var t=this.tools;if(!t)return this;for(var n=this.isRendered,i=0,r=t.length;i<r;i++){var a=t[i];n?e.tool!==a.cid&&a.isVisible()&&a.update():a.render()}return this.isMounted()||this.mount(),n||(this.blurTool(),this.isRendered=!0),this},focusTool:function(e){var t=this.tools;if(!t)return this;for(var n=0,i=t.length;n<i;n++){var r=t[n];e===r?r.show():r.hide()}return this},blurTool:function(e){var t=this.tools;if(!t)return this;for(var n=0,i=t.length;n<i;n++){var r=t[n];r!==e&&!r.isVisible()&&(r.show(),r.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null)},onRemove:function(){var e=this.tools;if(!e)return this;for(var t=0,n=e.length;t<n;t++)e[t].remove();this.tools=null},mount:function(){const{options:e,el:t}=this,{relatedView:n,layer:i=bt.TOOLS,z:r}=e;return n&&(i?n.paper.getLayerView(i).insertSortedNode(t,r):n.el.appendChild(t)),this}}),eo={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(e,t){return this._tests[e]=t},test:function(e){var t=this._tests[e];if(!t)throw new Error('Test not defined ("'+e+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[e];if(typeof n<"u")return n;try{n=t()}catch{n=!1}return this._results[e]=n,n}},we=Ge.define("basic.Generic",{attrs:{".":{fill:"#ffffff",stroke:"none"}}}),mh=we.define("basic.Rect",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>'}),ph=We.extend({presentationAttributes:We.addPresentationAttributes({attrs:["SCALE"]}),confirmUpdate:function(){var e=We.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(e,"SCALE")&&(this.resize(),e=this.removeFlag(e,"SCALE")),e}}),Ih=we.define("basic.Text",{attrs:{text:{"font-size":18,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><text/></g></g>'}),jr=we.define("basic.Circle",{size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>'}),vh=we.define("basic.Ellipse",{size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>'}),Ah=we.define("basic.Polygon",{size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),Ch=we.define("basic.Polyline",{size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>'}),bh=we.define("basic.Image",{attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>'}),to=we.define("basic.Path",{size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},{markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>'}),yh=to.define("basic.Rhombus",{attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"ref-dy":null,"y-alignment":"middle"}}}),Ni=eo.test("svgforeignobject"),wh=we.define("basic.TextBlock",{attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},{markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',Ni?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),we.prototype.initialize.apply(this,arguments)},updateSize:function(e,t){this.attr({".fobj":ce({},t),div:{style:ce({},t)}})},updateContent:function(e,t){Ni?this.attr({".content":{html:wo(t)}}):this.attr({".content":{text:t}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),Mh=We.extend({presentationAttributes:Ni?We.prototype.presentationAttributes:We.addPresentationAttributes({content:["CONTENT"],size:["CONTENT"]}),initFlag:["RENDER","CONTENT"],confirmUpdate:function(){var e=We.prototype.confirmUpdate.apply(this,arguments);return this.hasFlag(e,"CONTENT")&&(this.updateContent(this.model),e=this.removeFlag(e,"CONTENT")),e},update:function(e,t){var n=this.model;if(Ni)We.prototype.update.call(this,n,t);else{var i=dn(t||n.get("attrs"),".content");We.prototype.update.call(this,n,i),(!t||Yt(t,".content"))&&this.updateContent(n,t)}},updateContent:function(e,t){var n=Fe({},(t||e.get("attrs"))[".content"]);n=dn(n,"text");var i=Fa(e.get("content"),e.get("size"),n,{svgDocument:this.paper.svg}),r=tr({},".content",n,"/");r[".content"].text=i,We.prototype.update.call(this,e,r)}}),Nh=Object.freeze(Object.defineProperty({__proto__:null,Circle:jr,Ellipse:vh,Generic:we,Image:bh,Path:to,Polygon:Ah,Polyline:Ch,Rect:mh,Rhombus:yh,Text:Ih,TextBlock:wh,TextBlockView:Mh,TextView:ph},Symbol.toStringTag,{value:"Module"})),kh=Ge.define("standard.Rectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Dh=Ge.define("standard.Circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}),xh=Ge.define("standard.Ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),Th=Ge.define("standard.Path",{attrs:{body:{refD:"M 0 0 L 10 0 10 10 0 10 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Sh=Ge.define("standard.Polygon",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),zh=Ge.define("standard.Polyline",{attrs:{body:{refPoints:"0 0 10 0 10 10 0 10 0 0",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Lh=Ge.define("standard.Image",{attrs:{image:{refWidth:"100%",refHeight:"100%"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Oh=Ge.define("standard.BorderedImage",{attrs:{border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#FFFFFF"},image:{refWidth:-1,refHeight:-1,x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Ph=Ge.define("standard.EmbeddedImage",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",refX:"30%",refX2:20,refY:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Bh=Ge.define("standard.InscribedImage",{attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#FFFFFF"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",refX:"50%",refY:"100%",refY2:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Zh=Ge.define("standard.HeaderedRectangle",{attrs:{body:{refWidth:"100%",refHeight:"100%",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{refWidth:"100%",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"50%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]});var Hi=10;const jh=Ge.define("standard.Cylinder",{attrs:{body:{lateralArea:Hi,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{refCx:"50%",cy:Hi,refRx:"50%",ry:Hi,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",refX:"50%",refY:"100%",refY2:15,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(e,t){if(e===void 0)return this.attr("body/lateralArea");var n=ut(e),i={lateralArea:e},r=n?{refCy:e,refRy:e,cy:null,ry:null}:{refCy:null,refRy:null,cy:e,ry:e};return this.attr({body:i,top:r},t)}},{attributes:{lateralArea:{set:function(e,t){var n=ut(e);n&&(e=parseFloat(e)/100);var i=t.x,r=t.y,a=t.width,s=t.height,o=a/2,l=n?s*e:e,c=R.KAPPA,u=c*o,d=c*(n?s*e:e),f=i,h=i+a/2,m=i+a,p=r+l,A=p-l,b=r+s-l,v=r+s,w=["M",f,p,"L",f,b,"C",i,b+d,h-u,v,h,v,"C",h+u,v,m,b+d,m,b,"L",m,p,"C",m,p-d,h+u,A,h,A,"C",h-u,A,f,p-d,f,p,"Z"];return{d:w.join(" ")}}}}});var Gh={tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]},Eh={tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}},Rh=eo.test("svgforeignobject")?Gh:Eh;const Yh=Ge.define("standard.TextBlock",{attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},Rh]},{attributes:{text:{set:function(e,t,n,i){if(n instanceof HTMLElement)n.textContent=e;else{var r=i.style||{},a={text:e,width:-5,height:"100%"},s=ce({textVerticalAnchor:"middle"},r);return Ps.textWrap.set.call(this,a,t,n,s),{fill:r.color||null}}},position:function(e,t,n){if(n instanceof SVGElement)return t.center()}}}}),no=Ke.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),_h=Ke.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),Wh=Ke.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none"}},{tagName:"path",selector:"line",attributes:{fill:"none"}}]}),Uh=Object.freeze(Object.defineProperty({__proto__:null,BorderedImage:Oh,Circle:Dh,Cylinder:jh,DoubleLink:_h,Ellipse:xh,EmbeddedImage:Ph,HeaderedRectangle:Zh,Image:Lh,InscribedImage:Bh,Link:no,Path:Th,Polygon:Sh,Polyline:zh,Rectangle:kh,ShadowLink:Wh,TextBlock:Yh},Symbol.toStringTag,{value:"Module"})),Gr=we.define("devs.Model",{inPorts:[],outPorts:[],size:{width:80,height:80},attrs:{".":{magnet:!1},".label":{text:"Model","ref-x":.5,"ref-y":10,"font-size":18,"text-anchor":"middle",fill:"#000"},".body":{"ref-width":"100%","ref-height":"100%",stroke:"#000"}},ports:{groups:{in:{position:{name:"left"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"left",args:{y:10}}}},out:{position:{name:"right"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"right",args:{y:10}}}}}}},{markup:'<g class="rotatable"><rect class="body"/><text class="label"/></g>',portMarkup:'<circle class="port-body"/>',portLabelMarkup:'<text class="port-label"/>',initialize:function(){we.prototype.initialize.apply(this,arguments),this.on("change:inPorts change:outPorts",this.updatePortItems,this),this.updatePortItems()},updatePortItems:function(e,t,n){var i=kn(this.get("inPorts")),r=Qa(kn(this.get("outPorts")),i),a=this.createPortItems("in",i),s=this.createPortItems("out",r);this.prop("ports/items",a.concat(s),ce({rewrite:!0},n))},createPortItem:function(e,t){return{id:t,group:e,attrs:{".port-label":{text:t}}}},createPortItems:function(e,t){return ve(t).map(this.createPortItem.bind(this,e))},_addGroupPort:function(e,t,n){var i=this.get(t);return this.set(t,Array.isArray(i)?i.concat(e):[e],n)},addOutPort:function(e,t){return this._addGroupPort(e,"outPorts",t)},addInPort:function(e,t){return this._addGroupPort(e,"inPorts",t)},_removeGroupPort:function(e,t,n){return this.set(t,er(this.get(t),e),n)},removeOutPort:function(e,t){return this._removeGroupPort(e,"outPorts",t)},removeInPort:function(e,t){return this._removeGroupPort(e,"inPorts",t)},_changeGroup:function(e,t,n){return this.prop("ports/groups/"+e,je(t)?t:{},n)},changeInGroup:function(e,t){return this._changeGroup("in",e,t)},changeOutGroup:function(e,t){return this._changeGroup("out",e,t)}}),Vh=Gr.define("devs.Atomic",{size:{width:80,height:80},attrs:{".label":{text:"Atomic"}}}),Xh=Gr.define("devs.Coupled",{size:{width:200,height:300},attrs:{".label":{text:"Coupled"}}}),Fh=Ke.define("devs.Link",{attrs:{".connection":{"stroke-width":2}}}),Hh=Object.freeze(Object.defineProperty({__proto__:null,Atomic:Vh,Coupled:Xh,Link:Fh,Model:Gr},Symbol.toStringTag,{value:"Module"})),Ti=we.define("logic.Gate",{size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},{operation:function(){return!0}}),Er=Ti.define("logic.IO",{size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>'}),Jh=Er.define("logic.Input",{attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,class:"output",port:"out"},text:{text:"input"}}}),Kh=Er.define("logic.Output",{attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive",class:"input",port:"in"},text:{text:"output"}}}),Rr=Ti.define("logic.Gate11",{attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>'}),fn=Ti.define("logic.Gate21",{attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},{markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>'}),$h=Rr.define("logic.Repeater",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(e){return e}}),Qh=Rr.define("logic.Not",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(e){return!e}}),qh=fn.define("logic.Or",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},{operation:function(e,t){return e||t}}),ef=fn.define("logic.And",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(e,t){return e&&t}}),tf=fn.define("logic.Nor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(e,t){return!(e||t)}}),nf=fn.define("logic.Nand",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(e,t){return!(e&&t)}}),rf=fn.define("logic.Xor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},{operation:function(e,t){return(!e||t)&&(e||!t)}}),af=fn.define("logic.Xnor",{attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},{operation:function(e,t){return(!e||!t)&&(e||t)}}),sf=Ke.define("logic.Wire",{attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},{arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join("")}),of=Object.freeze(Object.defineProperty({__proto__:null,And:ef,Gate:Ti,Gate11:Rr,Gate21:fn,IO:Er,Input:Jh,Nand:nf,Nor:tf,Not:Qh,Or:qh,Output:Kh,Repeater:$h,Wire:sf,Xnor:af,Xor:rf},Symbol.toStringTag,{value:"Module"})),lf=we.define("chess.KingWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>'}),cf=we.define("chess.KingBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),uf=we.define("chess.QueenWhite",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>'}),df=we.define("chess.QueenBlack",{size:{width:42,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>'}),gf=we.define("chess.RookWhite",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),hf=we.define("chess.RookBlack",{size:{width:32,height:34}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>'}),ff=we.define("chess.BishopWhite",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>'}),mf=we.define("chess.BishopBlack",{size:{width:38,height:38}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>'}),pf=we.define("chess.KnightWhite",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>'}),If=we.define("chess.KnightBlack",{size:{width:38,height:37}},{markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>'}),vf=we.define("chess.PawnWhite",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'}),Af=we.define("chess.PawnBlack",{size:{width:28,height:33}},{markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>'}),Cf=Object.freeze(Object.defineProperty({__proto__:null,BishopBlack:mf,BishopWhite:ff,KingBlack:cf,KingWhite:lf,KnightBlack:If,KnightWhite:pf,PawnBlack:Af,PawnWhite:vf,QueenBlack:df,QueenWhite:uf,RookBlack:hf,RookWhite:gf},Symbol.toStringTag,{value:"Module"})),io=Ge.define("erd.Entity",{size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),bf=io.define("erd.WeakEntity",{attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}}),ro=Ge.define("erd.Relationship",{size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>'}),yf=ro.define("erd.IdentifyingRelationship",{attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}}),ei=Ge.define("erd.Attribute",{size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>'}),wf=ei.define("erd.Multivalued",{attrs:{".inner":{display:"block"},text:{text:"multivalued"}}}),Mf=ei.define("erd.Derived",{attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}}),Nf=ei.define("erd.Key",{attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}}),kf=ei.define("erd.Normal",{attrs:{text:{text:"Normal"}}}),Df=Ge.define("erd.ISA",{type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,"ref-x":.5,"ref-y":.3,"y-alignment":"middle","text-anchor":"middle"}}},{markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>'}),xf=Ke.define("erd.Line",{},{cardinality:function(e){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:e}}}])}}),Tf=Object.freeze(Object.defineProperty({__proto__:null,Attribute:ei,Derived:Mf,Entity:io,ISA:Df,IdentifyingRelationship:yf,Key:Nf,Line:xf,Multivalued:wf,Normal:kf,Relationship:ro,WeakEntity:bf},Symbol.toStringTag,{value:"Module"})),Sf=jr.define("fsa.State",{attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}}),zf=Ge.define("fsa.StartState",{size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>'}),Lf=Ge.define("fsa.EndState",{size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),Of=Ke.define("fsa.Arrow",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0}),Pf=Object.freeze(Object.defineProperty({__proto__:null,Arrow:Of,EndState:Lf,StartState:zf,State:Sf},Symbol.toStringTag,{value:"Module"})),Bf=Ge.define("org.Member",{size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>'}),Zf=Ke.define("org.Arrow",{source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1}),jf=Object.freeze(Object.defineProperty({__proto__:null,Arrow:Zf,Member:Bf},Symbol.toStringTag,{value:"Module"})),Gf=we.define("pn.Place",{size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>'}),Ef=We.extend({presentationAttributes:We.addPresentationAttributes({tokens:["TOKENS"]}),initFlag:We.prototype.initFlag.concat(["TOKENS"]),confirmUpdate:function(...e){let t=We.prototype.confirmUpdate.call(this,...e);return this.hasFlag(t,"TOKENS")&&(this.renderTokens(),this.update(),t=this.removeFlag(t,"TOKENS")),t},renderTokens:function(){const e=this.vel.findOne(".tokens").empty();["one","two","three","alot"].forEach(function(n){e.removeClass(n)});var t=this.model.get("tokens");if(t)switch(t){case 1:e.addClass("one"),e.append(R("circle"));break;case 2:e.addClass("two"),e.append([R("circle"),R("circle")]);break;case 3:e.addClass("three"),e.append([R("circle"),R("circle"),R("circle")]);break;default:e.addClass("alot"),e.append(R("text").text(t+""));break}}}),Rf=we.define("pn.Transition",{size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},{markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>'}),Yf=Ke.define("pn.Link",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}}),_f=Object.freeze(Object.defineProperty({__proto__:null,Link:Yf,Place:Gf,PlaceView:Ef,Transition:Rf},Symbol.toStringTag,{value:"Module"})),Yr=we.define("uml.Class",{attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),we.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var e=this.get("attrs"),t=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],n=0;t.forEach(function(i){var r=Array.isArray(i.text)?i.text:[i.text],a=r.length*20+20;e[".uml-class-"+i.type+"-text"].text=r.join(`
`),e[".uml-class-"+i.type+"-rect"].height=a,e[".uml-class-"+i.type+"-rect"].transform="translate(0,"+n+")",n+=a})}}),_r=We.extend({initialize:function(){We.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),Wf=Yr.define("uml.Abstract",{attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},{getClassName:function(){return["<<Abstract>>",this.get("name")]}}),Uf=_r,Vf=Yr.define("uml.Interface",{attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},{getClassName:function(){return["<<Interface>>",this.get("name")]}}),Xf=_r,Ff=Ke.define("uml.Generalization",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}),Hf=Ke.define("uml.Implementation",{attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}),Jf=Ke.define("uml.Aggregation",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}),Kf=Ke.define("uml.Composition",{attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}),$f=Ke.define("uml.Association"),Qf=we.define("uml.State",{attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},{markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),we.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join(`
`))},updatePath:function(){var e="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",e,{silent:!0})}}),qf=jr.define("uml.StartState",{type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}}),em=we.define("uml.EndState",{size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},{markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>'}),tm=Ke.define("uml.Transition",{attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}}),nm=Object.freeze(Object.defineProperty({__proto__:null,Abstract:Wf,AbstractView:Uf,Aggregation:Jf,Association:$f,Class:Yr,ClassView:_r,Composition:Kf,EndState:em,Generalization:Ff,Implementation:Hf,Interface:Vf,InterfaceView:Xf,StartState:qf,State:Qf,Transition:tm},Symbol.toStringTag,{value:"Module"})),im=Object.freeze(Object.defineProperty({__proto__:null,basic:Nh,chess:Cf,devs:Hh,erd:Tf,fsa:Pf,logic:of,org:jf,pn:_f,standard:Uh,uml:nm},Symbol.toStringTag,{value:"Module"}));function rm(e,t){const{model:n}=e;return t?n.getBBox():n.isLink()?e.getConnection().bbox():e.getNodeUnrotatedBBox(e.el)}const Ya=es.extend({name:"boundary",tagName:"rect",options:{padding:10,useModelGeometry:!1},attributes:{fill:"none",stroke:"#33334F","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"},onRender:function(){this.update()},update:function(){const{relatedView:e,options:t,vel:n}=this,{useModelGeometry:i,rotate:r}=t,a=tn(t.padding);let s=rm(e,i).moveAndExpand({x:-a.left,y:-a.top,width:a.left+a.right,height:a.top+a.bottom});var o=e.model;if(o.isElement()){var l=o.angle();if(l)if(r){var c=o.getBBox().center();n.rotate(l,c.x,c.y,{absolute:!0})}else s=s.bbox(l)}return n.attr(s.toJSON()),this}});function am(){const e=Ge.define("bleuon.Path",{attrs:{body:{width:"calc(w)",height:"calc(h)",fill:"#fcfcfc",stroke:"#333333",strokeWidth:1.5,cursor:"grab","stroke-dasharray":"none"},label:{text:"",textVerticalAnchor:"middle",textAnchor:"middle",fill:"#333333",fontWeight:"normal",fontSize:18,fontFamily:"微软雅黑",refX:"50%",refY:"50%"}}},{updateLabelText:Mo,addClickedTools(n){const i=new Ya,r=new No,a=new ko;n.addTools(new Ra({name:"path-clicked-tools",tools:[i,r,a]}))},removeClickedTools(n){n.hasTools("path-clicked-tools")&&n.removeTools()}}),t=no.define("bleuon.Link",{router:{name:"manhattan"},attrs:{line:{fill:"none",stroke:"#333333",strokeWidth:2}}},{updateLabelText(n,i){var f,h;const{model:r}=n,a=r.label(0),s=((h=(f=a==null?void 0:a.attrs)==null?void 0:f.text)==null?void 0:h.text)||"",o=n.getBBox(),l=o.x+o.width/2,c=o.y+o.height/2,u=o.width/3;i.value=s,i.style.top=c-10+"px",i.style.left=l-u/2+"px",i.style.width=u+"px",i.style.height="20px",i.style.display="block";function d(m){if(m.key==="Enter"){let p=i.value;r.label(0,{position:.5,attrs:{text:{text:p}}}),i.style.display="none",i.removeEventListener("keydown",d)}}i.value="",i.addEventListener("keydown",d),i.focus()},addClickedTools(n){const i=new Ya;n.addTools(new Ra({name:"link-tools",tools:[i]}))},removeClickedTools(n){n.hasTools("link-tools")&&n.removeTools()}});return Object.assign(im,{bleuon:{Path:e,Link:t}})}function Yp(e){const t=am(),n=new Lr({},{cellNamespace:t});return{paper:new fh({el:document.getElementById(e.el),model:n,height:e.height,width:e.width,gridSize:e.gridSize,drawGrid:e.drawGrid,background:{color:e.bgColor},snapLabels:!0,snapLinks:{radius:5},interactive:{linkMove:!1,labelMove:!0,arrowheadMove:!1,vertexMove:!1,vertexAdd:!1,vertexRemove:!1,useLinkTools:!1},cellViewNamespace:t,defaultLink:()=>new(void 0).Link,defaultConnectionPoint:{name:"boundary"},validateConnection:function(r,a,s,o,l,c){return e.isPreventLinkFromInputPorts&&a&&a.getAttribute("port-group")==="in"||e.isPreventLinkFromOutputToInputWithinOneElement&&r===s?!1:e.isPreventLinkToOutputPorts?o&&o.getAttribute("port-group")==="in":!0}}),graph:n}}function Wr(e,t){return e.isLink()?t="line/"+t:t="body/"+t,t}function sm(e,t){var n;(n=t==null?void 0:t.options)!=null&&n.defaultRouter&&(t.options.defaultRouter=e.value)}function om(e,t){var n;(n=t==null?void 0:t.options)!=null&&n.defaultConnector&&(t.options.defaultConnector=e.value)}function lm(e){const t=e.model,n=t.isLink();let i="normal";n?i=t.label(0).attrs.text.fontWeight||"normal":i=t.attr("label/fontWeight"),i==="bold"?i="normal":i="bold",n?t.label(0,{attrs:{text:{fontWeight:i}}}):t.attr("label/fontWeight",i)}function cm(e){const t=e.model,n=t.isLink();let i="normal";n?i=t.label(0).attrs.text.fontStyle||"normal":i=t.attr("label/fontStyle"),i==="italic"?i="normal":i="italic",n?t.label(0,{attrs:{text:{fontStyle:i}}}):t.attr("label/fontStyle",i)}function um(e){const t=e.model,n=t.isLink();let i="normal";n?i=t.label(0).attrs.text.textDecoration||"normal":i=t.attr("label/textDecoration"),i==="underline"?i="normal":i="underline",n?t.label(0,{attrs:{text:{textDecoration:i}}}):t.attr("label/textDecoration",i)}function dm(e,t){const n=e.model;n.isLink()?n.label(0,{attrs:{text:{fill:t}}}):n.attr("label/fill",t)}function gm(e,t){const n=e.model;n.isLink()?n.label(0,{attrs:{text:{fontSize:t}}}):n.attr("label/fontSize",t)}function hm(e,t){const n=e.model;n.isLink()?n.label(0,{attrs:{text:{fontFamily:t}}}):n.attr("label/fontFamily",t)}function fm(e,t){const n=e.model,i=Wr(n,"strokeWidth");n.attr(i,t)}function mm(e,t){const n=e.model,i=Wr(n,"strokeDasharray");let r="none";t==="dashed-dotted"?r="5,2,1,2":t==="dotted"?r="1,2":t==="dashed"?r="5,2":r="none",n.attr(i,r)}function pm(e,t){e.model.attr("body/fill",t)}function Im(e,t){const n=e.model,i=Wr(n,"stroke");n.attr(i,t)}function vm(e){setTimeout(()=>{e.hide()},200)}function Am(e){setTimeout(()=>{e.show()},100)}const it=Object.freeze(Object.defineProperty({__proto__:null,changeBackground:pm,changeBorderStyle:mm,changeConnectorConfig:om,changeLinkColor:Im,changeRouterConfig:sm,changeStrokeWidth:fm,changeTextBold:lm,changeTextColor:dm,changeTextFamily:hm,changeTextItalic:cm,changeTextSize:gm,changeTextUnderline:um,closeColorPicker:vm,openColorPicker:Am},Symbol.toStringTag,{value:"Module"})),Cm=[{value:"straight",label:"straight"},{value:"jumpover",label:"jumpover"},{value:"normal",label:"normal"},{value:"rounded",label:"rounded"},{value:"smooth",label:"smooth"},{value:"curve",label:"curve"}],Ji=ee({name:"normal"}),bm=[{value:"manhattan",label:"manhattan"},{value:"metro",label:"metro"},{value:"normal",label:"normal"},{value:"orthogonal",label:"orthogonal"},{value:"rightAngle",label:"rightAngle"}],Ki=ee({name:"normal"}),ki=ee({view:null,model:null}),rt=ee(null),di=ee(""),_a=ee(14),ym=[{value:"微软雅黑",label:"微软雅黑"},{value:"Arial",label:"Arial"},{value:"Bahnschrift",label:"Bahnschrift"},{value:"BIZ UDGothic",label:"BIZ UDGothic"},{value:"Calibri",label:"Calibri"},{value:"Cambria",label:"Cambria"},{value:"Candara",label:"Candara"},{value:"Comic Sans MS",label:"Comic Sans MS"},{value:"Consolas",label:"Consolas"},{value:"Constantia",label:"Constantia"},{value:"Corbel",label:"Corbel"}],Wa=ee("微软雅黑"),wm=[{value:0,label:"0px"},{value:.5,label:"0.5px"},{value:1,label:"1px"},{value:1.5,label:"1.5px"},{value:2,label:"2px"},{value:3,label:"3px"},{value:4,label:"4px"},{value:5,label:"5px"},{value:6,label:"6px"},{value:8,label:"8px"},{value:10,label:"10px"}],Ua=ee(1.5),Va=ee("white"),Xa=ee("solid"),at=ee(1),$i=Q({get(){return Number((at.value*100).toFixed(0))},set(e){at.value=e/100}}),Qi=ee(0),qi=ee(0),Si=ee(!1),zi=ee(!1);function Mm(e,t){var n;(n=t.value.model)==null||n.removeClickedTools(t.value.view),e.model.addClickedTools(e),t.value={model:e.model,view:e}}function Nm(e){var t;(t=e.value.model)==null||t.removeClickedTools(e.value.view),e.value={model:null,view:null}}function km(e,t){var n;(n=t.value.model)==null||n.removeClickedTools(t.value.view),e.model.addClickedTools(e),t.value={model:e.model,view:e}}function Dm(e){var t;(t=e.value.model)==null||t.removeClickedTools(e.value.view),e.value={model:null,view:null}}function _p(){zi.value=!1,Si.value=!1,Nm(ki),Dm(ki)}function Wp(e){zi.value=!0,Si.value=!1,rt.value=e,km(e,ki)}function Up(e){Si.value=!0,zi.value=!1,rt.value=e,Mm(e,ki)}function Vp(e,t){e.preventDefault();const n=e.originalEvent.deltaY,i=30,r=.1;e.ctrlKey?(n>0?(at.value-=r,at.value<.2&&(at.value=.2)):(at.value+=r,at.value>2&&(at.value=2)),t.scale(at.value,at.value)):e.shiftKey?n>0?Qi.value+=i:Qi.value-=i:n>0?qi.value-=i:qi.value+=i,t.setOrigin(Qi.value,qi.value)}function Xp(e){document.addEventListener("keydown",t=>{var n;t.ctrlKey&&t.key==="s"&&(t.preventDefault(),e.ctrlS()),(t.key==="Backspace"||t.key==="Delete")&&(n=rt.value)!=null&&n.model&&(zi.value=!1,Si.value=!1,rt.value.model.remove())})}function Fp(e,t){rt.value=null;const{model:n}=e;n!=null&&n.updateLabelText&&n.updateLabelText(e,t)}const lt=e=>(Uo("data-v-526c8fff"),e=e(),Vo(),e),xm={class:"f-c-s"},Tm={class:"tools__text"},Sm=lt(()=>B("div",{class:"tools__title"},[B("div",{class:"i-tabler-typography mr-1"}),qe(" 编辑图形文本 ")],-1)),zm={class:"tools__items f-c-c"},Lm={class:"font-tool"},Om={class:"bold-tool ml-2"},Pm=lt(()=>B("div",{class:"i-tabler-bold"},null,-1)),Bm={class:"italic-tool ml-2"},Zm=lt(()=>B("div",{class:"i-tabler-italic"},null,-1)),jm={class:"underline-tool ml-2"},Gm=lt(()=>B("div",{class:"i-tabler-underline"},null,-1)),Em={class:"font-color-tool ml-2"},Rm=lt(()=>B("div",{class:"i-tabler-text-color"},null,-1)),Ym={class:"hidden"},_m={class:"font-size-tool ml-2"},Wm=lt(()=>B("div",{class:"mx-4 left-divider"},null,-1)),Um={class:"tools__cellview"},Vm=lt(()=>B("div",{class:"tools__title"},[B("div",{class:"i-tabler-circles mr-1"}),qe(" 编辑图形样式 ")],-1)),Xm={class:"tools__items f-c-c"},Fm={class:"border-bold-tool"},Hm={class:"border-style-tool ml-2"},Jm=lt(()=>B("img",{class:"object-cover w-100% h-100%",src:"https://www.processon.com/v5_editor/compile/zhixian.ee583027.png"},null,-1)),Km=lt(()=>B("img",{class:"object-cover w-100% h-100%",src:"https://www.processon.com/v5_editor/compile/xuxian.a1d63600.png"},null,-1)),$m=lt(()=>B("img",{class:"object-cover w-100% h-100%",src:"https://www.processon.com/v5_editor/compile/dianxian.5180ceef.png"},null,-1)),Qm=lt(()=>B("img",{class:"object-cover w-100% h-100%",src:"https://www.processon.com/v5_editor/compile/dianhuaxian.ab5e6f5b.png"},null,-1)),qm={class:"shape-bg-tool ml-2"},ep=lt(()=>B("div",{class:"i-tabler-paint"},null,-1)),tp={class:"hidden"},np={class:"link-color-tool ml-2"},ip=lt(()=>B("div",{class:"i-tabler-pencil-minus"},null,-1)),rp={class:"hidden"},ap=lt(()=>B("div",{class:"mx-4 left-divider"},null,-1)),sp={class:"tools__config"},op=lt(()=>B("div",{class:"tools__title"},[B("div",{class:"i-tabler-world mr-1"}),qe(" 全局设置 ")],-1)),lp={class:"tools__items f-c-c"},cp={class:"router-config-tool"},up={class:"link-config-tool ml-2"},dp=Se({__name:"HeaderToolsBottom",props:{isClickedElement:{type:Boolean,default:!1},isClickedLink:{type:Boolean,default:!1}},setup(e){const t=dt(Mr),n=ee(),i=ee(),r=ee();return(a,s)=>{const o=al,l=sl,c=$n,u=nn,d=gc,f=Ru;return _(),ne("div",xm,[B("div",Tm,[Sm,B("div",zm,[B("div",Lm,[V(c,{content:"字体",placement:"bottom"},{default:te(()=>[V(l,{disabled:!e.isClickedElement&&!e.isClickedLink,style:{width:"100px"},onChange:s[0]||(s[0]=h=>g(it).changeTextFamily(rt.value,h)),modelValue:Wa.value,"onUpdate:modelValue":s[1]||(s[1]=h=>Wa.value=h),placeholder:"请选择字体"},{default:te(()=>[(_(!0),ne(Ze,null,Je(ym,h=>(_(),be(o,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["disabled","modelValue"])]),_:1})]),B("div",Om,[V(c,{content:"加粗",placement:"bottom"},{default:te(()=>[V(u,{disabled:!e.isClickedElement&&!e.isClickedLink,text:"",bg:"",onClick:s[2]||(s[2]=h=>g(it).changeTextBold(rt.value))},{icon:te(()=>[Pm]),_:1},8,["disabled"])]),_:1})]),B("div",Bm,[V(c,{content:"斜体",placement:"bottom"},{default:te(()=>[V(u,{disabled:!e.isClickedElement&&!e.isClickedLink,text:"",bg:"",onClick:s[3]||(s[3]=h=>g(it).changeTextItalic(rt.value))},{icon:te(()=>[Zm]),_:1},8,["disabled"])]),_:1})]),B("div",jm,[V(c,{content:"下划线",placement:"bottom"},{default:te(()=>[V(u,{disabled:!e.isClickedElement&&!e.isClickedLink,text:"",bg:"",onClick:s[4]||(s[4]=h=>g(it).changeTextUnderline(rt.value))},{icon:te(()=>[Gm]),_:1},8,["disabled"])]),_:1})]),B("div",Em,[V(c,{content:"字体颜色",placement:"bottom"},{default:te(()=>[V(u,{disabled:!e.isClickedElement&&!e.isClickedLink,text:"",bg:"",onClick:s[5]||(s[5]=h=>g(it).openColorPicker(g(n)))},{icon:te(()=>[Rm]),_:1},8,["disabled"])]),_:1}),B("div",Ym,[V(d,{ref_key:"textColorPickerRef",ref:n,onChange:s[6]||(s[6]=h=>g(it).changeTextColor(rt.value,h)),modelValue:di.value,"onUpdate:modelValue":s[7]||(s[7]=h=>di.value=h)},null,8,["modelValue"])])]),B("div",_m,[V(c,{content:"字号(px)",placement:"bottom"},{default:te(()=>[V(f,{disabled:!e.isClickedElement&&!e.isClickedLink,style:{width:"85px"},modelValue:_a.value,"onUpdate:modelValue":s[8]||(s[8]=h=>_a.value=h),min:14,max:30,"controls-position":"right",onChange:s[9]||(s[9]=h=>g(it).changeTextSize(rt.value,h))},null,8,["disabled","modelValue"])]),_:1})])])]),Wm,B("div",Um,[Vm,B("div",Xm,[B("div",Fm,[V(c,{content:"连线粗细",placement:"bottom"},{default:te(()=>[V(l,{disabled:!e.isClickedElement&&!e.isClickedLink,style:{width:"85px"},onChange:s[10]||(s[10]=h=>g(it).changeStrokeWidth(rt.value,h)),modelValue:Ua.value,"onUpdate:modelValue":s[11]||(s[11]=h=>Ua.value=h),placeholder:"请选择连线粗细"},{default:te(()=>[(_(!0),ne(Ze,null,Je(wm,h=>(_(),be(o,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["disabled","modelValue"])]),_:1})]),B("div",Hm,[V(c,{content:"连线样式",placement:"bottom"},{default:te(()=>[V(l,{disabled:!e.isClickedElement&&!e.isClickedLink,style:{width:"130px"},onChange:s[12]||(s[12]=h=>g(it).changeBorderStyle(rt.value,h)),modelValue:Xa.value,"onUpdate:modelValue":s[13]||(s[13]=h=>Xa.value=h),placeholder:"请选择连线样式"},{default:te(()=>[V(o,{label:"实线",value:"solid"},{default:te(()=>[Jm]),_:1}),V(o,{label:"虚线",value:"dashed"},{default:te(()=>[Km]),_:1}),V(o,{label:"点线",value:"dotted"},{default:te(()=>[$m]),_:1}),V(o,{label:"虚线和点线",value:"dashed-dotted"},{default:te(()=>[Qm]),_:1})]),_:1},8,["disabled","modelValue"])]),_:1})]),B("div",qm,[V(c,{content:"图形背景色",placement:"bottom"},{default:te(()=>[V(u,{disabled:!e.isClickedElement,text:"",bg:"",onClick:s[14]||(s[14]=h=>g(it).openColorPicker(g(r)))},{icon:te(()=>[ep]),_:1},8,["disabled"])]),_:1}),B("div",tp,[V(d,{ref_key:"shapeBgColorPickerRef",ref:r,onChange:s[15]||(s[15]=h=>g(it).changeBackground(rt.value,h)),modelValue:Va.value,"onUpdate:modelValue":s[16]||(s[16]=h=>Va.value=h)},null,8,["modelValue"])])]),B("div",np,[V(c,{content:"连线颜色",placement:"bottom"},{default:te(()=>[V(u,{disabled:!e.isClickedElement&&!e.isClickedLink,text:"",bg:"",onClick:s[17]||(s[17]=h=>g(it).openColorPicker(g(i)))},{icon:te(()=>[ip]),_:1},8,["disabled"])]),_:1}),B("div",rp,[V(d,{ref_key:"linkColorPickerRef",ref:i,onChange:s[18]||(s[18]=h=>g(it).changeLinkColor(rt.value,h)),modelValue:di.value,"onUpdate:modelValue":s[19]||(s[19]=h=>di.value=h)},null,8,["modelValue"])])])])]),ap,B("div",sp,[op,B("div",lp,[B("div",cp,[V(c,{content:"路由模式",placement:"bottom"},{default:te(()=>[V(l,{style:{width:"90px"},onChange:s[20]||(s[20]=h=>g(it).changeRouterConfig(Ki,g(t))),modelValue:Ki.value.name,"onUpdate:modelValue":s[21]||(s[21]=h=>Ki.value.name=h),placeholder:"请选择路由模式"},{default:te(()=>[(_(!0),ne(Ze,null,Je(bm,h=>(_(),be(o,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),B("div",up,[V(c,{content:"连接端样式",placement:"bottom"},{default:te(()=>[V(l,{style:{width:"90px"},onChange:s[22]||(s[22]=h=>g(it).changeConnectorConfig(Ji,g(t))),modelValue:Ji.value.name,"onUpdate:modelValue":s[23]||(s[23]=h=>Ji.value.name=h),placeholder:"请选择连接端样式"},{default:te(()=>[(_(!0),ne(Ze,null,Je(Cm,h=>(_(),be(o,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])])])])}}});const Hp=ll(dp,[["__scopeId","data-v-526c8fff"]]);const gp=[{text:"明天",value:()=>{const e=new Date;return e.setTime(e.getTime()+3600*1e3*24),e}},{text:"一周后",value:()=>{const e=new Date;return e.setTime(e.getTime()+3600*1e3*24*7),e}},{text:"两周后",value:()=>{const e=new Date;return e.setTime(e.getTime()+3600*1e3*24*14),e}},{text:"一月后",value:()=>{const e=new Date;return e.setTime(e.getTime()+3600*1e3*24*30),e}},{text:"两月后",value:()=>{const e=new Date;return e.setTime(e.getTime()+3600*1e3*24*30),e}}],hp={class:"b-border-primary b-b-1 b-b-solid f-c-b pb-4"},fp={class:"left f-c-s"},mp=B("div",{class:"i-tabler-chevron-left"},null,-1),pp=["onKeyup"],Ip={class:"mt-2"},vp={class:"text-gray-500 text-0.8rem f-c-c"},Ap=B("div",{class:"i-tabler-clock mr-1"},null,-1),Cp={class:"right f-c-s"},bp={class:"mr-6 f-c-s text-gray-700 text-1.5rem"},yp={key:0},wp={key:1},Mp={key:0,class:"dialog-footer"},Np=B("div",{class:"i-tabler-check"},null,-1),kp=B("div",{class:"i-tabler-x"},null,-1),Jp=Se({__name:"HeaderToolsTop",props:{data:{type:Object},type:{type:String,default:"privacy"}},emits:["change"],setup(e,{emit:t}){const n=e,i=dt(Mr),r=dt(Fo),a=dt(Ho),s=localStorage.getStorageWithAge(Xo),o=ee(!1);function l(){const{width:b,height:v}=i.value.getArea();a.value.width=b,a.value.height=v,To(i.value,r.value,"jpeg",a.value,()=>{pn.success("下载成功！")})}const c=Q({get(){return a.value.fileName||(a.value.fileName="未命名的文件"),a.value.fileName},set(b){a.value.fileName=b}});function u(){t("change"),o.value=!o.value}const d=ee(!1),f=ee(),h=Di({deadShareDate:[{type:"date",required:!0,message:"请选择一个截止日期",trigger:"change"},{type:"date",required:!0,message:"请选择一个截止日期",trigger:"blur"}]});async function m(){if(n.type!=="share"){if(!f.value)return;await f.value.validate((b,v)=>{b&&(a.value.isPublic=1,Qr(a.value,w=>{w.code===200?pn.success("分享成功，复制链接浏览！"):(a.value.isPublic=0,pn.error("分享失败！"))}))})}}function p(){a.value.isPublic=0,a.value.deadShareDate=null,Qr(a.value,b=>{b.code===200?pn.success("取消分享成功！"):(a.value.isPublic=1,pn.error("取消分享失败！"))})}function A(){a.value.fileName="导入模板_"+a.value.fileName,ul(a.value,()=>{pn.success("导入成功，回到自己工作台查看吧！")})}return(b,v)=>{const w=nn,S=Bt,L=$n,z=Qo,Z=Fu,Y=Lu,W=qo,H=Do;return _(),ne("div",hp,[B("div",fp,[V(w,{onClick:v[0]||(v[0]=q=>b.$router.back()),type:"primary",bg:"",text:""},{icon:te(()=>[mp]),_:1}),B("img",{onClick:v[1]||(v[1]=q=>b.$router.push("/home")),src:cl,class:"mr-4 w-30 h-15 object-cover cursor-pointer"}),B("div",null,[He(B("div",{onKeyup:pt(u,["enter"])},[V(S,{modelValue:g(c),"onUpdate:modelValue":v[2]||(v[2]=q=>$r(c)?c.value=q:null),size:"small",placeholder:"请输入文件名"},null,8,["modelValue"])],40,pp),[[zt,g(o)]]),He(B("div",{class:"text-gray-700",onClick:v[3]||(v[3]=q=>o.value=!g(o))},Me(g(c)),513),[[zt,!g(o)]]),B("div",Ip,[B("div",vp,[Ap,qe(" 上次更新："+Me(g(xo)("yyyy-MM-dd HH:mm:ss",new Date(g(a).modifyDate))),1)])])])]),B("div",Cp,[B("div",bp,[V(L,{content:"下载"},{default:te(()=>[B("div",{onClick:l,class:"hover mr-4 i-tabler-download"})]),_:1}),V(L,{content:"分享"},{default:te(()=>[B("div",{onClick:v[4]||(v[4]=q=>d.value=!g(d)),class:"hover i-tabler-share"})]),_:1}),g(s)?(_(),be(L,{key:0,content:"导入模板"},{default:te(()=>[e.type==="share"?(_(),ne("div",{key:0,onClick:A,class:"hover i-tabler-file-import ml-4"})):Ie("",!0)]),_:1})):Ie("",!0)]),g(s)?(_(),be(nl,{key:0})):Ie("",!0)]),V(H,{modelValue:g(d),"onUpdate:modelValue":v[7]||(v[7]=q=>$r(d)?d.value=q:null),title:"分享流程图",width:"40%"},{footer:te(()=>[e.type==="privacy"?(_(),ne("span",Mp,[V(w,{disabled:!!g(a).isPublic,type:"primary",onClick:m},{icon:te(()=>[Np]),default:te(()=>[qe(" 确定公开 ")]),_:1},8,["disabled"]),V(w,{disabled:!g(a).isPublic,onClick:p},{icon:te(()=>[kp]),default:te(()=>[qe(" 取消公开 ")]),_:1},8,["disabled"])])):Ie("",!0)]),default:te(()=>[V(W,{ref_key:"formRef",ref:f,rules:g(h),model:g(a),"label-width":"100px","label-position":"right"},{default:te(()=>[V(z,{label:"状态"},{default:te(()=>[g(a).isPublic?(_(),ne("div",wp,"流程图已经公开，点击链接浏览")):(_(),ne("div",yp,"流程图没有公开，点击创建链接"))]),_:1}),g(a).isPublic?(_(),be(z,{key:0,label:"链接地址"},{default:te(()=>[V(Z,{type:"primary",onClick:v[5]||(v[5]=q=>b.$router.push("/share/flowchart/"+g(a).id))},{default:te(()=>[qe(" http://localhost:5173/#/share/flowchart/"+Me(g(a).id),1)]),_:1})]),_:1})):Ie("",!0),V(z,{prop:"deadShareDate",label:"截止日期"},{default:te(()=>[V(Y,{disabled:e.type==="share",modelValue:g(a).deadShareDate,"onUpdate:modelValue":v[6]||(v[6]=q=>g(a).deadShareDate=q),type:"datetime",shortcuts:g(gp)},null,8,["disabled","modelValue","shortcuts"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])])}}}),Dp={class:"bleuon__flowchat-footer-tools b-border-primary b-t-1 b-t-solid bg-#f6f7f8 f-c-e px-4 text-0.8rem"},xp={class:"scale-tool f-c-c"},Tp={class:"mr-4"},Kp=Se({__name:"FooterTools",setup(e){const t=dt(Mr);function n(){t.value.scale(at.value,at.value)}function i(){at.value=1,t.value.scale(at.value,at.value)}return(r,a)=>{const s=$n;return _(),ne("div",Dp,[B("div",xp,[B("div",Tp,[He(B("input",{type:"range",onChange:n,"onUpdate:modelValue":a[0]||(a[0]=o=>$i.value=o),min:"20",max:"200",step:"1"},null,544),[[Jo,$i.value]])]),V(s,{content:"重置缩放",placement:"top"},{default:te(()=>[B("div",{class:"cursor-pointer",onClick:i},Me($i.value)+"%",1)]),_:1})])])}}});export{Hp as H,Jp as _,Fp as a,Up as b,_p as c,Vp as d,zi as e,Si as f,Kp as g,Xp as h,Yp as i,Ki as j,Ji as l,Wp as o};
//# sourceMappingURL=FooterTools.vue_vue_type_script_setup_true_lang-b8c8b4f9.js.map
